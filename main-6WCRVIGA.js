import{$ as Kt,A as Wt,B as Wn,C as vl,D as yt,E as vC,F as IC,G as Kn,H as Vi,I as Za,J as Ja,K as Xa,L as Ui,M as wC,N as EC,O as TC,P as CC,Q as ec,R as tc,S as fe,T as et,U as Rt,V as Qn,W as Yp,X as Il,Y as tt,Z as at,_ as _r,a as V,aa as bC,b as Ae,ba as ct,c as Qr,ca as wl,d as y,da as q,e as F,ea as DC,f as $s,g as dC,h as hC,i as fC,j as pC,k as gC,l as Yr,m as Kp,n as Qp,o as Hs,p as At,q as Ka,r as mC,s as Qa,t as yl,u as _C,v as Gn,w as yC,x as mr,y as Li,z as Ya}from"./chunk-VUN4IAWB.js";function SC(t,e){return Object.is(t,e)}var gt=null,nc=!1,El=1,yr=Symbol("SIGNAL");function pe(t){let e=gt;return gt=t,e}function AC(){return gt}function OO(){return nc}var qs={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function eg(t){if(nc)throw new Error("");if(gt===null)return;gt.consumerOnSignalRead(t);let e=gt.nextProducerIndex++;if(Al(gt),e<gt.producerNode.length&&gt.producerNode[e]!==t&&rc(gt)){let n=gt.producerNode[e];Sl(n,gt.producerIndexOfThis[e])}gt.producerNode[e]!==t&&(gt.producerNode[e]=t,gt.producerIndexOfThis[e]=rc(gt)?MC(t,gt,e):0),gt.producerLastReadVersion[e]=t.version}function FO(){El++}function RC(t){if(!(rc(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===El)){if(!t.producerMustRecompute(t)&&!bl(t)){t.dirty=!1,t.lastCleanEpoch=El;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=El}}function NC(t){if(t.liveConsumerNode===void 0)return;let e=nc;nc=!0;try{for(let n of t.liveConsumerNode)n.dirty||PC(n)}finally{nc=e}}function xC(){return gt?.consumerAllowSignalWrites!==!1}function PC(t){t.dirty=!0,NC(t),t.consumerMarkedDirty?.(t)}function ic(t){return t&&(t.nextProducerIndex=0),pe(t)}function Cl(t,e){if(pe(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(rc(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Sl(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function bl(t){Al(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(RC(n),r!==n.version))return!0}return!1}function Dl(t){if(Al(t),rc(t))for(let e=0;e<t.producerNode.length;e++)Sl(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function MC(t,e,n){if(kC(t),t.liveConsumerNode.length===0&&OC(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=MC(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Sl(t,e){if(kC(t),t.liveConsumerNode.length===1&&OC(t))for(let r=0;r<t.producerNode.length;r++)Sl(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Al(i),i.producerIndexOfThis[r]=e}}function rc(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Al(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function kC(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function OC(t){return t.producerNode!==void 0}function FC(t){let e=Object.create(LO);e.computation=t;let n=()=>{if(RC(e),eg(e),e.value===Tl)throw e.error;return e.value};return n[yr]=e,n}var Zp=Symbol("UNSET"),Jp=Symbol("COMPUTING"),Tl=Symbol("ERRORED"),LO=Ae(V({},qs),{value:Zp,dirty:!0,error:null,equal:SC,producerMustRecompute(t){return t.value===Zp||t.value===Jp},producerRecomputeValue(t){if(t.value===Jp)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Jp;let n=ic(t),r;try{r=t.computation()}catch(i){r=Tl,t.error=i}finally{Cl(t,n)}if(e!==Zp&&e!==Tl&&r!==Tl&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function VO(){throw new Error}var LC=VO;function VC(){LC()}function UC(t){LC=t}var UO=null;function jC(t){let e=Object.create($C);e.value=t;let n=()=>(eg(e),e.value);return n[yr]=e,n}function tg(t,e){xC()||VC(),t.equal(t.value,e)||(t.value=e,jO(t))}function BC(t,e){xC()||VC(),tg(t,e(t.value))}var $C=Ae(V({},qs),{equal:SC,value:void 0});function jO(t){t.version++,FO(),NC(t),UO?.()}function HC(t,e,n){let r=Object.create(BO);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;let i=c=>{r.cleanupFn=c};function s(c){return c.fn===null&&c.schedule===null}function o(c){s(c)||(Dl(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=Xp)}let a=()=>{if(r.fn===null)return;if(OO())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!bl(r))return;r.hasRun=!0;let c=ic(r);try{r.cleanupFn(),r.cleanupFn=Xp,r.fn(i)}finally{Cl(r,c)}};return r.ref={notify:()=>PC(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>o(r),[yr]:r},r.ref}var Xp=()=>{},BO=Ae(V({},qs),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule!==null&&t.schedule(t.ref)},hasRun:!1,cleanupFn:Xp});function ie(t){return typeof t=="function"}function zs(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Rl=zs(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ji(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Qe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ie(r))try{r()}catch(s){e=s instanceof Rl?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{qC(s)}catch(o){e=e??[],o instanceof Rl?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Rl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)qC(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ji(n,e)}remove(e){let{_finalizers:n}=this;n&&ji(n,e),e instanceof t&&e._removeParent(this)}};Qe.EMPTY=(()=>{let t=new Qe;return t.closed=!0,t})();var ng=Qe.EMPTY;function Nl(t){return t instanceof Qe||t&&"closed"in t&&ie(t.remove)&&ie(t.add)&&ie(t.unsubscribe)}function qC(t){ie(t)?t():t.unsubscribe()}var Nn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Gs={setTimeout(t,e,...n){let{delegate:r}=Gs;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Gs;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function xl(t){Gs.setTimeout(()=>{let{onUnhandledError:e}=Nn;if(e)e(t);else throw t})}function sc(){}var zC=rg("C",void 0,void 0);function GC(t){return rg("E",void 0,t)}function WC(t){return rg("N",t,void 0)}function rg(t,e,n){return{kind:t,value:e,error:n}}var Bi=null;function Ws(t){if(Nn.useDeprecatedSynchronousErrorHandling){let e=!Bi;if(e&&(Bi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Bi;if(Bi=null,n)throw r}}else t()}function KC(t){Nn.useDeprecatedSynchronousErrorHandling&&Bi&&(Bi.errorThrown=!0,Bi.error=t)}var $i=class extends Qe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Nl(e)&&e.add(this)):this.destination=qO}static create(e,n,r){return new Ks(e,n,r)}next(e){this.isStopped?sg(WC(e),this):this._next(e)}error(e){this.isStopped?sg(GC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?sg(zC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},$O=Function.prototype.bind;function ig(t,e){return $O.call(t,e)}var og=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Pl(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Pl(r)}else Pl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Pl(n)}}},Ks=class extends $i{constructor(e,n,r){super();let i;if(ie(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Nn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ig(e.next,s),error:e.error&&ig(e.error,s),complete:e.complete&&ig(e.complete,s)}):i=e}this.destination=new og(i)}};function Pl(t){Nn.useDeprecatedSynchronousErrorHandling?KC(t):xl(t)}function HO(t){throw t}function sg(t,e){let{onStoppedNotification:n}=Nn;n&&Gs.setTimeout(()=>n(t,e))}var qO={closed:!0,next:sc,error:HO,complete:sc};var Qs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ut(t){return t}function Ml(...t){return ag(t)}function ag(t){return t.length===0?Ut:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ae=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=GO(n)?n:new Ks(n,r,i);return Ws(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=QC(r),new r((i,s)=>{let o=new Ks({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Qs](){return this}pipe(...n){return ag(n)(this)}toPromise(n){return n=QC(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function QC(t){var e;return(e=t??Nn.Promise)!==null&&e!==void 0?e:Promise}function zO(t){return t&&ie(t.next)&&ie(t.error)&&ie(t.complete)}function GO(t){return t&&t instanceof $i||zO(t)&&Nl(t)}function cg(t){return ie(t?.lift)}function ce(t){return e=>{if(cg(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(t,e,n,r,i){return new oc(t,e,n,r,i)}var oc=class extends $i{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ys(){return ce((t,e)=>{let n=null;t._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Zs=class extends ae{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,cg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Qe;let n=this.getSubject();e.add(this.source.subscribe(ue(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Qe.EMPTY)}return e}refCount(){return Ys()(this)}};var YC=zs(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var nt=(()=>{class t extends ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new kl(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new YC}next(n){Ws(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ws(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ws(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?ng:(this.currentObservers=null,s.push(n),new Qe(()=>{this.currentObservers=null,ji(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new ae;return n.source=this,n}}return t.create=(e,n)=>new kl(e,n),t})(),kl=class extends nt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:ng}};var Et=class extends nt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ac={now(){return(ac.delegate||Date).now()},delegate:void 0};var cc=class extends nt{constructor(e=1/0,n=1/0,r=ac){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var Ol=class extends Qe{constructor(e,n){super()}schedule(e,n=0){return this}};var uc={setInterval(t,e,...n){let{delegate:r}=uc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=uc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Js=class extends Ol{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return uc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&uc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ji(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Xs=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Xs.now=ac.now;var eo=class extends Xs{constructor(e,n=Xs.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var ug=new eo(Js);var Fl=class extends Js{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Ll=class extends eo{};var lg=new Ll(Fl);var rn=new ae(t=>t.complete());function ZC(t){return t&&ie(t.schedule)}function JC(t){return t[t.length-1]}function XC(t){return ie(JC(t))?t.pop():void 0}function Zr(t){return ZC(JC(t))?t.pop():void 0}function dg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function tb(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(f){o(f)}}function c(d){try{l(r.throw(d))}catch(f){o(f)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function eb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hi(t){return this instanceof Hi?(this.v=t,this):new Hi(t)}function nb(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(_){return function(E){return Promise.resolve(E).then(_,f)}}function a(_,E){r[_]&&(i[_]=function(R){return new Promise(function(A,M){s.push([_,R,A,M])>1||c(_,R)})},E&&(i[_]=E(i[_])))}function c(_,E){try{l(r[_](E))}catch(R){g(s[0][3],R)}}function l(_){_.value instanceof Hi?Promise.resolve(_.value.v).then(d,f):g(s[0][2],_)}function d(_){c("next",_)}function f(_){c("throw",_)}function g(_,E){_(E),s.shift(),s.length&&c(s[0][0],s[0][1])}}function rb(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof eb=="function"?eb(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Vl=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ul(t){return ie(t?.then)}function jl(t){return ie(t[Qs])}function Bl(t){return Symbol.asyncIterator&&ie(t?.[Symbol.asyncIterator])}function $l(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function WO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Hl=WO();function ql(t){return ie(t?.[Hl])}function zl(t){return nb(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Hi(n.read());if(i)return yield Hi(void 0);yield yield Hi(r)}}finally{n.releaseLock()}})}function Gl(t){return ie(t?.getReader)}function ut(t){if(t instanceof ae)return t;if(t!=null){if(jl(t))return KO(t);if(Vl(t))return QO(t);if(Ul(t))return YO(t);if(Bl(t))return ib(t);if(ql(t))return ZO(t);if(Gl(t))return JO(t)}throw $l(t)}function KO(t){return new ae(e=>{let n=t[Qs]();if(ie(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function QO(t){return new ae(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function YO(t){return new ae(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,xl)})}function ZO(t){return new ae(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function ib(t){return new ae(e=>{XO(t,e).catch(n=>e.error(n))})}function JO(t){return ib(zl(t))}function XO(t,e){var n,r,i,s;return tb(this,void 0,void 0,function*(){try{for(n=rb(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function Qt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Jr(t,e=0){return ce((n,r)=>{n.subscribe(ue(r,i=>Qt(r,t,()=>r.next(i),e),()=>Qt(r,t,()=>r.complete(),e),i=>Qt(r,t,()=>r.error(i),e)))})}function Xr(t,e=0){return ce((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function sb(t,e){return ut(t).pipe(Xr(e),Jr(e))}function ob(t,e){return ut(t).pipe(Xr(e),Jr(e))}function ab(t,e){return new ae(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function cb(t,e){return new ae(n=>{let r;return Qt(n,e,()=>{r=t[Hl](),Qt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>ie(r?.return)&&r.return()})}function Wl(t,e){if(!t)throw new Error("Iterable cannot be null");return new ae(n=>{Qt(n,e,()=>{let r=t[Symbol.asyncIterator]();Qt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function ub(t,e){return Wl(zl(t),e)}function lb(t,e){if(t!=null){if(jl(t))return sb(t,e);if(Vl(t))return ab(t,e);if(Ul(t))return ob(t,e);if(Bl(t))return Wl(t,e);if(ql(t))return cb(t,e);if(Gl(t))return ub(t,e)}throw $l(t)}function Ye(t,e){return e?lb(t,e):ut(t)}function K(...t){let e=Zr(t);return Ye(t,e)}function to(t,e){let n=ie(t)?t:()=>t,r=i=>i.error(n());return new ae(e?i=>e.schedule(r,0,i):r)}function hg(t){return!!t&&(t instanceof ae||ie(t.lift)&&ie(t.subscribe))}var vr=zs(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Q(t,e){return ce((n,r)=>{let i=0;n.subscribe(ue(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:e1}=Array;function t1(t,e){return e1(e)?t(...e):t(e)}function db(t){return Q(e=>t1(t,e))}var{isArray:n1}=Array,{getPrototypeOf:r1,prototype:i1,keys:s1}=Object;function hb(t){if(t.length===1){let e=t[0];if(n1(e))return{args:e,keys:null};if(o1(e)){let n=s1(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function o1(t){return t&&typeof t=="object"&&r1(t)===i1}function fb(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function no(...t){let e=Zr(t),n=XC(t),{args:r,keys:i}=hb(t);if(r.length===0)return Ye([],e);let s=new ae(a1(r,e,i?o=>fb(i,o):Ut));return n?s.pipe(db(n)):s}function a1(t,e,n=Ut){return r=>{pb(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)pb(e,()=>{let l=Ye(t[c],e),d=!1;l.subscribe(ue(r,f=>{s[c]=f,d||(d=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function pb(t,e,n){t?Qt(n,t,e):e()}function gb(t,e,n,r,i,s,o,a){let c=[],l=0,d=0,f=!1,g=()=>{f&&!c.length&&!l&&e.complete()},_=R=>l<r?E(R):c.push(R),E=R=>{s&&e.next(R),l++;let A=!1;ut(n(R,d++)).subscribe(ue(e,M=>{i?.(M),s?_(M):e.next(M)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;c.length&&l<r;){let M=c.shift();o?Qt(e,o,()=>E(M)):E(M)}g()}catch(M){e.error(M)}}))};return t.subscribe(ue(e,_,()=>{f=!0,g()})),()=>{a?.()}}function rt(t,e,n=1/0){return ie(e)?rt((r,i)=>Q((s,o)=>e(r,s,i,o))(ut(t(r,i))),n):(typeof e=="number"&&(n=e),ce((r,i)=>gb(r,i,t,n)))}function fg(t=1/0){return rt(Ut,t)}function mb(){return fg(1)}function ro(...t){return mb()(Ye(t,Zr(t)))}function Kl(t){return new ae(e=>{ut(t()).subscribe(e)})}function jt(t,e){return ce((n,r)=>{let i=0;n.subscribe(ue(r,s=>t.call(e,s,i++)&&r.next(s)))})}function ei(t){return ce((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ue(n,void 0,void 0,o=>{s=ut(t(o,ei(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function _b(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(ue(o,d=>{let f=l++;c=a?t(c,d,f):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function qi(t,e){return ie(e)?rt(t,e,1):rt(t,1)}function ti(t){return ce((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Ir(t){return t<=0?()=>rn:ce((e,n)=>{let r=0;e.subscribe(ue(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function pg(t){return Q(()=>t)}function Ql(t,e=Ut){return t=t??c1,ce((n,r)=>{let i,s=!0;n.subscribe(ue(r,o=>{let a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function c1(t,e){return t===e}function Yl(t=u1){return ce((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function u1(){return new vr}function lc(t){return ce((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Yn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?jt((i,s)=>t(i,s,r)):Ut,Ir(1),n?ti(e):Yl(()=>new vr))}function gg(t,e,n,r){return ce((i,s)=>{let o;!e||typeof e=="function"?o=e:{duration:n,element:o,connector:r}=e;let a=new Map,c=E=>{a.forEach(E),E(s)},l=E=>c(R=>R.error(E)),d=0,f=!1,g=new oc(s,E=>{try{let R=t(E),A=a.get(R);if(!A){a.set(R,A=r?r():new nt);let M=_(R,A);if(s.next(M),n){let L=ue(A,()=>{A.complete(),L?.unsubscribe()},void 0,void 0,()=>a.delete(R));g.add(ut(n(M)).subscribe(L))}}A.next(o?o(E):E)}catch(R){l(R)}},()=>c(E=>E.complete()),l,()=>a.clear(),()=>(f=!0,d===0));i.subscribe(g);function _(E,R){let A=new ae(M=>{d++;let L=R.subscribe(M);return()=>{L.unsubscribe(),--d===0&&f&&g.unsubscribe()}});return A.key=E,A}})}function io(t){return t<=0?()=>rn:ce((e,n)=>{let r=[];e.subscribe(ue(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function mg(t,e){let n=arguments.length>=2;return r=>r.pipe(t?jt((i,s)=>t(i,s,r)):Ut,io(1),n?ti(e):Yl(()=>new vr))}function Zl(){return ce((t,e)=>{let n,r=!1;t.subscribe(ue(e,i=>{let s=n;n=i,r&&e.next([s,i]),r=!0}))})}function Jl(t,e){return ce(_b(t,e,arguments.length>=2,!0))}function so(...t){let e=Zr(t);return ce((n,r)=>{(e?ro(t,n,e):ro(t,n)).subscribe(r)})}function Yt(t,e){return ce((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(ue(r,c=>{i?.unsubscribe();let l=0,d=s++;ut(t(c,d)).subscribe(i=ue(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function sn(t){return ce((e,n)=>{ut(t).subscribe(ue(n,()=>n.complete(),sc)),!n.closed&&e.subscribe(n)})}function mt(t,e,n){let r=ie(t)||e||n?{next:t,error:e,complete:n}:t;return r?ce((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ue(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Ut}var W=class extends Error{constructor(e,n){super(cm(e,n)),this.code=e}};function cm(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Rd(t){return{toString:t}.toString()}var Xl="__parameters__";function l1(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function d1(t,e,n){return Rd(()=>{let r=l1(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,d){let f=c.hasOwnProperty(Xl)?c[Xl]:Object.defineProperty(c,Xl,{value:[]})[Xl];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var dc=globalThis;function Pe(t){for(let e in t)if(t[e]===Pe)return e;throw Error("Could not find renamed property on target object.")}function on(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(on).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function yb(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var h1=Pe({__forward_ref__:Pe});function Jb(t){return t.__forward_ref__=Jb,t.toString=function(){return on(this())},t}function _n(t){return Xb(t)?t():t}function Xb(t){return typeof t=="function"&&t.hasOwnProperty(h1)&&t.__forward_ref__===Jb}function H(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Nd(t){return vb(t,tD)||vb(t,nD)}function eD(t){return Nd(t)!==null}function vb(t,e){return t.hasOwnProperty(e)?t[e]:null}function f1(t){let e=t&&(t[tD]||t[nD]);return e||null}function Ib(t){return t&&(t.hasOwnProperty(wb)||t.hasOwnProperty(p1))?t[wb]:null}var tD=Pe({\u0275prov:Pe}),wb=Pe({\u0275inj:Pe}),nD=Pe({ngInjectableDef:Pe}),p1=Pe({ngInjectorDef:Pe}),U=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=H({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function rD(t){return t&&!!t.\u0275providers}var g1=Pe({\u0275cmp:Pe}),m1=Pe({\u0275dir:Pe}),_1=Pe({\u0275pipe:Pe}),y1=Pe({\u0275mod:Pe}),ad=Pe({\u0275fac:Pe}),pc=Pe({__NG_ELEMENT_ID__:Pe}),Eb=Pe({__NG_ENV_ID__:Pe});function iD(t){return typeof t=="string"?t:t==null?"":String(t)}function v1(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():iD(t)}function I1(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new W(-200,t)}function um(t,e){throw new W(-201,!1)}var le=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(le||{}),bg;function sD(){return bg}function Zt(t){let e=bg;return bg=t,e}function oD(t,e,n){let r=Nd(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&le.Optional)return null;if(e!==void 0)return e;um(t,"Injector")}var w1={},gc=w1,Dg="__NG_DI_FLAG__",cd="ngTempTokenPath",E1="ngTokenPath",T1=/\n/gm,C1="\u0275",Tb="__source",uo;function b1(){return uo}function ni(t){let e=uo;return uo=t,e}function D1(t,e=le.Default){if(uo===void 0)throw new W(-203,!1);return uo===null?oD(t,void 0,e):uo.get(t,e&le.Optional?null:void 0,e)}function J(t,e=le.Default){return(sD()||D1)(_n(t),e)}function P(t,e=le.Default){return J(t,xd(e))}function xd(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Sg(t){let e=[];for(let n=0;n<t.length;n++){let r=_n(t[n]);if(Array.isArray(r)){if(r.length===0)throw new W(900,!1);let i,s=le.Default;for(let o=0;o<r.length;o++){let a=r[o],c=A1(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(J(i,s))}else e.push(J(r))}return e}function S1(t,e){return t[Dg]=e,t.prototype[Dg]=e,t}function A1(t){return t[Dg]}function R1(t,e,n,r){let i=t[cd];throw e[Tb]&&i.unshift(e[Tb]),t.message=N1(`
`+t.message,i,n,r),t[E1]=i,t[cd]=null,t}function N1(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==C1?t.slice(2):t;let i=on(e);if(Array.isArray(e))i=e.map(on).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):on(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(T1,`
  `)}`}var te=S1(d1("Optional"),8);function Wi(t,e){let n=t.hasOwnProperty(ad);return n?t[ad]:null}function lm(t,e){t.forEach(n=>Array.isArray(n)?lm(n,e):e(n))}function aD(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ud(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var mc={},ho=[],fo=new U(""),cD=new U("",-1),uD=new U(""),ld=class{get(e,n=gc){if(n===gc){let r=new Error(`NullInjectorError: No provider for ${on(e)}!`);throw r.name="NullInjectorError",r}return n}},lD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(lD||{}),Xn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Xn||{}),si=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(si||{});function x1(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Ag(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];M1(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function P1(t){return t===3||t===4||t===6}function M1(t){return t.charCodeAt(0)===64}function dm(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Cb(t,n,i,null,e[++r]):Cb(t,n,i,null,null))}}return t}function Cb(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var dD="ng-template";function k1(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&x1(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(hm(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function hm(t){return t.type===4&&t.value!==dD}function O1(t,e,n){let r=t.type===4&&!n?dD:t.value;return e===r}function F1(t,e,n){let r=4,i=t.attrs,s=i!==null?U1(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!xn(r)&&!xn(c))return!1;if(o&&xn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!O1(t,c,n)||c===""&&e.length===1){if(xn(r))return!1;o=!0}}else if(r&8){if(i===null||!k1(t,i,c,n)){if(xn(r))return!1;o=!0}}else{let l=e[++a],d=L1(c,i,hm(t),n);if(d===-1){if(xn(r))return!1;o=!0;continue}if(l!==""){let f;if(d>s?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(xn(r))return!1;o=!0}}}}return xn(r)||o}function xn(t){return(t&1)===0}function L1(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return j1(e,t)}function V1(t,e,n=!1){for(let r=0;r<e.length;r++)if(F1(t,e[r],n))return!0;return!1}function U1(t){for(let e=0;e<t.length;e++){let n=t[e];if(P1(n))return e}return t.length}function j1(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function bb(t,e){return t?":not("+e.trim()+")":e}function B1(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!xn(o)&&(e+=bb(s,i),i=""),r=o,s=s||!xn(r);n++}return i!==""&&(e+=bb(s,i)),e}function $1(t){return t.map(B1).join(",")}function H1(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!xn(i))break;i=s}r++}return{attrs:e,classes:n}}function ui(t){return Rd(()=>{let e=_D(t),n=Ae(V({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===lD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Xn.Emulated,styles:t.styles||ho,_:null,schemas:t.schemas||null,tView:null,id:""});yD(n);let r=t.dependencies;return n.directiveDefs=Sb(r,!1),n.pipeDefs=Sb(r,!0),n.id=G1(n),n})}function q1(t){return Ki(t)||fD(t)}function z1(t){return t!==null}function Db(t,e){if(t==null)return mc;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=si.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==si.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Pd(t){return Rd(()=>{let e=_D(t);return yD(e),e})}function hD(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Ki(t){return t[g1]||null}function fD(t){return t[m1]||null}function pD(t){return t[_1]||null}function gD(t){let e=Ki(t)||fD(t)||pD(t);return e!==null?e.standalone:!1}function mD(t,e){let n=t[y1]||null;if(!n&&e===!0)throw new Error(`Type ${on(t)} does not have '\u0275mod' property.`);return n}function _D(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||mc,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||ho,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Db(t.inputs,e),outputs:Db(t.outputs),debugInfo:null}}function yD(t){t.features?.forEach(e=>e(t))}function Sb(t,e){if(!t)return null;let n=e?pD:q1;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(z1)}function G1(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Oe(t){return{\u0275providers:t}}function W1(...t){return{\u0275providers:vD(!0,t),\u0275fromNgModule:!0}}function vD(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return lm(e,o=>{let a=o;Rg(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&ID(i,s),n}function ID(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];fm(i,s=>{e(s,r)})}}function Rg(t,e,n,r){if(t=_n(t),!t)return!1;let i=null,s=Ib(t),o=!s&&Ki(t);if(!s&&!o){let c=t.ngModule;if(s=Ib(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Rg(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{lm(s.imports,d=>{Rg(d,e,n,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&ID(l,e)}if(!a){let l=Wi(i)||(()=>new i);e({provide:i,useFactory:l,deps:ho},i),e({provide:uD,useValue:i,multi:!0},i),e({provide:fo,useValue:()=>J(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;fm(c,d=>{e(d,l)})}}else return!1;return i!==t&&t.providers!==void 0}function fm(t,e){for(let n of t)rD(n)&&(n=n.\u0275providers),Array.isArray(n)?fm(n,e):e(n)}var K1=Pe({provide:String,useValue:Pe});function wD(t){return t!==null&&typeof t=="object"&&K1 in t}function Q1(t){return!!(t&&t.useExisting)}function Y1(t){return!!(t&&t.useFactory)}function Ng(t){return typeof t=="function"}var Md=new U(""),td={},Z1={},_g;function pm(){return _g===void 0&&(_g=new ld),_g}var vn=class{},_c=class extends vn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Pg(e,o=>this.processProvider(o)),this.records.set(cD,oo(void 0,this)),i.has("environment")&&this.records.set(vn,oo(void 0,this));let s=this.records.get(Md);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(uD,ho,le.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=pe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),pe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=ni(this),r=Zt(void 0),i;try{return e()}finally{ni(n),Zt(r)}}get(e,n=gc,r=le.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Eb))return e[Eb](this);r=xd(r);let i,s=ni(this),o=Zt(void 0);try{if(!(r&le.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=rF(e)&&Nd(e);l&&this.injectableDefInScope(l)?c=oo(xg(e),td):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&le.Self?pm():this.parent;return n=r&le.Optional&&n===gc?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[cd]=a[cd]||[]).unshift(on(e)),s)throw a;return R1(a,e,"R3InjectorError",this.source)}else throw a}finally{Zt(o),ni(s)}}resolveInjectorInitializers(){let e=pe(null),n=ni(this),r=Zt(void 0),i;try{let s=this.get(fo,ho,le.Self);for(let o of s)o()}finally{ni(n),Zt(r),pe(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(on(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new W(205,!1)}processProvider(e){e=_n(e);let n=Ng(e)?e:_n(e&&e.provide),r=X1(e);if(!Ng(e)&&e.multi===!0){let i=this.records.get(n);i||(i=oo(void 0,td,!0),i.factory=()=>Sg(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=pe(null);try{return n.value===td&&(n.value=Z1,n.value=n.factory()),typeof n.value=="object"&&n.value&&nF(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{pe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=_n(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function xg(t){let e=Nd(t),n=e!==null?e.factory:Wi(t);if(n!==null)return n;if(t instanceof U)throw new W(204,!1);if(t instanceof Function)return J1(t);throw new W(204,!1)}function J1(t){if(t.length>0)throw new W(204,!1);let n=f1(t);return n!==null?()=>n.factory(t):()=>new t}function X1(t){if(wD(t))return oo(void 0,t.useValue);{let e=eF(t);return oo(e,td)}}function eF(t,e,n){let r;if(Ng(t)){let i=_n(t);return Wi(i)||xg(i)}else if(wD(t))r=()=>_n(t.useValue);else if(Y1(t))r=()=>t.useFactory(...Sg(t.deps||[]));else if(Q1(t))r=()=>J(_n(t.useExisting));else{let i=_n(t&&(t.useClass||t.provide));if(tF(t))r=()=>new i(...Sg(t.deps));else return Wi(i)||xg(i)}return r}function oo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function tF(t){return!!t.deps}function nF(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function rF(t){return typeof t=="function"||typeof t=="object"&&t instanceof U}function Pg(t,e){for(let n of t)Array.isArray(n)?Pg(n,e):n&&rD(n)?Pg(n.\u0275providers,e):e(n)}function Er(t,e){t instanceof _c&&t.assertNotDestroyed();let n,r=ni(t),i=Zt(void 0);try{return e()}finally{ni(r),Zt(i)}}function ED(){return sD()!==void 0||b1()!=null}function kd(t){if(!ED())throw new W(-203,!1)}function iF(t){return typeof t=="function"}var Tr=0,de=1,ee=2,$t=3,Pn=4,Mn=5,dd=6,hd=7,In=8,po=9,wr=10,Ht=11,yc=12,Ab=13,wo=14,er=15,go=16,ao=17,mo=18,Od=19,TD=20,ri=21,nd=22,yn=23,wn=25,CD=1;var Qi=7,fd=8,pd=9,an=10,gd=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(gd||{});function ii(t){return Array.isArray(t)&&typeof t[CD]=="object"}function Cr(t){return Array.isArray(t)&&t[CD]===!0}function bD(t){return(t.flags&4)!==0}function Fd(t){return t.componentOffset>-1}function gm(t){return(t.flags&1)===1}function Tc(t){return!!t.template}function Mg(t){return(t[ee]&512)!==0}var kg=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function DD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Ld(){return SD}function SD(t){return t.type.prototype.ngOnChanges&&(t.setInput=oF),sF}Ld.ngInherit=!0;function sF(){let t=RD(this),e=t?.current;if(e){let n=t.previous;if(n===mc)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function oF(t,e,n,r,i){let s=this.declaredInputs[r],o=RD(t)||aF(t,{previous:mc,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new kg(l&&l.currentValue,n,c===mc),DD(t,e,i,n)}var AD="__ngSimpleChanges__";function RD(t){return t[AD]||null}function aF(t,e){return t[AD]=e}var Rb=null;var Zn=function(t,e,n){Rb?.(t,e,n)},cF="svg",uF="math";function tr(t){for(;Array.isArray(t);)t=t[Tr];return t}function lF(t,e){return tr(e[t])}function kn(t,e){return tr(e[t.index])}function mm(t,e){return t.data[e]}function dF(t,e){return t[e]}function li(t,e){let n=e[t];return ii(n)?n:n[Tr]}function _m(t){return(t[ee]&128)===128}function hF(t){return Cr(t[$t])}function md(t,e){return e==null?null:t[e]}function ND(t){t[ao]=0}function xD(t){t[ee]&1024||(t[ee]|=1024,_m(t)&&Ud(t))}function fF(t,e){for(;t>0;)e=e[wo],t--;return e}function Vd(t){return!!(t[ee]&9216||t[yn]?.dirty)}function Og(t){t[wr].changeDetectionScheduler?.notify(8),t[ee]&64&&(t[ee]|=1024),Vd(t)&&Ud(t)}function Ud(t){t[wr].changeDetectionScheduler?.notify(0);let e=Yi(t);for(;e!==null&&!(e[ee]&8192||(e[ee]|=8192,!_m(e)));)e=Yi(e)}function PD(t,e){if((t[ee]&256)===256)throw new W(911,!1);t[ri]===null&&(t[ri]=[]),t[ri].push(e)}function pF(t,e){if(t[ri]===null)return;let n=t[ri].indexOf(e);n!==-1&&t[ri].splice(n,1)}function Yi(t){let e=t[$t];return Cr(e)?e[$t]:e}var ge={lFrame:qD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var MD=!1;function gF(){return ge.lFrame.elementDepthCount}function mF(){ge.lFrame.elementDepthCount++}function _F(){ge.lFrame.elementDepthCount--}function kD(){return ge.bindingsEnabled}function yF(){return ge.skipHydrationRootTNode!==null}function vF(t){return ge.skipHydrationRootTNode===t}function IF(){ge.skipHydrationRootTNode=null}function Ze(){return ge.lFrame.lView}function di(){return ge.lFrame.tView}function OD(t){return ge.lFrame.contextLView=t,t[In]}function FD(t){return ge.lFrame.contextLView=null,t}function On(){let t=LD();for(;t!==null&&t.type===64;)t=t.parent;return t}function LD(){return ge.lFrame.currentTNode}function wF(){let t=ge.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Cc(t,e){let n=ge.lFrame;n.currentTNode=t,n.isParent=e}function VD(){return ge.lFrame.isParent}function EF(){ge.lFrame.isParent=!1}function UD(){return MD}function Nb(t){MD=t}function jD(){let t=ge.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function TF(t){return ge.lFrame.bindingIndex=t}function ym(){return ge.lFrame.bindingIndex++}function CF(){return ge.lFrame.inI18n}function bF(t,e){let n=ge.lFrame;n.bindingIndex=n.bindingRootIndex=t,Fg(e)}function DF(){return ge.lFrame.currentDirectiveIndex}function Fg(t){ge.lFrame.currentDirectiveIndex=t}function BD(t){ge.lFrame.currentQueryIndex=t}function SF(t){let e=t[de];return e.type===2?e.declTNode:e.type===1?t[Mn]:null}function $D(t,e,n){if(n&le.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&le.Host);)if(i=SF(s),i===null||(s=s[wo],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=ge.lFrame=HD();return r.currentTNode=e,r.lView=t,!0}function vm(t){let e=HD(),n=t[de];ge.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function HD(){let t=ge.lFrame,e=t===null?null:t.child;return e===null?qD(t):e}function qD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function zD(){let t=ge.lFrame;return ge.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var GD=zD;function Im(){let t=zD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function AF(t){return(ge.lFrame.contextLView=fF(t,ge.lFrame.contextLView))[In]}function wm(){return ge.lFrame.selectedIndex}function Zi(t){ge.lFrame.selectedIndex=t}function RF(){let t=ge.lFrame;return mm(t.tView,t.selectedIndex)}function NF(){return ge.lFrame.currentNamespace}var WD=!0;function Em(){return WD}function Tm(t){WD=t}function xF(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=SD(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Cm(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function rd(t,e,n){KD(t,e,3,n)}function id(t,e,n,r){(t[ee]&3)===n&&KD(t,e,n,r)}function yg(t,e){let n=t[ee];(n&3)===e&&(n&=16383,n+=1,t[ee]=n)}function KD(t,e,n,r){let i=r!==void 0?t[ao]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[ao]+=65536),(a<s||s==-1)&&(PF(t,n,e,c),t[ao]=(t[ao]&4294901760)+c+2),c++}function xb(t,e){Zn(4,t,e);let n=pe(null);try{e.call(t)}finally{pe(n),Zn(5,t,e)}}function PF(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[ee]>>14<t[ao]>>16&&(t[ee]&3)===e&&(t[ee]+=16384,xb(a,s)):xb(a,s)}var lo=-1,vc=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function MF(t){return t instanceof vc}function kF(t){return(t.flags&8)!==0}function OF(t){return(t.flags&16)!==0}var vg={},Lg=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=xd(r);let i=this.injector.get(e,vg,r);return i!==vg||n===vg?i:this.parentInjector.get(e,n,r)}};function QD(t){return t!==lo}function _d(t){return t&32767}function FF(t){return t>>16}function yd(t,e){let n=FF(t),r=e;for(;n>0;)r=r[wo],n--;return r}var Vg=!0;function vd(t){let e=Vg;return Vg=t,e}var LF=256,YD=LF-1,ZD=5,VF=0,Jn={};function UF(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(pc)&&(r=n[pc]),r==null&&(r=n[pc]=VF++);let i=r&YD,s=1<<i;e.data[t+(i>>ZD)]|=s}function JD(t,e){let n=XD(t,e);if(n!==-1)return n;let r=e[de];r.firstCreatePass&&(t.injectorIndex=e.length,Ig(r.data,t),Ig(e,null),Ig(r.blueprint,null));let i=bm(t,e),s=t.injectorIndex;if(QD(i)){let o=_d(i),a=yd(i,e),c=a[de].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Ig(t,e){t.push(0,0,0,0,0,0,0,0,e)}function XD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function bm(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=iS(i),r===null)return lo;if(n++,i=i[wo],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return lo}function jF(t,e,n){UF(t,e,n)}function eS(t,e,n){if(n&le.Optional||t!==void 0)return t;um(e,"NodeInjector")}function tS(t,e,n,r){if(n&le.Optional&&r===void 0&&(r=null),!(n&(le.Self|le.Host))){let i=t[po],s=Zt(void 0);try{return i?i.get(e,r,n&le.Optional):oD(e,r,n&le.Optional)}finally{Zt(s)}}return eS(r,e,n)}function nS(t,e,n,r=le.Default,i){if(t!==null){if(e[ee]&2048&&!(r&le.Self)){let o=zF(t,e,n,r,Jn);if(o!==Jn)return o}let s=rS(t,e,n,r,Jn);if(s!==Jn)return s}return tS(e,n,r,i)}function rS(t,e,n,r,i){let s=HF(n);if(typeof s=="function"){if(!$D(e,t,r))return r&le.Host?eS(i,n,r):tS(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&le.Optional))um(n);else return o}finally{GD()}}else if(typeof s=="number"){let o=null,a=XD(t,e),c=lo,l=r&le.Host?e[er][Mn]:null;for((a===-1||r&le.SkipSelf)&&(c=a===-1?bm(t,e):e[a+8],c===lo||!Mb(r,!1)?a=-1:(o=e[de],a=_d(c),e=yd(c,e)));a!==-1;){let d=e[de];if(Pb(s,a,d.data)){let f=BF(a,e,n,o,r,l);if(f!==Jn)return f}c=e[a+8],c!==lo&&Mb(r,e[de].data[a+8]===l)&&Pb(s,a,e)?(o=d,a=_d(c),e=yd(c,e)):a=-1}}return i}function BF(t,e,n,r,i,s){let o=e[de],a=o.data[t+8],c=r==null?Fd(a)&&Vg:r!=o&&(a.type&3)!==0,l=i&le.Host&&s===a,d=$F(a,o,n,c,l);return d!==null?Ic(e,o,d,a):Jn}function $F(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,d=s>>20,f=r?a:a+d,g=i?a+d:l;for(let _=f;_<g;_++){let E=o[_];if(_<c&&n===E||_>=c&&E.type===n)return _}if(i){let _=o[c];if(_&&Tc(_)&&_.type===n)return c}return null}function Ic(t,e,n,r){let i=t[n],s=e.data;if(MF(i)){let o=i;o.resolving&&I1(v1(s[n]));let a=vd(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?Zt(o.injectImpl):null,d=$D(t,r,le.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&xF(n,s[n],e)}finally{l!==null&&Zt(l),vd(a),o.resolving=!1,GD()}}return i}function HF(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(pc)?t[pc]:void 0;return typeof e=="number"?e>=0?e&YD:qF:e}function Pb(t,e,n){let r=1<<t;return!!(n[e+(t>>ZD)]&r)}function Mb(t,e){return!(t&le.Self)&&!(t&le.Host&&e)}var Gi=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return nS(this._tNode,this._lView,e,xd(r),n)}};function qF(){return new Gi(On(),Ze())}function Dm(t){return Rd(()=>{let e=t.prototype.constructor,n=e[ad]||Ug(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[ad]||Ug(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Ug(t){return Xb(t)?()=>{let e=Ug(_n(t));return e&&e()}:Wi(t)}function zF(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[ee]&2048&&!(o[ee]&512);){let a=rS(s,o,n,r|le.Self,Jn);if(a!==Jn)return a;let c=s.parent;if(!c){let l=o[TD];if(l){let d=l.get(n,Jn,r);if(d!==Jn)return d}c=iS(o),o=o[wo]}s=c}return i}function iS(t){let e=t[de],n=e.type;return n===2?e.declTNode:n===1?t[Mn]:null}function kb(t,e=null,n=null,r){let i=sS(t,e,n,r);return i.resolveInjectorInitializers(),i}function sS(t,e=null,n=null,r,i=new Set){let s=[n||ho,W1(t)];return r=r||(typeof t=="object"?void 0:on(t)),new _c(s,e||pm(),r||null,i)}var me=class t{static{this.THROW_IF_NOT_FOUND=gc}static{this.NULL=new ld}static create(e,n){if(Array.isArray(e))return kb({name:""},n,e,"");{let r=e.name??"";return kb({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=H({token:t,providedIn:"any",factory:()=>J(cD)})}static{this.__NG_ELEMENT_ID__=-1}};var GF=new U("");GF.__NG_ELEMENT_ID__=t=>{let e=On();if(e===null)throw new W(204,!1);if(e.type&2)return e.value;if(t&le.Optional)return null;throw new W(204,!1)};var WF="ngOriginalError";function wg(t){return t[WF]}var oS=!0,Eo=(()=>{class t{static{this.__NG_ELEMENT_ID__=KF}static{this.__NG_ENV_ID__=n=>n}}return t})(),jg=class extends Eo{constructor(e){super(),this._lView=e}onDestroy(e){return PD(this._lView,e),()=>pF(this._lView,e)}};function KF(){return new jg(Ze())}var Xi=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Et(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}}return t})();var Bg=class extends nt{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,ED()&&(this.destroyRef=P(Eo,{optional:!0})??void 0,this.pendingTasks=P(Xi,{optional:!0})??void 0)}emit(e){let n=pe(null);try{super.next(e)}finally{pe(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Qe&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Bt=Bg;function Id(...t){}function aS(t){let e,n;function r(){t=Id;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function Ob(t){return queueMicrotask(()=>t()),()=>{t=Id}}var Sm="isAngularZone",wd=Sm+"_ID",QF=0,Z=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bt(!1),this.onMicrotaskEmpty=new Bt(!1),this.onStable=new Bt(!1),this.onError=new Bt(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=oS}=e;if(typeof Zone>"u")throw new W(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,JF(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Sm)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new W(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new W(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,YF,Id,Id);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},YF={};function Am(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ZF(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){aS(()=>{t.callbackScheduled=!1,$g(t),t.isCheckStableRunning=!0,Am(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),$g(t)}function JF(t){let e=()=>{ZF(t)},n=QF++;t._inner=t._inner.fork({name:"angular",properties:{[Sm]:!0,[wd]:n,[wd+n]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(XF(c))return r.invokeTask(s,o,a,c);try{return Fb(t),r.invokeTask(s,o,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Lb(t)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return Fb(t),r.invoke(s,o,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!eL(c)&&e(),Lb(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,$g(t),Am(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function $g(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Fb(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Lb(t){t._nesting--,Am(t)}var Hg=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Bt,this.onMicrotaskEmpty=new Bt,this.onStable=new Bt,this.onError=new Bt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function XF(t){return cS(t,"__ignore_ng_zone__")}function eL(t){return cS(t,"__scheduler_tick__")}function cS(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var nr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&wg(e);for(;n&&wg(n);)n=wg(n);return n||null}},tL=new U("",{providedIn:"root",factory:()=>{let t=P(Z),e=P(nr);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function nL(){return Rm(On(),Ze())}function Rm(t,e){return new bc(kn(t,e))}var bc=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=nL}}return t})();function uS(t){return(t.flags&128)===128}var lS=new Map,rL=0;function iL(){return rL++}function sL(t){lS.set(t[Od],t)}function qg(t){lS.delete(t[Od])}var Vb="__ngContext__";function Ji(t,e){ii(e)?(t[Vb]=e[Od],sL(e)):t[Vb]=e}function dS(t){return fS(t[yc])}function hS(t){return fS(t[Pn])}function fS(t){for(;t!==null&&!Cr(t);)t=t[Pn];return t}var zg;function pS(t){zg=t}function oL(){if(zg!==void 0)return zg;if(typeof document<"u")return document;throw new W(210,!1)}var Nm=new U("",{providedIn:"root",factory:()=>aL}),aL="ng",xm=new U(""),Fn=new U("",{providedIn:"platform",factory:()=>"unknown"});var Pm=new U("",{providedIn:"root",factory:()=>oL().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var cL="h",uL="b";var lL=()=>null;function Mm(t,e,n=!1){return lL(t,e,n)}var gS=!1,dL=new U("",{providedIn:"root",factory:()=>gS});function mS(t){return t instanceof Function?t():t}var es=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(es||{}),hL;function km(t,e){return hL(t,e)}function co(t,e,n,r,i){if(r!=null){let s,o=!1;Cr(r)?s=r:ii(r)&&(o=!0,r=r[Tr]);let a=tr(r);t===0&&n!==null?i==null?IS(e,n,a):Td(e,n,a,i||null,!0):t===1&&n!==null?Td(e,n,a,i||null,!0):t===2?SL(e,a,o):t===3&&e.destroyNode(a),s!=null&&RL(e,t,s,n,i)}}function fL(t,e){return t.createText(e)}function pL(t,e,n){t.setValue(e,n)}function _S(t,e,n){return t.createElement(e,n)}function gL(t,e){yS(t,e),e[Tr]=null,e[Mn]=null}function mL(t,e,n,r,i,s){r[Tr]=i,r[Mn]=e,jd(t,r,n,1,i,s)}function yS(t,e){e[wr].changeDetectionScheduler?.notify(9),jd(t,e,e[Ht],2,null,null)}function _L(t){let e=t[yc];if(!e)return Eg(t[de],t);for(;e;){let n=null;if(ii(e))n=e[yc];else{let r=e[an];r&&(n=r)}if(!n){for(;e&&!e[Pn]&&e!==t;)ii(e)&&Eg(e[de],e),e=e[$t];e===null&&(e=t),ii(e)&&Eg(e[de],e),n=e&&e[Pn]}e=n}}function yL(t,e,n,r){let i=an+r,s=n.length;r>0&&(n[i-1][Pn]=e),r<s-an?(e[Pn]=n[i],aD(n,an+r,e)):(n.push(e),e[Pn]=null),e[$t]=n;let o=e[go];o!==null&&n!==o&&vS(o,e);let a=e[mo];a!==null&&a.insertView(t),Og(e),e[ee]|=128}function vS(t,e){let n=t[pd],r=e[$t];if(ii(r))t[ee]|=gd.HasTransplantedViews;else{let i=r[$t][er];e[er]!==i&&(t[ee]|=gd.HasTransplantedViews)}n===null?t[pd]=[e]:n.push(e)}function Om(t,e){let n=t[pd],r=n.indexOf(e);n.splice(r,1)}function Ed(t,e){if(t.length<=an)return;let n=an+e,r=t[n];if(r){let i=r[go];i!==null&&i!==t&&Om(i,r),e>0&&(t[n-1][Pn]=r[Pn]);let s=ud(t,an+e);gL(r[de],r);let o=s[mo];o!==null&&o.detachView(s[de]),r[$t]=null,r[Pn]=null,r[ee]&=-129}return r}function Fm(t,e){if(!(e[ee]&256)){let n=e[Ht];n.destroyNode&&jd(t,e,n,3,null,null),_L(e)}}function Eg(t,e){if(e[ee]&256)return;let n=pe(null);try{e[ee]&=-129,e[ee]|=256,e[yn]&&Dl(e[yn]),IL(t,e),vL(t,e),e[de].type===1&&e[Ht].destroy();let r=e[go];if(r!==null&&Cr(e[$t])){r!==e[$t]&&Om(r,e);let i=e[mo];i!==null&&i.detachView(t)}qg(e)}finally{pe(n)}}function vL(t,e){let n=t.cleanup,r=e[hd];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[hd]=null);let i=e[ri];if(i!==null){e[ri]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function IL(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof vc)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Zn(4,a,c);try{c.call(a)}finally{Zn(5,a,c)}}else{Zn(4,i,s);try{s.call(i)}finally{Zn(5,i,s)}}}}}function wL(t,e,n){return EL(t,e.parent,n)}function EL(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Tr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Xn.None||s===Xn.Emulated)return null}return kn(r,n)}}function Td(t,e,n,r,i){t.insertBefore(e,n,r,i)}function IS(t,e,n){t.appendChild(e,n)}function Ub(t,e,n,r,i){r!==null?Td(t,e,n,r,i):IS(t,e,n)}function wS(t,e){return t.parentNode(e)}function TL(t,e){return t.nextSibling(e)}function CL(t,e,n){return DL(t,e,n)}function bL(t,e,n){return t.type&40?kn(t,n):null}var DL=bL,jb;function Lm(t,e,n,r){let i=wL(t,r,e),s=e[Ht],o=r.parent||e[Mn],a=CL(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Ub(s,i,n[c],a,!1);else Ub(s,i,n,a,!1);jb!==void 0&&jb(s,r,e,n,i)}function hc(t,e){if(e!==null){let n=e.type;if(n&3)return kn(e,t);if(n&4)return Gg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return hc(t,r);{let i=t[e.index];return Cr(i)?Gg(-1,i):tr(i)}}else{if(n&128)return hc(t,e.next);if(n&32)return km(e,t)()||tr(t[e.index]);{let r=ES(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Yi(t[er]);return hc(i,r)}else return hc(t,e.next)}}}return null}function ES(t,e){if(e!==null){let r=t[er][Mn],i=e.projection;return r.projection[i]}return null}function Gg(t,e){let n=an+t+1;if(n<e.length){let r=e[n],i=r[de].firstChild;if(i!==null)return hc(r,i)}return e[Qi]}function SL(t,e,n){t.removeChild(null,e,n)}function Vm(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(o&&e===0&&(a&&Ji(tr(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Vm(t,e,n.child,r,i,s,!1),co(e,t,i,a,s);else if(c&32){let l=km(n,r),d;for(;d=l();)co(e,t,i,d,s);co(e,t,i,a,s)}else c&16?AL(t,e,r,n,i,s):co(e,t,i,a,s);n=o?n.projectionNext:n.next}}function jd(t,e,n,r,i,s){Vm(n,r,t.firstChild,e,i,s,!1)}function AL(t,e,n,r,i,s){let o=n[er],c=o[Mn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];co(e,t,i,d,s)}else{let l=c,d=o[$t];uS(r)&&(l.flags|=128),Vm(t,e,l,d,i,s,!0)}}function RL(t,e,n,r,i){let s=n[Qi],o=tr(n);s!==o&&co(e,t,r,s,i);for(let a=an;a<n.length;a++){let c=n[a];jd(c[de],c,t,e,r,s)}}function NL(t,e,n){t.setAttribute(e,"style",n)}function TS(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function CS(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Ag(t,e,r),i!==null&&TS(t,e,i),s!==null&&NL(t,e,s)}var To={};function cn(t=1){bS(di(),Ze(),wm()+t,!1)}function bS(t,e,n,r){if(!r)if((e[ee]&3)===3){let s=t.preOrderCheckHooks;s!==null&&rd(e,s,n)}else{let s=t.preOrderHooks;s!==null&&id(e,s,0,n)}Zi(n)}function br(t,e=le.Default){let n=Ze();if(n===null)return J(t,e);let r=On();return nS(r,n,_n(t),e)}function DS(t,e,n,r,i,s){let o=pe(null);try{let a=null;i&si.SignalBased&&(a=e[r][yr]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&si.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):DD(e,a,r,s)}finally{pe(o)}}function xL(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Zi(~i);else{let s=i,o=n[++r],a=n[++r];bF(o,s);let c=e[s];a(2,c)}}}finally{Zi(-1)}}function Bd(t,e,n,r,i,s,o,a,c,l,d){let f=e.blueprint.slice();return f[Tr]=i,f[ee]=r|4|128|8|64,(l!==null||t&&t[ee]&2048)&&(f[ee]|=2048),ND(f),f[$t]=f[wo]=t,f[In]=n,f[wr]=o||t&&t[wr],f[Ht]=a||t&&t[Ht],f[po]=c||t&&t[po]||null,f[Mn]=s,f[Od]=iL(),f[dd]=d,f[TD]=l,f[er]=e.type==2?t[er]:f,f}function $d(t,e,n,r,i){let s=t.data[e];if(s===null)s=PL(t,e,n,r,i),CF()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=wF();s.injectorIndex=o===null?-1:o.injectorIndex}return Cc(s,!0),s}function PL(t,e,n,r,i){let s=LD(),o=VD(),a=o?s:s&&s.parent,c=t.data[e]=LL(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function SS(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function AS(t,e,n,r,i){let s=wm(),o=r&2;try{Zi(-1),o&&e.length>wn&&bS(t,e,wn,!1),Zn(o?2:0,i),n(r,i)}finally{Zi(s),Zn(o?3:1,i)}}function RS(t,e,n){if(bD(e)){let r=pe(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{pe(r)}}}function NS(t,e,n){kD()&&(qL(t,e,n,kn(n,e)),(n.flags&64)===64&&OS(t,e,n))}function xS(t,e,n=kn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function PS(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Um(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Um(t,e,n,r,i,s,o,a,c,l,d){let f=wn+r,g=f+i,_=ML(f,g),E=typeof l=="function"?l():l;return _[de]={type:t,blueprint:_,template:n,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:E,incompleteFirstPass:!1,ssrId:d}}function ML(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:To);return n}function kL(t,e,n,r){let s=r.get(dL,gS)||n===Xn.ShadowDom,o=t.selectRootElement(e,s);return OL(o),o}function OL(t){FL(t)}var FL=()=>null;function LL(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return yF()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Bb(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=si.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?$b(r,n,l,a,c):$b(r,n,l,a)}return r}function $b(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function VL(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let f=s[d],g=n?n.get(f):null,_=g?g.inputs:null,E=g?g.outputs:null;c=Bb(0,f.inputs,d,c,_),l=Bb(1,f.outputs,d,l,E);let R=c!==null&&o!==null&&!hm(e)?XL(c,d,o):null;a.push(R)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function UL(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function jL(t,e,n,r,i,s,o,a){let c=kn(e,n),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(jm(t,n,d,r,i),Fd(e)&&BL(n,e.index)):e.type&3?(r=UL(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function BL(t,e){let n=li(e,t);n[ee]&16||(n[ee]|=64)}function MS(t,e,n,r){if(kD()){let i=r===null?null:{"":-1},s=GL(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&kS(t,e,n,o,i,a),i&&WL(n,r,i)}n.mergedAttrs=dm(n.mergedAttrs,n.attrs)}function kS(t,e,n,r,i,s){for(let l=0;l<r.length;l++)jF(JD(n,e),t,r[l].type);QL(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=SS(t,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];n.mergedAttrs=dm(n.mergedAttrs,d.hostAttrs),YL(t,n,e,c,d),KL(c,d,i),d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let f=d.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}VL(t,n,s)}function $L(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;HL(o)!=a&&o.push(a),o.push(n,r,s)}}function HL(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function qL(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Fd(n)&&ZL(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||JD(n,e),Ji(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=Ic(e,t,a,n);if(Ji(l,e),o!==null&&JL(e,a-i,l,c,n,o),Tc(c)){let d=li(n.index,e);d[In]=Ic(e,t,a,n)}}}function OS(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=DF();try{Zi(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];Fg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&zL(c,l)}}finally{Zi(-1),Fg(o)}}function zL(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function GL(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(V1(e,o.selectors,!1))if(r||(r=[]),Tc(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Wg(t,e,c)}else r.unshift(o),Wg(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Wg(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function WL(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new W(-301,!1);r.push(e[i],s)}}}function KL(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Tc(e)&&(n[""]=t)}}function QL(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function YL(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Wi(i.type,!0)),o=new vc(s,Tc(i),br);t.blueprint[r]=o,n[r]=o,$L(t,e,r,SS(t,n,i.hostVars,To),i)}function ZL(t,e,n){let r=kn(e,t),i=PS(n),s=t[wr].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Hd(t,Bd(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function JL(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],d=o[a++],f=o[a++];DS(r,n,c,l,d,f)}}function XL(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function FS(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function LS(t,e){let n=t.contentQueries;if(n!==null){let r=pe(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];BD(s),a.contentQueries(2,e[o],o)}}}finally{pe(r)}}}function Hd(t,e){return t[yc]?t[Ab][Pn]=e:t[yc]=e,t[Ab]=e,e}function Kg(t,e,n){BD(0);let r=pe(null);try{e(t,n)}finally{pe(r)}}function eV(t){return t[hd]??=[]}function tV(t){return t.cleanup??=[]}function VS(t,e){let n=t[po],r=n?n.get(nr,null):null;r&&r.handleError(e)}function jm(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],d=t.data[o];DS(d,l,r,a,c,i)}}function nV(t,e,n){let r=lF(e,t);pL(t[Ht],r,n)}function rV(t,e){let n=li(e,t),r=n[de];iV(r,n);let i=n[Tr];i!==null&&n[dd]===null&&(n[dd]=Mm(i,n[po])),Bm(r,n,n[In])}function iV(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Bm(t,e,n){vm(e);try{let r=t.viewQuery;r!==null&&Kg(1,r,n);let i=t.template;i!==null&&AS(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[mo]?.finishViewCreation(t),t.staticContentQueries&&LS(t,e),t.staticViewQueries&&Kg(2,t.viewQuery,n);let s=t.components;s!==null&&sV(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ee]&=-5,Im()}}function sV(t,e){for(let n=0;n<e.length;n++)rV(t,e[n])}function oV(t,e,n,r){let i=pe(null);try{let s=e.tView,a=t[ee]&4096?4096:16,c=Bd(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[go]=l;let d=t[mo];return d!==null&&(c[mo]=d.createEmbeddedView(s)),Bm(s,c,n),c}finally{pe(i)}}function aV(t,e){let n=an+e;if(n<t.length)return t[n]}function Qg(t,e){return!e||e.firstChild===null||uS(t)}function US(t,e,n,r=!0){let i=e[de];if(yL(i,e,t,n),r){let o=Gg(n,t),a=e[Ht],c=wS(a,t[Qi]);c!==null&&mL(i,t[Mn],a,e,c,o)}let s=e[dd];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function cV(t,e){let n=Ed(t,e);return n!==void 0&&Fm(n[de],n),n}function Cd(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(tr(s)),Cr(s)&&uV(s,r);let o=n.type;if(o&8)Cd(t,e,n.child,r);else if(o&32){let a=km(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=ES(e,n);if(Array.isArray(a))r.push(...a);else{let c=Yi(e[er]);Cd(c[de],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function uV(t,e){for(let n=an;n<t.length;n++){let r=t[n],i=r[de].firstChild;i!==null&&Cd(r[de],r,i,e)}t[Qi]!==t[Tr]&&e.push(t[Qi])}var jS=[];function lV(t){return t[yn]??dV(t)}function dV(t){let e=jS.pop()??Object.create(fV);return e.lView=t,e}function hV(t){t.lView[yn]!==t&&(t.lView=null,jS.push(t))}var fV=Ae(V({},qs),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ud(t.lView)},consumerOnSignalRead(){this.lView[yn]=this}});function pV(t){let e=t[yn]??Object.create(gV);return e.lView=t,e}var gV=Ae(V({},qs),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Yi(t.lView);for(;e&&!BS(e[de]);)e=Yi(e);e&&xD(e)},consumerOnSignalRead(){this.lView[yn]=this}});function BS(t){return t.type!==2}var mV=100;function $S(t,e=!0,n=0){let r=t[wr],i=r.rendererFactory,s=!1;s||i.begin?.();try{_V(t,n)}catch(o){throw e&&VS(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function _V(t,e){let n=UD();try{Nb(!0),Yg(t,e);let r=0;for(;Vd(t);){if(r===mV)throw new W(103,!1);r++,Yg(t,1)}}finally{Nb(n)}}function yV(t,e,n,r){let i=e[ee];if((i&256)===256)return;let s=!1,o=!1;!s&&e[wr].inlineEffectRunner?.flush(),vm(e);let a=!0,c=null,l=null;s||(BS(t)?(l=lV(e),c=ic(l)):AC()===null?(a=!1,l=pV(e),c=ic(l)):e[yn]&&(Dl(e[yn]),e[yn]=null));try{ND(e),TF(t.bindingStartIndex),n!==null&&AS(t,e,n,2,r);let d=(i&3)===3;if(!s)if(d){let _=t.preOrderCheckHooks;_!==null&&rd(e,_,null)}else{let _=t.preOrderHooks;_!==null&&id(e,_,0,null),yg(e,0)}if(o||vV(e),HS(e,0),t.contentQueries!==null&&LS(t,e),!s)if(d){let _=t.contentCheckHooks;_!==null&&rd(e,_)}else{let _=t.contentHooks;_!==null&&id(e,_,1),yg(e,1)}xL(t,e);let f=t.components;f!==null&&zS(e,f,0);let g=t.viewQuery;if(g!==null&&Kg(2,g,r),!s)if(d){let _=t.viewCheckHooks;_!==null&&rd(e,_)}else{let _=t.viewHooks;_!==null&&id(e,_,2),yg(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[nd]){for(let _ of e[nd])_();e[nd]=null}s||(e[ee]&=-73)}catch(d){throw s||Ud(e),d}finally{l!==null&&(Cl(l,c),a&&hV(l)),Im()}}function HS(t,e){for(let n=dS(t);n!==null;n=hS(n))for(let r=an;r<n.length;r++){let i=n[r];qS(i,e)}}function vV(t){for(let e=dS(t);e!==null;e=hS(e)){if(!(e[ee]&gd.HasTransplantedViews))continue;let n=e[pd];for(let r=0;r<n.length;r++){let i=n[r];xD(i)}}}function IV(t,e,n){let r=li(e,t);qS(r,n)}function qS(t,e){_m(t)&&Yg(t,e)}function Yg(t,e){let r=t[de],i=t[ee],s=t[yn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&bl(s)),o||=!1,s&&(s.dirty=!1),t[ee]&=-9217,o)yV(r,t,r.template,t[In]);else if(i&8192){HS(t,1);let a=r.components;a!==null&&zS(t,a,1)}}function zS(t,e,n){for(let r=0;r<e.length;r++)IV(t,e[r],n)}function $m(t,e){let n=UD()?64:1088;for(t[wr].changeDetectionScheduler?.notify(e);t;){t[ee]|=n;let r=Yi(t);if(Mg(t)&&!r)return t;t=r}return null}var _o=class{get rootNodes(){let e=this._lView,n=e[de];return Cd(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[In]}set context(e){this._lView[In]=e}get destroyed(){return(this._lView[ee]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[$t];if(Cr(e)){let n=e[fd],r=n?n.indexOf(this):-1;r>-1&&(Ed(e,r),ud(n,r))}this._attachedToViewContainer=!1}Fm(this._lView[de],this._lView)}onDestroy(e){PD(this._lView,e)}markForCheck(){$m(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ee]&=-129}reattach(){Og(this._lView),this._lView[ee]|=128}detectChanges(){this._lView[ee]|=1024,$S(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new W(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Mg(this._lView),n=this._lView[go];n!==null&&!e&&Om(n,this._lView),yS(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new W(902,!1);this._appRef=e;let n=Mg(this._lView),r=this._lView[go];r!==null&&!n&&vS(r,this._lView),Og(this._lView)}};var uZ=new RegExp(`^(\\d+)*(${uL}|${cL})*(.*)`);var wV=()=>null;function Zg(t,e){return wV(t,e)}var yo=class{},qd=new U("",{providedIn:"root",factory:()=>!1});var GS=new U(""),WS=new U(""),Jg=class{},bd=class{};function EV(t){let e=Error(`No component factory found for ${on(t)}.`);return e[TV]=t,e}var TV="ngComponent";var Xg=class{resolveComponentFactory(e){throw EV(e)}},oi=class{static{this.NULL=new Xg}},vo=class{},zd=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>CV()}}return t})();function CV(){let t=Ze(),e=On(),n=li(e.index,t);return(ii(n)?n:t)[Ht]}var bV=(()=>{class t{static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>null})}}return t})();function em(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=yb(i,a);else if(s==2){let c=a,l=e[++o];r=yb(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Dd=class extends oi{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Ki(e);return new wc(n,this.ngModule)}};function Hb(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:si.None;e?n.push({propName:o,templateName:r,isSignal:(a&si.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function DV(t){let e=t.toLowerCase();return e==="svg"?cF:e==="math"?uF:null}var wc=class extends bd{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Hb(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Hb(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=$1(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=pe(null);try{i=i||this.ngModule;let o=i instanceof vn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Lg(e,o):e,c=a.get(vo,null);if(c===null)throw new W(407,!1);let l=a.get(bV,null),d=a.get(yo,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},g=c.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",E=r?kL(g,r,this.componentDef.encapsulation,a):_S(g,_,DV(_)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let A=null;E!==null&&(A=Mm(E,a,!0));let M=Um(0,null,null,1,0,null,null,null,null,null,null),L=Bd(null,M,null,R,null,null,f,g,a,null,A);vm(L);let $,G,Ne=null;try{let Y=this.componentDef,T,v=null;Y.findHostDirectiveDefs?(T=[],v=new Map,Y.findHostDirectiveDefs(Y,T,v),T.push(Y)):T=[Y];let I=SV(L,E);Ne=AV(I,E,Y,T,L,f,g),G=mm(M,wn),E&&xV(g,Y,E,r),n!==void 0&&PV(G,this.ngContentSelectors,n),$=NV(Ne,Y,T,v,L,[MV]),Bm(M,L,null)}catch(Y){throw Ne!==null&&qg(Ne),qg(L),Y}finally{Im()}return new tm(this.componentType,$,Rm(G,L),L,G)}finally{pe(s)}}},tm=class extends Jg{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new _o(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;jm(s[de],s,i,e,n),this.previousInputValues.set(e,n);let o=li(this._tNode.index,s);$m(o,1)}}get injector(){return new Gi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function SV(t,e){let n=t[de],r=wn;return t[r]=e,$d(n,r,2,"#host",null)}function AV(t,e,n,r,i,s,o){let a=i[de];RV(r,t,e,o);let c=null;e!==null&&(c=Mm(e,i[po]));let l=s.rendererFactory.createRenderer(e,n),d=16;n.signals?d=4096:n.onPush&&(d=64);let f=Bd(i,PS(n),null,d,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&Wg(a,t,r.length-1),Hd(i,f),i[t.index]=f}function RV(t,e,n,r){for(let i of t)e.mergedAttrs=dm(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(em(e,e.mergedAttrs,!0),n!==null&&CS(r,n,e))}function NV(t,e,n,r,i,s){let o=On(),a=i[de],c=kn(o,i);kS(a,i,o,n,null,r);for(let d=0;d<n.length;d++){let f=o.directiveStart+d,g=Ic(i,a,f,o);Ji(g,i)}OS(a,i,o),c&&Ji(c,i);let l=Ic(i,a,o.directiveStart+o.componentOffset,o);if(t[In]=i[In]=l,s!==null)for(let d of s)d(l,e);return RS(a,o,i),l}function xV(t,e,n,r){if(r)Ag(t,n,["ng-version","18.2.13"]);else{let{attrs:i,classes:s}=H1(e.selectors[0]);i&&Ag(t,n,i),s&&s.length>0&&TS(t,n,s.join(" "))}}function PV(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function MV(){let t=On();Cm(Ze()[de],t)}var Gd=(()=>{class t{static{this.__NG_ELEMENT_ID__=kV}}return t})();function kV(){let t=On();return FV(t,Ze())}var OV=Gd,KS=class extends OV{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Rm(this._hostTNode,this._hostLView)}get injector(){return new Gi(this._hostTNode,this._hostLView)}get parentInjector(){let e=bm(this._hostTNode,this._hostLView);if(QD(e)){let n=yd(e,this._hostLView),r=_d(e),i=n[de].data[r+8];return new Gi(i,n)}else return new Gi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=qb(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-an}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Zg(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,Qg(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!iF(e),a;if(o)a=n;else{let E=n||{};a=E.index,r=E.injector,i=E.projectableNodes,s=E.environmentInjector||E.ngModuleRef}let c=o?e:new wc(Ki(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let R=(o?l:this.parentInjector).get(vn,null);R&&(s=R)}let d=Ki(c.componentType??{}),f=Zg(this._lContainer,d?.id??null),g=f?.firstChild??null,_=c.create(l,i,g,s);return this.insertImpl(_.hostView,a,Qg(this._hostTNode,f)),_}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(hF(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[$t],l=new KS(c,c[Mn],c[$t]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return US(o,i,s,r),e.attachToViewContainerRef(),aD(Tg(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=qb(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Ed(this._lContainer,n);r&&(ud(Tg(this._lContainer),n),Fm(r[de],r))}detach(e){let n=this._adjustIndex(e,-1),r=Ed(this._lContainer,n);return r&&ud(Tg(this._lContainer),n)!=null?new _o(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function qb(t){return t[fd]}function Tg(t){return t[fd]||(t[fd]=[])}function FV(t,e){let n,r=e[t.index];return Cr(r)?n=r:(n=FS(r,e,null,t),e[t.index]=n,Hd(e,n)),VV(n,e,t,r),new KS(n,t,e)}function LV(t,e){let n=t[Ht],r=n.createComment(""),i=kn(e,t),s=wS(n,i);return Td(n,s,r,TL(n,i),!1),r}var VV=BV,UV=()=>!1;function jV(t,e,n){return UV(t,e,n)}function BV(t,e,n,r){if(t[Qi])return;let i;n.type&8?i=tr(r):i=LV(e,n),t[Qi]=i}var zb=new Set;function ts(t){zb.has(t)||(zb.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Hm(t,e){ts("NgSignals");let n=jC(t),r=n[yr];return e?.equal&&(r.equal=e.equal),n.set=i=>tg(r,i),n.update=i=>BC(r,i),n.asReadonly=$V.bind(n),n}function $V(){let t=this[yr];if(t.readonlyFn===void 0){let e=()=>this();e[yr]=t,t.readonlyFn=e}return t.readonlyFn}var ai=class{},Ec=class{};var nm=class extends ai{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Dd(this);let s=mD(e);this._bootstrapComponents=mS(s.bootstrap),this._r3Injector=sS(e,n,[{provide:ai,useValue:this},{provide:oi,useValue:this.componentFactoryResolver},...r],on(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},rm=class extends Ec{constructor(e){super(),this.moduleType=e}create(e){return new nm(this.moduleType,e,[])}};var Sd=class extends ai{constructor(e){super(),this.componentFactoryResolver=new Dd(this),this.instance=null;let n=new _c([...e.providers,{provide:ai,useValue:this},{provide:oi,useValue:this.componentFactoryResolver}],e.parent||pm(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function qm(t,e,n=null){return new Sd({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function QS(t,e,n){return t[e]=n}function Io(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function HV(t,e,n,r){let i=Io(t,e,n);return Io(t,e+1,r)||i}function qV(t){return(t.flags&32)===32}function zV(t,e,n,r,i,s,o,a,c){let l=e.consts,d=$d(e,t,4,o||null,a||null);MS(e,n,d,md(l,c)),Cm(e,d);let f=d.tView=Um(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function GV(t,e,n,r,i,s,o,a,c,l){let d=n+wn,f=e.firstCreatePass?zV(d,e,t,r,i,s,o,a,c):e.data[d];Cc(f,!1);let g=WV(e,t,f,n);Em()&&Lm(e,t,g,f),Ji(g,t);let _=FS(g,t,g,f);return t[d]=_,Hd(t,_),jV(_,f,t),gm(f)&&NS(e,t,f),c!=null&&xS(t,f,l),f}function hi(t,e,n,r,i,s,o,a){let c=Ze(),l=di(),d=md(l.consts,s);return GV(c,l,t,e,n,r,i,d,o,a),hi}var WV=KV;function KV(t,e,n,r){return Tm(!0),e[Ht].createComment("")}var fc=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(fc||{}),QV=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}}return t})(),Gb=class t{constructor(){this.ngZone=P(Z),this.scheduler=P(yo),this.errorHandler=P(nr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[fc.EarlyRead,fc.Write,fc.MixedReadWrite,fc.Read]}execute(){this.executing=!0;for(let e of t.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}};function YV(t,e,n,r){return Io(t,ym(),n)?e+iD(n)+r:To}function Wd(t,e,n){let r=Ze(),i=ym();if(Io(r,i,e)){let s=di(),o=RF();jL(s,o,r,t,e,r[Ht],n,!1)}return Wd}function Wb(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";jm(t,n,s[o],o,r)}function fi(t,e){ts("NgControlFlow");let n=Ze(),r=ym(),i=n[r]!==To?n[r]:-1,s=i!==-1?Kb(n,wn+i):void 0,o=0;if(Io(n,r,t)){let a=pe(null);try{if(s!==void 0&&cV(s,o),t!==-1){let c=wn+t,l=Kb(n,c),d=ZV(n[de],c),f=Zg(l,d.tView.ssrId),g=oV(n,d,e,{dehydratedView:f});US(l,g,o,Qg(d,f))}}finally{pe(a)}}else if(s!==void 0){let a=aV(s,o);a!==void 0&&(a[In]=e)}}function Kb(t,e){return t[e]}function ZV(t,e){return mm(t,e)}function JV(t,e,n,r,i,s){let o=e.consts,a=md(o,i),c=$d(e,t,2,r,a);return MS(e,n,c,md(o,s)),c.attrs!==null&&em(c,c.attrs,!1),c.mergedAttrs!==null&&em(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function Ue(t,e,n,r){let i=Ze(),s=di(),o=wn+t,a=i[Ht],c=s.firstCreatePass?JV(o,s,i,e,n,r):s.data[o],l=XV(s,i,c,a,e,t);i[o]=l;let d=gm(c);return Cc(c,!0),CS(a,l,c),!qV(c)&&Em()&&Lm(s,i,l,c),gF()===0&&Ji(l,i),mF(),d&&(NS(s,i,c),RS(s,c,i)),r!==null&&xS(i,c),Ue}function Fe(){let t=On();VD()?EF():(t=t.parent,Cc(t,!1));let e=t;vF(e)&&IF(),_F();let n=di();return n.firstCreatePass&&(Cm(n,t),bD(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&kF(e)&&Wb(n,e,Ze(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&OF(e)&&Wb(n,e,Ze(),e.stylesWithoutHost,!1),Fe}function ns(t,e,n,r){return Ue(t,e,n,r),Fe(),ns}var XV=(t,e,n,r,i,s)=>(Tm(!0),_S(r,i,NF()));function YS(){return Ze()}var zi=void 0;function eU(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var tU=["en",[["a","p"],["AM","PM"],zi],[["AM","PM"],zi,zi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],zi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],zi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",zi,"{1} 'at' {0}",zi],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",eU],Cg={};function En(t){let e=nU(t),n=Qb(e);if(n)return n;let r=e.split("-")[0];if(n=Qb(r),n)return n;if(r==="en")return tU;throw new W(701,!1)}function Qb(t){return t in Cg||(Cg[t]=dc.ng&&dc.ng.common&&dc.ng.common.locales&&dc.ng.common.locales[t]),Cg[t]}var it=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(it||{});function nU(t){return t.toLowerCase().replace(/_/g,"-")}var Ad="en-US";var rU=Ad;function iU(t){typeof t=="string"&&(rU=t.toLowerCase().replace(/_/g,"-"))}var sU=(t,e,n)=>{};function Co(t,e,n,r){let i=Ze(),s=di(),o=On();return aU(s,i,i[Ht],o,t,e,r),Co}function oU(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[hd],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function aU(t,e,n,r,i,s,o){let a=gm(r),l=t.firstCreatePass&&tV(t),d=e[In],f=eV(e),g=!0;if(r.type&3||o){let R=kn(r,e),A=o?o(R):R,M=f.length,L=o?G=>o(tr(G[r.index])):r.index,$=null;if(!o&&a&&($=oU(t,e,i,r.index)),$!==null){let G=$.__ngLastListenerFn__||$;G.__ngNextListenerFn__=s,$.__ngLastListenerFn__=s,g=!1}else{s=Zb(r,e,d,s),sU(R,i,s);let G=n.listen(A,i,s);f.push(s,G),l&&l.push(i,L,M,M+1)}}else s=Zb(r,e,d,s);let _=r.outputs,E;if(g&&_!==null&&(E=_[i])){let R=E.length;if(R)for(let A=0;A<R;A+=2){let M=E[A],L=E[A+1],Ne=e[M][L].subscribe(s),Y=f.length;f.push(s,Ne),l&&l.push(i,r.index,Y,-(Y+1))}}}function Yb(t,e,n,r){let i=pe(null);try{return Zn(6,e,n),n(r)!==!1}catch(s){return VS(t,s),!1}finally{Zn(7,e,n),pe(i)}}function Zb(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?li(t.index,e):e;$m(o,5);let a=Yb(e,n,r,s),c=i.__ngNextListenerFn__;for(;c;)a=Yb(e,n,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function Dr(t=1){return AF(t)}function cU(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function st(t,e=""){let n=Ze(),r=di(),i=t+wn,s=r.firstCreatePass?$d(r,i,1,e,null):r.data[i],o=uU(r,n,s,e,t);n[i]=o,Em()&&Lm(r,n,o,s),Cc(s,!1)}var uU=(t,e,n,r,i)=>(Tm(!0),fL(e[Ht],r));function Sr(t,e,n){let r=Ze(),i=YV(r,t,e,n);return i!==To&&nV(r,wm(),i),Sr}var lU=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=vD(!1,n.type),i=r.length>0?qm([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=H({token:t,providedIn:"environment",factory:()=>new t(J(vn))})}}return t})();function pi(t){ts("NgStandalone"),t.getStandaloneInjector=e=>e.get(lU).getOrCreateStandaloneInjector(t)}function zm(t,e,n,r){return dU(Ze(),jD(),t,e,n,r)}function ZS(t,e){let n=t[e];return n===To?void 0:n}function dU(t,e,n,r,i,s){let o=e+n;return Io(t,o,i)?QS(t,o+1,s?r.call(s,i):r(i)):ZS(t,o+1)}function hU(t,e,n,r,i,s,o){let a=e+n;return HV(t,a,i,s)?QS(t,a+2,o?r.call(o,i,s):r(i,s)):ZS(t,a+2)}function Gm(t,e){let n=di(),r,i=t+wn;n.firstCreatePass?(r=fU(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=Wi(r.type,!0)),o,a=Zt(br);try{let c=vd(!1),l=s();return vd(c),cU(n,Ze(),i,l),l}finally{Zt(a)}}function fU(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Wm(t,e,n,r){let i=t+wn,s=Ze(),o=dF(s,i);return pU(s,i)?hU(s,jD(),e,o.transform,n,r,o):o.transform(n,r)}function pU(t,e){return t[de].data[e].pure}var ci=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},JS=new ci("18.2.13");var Kd=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var XS=new U("");function Dc(t){return!!t&&typeof t.then=="function"}function eA(t){return!!t&&typeof t.subscribe=="function"}var gi=new U(""),tA=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=P(gi,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if(Dc(s))n.push(s);else if(eA(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Km=new U("");function gU(){UC(()=>{throw new W(600,!1)})}function mU(t){return t.isBoundToModule}var _U=10;function yU(t,e,n){try{let r=n();return Dc(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var rs=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=P(tL),this.afterRenderManager=P(QV),this.zonelessEnabled=P(qd),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new nt,this.afterTick=new nt,this.componentTypes=[],this.components=[],this.isStable=P(Xi).hasPendingTasks.pipe(Q(n=>!n)),this._injector=P(vn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof bd;if(!this._injector.get(tA).done){let g=!i&&gD(n),_=!1;throw new W(405,_)}let o;i?o=n:o=this._injector.get(oi).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let a=mU(o)?void 0:this._injector.get(ai),c=r||o.selector,l=o.create(me.NULL,[],c,a),d=l.location.nativeElement,f=l.injector.get(XS,null);return f?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),sd(this.components,l),f?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new W(101,!1);let n=pe(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,pe(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(vo,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<_U;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)vU(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Vd(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;sd(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(Km,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>sd(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new W(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function sd(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function vU(t,e,n,r){if(!n&&!Vd(t))return;$S(t,e,n&&!r?0:1)}var im=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Qm=(()=>{class t{compileModuleSync(n){return new rm(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=mD(n),s=mS(i.declarations).reduce((o,a)=>{let c=Ki(a);return c&&o.push(new wc(c)),o},[]);return new im(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var IU=(()=>{class t{constructor(){this.zone=P(Z),this.changeDetectionScheduler=P(yo),this.applicationRef=P(rs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),wU=new U("",{factory:()=>!1});function nA({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Z(Ae(V({},iA()),{scheduleInRootZone:n})),[{provide:Z,useFactory:t},{provide:fo,multi:!0,useFactory:()=>{let r=P(IU,{optional:!0});return()=>r.initialize()}},{provide:fo,multi:!0,useFactory:()=>{let r=P(EU);return()=>{r.initialize()}}},e===!0?{provide:GS,useValue:!0}:[],{provide:WS,useValue:n??oS}]}function rA(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=nA({ngZoneFactory:()=>{let i=iA(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&ts("NgZone_CoalesceEvent"),new Z(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Oe([{provide:wU,useValue:!0},{provide:qd,useValue:!1},r])}function iA(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var EU=(()=>{class t{constructor(){this.subscription=new Qe,this.initialized=!1,this.zone=P(Z),this.pendingTasks=P(Xi)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Z.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Z.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var TU=(()=>{class t{constructor(){this.appRef=P(rs),this.taskService=P(Xi),this.ngZone=P(Z),this.zonelessEnabled=P(qd),this.disableScheduling=P(GS,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Qe,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(wd):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(WS,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Hg||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Ob:aS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(wd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Ob(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function CU(){return typeof $localize<"u"&&$localize.locale||Ad}var Qd=new U("",{providedIn:"root",factory:()=>P(Qd,le.Optional|le.SkipSelf)||CU()});var sm=new U("");function ed(t){return!t.moduleRef}function bU(t){let e=ed(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Z);return n.run(()=>{ed(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(nr,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),ed(t)){let s=()=>e.destroy(),o=t.platformInjector.get(sm);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>t.moduleRef.destroy(),o=t.platformInjector.get(sm);o.add(s),t.moduleRef.onDestroy(()=>{sd(t.allPlatformModules,t.moduleRef),i.unsubscribe(),o.delete(s)})}return yU(r,n,()=>{let s=e.get(tA);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Qd,Ad);if(iU(o||Ad),ed(t)){let a=e.get(rs);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return DU(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function DU(t,e){let n=t.injector.get(rs);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new W(-403,!1);e.push(t)}var od=null;function SU(t=[],e){return me.create({name:e,providers:[{provide:Md,useValue:"platform"},{provide:sm,useValue:new Set([()=>od=null])},...t]})}function AU(t=[]){if(od)return od;let e=SU(t);return od=e,gU(),RU(e),e}function RU(t){t.get(xm,null)?.forEach(n=>n())}var bo=(()=>{class t{static{this.__NG_ELEMENT_ID__=NU}}return t})();function NU(t){return xU(On(),Ze(),(t&16)===16)}function xU(t,e,n){if(Fd(t)&&!n){let r=li(t.index,e);return new _o(r,r)}else if(t.type&175){let r=e[er];return new _o(r,e)}return null}function sA(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=AU(r),s=[nA({}),{provide:yo,useExisting:TU},...n||[]],o=new Sd({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return bU({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function Yd(t,e){ts("NgSignals");let n=FC(t);return e?.equal&&(n[yr].equal=e.equal),n}function Zd(t){let e=pe(null);try{return t()}finally{pe(e)}}var PU=new U("",{providedIn:"root",factory:()=>P(MU)}),MU=(()=>{class t{static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>new om})}}return t})(),om=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=P(Xi),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let n=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(n),this.taskId=null})}}enqueue(e){let n=e.creationZone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}},am=class{constructor(e,n,r,i,s,o){this.scheduler=e,this.effectFn=n,this.creationZone=r,this.injector=s,this.watcher=HC(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(n){this.injector.get(nr,null,{optional:!0})?.handleError(n)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function Ym(t,e){ts("NgSignals"),!e?.injector&&kd(Ym);let n=e?.injector??P(me),r=e?.manualCleanup!==!0?n.get(Eo):null,i=new am(n.get(PU),t,typeof Zone>"u"?null:Zone.current,r,n,e?.allowSignalWrites??!1),s=n.get(bo,null,{optional:!0});return!s||!(s._lView[ee]&8)?i.watcher.notify():(s._lView[nd]??=[]).push(i.watcher.notify),i}var lA=null;function Do(){return lA}function dA(t){lA??=t}var oh=class{};var Cn=new U(""),hA=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>P(VU),providedIn:"platform"})}}return t})();var VU=(()=>{class t extends hA{constructor(){super(),this._doc=P(Cn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Do().getBaseHref(this._doc)}onPopState(n){let r=Do().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Do().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function fA(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function oA(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function is(t){return t&&t[0]!=="?"?"?"+t:t}var uh=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>P(pA),providedIn:"root"})}}return t})(),UU=new U(""),pA=(()=>{class t extends uh{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??P(Cn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return fA(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+is(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+is(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+is(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(J(hA),J(UU,8))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Sc=(()=>{class t{constructor(n){this._subject=new Bt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=$U(oA(aA(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+is(r))}normalize(n){return t.stripTrailingSlash(BU(this._basePath,aA(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+is(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+is(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=is}static{this.joinWithSlash=fA}static{this.stripTrailingSlash=oA}static{this.\u0275fac=function(r){return new(r||t)(J(uh))}}static{this.\u0275prov=H({token:t,factory:()=>jU(),providedIn:"root"})}}return t})();function jU(){return new Sc(J(uh))}function BU(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function aA(t){return t.replace(/\/index.html$/,"")}function $U(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var qt=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(qt||{}),Me=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(Me||{}),ln=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(ln||{}),mi={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function HU(t){return En(t)[it.LocaleId]}function qU(t,e,n){let r=En(t),i=[r[it.DayPeriodsFormat],r[it.DayPeriodsStandalone]],s=Tn(i,e);return Tn(s,n)}function zU(t,e,n){let r=En(t),i=[r[it.DaysFormat],r[it.DaysStandalone]],s=Tn(i,e);return Tn(s,n)}function GU(t,e,n){let r=En(t),i=[r[it.MonthsFormat],r[it.MonthsStandalone]],s=Tn(i,e);return Tn(s,n)}function WU(t,e){let r=En(t)[it.Eras];return Tn(r,e)}function Jd(t,e){let n=En(t);return Tn(n[it.DateFormat],e)}function Xd(t,e){let n=En(t);return Tn(n[it.TimeFormat],e)}function eh(t,e){let r=En(t)[it.DateTimeFormat];return Tn(r,e)}function lh(t,e){let n=En(t),r=n[it.NumberSymbols][e];if(typeof r>"u"){if(e===mi.CurrencyDecimal)return n[it.NumberSymbols][mi.Decimal];if(e===mi.CurrencyGroup)return n[it.NumberSymbols][mi.Group]}return r}function gA(t){if(!t[it.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[it.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function KU(t){let e=En(t);return gA(e),(e[it.ExtraData][2]||[]).map(r=>typeof r=="string"?Zm(r):[Zm(r[0]),Zm(r[1])])}function QU(t,e,n){let r=En(t);gA(r);let i=[r[it.ExtraData][0],r[it.ExtraData][1]],s=Tn(i,e)||[];return Tn(s,n)||[]}function Tn(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function Zm(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var YU=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,th={},ZU=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Rr=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(Rr||{}),be=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(be||{}),Ce=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(Ce||{});function JU(t,e,n,r){let i=aj(t);e=Ar(n,e)||e;let o=[],a;for(;e;)if(a=ZU.exec(e),a){o=o.concat(a.slice(1));let d=o.pop();if(!d)break;e=d}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=_A(r,c),i=oj(i,r,!0));let l="";return o.forEach(d=>{let f=ij(d);l+=f?f(i,n,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function ah(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Ar(t,e){let n=HU(t);if(th[n]??={},th[n][e])return th[n][e];let r="";switch(e){case"shortDate":r=Jd(t,ln.Short);break;case"mediumDate":r=Jd(t,ln.Medium);break;case"longDate":r=Jd(t,ln.Long);break;case"fullDate":r=Jd(t,ln.Full);break;case"shortTime":r=Xd(t,ln.Short);break;case"mediumTime":r=Xd(t,ln.Medium);break;case"longTime":r=Xd(t,ln.Long);break;case"fullTime":r=Xd(t,ln.Full);break;case"short":let i=Ar(t,"shortTime"),s=Ar(t,"shortDate");r=nh(eh(t,ln.Short),[i,s]);break;case"medium":let o=Ar(t,"mediumTime"),a=Ar(t,"mediumDate");r=nh(eh(t,ln.Medium),[o,a]);break;case"long":let c=Ar(t,"longTime"),l=Ar(t,"longDate");r=nh(eh(t,ln.Long),[c,l]);break;case"full":let d=Ar(t,"fullTime"),f=Ar(t,"fullDate");r=nh(eh(t,ln.Full),[d,f]);break}return r&&(th[n][e]=r),r}function nh(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function Ln(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function XU(t,e){return Ln(t,3).substring(0,e)}function lt(t,e,n=0,r=!1,i=!1){return function(s,o){let a=ej(t,s);if((n>0||a>-n)&&(a+=n),t===be.Hours)a===0&&n===-12&&(a=12);else if(t===be.FractionalSeconds)return XU(a,e);let c=lh(o,mi.MinusSign);return Ln(a,e,c,r,i)}}function ej(t,e){switch(t){case be.FullYear:return e.getFullYear();case be.Month:return e.getMonth();case be.Date:return e.getDate();case be.Hours:return e.getHours();case be.Minutes:return e.getMinutes();case be.Seconds:return e.getSeconds();case be.FractionalSeconds:return e.getMilliseconds();case be.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function Le(t,e,n=qt.Format,r=!1){return function(i,s){return tj(i,s,t,e,n,r)}}function tj(t,e,n,r,i,s){switch(n){case Ce.Months:return GU(e,i,r)[t.getMonth()];case Ce.Days:return zU(e,i,r)[t.getDay()];case Ce.DayPeriods:let o=t.getHours(),a=t.getMinutes();if(s){let l=KU(e),d=QU(e,i,r),f=l.findIndex(g=>{if(Array.isArray(g)){let[_,E]=g,R=o>=_.hours&&a>=_.minutes,A=o<E.hours||o===E.hours&&a<E.minutes;if(_.hours<E.hours){if(R&&A)return!0}else if(R||A)return!0}else if(g.hours===o&&g.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return qU(e,i,r)[o<12?0:1];case Ce.Eras:return WU(e,r)[t.getFullYear()<=0?0:1];default:let c=n;throw new Error(`unexpected translation type ${c}`)}}function rh(t){return function(e,n,r){let i=-1*r,s=lh(n,mi.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case Rr.Short:return(i>=0?"+":"")+Ln(o,2,s)+Ln(Math.abs(i%60),2,s);case Rr.ShortGMT:return"GMT"+(i>=0?"+":"")+Ln(o,1,s);case Rr.Long:return"GMT"+(i>=0?"+":"")+Ln(o,2,s)+":"+Ln(Math.abs(i%60),2,s);case Rr.Extended:return r===0?"Z":(i>=0?"+":"")+Ln(o,2,s)+":"+Ln(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}var nj=0,sh=4;function rj(t){let e=ah(t,nj,1).getDay();return ah(t,0,1+(e<=sh?sh:sh+7)-e)}function mA(t){let e=t.getDay(),n=e===0?-3:sh-e;return ah(t.getFullYear(),t.getMonth(),t.getDate()+n)}function Jm(t,e=!1){return function(n,r){let i;if(e){let s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+s)/7)}else{let s=mA(n),o=rj(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Ln(i,t,lh(r,mi.MinusSign))}}function ih(t,e=!1){return function(n,r){let s=mA(n).getFullYear();return Ln(s,t,lh(r,mi.MinusSign),e)}}var Xm={};function ij(t){if(Xm[t])return Xm[t];let e;switch(t){case"G":case"GG":case"GGG":e=Le(Ce.Eras,Me.Abbreviated);break;case"GGGG":e=Le(Ce.Eras,Me.Wide);break;case"GGGGG":e=Le(Ce.Eras,Me.Narrow);break;case"y":e=lt(be.FullYear,1,0,!1,!0);break;case"yy":e=lt(be.FullYear,2,0,!0,!0);break;case"yyy":e=lt(be.FullYear,3,0,!1,!0);break;case"yyyy":e=lt(be.FullYear,4,0,!1,!0);break;case"Y":e=ih(1);break;case"YY":e=ih(2,!0);break;case"YYY":e=ih(3);break;case"YYYY":e=ih(4);break;case"M":case"L":e=lt(be.Month,1,1);break;case"MM":case"LL":e=lt(be.Month,2,1);break;case"MMM":e=Le(Ce.Months,Me.Abbreviated);break;case"MMMM":e=Le(Ce.Months,Me.Wide);break;case"MMMMM":e=Le(Ce.Months,Me.Narrow);break;case"LLL":e=Le(Ce.Months,Me.Abbreviated,qt.Standalone);break;case"LLLL":e=Le(Ce.Months,Me.Wide,qt.Standalone);break;case"LLLLL":e=Le(Ce.Months,Me.Narrow,qt.Standalone);break;case"w":e=Jm(1);break;case"ww":e=Jm(2);break;case"W":e=Jm(1,!0);break;case"d":e=lt(be.Date,1);break;case"dd":e=lt(be.Date,2);break;case"c":case"cc":e=lt(be.Day,1);break;case"ccc":e=Le(Ce.Days,Me.Abbreviated,qt.Standalone);break;case"cccc":e=Le(Ce.Days,Me.Wide,qt.Standalone);break;case"ccccc":e=Le(Ce.Days,Me.Narrow,qt.Standalone);break;case"cccccc":e=Le(Ce.Days,Me.Short,qt.Standalone);break;case"E":case"EE":case"EEE":e=Le(Ce.Days,Me.Abbreviated);break;case"EEEE":e=Le(Ce.Days,Me.Wide);break;case"EEEEE":e=Le(Ce.Days,Me.Narrow);break;case"EEEEEE":e=Le(Ce.Days,Me.Short);break;case"a":case"aa":case"aaa":e=Le(Ce.DayPeriods,Me.Abbreviated);break;case"aaaa":e=Le(Ce.DayPeriods,Me.Wide);break;case"aaaaa":e=Le(Ce.DayPeriods,Me.Narrow);break;case"b":case"bb":case"bbb":e=Le(Ce.DayPeriods,Me.Abbreviated,qt.Standalone,!0);break;case"bbbb":e=Le(Ce.DayPeriods,Me.Wide,qt.Standalone,!0);break;case"bbbbb":e=Le(Ce.DayPeriods,Me.Narrow,qt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Le(Ce.DayPeriods,Me.Abbreviated,qt.Format,!0);break;case"BBBB":e=Le(Ce.DayPeriods,Me.Wide,qt.Format,!0);break;case"BBBBB":e=Le(Ce.DayPeriods,Me.Narrow,qt.Format,!0);break;case"h":e=lt(be.Hours,1,-12);break;case"hh":e=lt(be.Hours,2,-12);break;case"H":e=lt(be.Hours,1);break;case"HH":e=lt(be.Hours,2);break;case"m":e=lt(be.Minutes,1);break;case"mm":e=lt(be.Minutes,2);break;case"s":e=lt(be.Seconds,1);break;case"ss":e=lt(be.Seconds,2);break;case"S":e=lt(be.FractionalSeconds,1);break;case"SS":e=lt(be.FractionalSeconds,2);break;case"SSS":e=lt(be.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=rh(Rr.Short);break;case"ZZZZZ":e=rh(Rr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=rh(Rr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=rh(Rr.Long);break;default:return null}return Xm[t]=e,e}function _A(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function sj(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function oj(t,e,n){let r=n?-1:1,i=t.getTimezoneOffset(),s=_A(e,i);return sj(t,r*(s-i))}function aj(t){if(cA(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,s=1,o=1]=t.split("-").map(a=>+a);return ah(i,s-1,o)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(YU))return cj(r)}let e=new Date(t);if(!cA(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function cj(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return s.call(e,o,a,c,l),e}function cA(t){return t instanceof Date&&!isNaN(t.valueOf())}function yA(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var e_=/\s+/,uA=[],vA=(()=>{class t{constructor(n,r){this._ngEl=n,this._renderer=r,this.initialClasses=uA,this.stateMap=new Map}set klass(n){this.initialClasses=n!=null?n.trim().split(e_):uA}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(e_):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(e_).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||t)(br(bc),br(zd))}}static{this.\u0275dir=Pd({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return t})();function uj(t,e){return new W(2100,!1)}var lj="mediumDate",dj=new U(""),hj=new U(""),IA=(()=>{class t{constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,s){if(n==null||n===""||n!==n)return null;try{let o=r??this.defaultOptions?.dateFormat??lj,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return JU(n,o,s||this.locale,a)}catch(o){throw uj(t,o.message)}}static{this.\u0275fac=function(r){return new(r||t)(br(Qd,16),br(dj,24),br(hj,24))}}static{this.\u0275pipe=hD({name:"date",type:t,pure:!0,standalone:!0})}}return t})();var r_="browser",fj="server";function i_(t){return t===r_}function s_(t){return t===fj}var ch=class{};var c_=class extends oh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},u_=class t extends c_{static makeCurrent(){dA(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=pj();return n==null?null:gj(n)}resetBaseElement(){Ac=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return yA(document.cookie,e)}},Ac=null;function pj(){return Ac=Ac||document.querySelector("base"),Ac?Ac.getAttribute("href"):null}function gj(t){return new URL(t,document.baseURI).pathname}var mj=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),l_=new U(""),CA=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new W(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(J(l_),J(Z))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),dh=class{constructor(e){this._doc=e}},o_="ng-app-id",bA=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=s_(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${o_}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(o_),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(o_,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(J(Cn),J(Nm),J(Pm,8),J(Fn))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),a_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},h_=/%COMP%/g,DA="%COMP%",_j=`_nghost-${DA}`,yj=`_ngcontent-${DA}`,vj=!0,Ij=new U("",{providedIn:"root",factory:()=>vj});function wj(t){return yj.replace(h_,t)}function Ej(t){return _j.replace(h_,t)}function SA(t,e){return e.map(n=>n.replace(h_,t))}var wA=(()=>{class t{constructor(n,r,i,s,o,a,c,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=s_(a),this.defaultRenderer=new Rc(n,o,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Xn.ShadowDom&&(r=Ae(V({},r),{encapsulation:Xn.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof hh?i.applyToHost(n):i instanceof Nc&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case Xn.Emulated:s=new hh(c,l,r,this.appId,d,o,a,f);break;case Xn.ShadowDom:return new d_(c,l,n,r,o,a,this.nonce,f);default:s=new Nc(c,l,r,d,o,a,f);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(J(CA),J(bA),J(Nm),J(Ij),J(Cn),J(Fn),J(Z),J(Pm))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),Rc=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(a_[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(EA(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(EA(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new W(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=a_[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=a_[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(es.DashCase|es.Important)?e.style.setProperty(n,r,i&es.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&es.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Do().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function EA(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var d_=class extends Rc{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=SA(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Nc=class extends Rc{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?SA(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},hh=class extends Nc{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=wj(l),this.hostAttr=Ej(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},Tj=(()=>{class t extends dh{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(J(Cn))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),TA=["alt","control","meta","shift"],Cj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bj={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Dj=(()=>{class t extends dh{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Do().onAndCancel(n,s.domEventName,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),TA.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(n,r){let i=Cj[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),TA.forEach(o=>{if(o!==i){let a=bj[o];a(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(J(Cn))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})();function AA(t,e){return sA(V({rootComponent:t},Sj(e)))}function Sj(t){return{appProviders:[...Pj,...t?.providers??[]],platformProviders:xj}}function Aj(){u_.makeCurrent()}function Rj(){return new nr}function Nj(){return pS(document),document}var xj=[{provide:Fn,useValue:r_},{provide:xm,useValue:Aj,multi:!0},{provide:Cn,useFactory:Nj,deps:[]}];var Pj=[{provide:Md,useValue:"root"},{provide:nr,useFactory:Rj,deps:[]},{provide:l_,useClass:Tj,multi:!0,deps:[Cn,Z,Fn]},{provide:l_,useClass:Dj,multi:!0,deps:[Cn]},wA,bA,CA,{provide:vo,useExisting:wA},{provide:ch,useClass:mj,deps:[]},[]];var fh=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(J(Cn))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var oe="primary",Kc=Symbol("RouteTitle"),__=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Po(t){return new __(t)}function Mj(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function kj(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!rr(t[n],e[n]))return!1;return!0}function rr(t,e){let n=t?y_(t):void 0,r=e?y_(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!LA(t[i],e[i]))return!1;return!0}function y_(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function LA(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function VA(t){return t.length>0?t[t.length-1]:null}function _i(t){return hg(t)?t:Dc(t)?Ye(Promise.resolve(t)):K(t)}var Oj={exact:jA,subset:BA},UA={exact:Fj,subset:Lj,ignored:()=>!0};function NA(t,e,n){return Oj[n.paths](t.root,e.root,n.matrixParams)&&UA[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Fj(t,e){return rr(t,e)}function jA(t,e,n){if(!os(t.segments,e.segments)||!mh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!jA(t.children[r],e.children[r],n))return!1;return!0}function Lj(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>LA(t[n],e[n]))}function BA(t,e,n){return $A(t,e,e.segments,n)}function $A(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!os(i,n)||e.hasChildren()||!mh(i,n,r))}else if(t.segments.length===n.length){if(!os(t.segments,n)||!mh(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!BA(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!os(t.segments,i)||!mh(t.segments,i,r)||!t.children[oe]?!1:$A(t.children[oe],e,s,r)}}function mh(t,e,n){return e.every((r,i)=>UA[n](t[i].parameters,r.parameters))}var xr=class{constructor(e=new De([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Po(this.queryParams),this._queryParamMap}toString(){return jj.serialize(this)}},De=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _h(this)}},ss=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Po(this.parameters),this._parameterMap}toString(){return qA(this)}};function Vj(t,e){return os(t,e)&&t.every((n,r)=>rr(n.parameters,e[r].parameters))}function os(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function Uj(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===oe&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==oe&&(n=n.concat(e(i,r)))}),n}var H_=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>new Lc,providedIn:"root"})}}return t})(),Lc=class{parse(e){let n=new I_(e);return new xr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${xc(e.root,!0)}`,r=Hj(e.queryParams),i=typeof e.fragment=="string"?`#${Bj(e.fragment)}`:"";return`${n}${r}${i}`}},jj=new Lc;function _h(t){return t.segments.map(e=>qA(e)).join("/")}function xc(t,e){if(!t.hasChildren())return _h(t);if(e){let n=t.children[oe]?xc(t.children[oe],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==oe&&r.push(`${i}:${xc(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=Uj(t,(r,i)=>i===oe?[xc(t.children[oe],!1)]:[`${i}:${xc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[oe]!=null?`${_h(t)}/${n[0]}`:`${_h(t)}/(${n.join("//")})`}}function HA(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ph(t){return HA(t).replace(/%3B/gi,";")}function Bj(t){return encodeURI(t)}function v_(t){return HA(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function yh(t){return decodeURIComponent(t)}function xA(t){return yh(t.replace(/\+/g,"%20"))}function qA(t){return`${v_(t.path)}${$j(t.parameters)}`}function $j(t){return Object.entries(t).map(([e,n])=>`;${v_(e)}=${v_(n)}`).join("")}function Hj(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${ph(n)}=${ph(i)}`).join("&"):`${ph(n)}=${ph(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var qj=/^[^\/()?;#]+/;function f_(t){let e=t.match(qj);return e?e[0]:""}var zj=/^[^\/()?;=#]+/;function Gj(t){let e=t.match(zj);return e?e[0]:""}var Wj=/^[^=?&#]+/;function Kj(t){let e=t.match(Wj);return e?e[0]:""}var Qj=/^[^&#]+/;function Yj(t){let e=t.match(Qj);return e?e[0]:""}var I_=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[oe]=new De(e,n)),r}parseSegment(){let e=f_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new W(4009,!1);return this.capture(e),new ss(yh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Gj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=f_(this.remaining);i&&(r=i,this.capture(r))}e[yh(n)]=yh(r)}parseQueryParam(e){let n=Kj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=Yj(this.remaining);o&&(r=o,this.capture(r))}let i=xA(n),s=xA(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=f_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new W(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=oe);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[oe]:new De([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new W(4011,!1)}};function zA(t){return t.segments.length>0?new De([],{[oe]:t}):t}function GA(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=GA(i);if(r===oe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new De(t.segments,e);return Zj(n)}function Zj(t){if(t.numberOfChildren===1&&t.children[oe]){let e=t.children[oe];return new De(t.segments.concat(e.segments),e.children)}return t}function Vc(t){return t instanceof xr}function Jj(t,e,n=null,r=null){let i=WA(t);return KA(i,e,n,r)}function WA(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new De(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=zA(r);return e??i}function KA(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return p_(i,i,i,n,r);let s=Xj(e);if(s.toRoot())return p_(i,i,new De([],{}),n,r);let o=e2(s,i,t),a=o.processChildren?kc(o.segmentGroup,o.index,s.commands):YA(o.segmentGroup,o.index,s.commands);return p_(i,o.segmentGroup,a,n,r)}function vh(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Uc(t){return typeof t=="object"&&t!=null&&t.outlets}function p_(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;t===e?o=n:o=QA(t,e,n);let a=zA(GA(o));return new xr(a,s,i)}function QA(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=QA(s,e,n)}),new De(t.segments,r)}var Ih=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&vh(r[0]))throw new W(4003,!1);let i=r.find(Uc);if(i&&i!==VA(r))throw new W(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Xj(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Ih(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Ih(n,e,r)}var Ro=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function e2(t,e,n){if(t.isAbsolute)return new Ro(e,!0,0);if(!n)return new Ro(e,!1,NaN);if(n.parent===null)return new Ro(n,!0,0);let r=vh(t.commands[0])?0:1,i=n.segments.length-1+r;return t2(n,i,t.numberOfDoubleDots)}function t2(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new W(4005,!1);i=r.segments.length}return new Ro(r,!1,i-s)}function n2(t){return Uc(t[0])?t[0].outlets:{[oe]:t}}function YA(t,e,n){if(t??=new De([],{}),t.segments.length===0&&t.hasChildren())return kc(t,e,n);let r=r2(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new De(t.segments.slice(0,r.pathIndex),{});return s.children[oe]=new De(t.segments.slice(r.pathIndex),t.children),kc(s,0,i)}else return r.match&&i.length===0?new De(t.segments,{}):r.match&&!t.hasChildren()?w_(t,e,n):r.match?kc(t,0,i):w_(t,e,n)}function kc(t,e,n){if(n.length===0)return new De(t.segments,{});{let r=n2(n),i={};if(Object.keys(r).some(s=>s!==oe)&&t.children[oe]&&t.numberOfChildren===1&&t.children[oe].segments.length===0){let s=kc(t.children[oe],e,n);return new De(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=YA(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new De(t.segments,i)}}function r2(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Uc(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!MA(c,l,o))return s;r+=2}else{if(!MA(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function w_(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Uc(s)){let c=i2(s.outlets);return new De(r,c)}if(i===0&&vh(n[0])){let c=t.segments[e];r.push(new ss(c.path,PA(n[0]))),i++;continue}let o=Uc(s)?s.outlets[oe]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&vh(a)?(r.push(new ss(o,PA(a))),i+=2):(r.push(new ss(o,{})),i++)}return new De(r,{})}function i2(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=w_(new De([],{}),0,r))}),e}function PA(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function MA(t,e,n){return t==n.path&&rr(e,n.parameters)}var Oc="imperative",Tt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Tt||{}),bn=class{constructor(e,n){this.id=e,this.url=n}},jc=class extends bn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Tt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},as=class extends bn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Tt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},hn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(hn||{}),E_=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(E_||{}),Nr=class extends bn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Tt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},cs=class extends bn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Tt.NavigationSkipped}},Bc=class extends bn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Tt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},wh=class extends bn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Tt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},T_=class extends bn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Tt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},C_=class extends bn{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Tt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},b_=class extends bn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Tt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},D_=class extends bn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Tt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},S_=class{constructor(e){this.route=e,this.type=Tt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},A_=class{constructor(e){this.route=e,this.type=Tt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},R_=class{constructor(e){this.snapshot=e,this.type=Tt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},N_=class{constructor(e){this.snapshot=e,this.type=Tt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},x_=class{constructor(e){this.snapshot=e,this.type=Tt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$c=class{constructor(e){this.snapshot=e,this.type=Tt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Hc=class{},Mo=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function s2(t,e){return t.providers&&!t._injector&&(t._injector=qm(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Vn(t){return t.outlet||oe}function o2(t,e){let n=t.filter(r=>Vn(r)===e);return n.push(...t.filter(r=>Vn(r)!==e)),n}function Qc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var P_=class{get injector(){return Qc(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Ah(this.rootInjector),this.attachRef=null}},Ah=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new P_(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)(J(vn))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Eh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=M_(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=M_(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=k_(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return k_(e,this._root).map(n=>n.value)}};function M_(t,e){if(t===e.value)return e;for(let n of e.children){let r=M_(t,n);if(r)return r}return null}function k_(t,e){if(t===e.value)return[e];for(let n of e.children){let r=k_(t,n);if(r.length)return r.unshift(e),r}return[]}var dn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ao(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Th=class extends Eh{constructor(e,n){super(e),this.snapshot=n,q_(this,e)}toString(){return this.snapshot.toString()}};function ZA(t){let e=a2(t),n=new Et([new ss("",{})]),r=new Et({}),i=new Et({}),s=new Et({}),o=new Et(""),a=new ko(n,r,s,o,i,oe,t,e.root);return a.snapshot=e.root,new Th(new dn(a,[]),e)}function a2(t){let e={},n={},r={},i="",s=new No([],e,r,i,n,oe,t,null,{});return new bh("",new dn(s,[]))}var ko=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Q(l=>l[Kc]))??K(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Q(e=>Po(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Q(e=>Po(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ch(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),t.params),data:V(V({},e.data),t.data),resolve:V(V(V(V({},t.data),e.data),i?.data),t._resolvedData)}:r={params:V({},t.params),data:V({},t.data),resolve:V(V({},t.data),t._resolvedData??{})},i&&XA(i)&&(r.resolve[Kc]=i.title),r}var No=class{get title(){return this.data?.[Kc]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Po(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Po(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},bh=class extends Eh{constructor(e,n){super(n),this.url=e,q_(this,n)}toString(){return JA(this._root)}};function q_(t,e){e.value._routerState=t,e.children.forEach(n=>q_(t,n))}function JA(t){let e=t.children.length>0?` { ${t.children.map(JA).join(", ")} } `:"";return`${t.value}${e}`}function g_(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,rr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),rr(e.params,n.params)||t.paramsSubject.next(n.params),kj(e.url,n.url)||t.urlSubject.next(n.url),rr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function O_(t,e){let n=rr(t.params,e.params)&&Vj(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||O_(t.parent,e.parent))}function XA(t){return typeof t.title=="string"||t.title===null}var z_=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=oe,this.activateEvents=new Bt,this.deactivateEvents=new Bt,this.attachEvents=new Bt,this.detachEvents=new Bt,this.parentContexts=P(Ah),this.location=P(Gd),this.changeDetector=P(bo),this.inputBinder=P(G_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new W(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new W(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new W(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new W(4013,!1);this._activatedRoute=n;let i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new F_(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=Pd({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ld]})}}return t})(),F_=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===ko?this.route:e===Ah?this.childContexts:this.parent.get(e,n)}},G_=new U("");function c2(t,e,n){let r=qc(t,e._root,n?n._root:void 0);return new Th(r,e)}function qc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=u2(t,e,n);return new dn(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>qc(t,a)),o}}let r=l2(e.value),i=e.children.map(s=>qc(t,s));return new dn(r,i)}}function u2(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return qc(t,r,i);return qc(t,r)})}function l2(t){return new ko(new Et(t.url),new Et(t.params),new Et(t.queryParams),new Et(t.fragment),new Et(t.data),t.outlet,t.component,t)}var zc=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},e0="ngNavigationCancelingError";function Dh(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Vc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=t0(!1,hn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function t0(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[e0]=!0,n.cancellationCode=e,n}function d2(t){return n0(t)&&Vc(t.url)}function n0(t){return!!t&&t[e0]}var h2=(t,e,n,r)=>Q(i=>(new L_(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),L_=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),g_(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Ao(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Ao(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Ao(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Ao(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new $c(s.value.snapshot))}),e.children.length&&this.forwardEvent(new N_(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(g_(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),g_(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Sh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},xo=class{constructor(e,n){this.component=e,this.route=n}};function f2(t,e,n){let r=t._root,i=e?e._root:null;return Pc(r,i,n,[r.value])}function p2(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Fo(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!eD(t)?t:e.get(t):r}function Pc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ao(e);return t.children.forEach(o=>{g2(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Fc(a,n.getContext(o),i)),i}function g2(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=m2(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Sh(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Pc(t,e,a?a.children:null,r,i):Pc(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new xo(a.outlet.component,o))}else o&&Fc(e,a,i),i.canActivateChecks.push(new Sh(r)),s.component?Pc(t,null,a?a.children:null,r,i):Pc(t,null,n,r,i);return i}function m2(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!os(t.url,e.url);case"pathParamsOrQueryParamsChange":return!os(t.url,e.url)||!rr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!O_(t,e)||!rr(t.queryParams,e.queryParams);case"paramsChange":default:return!O_(t,e)}}function Fc(t,e,n){let r=Ao(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Fc(o,e.children.getContext(s),n):Fc(o,null,n):Fc(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new xo(e.outlet.component,i)):n.canDeactivateChecks.push(new xo(null,i)):n.canDeactivateChecks.push(new xo(null,i))}function Yc(t){return typeof t=="function"}function _2(t){return typeof t=="boolean"}function y2(t){return t&&Yc(t.canLoad)}function v2(t){return t&&Yc(t.canActivate)}function I2(t){return t&&Yc(t.canActivateChild)}function w2(t){return t&&Yc(t.canDeactivate)}function E2(t){return t&&Yc(t.canMatch)}function r0(t){return t instanceof vr||t?.name==="EmptyError"}var gh=Symbol("INITIAL_VALUE");function Oo(){return Yt(t=>no(t.map(e=>e.pipe(Ir(1),so(gh)))).pipe(Q(e=>{for(let n of e)if(n!==!0){if(n===gh)return gh;if(n===!1||T2(n))return n}return!0}),jt(e=>e!==gh),Ir(1)))}function T2(t){return Vc(t)||t instanceof zc}function C2(t,e){return rt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?K(Ae(V({},n),{guardsResult:!0})):b2(o,r,i,t).pipe(rt(a=>a&&_2(a)?D2(r,s,t,e):K(a)),Q(a=>Ae(V({},n),{guardsResult:a})))})}function b2(t,e,n,r){return Ye(t).pipe(rt(i=>x2(i.component,i.route,n,e,r)),Yn(i=>i!==!0,!0))}function D2(t,e,n,r){return Ye(e).pipe(qi(i=>ro(A2(i.route.parent,r),S2(i.route,r),N2(t,i.path,n),R2(t,i.route,n))),Yn(i=>i!==!0,!0))}function S2(t,e){return t!==null&&e&&e(new x_(t)),K(!0)}function A2(t,e){return t!==null&&e&&e(new R_(t)),K(!0)}function R2(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return K(!0);let i=r.map(s=>Kl(()=>{let o=Qc(e)??n,a=Fo(s,o),c=v2(a)?a.canActivate(e,t):Er(o,()=>a(e,t));return _i(c).pipe(Yn())}));return K(i).pipe(Oo())}function N2(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>p2(o)).filter(o=>o!==null).map(o=>Kl(()=>{let a=o.guards.map(c=>{let l=Qc(o.node)??n,d=Fo(c,l),f=I2(d)?d.canActivateChild(r,t):Er(l,()=>d(r,t));return _i(f).pipe(Yn())});return K(a).pipe(Oo())}));return K(s).pipe(Oo())}function x2(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return K(!0);let o=s.map(a=>{let c=Qc(e)??i,l=Fo(a,c),d=w2(l)?l.canDeactivate(t,e,n,r):Er(c,()=>l(t,e,n,r));return _i(d).pipe(Yn())});return K(o).pipe(Oo())}function P2(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return K(!0);let s=i.map(o=>{let a=Fo(o,t),c=y2(a)?a.canLoad(e,n):Er(t,()=>a(e,n));return _i(c)});return K(s).pipe(Oo(),i0(r))}function i0(t){return Ml(mt(e=>{if(typeof e!="boolean")throw Dh(t,e)}),Q(e=>e===!0))}function M2(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return K(!0);let s=i.map(o=>{let a=Fo(o,t),c=E2(a)?a.canMatch(e,n):Er(t,()=>a(e,n));return _i(c)});return K(s).pipe(Oo(),i0(r))}var Gc=class{constructor(e){this.segmentGroup=e||null}},Wc=class extends Error{constructor(e){super(),this.urlTree=e}};function So(t){return to(new Gc(t))}function k2(t){return to(new W(4e3,!1))}function O2(t){return to(t0(!1,hn.GuardRejected))}var V_=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return K(r);if(i.numberOfChildren>1||!i.children[oe])return k2(`${e.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,params:_,data:E,title:R}=i,A=Er(s,()=>a({params:_,data:E,queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,title:R}));if(A instanceof xr)throw new Wc(A);n=A}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Wc(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new xr(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new De(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new W(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},U_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function F2(t,e,n,r,i){let s=s0(t,e,n);return s.matched?(r=s2(e,r),M2(r,e,n,i).pipe(Q(o=>o===!0?s:V({},U_)))):K(s)}function s0(t,e,n){if(e.path==="**")return L2(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?V({},U_):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Mj)(n,t,e);if(!i)return V({},U_);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?V(V({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function L2(t){return{matched:!0,parameters:t.length>0?VA(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function kA(t,e,n,r){return n.length>0&&j2(t,n,r)?{segmentGroup:new De(e,U2(r,new De(n,t.children))),slicedSegments:[]}:n.length===0&&B2(t,n,r)?{segmentGroup:new De(t.segments,V2(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new De(t.segments,t.children),slicedSegments:n}}function V2(t,e,n,r){let i={};for(let s of n)if(Rh(t,e,s)&&!r[Vn(s)]){let o=new De([],{});i[Vn(s)]=o}return V(V({},r),i)}function U2(t,e){let n={};n[oe]=e;for(let r of t)if(r.path===""&&Vn(r)!==oe){let i=new De([],{});n[Vn(r)]=i}return n}function j2(t,e,n){return n.some(r=>Rh(t,e,r)&&Vn(r)!==oe)}function B2(t,e,n){return n.some(r=>Rh(t,e,r))}function Rh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function $2(t,e,n){return e.length===0&&!t.children[n]}var j_=class{};function H2(t,e,n,r,i,s,o="emptyOnly"){return new B_(t,e,n,r,i,o,s).recognize()}var q2=31,B_=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new V_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new W(4002,`'${e.segmentGroup}'`)}recognize(){let e=kA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Q(({children:n,rootSnapshot:r})=>{let i=new dn(r,n),s=new bh("",i),o=Jj(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new No([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,oe,n).pipe(Q(r=>({children:r,rootSnapshot:n})),ei(r=>{if(r instanceof Wc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Gc?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(Q(o=>o instanceof dn?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Ye(s).pipe(qi(o=>{let a=r.children[o],c=o2(n,o);return this.processSegmentGroup(e,c,a,o,i)}),Jl((o,a)=>(o.push(...a),o)),ti(null),mg(),rt(o=>{if(o===null)return So(r);let a=o0(o);return z2(a),K(a)}))}processSegment(e,n,r,i,s,o,a){return Ye(n).pipe(qi(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,s,o,a).pipe(ei(l=>{if(l instanceof Gc)return K(null);throw l}))),Yn(c=>!!c),ei(c=>{if(r0(c))return $2(r,i,s)?K(new j_):So(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,c){return Vn(r)!==o&&(o===oe||!Rh(i,s,r))?So(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,c):So(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=s0(n,i,s);if(!c)return So(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>q2&&(this.allowRedirects=!1));let _=new No(s,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,OA(i),Vn(i),i.component??i._loadedComponent??null,i,FA(i)),E=Ch(_,a,this.paramsInheritanceStrategy);_.params=Object.freeze(E.params),_.data=Object.freeze(E.data);let R=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,_,e);return this.applyRedirects.lineralizeSegments(i,R).pipe(rt(A=>this.processSegment(e,r,n,A.concat(g),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=F2(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Yt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Yt(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:_}=c,E=new No(g,f,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,OA(r),Vn(r),r.component??r._loadedComponent??null,r,FA(r)),R=Ch(E,o,this.paramsInheritanceStrategy);E.params=Object.freeze(R.params),E.data=Object.freeze(R.data);let{segmentGroup:A,slicedSegments:M}=kA(n,g,_,l);if(M.length===0&&A.hasChildren())return this.processChildren(d,l,A,E).pipe(Q($=>new dn(E,$)));if(l.length===0&&M.length===0)return K(new dn(E,[]));let L=Vn(r)===s;return this.processSegment(d,l,A,M,L?oe:s,!0,E).pipe(Q($=>new dn(E,$ instanceof dn?[$]:[])))}))):So(n)))}getChildConfig(e,n,r){return n.children?K({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?K({routes:n._loadedRoutes,injector:n._loadedInjector}):P2(e,n,r,this.urlSerializer).pipe(rt(i=>i?this.configLoader.loadChildren(e,n).pipe(mt(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):O2(n))):K({routes:[],injector:e})}};function z2(t){t.sort((e,n)=>e.value.outlet===oe?-1:n.value.outlet===oe?1:e.value.outlet.localeCompare(n.value.outlet))}function G2(t){let e=t.value.routeConfig;return e&&e.path===""}function o0(t){let e=[],n=new Set;for(let r of t){if(!G2(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=o0(r.children);e.push(new dn(r.value,i))}return e.filter(r=>!n.has(r))}function OA(t){return t.data||{}}function FA(t){return t.resolve||{}}function W2(t,e,n,r,i,s){return rt(o=>H2(t,e,n,r,o.extractedUrl,i,s).pipe(Q(({state:a,tree:c})=>Ae(V({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function K2(t,e){return rt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return K(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of a0(c))o.add(l);let a=0;return Ye(o).pipe(qi(c=>s.has(c)?Q2(c,r,t,e):(c.data=Ch(c,c.parent,t).resolve,K(void 0))),mt(()=>a++),io(1),rt(c=>a===o.size?K(n):rn))})}function a0(t){let e=t.children.map(n=>a0(n)).flat();return[t,...e]}function Q2(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!XA(i)&&(s[Kc]=i.title),Y2(s,t,e,r).pipe(Q(o=>(t._resolvedData=o,t.data=Ch(t,t.parent,n).resolve,null)))}function Y2(t,e,n,r){let i=y_(t);if(i.length===0)return K({});let s={};return Ye(i).pipe(rt(o=>Z2(t[o],e,n,r).pipe(Yn(),mt(a=>{if(a instanceof zc)throw Dh(new Lc,a);s[o]=a}))),io(1),pg(s),ei(o=>r0(o)?rn:to(o)))}function Z2(t,e,n,r){let i=Qc(e)??r,s=Fo(t,i),o=s.resolve?s.resolve(e,n):Er(i,()=>s(e,n));return _i(o)}function m_(t){return Yt(e=>{let n=t(e);return n?Ye(n).pipe(Q(()=>e)):K(e)})}var c0=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===oe);return r}getResolvedTitleForRoute(n){return n.data[Kc]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>P(J2),providedIn:"root"})}}return t})(),J2=(()=>{class t extends c0{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(J(fh))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),W_=new U("",{providedIn:"root",factory:()=>({})}),K_=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=ui({type:t,selectors:[["ng-component"]],standalone:!0,features:[pi],decls:1,vars:0,template:function(r,i){r&1&&ns(0,"router-outlet")},dependencies:[z_],encapsulation:2})}}return t})();function Q_(t){let e=t.children&&t.children.map(Q_),n=e?Ae(V({},t),{children:e}):V({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==oe&&(n.component=K_),n}var Y_=new U(""),X2=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=P(Qm)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return K(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=_i(n.loadComponent()).pipe(Q(u0),mt(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),lc(()=>{this.componentLoaders.delete(n)})),i=new Zs(r,()=>new nt).pipe(Ys());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return K({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=eB(r,this.compiler,n,this.onLoadEndListener).pipe(lc(()=>{this.childrenLoaders.delete(r)})),o=new Zs(s,()=>new nt).pipe(Ys());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function eB(t,e,n,r){return _i(t.loadChildren()).pipe(Q(u0),rt(i=>i instanceof Ec||Array.isArray(i)?K(i):Ye(e.compileModuleAsync(i))),Q(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Y_,[],{optional:!0,self:!0}).flat()),{routes:o.map(Q_),injector:s}}))}function tB(t){return t&&typeof t=="object"&&"default"in t}function u0(t){return tB(t)?t.default:t}var Z_=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>P(nB),providedIn:"root"})}}return t})(),nB=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),rB=new U("");var iB=new U(""),sB=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new nt,this.transitionAbortSubject=new nt,this.configLoader=P(X2),this.environmentInjector=P(vn),this.urlSerializer=P(H_),this.rootContexts=P(Ah),this.location=P(Sc),this.inputBindingEnabled=P(G_,{optional:!0})!==null,this.titleStrategy=P(c0),this.options=P(W_,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=P(Z_),this.createViewTransition=P(rB,{optional:!0}),this.navigationErrorHandler=P(iB,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>K(void 0),this.rootComponentType=null;let n=i=>this.events.next(new S_(i)),r=i=>this.events.next(new A_(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(Ae(V(V({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new Et({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Oc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(jt(s=>s.id!==0),Q(s=>Ae(V({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Yt(s=>{let o=!1,a=!1;return K(s).pipe(Yt(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",hn.SupersededByNewNavigation),rn;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Ae(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&d!=="reload"){let f="";return this.events.next(new cs(c.id,this.urlSerializer.serialize(c.rawUrl),f,E_.IgnoredSameUrlNavigation)),c.resolve(!1),rn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return K(c).pipe(Yt(f=>{let g=this.transitions?.getValue();return this.events.next(new jc(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?rn:Promise.resolve(f)}),W2(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),mt(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=Ae(V({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new wh(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:g,source:_,restoredState:E,extras:R}=c,A=new jc(f,this.urlSerializer.serialize(g),_,E);this.events.next(A);let M=ZA(this.rootComponentType).snapshot;return this.currentTransition=s=Ae(V({},c),{targetSnapshot:M,urlAfterRedirects:g,extras:Ae(V({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,K(s)}else{let f="";return this.events.next(new cs(c.id,this.urlSerializer.serialize(c.extractedUrl),f,E_.IgnoredByUrlHandlingStrategy)),c.resolve(!1),rn}}),mt(c=>{let l=new T_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Q(c=>(this.currentTransition=s=Ae(V({},c),{guards:f2(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),C2(this.environmentInjector,c=>this.events.next(c)),mt(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Dh(this.urlSerializer,c.guardsResult);let l=new C_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),jt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",hn.GuardRejected),!1)),m_(c=>{if(c.guards.canActivateChecks.length)return K(c).pipe(mt(l=>{let d=new b_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Yt(l=>{let d=!1;return K(l).pipe(K2(this.paramsInheritanceStrategy,this.environmentInjector),mt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",hn.NoDataFromResolver)}}))}),mt(l=>{let d=new D_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),m_(c=>{let l=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(mt(g=>{d.component=g}),Q(()=>{})));for(let g of d.children)f.push(...l(g));return f};return no(l(c.targetSnapshot.root)).pipe(ti(null),Ir(1))}),m_(()=>this.afterPreactivation()),Yt(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?Ye(d).pipe(Q(()=>s)):K(s)}),Q(c=>{let l=c2(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=Ae(V({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),mt(()=>{this.events.next(new Hc)}),h2(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Ir(1),mt({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new as(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),sn(this.transitionAbortSubject.pipe(mt(c=>{throw c}))),lc(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",hn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),ei(c=>{if(a=!0,n0(c))this.events.next(new Nr(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),d2(c)?this.events.next(new Mo(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new Bc(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let d=Er(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof zc){let{message:f,cancellationCode:g}=Dh(this.urlSerializer,d);this.events.next(new Nr(s.id,this.urlSerializer.serialize(s.extractedUrl),f,g)),this.events.next(new Mo(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let f=n.errorHandler(c);s.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return rn}))}))}cancelNavigationTransition(n,r,i){let s=new Nr(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function oB(t){return t!==Oc}var aB=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>P(cB),providedIn:"root"})}}return t})(),$_=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},cB=(()=>{class t extends $_{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Dm(t)))(i||t)}})()}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),l0=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>P(uB),providedIn:"root"})}}return t})(),uB=(()=>{class t extends l0{constructor(){super(...arguments),this.location=P(Sc),this.urlSerializer=P(H_),this.options=P(W_,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=P(Z_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new xr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=ZA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof jc)this.stateMemento=this.createStateMemento();else if(n instanceof cs)this.rawUrlTree=r.initialUrl;else if(n instanceof wh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof Hc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof Nr&&(n.code===hn.GuardRejected||n.code===hn.NoDataFromResolver)?this.restoreHistory(r):n instanceof Bc?this.restoreHistory(r,!0):n instanceof as&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof xr?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=V(V({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Dm(t)))(i||t)}})()}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Mc=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Mc||{});function lB(t,e){t.events.pipe(jt(n=>n instanceof as||n instanceof Nr||n instanceof Bc||n instanceof cs),Q(n=>n instanceof as||n instanceof cs?Mc.COMPLETE:(n instanceof Nr?n.code===hn.Redirect||n.code===hn.SupersededByNewNavigation:!1)?Mc.REDIRECTING:Mc.FAILED),jt(n=>n!==Mc.REDIRECTING),Ir(1)).subscribe(()=>{e()})}function dB(t){throw t}var hB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},fB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Nh=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=P(Kd),this.stateManager=P(l0),this.options=P(W_,{optional:!0})||{},this.pendingTasks=P(Xi),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=P(sB),this.urlSerializer=P(H_),this.location=P(Sc),this.urlHandlingStrategy=P(Z_),this._events=new nt,this.errorHandler=this.options.errorHandler||dB,this.navigated=!1,this.routeReuseStrategy=P(aB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=P(Y_,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!P(G_,{optional:!0}),this.eventsSubscription=new Qe,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Nr&&r.code!==hn.Redirect&&r.code!==hn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof as)this.navigated=!0;else if(r instanceof Mo){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||oB(i.source)},o);this.scheduleNavigation(a,Oc,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}gB(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Oc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=V({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Q_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=V(V({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=WA(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),f=this.currentUrlTree.root}return KA(f,n,d,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Vc(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Oc,null,r)}navigate(n,r={skipLocationChange:!1}){return pB(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=V({},hB):r===!1?i=V({},fB):i=r,Vc(n))return NA(this.currentUrlTree,n,i);let s=this.parseUrl(n);return NA(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((f,g)=>{a=f,c=g});let d=this.pendingTasks.add();return lB(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function pB(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new W(4008,!1)}function gB(t){return!(t instanceof Hc)&&!(t instanceof Mo)}var mB=new U("");function d0(t,...e){return Oe([{provide:Y_,multi:!0,useValue:t},[],{provide:ko,useFactory:_B,deps:[Nh]},{provide:Km,multi:!0,useFactory:yB},e.map(n=>n.\u0275providers)])}function _B(t){return t.routerState.root}function yB(){let t=P(me);return e=>{let n=t.get(rs);if(e!==n.components[0])return;let r=t.get(Nh),i=t.get(vB);t.get(IB)===1&&r.initialNavigation(),t.get(wB,null,le.Optional)?.setUpPreloading(),t.get(mB,null,le.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var vB=new U("",{factory:()=>new nt}),IB=new U("",{providedIn:"root",factory:()=>1});var wB=new U("");var h0=[];var TB="firebase",CB="10.14.1";q(TB,CB,"app");var je=new ci("ANGULARFIRE2_VERSION"),Vo=t=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${t} in the constructor, first ensure that ${t} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${t})\`.`;function dt(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var ot=(t,e)=>{let n=e?[e]:wl(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Jt=class{constructor(){return ot(bB)}},bB="app-check";function Lo(){}var xh=class{zone;delegate;constructor(e,n=lg){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},J_=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Lo,{},Lo,Lo)),n.pipe(mt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Je=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new xh(Zone.current)),this.insideAngular=n.run(()=>new xh(Zone.current,ug)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(J(Z))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ph(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function DB(t){return Ph().ngZone.runOutsideAngular(()=>t())}function us(t){return Ph().ngZone.run(()=>t())}function SB(t){return AB(Ph())(t)}function AB(t){return function(n){return n=n.lift(new J_(t.ngZone)),n.pipe(Xr(t.outsideAngular),Jr(t.insideAngular))}}var RB=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),us(()=>t.apply(void 0,r))},we=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=us(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Lo,{},Lo,Lo))),r[s]=RB(r[s],n));let i=DB(()=>t.apply(this,r));if(!e)if(i instanceof ae){let s=Ph();return i.pipe(Xr(s.outsideAngular),Jr(s.insideAngular))}else return us(()=>i);return i instanceof ae?i.pipe(SB):i instanceof Promise?us(()=>new Promise((s,o)=>i.then(a=>us(()=>s(a)),a=>us(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:us(()=>i)};var Be=class{constructor(e){return e}},ze=class{constructor(){return wl()}};function NB(t){return t&&t.length===1?t[0]:new Be(ct())}var X_=new U("angularfire2._apps"),xB={provide:Be,useFactory:NB,deps:[[new te,X_]]},PB={provide:ze,deps:[[new te,X_]]};function MB(t){return(e,n)=>{let r=n.get(Fn);q("angularfire",je.full,"core"),q("angularfire",je.full,"app"),q("angular",JS.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Be(i)}}function f0(t,...e){return Oe([xB,PB,{provide:X_,useFactory:MB(t),multi:!0,deps:[Z,me,Je,...e]}])}var p0=we(bC,!0);function R0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var N0=R0,x0=new Wn("auth","Firebase",R0());var Vh=new Qn("@firebase/auth");function kB(t,...e){Vh.logLevel<=Rt.WARN&&Vh.warn(`Auth (${Kt}): ${t}`,...e)}function kh(t,...e){Vh.logLevel<=Rt.ERROR&&Vh.error(`Auth (${Kt}): ${t}`,...e)}function vi(t,...e){throw vy(t,...e)}function ds(t,...e){return vy(t,...e)}function P0(t,e,n){let r=Object.assign(Object.assign({},N0()),{[e]:n});return new Wn("auth","Firebase",r).create(e,{appName:t.name})}function ls(t){return P0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vy(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return x0.create(t,...e)}function ne(t,e,...n){if(!t)throw vy(e,...n)}function Pr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw kh(e),new Error(e)}function Ii(t,e){t||Pr(e)}function ry(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function OB(){return g0()==="http:"||g0()==="https:"}function g0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function FB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OB()||Qa()||"connection"in navigator)?navigator.onLine:!0}function LB(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var hs=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ii(n>e,"Short delay should be less than long delay!"),this.isMobile=Ka()||yl()}get(){return FB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Iy(t,e){Ii(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Uh=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var VB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var UB=new hs(3e4,6e4);function wy(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function jo(s,o,a,c){return y(this,arguments,function*(t,e,n,r,i={}){return M0(t,i,()=>y(this,null,function*(){let l={},d={};r&&(e==="GET"?d=r:l={body:JSON.stringify(r)});let f=Ui(Object.assign({key:t.config.apiKey},d)).slice(1),g=yield t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);let _=Object.assign({method:e,headers:g},l);return mC()||(_.referrerPolicy="no-referrer"),Uh.fetch()(k0(t,t.config.apiHost,n,f),_)}))})}function M0(t,e,n){return y(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},VB),e);try{let i=new iy(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Mh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mh(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Mh(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Mh(t,"user-disabled",o);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw P0(t,d,l);vi(t,d)}}catch(i){if(i instanceof Wt)throw i;vi(t,"network-request-failed",{message:String(i)})}})}function jB(s,o,a,c){return y(this,arguments,function*(t,e,n,r,i={}){let l=yield jo(t,e,n,r,i);return"mfaPendingCredential"in l&&vi(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function k0(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?Iy(t.config,i):`${t.config.apiScheme}://${i}`}var iy=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ds(this.auth,"network-request-failed")),UB.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Mh(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=ds(t,e,r);return i.customData._tokenResponse=n,i}function BB(t,e){return y(this,null,function*(){return jo(t,"POST","/v1/accounts:delete",e)})}function O0(t,e){return y(this,null,function*(){return jo(t,"POST","/v1/accounts:lookup",e)})}function Zc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Ey(t,e=!1){return y(this,null,function*(){let n=fe(t),r=yield n.getIdToken(e),i=Ty(r);ne(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Zc(ey(i.auth_time)),issuedAtTime:Zc(ey(i.iat)),expirationTime:Zc(ey(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function ey(t){return Number(t)*1e3}function Ty(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return kh("JWT malformed, contained fewer than 3 sections"),null;try{let i=fC(n);return i?JSON.parse(i):(kh("Failed to decode base64 JWT payload"),null)}catch(i){return kh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function m0(t){let e=Ty(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Xc(t,e,n=!1){return y(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Wt&&$B(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function $B({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var sy=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>y(this,null,function*(){yield this.iteration()}),n)}iteration(){return y(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var eu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zc(this.lastLoginAt),this.creationTime=Zc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function jh(t){return y(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Xc(t,O0(n,{idToken:r}));ne(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?F0(s.providerUserInfo):[],a=HB(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,d=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new eu(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)})}function Cy(t){return y(this,null,function*(){let e=fe(t);yield jh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function HB(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function F0(t){return t.map(e=>{var{providerId:n}=e,r=dg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function qB(t,e){return y(this,null,function*(){let n=yield M0(t,{},()=>y(this,null,function*(){let r=Ui({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=k0(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Uh.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function zB(t,e){return y(this,null,function*(){return jo(t,"POST","/v2/accounts:revokeToken",wy(t,e))})}var Jc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):m0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ne(e.length!==0,"internal-error");let n=m0(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return y(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return y(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield qB(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(ne(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ne(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ne(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Pr("not implemented")}};function yi(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Uo=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=dg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new eu(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return y(this,null,function*(){let n=yield Xc(this,this.stsTokenManager.getToken(this.auth,e));return ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Ey(this,e)}reload(){return Cy(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return y(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield jh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return y(this,null,function*(){if(_r(this.auth.app))return Promise.reject(ls(this.auth));let e=yield this.getIdToken();return yield Xc(this,BB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,d;let f=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(a=n.tenantId)!==null&&a!==void 0?a:void 0,A=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,M=(l=n.createdAt)!==null&&l!==void 0?l:void 0,L=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:$,emailVerified:G,isAnonymous:Ne,providerData:Y,stsTokenManager:T}=n;ne($&&T,e,"internal-error");let v=Jc.fromJSON(this.name,T);ne(typeof $=="string",e,"internal-error"),yi(f,e.name),yi(g,e.name),ne(typeof G=="boolean",e,"internal-error"),ne(typeof Ne=="boolean",e,"internal-error"),yi(_,e.name),yi(E,e.name),yi(R,e.name),yi(A,e.name),yi(M,e.name),yi(L,e.name);let I=new t({uid:$,auth:e,email:g,emailVerified:G,displayName:f,isAnonymous:Ne,photoURL:E,phoneNumber:_,tenantId:R,stsTokenManager:v,createdAt:M,lastLoginAt:L});return Y&&Array.isArray(Y)&&(I.providerData=Y.map(C=>Object.assign({},C))),A&&(I._redirectEventId=A),I}static _fromIdTokenResponse(e,n,r=!1){return y(this,null,function*(){let i=new Jc;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield jh(s),s})}static _fromGetAccountInfoResponse(e,n,r){return y(this,null,function*(){let i=n.users[0];ne(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?F0(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Jc;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new eu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var _0=new Map;function Mr(t){Ii(t instanceof Function,"Expected a class definition");let e=_0.get(t);return e?(Ii(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_0.set(t,e),e)}var GB=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return y(this,null,function*(){return!0})}_set(n,r){return y(this,null,function*(){this.storage[n]=r})}_get(n){return y(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return y(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),oy=GB;function Oh(t,e,n){return`firebase:${t}:${e}:${n}`}var Bh=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Oh(this.userKey,i.apiKey,s),this.fullPersistenceKey=Oh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return y(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Uo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return y(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return y(this,null,function*(){if(!n.length)return new t(Mr(oy),e,r);let i=(yield Promise.all(n.map(l=>y(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Mr(oy),o=Oh(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let d=yield l._get(o);if(d){let f=Uo._fromJSON(e,d);l!==s&&(a=f),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>y(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function y0(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(j0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(L0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($0(e))return"Blackberry";if(H0(e))return"Webos";if(V0(e))return"Safari";if((e.includes("chrome/")||U0(e))&&!e.includes("edge/"))return"Chrome";if(B0(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function L0(t=At()){return/firefox\//i.test(t)}function V0(t=At()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function U0(t=At()){return/crios\//i.test(t)}function j0(t=At()){return/iemobile/i.test(t)}function B0(t=At()){return/android/i.test(t)}function $0(t=At()){return/blackberry/i.test(t)}function H0(t=At()){return/webos/i.test(t)}function by(t=At()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function WB(t=At()){var e;return by(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function KB(){return _C()&&document.documentMode===10}function q0(t=At()){return by(t)||B0(t)||H0(t)||$0(t)||/windows phone/i.test(t)||j0(t)}function z0(t,e=[]){let n;switch(t){case"Browser":n=y0(At());break;case"Worker":n=`${y0(At())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Kt}/${r}`}var ay=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return y(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function QB(n){return y(this,arguments,function*(t,e={}){return jo(t,"GET","/v2/passwordPolicy",wy(t,e))})}var YB=6,cy=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:YB,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var uy=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $h(this),this.idTokenSubscription=new $h(this),this.beforeStateQueue=new ay(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=x0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Mr(n)),this._initializationPromise=this.queue(()=>y(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Bh.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return y(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return y(this,null,function*(){try{let n=yield O0(this,{idToken:e}),r=yield Uo._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return y(this,null,function*(){var n;if(_r(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return y(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return y(this,null,function*(){try{yield jh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=LB()}_delete(){return y(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return y(this,null,function*(){if(_r(this.app))return Promise.reject(ls(this));let n=e?fe(e):null;return n&&ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return y(this,null,function*(){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>y(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return y(this,null,function*(){return _r(this.app)?Promise.reject(ls(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return _r(this.app)?Promise.reject(ls(this)):this.queue(()=>y(this,null,function*(){yield this.assertedPersistence.setPersistence(Mr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return y(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return y(this,null,function*(){let e=yield QB(this),n=new cy(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Wn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return y(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield zB(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return y(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return y(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Mr(e)||this._popupRedirectResolver;ne(n,this,"argument-error"),this.redirectPersistenceManager=yield Bh.create(this,[Mr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return y(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>y(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return y(this,null,function*(){if(e===this.currentUser)return this.queue(()=>y(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return y(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=z0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return y(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return y(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&kB(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Dy(t){return fe(t)}var $h=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=EC(n=>this.observer=n)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Sy={loadJS(){return y(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZB(t){Sy=t}function JB(t){return Sy.loadJS(t)}function XB(){return Sy.gapiScript}function G0(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function Ay(t,e){let n=at(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Xa(s,e??{}))return i;vi(i,"already-initialized")}return n.initialize({options:e})}function e$(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Mr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Ry(t,e,n){let r=Dy(t);ne(r._canInitEmulator,r,"emulator-config-failed"),ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=W0(e),{host:o,port:a}=t$(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||n$()}function W0(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function t$(t){let e=W0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:v0(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:v0(o)}}}function v0(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function n$(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Hh=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pr("not implemented")}_getIdTokenResponse(e){return Pr("not implemented")}_linkToIdToken(e,n){return Pr("not implemented")}_getReauthenticationResolver(e){return Pr("not implemented")}};function ty(t,e){return y(this,null,function*(){return jB(t,"POST","/v1/accounts:signInWithIdp",wy(t,e))})}var qh=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var ly=class extends qh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var tu=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return y(this,null,function*(){let s=yield Uo._fromIdTokenResponse(e,r,i),o=I0(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return y(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=I0(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function I0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var dy=class t extends Wt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function K0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?dy._fromErrorAndOperation(t,s,e,r):s})}function r$(t,e,n=!1){return y(this,null,function*(){let r=yield Xc(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return tu._forOperation(t,"link",r)})}function i$(t,e,n=!1){return y(this,null,function*(){let{auth:r}=t;if(_r(r.app))return Promise.reject(ls(r));let i="reauthenticate";try{let s=yield Xc(t,K0(r,i,e,t),n);ne(s.idToken,r,"internal-error");let o=Ty(s.idToken);ne(o,r,"internal-error");let{sub:a}=o;return ne(t.uid===a,r,"user-mismatch"),tu._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&vi(r,"user-mismatch"),s}})}function s$(t,e,n=!1){return y(this,null,function*(){if(_r(t.app))return Promise.reject(ls(t));let r="signIn",i=yield K0(t,r,e),s=yield tu._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Qh(t,e,n,r){return fe(t).onIdTokenChanged(e,n,r)}function Ny(t,e,n){return fe(t).beforeAuthStateChanged(e,n)}function Yh(t,e,n,r){return fe(t).onAuthStateChanged(e,n,r)}var zh="__sak";var Gh=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zh,"1"),this.storage.removeItem(zh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var o$=1e3,a$=10,c$=(()=>{class t extends Gh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=q0(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);KB()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,a$):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},o$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return y(this,null,function*(){yield Qr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return y(this,null,function*(){let r=yield Qr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return y(this,null,function*(){yield Qr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),Q0=c$;var u$=(()=>{class t extends Gh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),xy=u$;function l$(t){return Promise.all(t.map(e=>y(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var d$=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return y(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(d=>y(this,null,function*(){return d(r.origin,o)})),l=yield l$(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function Y0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var hy=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return y(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=Y0("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){let g=f;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function ir(){return window}function h$(t){ir().location.href=t}function Z0(){return typeof ir().WorkerGlobalScope<"u"&&typeof ir().importScripts=="function"}function f$(){return y(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function p$(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function g$(){return Z0()?self:null}var J0="firebaseLocalStorageDb",m$=1,Wh="firebaseLocalStorage",X0="fbase_key",fs=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Zh(t,e){return t.transaction([Wh],e?"readwrite":"readonly").objectStore(Wh)}function _$(){let t=indexedDB.deleteDatabase(J0);return new fs(t).toPromise()}function fy(){let t=indexedDB.open(J0,m$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Wh,{keyPath:X0})}catch(i){n(i)}}),t.addEventListener("success",()=>y(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Wh)?e(r):(r.close(),yield _$(),e(yield fy()))}))})}function w0(t,e,n){return y(this,null,function*(){let r=Zh(t,!0).put({[X0]:e,value:n});return new fs(r).toPromise()})}function y$(t,e){return y(this,null,function*(){let n=Zh(t,!1).get(e),r=yield new fs(n).toPromise();return r===void 0?null:r.value})}function E0(t,e){let n=Zh(t,!0).delete(e);return new fs(n).toPromise()}var v$=800,I$=3,w$=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return y(this,null,function*(){return this.db?this.db:(this.db=yield fy(),this.db)})}_withRetries(n){return y(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>I$)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return y(this,null,function*(){return Z0()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return y(this,null,function*(){this.receiver=d$._getInstance(g$()),this.receiver._subscribe("keyChanged",(n,r)=>y(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>y(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return y(this,null,function*(){var n,r;if(this.activeServiceWorker=yield f$(),!this.activeServiceWorker)return;this.sender=new hy(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return y(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||p$()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return y(this,null,function*(){try{if(!indexedDB)return!1;let n=yield fy();return yield w0(n,zh,"1"),yield E0(n,zh),!0}catch{}return!1})}_withPendingWrite(n){return y(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(i=>w0(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return y(this,null,function*(){let r=yield this._withRetries(i=>y$(i,n));return this.localCache[n]=r,r})}_remove(n){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(r=>E0(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return y(this,null,function*(){let n=yield this._withRetries(s=>{let o=Zh(s,!1).getAll();return new fs(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>y(this,null,function*(){return this._poll()}),v$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),eR=w$;var gX=G0("rcb"),mX=new hs(3e4,6e4);function E$(t,e){return e?Mr(e):(ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var nu=class extends Hh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ty(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ty(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ty(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function T$(t){return s$(t.auth,new nu(t),t.bypassAuthState)}function C$(t){let{auth:e,user:n}=t;return ne(n,e,"internal-error"),i$(n,new nu(t),t.bypassAuthState)}function b$(t){return y(this,null,function*(){let{auth:e,user:n}=t;return ne(n,e,"internal-error"),r$(n,new nu(t),t.bypassAuthState)})}var py=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>y(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return y(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return T$;case"linkViaPopup":case"linkViaRedirect":return b$;case"reauthViaPopup":case"reauthViaRedirect":return C$;default:vi(this.auth,"internal-error")}}resolve(e){Ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var _X=new hs(2e3,1e4);var D$="pendingRedirect",Fh=new Map,gy=class t extends py{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return y(this,null,function*(){let e=Fh.get(this.auth._key());if(!e){try{let r=(yield S$(this.resolver,this.auth))?yield Qr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Fh.set(this.auth._key(),e)}return this.bypassAuthState||Fh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return y(this,null,function*(){if(e.type==="signInViaRedirect")return Qr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Qr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return y(this,null,function*(){})}cleanUp(){}};function S$(t,e){return y(this,null,function*(){let n=N$(e),r=R$(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function A$(t,e){Fh.set(t._key(),e)}function R$(t){return Mr(t._redirectPersistence)}function N$(t){return Oh(D$,t.config.apiKey,t.name)}function x$(t,e,n=!1){return y(this,null,function*(){if(_r(t.app))return Promise.reject(ls(t));let r=Dy(t),i=E$(r,e),o=yield new gy(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var P$=10*60*1e3,my=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!M$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!tR(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ds(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=P$&&this.cachedEventUids.clear(),this.cachedEventUids.has(T0(e))}saveEventToCache(e){this.cachedEventUids.add(T0(e)),this.lastProcessedEventTime=Date.now()}};function T0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tR({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function M$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tR(t);default:return!1}}function k$(n){return y(this,arguments,function*(t,e={}){return jo(t,"GET","/v1/projects",e)})}var O$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,F$=/^https?/;function L$(t){return y(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield k$(t);for(let n of e)try{if(V$(n))return}catch{}vi(t,"unauthorized-domain")})}function V$(t){let e=ry(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!F$.test(n))return!1;if(O$.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var U$=new hs(3e4,6e4);function C0(){let t=ir().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function j$(t){return new Promise((e,n)=>{var r,i,s;function o(){C0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{C0(),n(ds(t,"network-request-failed"))},timeout:U$.get()})}if(!((i=(r=ir().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ir().gapi)===null||s===void 0)&&s.load)o();else{let a=G0("iframefcb");return ir()[a]=()=>{gapi.load?o():n(ds(t,"network-request-failed"))},JB(`${XB()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Lh=null,e})}var Lh=null;function B$(t){return Lh=Lh||j$(t),Lh}var $$=new hs(5e3,15e3),H$="__/auth/iframe",q$="emulator/auth/iframe",z$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},G$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function W$(t){let e=t.config;ne(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Iy(e,q$):`https://${t.config.authDomain}/${H$}`,r={apiKey:e.apiKey,appName:t.name,v:Kt},i=G$.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ui(r).slice(1)}`}function K$(t){return y(this,null,function*(){let e=yield B$(t),n=ir().gapi;return ne(n,t,"internal-error"),e.open({where:document.body,url:W$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:z$,dontclear:!0},r=>new Promise((i,s)=>y(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=ds(t,"network-request-failed"),a=ir().setTimeout(()=>{s(o)},$$.get());function c(){ir().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var Q$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Y$=500,Z$=600,J$="_blank",X$="http://localhost",Kh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function eH(t,e,n,r=Y$,i=Z$){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},Q$),{width:r.toString(),height:i.toString(),top:s,left:o}),l=At().toLowerCase();n&&(a=U0(l)?J$:n),L0(l)&&(e=e||X$,c.scrollbars="yes");let d=Object.entries(c).reduce((g,[_,E])=>`${g}${_}=${E},`,"");if(WB(l)&&a!=="_self")return tH(e||"",a),new Kh(null);let f=window.open(e||"",a,d);ne(f,t,"popup-blocked");try{f.focus()}catch{}return new Kh(f)}function tH(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var nH="__/auth/handler",rH="emulator/auth/handler",iH=encodeURIComponent("fac");function b0(t,e,n,r,i,s){return y(this,null,function*(){ne(t.config.authDomain,t,"auth-domain-config-required"),ne(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Kt,eventId:i};if(e instanceof qh){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Za(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(s||{}))o[d]=f}if(e instanceof ly){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield t._getAppCheckToken(),l=c?`#${iH}=${encodeURIComponent(c)}`:"";return`${sH(t)}?${Ui(a).slice(1)}${l}`})}function sH({config:t}){return t.emulator?Iy(t,rH):`https://${t.authDomain}/${nH}`}var ny="webStorageSupport",_y=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xy,this._completeRedirectFn=x$,this._overrideRedirectResult=A$}_openPopup(e,n,r,i){return y(this,null,function*(){var s;Ii((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield b0(e,n,r,ry(),i);return eH(e,o,Y0())})}_openRedirect(e,n,r,i){return y(this,null,function*(){yield this._originValidation(e);let s=yield b0(e,n,r,ry(),i);return h$(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ii(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return y(this,null,function*(){let n=yield K$(e),r=new my(e);return n.register("authEvent",i=>(ne(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ny,{type:ny},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[ny];o!==void 0&&n(!!o),vi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=L$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return q0()||V0()||by()}},nR=_y;var D0="@firebase/auth",S0="1.7.9";var yy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return y(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function oH(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aH(t){tt(new et("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ne(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:z0(t)},l=new uy(r,i,s,c);return e$(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),tt(new et("auth-internal",e=>{let n=Dy(e.getProvider("auth").getImmediate());return(r=>new yy(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),q(D0,S0,oH(t)),q(D0,S0,"esm2017")}var cH=5*60,uH=Kp("authIdTokenMaxAge")||cH,A0=null,lH=t=>e=>y(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>uH)return;let i=n?.token;A0!==i&&(A0=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Py(t=ct()){let e=at(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Ay(t,{popupRedirectResolver:nR,persistence:[eR,Q0,xy]}),r=Kp("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=lH(s.toString());Ny(n,o,()=>o(n.currentUser)),Qh(n,a=>o(a))}}let i=gC("auth");return i&&Ry(n,`http://${i}`),n}function dH(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ZB({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=ds("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",dH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aH("Browser");function iR(t){return new ae(function(e){var n=Yh(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var sR="auth",ps=class{constructor(e){return e}},Un=class{constructor(){return ot(sR)}};var My=new U("angularfire2.auth-instances");function rq(t,e){let n=dt(sR,t,e);return n&&new ps(n)}function iq(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ps(r)}}var sq={provide:Un,deps:[[new te,My]]},oq={provide:ps,useFactory:rq,deps:[[new te,My],Be]};function oR(t,...e){return q("angularfire",je.full,"auth"),Oe([oq,sq,{provide:My,useFactory:iq(t),multi:!0,deps:[Z,me,Je,ze,[new te,Jt],...e]}])}var aR=we(iR,!0);var cR=we(Py,!0);var Jh="analytics",cq="firebase_id",uq="origin",lq=60*1e3,dq="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",jy="https://www.googletagmanager.com/gtag/js";var zt=new Qn("@firebase/analytics");var hq={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},fn=new Wn("analytics","Analytics",hq);function fq(t){if(!t.startsWith(jy)){let e=fn.create("invalid-gtag-resource",{gtagURL:t});return zt.warn(e.message),""}return t}function gR(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function pq(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function gq(t,e){let n=pq("firebase-js-sdk-policy",{createScriptURL:fq}),r=document.createElement("script"),i=`${jy}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function mq(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function _q(t,e,n,r,i,s){return y(this,null,function*(){let o=r[i];try{if(o)yield e[o];else{let c=(yield gR(n)).find(l=>l.measurementId===i);c&&(yield e[c.appId])}}catch(a){zt.error(a)}t("config",i,s)})}function yq(t,e,n,r,i){return y(this,null,function*(){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);let a=yield gR(n);for(let c of o){let l=a.find(f=>f.measurementId===c),d=l&&e[l.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),yield Promise.all(s),t("event",r,i||{})}catch(s){zt.error(s)}})}function vq(t,e,n,r){function i(s,...o){return y(this,null,function*(){try{if(s==="event"){let[a,c]=o;yield yq(t,e,n,a,c)}else if(s==="config"){let[a,c]=o;yield _q(t,e,n,r,a,c)}else if(s==="consent"){let[a,c]=o;t("consent",a,c)}else if(s==="get"){let[a,c,l]=o;t("get",a,c,l)}else if(s==="set"){let[a]=o;t("set",a)}else t(s,...o)}catch(a){zt.error(a)}})}return i}function Iq(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=vq(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function wq(t){let e=window.document.getElementsByTagName("script");for(let n of Object.values(e))if(n.src&&n.src.includes(jy)&&n.src.includes(t))return n;return null}var Eq=30,Tq=1e3,Oy=class{constructor(e={},n=Tq){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},mR=new Oy;function Cq(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function bq(t){return y(this,null,function*(){var e;let{appId:n,apiKey:r}=t,i={method:"GET",headers:Cq(r)},s=dq.replace("{app-id}",n),o=yield fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{let c=yield o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw fn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})}function Dq(r){return y(this,arguments,function*(t,e=mR,n){let{appId:i,apiKey:s,measurementId:o}=t.options;if(!i)throw fn.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw fn.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new Fy;return setTimeout(()=>y(this,null,function*(){c.abort()}),n!==void 0?n:lq),_R({appId:i,apiKey:s,measurementId:o},a,c,e)})}function _R(s,o,a){return y(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=mR){var c;let{appId:l,measurementId:d}=t;try{yield Sq(r,e)}catch(f){if(d)return zt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:l,measurementId:d};throw f}try{let f=yield bq(t);return i.deleteThrottleMetadata(l),f}catch(f){let g=f;if(!Aq(g)){if(i.deleteThrottleMetadata(l),d)return zt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:l,measurementId:d};throw f}let _=Number((c=g?.customData)===null||c===void 0?void 0:c.httpStatus)===503?tc(n,i.intervalMillis,Eq):tc(n,i.intervalMillis),E={throttleEndTimeMillis:Date.now()+_,backoffCount:n+1};return i.setThrottleMetadata(l,E),zt.debug(`Calling attemptFetch again in ${_} millis`),_R(t,E,r,i)}})}function Sq(t,e){return new Promise((n,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(fn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Aq(t){if(!(t instanceof Wt)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var Fy=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var Ly;function Rq(t,e,n,r,i){return y(this,null,function*(){if(i&&i.global){t("event",n,r);return}else{let s=yield e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}})}function Nq(t,e,n,r){return y(this,null,function*(){if(r&&r.global)return t("set",{user_id:n}),Promise.resolve();{let i=yield e;t("config",i,{update:!0,user_id:n})}})}var Vy;function xq(t){Vy=t}function Pq(t){Ly=t}function Mq(){return y(this,null,function*(){if(mr())try{yield Li()}catch(t){return zt.warn(fn.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return zt.warn(fn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function kq(t,e,n,r,i,s,o){return y(this,null,function*(){var a;let c=Dq(t);c.then(_=>{n[_.measurementId]=_.appId,t.options.measurementId&&_.measurementId!==t.options.measurementId&&zt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>zt.error(_)),e.push(c);let l=Mq().then(_=>{if(_)return r.getId()}),[d,f]=yield Promise.all([c,l]);wq(s)||gq(s,d.measurementId),Vy&&(i("consent","default",Vy),xq(void 0)),i("js",new Date);let g=(a=o?.config)!==null&&a!==void 0?a:{};return g[uq]="firebase",g.update=!0,f!=null&&(g[cq]=f),i("config",d.measurementId,g),Ly&&(i("set",Ly),Pq(void 0)),d.measurementId})}var Uy=class{constructor(e){this.app=e}_delete(){return delete Bo[this.app.options.appId],Promise.resolve()}},Bo={},uR=[],lR={},ky="dataLayer",Oq="gtag",dR,By,hR=!1;function Fq(){let t=[];if(Qa()&&t.push("This is a browser extension environment."),Ya()||t.push("Cookies are not available."),t.length>0){let e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=fn.create("invalid-analytics-context",{errorInfo:e});zt.warn(n.message)}}function Lq(t,e,n){Fq();let r=t.options.appId;if(!r)throw fn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)zt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw fn.create("no-api-key");if(Bo[r]!=null)throw fn.create("already-exists",{id:r});if(!hR){mq(ky);let{wrappedGtag:s,gtagCore:o}=Iq(Bo,uR,lR,ky,Oq);By=s,dR=o,hR=!0}return Bo[r]=kq(t,uR,lR,e,dR,ky,n),new Uy(t)}function yR(t=ct()){t=fe(t);let e=at(t,Jh);return e.isInitialized()?e.getImmediate():vR(t)}function vR(t,e={}){let n=at(t,Jh);if(n.isInitialized()){let i=n.getImmediate();if(Xa(e,n.getOptions()))return i;throw fn.create("already-initialized")}return n.initialize({options:e})}function IR(){return y(this,null,function*(){if(Qa()||!Ya()||!mr())return!1;try{return yield Li()}catch{return!1}})}function wR(t,e,n){t=fe(t),Nq(By,Bo[t.app.options.appId],e,n).catch(r=>zt.error(r))}function $y(t,e,n,r){t=fe(t),Rq(By,Bo[t.app.options.appId],e,n,r).catch(i=>zt.error(i))}var fR="@firebase/analytics",pR="0.10.8";function Vq(){tt(new et(Jh,(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return Lq(r,i,n)},"PUBLIC")),tt(new et("analytics-internal",t,"PRIVATE")),q(fR,pR),q(fR,pR,"esm2017");function t(e){try{let n=e.getProvider(Jh).getImmediate();return{logEvent:(r,i,s)=>$y(n,r,i,s)}}catch(n){throw fn.create("interop-component-reg-failed",{reason:n})}}}Vq();var gs=class{constructor(e){return e}},CR="analytics",qy=class{constructor(){return ot(CR)}};var zy="__angularfire_symbol__analyticsIsSupportedValue",bR="__angularfire_symbol__analyticsIsSupported";globalThis[bR]||=IR().then(t=>globalThis[zy]=t).catch(()=>globalThis[zy]=!1);var Xh={async:()=>globalThis[bR],sync:()=>{let t=globalThis[zy];if(t===void 0)throw new Error(Vo("Analytics"));return t}},DR=Xh.async,SR=we(yR,!0);var Uq=we($y,!0);var jq=we(wR,!0);var Wy=(()=>{class t{initialized;disposables=[];constructor(n,r,i){q("angularfire",je.full,"user-tracking");let s;this.initialized=r.runOutsideAngular(()=>new Promise(o=>{s=o})),DR().then(()=>{let o=i.get(gs);o?this.disposables=[aR(n).subscribe(a=>{jq(o,a?.uid),s()})]:s()})}ngOnDestroy(){this.disposables.forEach(n=>n.unsubscribe())}static \u0275fac=function(r){return new(r||t)(J(ps),J(Z),J(me))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),Bq="firebase_event_origin",$q="firebase_previous_class",Hq="firebase_previous_id",qq="firebase_previous_screen",zq="firebase_screen_class",ER="firebase_screen_id",Gq="firebase_screen",Gy="outlet",Wq="page_path",Kq="page_title",ru="screen_class",TR="screen_name",Qq="screen_view",Yq="auto",Zq="#",Jq=Math.floor(Math.random()*(2**32-1))-2**31,Hy={},Xq=t=>{let e=[t[ru],t[Gy]].join(Zq);if(Hy.hasOwnProperty(e))return Hy[e];{let n=Jq++;return Hy[e]=n,n}},ez=(t,e,n)=>t.events.pipe(jt(i=>i instanceof $c)).pipe(Yt(i=>{let o=t.parseUrl(t.url.replace(/(?:\().+(?:\))/g,g=>g.replace("://",":///"))).root.children[i.snapshot.outlet]?.toString()||"",a=t.routerState.root.children.map(g=>g).find(g=>g.outlet===i.snapshot.outlet);if(!a)return K(null);let c=a;for(;c.firstChild;)c=c.firstChild;let l=c.pathFromRoot.map(g=>g.routeConfig?.path).filter(g=>g).join("/")||"/",d={[TR]:l,[Wq]:`/${o}`,[Bq]:Yq,[Gq]:l,[Gy]:i.snapshot.outlet};e&&(d[Kq]=e.getTitle());let f=a.component;if(f){if(f===K_){let g=i.snapshot;for(;g.firstChild;)g=g.firstChild;f=g.component}}else f=i.snapshot.component;if(typeof f=="string")return K(Ae(V({},d),{[ru]:f}));if(f){let g=n.resolveComponentFactory(f);return K(Ae(V({},d),{[ru]:g.selector}))}return K(null)}),jt(i=>!!i),Q(i=>V({[zq]:i[ru],[ER]:Xq(i)},i)),gg(i=>i[Gy]),rt(i=>i.pipe(Ql((s,o)=>JSON.stringify(s)===JSON.stringify(o)),so(void 0),Zl(),Q(([s,o])=>s?V({[$q]:s[ru],[qq]:s[TR],[Hq]:s[ER]},o):o)))),AR=(()=>{class t{disposable;constructor(n,r,i,s,o,a){q("angularfire",je.full,"screen-tracking"),DR().then(()=>{let c=a.get(gs);!n||!c||s.runOutsideAngular(()=>{this.disposable=ez(n,r,i).pipe(Yt(l=>y(this,null,function*(){return o&&(yield o.initialized),Uq(c,Qq,l)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(r){return new(r||t)(J(Nh,8),J(fh,8),J(oi),J(Z),J(Wy,8),J(me))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),Ky=new U("angularfire2.analytics-instances");function tz(t,e){if(!Xh.sync())return null;let n=dt(CR,t,e);return n&&new gs(n)}function nz(t){return(e,n)=>{if(!Xh.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new gs(r)}}var rz={provide:qy,deps:[[new te,Ky]]},iz={provide:gs,useFactory:tz,deps:[[new te,Ky],Be]};function RR(t,...e){return q("angularfire",je.full,"analytics"),Oe([iz,rz,{provide:gi,useValue:Xh.async,multi:!0},{provide:Ky,useFactory:nz(t),multi:!0,deps:[Z,me,Je,ze,...e]}])}var NR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xR={};var wi,Qy;(function(){var t;function e(T,v){function I(){}I.prototype=v.prototype,T.D=v.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(C,b,S){for(var w=Array(arguments.length-2),fr=2;fr<arguments.length;fr++)w[fr-2]=arguments[fr];return v.prototype[b].apply(C,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,I){I||(I=0);var C=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)C[b]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(b=0;16>b;++b)C[b]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=T.g[0],I=T.g[1],b=T.g[2];var S=T.g[3],w=v+(S^I&(b^S))+C[0]+3614090360&4294967295;v=I+(w<<7&4294967295|w>>>25),w=S+(b^v&(I^b))+C[1]+3905402710&4294967295,S=v+(w<<12&4294967295|w>>>20),w=b+(I^S&(v^I))+C[2]+606105819&4294967295,b=S+(w<<17&4294967295|w>>>15),w=I+(v^b&(S^v))+C[3]+3250441966&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(S^I&(b^S))+C[4]+4118548399&4294967295,v=I+(w<<7&4294967295|w>>>25),w=S+(b^v&(I^b))+C[5]+1200080426&4294967295,S=v+(w<<12&4294967295|w>>>20),w=b+(I^S&(v^I))+C[6]+2821735955&4294967295,b=S+(w<<17&4294967295|w>>>15),w=I+(v^b&(S^v))+C[7]+4249261313&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(S^I&(b^S))+C[8]+1770035416&4294967295,v=I+(w<<7&4294967295|w>>>25),w=S+(b^v&(I^b))+C[9]+2336552879&4294967295,S=v+(w<<12&4294967295|w>>>20),w=b+(I^S&(v^I))+C[10]+4294925233&4294967295,b=S+(w<<17&4294967295|w>>>15),w=I+(v^b&(S^v))+C[11]+2304563134&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(S^I&(b^S))+C[12]+1804603682&4294967295,v=I+(w<<7&4294967295|w>>>25),w=S+(b^v&(I^b))+C[13]+4254626195&4294967295,S=v+(w<<12&4294967295|w>>>20),w=b+(I^S&(v^I))+C[14]+2792965006&4294967295,b=S+(w<<17&4294967295|w>>>15),w=I+(v^b&(S^v))+C[15]+1236535329&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(b^S&(I^b))+C[1]+4129170786&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^b&(v^I))+C[6]+3225465664&4294967295,S=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(S^v))+C[11]+643717713&4294967295,b=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(b^S))+C[0]+3921069994&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^S&(I^b))+C[5]+3593408605&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^b&(v^I))+C[10]+38016083&4294967295,S=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(S^v))+C[15]+3634488961&4294967295,b=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(b^S))+C[4]+3889429448&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^S&(I^b))+C[9]+568446438&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^b&(v^I))+C[14]+3275163606&4294967295,S=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(S^v))+C[3]+4107603335&4294967295,b=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(b^S))+C[8]+1163531501&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^S&(I^b))+C[13]+2850285829&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^b&(v^I))+C[2]+4243563512&4294967295,S=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(S^v))+C[7]+1735328473&4294967295,b=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(b^S))+C[12]+2368359562&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(I^b^S)+C[5]+4294588738&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^b)+C[8]+2272392833&4294967295,S=v+(w<<11&4294967295|w>>>21),w=b+(S^v^I)+C[11]+1839030562&4294967295,b=S+(w<<16&4294967295|w>>>16),w=I+(b^S^v)+C[14]+4259657740&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^S)+C[1]+2763975236&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^b)+C[4]+1272893353&4294967295,S=v+(w<<11&4294967295|w>>>21),w=b+(S^v^I)+C[7]+4139469664&4294967295,b=S+(w<<16&4294967295|w>>>16),w=I+(b^S^v)+C[10]+3200236656&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^S)+C[13]+681279174&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^b)+C[0]+3936430074&4294967295,S=v+(w<<11&4294967295|w>>>21),w=b+(S^v^I)+C[3]+3572445317&4294967295,b=S+(w<<16&4294967295|w>>>16),w=I+(b^S^v)+C[6]+76029189&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^S)+C[9]+3654602809&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^b)+C[12]+3873151461&4294967295,S=v+(w<<11&4294967295|w>>>21),w=b+(S^v^I)+C[15]+530742520&4294967295,b=S+(w<<16&4294967295|w>>>16),w=I+(b^S^v)+C[2]+3299628645&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(b^(I|~S))+C[0]+4096336452&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~b))+C[7]+1126891415&4294967295,S=v+(w<<10&4294967295|w>>>22),w=b+(v^(S|~I))+C[14]+2878612391&4294967295,b=S+(w<<15&4294967295|w>>>17),w=I+(S^(b|~v))+C[5]+4237533241&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~S))+C[12]+1700485571&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~b))+C[3]+2399980690&4294967295,S=v+(w<<10&4294967295|w>>>22),w=b+(v^(S|~I))+C[10]+4293915773&4294967295,b=S+(w<<15&4294967295|w>>>17),w=I+(S^(b|~v))+C[1]+2240044497&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~S))+C[8]+1873313359&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~b))+C[15]+4264355552&4294967295,S=v+(w<<10&4294967295|w>>>22),w=b+(v^(S|~I))+C[6]+2734768916&4294967295,b=S+(w<<15&4294967295|w>>>17),w=I+(S^(b|~v))+C[13]+1309151649&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~S))+C[4]+4149444226&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~b))+C[11]+3174756917&4294967295,S=v+(w<<10&4294967295|w>>>22),w=b+(v^(S|~I))+C[2]+718787259&4294967295,b=S+(w<<15&4294967295|w>>>17),w=I+(S^(b|~v))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(b+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+S&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var I=v-this.blockSize,C=this.B,b=this.h,S=0;S<v;){if(b==0)for(;S<=I;)i(this,T,S),S+=this.blockSize;if(typeof T=="string"){for(;S<v;)if(C[b++]=T.charCodeAt(S++),b==this.blockSize){i(this,C),b=0;break}}else for(;S<v;)if(C[b++]=T[S++],b==this.blockSize){i(this,C),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var I=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=I&255,I/=256;for(this.u(T),T=Array(16),v=I=0;4>v;++v)for(var C=0;32>C;C+=8)T[I++]=this.g[v]>>>C&255;return T};function s(T,v){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=v(T)}function o(T,v){this.h=v;for(var I=[],C=!0,b=T.length-1;0<=b;b--){var S=T[b]|0;C&&S==v||(I[b]=S,C=!1)}this.g=I}var a={};function c(T){return-128<=T&&128>T?s(T,function(v){return new o([v|0],0>v?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return A(l(-T));for(var v=[],I=1,C=0;T>=I;C++)v[C]=T/I|0,I*=4294967296;return new o(v,0)}function d(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return A(d(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),C=f,b=0;b<T.length;b+=8){var S=Math.min(8,T.length-b),w=parseInt(T.substring(b,b+S),v);8>S?(S=l(Math.pow(v,S)),C=C.j(S).add(l(w))):(C=C.j(I),C=C.add(l(w)))}return C}var f=c(0),g=c(1),_=c(16777216);t=o.prototype,t.m=function(){if(R(this))return-A(this).m();for(var T=0,v=1,I=0;I<this.g.length;I++){var C=this.i(I);T+=(0<=C?C:4294967296+C)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(E(this))return"0";if(R(this))return"-"+A(this).toString(T);for(var v=l(Math.pow(T,6)),I=this,C="";;){var b=G(I,v).g;I=M(I,b.j(v));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=b,E(I))return S+C;for(;6>S.length;)S="0"+S;C=S+C}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function E(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function R(T){return T.h==-1}t.l=function(T){return T=M(this,T),R(T)?-1:E(T)?0:1};function A(T){for(var v=T.g.length,I=[],C=0;C<v;C++)I[C]=~T.g[C];return new o(I,~T.h).add(g)}t.abs=function(){return R(this)?A(this):this},t.add=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],C=0,b=0;b<=v;b++){var S=C+(this.i(b)&65535)+(T.i(b)&65535),w=(S>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);C=w>>>16,S&=65535,w&=65535,I[b]=w<<16|S}return new o(I,I[I.length-1]&-2147483648?-1:0)};function M(T,v){return T.add(A(v))}t.j=function(T){if(E(this)||E(T))return f;if(R(this))return R(T)?A(this).j(A(T)):A(A(this).j(T));if(R(T))return A(this.j(A(T)));if(0>this.l(_)&&0>T.l(_))return l(this.m()*T.m());for(var v=this.g.length+T.g.length,I=[],C=0;C<2*v;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(var b=0;b<T.g.length;b++){var S=this.i(C)>>>16,w=this.i(C)&65535,fr=T.i(b)>>>16,Ra=T.i(b)&65535;I[2*C+2*b]+=w*Ra,L(I,2*C+2*b),I[2*C+2*b+1]+=S*Ra,L(I,2*C+2*b+1),I[2*C+2*b+1]+=w*fr,L(I,2*C+2*b+1),I[2*C+2*b+2]+=S*fr,L(I,2*C+2*b+2)}for(C=0;C<v;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=v;C<2*v;C++)I[C]=0;return new o(I,0)};function L(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function $(T,v){this.g=T,this.h=v}function G(T,v){if(E(v))throw Error("division by zero");if(E(T))return new $(f,f);if(R(T))return v=G(A(T),v),new $(A(v.g),A(v.h));if(R(v))return v=G(T,A(v)),new $(A(v.g),v.h);if(30<T.g.length){if(R(T)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,C=v;0>=C.l(T);)I=Ne(I),C=Ne(C);var b=Y(I,1),S=Y(C,1);for(C=Y(C,2),I=Y(I,2);!E(C);){var w=S.add(C);0>=w.l(T)&&(b=b.add(I),S=w),C=Y(C,1),I=Y(I,1)}return v=M(T,b.j(v)),new $(b,v)}for(b=f;0<=T.l(v);){for(I=Math.max(1,Math.floor(T.m()/v.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),S=l(I),w=S.j(v);R(w)||0<w.l(T);)I-=C,S=l(I),w=S.j(v);E(S)&&(S=g),b=b.add(S),T=M(T,w)}return new $(b,T)}t.A=function(T){return G(this,T).h},t.and=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],C=0;C<v;C++)I[C]=this.i(C)&T.i(C);return new o(I,this.h&T.h)},t.or=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],C=0;C<v;C++)I[C]=this.i(C)|T.i(C);return new o(I,this.h|T.h)},t.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],C=0;C<v;C++)I[C]=this.i(C)^T.i(C);return new o(I,this.h^T.h)};function Ne(T){for(var v=T.g.length+1,I=[],C=0;C<v;C++)I[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(I,T.h)}function Y(T,v){var I=v>>5;v%=32;for(var C=T.g.length-I,b=[],S=0;S<C;S++)b[S]=0<v?T.i(S+I)>>>v|T.i(S+I+1)<<32-v:T.i(S+I);return new o(b,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Qy=xR.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,wi=xR.Integer=o}).apply(typeof NR<"u"?NR:typeof self<"u"?self:typeof window<"u"?window:{});var ef=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kr={};var Yy,sz,$o,Zy,iu,tf,Jy,Xy,ev;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ef=="object"&&ef];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var m=0;m<u.length-1;m++){var D=u[m];if(!(D in p))break e;p=p[D]}u=u[u.length-1],m=p[u],h=h(m),h!=m&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function s(u,h){u instanceof String&&(u+="");var p=0,m=!1,D={next:function(){if(!m&&p<u.length){var N=p++;return{value:h(N,u[N]),done:!1}}return m=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(u){return u||function(){return s(this,function(h,p){return p})}});var o=o||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,m),u.apply(h,D)}}return function(){return u.apply(h,arguments)}}function g(u,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function _(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),u.apply(this,m)}}function E(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(m,D,N){for(var O=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)O[xe-2]=arguments[xe];return h.prototype[D].apply(m,O)}}function R(u){let h=u.length;if(0<h){let p=Array(h);for(let m=0;m<h;m++)p[m]=u[m];return p}return[]}function A(u,h){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(c(m)){let D=u.length||0,N=m.length||0;u.length=D+N;for(let O=0;O<N;O++)u[D+O]=m[O]}else u.push(m)}}class M{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function L(u){return/^[\s\xa0]*$/.test(u)}function $(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function G(u){return G[" "](u),u}G[" "]=function(){};var Ne=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function Y(u,h,p){for(let m in u)h.call(p,u[m],m,u)}function T(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function v(u){let h={};for(let p in u)h[p]=u[p];return h}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,h){let p,m;for(let D=1;D<arguments.length;D++){m=arguments[D];for(p in m)u[p]=m[p];for(let N=0;N<I.length;N++)p=I[N],Object.prototype.hasOwnProperty.call(m,p)&&(u[p]=m[p])}}function b(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function S(u){a.setTimeout(()=>{throw u},0)}function w(){var u=Tp;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class fr{constructor(){this.h=this.g=null}add(h,p){let m=Ra.get();m.set(h,p),this.h?this.h.next=m:this.g=m,this.h=m}}var Ra=new M(()=>new tO,u=>u.reset());class tO{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Na,xa=!1,Tp=new fr,lT=()=>{let u=a.Promise.resolve(void 0);Na=()=>{u.then(nO)}};var nO=()=>{for(var u;u=w();){try{u.h.call(u.g)}catch(p){S(p)}var h=Ra;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}xa=!1};function zr(){this.s=this.s,this.C=this.C}zr.prototype.s=!1,zr.prototype.ma=function(){this.s||(this.s=!0,this.N())},zr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ct(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}Ct.prototype.h=function(){this.defaultPrevented=!0};var rO=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function Pa(u,h){if(Ct.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,m=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(Ne){e:{try{G(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:iO[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Pa.aa.h.call(this)}}E(Pa,Ct);var iO={2:"touch",3:"pen",4:"mouse"};Pa.prototype.h=function(){Pa.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ma="closure_listenable_"+(1e6*Math.random()|0),sO=0;function oO(u,h,p,m,D){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!m,this.ha=D,this.key=++sO,this.da=this.fa=!1}function tl(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function nl(u){this.src=u,this.g={},this.h=0}nl.prototype.add=function(u,h,p,m,D){var N=u.toString();u=this.g[N],u||(u=this.g[N]=[],this.h++);var O=bp(u,h,m,D);return-1<O?(h=u[O],p||(h.fa=!1)):(h=new oO(h,this.src,N,!!m,D),h.fa=p,u.push(h)),h};function Cp(u,h){var p=h.type;if(p in u.g){var m=u.g[p],D=Array.prototype.indexOf.call(m,h,void 0),N;(N=0<=D)&&Array.prototype.splice.call(m,D,1),N&&(tl(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function bp(u,h,p,m){for(var D=0;D<u.length;++D){var N=u[D];if(!N.da&&N.listener==h&&N.capture==!!p&&N.ha==m)return D}return-1}var Dp="closure_lm_"+(1e6*Math.random()|0),Sp={};function dT(u,h,p,m,D){if(m&&m.once)return fT(u,h,p,m,D);if(Array.isArray(h)){for(var N=0;N<h.length;N++)dT(u,h[N],p,m,D);return null}return p=xp(p),u&&u[Ma]?u.K(h,p,l(m)?!!m.capture:!!m,D):hT(u,h,p,!1,m,D)}function hT(u,h,p,m,D,N){if(!h)throw Error("Invalid event type");var O=l(D)?!!D.capture:!!D,xe=Rp(u);if(xe||(u[Dp]=xe=new nl(u)),p=xe.add(h,p,m,O,N),p.proxy)return p;if(m=aO(),p.proxy=m,m.src=u,m.listener=p,u.addEventListener)rO||(D=O),D===void 0&&(D=!1),u.addEventListener(h.toString(),m,D);else if(u.attachEvent)u.attachEvent(gT(h.toString()),m);else if(u.addListener&&u.removeListener)u.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function aO(){function u(p){return h.call(u.src,u.listener,p)}let h=cO;return u}function fT(u,h,p,m,D){if(Array.isArray(h)){for(var N=0;N<h.length;N++)fT(u,h[N],p,m,D);return null}return p=xp(p),u&&u[Ma]?u.L(h,p,l(m)?!!m.capture:!!m,D):hT(u,h,p,!0,m,D)}function pT(u,h,p,m,D){if(Array.isArray(h))for(var N=0;N<h.length;N++)pT(u,h[N],p,m,D);else m=l(m)?!!m.capture:!!m,p=xp(p),u&&u[Ma]?(u=u.i,h=String(h).toString(),h in u.g&&(N=u.g[h],p=bp(N,p,m,D),-1<p&&(tl(N[p]),Array.prototype.splice.call(N,p,1),N.length==0&&(delete u.g[h],u.h--)))):u&&(u=Rp(u))&&(h=u.g[h.toString()],u=-1,h&&(u=bp(h,p,m,D)),(p=-1<u?h[u]:null)&&Ap(p))}function Ap(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[Ma])Cp(h.i,u);else{var p=u.type,m=u.proxy;h.removeEventListener?h.removeEventListener(p,m,u.capture):h.detachEvent?h.detachEvent(gT(p),m):h.addListener&&h.removeListener&&h.removeListener(m),(p=Rp(h))?(Cp(p,u),p.h==0&&(p.src=null,h[Dp]=null)):tl(u)}}}function gT(u){return u in Sp?Sp[u]:Sp[u]="on"+u}function cO(u,h){if(u.da)u=!0;else{h=new Pa(h,this);var p=u.listener,m=u.ha||u.src;u.fa&&Ap(u),u=p.call(m,h)}return u}function Rp(u){return u=u[Dp],u instanceof nl?u:null}var Np="__closure_events_fn_"+(1e9*Math.random()>>>0);function xp(u){return typeof u=="function"?u:(u[Np]||(u[Np]=function(h){return u.handleEvent(h)}),u[Np])}function bt(){zr.call(this),this.i=new nl(this),this.M=this,this.F=null}E(bt,zr),bt.prototype[Ma]=!0,bt.prototype.removeEventListener=function(u,h,p,m){pT(this,u,h,p,m)};function Lt(u,h){var p,m=u.F;if(m)for(p=[];m;m=m.F)p.push(m);if(u=u.M,m=h.type||h,typeof h=="string")h=new Ct(h,u);else if(h instanceof Ct)h.target=h.target||u;else{var D=h;h=new Ct(m,u),C(h,D)}if(D=!0,p)for(var N=p.length-1;0<=N;N--){var O=h.g=p[N];D=rl(O,m,!0,h)&&D}if(O=h.g=u,D=rl(O,m,!0,h)&&D,D=rl(O,m,!1,h)&&D,p)for(N=0;N<p.length;N++)O=h.g=p[N],D=rl(O,m,!1,h)&&D}bt.prototype.N=function(){if(bt.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],m=0;m<p.length;m++)tl(p[m]);delete u.g[h],u.h--}}this.F=null},bt.prototype.K=function(u,h,p,m){return this.i.add(String(u),h,!1,p,m)},bt.prototype.L=function(u,h,p,m){return this.i.add(String(u),h,!0,p,m)};function rl(u,h,p,m){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,N=0;N<h.length;++N){var O=h[N];if(O&&!O.da&&O.capture==p){var xe=O.listener,wt=O.ha||O.src;O.fa&&Cp(u.i,O),D=xe.call(wt,m)!==!1&&D}}return D&&!m.defaultPrevented}function mT(u,h,p){if(typeof u=="function")p&&(u=g(u,p));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function _T(u){u.g=mT(()=>{u.g=null,u.i&&(u.i=!1,_T(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class uO extends zr{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:_T(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ka(u){zr.call(this),this.h=u,this.g={}}E(ka,zr);var yT=[];function vT(u){Y(u.g,function(h,p){this.g.hasOwnProperty(p)&&Ap(h)},u),u.g={}}ka.prototype.N=function(){ka.aa.N.call(this),vT(this)},ka.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pp=a.JSON.stringify,lO=a.JSON.parse,dO=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Mp(){}Mp.prototype.h=null;function IT(u){return u.h||(u.h=u.i())}function wT(){}var Oa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kp(){Ct.call(this,"d")}E(kp,Ct);function Op(){Ct.call(this,"c")}E(Op,Ct);var Mi={},ET=null;function il(){return ET=ET||new bt}Mi.La="serverreachability";function TT(u){Ct.call(this,Mi.La,u)}E(TT,Ct);function Fa(u){let h=il();Lt(h,new TT(h))}Mi.STAT_EVENT="statevent";function CT(u,h){Ct.call(this,Mi.STAT_EVENT,u),this.stat=h}E(CT,Ct);function Vt(u){let h=il();Lt(h,new CT(h,u))}Mi.Ma="timingevent";function bT(u,h){Ct.call(this,Mi.Ma,u),this.size=h}E(bT,Ct);function La(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function Va(){this.g=!0}Va.prototype.xa=function(){this.g=!1};function hO(u,h,p,m,D,N){u.info(function(){if(u.g)if(N)for(var O="",xe=N.split("&"),wt=0;wt<xe.length;wt++){var Ee=xe[wt].split("=");if(1<Ee.length){var Dt=Ee[0];Ee=Ee[1];var St=Dt.split("_");O=2<=St.length&&St[1]=="type"?O+(Dt+"="+Ee+"&"):O+(Dt+"=redacted&")}}else O=null;else O=N;return"XMLHTTP REQ ("+m+") [attempt "+D+"]: "+h+`
`+p+`
`+O})}function fO(u,h,p,m,D,N,O){u.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+D+"]: "+h+`
`+p+`
`+N+" "+O})}function Vs(u,h,p,m){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+gO(u,p)+(m?" "+m:"")})}function pO(u,h){u.info(function(){return"TIMEOUT: "+h})}Va.prototype.info=function(){};function gO(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var m=p[u];if(!(2>m.length)){var D=m[1];if(Array.isArray(D)&&!(1>D.length)){var N=D[0];if(N!="noop"&&N!="stop"&&N!="close")for(var O=1;O<D.length;O++)D[O]=""}}}}return Pp(p)}catch{return h}}var sl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},DT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fp;function ol(){}E(ol,Mp),ol.prototype.g=function(){return new XMLHttpRequest},ol.prototype.i=function(){return{}},Fp=new ol;function Gr(u,h,p,m){this.j=u,this.i=h,this.l=p,this.R=m||1,this.U=new ka(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ST}function ST(){this.i=null,this.g="",this.h=!1}var AT={},Lp={};function Vp(u,h,p){u.L=1,u.v=ll(pr(h)),u.m=p,u.P=!0,RT(u,null)}function RT(u,h){u.F=Date.now(),al(u),u.A=pr(u.v);var p=u.A,m=u.R;Array.isArray(m)||(m=[String(m)]),HT(p.i,"t",m),u.C=0,p=u.j.J,u.h=new ST,u.g=aC(u.j,p?h:null,!u.m),0<u.O&&(u.M=new uO(g(u.Y,u,u.g),u.O)),h=u.U,p=u.g,m=u.ca;var D="readystatechange";Array.isArray(D)||(D&&(yT[0]=D.toString()),D=yT);for(var N=0;N<D.length;N++){var O=dT(p,D[N],m||h.handleEvent,!1,h.h||h);if(!O)break;h.g[O.key]=O}h=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),Fa(),hO(u.i,u.u,u.A,u.l,u.R,u.m)}Gr.prototype.ca=function(u){u=u.target;let h=this.M;h&&gr(u)==3?h.j():this.Y(u)},Gr.prototype.Y=function(u){try{if(u==this.g)e:{let St=gr(this.g);var h=this.g.Ba();let Bs=this.g.Z();if(!(3>St)&&(St!=3||this.g&&(this.h.h||this.g.oa()||YT(this.g)))){this.J||St!=4||h==7||(h==8||0>=Bs?Fa(3):Fa(2)),Up(this);var p=this.g.Z();this.X=p;t:if(NT(this)){var m=YT(this.g);u="";var D=m.length,N=gr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ki(this),Ua(this);var O="";break t}this.h.i=new a.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,u+=this.h.i.decode(m[h],{stream:!(N&&h==D-1)});m.length=0,this.h.g+=u,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=p==200,fO(this.i,this.u,this.A,this.l,this.R,St,p),this.o){if(this.T&&!this.K){t:{if(this.g){var xe,wt=this.g;if((xe=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(xe)){var Ee=xe;break t}}Ee=null}if(p=Ee)Vs(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jp(this,p);else{this.o=!1,this.s=3,Vt(12),ki(this),Ua(this);break e}}if(this.P){p=!0;let Rn;for(;!this.J&&this.C<O.length;)if(Rn=mO(this,O),Rn==Lp){St==4&&(this.s=4,Vt(14),p=!1),Vs(this.i,this.l,null,"[Incomplete Response]");break}else if(Rn==AT){this.s=4,Vt(15),Vs(this.i,this.l,O,"[Invalid Chunk]"),p=!1;break}else Vs(this.i,this.l,Rn,null),jp(this,Rn);if(NT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),St!=4||O.length!=0||this.h.h||(this.s=1,Vt(16),p=!1),this.o=this.o&&p,!p)Vs(this.i,this.l,O,"[Invalid Chunked Response]"),ki(this),Ua(this);else if(0<O.length&&!this.W){this.W=!0;var Dt=this.j;Dt.g==this&&Dt.ba&&!Dt.M&&(Dt.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),Gp(Dt),Dt.M=!0,Vt(11))}}else Vs(this.i,this.l,O,null),jp(this,O);St==4&&ki(this),this.o&&!this.J&&(St==4?rC(this.j,this):(this.o=!1,al(this)))}else MO(this.g),p==400&&0<O.indexOf("Unknown SID")?(this.s=3,Vt(12)):(this.s=0,Vt(13)),ki(this),Ua(this)}}}catch{}finally{}};function NT(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function mO(u,h){var p=u.C,m=h.indexOf(`
`,p);return m==-1?Lp:(p=Number(h.substring(p,m)),isNaN(p)?AT:(m+=1,m+p>h.length?Lp:(h=h.slice(m,m+p),u.C=m+p,h)))}Gr.prototype.cancel=function(){this.J=!0,ki(this)};function al(u){u.S=Date.now()+u.I,xT(u,u.I)}function xT(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=La(g(u.ba,u),h)}function Up(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Gr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(pO(this.i,this.A),this.L!=2&&(Fa(),Vt(17)),ki(this),this.s=2,Ua(this)):xT(this,this.S-u)};function Ua(u){u.j.G==0||u.J||rC(u.j,u)}function ki(u){Up(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,vT(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function jp(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||Bp(p.h,u))){if(!u.K&&Bp(p.h,u)&&p.G==3){try{var m=p.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var D=m;if(D[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)gl(p),fl(p);else break e;zp(p),Vt(18)}}else p.za=D[1],0<p.za-p.T&&37500>D[2]&&p.F&&p.v==0&&!p.C&&(p.C=La(g(p.Za,p),6e3));if(1>=kT(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Fi(p,11)}else if((u.K||p.g==u)&&gl(p),!L(h))for(D=p.Da.g.parse(h),h=0;h<D.length;h++){let Ee=D[h];if(p.T=Ee[0],Ee=Ee[1],p.G==2)if(Ee[0]=="c"){p.K=Ee[1],p.ia=Ee[2];let Dt=Ee[3];Dt!=null&&(p.la=Dt,p.j.info("VER="+p.la));let St=Ee[4];St!=null&&(p.Aa=St,p.j.info("SVER="+p.Aa));let Bs=Ee[5];Bs!=null&&typeof Bs=="number"&&0<Bs&&(m=1.5*Bs,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let Rn=u.g;if(Rn){let _l=Rn.g?Rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_l){var N=m.h;N.g||_l.indexOf("spdy")==-1&&_l.indexOf("quic")==-1&&_l.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&($p(N,N.h),N.h=null))}if(m.D){let Wp=Rn.g?Rn.g.getResponseHeader("X-HTTP-Session-Id"):null;Wp&&(m.ya=Wp,Ve(m.I,m.D,Wp))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var O=u;if(m.qa=oC(m,m.J?m.ia:null,m.W),O.K){OT(m.h,O);var xe=O,wt=m.L;wt&&(xe.I=wt),xe.B&&(Up(xe),al(xe)),m.g=O}else tC(m);0<p.i.length&&pl(p)}else Ee[0]!="stop"&&Ee[0]!="close"||Fi(p,7);else p.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?Fi(p,7):qp(p):Ee[0]!="noop"&&p.l&&p.l.ta(Ee),p.v=0)}}Fa(4)}catch{}}var _O=class{constructor(u,h){this.g=u,this.map=h}};function PT(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function MT(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function kT(u){return u.h?1:u.g?u.g.size:0}function Bp(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function $p(u,h){u.g?u.g.add(h):u.h=h}function OT(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}PT.prototype.cancel=function(){if(this.i=FT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function FT(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return R(u.i)}function yO(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,m=0;m<p;m++)h.push(u[m]);return h}h=[],p=0;for(m in u)h[p++]=u[m];return h}function vO(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let m in u)h[p++]=m;return h}}}function LT(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=vO(u),m=yO(u),D=m.length,N=0;N<D;N++)h.call(void 0,m[N],p&&p[N],u)}var VT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function IO(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var m=u[p].indexOf("="),D=null;if(0<=m){var N=u[p].substring(0,m);D=u[p].substring(m+1)}else N=u[p];h(N,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Oi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Oi){this.h=u.h,cl(this,u.j),this.o=u.o,this.g=u.g,ul(this,u.s),this.l=u.l;var h=u.i,p=new $a;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),UT(this,p),this.m=u.m}else u&&(h=String(u).match(VT))?(this.h=!1,cl(this,h[1]||"",!0),this.o=ja(h[2]||""),this.g=ja(h[3]||"",!0),ul(this,h[4]),this.l=ja(h[5]||"",!0),UT(this,h[6]||"",!0),this.m=ja(h[7]||"")):(this.h=!1,this.i=new $a(null,this.h))}Oi.prototype.toString=function(){var u=[],h=this.j;h&&u.push(Ba(h,jT,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(Ba(h,jT,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(Ba(p,p.charAt(0)=="/"?TO:EO,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",Ba(p,bO)),u.join("")};function pr(u){return new Oi(u)}function cl(u,h,p){u.j=p?ja(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function ul(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function UT(u,h,p){h instanceof $a?(u.i=h,DO(u.i,u.h)):(p||(h=Ba(h,CO)),u.i=new $a(h,u.h))}function Ve(u,h,p){u.i.set(h,p)}function ll(u){return Ve(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ja(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ba(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,wO),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function wO(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var jT=/[#\/\?@]/g,EO=/[#\?:]/g,TO=/[#\?]/g,CO=/[#\?@]/g,bO=/#/g;function $a(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function Wr(u){u.g||(u.g=new Map,u.h=0,u.i&&IO(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=$a.prototype,t.add=function(u,h){Wr(this),this.i=null,u=Us(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function BT(u,h){Wr(u),h=Us(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function $T(u,h){return Wr(u),h=Us(u,h),u.g.has(h)}t.forEach=function(u,h){Wr(this),this.g.forEach(function(p,m){p.forEach(function(D){u.call(h,D,m,this)},this)},this)},t.na=function(){Wr(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let m=0;m<h.length;m++){let D=u[m];for(let N=0;N<D.length;N++)p.push(h[m])}return p},t.V=function(u){Wr(this);let h=[];if(typeof u=="string")$T(this,u)&&(h=h.concat(this.g.get(Us(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},t.set=function(u,h){return Wr(this),this.i=null,u=Us(this,u),$T(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},t.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function HT(u,h,p){BT(u,h),0<p.length&&(u.i=null,u.g.set(Us(u,h),R(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var m=h[p];let N=encodeURIComponent(String(m)),O=this.V(m);for(m=0;m<O.length;m++){var D=N;O[m]!==""&&(D+="="+encodeURIComponent(String(O[m]))),u.push(D)}}return this.i=u.join("&")};function Us(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function DO(u,h){h&&!u.j&&(Wr(u),u.i=null,u.g.forEach(function(p,m){var D=m.toLowerCase();m!=D&&(BT(this,m),HT(this,D,p))},u)),u.j=h}function SO(u,h){let p=new Va;if(a.Image){let m=new Image;m.onload=_(Kr,p,"TestLoadImage: loaded",!0,h,m),m.onerror=_(Kr,p,"TestLoadImage: error",!1,h,m),m.onabort=_(Kr,p,"TestLoadImage: abort",!1,h,m),m.ontimeout=_(Kr,p,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=u}else h(!1)}function AO(u,h){let p=new Va,m=new AbortController,D=setTimeout(()=>{m.abort(),Kr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:m.signal}).then(N=>{clearTimeout(D),N.ok?Kr(p,"TestPingServer: ok",!0,h):Kr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),Kr(p,"TestPingServer: error",!1,h)})}function Kr(u,h,p,m,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),m(p)}catch{}}function RO(){this.g=new dO}function NO(u,h,p){let m=p||"";try{LT(u,function(D,N){let O=D;l(D)&&(O=Pp(D)),h.push(m+N+"="+encodeURIComponent(O))})}catch(D){throw h.push(m+"type="+encodeURIComponent("_badmap")),D}}function Ha(u){this.l=u.Ub||null,this.j=u.eb||!1}E(Ha,Mp),Ha.prototype.g=function(){return new dl(this.l,this.j)},Ha.prototype.i=function(u){return function(){return u}}({});function dl(u,h){bt.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(dl,bt),t=dl.prototype,t.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,za(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qa(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,za(this)),this.g&&(this.readyState=3,za(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qT(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function qT(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?qa(this):za(this),this.readyState==3&&qT(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,qa(this))},t.Qa=function(u){this.g&&(this.response=u,qa(this))},t.ga=function(){this.g&&qa(this)};function qa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,za(u)}t.setRequestHeader=function(u,h){this.u.append(u,h)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function za(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(dl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function zT(u){let h="";return Y(u,function(p,m){h+=m,h+=":",h+=p,h+=`\r
`}),h}function Hp(u,h,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=zT(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Ve(u,h,p))}function Ke(u){bt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Ke,bt);var xO=/^https?$/i,PO=["POST","PUT"];t=Ke.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,h,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fp.g(),this.v=this.o?IT(this.o):IT(Fp),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(N){GT(this,N);return}if(u=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var D in m)p.set(D,m[D]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let N of m.keys())p.set(N,m.get(N));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(N=>N.toLowerCase()=="content-type"),D=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(PO,h,void 0))||m||D||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,O]of p)this.g.setRequestHeader(N,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{QT(this),this.u=!0,this.g.send(u),this.u=!1}catch(N){GT(this,N)}};function GT(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,WT(u),hl(u)}function WT(u){u.A||(u.A=!0,Lt(u,"complete"),Lt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Lt(this,"complete"),Lt(this,"abort"),hl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hl(this,!0)),Ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?KT(this):this.bb())},t.bb=function(){KT(this)};function KT(u){if(u.h&&typeof o<"u"&&(!u.v[1]||gr(u)!=4||u.Z()!=2)){if(u.u&&gr(u)==4)mT(u.Ea,0,u);else if(Lt(u,"readystatechange"),gr(u)==4){u.h=!1;try{let O=u.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var m;if(m=O===0){var D=String(u.D).match(VT)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),m=!xO.test(D?D.toLowerCase():"")}p=m}if(p)Lt(u,"complete"),Lt(u,"success");else{u.m=6;try{var N=2<gr(u)?u.g.statusText:""}catch{N=""}u.l=N+" ["+u.Z()+"]",WT(u)}}finally{hl(u)}}}}function hl(u,h){if(u.g){QT(u);let p=u.g,m=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||Lt(u,"ready");try{p.onreadystatechange=m}catch{}}}function QT(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function gr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<gr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),lO(h)}};function YT(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function MO(u){let h={};u=(u.g&&2<=gr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<u.length;m++){if(L(u[m]))continue;var p=b(u[m]);let D=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let N=h[D]||[];h[D]=N,N.push(p)}T(h,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ga(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function ZT(u){this.Aa=0,this.i=[],this.j=new Va,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ga("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ga("baseRetryDelayMs",5e3,u),this.cb=Ga("retryDelaySeedMs",1e4,u),this.Wa=Ga("forwardChannelMaxRetries",2,u),this.wa=Ga("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new PT(u&&u.concurrentRequestLimit),this.Da=new RO,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ZT.prototype,t.la=8,t.G=1,t.connect=function(u,h,p,m){Vt(0),this.W=u,this.H=h||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=oC(this,null,this.W),pl(this)};function qp(u){if(JT(u),u.G==3){var h=u.U++,p=pr(u.I);if(Ve(p,"SID",u.K),Ve(p,"RID",h),Ve(p,"TYPE","terminate"),Wa(u,p),h=new Gr(u,u.j,h),h.L=2,h.v=ll(pr(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=aC(h.j,null),h.g.ea(h.v)),h.F=Date.now(),al(h)}sC(u)}function fl(u){u.g&&(Gp(u),u.g.cancel(),u.g=null)}function JT(u){fl(u),u.u&&(a.clearTimeout(u.u),u.u=null),gl(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function pl(u){if(!MT(u.h)&&!u.s){u.s=!0;var h=u.Ga;Na||lT(),xa||(Na(),xa=!0),Tp.add(h,u),u.B=0}}function kO(u,h){return kT(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=La(g(u.Ga,u,h),iC(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let D=new Gr(this,this.j,u),N=this.o;if(this.S&&(N?(N=v(N),C(N,this.S)):N=this.S),this.m!==null||this.O||(D.H=N,N=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=eC(this,D,h),p=pr(this.I),Ve(p,"RID",u),Ve(p,"CVER",22),this.D&&Ve(p,"X-HTTP-Session-Id",this.D),Wa(this,p),N&&(this.O?h="headers="+encodeURIComponent(String(zT(N)))+"&"+h:this.m&&Hp(p,this.m,N)),$p(this.h,D),this.Ua&&Ve(p,"TYPE","init"),this.P?(Ve(p,"$req",h),Ve(p,"SID","null"),D.T=!0,Vp(D,p,null)):Vp(D,p,h),this.G=2}}else this.G==3&&(u?XT(this,u):this.i.length==0||MT(this.h)||XT(this))};function XT(u,h){var p;h?p=h.l:p=u.U++;let m=pr(u.I);Ve(m,"SID",u.K),Ve(m,"RID",p),Ve(m,"AID",u.T),Wa(u,m),u.m&&u.o&&Hp(m,u.m,u.o),p=new Gr(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=eC(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),$p(u.h,p),Vp(p,m,h)}function Wa(u,h){u.H&&Y(u.H,function(p,m){Ve(h,m,p)}),u.l&&LT({},function(p,m){Ve(h,m,p)})}function eC(u,h,p){p=Math.min(u.i.length,p);var m=u.l?g(u.l.Na,u.l,u):null;e:{var D=u.i;let N=-1;for(;;){let O=["count="+p];N==-1?0<p?(N=D[0].g,O.push("ofs="+N)):N=0:O.push("ofs="+N);let xe=!0;for(let wt=0;wt<p;wt++){let Ee=D[wt].g,Dt=D[wt].map;if(Ee-=N,0>Ee)N=Math.max(0,D[wt].g-100),xe=!1;else try{NO(Dt,O,"req"+Ee+"_")}catch{m&&m(Dt)}}if(xe){m=O.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,m}function tC(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;Na||lT(),xa||(Na(),xa=!0),Tp.add(h,u),u.v=0}}function zp(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=La(g(u.Fa,u),iC(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,nC(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=La(g(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Vt(10),fl(this),nC(this))};function Gp(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function nC(u){u.g=new Gr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=pr(u.qa);Ve(h,"RID","rpc"),Ve(h,"SID",u.K),Ve(h,"AID",u.T),Ve(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ve(h,"TO",u.ja),Ve(h,"TYPE","xmlhttp"),Wa(u,h),u.m&&u.o&&Hp(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=ll(pr(h)),p.m=null,p.P=!0,RT(p,u)}t.Za=function(){this.C!=null&&(this.C=null,fl(this),zp(this),Vt(19))};function gl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function rC(u,h){var p=null;if(u.g==h){gl(u),Gp(u),u.g=null;var m=2}else if(Bp(u.h,h))p=h.D,OT(u.h,h),m=1;else return;if(u.G!=0){if(h.o)if(m==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var D=u.B;m=il(),Lt(m,new bT(m,p)),pl(u)}else tC(u);else if(D=h.s,D==3||D==0&&0<h.X||!(m==1&&kO(u,h)||m==2&&zp(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),D){case 1:Fi(u,5);break;case 4:Fi(u,10);break;case 3:Fi(u,6);break;default:Fi(u,2)}}}function iC(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function Fi(u,h){if(u.j.info("Error code "+h),h==2){var p=g(u.fb,u),m=u.Xa;let D=!m;m=new Oi(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||cl(m,"https"),ll(m),D?SO(m.toString(),p):AO(m.toString(),p)}else Vt(2);u.G=0,u.l&&u.l.sa(h),sC(u),JT(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function sC(u){if(u.G=0,u.ka=[],u.l){let h=FT(u.h);(h.length!=0||u.i.length!=0)&&(A(u.ka,h),A(u.ka,u.i),u.h.i.length=0,R(u.i),u.i.length=0),u.l.ra()}}function oC(u,h,p){var m=p instanceof Oi?pr(p):new Oi(p);if(m.g!="")h&&(m.g=h+"."+m.g),ul(m,m.s);else{var D=a.location;m=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var N=new Oi(null);m&&cl(N,m),h&&(N.g=h),D&&ul(N,D),p&&(N.l=p),m=N}return p=u.D,h=u.ya,p&&h&&Ve(m,p,h),Ve(m,"VER",u.la),Wa(u,m),m}function aC(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new Ke(new Ha({eb:p})):new Ke(u.pa),h.Ha(u.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function cC(){}t=cC.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ml(){}ml.prototype.g=function(u,h){return new nn(u,h)};function nn(u,h){bt.call(this),this.g=new ZT(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!L(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!L(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new js(this)}E(nn,bt),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){qp(this.g)},nn.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=Pp(u),u=p);h.i.push(new _O(h.Ya++,u)),h.G==3&&pl(h)},nn.prototype.N=function(){this.g.l=null,delete this.j,qp(this.g),delete this.g,nn.aa.N.call(this)};function uC(u){kp.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}E(uC,kp);function lC(){Op.call(this),this.status=1}E(lC,Op);function js(u){this.g=u}E(js,cC),js.prototype.ua=function(){Lt(this.g,"a")},js.prototype.ta=function(u){Lt(this.g,new uC(u))},js.prototype.sa=function(u){Lt(this.g,new lC)},js.prototype.ra=function(){Lt(this.g,"b")},ml.prototype.createWebChannel=ml.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,ev=kr.createWebChannelTransport=function(){return new ml},Xy=kr.getStatEventTarget=function(){return il()},Jy=kr.Event=Mi,tf=kr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},sl.NO_ERROR=0,sl.TIMEOUT=8,sl.HTTP_ERROR=6,iu=kr.ErrorCode=sl,DT.COMPLETE="complete",Zy=kr.EventType=DT,wT.EventType=Oa,Oa.OPEN="a",Oa.CLOSE="b",Oa.ERROR="c",Oa.MESSAGE="d",bt.prototype.listen=bt.prototype.K,$o=kr.WebChannel=wT,sz=kr.FetchXmlHttpFactory=Ha,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,Yy=kr.XhrIo=Ke}).apply(typeof ef<"u"?ef:typeof self<"u"?self:typeof window<"u"?window:{});var PR="@firebase/firestore";var vt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};vt.UNAUTHENTICATED=new vt(null),vt.GOOGLE_CREDENTIALS=new vt("google-credentials-uid"),vt.FIRST_PARTY=new vt("first-party-uid"),vt.MOCK_USER=new vt("mock-user");var aa="10.14.0";var vs=new Qn("@firebase/firestore");function su(){return vs.logLevel}function B(t,...e){if(vs.logLevel<=Rt.DEBUG){let n=e.map(FI);vs.debug(`Firestore (${aa}): ${t}`,...n)}}function Fr(t,...e){if(vs.logLevel<=Rt.ERROR){let n=e.map(FI);vs.error(`Firestore (${aa}): ${t}`,...n)}}function Qo(t,...e){if(vs.logLevel<=Rt.WARN){let n=e.map(FI);vs.warn(`Firestore (${aa}): ${t}`,...n)}}function FI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function X(t="Unexpected state"){let e=`FIRESTORE (${aa}) INTERNAL ASSERTION FAILED: `+t;throw Fr(e),new Error(e)}function Se(t,e){t||X()}function re(t,e){return t}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},j=class extends Wt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ar=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var af=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},sv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(vt.UNAUTHENTICATED))}shutdown(){}},ov=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},av=class{constructor(e){this.t=e,this.currentUser=vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Se(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new ar;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ar,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>y(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ar)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Se(typeof r.accessToken=="string"),new af(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string"),new vt(e)}},cv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=vt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},uv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new cv(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},lv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},dv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Se(this.o===void 0);let r=s=>{s.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,B("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Se(typeof n.token=="string"),this.R=n.token,new lv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function oz(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var cf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=oz(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function Te(t,e){return t<e?-1:t>e?1:0}function Yo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var _t=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new j(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new j(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new j(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var se=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new _t(0,0))}static max(){return new t(new _t(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var uf=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(),r===void 0?r=e.length-n:r>e.length-n&&X(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Ge=class t extends uf{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new j(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},az=/^[_a-zA-Z][_a-zA-Z0-9]*$/,pn=class t extends uf{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return az.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new j(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new j(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new j(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new j(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var z=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ge.fromString(e))}static fromName(e){return new t(Ge.fromString(e).popFirst(5))}static empty(){return new t(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ge(e.slice()))}};var hv=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};hv.UNKNOWN_ID=-1;function cz(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=se.fromTimestamp(r===1e9?new _t(n+1,0):new _t(n,r));return new Is(i,z.empty(),e)}function uz(t){return new Is(t.readTime,t.key,-1)}var Is=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(se.min(),z.empty(),-1)}static max(){return new t(se.max(),z.empty(),-1)}};function lz(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=z.comparator(t.documentKey,e.documentKey),n!==0?n:Te(t.largestBatchId,e.largestBatchId))}var dz="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",fv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function bu(t){return y(this,null,function*(){if(t.code!==x.FAILED_PRECONDITION||t.message!==dz)throw t;B("LocalStore","Unexpectedly lost primary lease")})}var k=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(e[l]).next(d=>{o[l]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function hz(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Du(t){return t.name==="IndexedDbTransactionError"}var fN=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Uf(t){return t==null}function du(t){return t===0&&1/t==-1/0}function fz(t){return typeof t=="number"&&Number.isInteger(t)&&!du(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var pz=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Xee=[...pz,"documentOverlays"],gz=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],mz=gz,_z=[...mz,"indexConfiguration","indexState","indexEntries"];var ete=[..._z,"globals"];function MR(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ca(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pN(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Xe=class t{constructor(e,n){this.comparator=e,this.root=n||cr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,cr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Go(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Go(this.root,e,this.comparator,!1)}getReverseIterator(){return new Go(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Go(this.root,e,this.comparator,!0)}},Go=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},cr=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();let e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}};cr.EMPTY=null,cr.RED=!0,cr.BLACK=!1;cr.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,r,i,s){return this}insert(e,n,r){return new cr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var xt=class t{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new lf(this.data.getIterator())}getIteratorFrom(e){return new lf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},lf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var or=class t{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new t([])}unionWith(e){let n=new xt(pn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Yo(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var df=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Pt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new df("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Pt.EMPTY_BYTE_STRING=new Pt("");var yz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lr(t){if(Se(!!t),typeof t=="string"){let e=0,n=yz.exec(t);if(Se(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:He(t.seconds),nanos:He(t.nanos)}}function He(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ci(t){return typeof t=="string"?Pt.fromBase64String(t):Pt.fromUint8Array(t)}function LI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function VI(t){let e=t.mapValue.fields.__previous_value__;return LI(e)?VI(e):e}function hu(t){let e=Lr(t.mapValue.fields.__local_write_time__.timestampValue);return new _t(e.seconds,e.nanos)}var pv=class{constructor(e,n,r,i,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},hf=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var nf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ws(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?LI(t)?4:mN(t)?9007199254740991:gN(t)?10:11:X()}function dr(t,e){if(t===e)return!0;let n=ws(t);if(n!==ws(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return hu(t).isEqual(hu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Lr(i.timestampValue),a=Lr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ci(i.bytesValue).isEqual(Ci(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return He(i.geoPointValue.latitude)===He(s.geoPointValue.latitude)&&He(i.geoPointValue.longitude)===He(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return He(i.integerValue)===He(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=He(i.doubleValue),a=He(s.doubleValue);return o===a?du(o)===du(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Yo(t.arrayValue.values||[],e.arrayValue.values||[],dr);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(MR(o)!==MR(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!dr(o[c],a[c])))return!1;return!0}(t,e);default:return X()}}function fu(t,e){return(t.values||[]).find(n=>dr(n,e))!==void 0}function Zo(t,e){if(t===e)return 0;let n=ws(t),r=ws(e);if(n!==r)return Te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=He(s.integerValue||s.doubleValue),c=He(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return kR(t.timestampValue,e.timestampValue);case 4:return kR(hu(t),hu(e));case 5:return Te(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Ci(s),c=Ci(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=Te(a[l],c[l]);if(d!==0)return d}return Te(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Te(He(s.latitude),He(o.latitude));return a!==0?a:Te(He(s.longitude),He(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return OR(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,d;let f=s.fields||{},g=o.fields||{},_=(a=f.value)===null||a===void 0?void 0:a.arrayValue,E=(c=g.value)===null||c===void 0?void 0:c.arrayValue,R=Te(((l=_?.values)===null||l===void 0?void 0:l.length)||0,((d=E?.values)===null||d===void 0?void 0:d.length)||0);return R!==0?R:OR(_,E)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===nf.mapValue&&o===nf.mapValue)return 0;if(s===nf.mapValue)return 1;if(o===nf.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=Te(c[f],d[f]);if(g!==0)return g;let _=Zo(a[c[f]],l[d[f]]);if(_!==0)return _}return Te(c.length,d.length)}(t.mapValue,e.mapValue);default:throw X()}}function kR(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Te(t,e);let n=Lr(t),r=Lr(e),i=Te(n.seconds,r.seconds);return i!==0?i:Te(n.nanos,r.nanos)}function OR(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=Zo(n[i],r[i]);if(s)return s}return Te(n.length,r.length)}function Jo(t){return gv(t)}function gv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Lr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ci(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=gv(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${gv(n.fields[o])}`;return i+"}"}(t.mapValue):X()}function FR(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function mv(t){return!!t&&"integerValue"in t}function UI(t){return!!t&&"arrayValue"in t}function LR(t){return!!t&&"nullValue"in t}function VR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function sf(t){return!!t&&"mapValue"in t}function gN(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function au(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ca(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=au(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=au(t.arrayValue.values[n]);return e}return Object.assign({},t)}function mN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var jn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!sf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=au(n)}setAll(e){let n=pn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=au(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());sf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return dr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];sf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ca(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(au(this.value))}};function _N(t){let e=[];return ca(t.fields,(n,r)=>{let i=new pn([n]);if(sf(r)){let s=_N(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new or(e)}var Bn=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,se.min(),se.min(),se.min(),jn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,se.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,se.min(),se.min(),jn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,se.min(),se.min(),jn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Xo=class{constructor(e,n){this.position=e,this.inclusive=n}};function UR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=z.comparator(z.fromName(o.referenceValue),n.key):r=Zo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function jR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!dr(t.position[n],e.position[n]))return!1;return!0}var ea=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function vz(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var ff=class{},pt=class t extends ff{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new yv(e,n,r):n==="array-contains"?new wv(e,r):n==="in"?new Ev(e,r):n==="not-in"?new Tv(e,r):n==="array-contains-any"?new Cv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new vv(e,r):new Iv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Zo(n,this.value)):n!==null&&ws(this.value)===ws(n)&&this.matchesComparison(Zo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},$n=class t extends ff{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return yN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function yN(t){return t.op==="and"}function vN(t){return Iz(t)&&yN(t)}function Iz(t){for(let e of t.filters)if(e instanceof $n)return!1;return!0}function _v(t){if(t instanceof pt)return t.field.canonicalString()+t.op.toString()+Jo(t.value);if(vN(t))return t.filters.map(e=>_v(e)).join(",");{let e=t.filters.map(n=>_v(n)).join(",");return`${t.op}(${e})`}}function IN(t,e){return t instanceof pt?function(r,i){return i instanceof pt&&r.op===i.op&&r.field.isEqual(i.field)&&dr(r.value,i.value)}(t,e):t instanceof $n?function(r,i){return i instanceof $n&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&IN(o,i.filters[a]),!0):!1}(t,e):void X()}function wN(t){return t instanceof pt?function(n){return`${n.field.canonicalString()} ${n.op} ${Jo(n.value)}`}(t):t instanceof $n?function(n){return n.op.toString()+" {"+n.getFilters().map(wN).join(" ,")+"}"}(t):"Filter"}var yv=class extends pt{constructor(e,n,r){super(e,n,r),this.key=z.fromName(r.referenceValue)}matches(e){let n=z.comparator(e.key,this.key);return this.matchesComparison(n)}},vv=class extends pt{constructor(e,n){super(e,"in",n),this.keys=EN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Iv=class extends pt{constructor(e,n){super(e,"not-in",n),this.keys=EN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function EN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>z.fromName(r.referenceValue))}var wv=class extends pt{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return UI(n)&&fu(n.arrayValue,this.value)}},Ev=class extends pt{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&fu(this.value.arrayValue,n)}},Tv=class extends pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(fu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!fu(this.value.arrayValue,n)}},Cv=class extends pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!UI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>fu(this.value.arrayValue,r))}};var bv=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function BR(t,e=null,n=[],r=[],i=null,s=null,o=null){return new bv(t,e,n,r,i,s,o)}function jI(t){let e=re(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>_v(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Uf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Jo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Jo(r)).join(",")),e.ue=n}return e.ue}function BI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vz(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!IN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jR(t.startAt,e.startAt)&&jR(t.endAt,e.endAt)}function Dv(t){return z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Es=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function wz(t,e,n,r,i,s,o,a){return new Es(t,e,n,r,i,s,o,a)}function $I(t){return new Es(t)}function $R(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function TN(t){return t.collectionGroup!==null}function cu(t){let e=re(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new xt(pn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ea(s,r))}),n.has(pn.keyField().canonicalString())||e.ce.push(new ea(pn.keyField(),r))}return e.ce}function ur(t){let e=re(t);return e.le||(e.le=Ez(e,cu(t))),e.le}function Ez(t,e){if(t.limitType==="F")return BR(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new ea(i.field,s)});let n=t.endAt?new Xo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Xo(t.startAt.position,t.startAt.inclusive):null;return BR(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Sv(t,e){let n=t.filters.concat([e]);return new Es(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Av(t,e,n){return new Es(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function jf(t,e){return BI(ur(t),ur(e))&&t.limitType===e.limitType}function CN(t){return`${jI(ur(t))}|lt:${t.limitType}`}function Ho(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>wN(i)).join(", ")}]`),Uf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Jo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Jo(i)).join(",")),`Target(${r})`}(ur(t))}; limitType=${t.limitType})`}function Bf(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):z.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of cu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=UR(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,cu(r),i)||r.endAt&&!function(o,a,c){let l=UR(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,cu(r),i))}(t,e)}function Tz(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function bN(t){return(e,n)=>{let r=!1;for(let i of cu(t)){let s=Cz(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Cz(t,e,n){let r=t.field.isKeyField()?z.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Zo(c,l):X()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}var bi=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ca(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return pN(this.inner)}size(){return this.innerSize}};var bz=new Xe(z.comparator);function Vr(){return bz}var DN=new Xe(z.comparator);function ou(...t){let e=DN;for(let n of t)e=e.insert(n.key,n);return e}function SN(t){let e=DN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ms(){return uu()}function AN(){return uu()}function uu(){return new bi(t=>t.toString(),(t,e)=>t.isEqual(e))}var Dz=new Xe(z.comparator),Sz=new xt(z.comparator);function he(...t){let e=Sz;for(let n of t)e=e.add(n);return e}var Az=new xt(Te);function Rz(){return Az}function HI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:du(e)?"-0":e}}function RN(t){return{integerValue:""+t}}function Nz(t,e){return fz(e)?RN(e):HI(t,e)}var ta=class{constructor(){this._=void 0}};function xz(t,e,n){return t instanceof na?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&LI(s)&&(s=VI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Ts?xN(t,e):t instanceof Cs?PN(t,e):function(i,s){let o=NN(i,s),a=HR(o)+HR(i.Pe);return mv(o)&&mv(i.Pe)?RN(a):HI(i.serializer,a)}(t,e)}function Pz(t,e,n){return t instanceof Ts?xN(t,e):t instanceof Cs?PN(t,e):n}function NN(t,e){return t instanceof ra?function(r){return mv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var na=class extends ta{},Ts=class extends ta{constructor(e){super(),this.elements=e}};function xN(t,e){let n=MN(e);for(let r of t.elements)n.some(i=>dr(i,r))||n.push(r);return{arrayValue:{values:n}}}var Cs=class extends ta{constructor(e){super(),this.elements=e}};function PN(t,e){let n=MN(e);for(let r of t.elements)n=n.filter(i=>!dr(i,r));return{arrayValue:{values:n}}}var ra=class extends ta{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function HR(t){return He(t.integerValue||t.doubleValue)}function MN(t){return UI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Mz(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ts&&i instanceof Ts||r instanceof Cs&&i instanceof Cs?Yo(r.elements,i.elements,dr):r instanceof ra&&i instanceof ra?dr(r.Pe,i.Pe):r instanceof na&&i instanceof na}(t.transform,e.transform)}var Rv=class{constructor(e,n){this.version=e,this.transformResults=n}},Ei=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function of(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ia=class{};function kN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new pu(t.key,Ei.none()):new bs(t.key,t.data,Ei.none());{let n=t.data,r=jn.empty(),i=new xt(pn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ur(t.key,r,new or(i.toArray()),Ei.none())}}function kz(t,e,n){t instanceof bs?function(i,s,o){let a=i.value.clone(),c=zR(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ur?function(i,s,o){if(!of(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=zR(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(ON(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function lu(t,e,n,r){return t instanceof bs?function(s,o,a,c){if(!of(s.precondition,o))return a;let l=s.value.clone(),d=GR(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ur?function(s,o,a,c){if(!of(s.precondition,o))return a;let l=GR(s.fieldTransforms,c,o),d=o.data;return d.setAll(ON(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return of(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Oz(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=NN(r.transform,i||null);s!=null&&(n===null&&(n=jn.empty()),n.set(r.field,s))}return n||null}function qR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Yo(r,i,(s,o)=>Mz(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var bs=class extends ia{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Ur=class extends ia{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function ON(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function zR(t,e,n){let r=new Map;Se(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Pz(o,a,n[i]))}return r}function GR(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,xz(s,o,e))}return r}var pu=class extends ia{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Nv=class extends ia{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var xv=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&kz(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=lu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=lu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=AN();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=kN(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&Yo(this.mutations,e.mutations,(n,r)=>qR(n,r))&&Yo(this.baseMutations,e.baseMutations,(n,r)=>qR(n,r))}},Pv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Se(e.mutations.length===r.length);let i=function(){return Dz}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Mv=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var kv=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ht,ye;function Fz(t){switch(t){default:return X();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function FN(t){if(t===void 0)return Fr("GRPC error has no .code"),x.UNKNOWN;switch(t){case ht.OK:return x.OK;case ht.CANCELLED:return x.CANCELLED;case ht.UNKNOWN:return x.UNKNOWN;case ht.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case ht.INTERNAL:return x.INTERNAL;case ht.UNAVAILABLE:return x.UNAVAILABLE;case ht.UNAUTHENTICATED:return x.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case ht.NOT_FOUND:return x.NOT_FOUND;case ht.ALREADY_EXISTS:return x.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return x.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case ht.ABORTED:return x.ABORTED;case ht.OUT_OF_RANGE:return x.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return x.UNIMPLEMENTED;case ht.DATA_LOSS:return x.DATA_LOSS;default:return X()}}(ye=ht||(ht={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var WR=null;function Lz(){return new TextEncoder}var Vz=new wi([4294967295,4294967295],0);function KR(t){let e=Lz().encode(t),n=new Qy;return n.update(e),new Uint8Array(n.digest())}function QR(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new wi([n,r],0),new wi([i,s],0)]}var Ov=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _s(`Invalid padding: ${n}`);if(r<0)throw new _s(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _s(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new _s(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=wi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(wi.fromNumber(r)));return i.compare(Vz)===1&&(i=new wi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=KR(e),[r,i]=QR(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=KR(e),[r,i]=QR(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},_s=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var pf=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,gu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(se.min(),i,new Xe(Te),Vr(),he())}},gu=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,he(),he(),he())}};var Wo=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},gf=class{constructor(e,n){this.targetId=e,this.me=n}},mf=class{constructor(e,n,r=Pt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},_f=class{constructor(){this.fe=0,this.ge=ZR(),this.pe=Pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=he(),n=he(),r=he();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:X()}}),new gu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=ZR()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Se(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Fv=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Vr(),this.qe=YR(),this.Qe=new Xe(Te)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(Dv(s))if(r===0){let o=new z(s.path);this.Ue(n,o,Bn.newNoDocument(o,se.min()))}else Se(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}WR?.et(function(d,f,g,_,E){var R,A,M,L,$,G;let Ne={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},Y=f.unchangedNames;return Y&&(Ne.bloomFilter={applied:E===0,hashCount:(R=Y?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(L=(M=(A=Y?.bits)===null||A===void 0?void 0:A.bitmap)===null||M===void 0?void 0:M.length)!==null&&L!==void 0?L:0,padding:(G=($=Y?.bits)===null||$===void 0?void 0:$.padding)!==null&&G!==void 0?G:0,mightContain:T=>{var v;return(v=_?.mightContain(T))!==null&&v!==void 0&&v}}),Ne}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Ci(r).toUint8Array()}catch(c){if(c instanceof df)return Qo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Ov(o,i,s)}catch(c){return Qo(c instanceof _s?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Dv(a.target)){let c=new z(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Bn.newNoDocument(c,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=he();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new pf(e,n,this.Qe,this.ke,r);return this.ke=Vr(),this.qe=YR(),this.Qe=new Xe(Te),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new _f,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new xt(Te),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||B("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new _f),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function YR(){return new Xe(z.comparator)}function ZR(){return new Xe(z.comparator)}var Uz={asc:"ASCENDING",desc:"DESCENDING"},jz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bz={and:"AND",or:"OR"},Lv=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Vv(t,e){return t.useProto3Json||Uf(e)?e:{value:e}}function yf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $z(t,e){return yf(t,e.toTimestamp())}function lr(t){return Se(!!t),se.fromTimestamp(function(n){let r=Lr(n);return new _t(r.seconds,r.nanos)}(t))}function qI(t,e){return Uv(t,e).canonicalString()}function Uv(t,e){let n=function(i){return new Ge(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function VN(t){let e=Ge.fromString(t);return Se(HN(e)),e}function jv(t,e){return qI(t.databaseId,e.path)}function tv(t,e){let n=VN(e);if(n.get(1)!==t.databaseId.projectId)throw new j(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new j(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new z(jN(n))}function UN(t,e){return qI(t.databaseId,e)}function Hz(t){let e=VN(t);return e.length===4?Ge.emptyPath():jN(e)}function Bv(t){return new Ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function jN(t){return Se(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function JR(t,e,n){return{name:jv(t,e),fields:n.value.mapValue.fields}}function qz(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(Se(d===void 0||typeof d=="string"),Pt.fromBase64String(d||"")):(Se(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Pt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let d=l.code===void 0?x.UNKNOWN:FN(l.code);return new j(d,l.message||"")}(o);n=new mf(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=tv(t,r.document.name),s=lr(r.document.updateTime),o=r.document.createTime?lr(r.document.createTime):se.min(),a=new jn({mapValue:{fields:r.document.fields}}),c=Bn.newFoundDocument(i,s,o,a),l=r.targetIds||[],d=r.removedTargetIds||[];n=new Wo(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=tv(t,r.document),s=r.readTime?lr(r.readTime):se.min(),o=Bn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Wo([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=tv(t,r.document),s=r.removedTargetIds||[];n=new Wo([],s,i,null)}else{if(!("filter"in e))return X();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new kv(i,s),a=r.targetId;n=new gf(a,o)}}return n}function zz(t,e){let n;if(e instanceof bs)n={update:JR(t,e.key,e.value)};else if(e instanceof pu)n={delete:jv(t,e.key)};else if(e instanceof Ur)n={update:JR(t,e.key,e.data),updateMask:eG(e.fieldMask)};else{if(!(e instanceof Nv))return X();n={verify:jv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof na)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ts)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Cs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ra)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw X()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:$z(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X()}(t,e.precondition)),n}function Gz(t,e){return t&&t.length>0?(Se(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?lr(i.updateTime):lr(s);return o.isEqual(se.min())&&(o=lr(s)),new Rv(o,i.transformResults||[])}(n,e))):[]}function Wz(t,e){return{documents:[UN(t,e.path)]}}function Kz(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=UN(t,i);let s=function(l){if(l.length!==0)return $N($n.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:qo(g.field),direction:Zz(g.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Vv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function Qz(t){let e=Hz(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Se(r===1);let d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){let g=BN(f);return g instanceof $n&&vN(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(g=>function(E){return new ea(zo(E.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,Uf(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(f){let g=!!f.before,_=f.values||[];return new Xo(_,g)}(n.startAt));let l=null;return n.endAt&&(l=function(f){let g=!f.before,_=f.values||[];return new Xo(_,g)}(n.endAt)),wz(e,i,o,s,a,"F",c,l)}function Yz(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function BN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=zo(n.unaryFilter.field);return pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=zo(n.unaryFilter.field);return pt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=zo(n.unaryFilter.field);return pt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=zo(n.unaryFilter.field);return pt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return pt.create(zo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return $n.create(n.compositeFilter.filters.map(r=>BN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function Zz(t){return Uz[t]}function Jz(t){return jz[t]}function Xz(t){return Bz[t]}function qo(t){return{fieldPath:t.canonicalString()}}function zo(t){return pn.fromServerFormat(t.fieldPath)}function $N(t){return t instanceof pt?function(n){if(n.op==="=="){if(VR(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NAN"}};if(LR(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(VR(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NOT_NAN"}};if(LR(n.value))return{unaryFilter:{field:qo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qo(n.field),op:Jz(n.op),value:n.value}}}(t):t instanceof $n?function(n){let r=n.getFilters().map(i=>$N(i));return r.length===1?r[0]:{compositeFilter:{op:Xz(n.op),filters:r}}}(t):X()}function eG(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function HN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var mu=class t{constructor(e,n,r,i,s=se.min(),o=se.min(),a=Pt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var $v=class{constructor(e){this.ct=e}};function tG(t){let e=Qz({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Av(e,e.limit,"L"):e}var vf=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(He(e.integerValue));else if("doubleValue"in e){let r=He(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),du(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Lr(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Ci(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?mN(e)?this.dt(n,Number.MAX_SAFE_INTEGER):gN(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):X()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(He(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),z.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};vf.vt=new vf;var Hv=class{constructor(){this.un=new qv}addToCollectionParentIndex(e,n){return this.un.add(n),k.resolve()}getCollectionParents(e,n){return k.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return k.resolve()}deleteFieldIndex(e,n){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,n){return k.resolve()}getDocumentsMatchingTarget(e,n){return k.resolve(null)}getIndexType(e,n){return k.resolve(0)}getFieldIndexes(e,n){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,n){return k.resolve(Is.min())}getMinOffsetFromCollectionGroup(e,n){return k.resolve(Is.min())}updateCollectionGroup(e,n,r){return k.resolve()}updateIndexEntries(e,n){return k.resolve()}},qv=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new xt(Ge.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xt(Ge.comparator)).toArray()}};var nte=new Uint8Array(0);var sr=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};sr.DEFAULT_COLLECTION_PERCENTILE=10,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sr.DEFAULT=new sr(41943040,sr.DEFAULT_COLLECTION_PERCENTILE,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sr.DISABLED=new sr(-1,0,0);var _u=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var zv=class{constructor(){this.changes=new bi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Bn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?k.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Gv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Wv=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&lu(r.mutation,i,or.empty(),_t.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){let i=ms();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ou();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=ms();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Vr(),o=uu(),a=function(){return uu()}();return n.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Ur)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),lu(d.mutation,l,d.mutation.getFieldMask(),_t.now())):o.set(l.key,or.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),n.forEach((l,d)=>{var f;return a.set(l,new Gv(d,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){let r=uu(),i=new Xe((o,a)=>o-a),s=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let d=r.get(c)||or.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||he()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=AN();d.forEach(g=>{if(!s.has(g)){let _=kN(n.get(g),r.get(g));_!==null&&f.set(g,_),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return k.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):TN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):k.resolve(ms()),a=-1,c=s;return o.next(l=>k.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?k.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,he())).next(d=>({batchId:a,changes:SN(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new z(n)).next(r=>{let i=ou();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=ou();return this.indexManager.getCollectionParents(e,s).next(a=>k.forEach(a,c=>{let l=function(f,g){return new Es(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,Bn.newInvalidDocument(d)))});let a=ou();return o.forEach((c,l)=>{let d=s.get(c);d!==void 0&&lu(d.mutation,l,or.empty(),_t.now()),Bf(n,l)&&(a=a.insert(c,l))}),a})}};var Kv=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return k.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:lr(i.createTime)}}(n)),k.resolve()}getNamedQuery(e,n){return k.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:tG(i.bundledQuery),readTime:lr(i.readTime)}}(n)),k.resolve()}};var Qv=class{constructor(){this.overlays=new Xe(z.comparator),this.Ir=new Map}getOverlay(e,n){return k.resolve(this.overlays.get(n))}getOverlays(e,n){let r=ms();return k.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),k.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),k.resolve()}getOverlaysForCollection(e,n,r){let i=ms(),s=n.length+1,o=new z(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return k.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Xe((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let d=s.get(l.largestBatchId);d===null&&(d=ms(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=ms(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return k.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Mv(n,r));let s=this.Ir.get(n);s===void 0&&(s=he(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var Yv=class{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,k.resolve()}};var yu=class{constructor(){this.Tr=new xt(ft.Er),this.dr=new xt(ft.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new ft(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ft(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new z(new Ge([])),r=new ft(n,e),i=new ft(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new z(new Ge([])),r=new ft(n,e),i=new ft(n,e+1),s=he();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new ft(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},ft=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return z.comparator(e.key,n.key)||Te(e.wr,n.wr)}static Ar(e,n){return Te(e.wr,n.wr)||z.comparator(e.key,n.key)}};var Zv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new xt(ft.Er)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new xv(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new ft(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(o)}lookupMutationBatch(e,n){return k.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return k.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new ft(n,0),i=new ft(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),k.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xt(Te);return n.forEach(i=>{let s=new ft(i,0),o=new ft(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),k.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;z.isDocumentKey(s)||(s=s.child(""));let o=new ft(new z(s),0),a=new xt(Te);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),k.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Se(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return k.forEach(n.mutations,i=>{let s=new ft(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new ft(n,0),i=this.br.firstAfterOrEqual(r);return k.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Jv=class{constructor(e){this.Mr=e,this.docs=function(){return new Xe(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return k.resolve(r?r.document.mutableCopy():Bn.newInvalidDocument(n))}getEntries(e,n){let r=Vr();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Bn.newInvalidDocument(i))}),k.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Vr(),o=n.path,a=new z(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||lz(uz(d),r)<=0||(i.has(d.key)||Bf(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return k.resolve(s)}getAllFromCollectionGroup(e,n,r,i){X()}Or(e,n){return k.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Xv(this)}getSize(e){return k.resolve(this.size)}},Xv=class extends zv{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),k.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var eI=class{constructor(e){this.persistence=e,this.Nr=new bi(n=>jI(n),BI),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Lr=0,this.Br=new yu,this.targetCount=0,this.kr=_u.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),k.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new _u(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,k.resolve()}updateTargetData(e,n){return this.Kn(n),k.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),k.waitFor(s).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return k.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),k.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),k.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),k.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return k.resolve(r)}containsKey(e,n){return k.resolve(this.Br.containsKey(n))}};var tI=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new fN(0),this.Kr=!1,this.Kr=!0,this.$r=new Yv,this.referenceDelegate=e(this),this.Ur=new eI(this),this.indexManager=new Hv,this.remoteDocumentCache=function(i){return new Jv(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new $v(n),this.Gr=new Kv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Qv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Zv(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){B("MemoryPersistence","Starting transaction:",e);let i=new nI(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return k.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},nI=class extends fv{constructor(e){super(),this.currentSequenceNumber=e}},rI=class t{constructor(e){this.persistence=e,this.Jr=new yu,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),k.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),k.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Xr,r=>{let i=z.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,se.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return k.or([()=>k.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var iI=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=he(),i=he();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var sI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var oI=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return yC()?8:hz(At())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new sI;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(su()<=Rt.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",Ho(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),k.resolve()):(su()<=Rt.DEBUG&&B("QueryEngine","Query:",Ho(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(su()<=Rt.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",Ho(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ur(n))):k.resolve())}Yi(e,n){if($R(n))return k.resolve(null);let r=ur(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Av(n,null,"F"),r=ur(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=he(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(n,a);return this.ns(n,l,o,c.readTime)?this.Yi(e,Av(n,null,"F")):this.rs(e,l,n,c)}))})))}Zi(e,n,r,i){return $R(n)||i.isEqual(se.min())?k.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?k.resolve(null):(su()<=Rt.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ho(n)),this.rs(e,o,n,cz(i,-1)).next(a=>a))})}ts(e,n){let r=new xt(bN(e));return n.forEach((i,s)=>{Bf(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return su()<=Rt.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",Ho(n)),this.Ji.getDocumentsMatchingQuery(e,n,Is.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var aI=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Xe(Te),this._s=new bi(s=>jI(s),BI),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Wv(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function nG(t,e,n,r){return new aI(t,e,n,r)}function qN(t,e){return y(this,null,function*(){let n=re(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=he();for(let l of i){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function rG(t,e){let n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,g=f.keys(),_=k.resolve();return g.forEach(E=>{_=_.next(()=>d.getEntry(c,E)).next(R=>{let A=l.docVersions.get(E);Se(A!==null),R.version.compareTo(A)<0&&(f.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),d.addEntry(R)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=he();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function zN(t){let e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function iG(t,e){let n=re(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,f)));let _=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?_=_.withResumeToken(Pt.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,r)),i=i.insert(f,_),function(R,A,M){return R.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0}(g,_,d)&&a.push(n.Ur.updateTargetData(s,_))});let c=Vr(),l=he();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(sG(s,o,e.documentUpdates).next(d=>{c=d.Ps,l=d.Is})),!r.isEqual(se.min())){let d=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return k.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.os=i,s))}function sG(t,e,n){let r=he(),i=he();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Vr();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(se.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):B("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function oG(t,e){let n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function aG(t,e){let n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,k.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new mu(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function cI(t,e,n){return y(this,null,function*(){let r=re(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Du(o))throw o;B("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function XR(t,e,n){let r=re(t),i=se.min(),s=he();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){let f=re(c),g=f._s.get(d);return g!==void 0?k.resolve(f.os.get(g)):f.Ur.getTargetData(l,d)}(r,o,ur(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:se.min(),n?s:he())).next(a=>(cG(r,Tz(e),a),{documents:a,Ts:s})))}function cG(t,e,n){let r=t.us.get(e)||se.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var If=class{constructor(){this.activeTargetIds=Rz()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var uI=class{constructor(){this.so=new If,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new If,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var lI=class{_o(e){}shutdown(){}};var wf=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){B("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){B("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var rf=null;function nv(){return rf===null?rf=function(){return 268435456+Math.round(2147483648*Math.random())}():rf++,"0x"+rf.toString(16)}var uG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var dI=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Nt="WebChannelConnection",hI=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let a=nv(),c=this.xo(n,r.toUriEncodedString());B("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,c,l,i).then(d=>(B("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Qo("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+aa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=uG[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=nv();return new Promise((o,a)=>{let c=new Yy;c.setWithCredentials(!0),c.listenOnce(Zy.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case iu.NO_ERROR:let d=c.getResponseJson();B(Nt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case iu.TIMEOUT:B(Nt,`RPC '${e}' ${s} timed out`),a(new j(x.DEADLINE_EXCEEDED,"Request time out"));break;case iu.HTTP_ERROR:let f=c.getStatus();if(B(Nt,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let _=g?.error;if(_&&_.status&&_.message){let E=function(A){let M=A.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(M)>=0?M:x.UNKNOWN}(_.status);a(new j(E,_.message))}else a(new j(x.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new j(x.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{B(Nt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);B(Nt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=nv(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ev(),a=Xy(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let d=s.join("");B(Nt,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=o.createWebChannel(d,c),g=!1,_=!1,E=new dI({Io:A=>{_?B(Nt,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(g||(B(Nt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),B(Nt,`RPC '${e}' stream ${i} sending:`,A),f.send(A))},To:()=>f.close()}),R=(A,M,L)=>{A.listen(M,$=>{try{L($)}catch(G){setTimeout(()=>{throw G},0)}})};return R(f,$o.EventType.OPEN,()=>{_||(B(Nt,`RPC '${e}' stream ${i} transport opened.`),E.yo())}),R(f,$o.EventType.CLOSE,()=>{_||(_=!0,B(Nt,`RPC '${e}' stream ${i} transport closed`),E.So())}),R(f,$o.EventType.ERROR,A=>{_||(_=!0,Qo(Nt,`RPC '${e}' stream ${i} transport errored:`,A),E.So(new j(x.UNAVAILABLE,"The operation could not be completed")))}),R(f,$o.EventType.MESSAGE,A=>{var M;if(!_){let L=A.data[0];Se(!!L);let $=L,G=$.error||((M=$[0])===null||M===void 0?void 0:M.error);if(G){B(Nt,`RPC '${e}' stream ${i} received error:`,G);let Ne=G.status,Y=function(I){let C=ht[I];if(C!==void 0)return FN(C)}(Ne),T=G.message;Y===void 0&&(Y=x.INTERNAL,T="Unknown error status: "+Ne+" with message "+G.message),_=!0,E.So(new j(Y,T)),f.close()}else B(Nt,`RPC '${e}' stream ${i} received:`,L),E.bo(L)}}),R(a,Jy.STAT_EVENT,A=>{A.stat===tf.PROXY?B(Nt,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===tf.NOPROXY&&B(Nt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}};function rv(){return typeof document<"u"?document:null}function $f(t){return new Lv(t,!0)}var Ef=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Tf=class{constructor(e,n,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ef(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return y(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return y(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return y(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(Fr(n.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new j(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>y(this,null,function*(){this.state=0,this.start()}))}I_(e){return B("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(B("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},fI=class extends Tf{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=qz(this.serializer,e),r=function(s){if(!("targetChange"in s))return se.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?se.min():o.readTime?lr(o.readTime):se.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=Bv(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=Dv(c)?{documents:Wz(s,c)}:{query:Kz(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=LN(s,o.resumeToken);let l=Vv(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(se.min())>0){a.readTime=yf(s,o.snapshotVersion.toTimestamp());let l=Vv(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=Yz(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=Bv(this.serializer),n.removeTarget=e,this.a_(n)}},pI=class extends Tf{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Se(!!e.streamToken),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Se(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=Gz(e.writeResults,e.commitTime),r=lr(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=Bv(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>zz(this.serializer,r))};this.a_(n)}};var gI=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new j(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Uv(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(x.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Uv(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(x.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},mI=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Fr(n),this.D_=!1):B("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var _I=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>y(this,null,function*(){Ss(this)&&(B("RemoteStore","Restarting streams for network reachability change."),yield function(c){return y(this,null,function*(){let l=re(c);l.L_.add(4),yield Su(l),l.q_.set("Unknown"),l.L_.delete(4),yield Hf(l)})}(this))}))}),this.q_=new mI(r,i)}};function Hf(t){return y(this,null,function*(){if(Ss(t))for(let e of t.B_)yield e(!0)})}function Su(t){return y(this,null,function*(){for(let e of t.B_)yield e(!1)})}function GN(t,e){let n=re(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),KI(n)?WI(n):ua(n).r_()&&GI(n,e))}function zI(t,e){let n=re(t),r=ua(n);n.N_.delete(e),r.r_()&&WN(n,e),n.N_.size===0&&(r.r_()?r.o_():Ss(n)&&n.q_.set("Unknown"))}function GI(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ua(t).A_(e)}function WN(t,e){t.Q_.xe(e),ua(t).R_(e)}function WI(t){t.Q_=new Fv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ua(t).start(),t.q_.v_()}function KI(t){return Ss(t)&&!ua(t).n_()&&t.N_.size>0}function Ss(t){return re(t).L_.size===0}function KN(t){t.Q_=void 0}function lG(t){return y(this,null,function*(){t.q_.set("Online")})}function dG(t){return y(this,null,function*(){t.N_.forEach((e,n)=>{GI(t,e)})})}function hG(t,e){return y(this,null,function*(){KN(t),KI(t)?(t.q_.M_(e),WI(t)):t.q_.set("Unknown")})}function fG(t,e,n){return y(this,null,function*(){if(t.q_.set("Online"),e instanceof mf&&e.state===2&&e.cause)try{yield function(i,s){return y(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){B("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Cf(t,r)}else if(e instanceof Wo?t.Q_.Ke(e):e instanceof gf?t.Q_.He(e):t.Q_.We(e),!n.isEqual(se.min()))try{let r=yield zN(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.N_.get(l);d&&s.N_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(Pt.EMPTY_BYTE_STRING,d.snapshotVersion)),WN(s,c);let f=new mu(d.target,c,l,d.sequenceNumber);GI(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){B("RemoteStore","Failed to raise snapshot:",r),yield Cf(t,r)}})}function Cf(t,e,n){return y(this,null,function*(){if(!Du(e))throw e;t.L_.add(1),yield Su(t),t.q_.set("Offline"),n||(n=()=>zN(t.localStore)),t.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){B("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield Hf(t)}))})}function QN(t,e){return e().catch(n=>Cf(t,n,e))}function qf(t){return y(this,null,function*(){let e=re(t),n=Di(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;pG(e);)try{let i=yield oG(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,gG(e,i)}catch(i){yield Cf(e,i)}YN(e)&&ZN(e)})}function pG(t){return Ss(t)&&t.O_.length<10}function gG(t,e){t.O_.push(e);let n=Di(t);n.r_()&&n.V_&&n.m_(e.mutations)}function YN(t){return Ss(t)&&!Di(t).n_()&&t.O_.length>0}function ZN(t){Di(t).start()}function mG(t){return y(this,null,function*(){Di(t).p_()})}function _G(t){return y(this,null,function*(){let e=Di(t);for(let n of t.O_)e.m_(n.mutations)})}function yG(t,e,n){return y(this,null,function*(){let r=t.O_.shift(),i=Pv.from(r,e,n);yield QN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield qf(t)})}function vG(t,e){return y(this,null,function*(){e&&Di(t).V_&&(yield function(r,i){return y(this,null,function*(){if(function(o){return Fz(o)&&o!==x.ABORTED}(i.code)){let s=r.O_.shift();Di(r).s_(),yield QN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield qf(r)}})}(t,e)),YN(t)&&ZN(t)})}function eN(t,e){return y(this,null,function*(){let n=re(t);n.asyncQueue.verifyOperationInProgress(),B("RemoteStore","RemoteStore received new credentials");let r=Ss(n);n.L_.add(3),yield Su(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield Hf(n)})}function IG(t,e){return y(this,null,function*(){let n=re(t);e?(n.L_.delete(2),yield Hf(n)):e||(n.L_.add(2),yield Su(n),n.q_.set("Unknown"))})}function ua(t){return t.K_||(t.K_=function(n,r,i){let s=re(n);return s.w_(),new fI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:lG.bind(null,t),Ro:dG.bind(null,t),mo:hG.bind(null,t),d_:fG.bind(null,t)}),t.B_.push(e=>y(this,null,function*(){e?(t.K_.s_(),KI(t)?WI(t):t.q_.set("Unknown")):(yield t.K_.stop(),KN(t))}))),t.K_}function Di(t){return t.U_||(t.U_=function(n,r,i){let s=re(n);return s.w_(),new pI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:mG.bind(null,t),mo:vG.bind(null,t),f_:_G.bind(null,t),g_:yG.bind(null,t)}),t.B_.push(e=>y(this,null,function*(){e?(t.U_.s_(),yield qf(t)):(yield t.U_.stop(),t.O_.length>0&&(B("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var yI=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function QI(t,e){if(Fr("AsyncQueue",`${e}: ${t}`),Du(t))return new j(x.UNAVAILABLE,`${e}: ${t}`);throw t}var bf=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||z.comparator(n.key,r.key):(n,r)=>z.comparator(n.key,r.key),this.keyedMap=ou(),this.sortedSet=new Xe(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Df=class{constructor(){this.W_=new Xe(z.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},sa=class t{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,bf.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var vI=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},II=class{constructor(){this.queries=tN(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=re(n),s=i.queries;i.queries=tN(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new j(x.ABORTED,"Firestore shutting down"))}};function tN(){return new bi(t=>CN(t),jf)}function JN(t,e){return y(this,null,function*(){let n=re(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new vI,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=QI(o,`Initialization of query '${Ho(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&YI(n)})}function XN(t,e){return y(this,null,function*(){let n=re(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function wG(t,e){let n=re(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&YI(n)}function EG(t,e,n){let r=re(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function YI(t){t.Y_.forEach(e=>{e.next()})}var wI,nN;(nN=wI||(wI={})).ea="default",nN.Cache="cache";var Sf=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new sa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=sa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==wI.Cache}};var Af=class{constructor(e){this.key=e}},Rf=class{constructor(e){this.key=e}},EI=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=he(),this.mutatedKeys=he(),this.Aa=bN(e),this.Ra=new bf(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new Df,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),_=Bf(this.query,f)?f:null,E=!!g&&this.mutatedKeys.has(g.key),R=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),A=!1;g&&_?g.data.isEqual(_.data)?E!==R&&(r.track({type:3,doc:_}),A=!0):this.ga(g,_)||(r.track({type:2,doc:_}),A=!0,(c&&this.Aa(_,c)>0||l&&this.Aa(_,l)<0)&&(a=!0)):!g&&_?(r.track({type:0,doc:_}),A=!0):g&&!_&&(r.track({type:1,doc:g}),A=!0,(c||l)&&(a=!0)),A&&(_?(o=o.add(_),s=R?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,f)=>function(_,E){let R=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return R(_)-R(E)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new sa(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Df,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=he(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Rf(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Af(r))}),n}ba(e){this.Ta=e.Ts,this.da=he();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return sa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},TI=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},CI=class{constructor(e){this.key=e,this.va=!1}},bI=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new bi(a=>CN(a),jf),this.Ma=new Map,this.xa=new Set,this.Oa=new Xe(z.comparator),this.Na=new Map,this.La=new yu,this.Ba={},this.ka=new Map,this.qa=_u.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function TG(t,e,n=!0){return y(this,null,function*(){let r=sx(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield ex(r,e,n,!0),i})}function CG(t,e){return y(this,null,function*(){let n=sx(t);yield ex(n,e,!0,!1)})}function ex(t,e,n,r){return y(this,null,function*(){let i=yield aG(t.localStore,ur(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n),a;return r&&(a=yield bG(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&GN(t.remoteStore,i),a})}function bG(t,e,n,r,i){return y(this,null,function*(){t.Ka=(f,g,_)=>function(R,A,M,L){return y(this,null,function*(){let $=A.view.ma(M);$.ns&&($=yield XR(R.localStore,A.query,!1).then(({documents:T})=>A.view.ma(T,$)));let G=L&&L.targetChanges.get(A.targetId),Ne=L&&L.targetMismatches.get(A.targetId)!=null,Y=A.view.applyChanges($,R.isPrimaryClient,G,Ne);return iN(R,A.targetId,Y.wa),Y.snapshot})}(t,f,g,_);let s=yield XR(t.localStore,e,!0),o=new EI(e,s.Ts),a=o.ma(s.documents),c=gu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);iN(t,n,l.wa);let d=new TI(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function DG(t,e,n){return y(this,null,function*(){let r=re(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!jf(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield cI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&zI(r.remoteStore,i.targetId),DI(r,i.targetId)}).catch(bu))):(DI(r,i.targetId),yield cI(r.localStore,i.targetId,!0))})}function SG(t,e){return y(this,null,function*(){let n=re(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),zI(n.remoteStore,r.targetId))})}function AG(t,e,n){return y(this,null,function*(){let r=OG(t);try{let i=yield function(o,a){let c=re(o),l=_t.now(),d=a.reduce((_,E)=>_.add(E.key),he()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let E=Vr(),R=he();return c.cs.getEntries(_,d).next(A=>{E=A,E.forEach((M,L)=>{L.isValidDocument()||(R=R.add(M))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,E)).next(A=>{f=A;let M=[];for(let L of a){let $=Oz(L,f.get(L.key).overlayedDocument);$!=null&&M.push(new Ur(L.key,$,_N($.value.mapValue),Ei.exists(!0)))}return c.mutationQueue.addMutationBatch(_,l,M,a)}).next(A=>{g=A;let M=A.applyToLocalDocumentSet(f,R);return c.documentOverlayCache.saveOverlays(_,A.batchId,M)})}).then(()=>({batchId:g.batchId,changes:SN(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new Xe(Te)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Au(r,i.changes),yield qf(r.remoteStore)}catch(i){let s=QI(i,"Failed to persist write");n.reject(s)}})}function tx(t,e){return y(this,null,function*(){let n=re(t);try{let r=yield iG(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(Se(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Se(o.va):i.removedDocuments.size>0&&(Se(o.va),o.va=!1))}),yield Au(n,r,e)}catch(r){yield bu(r)}})}function rN(t,e,n){let r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=re(o);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&YI(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function RG(t,e,n){return y(this,null,function*(){let r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Xe(z.comparator);o=o.insert(s,Bn.newNoDocument(s,se.min()));let a=he().add(s),c=new pf(se.min(),new Map,new Xe(Te),o,a);yield tx(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),ZI(r)}else yield cI(r.localStore,e,!1).then(()=>DI(r,e,n)).catch(bu)})}function NG(t,e){return y(this,null,function*(){let n=re(t),r=e.batch.batchId;try{let i=yield rG(n.localStore,e);rx(n,r,null),nx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Au(n,i)}catch(i){yield bu(i)}})}function xG(t,e,n){return y(this,null,function*(){let r=re(t);try{let i=yield function(o,a){let c=re(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(Se(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);rx(r,e,n),nx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Au(r,i)}catch(i){yield bu(i)}})}function nx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function rx(t,e,n){let r=re(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function DI(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||ix(t,r)})}function ix(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(zI(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),ZI(t))}function iN(t,e,n){for(let r of n)r instanceof Af?(t.La.addReference(r.key,e),PG(t,r)):r instanceof Rf?(B("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||ix(t,r.key)):X()}function PG(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(B("SyncEngine","New document in limbo: "+n),t.xa.add(r),ZI(t))}function ZI(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new z(Ge.fromString(e)),r=t.qa.next();t.Na.set(r,new CI(n)),t.Oa=t.Oa.insert(n,r),GN(t.remoteStore,new mu(ur($I(n.path)),r,"TargetPurposeLimboResolution",fN.oe))}}function Au(t,e,n){return y(this,null,function*(){let r=re(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,n).then(l=>{var d;if((l||n)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=n?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(l){i.push(l);let f=iI.Wi(c.targetId,l);s.push(f)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return y(this,null,function*(){let d=re(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>k.forEach(l,g=>k.forEach(g.$i,_=>d.persistence.referenceDelegate.addReference(f,g.targetId,_)).next(()=>k.forEach(g.Ui,_=>d.persistence.referenceDelegate.removeReference(f,g.targetId,_)))))}catch(f){if(!Du(f))throw f;B("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let _=d.os.get(g),E=_.snapshotVersion,R=_.withLastLimboFreeSnapshotVersion(E);d.os=d.os.insert(g,R)}}})}(r.localStore,s))})}function MG(t,e){return y(this,null,function*(){let n=re(t);if(!n.currentUser.isEqual(e)){B("SyncEngine","User change. New user:",e.toKey());let r=yield qN(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new j(x.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Au(n,r.hs)}})}function kG(t,e){let n=re(t),r=n.Na.get(e);if(r&&r.va)return he().add(r.key);{let i=he(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function sx(t){let e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RG.bind(null,e),e.Ca.d_=wG.bind(null,e.eventManager),e.Ca.$a=EG.bind(null,e.eventManager),e}function OG(t){let e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=NG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xG.bind(null,e),e}var sN=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return y(this,null,function*(){this.serializer=$f(n.databaseInfo.databaseId),this.sharedClientState=this.Wa(n),this.persistence=this.Ga(n),yield this.persistence.start(),this.localStore=this.za(n),this.gcScheduler=this.ja(n,this.localStore),this.indexBackfillerScheduler=this.Ha(n,this.localStore)})}ja(n,r){return null}Ha(n,r){return null}za(n){return nG(this.persistence,new oI,n.initialUser,this.serializer)}Ga(n){return new tI(rI.Zr,this.serializer)}Wa(n){return new uI}terminate(){return y(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})();var FG=(()=>{class t{initialize(n,r){return y(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>rN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=MG.bind(null,this.syncEngine),yield IG(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new II}()}createDatastore(n){let r=$f(n.databaseInfo.databaseId),i=function(o){return new hI(o)}(n.databaseInfo);return function(o,a,c,l){return new gI(o,a,c,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,s,o,a,c){return new _I(i,s,o,a,c)}(this.localStore,this.datastore,n.asyncQueue,r=>rN(this.syncEngine,r,0),function(){return wf.D()?new wf:new lI}())}createSyncEngine(n,r){return function(s,o,a,c,l,d,f){let g=new bI(s,o,a,c,l,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return y(this,null,function*(){var n,r;yield function(s){return y(this,null,function*(){let o=re(s);B("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Su(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var Nf=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Fr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var SI=class{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=vt.UNAUTHENTICATED,this.clientId=cf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>y(this,null,function*(){B("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(B("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=QI(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function iv(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),B("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield qN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function oN(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield LG(t);B("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>eN(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>eN(e.remoteStore,i)),t._onlineComponents=e})}function LG(t){return y(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){B("FirestoreClient","Using user provided OfflineComponentProvider");try{yield iv(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Qo("Error using user provided cache. Falling back to memory cache: "+n),yield iv(t,new sN)}}else B("FirestoreClient","Using default OfflineComponentProvider"),yield iv(t,new sN);return t._offlineComponents})}function ox(t){return y(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(B("FirestoreClient","Using user provided OnlineComponentProvider"),yield oN(t,t._uninitializedComponentsProvider._online)):(B("FirestoreClient","Using default OnlineComponentProvider"),yield oN(t,new FG))),t._onlineComponents})}function VG(t){return ox(t).then(e=>e.syncEngine)}function AI(t){return y(this,null,function*(){let e=yield ox(t),n=e.eventManager;return n.onListen=TG.bind(null,e.syncEngine),n.onUnlisten=DG.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=CG.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=SG.bind(null,e.syncEngine),n})}function UG(t,e,n={}){let r=new ar;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(s,o,a,c,l){let d=new Nf({next:g=>{d.Za(),o.enqueueAndForget(()=>XN(s,f)),g.fromCache&&c.source==="server"?l.reject(new j(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Sf(a,d,{includeMetadataChanges:!0,_a:!0});return JN(s,f)}(yield AI(t),t.asyncQueue,e,n,r)})),r.promise}function ax(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var aN=new Map;function cx(t,e,n){if(!n)throw new j(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function jG(t,e,n,r){if(e===!0&&r===!0)throw new j(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function cN(t){if(!z.isDocumentKey(t))throw new j(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uN(t){if(z.isDocumentKey(t))throw new j(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function zf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function Or(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new j(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=zf(t);throw new j(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var xf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new j(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new j(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ax((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new j(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new j(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new j(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},oa=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xf({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new j(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new sv;switch(r.type){case"firstParty":return new uv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return y(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=aN.get(n);r&&(B("ComponentProvider","Removing Datastore"),aN.delete(n),r.terminate())}(this),Promise.resolve()}};function ux(t,e,n,r={}){var i;let s=(t=Or(t,oa))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=vt.MOCK_USER;else{a=Hs(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new j(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new vt(l)}t._authCredentials=new ov(new af(a,c))}}var Ds=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Xt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ti(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Ti=class t extends Ds{constructor(e,n,r){super(e,n,$I(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Xt(this.firestore,null,new z(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function lx(t,e,...n){if(t=fe(t),cx("collection","path",e),t instanceof oa){let r=Ge.fromString(e,...n);return uN(r),new Ti(t,null,r)}{if(!(t instanceof Xt||t instanceof Ti))throw new j(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ge.fromString(e,...n));return uN(r),new Ti(t.firestore,null,r)}}function dx(t,e,...n){if(t=fe(t),arguments.length===1&&(e=cf.newId()),cx("doc","path",e),t instanceof oa){let r=Ge.fromString(e,...n);return cN(r),new Xt(t,null,new z(r))}{if(!(t instanceof Xt||t instanceof Ti))throw new j(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ge.fromString(e,...n));return cN(r),new Xt(t.firestore,t instanceof Ti?t.converter:null,new z(r))}}var Pf=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ef(this,"async_queue_retry"),this.Vu=()=>{let r=rv();r&&B("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=rv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=rv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new ar;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return y(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Du(e))throw e;B("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Fr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=yI.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&X()}verifyOperationInProgress(){}wu(){return y(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};function lN(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Si=class extends oa{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Pf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return y(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Pf(e),this._firestoreClient=void 0,yield e}})}};function hx(t,e){let n=typeof t=="object"?t:ct(),r=typeof t=="string"?t:e||"(default)",i=at(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Yr("firestore");s&&ux(i,...s)}return i}function JI(t){if(t._terminated)throw new j(x.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||BG(t),t._firestoreClient}function BG(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,l,d){return new pv(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,ax(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new SI(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(t._componentsProvider))}var vu=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Pt.fromBase64String(e))}catch(n){throw new j(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Iu=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new j(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Mf=class{constructor(e){this._methodName=e}};var wu=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new j(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new j(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}};var Eu=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var $G=/^__.*__$/,RI=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ur(e,this.data,this.fieldMask,n,this.fieldTransforms):new bs(e,this.data,n,this.fieldTransforms)}};function fx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}var NI=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return kf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(fx(this.Cu)&&$G.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},xI=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$f(e)}Qu(e,n,r,i=!1){return new NI({Cu:e,methodName:n,qu:r,path:pn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function px(t){let e=t._freezeSettings(),n=$f(t._databaseId);return new xI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function HG(t,e,n,r,i,s={}){let o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);_x("Data must be an object, but it was:",o,r);let a=gx(r,o),c,l;if(s.merge)c=new or(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let f of s.mergeFields){let g=zG(e,f,n);if(!o.contains(g))throw new j(x.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);WG(d,g)||d.push(g)}c=new or(d),l=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=o.fieldTransforms;return new RI(new jn(a),c,l)}function qG(t,e,n,r=!1){return XI(n,t.Qu(r?4:3,e))}function XI(t,e){if(mx(t=fe(t)))return _x("Unsupported field value:",e,t),gx(t,e);if(t instanceof Mf)return function(r,i){if(!fx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=XI(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Nz(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=_t.fromDate(r);return{timestampValue:yf(i.serializer,s)}}if(r instanceof _t){let s=new _t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yf(i.serializer,s)}}if(r instanceof wu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vu)return{bytesValue:LN(i.serializer,r._byteString)};if(r instanceof Xt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:qI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Eu)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return HI(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${zf(r)}`)}(t,e)}function gx(t,e){let n={};return pN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ca(t,(r,i)=>{let s=XI(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function mx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof wu||t instanceof vu||t instanceof Xt||t instanceof Mf||t instanceof Eu)}function _x(t,e,n){if(!mx(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=zf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function zG(t,e,n){if((e=fe(e))instanceof Iu)return e._internalPath;if(typeof e=="string")return yx(t,e);throw kf("Field path arguments must be of type string or ",t,!1,void 0,n)}var GG=new RegExp("[~\\*/\\[\\]]");function yx(t,e,n){if(e.search(GG)>=0)throw kf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Iu(...e.split("."))._internalPath}catch{throw kf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function kf(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new j(x.INVALID_ARGUMENT,a+t+c)}function WG(t,e){return t.some(n=>n.isEqual(e))}var Of=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new PI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(ew("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},PI=class extends Of{data(){return super.data()}};function ew(t,e){return typeof e=="string"?yx(t,e):e instanceof Iu?e._internalPath:e._delegate._internalPath}function vx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new j(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Tu=class{},MI=class extends Tu{};function Ix(t,e,...n){let r=[];e instanceof Tu&&r.push(e),r=r.concat(n),function(s){let o=s.filter(c=>c instanceof kI).length,a=s.filter(c=>c instanceof Ff).length;if(o>1||o>0&&a>0)throw new j(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Ff=class t extends MI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return Ex(e._query,n),new Ds(e.firestore,e.converter,Sv(e._query,n))}_parse(e){let n=px(e.firestore);return function(s,o,a,c,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new j(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){hN(f,d);let _=[];for(let E of f)_.push(dN(c,s,E));g={arrayValue:{values:_}}}else g=dN(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||hN(f,d),g=qG(a,o,f,d==="in"||d==="not-in");return pt.create(l,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function wx(t,e,n){let r=e,i=ew("where",t);return Ff._create(i,r,n)}var kI=class t extends Tu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:$n.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)Ex(o,c),o=Sv(o,c)}(e._query,n),new Ds(e.firestore,e.converter,Sv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function dN(t,e,n){if(typeof(n=fe(n))=="string"){if(n==="")throw new j(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TN(e)&&n.indexOf("/")!==-1)throw new j(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Ge.fromString(n));if(!z.isDocumentKey(r))throw new j(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return FR(t,new z(r))}if(n instanceof Xt)return FR(t,n._key);throw new j(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zf(n)}.`)}function hN(t,e){if(!Array.isArray(t)||t.length===0)throw new j(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ex(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new j(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new j(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var OI=class{convertValue(e,n="none"){switch(ws(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ci(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return ca(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>He(o.doubleValue));return new Eu(s)}convertGeoPoint(e){return new wu(He(e.latitude),He(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=VI(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(hu(e));default:return null}}convertTimestamp(e){let n=Lr(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ge.fromString(e);Se(HN(r));let i=new hf(r.get(1),r.get(3)),s=new z(r.popFirst(5));return i.isEqual(n)||Fr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function KG(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var ys=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Lf=class extends Of{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ko(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(ew("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Ko=class extends Lf{data(e={}){return super.data(e)}},Vf=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ys(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ko(this._firestore,this._userDataWriter,r.key,r,new ys(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new j(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Ko(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ys(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Ko(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ys(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:QG(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function QG(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}var Cu=class extends OI{constructor(e){super(),this.firestore=e}convertBytes(e){return new vu(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xt(this.firestore,null,n)}};function Tx(t){t=Or(t,Ds);let e=Or(t.firestore,Si),n=JI(e),r=new Cu(e);return vx(t._query),UG(n,t._query).then(i=>new Vf(e,r,t,i))}function Cx(t,e,n){t=Or(t,Xt);let r=Or(t.firestore,Si),i=KG(t.converter,e,n);return Dx(r,[HG(px(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ei.none())])}function bx(t){return Dx(Or(t.firestore,Si),[new pu(t._key,Ei.none())])}function tw(t,...e){var n,r,i;t=fe(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||lN(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(lN(e[o])){let f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,l,d;if(t instanceof Xt)l=Or(t.firestore,Si),d=$I(t._key.path),c={next:f=>{e[o]&&e[o](YG(l,t,f))},error:e[o+1],complete:e[o+2]};else{let f=Or(t,Ds);l=Or(f.firestore,Si),d=f._query;let g=new Cu(l);c={next:_=>{e[o]&&e[o](new Vf(l,g,f,_))},error:e[o+1],complete:e[o+2]},vx(t._query)}return function(g,_,E,R){let A=new Nf(R),M=new Sf(_,A,E);return g.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return JN(yield AI(g),M)})),()=>{A.Za(),g.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return XN(yield AI(g),M)}))}}(JI(l),d,a,c)}function Dx(t,e){return function(r,i){let s=new ar;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return AG(yield VG(r),i,s)})),s.promise}(JI(t),e)}function YG(t,e,n){let r=n.docs.get(e._key),i=new Cu(t);return new Lf(t,i,e._key,r,new ys(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){aa=i})(Kt),tt(new et("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Si(new av(r.getProvider("auth-internal")),new dv(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new j(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hf(l.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),q(PR,"4.7.3",e),q(PR,"4.7.3","esm2017")})();var Gf=function(){return Gf=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Gf.apply(this,arguments)};var XG={includeMetadataChanges:!1};function Sx(t,e){return e===void 0&&(e=XG),new ae(function(n){var r=tw(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function Ax(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Gf(Gf({},r),(n={},n[e.idField]=t.id,n))}function Rx(t){return Sx(t,{includeMetadataChanges:!0}).pipe(Q(function(e){return e.docs}))}function Nx(t,e){return e===void 0&&(e={}),Rx(t).pipe(Q(function(n){return n.map(function(r){return Ax(r,e)})}))}var As=class{constructor(e){return e}},xx="firestore",nw=class{constructor(){return ot(xx)}};var rw=new U("angularfire2.firestore-instances");function eW(t,e){let n=dt(xx,t,e);return n&&new As(n)}function tW(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new As(r)}}var nW={provide:nw,deps:[[new te,rw]]},rW={provide:As,useFactory:eW,deps:[[new te,rw],Be]};function Px(t,...e){return q("angularfire",je.full,"fst"),Oe([rW,nW,{provide:rw,useFactory:tW(t),multi:!0,deps:[Z,me,Je,ze,[new te,Un],[new te,Jt],...e]}])}var la=we(Nx,!0);var da=we(lx,!0);var Mx=we(bx,!0);var Wf=we(dx,!0);var iw=we(Tx,!0);var kx=we(hx,!0);var Ox=we(Ix,!0);var sw=we(Cx,!0);var Fx=we(wx,!0);var Lx="@firebase/database",Vx="1.0.8";var rE="";function iW(t){rE=t}var fw=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),yt(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:vl(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var pw=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Kn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var mP=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new fw(e)}}catch{}return new pw},Ns=mP("localStorage"),gw=mP("sessionStorage");var ga=new Qn("@firebase/database"),sW=function(){let t=1;return function(){return t++}}(),_P=function(t){let e=CC(t),n=new wC;n.update(e);let r=n.digest();return dC.encodeByteArray(r)},Bu=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Bu.apply(null,r):typeof r=="object"?e+=yt(r):e+=r,e+=" "}return e},xs=null,Ux=!0,oW=function(t,e){F(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(ga.logLevel=Rt.VERBOSE,xs=ga.log.bind(ga),e&&gw.set("logging_enabled",!0)):typeof t=="function"?xs=t:(xs=null,gw.remove("logging_enabled"))},Mt=function(...t){if(Ux===!0&&(Ux=!1,xs===null&&gw.get("logging_enabled")===!0&&oW(!0)),xs){let e=Bu.apply(null,t);xs(e)}},$u=function(t){return function(...e){Mt(t,...e)}},mw=function(...t){let e="FIREBASE INTERNAL ERROR: "+Bu(...t);ga.error(e)},Br=function(...t){let e=`FIREBASE FATAL ERROR: ${Bu(...t)}`;throw ga.error(e),new Error(e)},gn=function(...t){let e="FIREBASE WARNING: "+Bu(...t);ga.warn(e)},aW=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&gn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},yP=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},cW=function(t){if(Gn()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},_a="[MIN_NAME]",Ps="[MAX_NAME]",Ca=function(t,e){if(t===e)return 0;if(t===_a||e===Ps)return-1;if(e===_a||t===Ps)return 1;{let n=jx(t),r=jx(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},uW=function(t,e){return t===e?0:t<e?-1:1},Ru=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+yt(e))},iE=function(t){if(typeof t!="object"||t===null)return yt(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=yt(e[r]),n+=":",n+=iE(t[e[r]]);return n+="}",n},vP=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function An(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var IP=function(t){F(!yP(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let d=l.join(""),f="";for(c=0;c<64;c+=8){let g=parseInt(d.substr(c,8),2).toString(16);g.length===1&&(g="0"+g),f=f+g}return f.toLowerCase()},lW=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},dW=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var hW=new RegExp("^-?(0*)\\d{1,10}$"),fW=-2147483648,pW=2147483647,jx=function(t){if(hW.test(t)){let e=Number(t);if(e>=fW&&e<=pW)return e}return null},Hu=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw gn("Exception was thrown by user callback.",n),e},Math.floor(0))}},gW=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ku=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var _w=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){gn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var yw=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Mt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',gn(e)}},Ou=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),Qf="5",wP="v",EP="s",TP="r",CP="f",bP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,DP="ls",SP="p",vw="ac",AP="websocket",RP="long_polling";var Yf=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ns.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ns.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function mW(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function NP(t,e,n){F(typeof e=="string","typeof type must == string"),F(typeof n=="object","typeof params must == object");let r;if(e===AP)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===RP)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);mW(t)&&(n.ns=t.namespace);let i=[];return An(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var Iw=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Kn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return pC(this.counters_)}};var ow={},aw={};function sE(t){let e=t.toString();return ow[e]||(ow[e]=new Iw),ow[e]}function _W(t,e){let n=t.toString();return aw[n]||(aw[n]=e()),aw[n]}var ww=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Hu(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var Bx="start",yW="close",vW="pLPCommand",IW="pRTLPCB",xP="id",PP="pw",MP="ser",wW="cb",EW="seg",TW="ts",CW="d",bW="dframe",kP=1870,OP=30,DW=kP-OP,SW=25e3,AW=3e4,Ew=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$u(e),this.stats_=sE(n),this.urlFn=c=>(this.appCheckToken&&(c[vw]=this.appCheckToken),NP(n,RP,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new ww(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(AW)),cW(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Tw((...s)=>{let[o,a,c,l,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Bx)this.id=a,this.password=c;else if(o===yW)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[Bx]="t",r[MP]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[wW]=this.scriptTagHolder.uniqueCallbackIdentifier),r[wP]=Qf,this.transportSessionId&&(r[EP]=this.transportSessionId),this.lastSessionId&&(r[DP]=this.lastSessionId),this.applicationId&&(r[SP]=this.applicationId),this.appCheckToken&&(r[vw]=this.appCheckToken),typeof location<"u"&&location.hostname&&bP.test(location.hostname)&&(r[TP]=CP);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Gn()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!lW()&&!dW()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=yt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=hC(n),i=vP(r,DW);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Gn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[bW]="t",r[xP]=e,r[PP]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=yt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Tw=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Gn())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=sW(),window[vW+this.uniqueCallbackIdentifier]=e,window[IW+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Mt("frame writing exception"),a.stack&&Mt(a.stack),Mt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Mt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[xP]=this.myID,e[PP]=this.myPW,e[MP]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+OP+r.length<=kP;){let o=this.pendingSegs.shift();r=r+"&"+EW+i+"="+o.seg+"&"+TW+i+"="+o.ts+"&"+CW+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(SW)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){Gn()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Mt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var RW=16384,NW=45e3,Zf=null;typeof MozWebSocket<"u"?Zf=MozWebSocket:typeof WebSocket<"u"&&(Zf=WebSocket);var Nu=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$u(this.connId),this.stats_=sE(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[wP]=Qf,!Gn()&&typeof location<"u"&&location.hostname&&bP.test(location.hostname)&&(a[TP]=CP),r&&(a[EP]=r),i&&(a[DP]=i),s&&(a[vw]=s),o&&(a[SP]=o),NP(n,AP,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ns.set("previous_websocket_failure",!0);try{let i;if(Gn()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Qf}/${rE}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Zf(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Zf!==null&&!t.forceDisallow_}static previouslyFailed(){return Ns.isInMemoryStorage||Ns.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ns.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=vl(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(F(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=yt(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=vP(r,RW);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(NW))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),xW=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Ew,Nu]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Nu&&Nu.isAvailable(),i=r&&!Nu.previouslyFailed();if(n.webSocketOnly&&(r||gn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Nu];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),PW=6e4,MW=5e3,kW=10*1024,OW=100*1024,cw="t",$x="d",FW="s",Hx="r",LW="e",qx="o",zx="a",Gx="n",Wx="p",VW="h",Cw=class{constructor(e,n,r,i,s,o,a,c,l,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$u("c:"+this.id+":"),this.transportManager_=new xW(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ku(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>OW?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>kW?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(cw in e){let n=e[cw];n===zx?this.upgradeIfSecondaryHealthy_():n===Hx?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===qx&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Ru("t",e),r=Ru("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Wx,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:zx,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Gx,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Ru("t",e),r=Ru("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Ru(cw,e);if($x in e){let r=e[$x];if(n===VW){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Gx){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===FW?this.onConnectionShutdown_(r):n===Hx?this.onReset_(r):n===LW?mw("Server Error: "+r):n===qx?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):mw("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Qf!==r&&gn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ku(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(PW))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ku(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(MW))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Wx,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ns.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Jf=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var Xf=class{constructor(e){this.allowedEvents_=e,this.listeners_={},F(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){F(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var ep=class t extends Xf{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ka()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return F(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var Kx=32,Qx=768,ke=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Re(){return new ke("")}function ve(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ri(t){return t.pieces_.length-t.pieceNum_}function $e(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ke(t.pieces_,e)}function FP(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function UW(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function LP(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function VP(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ke(e,0)}function It(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ke)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ke(n,0)}function _e(t){return t.pieceNum_>=t.pieces_.length}function Dn(t,e){let n=ve(t),r=ve(e);if(n===null)return e;if(n===r)return Dn($e(t),$e(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function UP(t,e){if(Ri(t)!==Ri(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function qn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Ri(t)>Ri(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var bw=class{constructor(e,n){this.errorPrefix_=n,this.parts_=LP(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=ec(this.parts_[r]);jP(this)}};function jW(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=ec(e),jP(t)}function BW(t){let e=t.parts_.pop();t.byteLength_-=ec(e),t.parts_.length>0&&(t.byteLength_-=1)}function jP(t){if(t.byteLength_>Qx)throw new Error(t.errorPrefix_+"has a key path longer than "+Qx+" bytes ("+t.byteLength_+").");if(t.parts_.length>Kx)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Kx+") or object contains a cycle "+Rs(t))}function Rs(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var Dw=class t extends Xf{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return F(e==="visible","Unknown event type: "+e),[this.visible_]}};var xu=1e3,$W=60*5*1e3,Yx=30*1e3,HW=1.3,qW=3e4,zW="server_kill",Zx=3,oE=(()=>{class t extends Jf{constructor(n,r,i,s,o,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=$u("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=xu,this.maxReconnectDelay_=$W,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Gn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Dw.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&ep.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(yt(o)),F(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new Qp,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),F(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),F(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,d=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(d,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Kn(n,"w")){let i=Vi(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();gn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||IC(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Yx)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=vC(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),F(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+yt(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):mw("Unrecognized action received from server: "+yt(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){F(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=xu,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=xu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>qW&&(this.reconnectDelay_=xu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*HW)}this.onConnectStatus_(!1)}establishConnection_(){return y(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},d=function(g){F(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(g)};this.realtime_={close:l,sendRequest:d};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[g,_]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?Mt("getToken() completed but was canceled"):(Mt("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=_&&_.token,c=new Cw(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,E=>{gn(E+" ("+this.repoInfo_.toString()+")"),this.interrupt(zW)},o))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&gn(g),l())}}})}interrupt(n){Mt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Mt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Za(this.interruptReasons_)&&(this.reconnectDelay_=xu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>iE(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new ke(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){Mt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Zx&&(this.reconnectDelay_=Yx,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Mt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Zx&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Gn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+rE.replace(/\./g,"-")]=1,Ka()?n["framework.cordova"]=1:yl()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=ep.getInstance().currentlyOnline();return Za(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),Ie=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var ya=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new Ie(_a,e),i=new Ie(_a,n);return this.compare(r,i)!==0}minPost(){return Ie.MIN}};var Kf,tp=class extends ya{static get __EMPTY_NODE(){return Kf}static set __EMPTY_NODE(e){Kf=e}compare(e,n){return Ca(e.name,n.name)}isDefinedOn(e){throw $s("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ie.MIN}maxPost(){return new Ie(Ps,Kf)}makePost(e,n){return F(typeof e=="string","KeyIndex indexValue must always be a string."),new Ie(e,Kf)}toString(){return".key"}},ma=new tp;var fa=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Hn=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??Sn.EMPTY_NODE,this.right=o??Sn.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Sn.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Sn.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),Sw=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new Hn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Sn=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Hn.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Hn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new fa(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new fa(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new fa(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new fa(this.root_,null,this.comparator_,!0,e)}};Sn.EMPTY_NODE=new Sw;function GW(t,e){return Ca(t.name,e.name)}function aE(t,e){return Ca(t,e)}var Aw;function WW(t){Aw=t}var BP=function(t){return typeof t=="number"?"number:"+IP(t):"string:"+t},$P=function(t){if(t.isLeafNode()){let e=t.val();F(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Kn(e,".sv"),"Priority must be a string or number.")}else F(t===Aw||t.isEmpty(),"priority of unexpected type.");F(t===Aw||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Jx,va=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,F(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),$P(this.priorityNode_)}static set __childrenNodeConstructor(n){Jx=n}static get __childrenNodeConstructor(){return Jx}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return _e(n)?this:ve(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=ve(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(F(i!==".priority"||Ri(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild($e(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+BP(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=IP(this.value_):n+=this.value_,this.lazyHash_=_P(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(F(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return F(s>=0,"Unknown leaf type: "+r),F(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),HP,qP;function KW(t){HP=t}function QW(t){qP=t}var Rw=class extends ya{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Ca(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ie.MIN}maxPost(){return new Ie(Ps,new va("[PRIORITY-POST]",qP))}makePost(e,n){let r=HP(e);return new Ie(n,new va("[PRIORITY-POST]",r))}toString(){return".priority"}},Ot=new Rw;var YW=Math.log(2),Nw=class{constructor(e){let n=s=>parseInt(Math.log(s)/YW,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},np=function(t,e,n,r){t.sort(e);let i=function(c,l){let d=l-c,f,g;if(d===0)return null;if(d===1)return f=t[c],g=n?n(f):f,new Hn(g,f.node,Hn.BLACK,null,null);{let _=parseInt(d/2,10)+c,E=i(c,_),R=i(_+1,l);return f=t[_],g=n?n(f):f,new Hn(g,f.node,Hn.BLACK,E,R)}},s=function(c){let l=null,d=null,f=t.length,g=function(E,R){let A=f-E,M=f;f-=E;let L=i(A+1,M),$=t[A],G=n?n($):$;_(new Hn(G,$.node,R,null,L))},_=function(E){l?(l.left=E,l=E):(d=E,l=E)};for(let E=0;E<c.count;++E){let R=c.nextBitIsOne(),A=Math.pow(2,c.count-(E+1));R?g(A,Hn.BLACK):(g(A,Hn.BLACK),g(A,Hn.RED))}return d},o=new Nw(t.length),a=s(o);return new Sn(r||e,a)};var uw,ha={},Ia=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return F(ha&&Ot,"ChildrenNode.ts has not been loaded"),uw=uw||new t({".priority":ha},{".priority":Ot}),uw}get(e){let n=Vi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Sn?n:null}hasIndex(e){return Kn(this.indexSet_,e.toString())}addIndex(e,n){F(e!==ma,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(Ie.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=np(r,e.getCompare()):a=ha;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new t(d,l)}addToIndexes(e,n){let r=Ja(this.indexes_,(i,s)=>{let o=Vi(this.indexSet_,s);if(F(o,"Missing index implementation for "+s),i===ha)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(Ie.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),np(a,o.getCompare())}else return ha;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new Ie(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Ja(this.indexes_,i=>{if(i===ha)return i;{let s=n.get(e.name);return s?i.remove(new Ie(e.name,s)):i}});return new t(r,this.indexSet_)}};var Pu,We=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&$P(this.priorityNode_),this.children_.isEmpty()&&F(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Pu||(Pu=new t(new Sn(aE),null,Ia.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Pu}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Pu:r}}getChild(n){let r=ve(n);return r===null?this:this.getImmediateChild(r).getChild($e(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(F(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new Ie(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Pu:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=ve(n);if(i===null)return r;{F(ve(n)!==".priority"||Ri(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild($e(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(Ot,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+BP(this.getPriority().val())+":"),this.forEachChild(Ot,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":_P(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new Ie(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new Ie(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new Ie(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,Ie.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,Ie.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===qu?-1:0}withIndex(n){if(n===ma||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===ma||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Ot),s=r.getIterator(Ot),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===ma?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),xw=class extends We{constructor(){super(new Sn(aE),We.EMPTY_NODE,Ia.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return We.EMPTY_NODE}isEmpty(){return!1}},qu=new xw;Object.defineProperties(Ie,{MIN:{value:new Ie(_a,We.EMPTY_NODE)},MAX:{value:new Ie(Ps,qu)}});tp.__EMPTY_NODE=We.EMPTY_NODE;va.__childrenNodeConstructor=We;WW(qu);QW(qu);var ZW=!0;function kt(t,e=null){if(t===null)return We.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),F(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new va(n,kt(e))}if(!(t instanceof Array)&&ZW){let n=[],r=!1;if(An(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=kt(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Ie(o,c)))}}),n.length===0)return We.EMPTY_NODE;let s=np(n,GW,o=>o.name,aE);if(r){let o=np(n,Ot.getCompare());return new We(s,kt(e),new Ia({".priority":o},{".priority":Ot}))}else return new We(s,kt(e),Ia.Default)}else{let n=We.EMPTY_NODE;return An(t,(r,i)=>{if(Kn(t,r)&&r.substring(0,1)!=="."){let s=kt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(kt(e))}}KW(kt);var Pw=class extends ya{constructor(e){super(),this.indexPath_=e,F(!_e(e)&&ve(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Ca(e.name,n.name):s}makePost(e,n){let r=kt(e),i=We.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ie(n,i)}maxPost(){let e=We.EMPTY_NODE.updateChild(this.indexPath_,qu);return new Ie(Ps,e)}toString(){return LP(this.indexPath_,0).join("/")}};var Mw=class extends ya{compare(e,n){let r=e.node.compareTo(n.node);return r===0?Ca(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ie.MIN}maxPost(){return Ie.MAX}makePost(e,n){let r=kt(e);return new Ie(n,r)}toString(){return".value"}},JW=new Mw;function XW(t){return{type:"value",snapshotNode:t}}function e4(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function t4(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Xx(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function n4(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var kw=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ot}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return F(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return F(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:_a}hasEnd(){return this.endSet_}getIndexEndValue(){return F(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return F(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ps}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return F(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ot}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function eP(t){let e={};if(t.isDefault())return e;let n;if(t.index_===Ot?n="$priority":t.index_===JW?n="$value":t.index_===ma?n="$key":(F(t.index_ instanceof Pw,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=yt(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=yt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+yt(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=yt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+yt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function tP(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ot&&(e.i=t.index_.toString()),e}var Ow=class t extends Jf{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=$u("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(F(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=eP(e._queryParams);this.restRequest_(s+".json",c,(l,d)=>{let f=d;if(l===404&&(f=null,l=null),l===null&&this.onDataUpdate_(s,f,!1,r),Vi(this.listens_,o)===a){let g;l?l===401?g="permission_denied":g="rest_error:"+l:g="ok",i(g,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=eP(e._queryParams),r=e._path.toString(),i=new Qp;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ui(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=vl(a.responseText)}catch{gn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&gn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var Fw=class{constructor(){this.rootNode_=We.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function rp(){return{value:null,children:new Map}}function zP(t,e,n){if(_e(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=ve(e);t.children.has(r)||t.children.set(r,rp());let i=t.children.get(r);e=$e(e),zP(i,e,n)}}function Lw(t,e,n){t.value!==null?n(e,t.value):r4(t,(r,i)=>{let s=new ke(e.toString()+"/"+r);Lw(i,s,n)})}function r4(t,e){t.children.forEach((n,r)=>{e(r,n)})}var Vw=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&An(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var nP=10*1e3,i4=30*1e3,s4=5*60*1e3,Uw=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Vw(e);let r=nP+(i4-nP)*Math.random();ku(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;An(e,(i,s)=>{s>0&&Kn(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),ku(this.reportStats_.bind(this),Math.floor(Math.random()*2*s4))}};var jr=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(jr||{});function GP(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function WP(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function KP(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var jw=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=jr.ACK_USER_WRITE,this.source=GP()}operationForChild(e){if(_e(this.path)){if(this.affectedTree.value!=null)return F(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new ke(e));return new t(Re(),n,this.revert)}}else return F(ve(this.path)===e,"operationForChild called for unrelated child."),new t($e(this.path),this.affectedTree,this.revert)}};var wa=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=jr.OVERWRITE}operationForChild(e){return _e(this.path)?new t(this.source,Re(),this.snap.getImmediateChild(e)):new t(this.source,$e(this.path),this.snap)}};var ip=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=jr.MERGE}operationForChild(e){if(_e(this.path)){let n=this.children.subtree(new ke(e));return n.isEmpty()?null:n.value?new wa(this.source,Re(),n.value):new t(this.source,Re(),n)}else return F(ve(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,$e(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Vu=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(_e(e))return this.isFullyInitialized()&&!this.filtered_;let n=ve(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function o4(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(n4(o.childName,o.snapshotNode))}),Mu(t,i,"child_removed",e,r,n),Mu(t,i,"child_added",e,r,n),Mu(t,i,"child_moved",s,r,n),Mu(t,i,"child_changed",e,r,n),Mu(t,i,"value",e,r,n),i}function Mu(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>c4(t,a,c)),o.forEach(a=>{let c=a4(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function a4(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function c4(t,e,n){if(e.childName==null||n.childName==null)throw $s("Should only compare child_ events.");let r=new Ie(e.childName,e.snapshotNode),i=new Ie(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function QP(t,e){return{eventCache:t,serverCache:e}}function Fu(t,e,n,r){return QP(new Vu(e,n,r),t.serverCache)}function YP(t,e,n,r){return QP(t.eventCache,new Vu(e,n,r))}function Bw(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ms(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var lw,u4=()=>(lw||(lw=new Sn(uW)),lw),en=class t{constructor(e,n=u4()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return An(e,(r,i)=>{n=n.set(new ke(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Re(),value:this.value};if(_e(e))return null;{let r=ve(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue($e(e),n);return s!=null?{path:It(new ke(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(_e(e))return this;{let n=ve(e),r=this.children.get(n);return r!==null?r.subtree($e(e)):new t(null)}}set(e,n){if(_e(e))return new t(n,this.children);{let r=ve(e),s=(this.children.get(r)||new t(null)).set($e(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(_e(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=ve(e),r=this.children.get(n);if(r){let i=r.remove($e(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(_e(e))return this.value;{let n=ve(e),r=this.children.get(n);return r?r.get($e(e)):null}}setTree(e,n){if(_e(e))return n;{let r=ve(e),s=(this.children.get(r)||new t(null)).setTree($e(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(Re(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(It(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Re(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(_e(e))return null;{let s=ve(e),o=this.children.get(s);return o?o.findOnPath_($e(e),It(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Re(),n)}foreachOnPath_(e,n,r){if(_e(e))return this;{this.value&&r(n,this.value);let i=ve(e),s=this.children.get(i);return s?s.foreachOnPath_($e(e),It(n,i),r):new t(null)}}foreach(e){this.foreach_(Re(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(It(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var zn=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new en(null))}};function Lu(t,e,n){if(_e(e))return new zn(new en(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=Dn(i,e);return s=s.updateChild(o,n),new zn(t.writeTree_.set(i,s))}else{let i=new en(n),s=t.writeTree_.setTree(e,i);return new zn(s)}}}function rP(t,e,n){let r=t;return An(n,(i,s)=>{r=Lu(r,It(e,i),s)}),r}function iP(t,e){if(_e(e))return zn.empty();{let n=t.writeTree_.setTree(e,new en(null));return new zn(n)}}function $w(t,e){return ks(t,e)!=null}function ks(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Dn(n.path,e)):null}function sP(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ot,(r,i)=>{e.push(new Ie(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Ie(r,i.value))}),e}function Ai(t,e){if(_e(e))return t;{let n=ks(t,e);return n!=null?new zn(new en(n)):new zn(t.writeTree_.subtree(e))}}function Hw(t){return t.writeTree_.isEmpty()}function Ea(t,e){return ZP(Re(),t.writeTree_,e)}function ZP(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(F(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=ZP(It(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(It(t,".priority"),r)),n}}function JP(t,e){return rM(e,t)}function l4(t,e,n,r,i){F(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Lu(t.visibleWrites,e,n)),t.lastWriteId=r}function d4(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function h4(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);F(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&f4(a,r.path)?i=!1:qn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return p4(t),!0;if(r.snap)t.visibleWrites=iP(t.visibleWrites,r.path);else{let a=r.children;An(a,c=>{t.visibleWrites=iP(t.visibleWrites,It(r.path,c))})}return!0}else return!1}function f4(t,e){if(t.snap)return qn(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&qn(It(t.path,n),e))return!0;return!1}function p4(t){t.visibleWrites=XP(t.allWrites,g4,Re()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function g4(t){return t.visible}function XP(t,e,n){let r=zn.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)qn(n,o)?(a=Dn(n,o),r=Lu(r,a,s.snap)):qn(o,n)&&(a=Dn(o,n),r=Lu(r,Re(),s.snap.getChild(a)));else if(s.children){if(qn(n,o))a=Dn(n,o),r=rP(r,a,s.children);else if(qn(o,n))if(a=Dn(o,n),_e(a))r=rP(r,Re(),s.children);else{let c=Vi(s.children,ve(a));if(c){let l=c.getChild($e(a));r=Lu(r,Re(),l)}}}else throw $s("WriteRecord should have .snap or .children")}}return r}function eM(t,e,n,r,i){if(!r&&!i){let s=ks(t.visibleWrites,e);if(s!=null)return s;{let o=Ai(t.visibleWrites,e);if(Hw(o))return n;if(n==null&&!$w(o,Re()))return null;{let a=n||We.EMPTY_NODE;return Ea(o,a)}}}else{let s=Ai(t.visibleWrites,e);if(!i&&Hw(s))return n;if(!i&&n==null&&!$w(s,Re()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(qn(l.path,e)||qn(e,l.path))},a=XP(t.allWrites,o,e),c=n||We.EMPTY_NODE;return Ea(a,c)}}}function m4(t,e,n){let r=We.EMPTY_NODE,i=ks(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ot,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=Ai(t.visibleWrites,e);return n.forEachChild(Ot,(o,a)=>{let c=Ea(Ai(s,new ke(o)),a);r=r.updateImmediateChild(o,c)}),sP(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=Ai(t.visibleWrites,e);return sP(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function _4(t,e,n,r,i){F(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=It(e,n);if($w(t.visibleWrites,s))return null;{let o=Ai(t.visibleWrites,s);return Hw(o)?i.getChild(n):Ea(o,i.getChild(n))}}function y4(t,e,n,r){let i=It(e,n),s=ks(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=Ai(t.visibleWrites,i);return Ea(o,r.getNode().getImmediateChild(n))}else return null}function v4(t,e){return ks(t.visibleWrites,e)}function I4(t,e,n,r,i,s,o){let a,c=Ai(t.visibleWrites,e),l=ks(c,Re());if(l!=null)a=l;else if(n!=null)a=Ea(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let d=[],f=o.getCompare(),g=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),_=g.getNext();for(;_&&d.length<i;)f(_,r)!==0&&d.push(_),_=g.getNext();return d}else return[]}function w4(){return{visibleWrites:zn.empty(),allWrites:[],lastWriteId:-1}}function qw(t,e,n,r){return eM(t.writeTree,t.treePath,e,n,r)}function tM(t,e){return m4(t.writeTree,t.treePath,e)}function oP(t,e,n,r){return _4(t.writeTree,t.treePath,e,n,r)}function sp(t,e){return v4(t.writeTree,It(t.treePath,e))}function E4(t,e,n,r,i,s){return I4(t.writeTree,t.treePath,e,n,r,i,s)}function cE(t,e,n){return y4(t.writeTree,t.treePath,e,n)}function nM(t,e){return rM(It(t.treePath,e),t.writeTree)}function rM(t,e){return{treePath:t,writeTree:e}}var zw=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;F(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),F(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Xx(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,t4(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,e4(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Xx(r,e.snapshotNode,i.oldSnap));else throw $s("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var Gw=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},iM=new Gw,Uu=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Vu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return cE(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ms(this.viewCache_),s=E4(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function T4(t,e){F(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),F(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function C4(t,e,n,r,i){let s=new zw,o,a;if(n.type===jr.OVERWRITE){let l=n;l.source.fromUser?o=Ww(t,e,l.path,l.snap,r,i,s):(F(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!_e(l.path),o=op(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===jr.MERGE){let l=n;l.source.fromUser?o=D4(t,e,l.path,l.children,r,i,s):(F(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=Kw(t,e,l.path,l.children,r,i,a,s))}else if(n.type===jr.ACK_USER_WRITE){let l=n;l.revert?o=R4(t,e,l.path,r,i,s):o=S4(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===jr.LISTEN_COMPLETE)o=A4(t,e,n.path,r,s);else throw $s("Unknown operation type: "+n.type);let c=s.getChanges();return b4(e,o,c),{viewCache:o,changes:c}}function b4(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Bw(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(XW(Bw(e)))}}function sM(t,e,n,r,i,s){let o=e.eventCache;if(sp(r,n)!=null)return e;{let a,c;if(_e(n))if(F(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=Ms(e),d=l instanceof We?l:We.EMPTY_NODE,f=tM(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{let l=qw(r,Ms(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=ve(n);if(l===".priority"){F(Ri(n)===1,"Can't have a priority with additional path components");let d=o.getNode();c=e.serverCache.getNode();let f=oP(r,n,d,c);f!=null?a=t.filter.updatePriority(d,f):a=o.getNode()}else{let d=$e(n),f;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let g=oP(r,n,o.getNode(),c);g!=null?f=o.getNode().getImmediateChild(l).updateChild(d,g):f=o.getNode().getImmediateChild(l)}else f=cE(r,l,e.serverCache);f!=null?a=t.filter.updateChild(o.getNode(),l,f,d,i,s):a=o.getNode()}}return Fu(e,a,o.isFullyInitialized()||_e(n),t.filter.filtersNodes())}}function op(t,e,n,r,i,s,o,a){let c=e.serverCache,l,d=o?t.filter:t.filter.getIndexedFilter();if(_e(n))l=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){let _=c.getNode().updateChild(n,r);l=d.updateFullNode(c.getNode(),_,null)}else{let _=ve(n);if(!c.isCompleteForPath(n)&&Ri(n)>1)return e;let E=$e(n),A=c.getNode().getImmediateChild(_).updateChild(E,r);_===".priority"?l=d.updatePriority(c.getNode(),A):l=d.updateChild(c.getNode(),_,A,E,iM,null)}let f=YP(e,l,c.isFullyInitialized()||_e(n),d.filtersNodes()),g=new Uu(i,f,s);return sM(t,f,n,i,g,a)}function Ww(t,e,n,r,i,s,o){let a=e.eventCache,c,l,d=new Uu(i,e,s);if(_e(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Fu(e,l,!0,t.filter.filtersNodes());else{let f=ve(n);if(f===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Fu(e,l,a.isFullyInitialized(),a.isFiltered());else{let g=$e(n),_=a.getNode().getImmediateChild(f),E;if(_e(g))E=r;else{let R=d.getCompleteChild(f);R!=null?FP(g)===".priority"&&R.getChild(VP(g)).isEmpty()?E=R:E=R.updateChild(g,r):E=We.EMPTY_NODE}if(_.equals(E))c=e;else{let R=t.filter.updateChild(a.getNode(),f,E,g,d,o);c=Fu(e,R,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function aP(t,e){return t.eventCache.isCompleteForChild(e)}function D4(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{let d=It(n,c);aP(e,ve(d))&&(a=Ww(t,a,d,l,i,s,o))}),r.foreach((c,l)=>{let d=It(n,c);aP(e,ve(d))||(a=Ww(t,a,d,l,i,s,o))}),a}function cP(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Kw(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;_e(n)?l=r:l=new en(null).setTree(n,r);let d=e.serverCache.getNode();return l.children.inorderTraversal((f,g)=>{if(d.hasChild(f)){let _=e.serverCache.getNode().getImmediateChild(f),E=cP(t,_,g);c=op(t,c,new ke(f),E,i,s,o,a)}}),l.children.inorderTraversal((f,g)=>{let _=!e.serverCache.isCompleteForChild(f)&&g.value===null;if(!d.hasChild(f)&&!_){let E=e.serverCache.getNode().getImmediateChild(f),R=cP(t,E,g);c=op(t,c,new ke(f),R,i,s,o,a)}}),c}function S4(t,e,n,r,i,s,o){if(sp(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(_e(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return op(t,e,n,c.getNode().getChild(n),i,s,a,o);if(_e(n)){let l=new en(null);return c.getNode().forEachChild(ma,(d,f)=>{l=l.set(new ke(d),f)}),Kw(t,e,n,l,i,s,a,o)}else return e}else{let l=new en(null);return r.foreach((d,f)=>{let g=It(n,d);c.isCompleteForPath(g)&&(l=l.set(d,c.getNode().getChild(g)))}),Kw(t,e,n,l,i,s,a,o)}}function A4(t,e,n,r,i){let s=e.serverCache,o=YP(e,s.getNode(),s.isFullyInitialized()||_e(n),s.isFiltered());return sM(t,o,n,r,iM,i)}function R4(t,e,n,r,i,s){let o;if(sp(r,n)!=null)return e;{let a=new Uu(r,e,i),c=e.eventCache.getNode(),l;if(_e(n)||ve(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=qw(r,Ms(e));else{let f=e.serverCache.getNode();F(f instanceof We,"serverChildren would be complete if leaf node"),d=tM(r,f)}d=d,l=t.filter.updateFullNode(c,d,s)}else{let d=ve(n),f=cE(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?l=t.filter.updateChild(c,d,f,$e(n),a,s):e.eventCache.getNode().hasChild(d)?l=t.filter.updateChild(c,d,We.EMPTY_NODE,$e(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=qw(r,Ms(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||sp(r,Re())!=null,Fu(e,l,o,t.filter.filtersNodes())}}function N4(t,e){let n=Ms(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!_e(e)&&!n.getImmediateChild(ve(e)).isEmpty())?n.getChild(e):null}function uP(t,e,n,r){e.type===jr.MERGE&&e.source.queryId!==null&&(F(Ms(t.viewCache_),"We should always have a full cache before handling merges"),F(Bw(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=C4(t.processor_,i,e,n,r);return T4(t.processor_,s.viewCache),F(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,x4(t,s.changes,s.viewCache.eventCache.getNode(),null)}function x4(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return o4(t.eventGenerator_,e,n,i)}var lP;function P4(t){F(!lP,"__referenceConstructor has already been defined"),lP=t}function uE(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return F(s!=null,"SyncTree gave us an op for an invalid query."),uP(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(uP(o,e,n,r));return s}}function lE(t,e){let n=null;for(let r of t.views.values())n=n||N4(r,e);return n}var dP;function M4(t){F(!dP,"__referenceConstructor has already been defined"),dP=t}var ap=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new en(null),this.pendingWriteTree_=w4(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function k4(t,e,n,r,i){return l4(t.pendingWriteTree_,e,n,r,i),i?up(t,new wa(GP(),e,n)):[]}function pa(t,e,n=!1){let r=d4(t.pendingWriteTree_,e);if(h4(t.pendingWriteTree_,e)){let s=new en(null);return r.snap!=null?s=s.set(Re(),!0):An(r.children,o=>{s=s.set(new ke(o),!0)}),up(t,new jw(r.path,s,n))}else return[]}function cp(t,e,n){return up(t,new wa(WP(),e,n))}function O4(t,e,n){let r=en.fromObject(n);return up(t,new ip(WP(),e,r))}function F4(t,e,n,r){let i=uM(t,r);if(i!=null){let s=lM(i),o=s.path,a=s.queryId,c=Dn(o,e),l=new wa(KP(a),c,n);return dM(t,o,l)}else return[]}function L4(t,e,n,r){let i=uM(t,r);if(i){let s=lM(i),o=s.path,a=s.queryId,c=Dn(o,e),l=en.fromObject(n),d=new ip(KP(a),c,l);return dM(t,o,d)}else return[]}function oM(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=Dn(o,e),l=lE(a,c);if(l)return l});return eM(i,e,s,n,!0)}function up(t,e){return aM(e,t.syncPointTree_,null,JP(t.pendingWriteTree_,Re()))}function aM(t,e,n,r){if(_e(t.path))return cM(t,e,n,r);{let i=e.get(Re());n==null&&i!=null&&(n=lE(i,Re()));let s=[],o=ve(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let l=n?n.getImmediateChild(o):null,d=nM(r,o);s=s.concat(aM(a,c,l,d))}return i&&(s=s.concat(uE(i,t,r,n))),s}}function cM(t,e,n,r){let i=e.get(Re());n==null&&i!=null&&(n=lE(i,Re()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,l=nM(r,o),d=t.operationForChild(o);d&&(s=s.concat(cM(d,a,c,l)))}),i&&(s=s.concat(uE(i,t,r,n))),s}function uM(t,e){return t.tagToQueryMap.get(e)}function lM(t){let e=t.indexOf("$");return F(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ke(t.substr(0,e))}}function dM(t,e,n){let r=t.syncPointTree_.get(e);F(r,"Missing sync point for query tag that we're tracking");let i=JP(t.pendingWriteTree_,e);return uE(r,n,i,null)}var Qw=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},Yw=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=It(this.path_,e);return new t(this.syncTree_,n)}node(){return oM(this.syncTree_,this.path_)}},V4=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},hP=function(t,e,n){if(!t||typeof t!="object")return t;if(F(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return U4(t[".sv"],e,n);if(typeof t[".sv"]=="object")return j4(t[".sv"],e);F(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},U4=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:F(!1,"Unexpected server value: "+t)}},j4=function(t,e,n){t.hasOwnProperty("increment")||F(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&F(!1,"Unexpected increment value: "+r);let i=e.node();if(F(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},B4=function(t,e,n,r){return dE(e,new Yw(n,t),r)},$4=function(t,e,n){return dE(t,new Qw(e),n)};function dE(t,e,n){let r=t.getPriority().val(),i=hP(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=hP(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new va(a,kt(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new va(i))),o.forEachChild(Ot,(a,c)=>{let l=dE(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var ju=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function hE(t,e){let n=e instanceof ke?e:new ke(e),r=t,i=ve(n);for(;i!==null;){let s=Vi(r.node.children,i)||{children:{},childCount:0};r=new ju(i,r,s),n=$e(n),i=ve(n)}return r}function ba(t){return t.node.value}function hM(t,e){t.node.value=e,Zw(t)}function fM(t){return t.node.childCount>0}function H4(t){return ba(t)===void 0&&!fM(t)}function lp(t,e){An(t.node.children,(n,r)=>{e(new ju(n,t,r))})}function pM(t,e,n,r){n&&!r&&e(t),lp(t,i=>{pM(i,e,!0,r)}),n&&r&&e(t)}function q4(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function zu(t){return new ke(t.parent===null?t.name:zu(t.parent)+"/"+t.name)}function Zw(t){t.parent!==null&&z4(t.parent,t.name,t)}function z4(t,e,n){let r=H4(n),i=Kn(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Zw(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Zw(t))}var G4=/[\[\].#$\/\u0000-\u001F\u007F]/,W4=/[\[\].#$\u0000-\u001F\u007F]/,dw=10*1024*1024,gM=function(t){return typeof t=="string"&&t.length!==0&&!G4.test(t)},K4=function(t){return typeof t=="string"&&t.length!==0&&!W4.test(t)},Q4=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),K4(t)};var mM=function(t,e,n){let r=n instanceof ke?new bw(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Rs(r));if(typeof e=="function")throw new Error(t+"contains a function "+Rs(r)+" with contents = "+e.toString());if(yP(e))throw new Error(t+"contains "+e.toString()+" "+Rs(r));if(typeof e=="string"&&e.length>dw/3&&ec(e)>dw)throw new Error(t+"contains a string greater than "+dw+" utf8 bytes "+Rs(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(An(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!gM(o)))throw new Error(t+" contains an invalid key ("+o+") "+Rs(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);jW(r,o),mM(t,a,r),BW(r)}),i&&s)throw new Error(t+' contains ".value" child '+Rs(r)+" in addition to actual children.")}};var Y4=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!gM(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Q4(n))throw new Error(TC(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Jw=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Z4(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!UP(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Os(t,e,n){Z4(t,n),J4(t,r=>qn(r,e)||qn(e,r))}function J4(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(X4(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function X4(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();xs&&Mt("event: "+n.toString()),Hu(r)}}}var e9="repo_interrupt",t9=25,Xw=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Jw,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=rp(),this.transactionQueueTree_=new ju,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function n9(t,e,n){if(t.stats_=sE(t.repoInfo_),t.forceRestClient_||gW())t.server_=new Ow(t.repoInfo_,(r,i,s,o)=>{fP(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>pP(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{yt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new oE(t.repoInfo_,e,(r,i,s,o)=>{fP(t,r,i,s,o)},r=>{pP(t,r)},r=>{i9(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=_W(t.repoInfo_,()=>new Uw(t.stats_,t.server_)),t.infoData_=new Fw,t.infoSyncTree_=new ap({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=cp(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),fE(t,"connected",!1),t.serverSyncTree_=new ap({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);Os(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function r9(t){let n=t.infoData_.getNode(new ke(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function _M(t){return V4({timestamp:r9(t)})}function fP(t,e,n,r,i){t.dataUpdateCount++;let s=new ke(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=Ja(n,l=>kt(l));o=L4(t.serverSyncTree_,s,c,i)}else{let c=kt(n);o=F4(t.serverSyncTree_,s,c,i)}else if(r){let c=Ja(n,l=>kt(l));o=O4(t.serverSyncTree_,s,c)}else{let c=kt(n);o=cp(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=gE(t,s)),Os(t.eventQueue_,a,o)}function pP(t,e){fE(t,"connected",e),e===!1&&o9(t)}function i9(t,e){An(e,(n,r)=>{fE(t,n,r)})}function fE(t,e,n){let r=new ke("/.info/"+e),i=kt(n);t.infoData_.updateSnapshot(r,i);let s=cp(t.infoSyncTree_,r,i);Os(t.eventQueue_,r,s)}function s9(t){return t.nextWriteId_++}function o9(t){yM(t,"onDisconnectEvents");let e=_M(t),n=rp();Lw(t.onDisconnect_,Re(),(i,s)=>{let o=B4(i,s,t.serverSyncTree_,e);zP(n,i,o)});let r=[];Lw(n,Re(),(i,s)=>{r=r.concat(cp(t.serverSyncTree_,i,s));let o=l9(t,i);gE(t,o)}),t.onDisconnect_=rp(),Os(t.eventQueue_,Re(),r)}function a9(t){t.persistentConnection_&&t.persistentConnection_.interrupt(e9)}function yM(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Mt(n,...e)}function vM(t,e,n){return oM(t.serverSyncTree_,e,n)||We.EMPTY_NODE}function pE(t,e=t.transactionQueueTree_){if(e||dp(t,e),ba(e)){let n=wM(t,e);F(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&c9(t,zu(e),n)}else fM(e)&&lp(e,n=>{pE(t,n)})}function c9(t,e,n){let r=n.map(l=>l.currentWriteId),i=vM(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let d=n[l];F(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let f=Dn(e,d.path);s=s.updateChild(f,d.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{yM(t,"transaction put response",{path:c.toString(),status:l});let d=[];if(l==="ok"){let f=[];for(let g=0;g<n.length;g++)n[g].status=2,d=d.concat(pa(t.serverSyncTree_,n[g].currentWriteId)),n[g].onComplete&&f.push(()=>n[g].onComplete(null,!0,n[g].currentOutputSnapshotResolved)),n[g].unwatcher();dp(t,hE(t.transactionQueueTree_,e)),pE(t,t.transactionQueueTree_),Os(t.eventQueue_,e,d);for(let g=0;g<f.length;g++)Hu(f[g])}else{if(l==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{gn("transaction at "+c.toString()+" failed: "+l);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=l}gE(t,e)}},o)}function gE(t,e){let n=IM(t,e),r=zu(n),i=wM(t,n);return u9(t,i,r),r}function u9(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Dn(n,c.path),d=!1,f;if(F(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,i=i.concat(pa(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=t9)d=!0,f="maxretry",i=i.concat(pa(t.serverSyncTree_,c.currentWriteId,!0));else{let g=vM(t,c.path,o);c.currentInputSnapshot=g;let _=e[a].update(g.val());if(_!==void 0){mM("transaction failed: Data returned ",_,c.path);let E=kt(_);typeof _=="object"&&_!=null&&Kn(_,".priority")||(E=E.updatePriority(g.getPriority()));let A=c.currentWriteId,M=_M(t),L=$4(E,g,M);c.currentOutputSnapshotRaw=E,c.currentOutputSnapshotResolved=L,c.currentWriteId=s9(t),o.splice(o.indexOf(A),1),i=i.concat(k4(t.serverSyncTree_,c.path,L,c.currentWriteId,c.applyLocally)),i=i.concat(pa(t.serverSyncTree_,A,!0))}else d=!0,f="nodata",i=i.concat(pa(t.serverSyncTree_,c.currentWriteId,!0))}Os(t.eventQueue_,n,i),i=[],d&&(e[a].status=2,function(g){setTimeout(g,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}dp(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Hu(r[a]);pE(t,t.transactionQueueTree_)}function IM(t,e){let n,r=t.transactionQueueTree_;for(n=ve(e);n!==null&&ba(r)===void 0;)r=hE(r,n),e=$e(e),n=ve(e);return r}function wM(t,e){let n=[];return EM(t,e,n),n.sort((r,i)=>r.order-i.order),n}function EM(t,e,n){let r=ba(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);lp(e,i=>{EM(t,i,n)})}function dp(t,e){let n=ba(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,hM(e,n.length>0?n:void 0)}lp(e,r=>{dp(t,r)})}function l9(t,e){let n=zu(IM(t,e)),r=hE(t.transactionQueueTree_,e);return q4(r,i=>{hw(t,i)}),hw(t,r),pM(r,i=>{hw(t,i)}),n}function hw(t,e){let n=ba(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(F(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(F(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(pa(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?hM(e,void 0):n.length=s+1,Os(t.eventQueue_,zu(e),i);for(let o=0;o<r.length;o++)Hu(r[o])}}function d9(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function h9(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):gn(`Invalid query segment '${n}' in query '${t}'`)}return e}var gP=function(t,e){let n=f9(t),r=n.namespace;n.domain==="firebase.com"&&Br(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Br("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||aW();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Yf(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new ke(n.pathString)}},f9=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let d=t.indexOf("/");d===-1&&(d=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(d,f)),d<f&&(i=d9(t.substring(d,f)));let g=h9(t.substring(Math.min(t.length,f)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let _=e.slice(0,l);if(_.toLowerCase()==="localhost")n="localhost";else if(_.split(".").length<=2)n=_;else{let E=e.indexOf(".");r=e.substring(0,E).toLowerCase(),n=e.substring(E+1),s=r}"ns"in g&&(s=g.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var eE=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return _e(this._path)?null:FP(this._path)}get ref(){return new Ta(this._repo,this._path)}get _queryIdentifier(){let e=tP(this._queryParams),n=iE(e);return n==="{}"?"default":n}get _queryObject(){return tP(this._queryParams)}isEqual(e){if(e=fe(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=UP(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+UW(this._path)}};var Ta=class t extends eE{constructor(e,n){super(e,n,new kw,!1)}get parent(){let e=VP(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};P4(Ta);M4(Ta);var p9="FIREBASE_DATABASE_EMULATOR_HOST",tE={},g9=!1;function m9(t,e,n,r){t.repoInfo_=new Yf(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function _9(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Br("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Mt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=gP(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[p9]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=gP(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let d=i&&c?new Ou(Ou.OWNER):new yw(t.name,t.options,e);Y4("Invalid Firebase Database URL",o),_e(o.path)||Br("Database URL must point to the root of a Firebase Database (not including a child path).");let f=v9(a,t,d,new _w(t.name,n));return new nE(f,t)}function y9(t,e){let n=tE[e];(!n||n[t.key]!==t)&&Br(`Database ${e}(${t.repoInfo_}) has already been deleted.`),a9(t),delete n[t.key]}function v9(t,e,n,r){let i=tE[e.name];i||(i={},tE[e.name]=i);let s=i[t.toURLString()];return s&&Br("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Xw(t,g9,n,r),i[t.toURLString()]=s,s}var nE=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(n9(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ta(this._repo,Re())),this._rootInternal}_delete(){return this._rootInternal!==null&&(y9(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Br("Cannot call "+e+" on a deleted database.")}};function TM(t=ct(),e){let n=at(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=Yr("database");r&&CM(n,...r)}return n}function CM(t,e,n,r={}){t=fe(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Br("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Br('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ou(Ou.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:Hs(r.mockUserToken,t.app.options.projectId);s=new Ou(o)}m9(i,e,n,s)}function I9(t){iW(Kt),tt(new et("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return _9(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),q(Lx,Vx,t),q(Lx,Vx,"esm2017")}oE.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};oE.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};I9();var Gu=class{constructor(e){return e}},bM="database",mE=class{constructor(){return ot(bM)}};var _E=new U("angularfire2.database-instances");function w9(t,e){let n=dt(bM,t,e);return n&&new Gu(n)}function E9(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Gu(r)}}var T9={provide:mE,deps:[[new te,_E]]},C9={provide:Gu,useFactory:w9,deps:[[new te,_E],Be]};function DM(t,...e){return q("angularfire",je.full,"rtdb"),Oe([C9,T9,{provide:_E,useFactory:E9(t),multi:!0,deps:[Z,me,Je,ze,[new te,Un],[new te,Jt],...e]}])}var SM=we(TM,!0);var NM="functions";var yE=class{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){return y(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return y(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return y(this,null,function*(){if(this.appCheck){let n=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return n.error?null:n.token}return null})}getContext(e){return y(this,null,function*(){let n=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}})}};var vE="us-central1";var IE=class{constructor(e,n,r,i,s=vE,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new yE(n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(s);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=vE}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){let n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}};function b9(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}var AM="@firebase/functions",RM="0.11.8";var D9="auth-internal",S9="app-check-internal",A9="messaging-internal";function R9(t,e){let n=(r,{instanceIdentifier:i})=>{let s=r.getProvider("app").getImmediate(),o=r.getProvider(D9),a=r.getProvider(A9),c=r.getProvider(S9);return new IE(s,o,a,c,i,t)};tt(new et(NM,n,"PUBLIC").setMultipleInstances(!0)),q(AM,RM,e),q(AM,RM,"esm2017")}function xM(t=ct(),e=vE){let r=at(fe(t),NM).getImmediate({identifier:e}),i=Yr("functions");return i&&PM(r,...i),r}function PM(t,e,n){b9(fe(t),e,n)}R9(fetch.bind(self));var Wu=class{constructor(e){return e}},MM="functions",wE=class{constructor(){return ot(MM)}};var EE=new U("angularfire2.functions-instances");function N9(t,e){let n=dt(MM,t,e);return n&&new Wu(n)}function x9(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Wu(r)}}var P9={provide:wE,deps:[[new te,EE]]},M9={provide:Wu,useFactory:N9,deps:[[new te,EE],Be]};function kM(t,...e){return q("angularfire",je.full,"fn"),Oe([M9,P9,{provide:EE,useFactory:x9(t),multi:!0,deps:[Z,me,Je,ze,[new te,Un],[new te,Jt],...e]}])}var OM=we(xM,!0);var k9="/firebase-messaging-sw.js",O9="/firebase-cloud-messaging-push-scope",BM="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",F9="https://fcmregistrations.googleapis.com/v1",$M="google.c.a.c_id",L9="google.c.a.c_l",V9="google.c.a.ts",U9="google.c.a.e";var hp=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(hp||{});function $r(t){let e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function j9(t){let e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}var TE="fcm_token_details_db",B9=5,FM="fcm_token_object_Store";function $9(t){return y(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(TE))return null;let e=null;return(yield Yp(TE,B9,{upgrade:(r,i,s,o)=>y(this,null,function*(){var a;if(i<2||!r.objectStoreNames.contains(FM))return;let c=o.objectStore(FM),l=yield c.index("fcmSenderId").get(t);if(yield c.clear(),!!l){if(i===2){let d=l;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(a=d.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:$r(d.vapidKey)}}}else if(i===3){let d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:$r(d.auth),p256dh:$r(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:$r(d.vapidKey)}}}else if(i===4){let d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:$r(d.auth),p256dh:$r(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:$r(d.vapidKey)}}}}})})).close(),yield Il(TE),yield Il("fcm_vapid_details_db"),yield Il("undefined"),H9(e)?e:null})}function H9(t){if(!t||!t.subscriptionOptions)return!1;let{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var q9="firebase-messaging-database",z9=1,Ku="firebase-messaging-store",CE=null;function HM(){return CE||(CE=Yp(q9,z9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ku)}}})),CE}function G9(t){return y(this,null,function*(){let e=qM(t),r=yield(yield HM()).transaction(Ku).objectStore(Ku).get(e);if(r)return r;{let i=yield $9(t.appConfig.senderId);if(i)return yield SE(t,i),i}})}function SE(t,e){return y(this,null,function*(){let n=qM(t),i=(yield HM()).transaction(Ku,"readwrite");return yield i.objectStore(Ku).put(e,n),yield i.done,e})}function qM({appConfig:t}){return t.appId}var W9={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Gt=new Wn("messaging","Messaging",W9);function K9(t,e){return y(this,null,function*(){let n=yield RE(t),r=zM(e),i={method:"POST",headers:n,body:JSON.stringify(r)},s;try{s=yield(yield fetch(AE(t.appConfig),i)).json()}catch(o){throw Gt.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw Gt.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw Gt.create("token-subscribe-no-token");return s.token})}function Q9(t,e){return y(this,null,function*(){let n=yield RE(t),r=zM(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},s;try{s=yield(yield fetch(`${AE(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw Gt.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw Gt.create("token-update-failed",{errorInfo:o})}if(!s.token)throw Gt.create("token-update-no-token");return s.token})}function Y9(t,e){return y(this,null,function*(){let r={method:"DELETE",headers:yield RE(t)};try{let s=yield(yield fetch(`${AE(t.appConfig)}/${e}`,r)).json();if(s.error){let o=s.error.message;throw Gt.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw Gt.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})}function AE({projectId:t}){return`${F9}/projects/${t}/registrations`}function RE(n){return y(this,arguments,function*({appConfig:t,installations:e}){let r=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})})}function zM({p256dh:t,auth:e,endpoint:n,vapidKey:r}){let i={web:{endpoint:n,auth:e,p256dh:t}};return r!==BM&&(i.web.applicationPubKey=r),i}var Z9=7*24*60*60*1e3;function J9(t){return y(this,null,function*(){let e=yield e3(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:$r(e.getKey("auth")),p256dh:$r(e.getKey("p256dh"))},r=yield G9(t.firebaseDependencies);if(r){if(t3(r.subscriptionOptions,n))return Date.now()>=r.createTime+Z9?X9(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield Y9(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return LM(t.firebaseDependencies,n)}else return LM(t.firebaseDependencies,n)})}function X9(t,e){return y(this,null,function*(){try{let n=yield Q9(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield SE(t.firebaseDependencies,r),n}catch(n){throw n}})}function LM(t,e){return y(this,null,function*(){let r={token:yield K9(t,e),createTime:Date.now(),subscriptionOptions:e};return yield SE(t,r),r.token})}function e3(t,e){return y(this,null,function*(){let n=yield t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:j9(e)})})}function t3(t,e){let n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}function VM(t){let e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return n3(e,t),r3(e,t),i3(e,t),e}function n3(t,e){if(!e.notification)return;t.notification={};let n=e.notification.title;n&&(t.notification.title=n);let r=e.notification.body;r&&(t.notification.body=r);let i=e.notification.image;i&&(t.notification.image=i);let s=e.notification.icon;s&&(t.notification.icon=s)}function r3(t,e){e.data&&(t.data=e.data)}function i3(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};let a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);let c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(t.fcmOptions.analyticsLabel=c)}function s3(t){return typeof t=="object"&&!!t&&$M in t}o3("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function o3(t,e){let n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function a3(t){if(!t||!t.options)throw bE("App Configuration Object");if(!t.name)throw bE("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(let r of e)if(!n[r])throw bE(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function bE(t){return Gt.create("missing-app-config-values",{valueName:t})}var DE=class{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=a3(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}};function c3(t){return y(this,null,function*(){try{t.swRegistration=yield navigator.serviceWorker.register(k9,{scope:O9}),t.swRegistration.update().catch(()=>{})}catch(e){throw Gt.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function u3(t,e){return y(this,null,function*(){if(!e&&!t.swRegistration&&(yield c3(t)),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Gt.create("invalid-sw-registration");t.swRegistration=e}})}function l3(t,e){return y(this,null,function*(){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=BM)})}function d3(t,e){return y(this,null,function*(){if(!navigator)throw Gt.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw Gt.create("permission-blocked");return yield l3(t,e?.vapidKey),yield u3(t,e?.serviceWorkerRegistration),J9(t)})}function h3(t,e,n){return y(this,null,function*(){let r=f3(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[$M],message_name:n[L9],message_time:n[V9],message_device_time:Math.floor(Date.now()/1e3)})})}function f3(t){switch(t){case hp.NOTIFICATION_CLICKED:return"notification_open";case hp.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function p3(t,e){return y(this,null,function*(){let n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===hp.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(VM(n)):t.onMessageHandler.next(VM(n)));let r=n.data;s3(r)&&r[U9]==="1"&&(yield h3(t,n.messageType,r))})}var UM="@firebase/messaging",jM="0.12.12";var g3=t=>{let e=new DE(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>p3(e,n)),e},m3=t=>{let e=t.getProvider("messaging").getImmediate();return{getToken:r=>d3(e,r)}};function _3(){tt(new et("messaging",g3,"PUBLIC")),tt(new et("messaging-internal",m3,"PRIVATE")),q(UM,jM),q(UM,jM,"esm2017")}function NE(){return y(this,null,function*(){try{yield Li()}catch{return!1}return typeof window<"u"&&mr()&&Ya()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function GM(t=ct()){return NE().then(e=>{if(!e)throw Gt.create("unsupported-browser")},e=>{throw Gt.create("indexed-db-unsupported")}),at(fe(t),"messaging").getImmediate()}_3();var Qu=class{constructor(e){return e}},WM="messaging",xE=class{constructor(){return ot(WM)}};var KM="__angularfire_symbol__messagingIsSupported",PE="__angularfire_symbol__messagingIsSupportedValue";globalThis[KM]||=NE().then(t=>globalThis[PE]=t).catch(()=>globalThis[PE]=!1);var fp={async:()=>globalThis[KM],sync:()=>{let t=globalThis[PE];if(t===void 0)throw new Error(Vo("Messaging"));return t}},ME=new U("angularfire2.messaging-instances");function y3(t,e){if(!fp.sync())return null;let n=dt(WM,t,e);return n&&new Qu(n)}function v3(t){return(e,n)=>{if(!fp.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new Qu(r)}}var I3={provide:xE,deps:[[new te,ME]]},w3={provide:Qu,useFactory:y3,deps:[[new te,ME],Be]};function QM(t,...e){return q("angularfire",je.full,"fcm"),Oe([w3,I3,{provide:gi,useValue:fp.async,multi:!0},{provide:ME,useFactory:v3(t),multi:!0,deps:[Z,me,Je,ze,...e]}])}var mie=fp.async;var YM=we(GM,!0);var Yu=class{constructor(e){return e}},ZM="performance",kE=class{constructor(){return ot(ZM)}};var OE=new U("angularfire2.performance-instances");function E3(t,e,n){if(!i_(n))return null;let r=dt(ZM,t,e);return r&&new Yu(r)}function T3(t){return(e,n,r)=>{if(!i_(n))return null;let i=e.runOutsideAngular(()=>t(r));return new Yu(i)}}var C3={provide:kE,deps:[[new te,OE]]},b3={provide:Yu,useFactory:E3,deps:[[new te,OE],Be,Fn]};function JM(t,...e){return q("angularfire",je.full,"perf"),Oe([b3,C3,{provide:OE,useFactory:T3(t),multi:!0,deps:[Z,Fn,me,Je,ze,...e]}])}var XM=we(DC,!0);var sk="firebasestorage.googleapis.com",D3="storageBucket",S3=2*60*1e3,A3=10*60*1e3;var hr=class t extends Wt{constructor(e,n,r=0){super(FE(e),`Firebase Storage: ${n} (${FE(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return FE(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},qr=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(qr||{});function FE(t){return"storage/"+t}function R3(){let t="An unknown error occurred, please check the error payload for server response.";return new hr(qr.UNKNOWN,t)}function N3(){return new hr(qr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function x3(){return new hr(qr.CANCELED,"User canceled the upload/download.")}function P3(t){return new hr(qr.INVALID_URL,"Invalid URL '"+t+"'.")}function M3(t){return new hr(qr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function ek(t){return new hr(qr.INVALID_ARGUMENT,t)}function ok(){return new hr(qr.APP_DELETED,"The Firebase app was deleted.")}function k3(t){return new hr(qr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var Hr=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw M3(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(G){G.path.charAt(G.path.length-1)==="/"&&(G.path_=G.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(G){G.path_=decodeURIComponent(G.path)}let d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",_=new RegExp(`^https?://${f}/${d}/b/${i}/o${g}`,"i"),E={bucket:1,path:3},R=n===sk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",M=new RegExp(`^https?://${R}/${i}/${A}`,"i"),$=[{regex:a,indices:c,postModify:s},{regex:_,indices:E,postModify:l},{regex:M,indices:{bucket:1,path:2},postModify:l}];for(let G=0;G<$.length;G++){let Ne=$[G],Y=Ne.regex.exec(e);if(Y){let T=Y[Ne.indices.bucket],v=Y[Ne.indices.path];v||(v=""),r=new t(T,v),Ne.postModify(r);break}}if(r==null)throw P3(e);return r}},LE=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function O3(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function d(...A){l||(l=!0,e.apply(null,A))}function f(A){i=setTimeout(()=>{i=null,t(_,c())},A)}function g(){s&&clearTimeout(s)}function _(A,...M){if(l){g();return}if(A){g(),d.call(null,A,...M);return}if(c()||o){g(),d.call(null,A,...M);return}r<64&&(r*=2);let $;a===1?(a=2,$=0):$=(r+Math.random())*1e3,f($)}let E=!1;function R(A){E||(E=!0,g(),!l&&(i!==null?(A||(a=2),clearTimeout(i),f(0)):A||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,R(!0)},n),R}function F3(t){t(!1)}function L3(t){return t!==void 0}function tk(t,e,n,r){if(r<e)throw ek(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw ek(`Invalid value for '${t}'. Expected ${n} or less.`)}function V3(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var VE=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(VE||{});function U3(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var UE=class{constructor(e,n,r,i,s,o,a,c,l,d,f,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=d,this.connectionFactory_=f,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,E)=>{this.resolve_=_,this.reject_=E,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Da(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===VE.NO_ERROR,c=s.getStatus();if(!a||U3(c,this.additionalRetryCodes_)&&this.retry){let d=s.getErrorCode()===VE.ABORT;r(!1,new Da(!1,null,d));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new Da(l,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());L3(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=R3();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?ok():x3();o(c)}else{let c=N3();o(c)}};this.canceled_?n(!1,new Da(!1,null,!0)):this.backoffId_=O3(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&F3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Da=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function j3(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function B3(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function $3(t,e){e&&(t["X-Firebase-GMPID"]=e)}function H3(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function q3(t,e,n,r,i,s,o=!0){let a=V3(t.urlParams),c=t.url+a,l=Object.assign({},t.headers);return $3(l,e),j3(l,n),B3(l,s),H3(l,r),new UE(c,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}function z3(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function G3(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}var Mie=256*1024;var jE=class t{constructor(e,n){this._service=e,n instanceof Hr?this._location=n:this._location=Hr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new Hr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return G3(this._location.path)}get storage(){return this._service}get parent(){let e=z3(this._location.path);if(e===null)return null;let n=new Hr(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw k3(e)}};function nk(t,e){let n=e?.[D3];return n==null?null:Hr.makeFromBucketSpec(n,t)}function W3(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Hs(i,t.app.options.projectId))}var BE=class{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=sk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=S3,this._maxUploadRetryTime=A3,this._requests=new Set,i!=null?this._bucket=Hr.makeFromBucketSpec(i,this._host):this._bucket=nk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Hr.makeFromBucketSpec(this._url,e):this._bucket=nk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){tk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){tk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return y(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return y(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new jE(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new LE(ok());{let o=q3(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return y(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},rk="@firebase/storage",ik="0.13.2";var ak="storage";function ck(t=ct(),e){t=fe(t);let r=at(t,ak).getImmediate({identifier:e}),i=Yr("storage");return i&&uk(r,...i),r}function uk(t,e,n,r={}){W3(t,e,n,r)}function K3(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new BE(n,r,i,e,Kt)}function Q3(){tt(new et(ak,K3,"PUBLIC").setMultipleInstances(!0)),q(rk,ik,""),q(rk,ik,"esm2017")}Q3();var Zu=class{constructor(e){return e}},lk="storage",$E=class{constructor(){return ot(lk)}};var HE=new U("angularfire2.storage-instances");function Y3(t,e){let n=dt(lk,t,e);return n&&new Zu(n)}function Z3(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Zu(r)}}var J3={provide:$E,deps:[[new te,HE]]},X3={provide:Zu,useFactory:Y3,deps:[[new te,HE],Be]};function dk(t,...e){return q("angularfire",je.full,"gcs"),Oe([X3,J3,{provide:HE,useFactory:Z3(t),multi:!0,deps:[Z,me,Je,ze,[new te,Un],[new te,Jt],...e]}])}var hk=we(ck,!0);var qE="@firebase/remote-config",fk="0.4.9";var pk="remote-config";var e6={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},tn=new Wn("remoteconfig","Remote Config",e6);function gk(t=ct()){return t=fe(t),at(t,pk).getImmediate()}function mk(t){let e=fe(t);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}var zE=class{constructor(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let r=Date.now()-n,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){return y(this,null,function*(){let[n,r]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n))return r;e.eTag=r&&r.eTag;let i=yield this.client.fetch(e),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return i.status===200&&s.push(this.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(s),i})}};function t6(t=navigator){return t.languages&&t.languages[0]||t.language}var GE=class{constructor(e,n,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){return y(this,null,function*(){let[n,r]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,o={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:t6()},c={method:"POST",headers:o,body:JSON.stringify(a)},l=fetch(s,c),d=new Promise((A,M)=>{e.signal.addEventListener(()=>{let L=new Error("The operation was aborted.");L.name="AbortError",M(L)})}),f;try{yield Promise.race([l,d]),f=yield l}catch(A){let M="fetch-client-network";throw A?.name==="AbortError"&&(M="fetch-timeout"),tn.create(M,{originalErrorMessage:A?.message})}let g=f.status,_=f.headers.get("ETag")||void 0,E,R;if(f.status===200){let A;try{A=yield f.json()}catch(M){throw tn.create("fetch-client-parse",{originalErrorMessage:M?.message})}E=A.entries,R=A.state}if(R==="INSTANCE_STATE_UNSPECIFIED"?g=500:R==="NO_CHANGE"?g=304:(R==="NO_TEMPLATE"||R==="EMPTY_CONFIG")&&(E={}),g!==304&&g!==200)throw tn.create("fetch-status",{httpStatus:g});return{status:g,eTag:_,config:E}})}};function n6(t,e){return new Promise((n,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(tn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function r6(t){if(!(t instanceof Wt)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var WE=class{constructor(e,n){this.client=e,this.storage=n}fetch(e){return y(this,null,function*(){let n=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,n)})}attemptFetch(i,s){return y(this,arguments,function*(e,{throttleEndTimeMillis:n,backoffCount:r}){yield n6(e.signal,n);try{let o=yield this.client.fetch(e);return yield this.storage.deleteThrottleMetadata(),o}catch(o){if(!r6(o))throw o;let a={throttleEndTimeMillis:Date.now()+tc(r),backoffCount:r+1};return yield this.storage.setThrottleMetadata(a),this.attemptFetch(e,a)}})}};var i6=60*1e3,s6=12*60*60*1e3,KE=class{constructor(e,n,r,i,s){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:i6,minimumFetchIntervalMillis:s6},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}};function pp(t,e){let n=t.target.error||void 0;return tn.create(e,{originalErrorMessage:n&&n?.message})}var Fs="app_namespace_store",o6="firebase_remote_config",a6=1;function c6(){return new Promise((t,e)=>{try{let n=indexedDB.open(o6,a6);n.onerror=r=>{e(pp(r,"storage-open"))},n.onsuccess=r=>{t(r.target.result)},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Fs,{keyPath:"compositeKey"})}}}catch(n){e(tn.create("storage-open",{originalErrorMessage:n?.message}))}})}var QE=class{constructor(e,n,r,i=c6()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){return y(this,null,function*(){let n=yield this.openDbPromise;return new Promise((r,i)=>{let o=n.transaction([Fs],"readonly").objectStore(Fs),a=this.createCompositeKey(e);try{let c=o.get(a);c.onerror=l=>{i(pp(l,"storage-get"))},c.onsuccess=l=>{let d=l.target.result;r(d?d.value:void 0)}}catch(c){i(tn.create("storage-get",{originalErrorMessage:c?.message}))}})})}set(e,n){return y(this,null,function*(){let r=yield this.openDbPromise;return new Promise((i,s)=>{let a=r.transaction([Fs],"readwrite").objectStore(Fs),c=this.createCompositeKey(e);try{let l=a.put({compositeKey:c,value:n});l.onerror=d=>{s(pp(d,"storage-set"))},l.onsuccess=()=>{i()}}catch(l){s(tn.create("storage-set",{originalErrorMessage:l?.message}))}})})}delete(e){return y(this,null,function*(){let n=yield this.openDbPromise;return new Promise((r,i)=>{let o=n.transaction([Fs],"readwrite").objectStore(Fs),a=this.createCompositeKey(e);try{let c=o.delete(a);c.onerror=l=>{i(pp(l,"storage-delete"))},c.onsuccess=()=>{r()}}catch(c){i(tn.create("storage-delete",{originalErrorMessage:c?.message}))}})})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}};var YE=class{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){return y(this,null,function*(){let e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),i=yield e;i&&(this.lastFetchStatus=i);let s=yield n;s&&(this.lastSuccessfulFetchTimestampMillis=s);let o=yield r;o&&(this.activeConfig=o)})}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}};function u6(){tt(new et(pk,t,"PUBLIC").setMultipleInstances(!0)),q(qE,fk),q(qE,fk,"esm2017");function t(e,{instanceIdentifier:n}){let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw tn.create("registration-window");if(!mr())throw tn.create("indexed-db-unavailable");let{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw tn.create("registration-project-id");if(!o)throw tn.create("registration-api-key");if(!a)throw tn.create("registration-app-id");n=n||"firebase";let c=new QE(a,r.name,n),l=new YE(c),d=new Qn(qE);d.logLevel=Rt.ERROR;let f=new GE(i,Kt,n,s,o,a),g=new WE(f,c),_=new zE(g,c,l,d),E=new KE(r,_,l,c,d);return mk(E),E}}function _k(){return y(this,null,function*(){if(!mr())return!1;try{return yield Li()}catch{return!1}})}u6();var Ju=class{constructor(e){return e}},yk="remote-config",ZE=class{constructor(){return ot(yk)}};var JE="__angularfire_symbol__remoteConfigIsSupportedValue",vk="__angularfire_symbol__remoteConfigIsSupported";globalThis[vk]||=_k().then(t=>globalThis[JE]=t).catch(()=>globalThis[JE]=!1);var gp={async:()=>globalThis[vk],sync:()=>{let t=globalThis[JE];if(t===void 0)throw new Error(Vo("RemoteConfig"));return t}},XE=new U("angularfire2.remote-config-instances");function l6(t,e){if(!gp.sync())return null;let n=dt(yk,t,e);return n&&new Ju(n)}function d6(t){return(e,n)=>{if(!gp.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new Ju(r)}}var h6={provide:ZE,deps:[[new te,XE]]},f6={provide:Ju,useFactory:l6,deps:[[new te,XE],Be]};function Ik(t,...e){return q("angularfire",je.full,"rc"),Oe([f6,h6,{provide:gi,useValue:gp.async,multi:!0},{provide:XE,useFactory:d6(t),multi:!0,deps:[Z,me,Je,ze,...e]}])}var Nse=gp.async;var wk=we(gk,!0);var Ek="@firebase/vertexai-preview",Tk="0.0.4";var Ck="vertexAI",bk="us-central1";var eT=class{constructor(e,n,r,i){var s;this.app=e,this.options=i;let o=r?.getImmediate({optional:!0}),a=n?.getImmediate({optional:!0});this.auth=a||null,this.appCheck=o||null,this.location=((s=this.options)===null||s===void 0?void 0:s.location)||bk}_delete(){return Promise.resolve()}};var tT=function(t){return t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.OTHER="OTHER",t}(tT||{});var Fse=[tT.RECITATION,tT.SAFETY];function Dk(t=ct(),e){return t=fe(t),at(t,Ck).getImmediate({identifier:e?.location||bk})}function p6(){tt(new et(Ck,(t,{instanceIdentifier:e})=>{let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new eT(n,r,i,{location:e})},"PUBLIC").setMultipleInstances(!0)),q(Ek,Tk),q(Ek,Tk,"esm2017")}p6();var Xu=class{constructor(e){return e}},Sk="vertexai",nT=class{constructor(){return ot(Sk)}};var rT=new U("angularfire2.vertexai-instances");function g6(t,e){let n=dt(Sk,t,e);return n&&new Xu(n)}function m6(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Xu(r)}}var _6={provide:nT,deps:[[new te,rT]]},y6={provide:Xu,useFactory:g6,deps:[[new te,rT],Be]};function Ak(t,...e){return q("angularfire",je.full,"vertexai"),Oe([y6,_6,{provide:rT,useFactory:m6(t),multi:!0,deps:[Z,me,Je,ze,[new te,Jt],...e]}])}var Rk=we(Dk,!0);var Nk={firebaseConfig:{apiKey:"AIzaSyBggO56pZ3V5jgNnv_4i_CpUbgU_iGvcsk",authDomain:"dash-boar-7ee0d.firebaseapp.com",projectId:"dash-boar-7ee0d",storageBucket:"dash-boar-7ee0d.firebasestorage.app",messagingSenderId:"325394396819",appId:"1:325394396819:web:e9673769b33be96849bf66",measurementId:"G-V0X3V5XKL2"},production:!0};var xk={providers:[rA({eventCoalescing:!0}),d0(h0),f0(()=>p0(Nk.firebaseConfig)),oR(()=>cR()),RR(()=>SR()),AR,Wy,Px(()=>kx()),DM(()=>SM()),kM(()=>OM()),QM(()=>YM()),JM(()=>XM()),dk(()=>hk()),Ik(()=>wk()),Ak(()=>Rk())]};var Ni=class t{firestore=P(As);destroy$=new nt;constructor(){}delete(e){return Mx(Wf(this.collectionRef,e))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}generateNextId(){return y(this,null,function*(){let e=yield iw(this.collectionRef),n=0;return e.forEach(r=>{let i=r.data(),s=parseInt(i.id,10);!isNaN(s)&&s>n&&(n=s)}),(n+1).toString()})}createData(e,n){let r=Wf(this.collectionRef,e);return sw(r,n)}updateData(e,n){return sw(Wf(this.collectionRef,e),n,{merge:!0})}getDataById(e){return y(this,null,function*(){let n=Ox(this.collectionRef,Fx("id","==",e)),r=yield iw(n);if(!r.empty)return r.docs[0].data()})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};var mp=class t extends Ni{collectionPath="/drivers";collectionRef=da(this.firestore,this.collectionPath);constructor(){super()}getAll(){return la(this.collectionRef).pipe(sn(this.destroy$),Q(e=>e.filter(n=>!n.deleted)))}create(e){return y(this,null,function*(){return e.id=yield this.generateNextId(),this.createData(e.id,e)})}update(e){return this.updateData(e.id,e)}getById(e){return this.getDataById(e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};var xi=class t{constructor(){}get(){return{durationHour:24,endTyreChangeWindowHour:14,fuelDurationMinute:120,minDriverChange:30,minStintMinute:5,minTyreChange:1,startTyreChangeWindowHour:10}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};var Pi=class t extends Ni{collectionPath="/races";collectionRef=da(this.firestore,this.collectionPath);raceConfigService=P(xi);activeRace=Hm(void 0);constructor(){super(),this.getAll().pipe(sn(this.destroy$)).subscribe(e=>{let n=this.getActiveRace(e);this.activeRace.set(n)})}getAll(){return la(this.collectionRef).pipe(sn(this.destroy$),Q(e=>e.filter(n=>!n.deleted)))}create(e){return y(this,null,function*(){return this.activeRace()!==void 0?(console.warn("Race already active -> "+this.activeRace()),Promise.resolve()):(e.id=yield this.generateNextId(),this.createData(e.id,e))})}updateRace(e){return this.updateData(e.id,e)}getById(e){return this.getDataById(e)}getActiveRace(e){let n=new Date;for(let r of e){let i=r.start.toDate();if(i.setHours(i.getHours()+this.raceConfigService.get().durationHour),i>n)return r}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};var v6=Math.pow(10,8)*24*60*60*1e3,Voe=-v6;var Pk=864e5,Mk=6e4,_p=36e5;var I6=3600;var kk=I6*24,Uoe=kk*7,w6=kk*365.2425,E6=w6/12,joe=E6*3,iT=Symbol.for("constructDateFrom");function mn(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&iT in t?t[iT](e):t instanceof Date?new t.constructor(e):new Date(e)}function qe(t,e){return mn(e||t,t)}function Ok(t,e,n){let r=qe(t,n?.in);return isNaN(e)?mn(n?.in||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function Fk(t,e,n){let r=qe(t,n?.in);if(isNaN(e))return mn(n?.in||t,NaN);if(!e)return r;let i=r.getDate(),s=mn(n?.in||t,r.getTime());s.setMonth(r.getMonth()+e+1,0);let o=s.getDate();return i>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function Sa(t,e,n){let{years:r=0,months:i=0,weeks:s=0,days:o=0,hours:a=0,minutes:c=0,seconds:l=0}=e,d=qe(t,n?.in),f=i||r?Fk(d,i+r*12):d,g=o||s?Ok(f,o+s*7):f,_=c+a*60,R=(l+_*60)*1e3;return mn(n?.in||t,+g+R)}function Lk(t,e,n){return mn(n?.in||t,+qe(t)+e)}function Vk(t,e,n){return Lk(t,e*_p,n)}function sT(t){let e=qe(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Ft(t,...e){let n=mn.bind(null,t||e.find(r=>typeof r=="object"));return e.map(n)}function oT(t,e){let n=qe(t,e?.in);return n.setHours(0,0,0,0),n}function Uk(t,e,n){let[r,i]=Ft(n?.in,t,e),s=oT(r),o=oT(i),a=+s-sT(s),c=+o-sT(o);return Math.round((a-c)/Pk)}function Ls(t,e){let n=+qe(t)-+qe(e);return n<0?-1:n>0?1:n}function jk(t,e,n){let[r,i]=Ft(n?.in,t,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function Bk(t,e,n){let[r,i]=Ft(n?.in,t,e);return r.getFullYear()-i.getFullYear()}function Hk(t,e,n){let[r,i]=Ft(n?.in,t,e),s=$k(r,i),o=Math.abs(Uk(r,i));r.setDate(r.getDate()-s*o);let a=+($k(r,i)===-s),c=s*(o-a);return c===0?0:c}function $k(t,e){let n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function Aa(t){return e=>{let r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function qk(t,e,n){let[r,i]=Ft(n?.in,t,e),s=(+r-+i)/_p;return Aa(n?.roundingMethod)(s)}function yp(t,e){return+qe(t)-+qe(e)}function zk(t,e,n){let r=yp(t,e)/Mk;return Aa(n?.roundingMethod)(r)}function Gk(t,e){let n=qe(t,e?.in);return n.setHours(23,59,59,999),n}function Wk(t,e){let n=qe(t,e?.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Kk(t,e){let n=qe(t,e?.in);return+Gk(n,e)==+Wk(n,e)}function Qk(t,e,n){let[r,i,s]=Ft(n?.in,t,t,e),o=Ls(i,s),a=Math.abs(jk(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let c=Ls(i,s)===-o;Kk(r)&&a===1&&Ls(r,s)===1&&(c=!1);let l=o*(a-+c);return l===0?0:l}function Yk(t,e,n){let r=yp(t,e)/1e3;return Aa(n?.roundingMethod)(r)}function Zk(t,e,n){let[r,i]=Ft(n?.in,t,e),s=Ls(r,i),o=Math.abs(Bk(r,i));r.setFullYear(1584),i.setFullYear(1584);let a=Ls(r,i)===-s,c=s*(o-+a);return c===0?0:c}function Jk(t,e){let[n,r]=Ft(t,e.start,e.end);return{start:n,end:r}}function Xk(t,e){let{start:n,end:r}=Jk(e?.in,t),i={},s=Zk(r,n);s&&(i.years=s);let o=Sa(n,{years:i.years}),a=Qk(r,o);a&&(i.months=a);let c=Sa(o,{months:i.months}),l=Hk(r,c);l&&(i.days=l);let d=Sa(c,{days:i.days}),f=qk(r,d);f&&(i.hours=f);let g=Sa(d,{hours:i.hours}),_=zk(r,g);_&&(i.minutes=_);let E=Sa(g,{minutes:i.minutes}),R=Yk(r,E);return R&&(i.seconds=R),i}function el(t){let e=Xk({end:t,start:new Date});return e.hours&&e.hours<0||e.minutes&&e.minutes<0||e.seconds&&e.seconds<0?"00:00:00":[aT(e.hours),aT(e.minutes),aT(e.seconds)].join(":")}function aT(t){return t?t<10?`0${t}`:`${t}`:""}function T6(t,e){if(t&1){let n=YS();Ue(0,"button",3),Co("click",function(){OD(n);let i=Dr();return FD(i.startRace())}),st(1," Start race "),Fe()}}function C6(t,e){if(t&1&&(Ue(0,"div",2),st(1),Fe()),t&2){let n=Dr();cn(),Sr(" ",n.countdown," ")}}var vp=class t{raceService=P(Pi);raceConfigService=P(xi);durationHour=this.raceConfigService.get().durationHour;intervalId;activeRace=this.raceService.activeRace;countdown="--:--:--";constructor(){}ngOnInit(){this.intervalId=setInterval(()=>{let e=this.activeRace();if(e){let n=Vk(e.start.toDate(),this.durationHour);this.countdown=el(n)}},1e3)}ngOnDestroy(){this.intervalId&&clearInterval(this.intervalId)}startRace(){this.raceService.create({id:"1",start:_t.now(),deleted:!1})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ui({type:t,selectors:[["app-race"]],standalone:!0,features:[pi],decls:4,vars:1,consts:[[1,"flex","items-center","justify-center","h-20"],[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded"],[1,"text-4xl","font-bold","font-mono"],[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded",3,"click"]],template:function(n,r){n&1&&(Ue(0,"div",0)(1,"div"),hi(2,T6,2,0,"button",1)(3,C6,2,1,"div",2),Fe()()),n&2&&(cn(2),fi(r.activeRace()?3:2))}})};function cT(t){t||(kd(cT),t=P(Eo));let e=new ae(n=>t.onDestroy(n.next.bind(n)));return n=>n.pipe(sn(e))}function uT(t,e){!e?.injector&&kd(uT);let n=e?.injector??P(me),r=new cc(1),i=Ym(()=>{let s;try{s=t()}catch(o){Zd(()=>r.error(o));return}Zd(()=>r.next(s))},{injector:n,manualCleanup:!0});return n.get(Eo).onDestroy(()=>{i.destroy(),r.complete()}),r.asObservable()}var Ip=class t extends Ni{raceService=P(Pi);collectionPath="/pits";collectionRef=da(this.firestore,this.collectionPath);activeRace;constructor(){super(),this.activeRace=this.raceService.activeRace}getRacePits(){return no({pits:la(this.collectionRef),activeRace:uT(this.activeRace)}).pipe(sn(this.destroy$),Q(({pits:e,activeRace:n})=>n?e.filter(r=>!r.deleted&&r.raceId===n.id):[]))}create(e){return y(this,null,function*(){return e.id=yield this.generateNextId(),this.createData(e.id,e)})}update(e){return this.updateData(e.id,e)}getById(e){return this.getDataById(e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};var b6=t=>({"mb-2":t}),D6=t=>({"animate-bounce":t});function S6(t,e){if(t&1&&(Ue(0,"div",4),st(1),Fe()),t&2){let n=Dr();cn(),Sr(" Remaining: ",n.remainingTyreChange," ")}}function A6(t,e){t&1&&(Ue(0,"div",5),st(1," Completed! "),Fe())}function R6(t,e){if(t&1&&(Ue(0,"div",6),st(1," Window open "),Fe()),t&2){let n=Dr();Wd("ngClass",zm(1,D6,n.remainingTyreChange>0))}}function N6(t,e){t&1&&(Ue(0,"div",7),st(1," Window close "),Fe())}function x6(t,e){if(t&1&&(st(0),Gm(1,"date")),t&2){let n=Dr(2);Sr(" ",Wm(1,1,n.openingTime(),"HH:mm:ss")," ")}}function P6(t,e){t&1&&st(0," --:--:-- ")}function M6(t,e){if(t&1&&(st(0),Gm(1,"date")),t&2){let n=Dr(2);Sr(" ",Wm(1,1,n.closingTime(),"HH:mm:ss")," ")}}function k6(t,e){t&1&&st(0," --:--:-- ")}function O6(t,e){if(t&1&&(Ue(0,"div",8)(1,"div")(2,"div",9),st(3,"Opening time"),Fe(),Ue(4,"div",10),hi(5,x6,2,4)(6,P6,1,0),Fe()(),Ue(7,"div")(8,"div",9),st(9,"Closing time"),Fe(),Ue(10,"div",11),hi(11,M6,2,4)(12,k6,1,0),Fe()()(),Ue(13,"div",8)(14,"div")(15,"div",9),st(16,"Opening in"),Fe(),Ue(17,"div",10),st(18),Fe()(),Ue(19,"div")(20,"div",9),st(21,"Closing in"),Fe(),Ue(22,"div",11),st(23),Fe()()()),t&2){let n=Dr();cn(5),fi(n.openingTime()?5:6),cn(6),fi(n.closingTime()?11:12),cn(7),Sr(" ",n.countdownOpeningTime," "),cn(5),Sr(" ",n.countdownClosingTime," ")}}var wp=class t{raceService=P(Pi);raceConfigService=P(xi);pitService=P(Ip);startTyreChangeWindowHour=this.raceConfigService.get().startTyreChangeWindowHour;endTyreChangeWindowHour=this.raceConfigService.get().endTyreChangeWindowHour;minTyreChange=this.raceConfigService.get().minTyreChange;intervalId;isOpen=!0;isTyreChangeWindowOpen=!1;remainingTyreChange=this.raceConfigService.get().minTyreChange;activeRace=this.raceService.activeRace;openingTime=Yd(()=>{let e=this.activeRace();if(e){let n=e.start.toDate().getTime()+this.startTyreChangeWindowHour*60*60*1e3;return new Date(n)}});closingTime=Yd(()=>{let e=this.activeRace();if(e){let n=e.start.toDate().getTime()+this.endTyreChangeWindowHour*60*60*1e3;return new Date(n)}});countdownOpeningTime="--:--:--";countdownClosingTime="--:--:--";constructor(){this.intervalId=setInterval(()=>{let e=this.openingTime(),n=this.closingTime();this.updateCountdownOpeningTime(e),this.updateCountdownClosingTime(n),this.updateTyreChangeWindowOpen(e,n)},1e3),this.pitService.getRacePits().pipe(cT()).subscribe(e=>{let n=e.filter(r=>r.tyreChange).length;this.remainingTyreChange=this.minTyreChange-n})}ngOnDestroy(){this.intervalId&&clearInterval(this.intervalId)}updateCountdownOpeningTime(e){e?this.countdownOpeningTime=el(e):this.countdownOpeningTime="--:--:--"}updateCountdownClosingTime(e){e?this.countdownClosingTime=el(e):this.countdownClosingTime="--:--:--"}updateTyreChangeWindowOpen(e,n){if(e&&n){let r=new Date;this.isTyreChangeWindowOpen=r>=e&&r<=n}else this.isTyreChangeWindowOpen=!1}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ui({type:t,selectors:[["app-tyre-change-window"]],standalone:!0,features:[pi],decls:10,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-4","max-w-md","mx-auto","border","hover:shadow-2xl","hover:cursor-pointer",3,"click"],[1,"flex","justify-between","items-center",3,"ngClass"],[1,"text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[1,"bg-red-500","px-2","py-1","rounded-lg","text-white","font-medium","mr-1","hover:cursor-default"],[1,"flex","justify-between"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-black","font-mono","text-right"]],template:function(n,r){n&1&&(Ue(0,"div",0),Co("click",function(){return r.isOpen=!r.isOpen}),Ue(1,"div",1)(2,"div",2),st(3,"\u{1F6DE} Tyre change"),Fe(),Ue(4,"div",3),hi(5,S6,2,1,"div",4)(6,A6,2,0,"div",5)(7,R6,2,3,"div",6)(8,N6,2,0,"div",7),Fe()(),hi(9,O6,24,4),Fe()),n&2&&(cn(),Wd("ngClass",zm(4,b6,r.isOpen)),cn(4),fi(r.remainingTyreChange>0?5:6),cn(2),fi(r.isTyreChangeWindowOpen?7:8),cn(2),fi(r.isOpen?9:-1))},dependencies:[IA,vA]})};var Ep=class t{driverService=P(mp);drivers$;constructor(){this.drivers$=this.driverService.getAll()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ui({type:t,selectors:[["app-root"]],standalone:!0,features:[pi],decls:9,vars:0,consts:[[1,"container","mx-auto"],[1,"container","px-4","py-2","flex","items-center","justify-between"],[1,"flex","items-center"],[1,"text-3xl","font-semibold"]],template:function(n,r){n&1&&(Ue(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),st(4,"\u{1F3CE}\uFE0F dash-boar \u{1F417}"),Fe()(),Ue(5,"div"),ns(6,"app-race"),Fe()(),ns(7,"app-tyre-change-window"),Fe(),ns(8,"router-outlet"))},dependencies:[z_,vp,wp]})};AA(Ep,xk).catch(t=>console.error(t));
