import{$ as Gt,A as zt,B as qn,C as hl,D as mt,E as oC,F as aC,G as zn,H as ki,I as za,J as Ga,K as Wa,L as Oi,M as cC,N as uC,O as lC,P as dC,Q as Ka,R as Qa,S as fe,T as Je,U as At,V as Gn,W as Bp,X as fl,Y as Xe,Z as st,_ as pr,a as V,aa as hC,b as Ae,ba as ot,c as zr,ca as pl,d as y,da as q,e as F,ea as fC,f as Vs,g as JT,h as XT,i as eC,j as tC,k as nC,l as Gr,m as Up,n as jp,o as Us,p as St,q as $a,r as rC,s as Ha,t as dl,u as iC,v as Hn,w as sC,x as fr,y as xi,z as qa}from"./chunk-VUN4IAWB.js";function pC(t,e){return Object.is(t,e)}var ft=null,Ya=!1,gl=1,gr=Symbol("SIGNAL");function pe(t){let e=ft;return ft=t,e}function gC(){return ft}function eO(){return Ya}var js={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function zp(t){if(Ya)throw new Error("");if(ft===null)return;ft.consumerOnSignalRead(t);let e=ft.nextProducerIndex++;if(wl(ft),e<ft.producerNode.length&&ft.producerNode[e]!==t&&Za(ft)){let n=ft.producerNode[e];Il(n,ft.producerIndexOfThis[e])}ft.producerNode[e]!==t&&(ft.producerNode[e]=t,ft.producerIndexOfThis[e]=Za(ft)?IC(t,ft,e):0),ft.producerLastReadVersion[e]=t.version}function tO(){gl++}function mC(t){if(!(Za(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===gl)){if(!t.producerMustRecompute(t)&&!yl(t)){t.dirty=!1,t.lastCleanEpoch=gl;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=gl}}function _C(t){if(t.liveConsumerNode===void 0)return;let e=Ya;Ya=!0;try{for(let n of t.liveConsumerNode)n.dirty||vC(n)}finally{Ya=e}}function yC(){return ft?.consumerAllowSignalWrites!==!1}function vC(t){t.dirty=!0,_C(t),t.consumerMarkedDirty?.(t)}function Ja(t){return t&&(t.nextProducerIndex=0),pe(t)}function _l(t,e){if(pe(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Za(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Il(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function yl(t){wl(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(mC(n),r!==n.version))return!0}return!1}function vl(t){if(wl(t),Za(t))for(let e=0;e<t.producerNode.length;e++)Il(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function IC(t,e,n){if(wC(t),t.liveConsumerNode.length===0&&EC(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=IC(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Il(t,e){if(wC(t),t.liveConsumerNode.length===1&&EC(t))for(let r=0;r<t.producerNode.length;r++)Il(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];wl(i),i.producerIndexOfThis[r]=e}}function Za(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function wl(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function wC(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function EC(t){return t.producerNode!==void 0}function TC(t){let e=Object.create(nO);e.computation=t;let n=()=>{if(mC(e),zp(e),e.value===ml)throw e.error;return e.value};return n[gr]=e,n}var $p=Symbol("UNSET"),Hp=Symbol("COMPUTING"),ml=Symbol("ERRORED"),nO=Ae(V({},js),{value:$p,dirty:!0,error:null,equal:pC,producerMustRecompute(t){return t.value===$p||t.value===Hp},producerRecomputeValue(t){if(t.value===Hp)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Hp;let n=Ja(t),r;try{r=t.computation()}catch(i){r=ml,t.error=i}finally{_l(t,n)}if(e!==$p&&e!==ml&&r!==ml&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function rO(){throw new Error}var CC=rO;function bC(){CC()}function DC(t){CC=t}var iO=null;function SC(t){let e=Object.create(RC);e.value=t;let n=()=>(zp(e),e.value);return n[gr]=e,n}function Gp(t,e){yC()||bC(),t.equal(t.value,e)||(t.value=e,sO(t))}function AC(t,e){yC()||bC(),Gp(t,e(t.value))}var RC=Ae(V({},js),{equal:pC,value:void 0});function sO(t){t.version++,tO(),_C(t),iO?.()}function NC(t,e,n){let r=Object.create(oO);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;let i=c=>{r.cleanupFn=c};function s(c){return c.fn===null&&c.schedule===null}function o(c){s(c)||(vl(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=qp)}let a=()=>{if(r.fn===null)return;if(eO())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!yl(r))return;r.hasRun=!0;let c=Ja(r);try{r.cleanupFn(),r.cleanupFn=qp,r.fn(i)}finally{_l(r,c)}};return r.ref={notify:()=>vC(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>o(r),[gr]:r},r.ref}var qp=()=>{},oO=Ae(V({},js),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule!==null&&t.schedule(t.ref)},hasRun:!1,cleanupFn:qp});function ie(t){return typeof t=="function"}function Bs(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var El=Bs(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Fi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ge=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ie(r))try{r()}catch(s){e=s instanceof El?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{PC(s)}catch(o){e=e??[],o instanceof El?e=[...e,...o.errors]:e.push(o)}}if(e)throw new El(e)}}add(e){var n;if(e&&e!==this)if(this.closed)PC(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Fi(n,e)}remove(e){let{_finalizers:n}=this;n&&Fi(n,e),e instanceof t&&e._removeParent(this)}};Ge.EMPTY=(()=>{let t=new Ge;return t.closed=!0,t})();var Wp=Ge.EMPTY;function Tl(t){return t instanceof Ge||t&&"closed"in t&&ie(t.remove)&&ie(t.add)&&ie(t.unsubscribe)}function PC(t){ie(t)?t():t.unsubscribe()}var Dn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var $s={setTimeout(t,e,...n){let{delegate:r}=$s;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=$s;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Cl(t){$s.setTimeout(()=>{let{onUnhandledError:e}=Dn;if(e)e(t);else throw t})}function Xa(){}var MC=Kp("C",void 0,void 0);function xC(t){return Kp("E",void 0,t)}function kC(t){return Kp("N",t,void 0)}function Kp(t,e,n){return{kind:t,value:e,error:n}}var Li=null;function Hs(t){if(Dn.useDeprecatedSynchronousErrorHandling){let e=!Li;if(e&&(Li={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Li;if(Li=null,n)throw r}}else t()}function OC(t){Dn.useDeprecatedSynchronousErrorHandling&&Li&&(Li.errorThrown=!0,Li.error=t)}var Vi=class extends Ge{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Tl(e)&&e.add(this)):this.destination=uO}static create(e,n,r){return new qs(e,n,r)}next(e){this.isStopped?Yp(kC(e),this):this._next(e)}error(e){this.isStopped?Yp(xC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Yp(MC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},aO=Function.prototype.bind;function Qp(t,e){return aO.call(t,e)}var Zp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){bl(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){bl(r)}else bl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){bl(n)}}},qs=class extends Vi{constructor(e,n,r){super();let i;if(ie(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Dn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Qp(e.next,s),error:e.error&&Qp(e.error,s),complete:e.complete&&Qp(e.complete,s)}):i=e}this.destination=new Zp(i)}};function bl(t){Dn.useDeprecatedSynchronousErrorHandling?OC(t):Cl(t)}function cO(t){throw t}function Yp(t,e){let{onStoppedNotification:n}=Dn;n&&$s.setTimeout(()=>n(t,e))}var uO={closed:!0,next:Xa,error:cO,complete:Xa};var zs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Lt(t){return t}function Dl(...t){return Jp(t)}function Jp(t){return t.length===0?Lt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ae=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=dO(n)?n:new qs(n,r,i);return Hs(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=FC(r),new r((i,s)=>{let o=new qs({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[zs](){return this}pipe(...n){return Jp(n)(this)}toPromise(n){return n=FC(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function FC(t){var e;return(e=t??Dn.Promise)!==null&&e!==void 0?e:Promise}function lO(t){return t&&ie(t.next)&&ie(t.error)&&ie(t.complete)}function dO(t){return t&&t instanceof Vi||lO(t)&&Tl(t)}function Xp(t){return ie(t?.lift)}function ce(t){return e=>{if(Xp(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(t,e,n,r,i){return new ec(t,e,n,r,i)}var ec=class extends Vi{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Gs(){return ce((t,e)=>{let n=null;t._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Ws=class extends ae{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Xp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ge;let n=this.getSubject();e.add(this.source.subscribe(ue(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ge.EMPTY)}return e}refCount(){return Gs()(this)}};var LC=Bs(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var et=(()=>{class t extends ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Sl(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new LC}next(n){Hs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Hs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Hs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Wp:(this.currentObservers=null,s.push(n),new Ge(()=>{this.currentObservers=null,Fi(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new ae;return n.source=this,n}}return t.create=(e,n)=>new Sl(e,n),t})(),Sl=class extends et{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Wp}};var It=class extends et{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var tc={now(){return(tc.delegate||Date).now()},delegate:void 0};var nc=class extends et{constructor(e=1/0,n=1/0,r=tc){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var Al=class extends Ge{constructor(e,n){super()}schedule(e,n=0){return this}};var rc={setInterval(t,e,...n){let{delegate:r}=rc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=rc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ks=class extends Al{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return rc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&rc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Fi(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Qs=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Qs.now=tc.now;var Ys=class extends Qs{constructor(e,n=Qs.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var eg=new Ys(Ks);var Rl=class extends Ks{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Nl=class extends Ys{};var tg=new Nl(Rl);var tn=new ae(t=>t.complete());function VC(t){return t&&ie(t.schedule)}function UC(t){return t[t.length-1]}function jC(t){return ie(UC(t))?t.pop():void 0}function Wr(t){return VC(UC(t))?t.pop():void 0}function ng(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function $C(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(p){o(p)}}function c(d){try{l(r.throw(d))}catch(p){o(p)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function BC(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ui(t){return this instanceof Ui?(this.v=t,this):new Ui(t)}function HC(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(_){return function(E){return Promise.resolve(E).then(_,p)}}function a(_,E){r[_]&&(i[_]=function(R){return new Promise(function(A,x){s.push([_,R,A,x])>1||c(_,R)})},E&&(i[_]=E(i[_])))}function c(_,E){try{l(r[_](E))}catch(R){g(s[0][3],R)}}function l(_){_.value instanceof Ui?Promise.resolve(_.value.v).then(d,p):g(s[0][2],_)}function d(_){c("next",_)}function p(_){c("throw",_)}function g(_,E){_(E),s.shift(),s.length&&c(s[0][0],s[0][1])}}function qC(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof BC=="function"?BC(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Pl=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ml(t){return ie(t?.then)}function xl(t){return ie(t[zs])}function kl(t){return Symbol.asyncIterator&&ie(t?.[Symbol.asyncIterator])}function Ol(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function hO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Fl=hO();function Ll(t){return ie(t?.[Fl])}function Vl(t){return HC(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Ui(n.read());if(i)return yield Ui(void 0);yield yield Ui(r)}}finally{n.releaseLock()}})}function Ul(t){return ie(t?.getReader)}function at(t){if(t instanceof ae)return t;if(t!=null){if(xl(t))return fO(t);if(Pl(t))return pO(t);if(Ml(t))return gO(t);if(kl(t))return zC(t);if(Ll(t))return mO(t);if(Ul(t))return _O(t)}throw Ol(t)}function fO(t){return new ae(e=>{let n=t[zs]();if(ie(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function pO(t){return new ae(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function gO(t){return new ae(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Cl)})}function mO(t){return new ae(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function zC(t){return new ae(e=>{yO(t,e).catch(n=>e.error(n))})}function _O(t){return zC(Vl(t))}function yO(t,e){var n,r,i,s;return $C(this,void 0,void 0,function*(){try{for(n=qC(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function Wt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Kr(t,e=0){return ce((n,r)=>{n.subscribe(ue(r,i=>Wt(r,t,()=>r.next(i),e),()=>Wt(r,t,()=>r.complete(),e),i=>Wt(r,t,()=>r.error(i),e)))})}function Qr(t,e=0){return ce((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function GC(t,e){return at(t).pipe(Qr(e),Kr(e))}function WC(t,e){return at(t).pipe(Qr(e),Kr(e))}function KC(t,e){return new ae(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function QC(t,e){return new ae(n=>{let r;return Wt(n,e,()=>{r=t[Fl](),Wt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>ie(r?.return)&&r.return()})}function jl(t,e){if(!t)throw new Error("Iterable cannot be null");return new ae(n=>{Wt(n,e,()=>{let r=t[Symbol.asyncIterator]();Wt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function YC(t,e){return jl(Vl(t),e)}function ZC(t,e){if(t!=null){if(xl(t))return GC(t,e);if(Pl(t))return KC(t,e);if(Ml(t))return WC(t,e);if(kl(t))return jl(t,e);if(Ll(t))return QC(t,e);if(Ul(t))return YC(t,e)}throw Ol(t)}function We(t,e){return e?ZC(t,e):at(t)}function K(...t){let e=Wr(t);return We(t,e)}function Zs(t,e){let n=ie(t)?t:()=>t,r=i=>i.error(n());return new ae(e?i=>e.schedule(r,0,i):r)}function rg(t){return!!t&&(t instanceof ae||ie(t.lift)&&ie(t.subscribe))}var mr=Bs(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Q(t,e){return ce((n,r)=>{let i=0;n.subscribe(ue(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:vO}=Array;function IO(t,e){return vO(e)?t(...e):t(e)}function JC(t){return Q(e=>IO(t,e))}var{isArray:wO}=Array,{getPrototypeOf:EO,prototype:TO,keys:CO}=Object;function XC(t){if(t.length===1){let e=t[0];if(wO(e))return{args:e,keys:null};if(bO(e)){let n=CO(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function bO(t){return t&&typeof t=="object"&&EO(t)===TO}function eb(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Js(...t){let e=Wr(t),n=jC(t),{args:r,keys:i}=XC(t);if(r.length===0)return We([],e);let s=new ae(DO(r,e,i?o=>eb(i,o):Lt));return n?s.pipe(JC(n)):s}function DO(t,e,n=Lt){return r=>{tb(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)tb(e,()=>{let l=We(t[c],e),d=!1;l.subscribe(ue(r,p=>{s[c]=p,d||(d=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function tb(t,e,n){t?Wt(n,t,e):e()}function nb(t,e,n,r,i,s,o,a){let c=[],l=0,d=0,p=!1,g=()=>{p&&!c.length&&!l&&e.complete()},_=R=>l<r?E(R):c.push(R),E=R=>{s&&e.next(R),l++;let A=!1;at(n(R,d++)).subscribe(ue(e,x=>{i?.(x),s?_(x):e.next(x)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;c.length&&l<r;){let x=c.shift();o?Wt(e,o,()=>E(x)):E(x)}g()}catch(x){e.error(x)}}))};return t.subscribe(ue(e,_,()=>{p=!0,g()})),()=>{a?.()}}function tt(t,e,n=1/0){return ie(e)?tt((r,i)=>Q((s,o)=>e(r,s,i,o))(at(t(r,i))),n):(typeof e=="number"&&(n=e),ce((r,i)=>nb(r,i,t,n)))}function ig(t=1/0){return tt(Lt,t)}function rb(){return ig(1)}function Xs(...t){return rb()(We(t,Wr(t)))}function Bl(t){return new ae(e=>{at(t()).subscribe(e)})}function Vt(t,e){return ce((n,r)=>{let i=0;n.subscribe(ue(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Yr(t){return ce((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ue(n,void 0,void 0,o=>{s=at(t(o,Yr(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function ib(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(ue(o,d=>{let p=l++;c=a?t(c,d,p):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function ji(t,e){return ie(e)?tt(t,e,1):tt(t,1)}function Zr(t){return ce((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function _r(t){return t<=0?()=>tn:ce((e,n)=>{let r=0;e.subscribe(ue(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function sg(t){return Q(()=>t)}function $l(t,e=Lt){return t=t??SO,ce((n,r)=>{let i,s=!0;n.subscribe(ue(r,o=>{let a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function SO(t,e){return t===e}function Hl(t=AO){return ce((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function AO(){return new mr}function ic(t){return ce((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Wn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Vt((i,s)=>t(i,s,r)):Lt,_r(1),n?Zr(e):Hl(()=>new mr))}function og(t,e,n,r){return ce((i,s)=>{let o;!e||typeof e=="function"?o=e:{duration:n,element:o,connector:r}=e;let a=new Map,c=E=>{a.forEach(E),E(s)},l=E=>c(R=>R.error(E)),d=0,p=!1,g=new ec(s,E=>{try{let R=t(E),A=a.get(R);if(!A){a.set(R,A=r?r():new et);let x=_(R,A);if(s.next(x),n){let L=ue(A,()=>{A.complete(),L?.unsubscribe()},void 0,void 0,()=>a.delete(R));g.add(at(n(x)).subscribe(L))}}A.next(o?o(E):E)}catch(R){l(R)}},()=>c(E=>E.complete()),l,()=>a.clear(),()=>(p=!0,d===0));i.subscribe(g);function _(E,R){let A=new ae(x=>{d++;let L=R.subscribe(x);return()=>{L.unsubscribe(),--d===0&&p&&g.unsubscribe()}});return A.key=E,A}})}function eo(t){return t<=0?()=>tn:ce((e,n)=>{let r=[];e.subscribe(ue(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function ag(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Vt((i,s)=>t(i,s,r)):Lt,eo(1),n?Zr(e):Hl(()=>new mr))}function ql(){return ce((t,e)=>{let n,r=!1;t.subscribe(ue(e,i=>{let s=n;n=i,r&&e.next([s,i]),r=!0}))})}function zl(t,e){return ce(ib(t,e,arguments.length>=2,!0))}function to(...t){let e=Wr(t);return ce((n,r)=>{(e?Xs(t,n,e):Xs(t,n)).subscribe(r)})}function Kt(t,e){return ce((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(ue(r,c=>{i?.unsubscribe();let l=0,d=s++;at(t(c,d)).subscribe(i=ue(r,p=>r.next(e?e(c,p,d,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function nn(t){return ce((e,n)=>{at(t).subscribe(ue(n,()=>n.complete(),Xa)),!n.closed&&e.subscribe(n)})}function pt(t,e,n){let r=ie(t)||e||n?{next:t,error:e,complete:n}:t;return r?ce((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ue(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Lt}var W=class extends Error{constructor(e,n){super(Xg(e,n)),this.code=e}};function Xg(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Ed(t){return{toString:t}.toString()}var Gl="__parameters__";function RO(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function NO(t,e,n){return Ed(()=>{let r=RO(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,d){let p=c.hasOwnProperty(Gl)?c[Gl]:Object.defineProperty(c,Gl,{value:[]})[Gl];for(;p.length<=d;)p.push(null);return(p[d]=p[d]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var sc=globalThis;function Me(t){for(let e in t)if(t[e]===Me)return e;throw Error("Could not find renamed property on target object.")}function rn(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(rn).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function sb(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var PO=Me({__forward_ref__:Me});function Ub(t){return t.__forward_ref__=Ub,t.toString=function(){return rn(this())},t}function fn(t){return jb(t)?t():t}function jb(t){return typeof t=="function"&&t.hasOwnProperty(PO)&&t.__forward_ref__===Ub}function H(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Td(t){return ob(t,$b)||ob(t,Hb)}function Bb(t){return Td(t)!==null}function ob(t,e){return t.hasOwnProperty(e)?t[e]:null}function MO(t){let e=t&&(t[$b]||t[Hb]);return e||null}function ab(t){return t&&(t.hasOwnProperty(cb)||t.hasOwnProperty(xO))?t[cb]:null}var $b=Me({\u0275prov:Me}),cb=Me({\u0275inj:Me}),Hb=Me({ngInjectableDef:Me}),xO=Me({ngInjectorDef:Me}),U=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=H({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function qb(t){return t&&!!t.\u0275providers}var kO=Me({\u0275cmp:Me}),OO=Me({\u0275dir:Me}),FO=Me({\u0275pipe:Me}),LO=Me({\u0275mod:Me}),ed=Me({\u0275fac:Me}),cc=Me({__NG_ELEMENT_ID__:Me}),ub=Me({__NG_ENV_ID__:Me});function zb(t){return typeof t=="string"?t:t==null?"":String(t)}function VO(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():zb(t)}function UO(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new W(-200,t)}function em(t,e){throw new W(-201,!1)}var le=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(le||{}),mg;function Gb(){return mg}function Qt(t){let e=mg;return mg=t,e}function Wb(t,e,n){let r=Td(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&le.Optional)return null;if(e!==void 0)return e;em(t,"Injector")}var jO={},uc=jO,_g="__NG_DI_FLAG__",td="ngTempTokenPath",BO="ngTokenPath",$O=/\n/gm,HO="\u0275",lb="__source",so;function qO(){return so}function Jr(t){let e=so;return so=t,e}function zO(t,e=le.Default){if(so===void 0)throw new W(-203,!1);return so===null?Wb(t,void 0,e):so.get(t,e&le.Optional?null:void 0,e)}function J(t,e=le.Default){return(Gb()||zO)(fn(t),e)}function M(t,e=le.Default){return J(t,Cd(e))}function Cd(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function yg(t){let e=[];for(let n=0;n<t.length;n++){let r=fn(t[n]);if(Array.isArray(r)){if(r.length===0)throw new W(900,!1);let i,s=le.Default;for(let o=0;o<r.length;o++){let a=r[o],c=WO(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(J(i,s))}else e.push(J(r))}return e}function GO(t,e){return t[_g]=e,t.prototype[_g]=e,t}function WO(t){return t[_g]}function KO(t,e,n,r){let i=t[td];throw e[lb]&&i.unshift(e[lb]),t.message=QO(`
`+t.message,i,n,r),t[BO]=i,t[td]=null,t}function QO(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==HO?t.slice(2):t;let i=rn(e);if(Array.isArray(e))i=e.map(rn).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):rn(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace($O,`
  `)}`}var te=GO(NO("Optional"),8);function Hi(t,e){let n=t.hasOwnProperty(ed);return n?t[ed]:null}function tm(t,e){t.forEach(n=>Array.isArray(n)?tm(n,e):e(n))}function Kb(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function nd(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var lc={},ao=[],co=new U(""),Qb=new U("",-1),Yb=new U(""),rd=class{get(e,n=uc){if(n===uc){let r=new Error(`NullInjectorError: No provider for ${rn(e)}!`);throw r.name="NullInjectorError",r}return n}},Zb=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Zb||{}),Yn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Yn||{}),ti=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(ti||{});function YO(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function vg(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];JO(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function ZO(t){return t===3||t===4||t===6}function JO(t){return t.charCodeAt(0)===64}function nm(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?db(t,n,i,null,e[++r]):db(t,n,i,null,null))}}return t}function db(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var Jb="ng-template";function XO(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&YO(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(rm(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function rm(t){return t.type===4&&t.value!==Jb}function e1(t,e,n){let r=t.type===4&&!n?Jb:t.value;return e===r}function t1(t,e,n){let r=4,i=t.attrs,s=i!==null?i1(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Sn(r)&&!Sn(c))return!1;if(o&&Sn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!e1(t,c,n)||c===""&&e.length===1){if(Sn(r))return!1;o=!0}}else if(r&8){if(i===null||!XO(t,i,c,n)){if(Sn(r))return!1;o=!0}}else{let l=e[++a],d=n1(c,i,rm(t),n);if(d===-1){if(Sn(r))return!1;o=!0;continue}if(l!==""){let p;if(d>s?p="":p=i[d+1].toLowerCase(),r&2&&l!==p){if(Sn(r))return!1;o=!0}}}}return Sn(r)||o}function Sn(t){return(t&1)===0}function n1(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return s1(e,t)}function r1(t,e,n=!1){for(let r=0;r<e.length;r++)if(t1(t,e[r],n))return!0;return!1}function i1(t){for(let e=0;e<t.length;e++){let n=t[e];if(ZO(n))return e}return t.length}function s1(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function hb(t,e){return t?":not("+e.trim()+")":e}function o1(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Sn(o)&&(e+=hb(s,i),i=""),r=o,s=s||!Sn(r);n++}return i!==""&&(e+=hb(s,i)),e}function a1(t){return t.map(o1).join(",")}function c1(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Sn(i))break;i=s}r++}return{attrs:e,classes:n}}function si(t){return Ed(()=>{let e=iD(t),n=Ae(V({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Zb.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Yn.Emulated,styles:t.styles||ao,_:null,schemas:t.schemas||null,tView:null,id:""});sD(n);let r=t.dependencies;return n.directiveDefs=pb(r,!1),n.pipeDefs=pb(r,!0),n.id=d1(n),n})}function u1(t){return qi(t)||eD(t)}function l1(t){return t!==null}function fb(t,e){if(t==null)return lc;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=ti.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==ti.None?[r,a]:r,e[s]=o):n[s]=r}return n}function bd(t){return Ed(()=>{let e=iD(t);return sD(e),e})}function Xb(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function qi(t){return t[kO]||null}function eD(t){return t[OO]||null}function tD(t){return t[FO]||null}function nD(t){let e=qi(t)||eD(t)||tD(t);return e!==null?e.standalone:!1}function rD(t,e){let n=t[LO]||null;if(!n&&e===!0)throw new Error(`Type ${rn(t)} does not have '\u0275mod' property.`);return n}function iD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||lc,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||ao,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:fb(t.inputs,e),outputs:fb(t.outputs),debugInfo:null}}function sD(t){t.features?.forEach(e=>e(t))}function pb(t,e){if(!t)return null;let n=e?tD:u1;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(l1)}function d1(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Oe(t){return{\u0275providers:t}}function h1(...t){return{\u0275providers:oD(!0,t),\u0275fromNgModule:!0}}function oD(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return tm(e,o=>{let a=o;Ig(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&aD(i,s),n}function aD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];im(i,s=>{e(s,r)})}}function Ig(t,e,n,r){if(t=fn(t),!t)return!1;let i=null,s=ab(t),o=!s&&qi(t);if(!s&&!o){let c=t.ngModule;if(s=ab(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Ig(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{tm(s.imports,d=>{Ig(d,e,n,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&aD(l,e)}if(!a){let l=Hi(i)||(()=>new i);e({provide:i,useFactory:l,deps:ao},i),e({provide:Yb,useValue:i,multi:!0},i),e({provide:co,useValue:()=>J(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;im(c,d=>{e(d,l)})}}else return!1;return i!==t&&t.providers!==void 0}function im(t,e){for(let n of t)qb(n)&&(n=n.\u0275providers),Array.isArray(n)?im(n,e):e(n)}var f1=Me({provide:String,useValue:Me});function cD(t){return t!==null&&typeof t=="object"&&f1 in t}function p1(t){return!!(t&&t.useExisting)}function g1(t){return!!(t&&t.useFactory)}function wg(t){return typeof t=="function"}var Dd=new U(""),Kl={},m1={},cg;function sm(){return cg===void 0&&(cg=new rd),cg}var gn=class{},dc=class extends gn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Tg(e,o=>this.processProvider(o)),this.records.set(Qb,no(void 0,this)),i.has("environment")&&this.records.set(gn,no(void 0,this));let s=this.records.get(Dd);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Yb,ao,le.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=pe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),pe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Jr(this),r=Qt(void 0),i;try{return e()}finally{Jr(n),Qt(r)}}get(e,n=uc,r=le.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ub))return e[ub](this);r=Cd(r);let i,s=Jr(this),o=Qt(void 0);try{if(!(r&le.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=E1(e)&&Td(e);l&&this.injectableDefInScope(l)?c=no(Eg(e),Kl):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&le.Self?sm():this.parent;return n=r&le.Optional&&n===uc?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[td]=a[td]||[]).unshift(rn(e)),s)throw a;return KO(a,e,"R3InjectorError",this.source)}else throw a}finally{Qt(o),Jr(s)}}resolveInjectorInitializers(){let e=pe(null),n=Jr(this),r=Qt(void 0),i;try{let s=this.get(co,ao,le.Self);for(let o of s)o()}finally{Jr(n),Qt(r),pe(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(rn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new W(205,!1)}processProvider(e){e=fn(e);let n=wg(e)?e:fn(e&&e.provide),r=y1(e);if(!wg(e)&&e.multi===!0){let i=this.records.get(n);i||(i=no(void 0,Kl,!0),i.factory=()=>yg(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=pe(null);try{return n.value===Kl&&(n.value=m1,n.value=n.factory()),typeof n.value=="object"&&n.value&&w1(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{pe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=fn(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Eg(t){let e=Td(t),n=e!==null?e.factory:Hi(t);if(n!==null)return n;if(t instanceof U)throw new W(204,!1);if(t instanceof Function)return _1(t);throw new W(204,!1)}function _1(t){if(t.length>0)throw new W(204,!1);let n=MO(t);return n!==null?()=>n.factory(t):()=>new t}function y1(t){if(cD(t))return no(void 0,t.useValue);{let e=v1(t);return no(e,Kl)}}function v1(t,e,n){let r;if(wg(t)){let i=fn(t);return Hi(i)||Eg(i)}else if(cD(t))r=()=>fn(t.useValue);else if(g1(t))r=()=>t.useFactory(...yg(t.deps||[]));else if(p1(t))r=()=>J(fn(t.useExisting));else{let i=fn(t&&(t.useClass||t.provide));if(I1(t))r=()=>new i(...yg(t.deps));else return Hi(i)||Eg(i)}return r}function no(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function I1(t){return!!t.deps}function w1(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function E1(t){return typeof t=="function"||typeof t=="object"&&t instanceof U}function Tg(t,e){for(let n of t)Array.isArray(n)?Tg(n,e):n&&qb(n)?Tg(n.\u0275providers,e):e(n)}function vr(t,e){t instanceof dc&&t.assertNotDestroyed();let n,r=Jr(t),i=Qt(void 0);try{return e()}finally{Jr(r),Qt(i)}}function uD(){return Gb()!==void 0||qO()!=null}function Sd(t){if(!uD())throw new W(-203,!1)}function T1(t){return typeof t=="function"}var Ir=0,de=1,ee=2,jt=3,An=4,Rn=5,id=6,sd=7,mn=8,uo=9,yr=10,Bt=11,hc=12,gb=13,_o=14,Zn=15,lo=16,ro=17,ho=18,Ad=19,lD=20,Xr=21,Ql=22,pn=23,_n=25,dD=1;var zi=7,od=8,ad=9,sn=10,cd=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(cd||{});function ei(t){return Array.isArray(t)&&typeof t[dD]=="object"}function wr(t){return Array.isArray(t)&&t[dD]===!0}function hD(t){return(t.flags&4)!==0}function Rd(t){return t.componentOffset>-1}function om(t){return(t.flags&1)===1}function _c(t){return!!t.template}function Cg(t){return(t[ee]&512)!==0}var bg=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function fD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Nd(){return pD}function pD(t){return t.type.prototype.ngOnChanges&&(t.setInput=b1),C1}Nd.ngInherit=!0;function C1(){let t=mD(this),e=t?.current;if(e){let n=t.previous;if(n===lc)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function b1(t,e,n,r,i){let s=this.declaredInputs[r],o=mD(t)||D1(t,{previous:lc,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new bg(l&&l.currentValue,n,c===lc),fD(t,e,i,n)}var gD="__ngSimpleChanges__";function mD(t){return t[gD]||null}function D1(t,e){return t[gD]=e}var mb=null;var Kn=function(t,e,n){mb?.(t,e,n)},S1="svg",A1="math";function Jn(t){for(;Array.isArray(t);)t=t[Ir];return t}function R1(t,e){return Jn(e[t])}function Nn(t,e){return Jn(e[t.index])}function am(t,e){return t.data[e]}function N1(t,e){return t[e]}function oi(t,e){let n=e[t];return ei(n)?n:n[Ir]}function cm(t){return(t[ee]&128)===128}function P1(t){return wr(t[jt])}function ud(t,e){return e==null?null:t[e]}function _D(t){t[ro]=0}function yD(t){t[ee]&1024||(t[ee]|=1024,cm(t)&&Md(t))}function M1(t,e){for(;t>0;)e=e[_o],t--;return e}function Pd(t){return!!(t[ee]&9216||t[pn]?.dirty)}function Dg(t){t[yr].changeDetectionScheduler?.notify(8),t[ee]&64&&(t[ee]|=1024),Pd(t)&&Md(t)}function Md(t){t[yr].changeDetectionScheduler?.notify(0);let e=Gi(t);for(;e!==null&&!(e[ee]&8192||(e[ee]|=8192,!cm(e)));)e=Gi(e)}function vD(t,e){if((t[ee]&256)===256)throw new W(911,!1);t[Xr]===null&&(t[Xr]=[]),t[Xr].push(e)}function x1(t,e){if(t[Xr]===null)return;let n=t[Xr].indexOf(e);n!==-1&&t[Xr].splice(n,1)}function Gi(t){let e=t[jt];return wr(e)?e[jt]:e}var ge={lFrame:PD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var ID=!1;function k1(){return ge.lFrame.elementDepthCount}function O1(){ge.lFrame.elementDepthCount++}function F1(){ge.lFrame.elementDepthCount--}function wD(){return ge.bindingsEnabled}function L1(){return ge.skipHydrationRootTNode!==null}function V1(t){return ge.skipHydrationRootTNode===t}function U1(){ge.skipHydrationRootTNode=null}function Ke(){return ge.lFrame.lView}function ai(){return ge.lFrame.tView}function ED(t){return ge.lFrame.contextLView=t,t[mn]}function TD(t){return ge.lFrame.contextLView=null,t}function Pn(){let t=CD();for(;t!==null&&t.type===64;)t=t.parent;return t}function CD(){return ge.lFrame.currentTNode}function j1(){let t=ge.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function yc(t,e){let n=ge.lFrame;n.currentTNode=t,n.isParent=e}function bD(){return ge.lFrame.isParent}function B1(){ge.lFrame.isParent=!1}function DD(){return ID}function _b(t){ID=t}function SD(){let t=ge.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function $1(t){return ge.lFrame.bindingIndex=t}function um(){return ge.lFrame.bindingIndex++}function H1(){return ge.lFrame.inI18n}function q1(t,e){let n=ge.lFrame;n.bindingIndex=n.bindingRootIndex=t,Sg(e)}function z1(){return ge.lFrame.currentDirectiveIndex}function Sg(t){ge.lFrame.currentDirectiveIndex=t}function AD(t){ge.lFrame.currentQueryIndex=t}function G1(t){let e=t[de];return e.type===2?e.declTNode:e.type===1?t[Rn]:null}function RD(t,e,n){if(n&le.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&le.Host);)if(i=G1(s),i===null||(s=s[_o],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=ge.lFrame=ND();return r.currentTNode=e,r.lView=t,!0}function lm(t){let e=ND(),n=t[de];ge.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ND(){let t=ge.lFrame,e=t===null?null:t.child;return e===null?PD(t):e}function PD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function MD(){let t=ge.lFrame;return ge.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var xD=MD;function dm(){let t=MD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function W1(t){return(ge.lFrame.contextLView=M1(t,ge.lFrame.contextLView))[mn]}function hm(){return ge.lFrame.selectedIndex}function Wi(t){ge.lFrame.selectedIndex=t}function K1(){let t=ge.lFrame;return am(t.tView,t.selectedIndex)}function Q1(){return ge.lFrame.currentNamespace}var kD=!0;function fm(){return kD}function pm(t){kD=t}function Y1(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=pD(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function gm(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function Yl(t,e,n){OD(t,e,3,n)}function Zl(t,e,n,r){(t[ee]&3)===n&&OD(t,e,n,r)}function ug(t,e){let n=t[ee];(n&3)===e&&(n&=16383,n+=1,t[ee]=n)}function OD(t,e,n,r){let i=r!==void 0?t[ro]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[ro]+=65536),(a<s||s==-1)&&(Z1(t,n,e,c),t[ro]=(t[ro]&4294901760)+c+2),c++}function yb(t,e){Kn(4,t,e);let n=pe(null);try{e.call(t)}finally{pe(n),Kn(5,t,e)}}function Z1(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[ee]>>14<t[ro]>>16&&(t[ee]&3)===e&&(t[ee]+=16384,yb(a,s)):yb(a,s)}var oo=-1,fc=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function J1(t){return t instanceof fc}function X1(t){return(t.flags&8)!==0}function eF(t){return(t.flags&16)!==0}var lg={},Ag=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Cd(r);let i=this.injector.get(e,lg,r);return i!==lg||n===lg?i:this.parentInjector.get(e,n,r)}};function FD(t){return t!==oo}function ld(t){return t&32767}function tF(t){return t>>16}function dd(t,e){let n=tF(t),r=e;for(;n>0;)r=r[_o],n--;return r}var Rg=!0;function hd(t){let e=Rg;return Rg=t,e}var nF=256,LD=nF-1,VD=5,rF=0,Qn={};function iF(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(cc)&&(r=n[cc]),r==null&&(r=n[cc]=rF++);let i=r&LD,s=1<<i;e.data[t+(i>>VD)]|=s}function UD(t,e){let n=jD(t,e);if(n!==-1)return n;let r=e[de];r.firstCreatePass&&(t.injectorIndex=e.length,dg(r.data,t),dg(e,null),dg(r.blueprint,null));let i=mm(t,e),s=t.injectorIndex;if(FD(i)){let o=ld(i),a=dd(i,e),c=a[de].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function dg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function jD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function mm(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=zD(i),r===null)return oo;if(n++,i=i[_o],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return oo}function sF(t,e,n){iF(t,e,n)}function BD(t,e,n){if(n&le.Optional||t!==void 0)return t;em(e,"NodeInjector")}function $D(t,e,n,r){if(n&le.Optional&&r===void 0&&(r=null),!(n&(le.Self|le.Host))){let i=t[uo],s=Qt(void 0);try{return i?i.get(e,r,n&le.Optional):Wb(e,r,n&le.Optional)}finally{Qt(s)}}return BD(r,e,n)}function HD(t,e,n,r=le.Default,i){if(t!==null){if(e[ee]&2048&&!(r&le.Self)){let o=lF(t,e,n,r,Qn);if(o!==Qn)return o}let s=qD(t,e,n,r,Qn);if(s!==Qn)return s}return $D(e,n,r,i)}function qD(t,e,n,r,i){let s=cF(n);if(typeof s=="function"){if(!RD(e,t,r))return r&le.Host?BD(i,n,r):$D(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&le.Optional))em(n);else return o}finally{xD()}}else if(typeof s=="number"){let o=null,a=jD(t,e),c=oo,l=r&le.Host?e[Zn][Rn]:null;for((a===-1||r&le.SkipSelf)&&(c=a===-1?mm(t,e):e[a+8],c===oo||!Ib(r,!1)?a=-1:(o=e[de],a=ld(c),e=dd(c,e)));a!==-1;){let d=e[de];if(vb(s,a,d.data)){let p=oF(a,e,n,o,r,l);if(p!==Qn)return p}c=e[a+8],c!==oo&&Ib(r,e[de].data[a+8]===l)&&vb(s,a,e)?(o=d,a=ld(c),e=dd(c,e)):a=-1}}return i}function oF(t,e,n,r,i,s){let o=e[de],a=o.data[t+8],c=r==null?Rd(a)&&Rg:r!=o&&(a.type&3)!==0,l=i&le.Host&&s===a,d=aF(a,o,n,c,l);return d!==null?pc(e,o,d,a):Qn}function aF(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,d=s>>20,p=r?a:a+d,g=i?a+d:l;for(let _=p;_<g;_++){let E=o[_];if(_<c&&n===E||_>=c&&E.type===n)return _}if(i){let _=o[c];if(_&&_c(_)&&_.type===n)return c}return null}function pc(t,e,n,r){let i=t[n],s=e.data;if(J1(i)){let o=i;o.resolving&&UO(VO(s[n]));let a=hd(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?Qt(o.injectImpl):null,d=RD(t,r,le.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&Y1(n,s[n],e)}finally{l!==null&&Qt(l),hd(a),o.resolving=!1,xD()}}return i}function cF(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(cc)?t[cc]:void 0;return typeof e=="number"?e>=0?e&LD:uF:e}function vb(t,e,n){let r=1<<t;return!!(n[e+(t>>VD)]&r)}function Ib(t,e){return!(t&le.Self)&&!(t&le.Host&&e)}var $i=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return HD(this._tNode,this._lView,e,Cd(r),n)}};function uF(){return new $i(Pn(),Ke())}function _m(t){return Ed(()=>{let e=t.prototype.constructor,n=e[ed]||Ng(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[ed]||Ng(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Ng(t){return jb(t)?()=>{let e=Ng(fn(t));return e&&e()}:Hi(t)}function lF(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[ee]&2048&&!(o[ee]&512);){let a=qD(s,o,n,r|le.Self,Qn);if(a!==Qn)return a;let c=s.parent;if(!c){let l=o[lD];if(l){let d=l.get(n,Qn,r);if(d!==Qn)return d}c=zD(o),o=o[_o]}s=c}return i}function zD(t){let e=t[de],n=e.type;return n===2?e.declTNode:n===1?t[Rn]:null}function wb(t,e=null,n=null,r){let i=GD(t,e,n,r);return i.resolveInjectorInitializers(),i}function GD(t,e=null,n=null,r,i=new Set){let s=[n||ao,h1(t)];return r=r||(typeof t=="object"?void 0:rn(t)),new dc(s,e||sm(),r||null,i)}var me=class t{static{this.THROW_IF_NOT_FOUND=uc}static{this.NULL=new rd}static create(e,n){if(Array.isArray(e))return wb({name:""},n,e,"");{let r=e.name??"";return wb({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=H({token:t,providedIn:"any",factory:()=>J(Qb)})}static{this.__NG_ELEMENT_ID__=-1}};var dF=new U("");dF.__NG_ELEMENT_ID__=t=>{let e=Pn();if(e===null)throw new W(204,!1);if(e.type&2)return e.value;if(t&le.Optional)return null;throw new W(204,!1)};var hF="ngOriginalError";function hg(t){return t[hF]}var WD=!0,yo=(()=>{class t{static{this.__NG_ELEMENT_ID__=fF}static{this.__NG_ENV_ID__=n=>n}}return t})(),Pg=class extends yo{constructor(e){super(),this._lView=e}onDestroy(e){return vD(this._lView,e),()=>x1(this._lView,e)}};function fF(){return new Pg(Ke())}var Qi=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new It(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}}return t})();var Mg=class extends et{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,uD()&&(this.destroyRef=M(yo,{optional:!0})??void 0,this.pendingTasks=M(Qi,{optional:!0})??void 0)}emit(e){let n=pe(null);try{super.next(e)}finally{pe(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ge&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Ut=Mg;function fd(...t){}function KD(t){let e,n;function r(){t=fd;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function Eb(t){return queueMicrotask(()=>t()),()=>{t=fd}}var ym="isAngularZone",pd=ym+"_ID",pF=0,Z=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ut(!1),this.onMicrotaskEmpty=new Ut(!1),this.onStable=new Ut(!1),this.onError=new Ut(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=WD}=e;if(typeof Zone>"u")throw new W(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,_F(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ym)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new W(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new W(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,gF,fd,fd);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},gF={};function vm(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function mF(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){KD(()=>{t.callbackScheduled=!1,xg(t),t.isCheckStableRunning=!0,vm(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),xg(t)}function _F(t){let e=()=>{mF(t)},n=pF++;t._inner=t._inner.fork({name:"angular",properties:{[ym]:!0,[pd]:n,[pd+n]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(yF(c))return r.invokeTask(s,o,a,c);try{return Tb(t),r.invokeTask(s,o,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Cb(t)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return Tb(t),r.invoke(s,o,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!vF(c)&&e(),Cb(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,xg(t),vm(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function xg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Tb(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Cb(t){t._nesting--,vm(t)}var kg=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ut,this.onMicrotaskEmpty=new Ut,this.onStable=new Ut,this.onError=new Ut}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function yF(t){return QD(t,"__ignore_ng_zone__")}function vF(t){return QD(t,"__scheduler_tick__")}function QD(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Xn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&hg(e);for(;n&&hg(n);)n=hg(n);return n||null}},IF=new U("",{providedIn:"root",factory:()=>{let t=M(Z),e=M(Xn);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function wF(){return Im(Pn(),Ke())}function Im(t,e){return new vc(Nn(t,e))}var vc=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=wF}}return t})();function YD(t){return(t.flags&128)===128}var ZD=new Map,EF=0;function TF(){return EF++}function CF(t){ZD.set(t[Ad],t)}function Og(t){ZD.delete(t[Ad])}var bb="__ngContext__";function Ki(t,e){ei(e)?(t[bb]=e[Ad],CF(e)):t[bb]=e}function JD(t){return eS(t[hc])}function XD(t){return eS(t[An])}function eS(t){for(;t!==null&&!wr(t);)t=t[An];return t}var Fg;function tS(t){Fg=t}function bF(){if(Fg!==void 0)return Fg;if(typeof document<"u")return document;throw new W(210,!1)}var wm=new U("",{providedIn:"root",factory:()=>DF}),DF="ng",Em=new U(""),Mn=new U("",{providedIn:"platform",factory:()=>"unknown"});var Tm=new U("",{providedIn:"root",factory:()=>bF().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var SF="h",AF="b";var RF=()=>null;function Cm(t,e,n=!1){return RF(t,e,n)}var nS=!1,NF=new U("",{providedIn:"root",factory:()=>nS});function rS(t){return t instanceof Function?t():t}var Yi=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Yi||{}),PF;function bm(t,e){return PF(t,e)}function io(t,e,n,r,i){if(r!=null){let s,o=!1;wr(r)?s=r:ei(r)&&(o=!0,r=r[Ir]);let a=Jn(r);t===0&&n!==null?i==null?aS(e,n,a):md(e,n,a,i||null,!0):t===1&&n!==null?md(e,n,a,i||null,!0):t===2?GF(e,a,o):t===3&&e.destroyNode(a),s!=null&&KF(e,t,s,n,i)}}function MF(t,e){return t.createText(e)}function xF(t,e,n){t.setValue(e,n)}function iS(t,e,n){return t.createElement(e,n)}function kF(t,e){sS(t,e),e[Ir]=null,e[Rn]=null}function OF(t,e,n,r,i,s){r[Ir]=i,r[Rn]=e,xd(t,r,n,1,i,s)}function sS(t,e){e[yr].changeDetectionScheduler?.notify(9),xd(t,e,e[Bt],2,null,null)}function FF(t){let e=t[hc];if(!e)return fg(t[de],t);for(;e;){let n=null;if(ei(e))n=e[hc];else{let r=e[sn];r&&(n=r)}if(!n){for(;e&&!e[An]&&e!==t;)ei(e)&&fg(e[de],e),e=e[jt];e===null&&(e=t),ei(e)&&fg(e[de],e),n=e&&e[An]}e=n}}function LF(t,e,n,r){let i=sn+r,s=n.length;r>0&&(n[i-1][An]=e),r<s-sn?(e[An]=n[i],Kb(n,sn+r,e)):(n.push(e),e[An]=null),e[jt]=n;let o=e[lo];o!==null&&n!==o&&oS(o,e);let a=e[ho];a!==null&&a.insertView(t),Dg(e),e[ee]|=128}function oS(t,e){let n=t[ad],r=e[jt];if(ei(r))t[ee]|=cd.HasTransplantedViews;else{let i=r[jt][Zn];e[Zn]!==i&&(t[ee]|=cd.HasTransplantedViews)}n===null?t[ad]=[e]:n.push(e)}function Dm(t,e){let n=t[ad],r=n.indexOf(e);n.splice(r,1)}function gd(t,e){if(t.length<=sn)return;let n=sn+e,r=t[n];if(r){let i=r[lo];i!==null&&i!==t&&Dm(i,r),e>0&&(t[n-1][An]=r[An]);let s=nd(t,sn+e);kF(r[de],r);let o=s[ho];o!==null&&o.detachView(s[de]),r[jt]=null,r[An]=null,r[ee]&=-129}return r}function Sm(t,e){if(!(e[ee]&256)){let n=e[Bt];n.destroyNode&&xd(t,e,n,3,null,null),FF(e)}}function fg(t,e){if(e[ee]&256)return;let n=pe(null);try{e[ee]&=-129,e[ee]|=256,e[pn]&&vl(e[pn]),UF(t,e),VF(t,e),e[de].type===1&&e[Bt].destroy();let r=e[lo];if(r!==null&&wr(e[jt])){r!==e[jt]&&Dm(r,e);let i=e[ho];i!==null&&i.detachView(t)}Og(e)}finally{pe(n)}}function VF(t,e){let n=t.cleanup,r=e[sd];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[sd]=null);let i=e[Xr];if(i!==null){e[Xr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function UF(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof fc)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Kn(4,a,c);try{c.call(a)}finally{Kn(5,a,c)}}else{Kn(4,i,s);try{s.call(i)}finally{Kn(5,i,s)}}}}}function jF(t,e,n){return BF(t,e.parent,n)}function BF(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Ir];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Yn.None||s===Yn.Emulated)return null}return Nn(r,n)}}function md(t,e,n,r,i){t.insertBefore(e,n,r,i)}function aS(t,e,n){t.appendChild(e,n)}function Db(t,e,n,r,i){r!==null?md(t,e,n,r,i):aS(t,e,n)}function cS(t,e){return t.parentNode(e)}function $F(t,e){return t.nextSibling(e)}function HF(t,e,n){return zF(t,e,n)}function qF(t,e,n){return t.type&40?Nn(t,n):null}var zF=qF,Sb;function Am(t,e,n,r){let i=jF(t,r,e),s=e[Bt],o=r.parent||e[Rn],a=HF(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Db(s,i,n[c],a,!1);else Db(s,i,n,a,!1);Sb!==void 0&&Sb(s,r,e,n,i)}function oc(t,e){if(e!==null){let n=e.type;if(n&3)return Nn(e,t);if(n&4)return Lg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return oc(t,r);{let i=t[e.index];return wr(i)?Lg(-1,i):Jn(i)}}else{if(n&128)return oc(t,e.next);if(n&32)return bm(e,t)()||Jn(t[e.index]);{let r=uS(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Gi(t[Zn]);return oc(i,r)}else return oc(t,e.next)}}}return null}function uS(t,e){if(e!==null){let r=t[Zn][Rn],i=e.projection;return r.projection[i]}return null}function Lg(t,e){let n=sn+t+1;if(n<e.length){let r=e[n],i=r[de].firstChild;if(i!==null)return oc(r,i)}return e[zi]}function GF(t,e,n){t.removeChild(null,e,n)}function Rm(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(o&&e===0&&(a&&Ki(Jn(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Rm(t,e,n.child,r,i,s,!1),io(e,t,i,a,s);else if(c&32){let l=bm(n,r),d;for(;d=l();)io(e,t,i,d,s);io(e,t,i,a,s)}else c&16?WF(t,e,r,n,i,s):io(e,t,i,a,s);n=o?n.projectionNext:n.next}}function xd(t,e,n,r,i,s){Rm(n,r,t.firstChild,e,i,s,!1)}function WF(t,e,n,r,i,s){let o=n[Zn],c=o[Rn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];io(e,t,i,d,s)}else{let l=c,d=o[jt];YD(r)&&(l.flags|=128),Rm(t,e,l,d,i,s,!0)}}function KF(t,e,n,r,i){let s=n[zi],o=Jn(n);s!==o&&io(e,t,r,s,i);for(let a=sn;a<n.length;a++){let c=n[a];xd(c[de],c,t,e,r,s)}}function QF(t,e,n){t.setAttribute(e,"style",n)}function lS(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function dS(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&vg(t,e,r),i!==null&&lS(t,e,i),s!==null&&QF(t,e,s)}var vo={};function xn(t=1){hS(ai(),Ke(),hm()+t,!1)}function hS(t,e,n,r){if(!r)if((e[ee]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Yl(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Zl(e,s,0,n)}Wi(n)}function Er(t,e=le.Default){let n=Ke();if(n===null)return J(t,e);let r=Pn();return HD(r,n,fn(t),e)}function fS(t,e,n,r,i,s){let o=pe(null);try{let a=null;i&ti.SignalBased&&(a=e[r][gr]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&ti.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):fD(e,a,r,s)}finally{pe(o)}}function YF(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Wi(~i);else{let s=i,o=n[++r],a=n[++r];q1(o,s);let c=e[s];a(2,c)}}}finally{Wi(-1)}}function kd(t,e,n,r,i,s,o,a,c,l,d){let p=e.blueprint.slice();return p[Ir]=i,p[ee]=r|4|128|8|64,(l!==null||t&&t[ee]&2048)&&(p[ee]|=2048),_D(p),p[jt]=p[_o]=t,p[mn]=n,p[yr]=o||t&&t[yr],p[Bt]=a||t&&t[Bt],p[uo]=c||t&&t[uo]||null,p[Rn]=s,p[Ad]=TF(),p[id]=d,p[lD]=l,p[Zn]=e.type==2?t[Zn]:p,p}function Od(t,e,n,r,i){let s=t.data[e];if(s===null)s=ZF(t,e,n,r,i),H1()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=j1();s.injectorIndex=o===null?-1:o.injectorIndex}return yc(s,!0),s}function ZF(t,e,n,r,i){let s=CD(),o=bD(),a=o?s:s&&s.parent,c=t.data[e]=nL(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function pS(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function gS(t,e,n,r,i){let s=hm(),o=r&2;try{Wi(-1),o&&e.length>_n&&hS(t,e,_n,!1),Kn(o?2:0,i),n(r,i)}finally{Wi(s),Kn(o?3:1,i)}}function mS(t,e,n){if(hD(e)){let r=pe(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{pe(r)}}}function _S(t,e,n){wD()&&(uL(t,e,n,Nn(n,e)),(n.flags&64)===64&&ES(t,e,n))}function yS(t,e,n=Nn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function vS(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Nm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Nm(t,e,n,r,i,s,o,a,c,l,d){let p=_n+r,g=p+i,_=JF(p,g),E=typeof l=="function"?l():l;return _[de]={type:t,blueprint:_,template:n,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:E,incompleteFirstPass:!1,ssrId:d}}function JF(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:vo);return n}function XF(t,e,n,r){let s=r.get(NF,nS)||n===Yn.ShadowDom,o=t.selectRootElement(e,s);return eL(o),o}function eL(t){tL(t)}var tL=()=>null;function nL(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return L1()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Ab(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=ti.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?Rb(r,n,l,a,c):Rb(r,n,l,a)}return r}function Rb(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function rL(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let p=s[d],g=n?n.get(p):null,_=g?g.inputs:null,E=g?g.outputs:null;c=Ab(0,p.inputs,d,c,_),l=Ab(1,p.outputs,d,l,E);let R=c!==null&&o!==null&&!rm(e)?yL(c,d,o):null;a.push(R)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function iL(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function sL(t,e,n,r,i,s,o,a){let c=Nn(e,n),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(Pm(t,n,d,r,i),Rd(e)&&oL(n,e.index)):e.type&3?(r=iL(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function oL(t,e){let n=oi(e,t);n[ee]&16||(n[ee]|=64)}function IS(t,e,n,r){if(wD()){let i=r===null?null:{"":-1},s=dL(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&wS(t,e,n,o,i,a),i&&hL(n,r,i)}n.mergedAttrs=nm(n.mergedAttrs,n.attrs)}function wS(t,e,n,r,i,s){for(let l=0;l<r.length;l++)sF(UD(n,e),t,r[l].type);pL(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=pS(t,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];n.mergedAttrs=nm(n.mergedAttrs,d.hostAttrs),gL(t,n,e,c,d),fL(c,d,i),d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let p=d.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}rL(t,n,s)}function aL(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;cL(o)!=a&&o.push(a),o.push(n,r,s)}}function cL(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function uL(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Rd(n)&&mL(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||UD(n,e),Ki(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=pc(e,t,a,n);if(Ki(l,e),o!==null&&_L(e,a-i,l,c,n,o),_c(c)){let d=oi(n.index,e);d[mn]=pc(e,t,a,n)}}}function ES(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=z1();try{Wi(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];Sg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&lL(c,l)}}finally{Wi(-1),Sg(o)}}function lL(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function dL(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(r1(e,o.selectors,!1))if(r||(r=[]),_c(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Vg(t,e,c)}else r.unshift(o),Vg(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Vg(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function hL(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new W(-301,!1);r.push(e[i],s)}}}function fL(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;_c(e)&&(n[""]=t)}}function pL(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function gL(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Hi(i.type,!0)),o=new fc(s,_c(i),Er);t.blueprint[r]=o,n[r]=o,aL(t,e,r,pS(t,n,i.hostVars,vo),i)}function mL(t,e,n){let r=Nn(e,t),i=vS(n),s=t[yr].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Fd(t,kd(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function _L(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],d=o[a++],p=o[a++];fS(r,n,c,l,d,p)}}function yL(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function TS(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function CS(t,e){let n=t.contentQueries;if(n!==null){let r=pe(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];AD(s),a.contentQueries(2,e[o],o)}}}finally{pe(r)}}}function Fd(t,e){return t[hc]?t[gb][An]=e:t[hc]=e,t[gb]=e,e}function Ug(t,e,n){AD(0);let r=pe(null);try{e(t,n)}finally{pe(r)}}function vL(t){return t[sd]??=[]}function IL(t){return t.cleanup??=[]}function bS(t,e){let n=t[uo],r=n?n.get(Xn,null):null;r&&r.handleError(e)}function Pm(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],d=t.data[o];fS(d,l,r,a,c,i)}}function wL(t,e,n){let r=R1(e,t);xF(t[Bt],r,n)}function EL(t,e){let n=oi(e,t),r=n[de];TL(r,n);let i=n[Ir];i!==null&&n[id]===null&&(n[id]=Cm(i,n[uo])),Mm(r,n,n[mn])}function TL(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Mm(t,e,n){lm(e);try{let r=t.viewQuery;r!==null&&Ug(1,r,n);let i=t.template;i!==null&&gS(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[ho]?.finishViewCreation(t),t.staticContentQueries&&CS(t,e),t.staticViewQueries&&Ug(2,t.viewQuery,n);let s=t.components;s!==null&&CL(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ee]&=-5,dm()}}function CL(t,e){for(let n=0;n<e.length;n++)EL(t,e[n])}function bL(t,e,n,r){let i=pe(null);try{let s=e.tView,a=t[ee]&4096?4096:16,c=kd(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[lo]=l;let d=t[ho];return d!==null&&(c[ho]=d.createEmbeddedView(s)),Mm(s,c,n),c}finally{pe(i)}}function DL(t,e){let n=sn+e;if(n<t.length)return t[n]}function jg(t,e){return!e||e.firstChild===null||YD(t)}function DS(t,e,n,r=!0){let i=e[de];if(LF(i,e,t,n),r){let o=Lg(n,t),a=e[Bt],c=cS(a,t[zi]);c!==null&&OF(i,t[Rn],a,e,c,o)}let s=e[id];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function SL(t,e){let n=gd(t,e);return n!==void 0&&Sm(n[de],n),n}function _d(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(Jn(s)),wr(s)&&AL(s,r);let o=n.type;if(o&8)_d(t,e,n.child,r);else if(o&32){let a=bm(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=uS(e,n);if(Array.isArray(a))r.push(...a);else{let c=Gi(e[Zn]);_d(c[de],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function AL(t,e){for(let n=sn;n<t.length;n++){let r=t[n],i=r[de].firstChild;i!==null&&_d(r[de],r,i,e)}t[zi]!==t[Ir]&&e.push(t[zi])}var SS=[];function RL(t){return t[pn]??NL(t)}function NL(t){let e=SS.pop()??Object.create(ML);return e.lView=t,e}function PL(t){t.lView[pn]!==t&&(t.lView=null,SS.push(t))}var ML=Ae(V({},js),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Md(t.lView)},consumerOnSignalRead(){this.lView[pn]=this}});function xL(t){let e=t[pn]??Object.create(kL);return e.lView=t,e}var kL=Ae(V({},js),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Gi(t.lView);for(;e&&!AS(e[de]);)e=Gi(e);e&&yD(e)},consumerOnSignalRead(){this.lView[pn]=this}});function AS(t){return t.type!==2}var OL=100;function RS(t,e=!0,n=0){let r=t[yr],i=r.rendererFactory,s=!1;s||i.begin?.();try{FL(t,n)}catch(o){throw e&&bS(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function FL(t,e){let n=DD();try{_b(!0),Bg(t,e);let r=0;for(;Pd(t);){if(r===OL)throw new W(103,!1);r++,Bg(t,1)}}finally{_b(n)}}function LL(t,e,n,r){let i=e[ee];if((i&256)===256)return;let s=!1,o=!1;!s&&e[yr].inlineEffectRunner?.flush(),lm(e);let a=!0,c=null,l=null;s||(AS(t)?(l=RL(e),c=Ja(l)):gC()===null?(a=!1,l=xL(e),c=Ja(l)):e[pn]&&(vl(e[pn]),e[pn]=null));try{_D(e),$1(t.bindingStartIndex),n!==null&&gS(t,e,n,2,r);let d=(i&3)===3;if(!s)if(d){let _=t.preOrderCheckHooks;_!==null&&Yl(e,_,null)}else{let _=t.preOrderHooks;_!==null&&Zl(e,_,0,null),ug(e,0)}if(o||VL(e),NS(e,0),t.contentQueries!==null&&CS(t,e),!s)if(d){let _=t.contentCheckHooks;_!==null&&Yl(e,_)}else{let _=t.contentHooks;_!==null&&Zl(e,_,1),ug(e,1)}YF(t,e);let p=t.components;p!==null&&MS(e,p,0);let g=t.viewQuery;if(g!==null&&Ug(2,g,r),!s)if(d){let _=t.viewCheckHooks;_!==null&&Yl(e,_)}else{let _=t.viewHooks;_!==null&&Zl(e,_,2),ug(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ql]){for(let _ of e[Ql])_();e[Ql]=null}s||(e[ee]&=-73)}catch(d){throw s||Md(e),d}finally{l!==null&&(_l(l,c),a&&PL(l)),dm()}}function NS(t,e){for(let n=JD(t);n!==null;n=XD(n))for(let r=sn;r<n.length;r++){let i=n[r];PS(i,e)}}function VL(t){for(let e=JD(t);e!==null;e=XD(e)){if(!(e[ee]&cd.HasTransplantedViews))continue;let n=e[ad];for(let r=0;r<n.length;r++){let i=n[r];yD(i)}}}function UL(t,e,n){let r=oi(e,t);PS(r,n)}function PS(t,e){cm(t)&&Bg(t,e)}function Bg(t,e){let r=t[de],i=t[ee],s=t[pn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&yl(s)),o||=!1,s&&(s.dirty=!1),t[ee]&=-9217,o)LL(r,t,r.template,t[mn]);else if(i&8192){NS(t,1);let a=r.components;a!==null&&MS(t,a,1)}}function MS(t,e,n){for(let r=0;r<e.length;r++)UL(t,e[r],n)}function xm(t,e){let n=DD()?64:1088;for(t[yr].changeDetectionScheduler?.notify(e);t;){t[ee]|=n;let r=Gi(t);if(Cg(t)&&!r)return t;t=r}return null}var fo=class{get rootNodes(){let e=this._lView,n=e[de];return _d(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[mn]}set context(e){this._lView[mn]=e}get destroyed(){return(this._lView[ee]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[jt];if(wr(e)){let n=e[od],r=n?n.indexOf(this):-1;r>-1&&(gd(e,r),nd(n,r))}this._attachedToViewContainer=!1}Sm(this._lView[de],this._lView)}onDestroy(e){vD(this._lView,e)}markForCheck(){xm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ee]&=-129}reattach(){Dg(this._lView),this._lView[ee]|=128}detectChanges(){this._lView[ee]|=1024,RS(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new W(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Cg(this._lView),n=this._lView[lo];n!==null&&!e&&Dm(n,this._lView),sS(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new W(902,!1);this._appRef=e;let n=Cg(this._lView),r=this._lView[lo];r!==null&&!n&&oS(r,this._lView),Dg(this._lView)}};var C7=new RegExp(`^(\\d+)*(${AF}|${SF})*(.*)`);var jL=()=>null;function $g(t,e){return jL(t,e)}var po=class{},Ld=new U("",{providedIn:"root",factory:()=>!1});var xS=new U(""),kS=new U(""),Hg=class{},yd=class{};function BL(t){let e=Error(`No component factory found for ${rn(t)}.`);return e[$L]=t,e}var $L="ngComponent";var qg=class{resolveComponentFactory(e){throw BL(e)}},ni=class{static{this.NULL=new qg}},go=class{},Vd=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>HL()}}return t})();function HL(){let t=Ke(),e=Pn(),n=oi(e.index,t);return(ei(n)?n:t)[Bt]}var qL=(()=>{class t{static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>null})}}return t})();function zg(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=sb(i,a);else if(s==2){let c=a,l=e[++o];r=sb(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var vd=class extends ni{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=qi(e);return new gc(n,this.ngModule)}};function Nb(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:ti.None;e?n.push({propName:o,templateName:r,isSignal:(a&ti.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function zL(t){let e=t.toLowerCase();return e==="svg"?S1:e==="math"?A1:null}var gc=class extends yd{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Nb(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Nb(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=a1(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=pe(null);try{i=i||this.ngModule;let o=i instanceof gn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Ag(e,o):e,c=a.get(go,null);if(c===null)throw new W(407,!1);let l=a.get(qL,null),d=a.get(po,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},g=c.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",E=r?XF(g,r,this.componentDef.encapsulation,a):iS(g,_,zL(_)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let A=null;E!==null&&(A=Cm(E,a,!0));let x=Nm(0,null,null,1,0,null,null,null,null,null,null),L=kd(null,x,null,R,null,null,p,g,a,null,A);lm(L);let $,G,Ne=null;try{let Y=this.componentDef,T,v=null;Y.findHostDirectiveDefs?(T=[],v=new Map,Y.findHostDirectiveDefs(Y,T,v),T.push(Y)):T=[Y];let I=GL(L,E);Ne=WL(I,E,Y,T,L,p,g),G=am(x,_n),E&&YL(g,Y,E,r),n!==void 0&&ZL(G,this.ngContentSelectors,n),$=QL(Ne,Y,T,v,L,[JL]),Mm(x,L,null)}catch(Y){throw Ne!==null&&Og(Ne),Og(L),Y}finally{dm()}return new Gg(this.componentType,$,Im(G,L),L,G)}finally{pe(s)}}},Gg=class extends Hg{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new fo(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Pm(s[de],s,i,e,n),this.previousInputValues.set(e,n);let o=oi(this._tNode.index,s);xm(o,1)}}get injector(){return new $i(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function GL(t,e){let n=t[de],r=_n;return t[r]=e,Od(n,r,2,"#host",null)}function WL(t,e,n,r,i,s,o){let a=i[de];KL(r,t,e,o);let c=null;e!==null&&(c=Cm(e,i[uo]));let l=s.rendererFactory.createRenderer(e,n),d=16;n.signals?d=4096:n.onPush&&(d=64);let p=kd(i,vS(n),null,d,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&Vg(a,t,r.length-1),Fd(i,p),i[t.index]=p}function KL(t,e,n,r){for(let i of t)e.mergedAttrs=nm(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(zg(e,e.mergedAttrs,!0),n!==null&&dS(r,n,e))}function QL(t,e,n,r,i,s){let o=Pn(),a=i[de],c=Nn(o,i);wS(a,i,o,n,null,r);for(let d=0;d<n.length;d++){let p=o.directiveStart+d,g=pc(i,a,p,o);Ki(g,i)}ES(a,i,o),c&&Ki(c,i);let l=pc(i,a,o.directiveStart+o.componentOffset,o);if(t[mn]=i[mn]=l,s!==null)for(let d of s)d(l,e);return mS(a,o,i),l}function YL(t,e,n,r){if(r)vg(t,n,["ng-version","18.2.13"]);else{let{attrs:i,classes:s}=c1(e.selectors[0]);i&&vg(t,n,i),s&&s.length>0&&lS(t,n,s.join(" "))}}function ZL(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function JL(){let t=Pn();gm(Ke()[de],t)}var Ud=(()=>{class t{static{this.__NG_ELEMENT_ID__=XL}}return t})();function XL(){let t=Pn();return tV(t,Ke())}var eV=Ud,OS=class extends eV{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Im(this._hostTNode,this._hostLView)}get injector(){return new $i(this._hostTNode,this._hostLView)}get parentInjector(){let e=mm(this._hostTNode,this._hostLView);if(FD(e)){let n=dd(e,this._hostLView),r=ld(e),i=n[de].data[r+8];return new $i(i,n)}else return new $i(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Pb(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-sn}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=$g(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,jg(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!T1(e),a;if(o)a=n;else{let E=n||{};a=E.index,r=E.injector,i=E.projectableNodes,s=E.environmentInjector||E.ngModuleRef}let c=o?e:new gc(qi(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let R=(o?l:this.parentInjector).get(gn,null);R&&(s=R)}let d=qi(c.componentType??{}),p=$g(this._lContainer,d?.id??null),g=p?.firstChild??null,_=c.create(l,i,g,s);return this.insertImpl(_.hostView,a,jg(this._hostTNode,p)),_}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(P1(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[jt],l=new OS(c,c[Rn],c[jt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return DS(o,i,s,r),e.attachToViewContainerRef(),Kb(pg(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Pb(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=gd(this._lContainer,n);r&&(nd(pg(this._lContainer),n),Sm(r[de],r))}detach(e){let n=this._adjustIndex(e,-1),r=gd(this._lContainer,n);return r&&nd(pg(this._lContainer),n)!=null?new fo(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Pb(t){return t[od]}function pg(t){return t[od]||(t[od]=[])}function tV(t,e){let n,r=e[t.index];return wr(r)?n=r:(n=TS(r,e,null,t),e[t.index]=n,Fd(e,n)),rV(n,e,t,r),new OS(n,t,e)}function nV(t,e){let n=t[Bt],r=n.createComment(""),i=Nn(e,t),s=cS(n,i);return md(n,s,r,$F(n,i),!1),r}var rV=oV,iV=()=>!1;function sV(t,e,n){return iV(t,e,n)}function oV(t,e,n,r){if(t[zi])return;let i;n.type&8?i=Jn(r):i=nV(e,n),t[zi]=i}var Mb=new Set;function Zi(t){Mb.has(t)||(Mb.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function km(t,e){Zi("NgSignals");let n=SC(t),r=n[gr];return e?.equal&&(r.equal=e.equal),n.set=i=>Gp(r,i),n.update=i=>AC(r,i),n.asReadonly=aV.bind(n),n}function aV(){let t=this[gr];if(t.readonlyFn===void 0){let e=()=>this();e[gr]=t,t.readonlyFn=e}return t.readonlyFn}var ri=class{},mc=class{};var Wg=class extends ri{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vd(this);let s=rD(e);this._bootstrapComponents=rS(s.bootstrap),this._r3Injector=GD(e,n,[{provide:ri,useValue:this},{provide:ni,useValue:this.componentFactoryResolver},...r],rn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Kg=class extends mc{constructor(e){super(),this.moduleType=e}create(e){return new Wg(this.moduleType,e,[])}};var Id=class extends ri{constructor(e){super(),this.componentFactoryResolver=new vd(this),this.instance=null;let n=new dc([...e.providers,{provide:ri,useValue:this},{provide:ni,useValue:this.componentFactoryResolver}],e.parent||sm(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Om(t,e,n=null){return new Id({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function FS(t,e,n){return t[e]=n}function mo(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function cV(t,e,n,r){let i=mo(t,e,n);return mo(t,e+1,r)||i}function uV(t){return(t.flags&32)===32}function lV(t,e,n,r,i,s,o,a,c){let l=e.consts,d=Od(e,t,4,o||null,a||null);IS(e,n,d,ud(l,c)),gm(e,d);let p=d.tView=Nm(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),p.queries=e.queries.embeddedTView(d)),d}function dV(t,e,n,r,i,s,o,a,c,l){let d=n+_n,p=e.firstCreatePass?lV(d,e,t,r,i,s,o,a,c):e.data[d];yc(p,!1);let g=hV(e,t,p,n);fm()&&Am(e,t,g,p),Ki(g,t);let _=TS(g,t,g,p);return t[d]=_,Fd(t,_),sV(_,p,t),om(p)&&_S(e,t,p),c!=null&&yS(t,p,l),p}function ci(t,e,n,r,i,s,o,a){let c=Ke(),l=ai(),d=ud(l.consts,s);return dV(c,l,t,e,n,r,i,d,o,a),ci}var hV=fV;function fV(t,e,n,r){return pm(!0),e[Bt].createComment("")}var ac=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(ac||{}),pV=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}}return t})(),xb=class t{constructor(){this.ngZone=M(Z),this.scheduler=M(po),this.errorHandler=M(Xn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[ac.EarlyRead,ac.Write,ac.MixedReadWrite,ac.Read]}execute(){this.executing=!0;for(let e of t.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}};function gV(t,e,n,r){return mo(t,um(),n)?e+zb(n)+r:vo}function jd(t,e,n){let r=Ke(),i=um();if(mo(r,i,e)){let s=ai(),o=K1();sL(s,o,r,t,e,r[Bt],n,!1)}return jd}function kb(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Pm(t,n,s[o],o,r)}function ui(t,e){Zi("NgControlFlow");let n=Ke(),r=um(),i=n[r]!==vo?n[r]:-1,s=i!==-1?Ob(n,_n+i):void 0,o=0;if(mo(n,r,t)){let a=pe(null);try{if(s!==void 0&&SL(s,o),t!==-1){let c=_n+t,l=Ob(n,c),d=mV(n[de],c),p=$g(l,d.tView.ssrId),g=bL(n,d,e,{dehydratedView:p});DS(l,g,o,jg(d,p))}}finally{pe(a)}}else if(s!==void 0){let a=DL(s,o);a!==void 0&&(a[mn]=e)}}function Ob(t,e){return t[e]}function mV(t,e){return am(t,e)}function _V(t,e,n,r,i,s){let o=e.consts,a=ud(o,i),c=Od(e,t,2,r,a);return IS(e,n,c,ud(o,s)),c.attrs!==null&&zg(c,c.attrs,!1),c.mergedAttrs!==null&&zg(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function nt(t,e,n,r){let i=Ke(),s=ai(),o=_n+t,a=i[Bt],c=s.firstCreatePass?_V(o,s,i,e,n,r):s.data[o],l=yV(s,i,c,a,e,t);i[o]=l;let d=om(c);return yc(c,!0),dS(a,l,c),!uV(c)&&fm()&&Am(s,i,l,c),k1()===0&&Ki(l,i),O1(),d&&(_S(s,i,c),mS(s,c,i)),r!==null&&yS(i,c),nt}function Qe(){let t=Pn();bD()?B1():(t=t.parent,yc(t,!1));let e=t;V1(e)&&U1(),F1();let n=ai();return n.firstCreatePass&&(gm(n,t),hD(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&X1(e)&&kb(n,e,Ke(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&eF(e)&&kb(n,e,Ke(),e.stylesWithoutHost,!1),Qe}function Ji(t,e,n,r){return nt(t,e,n,r),Qe(),Ji}var yV=(t,e,n,r,i,s)=>(pm(!0),iS(r,i,Q1()));function LS(){return Ke()}var Bi=void 0;function vV(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var IV=["en",[["a","p"],["AM","PM"],Bi],[["AM","PM"],Bi,Bi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bi,"{1} 'at' {0}",Bi],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",vV],gg={};function yn(t){let e=wV(t),n=Fb(e);if(n)return n;let r=e.split("-")[0];if(n=Fb(r),n)return n;if(r==="en")return IV;throw new W(701,!1)}function Fb(t){return t in gg||(gg[t]=sc.ng&&sc.ng.common&&sc.ng.common.locales&&sc.ng.common.locales[t]),gg[t]}var rt=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(rt||{});function wV(t){return t.toLowerCase().replace(/_/g,"-")}var wd="en-US";var EV=wd;function TV(t){typeof t=="string"&&(EV=t.toLowerCase().replace(/_/g,"-"))}var CV=(t,e,n)=>{};function Io(t,e,n,r){let i=Ke(),s=ai(),o=Pn();return DV(s,i,i[Bt],o,t,e,r),Io}function bV(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[sd],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function DV(t,e,n,r,i,s,o){let a=om(r),l=t.firstCreatePass&&IL(t),d=e[mn],p=vL(e),g=!0;if(r.type&3||o){let R=Nn(r,e),A=o?o(R):R,x=p.length,L=o?G=>o(Jn(G[r.index])):r.index,$=null;if(!o&&a&&($=bV(t,e,i,r.index)),$!==null){let G=$.__ngLastListenerFn__||$;G.__ngNextListenerFn__=s,$.__ngLastListenerFn__=s,g=!1}else{s=Vb(r,e,d,s),CV(R,i,s);let G=n.listen(A,i,s);p.push(s,G),l&&l.push(i,L,x,x+1)}}else s=Vb(r,e,d,s);let _=r.outputs,E;if(g&&_!==null&&(E=_[i])){let R=E.length;if(R)for(let A=0;A<R;A+=2){let x=E[A],L=E[A+1],Ne=e[x][L].subscribe(s),Y=p.length;p.push(s,Ne),l&&l.push(i,r.index,Y,-(Y+1))}}}function Lb(t,e,n,r){let i=pe(null);try{return Kn(6,e,n),n(r)!==!1}catch(s){return bS(t,s),!1}finally{Kn(7,e,n),pe(i)}}function Vb(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?oi(t.index,e):e;xm(o,5);let a=Lb(e,n,r,s),c=i.__ngNextListenerFn__;for(;c;)a=Lb(e,n,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function Tr(t=1){return W1(t)}function SV(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function wt(t,e=""){let n=Ke(),r=ai(),i=t+_n,s=r.firstCreatePass?Od(r,i,1,e,null):r.data[i],o=AV(r,n,s,e,t);n[i]=o,fm()&&Am(r,n,o,s),yc(s,!1)}var AV=(t,e,n,r,i)=>(pm(!0),MF(e[Bt],r));function Xi(t,e,n){let r=Ke(),i=gV(r,t,e,n);return i!==vo&&wL(r,hm(),i),Xi}var RV=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=oD(!1,n.type),i=r.length>0?Om([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=H({token:t,providedIn:"environment",factory:()=>new t(J(gn))})}}return t})();function li(t){Zi("NgStandalone"),t.getStandaloneInjector=e=>e.get(RV).getOrCreateStandaloneInjector(t)}function Fm(t,e,n,r){return NV(Ke(),SD(),t,e,n,r)}function VS(t,e){let n=t[e];return n===vo?void 0:n}function NV(t,e,n,r,i,s){let o=e+n;return mo(t,o,i)?FS(t,o+1,s?r.call(s,i):r(i)):VS(t,o+1)}function PV(t,e,n,r,i,s,o){let a=e+n;return cV(t,a,i,s)?FS(t,a+2,o?r.call(o,i,s):r(i,s)):VS(t,a+2)}function Lm(t,e){let n=ai(),r,i=t+_n;n.firstCreatePass?(r=MV(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=Hi(r.type,!0)),o,a=Qt(Er);try{let c=hd(!1),l=s();return hd(c),SV(n,Ke(),i,l),l}finally{Qt(a)}}function MV(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Vm(t,e,n,r){let i=t+_n,s=Ke(),o=N1(s,i);return xV(s,i)?PV(s,SD(),e,o.transform,n,r,o):o.transform(n,r)}function xV(t,e){return t[de].data[e].pure}var ii=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},US=new ii("18.2.13");var Bd=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var jS=new U("");function Ic(t){return!!t&&typeof t.then=="function"}function BS(t){return!!t&&typeof t.subscribe=="function"}var di=new U(""),$S=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=M(di,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if(Ic(s))n.push(s);else if(BS(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Um=new U("");function kV(){DC(()=>{throw new W(600,!1)})}function OV(t){return t.isBoundToModule}var FV=10;function LV(t,e,n){try{let r=n();return Ic(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var es=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=M(IF),this.afterRenderManager=M(pV),this.zonelessEnabled=M(Ld),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new et,this.afterTick=new et,this.componentTypes=[],this.components=[],this.isStable=M(Qi).hasPendingTasks.pipe(Q(n=>!n)),this._injector=M(gn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof yd;if(!this._injector.get($S).done){let g=!i&&nD(n),_=!1;throw new W(405,_)}let o;i?o=n:o=this._injector.get(ni).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let a=OV(o)?void 0:this._injector.get(ri),c=r||o.selector,l=o.create(me.NULL,[],c,a),d=l.location.nativeElement,p=l.injector.get(jS,null);return p?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Jl(this.components,l),p?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new W(101,!1);let n=pe(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,pe(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(go,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<FV;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)VV(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Pd(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Jl(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(Um,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Jl(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new W(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Jl(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function VV(t,e,n,r){if(!n&&!Pd(t))return;RS(t,e,n&&!r?0:1)}var Qg=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},jm=(()=>{class t{compileModuleSync(n){return new Kg(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=rD(n),s=rS(i.declarations).reduce((o,a)=>{let c=qi(a);return c&&o.push(new gc(c)),o},[]);return new Qg(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var UV=(()=>{class t{constructor(){this.zone=M(Z),this.changeDetectionScheduler=M(po),this.applicationRef=M(es)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),jV=new U("",{factory:()=>!1});function HS({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Z(Ae(V({},zS()),{scheduleInRootZone:n})),[{provide:Z,useFactory:t},{provide:co,multi:!0,useFactory:()=>{let r=M(UV,{optional:!0});return()=>r.initialize()}},{provide:co,multi:!0,useFactory:()=>{let r=M(BV);return()=>{r.initialize()}}},e===!0?{provide:xS,useValue:!0}:[],{provide:kS,useValue:n??WD}]}function qS(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=HS({ngZoneFactory:()=>{let i=zS(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Zi("NgZone_CoalesceEvent"),new Z(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Oe([{provide:jV,useValue:!0},{provide:Ld,useValue:!1},r])}function zS(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var BV=(()=>{class t{constructor(){this.subscription=new Ge,this.initialized=!1,this.zone=M(Z),this.pendingTasks=M(Qi)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Z.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Z.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var $V=(()=>{class t{constructor(){this.appRef=M(es),this.taskService=M(Qi),this.ngZone=M(Z),this.zonelessEnabled=M(Ld),this.disableScheduling=M(xS,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ge,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(pd):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(kS,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof kg||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Eb:KD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(pd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Eb(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function HV(){return typeof $localize<"u"&&$localize.locale||wd}var $d=new U("",{providedIn:"root",factory:()=>M($d,le.Optional|le.SkipSelf)||HV()});var Yg=new U("");function Wl(t){return!t.moduleRef}function qV(t){let e=Wl(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Z);return n.run(()=>{Wl(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Xn,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),Wl(t)){let s=()=>e.destroy(),o=t.platformInjector.get(Yg);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>t.moduleRef.destroy(),o=t.platformInjector.get(Yg);o.add(s),t.moduleRef.onDestroy(()=>{Jl(t.allPlatformModules,t.moduleRef),i.unsubscribe(),o.delete(s)})}return LV(r,n,()=>{let s=e.get($S);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get($d,wd);if(TV(o||wd),Wl(t)){let a=e.get(es);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return zV(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function zV(t,e){let n=t.injector.get(es);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new W(-403,!1);e.push(t)}var Xl=null;function GV(t=[],e){return me.create({name:e,providers:[{provide:Dd,useValue:"platform"},{provide:Yg,useValue:new Set([()=>Xl=null])},...t]})}function WV(t=[]){if(Xl)return Xl;let e=GV(t);return Xl=e,kV(),KV(e),e}function KV(t){t.get(Em,null)?.forEach(n=>n())}var wo=(()=>{class t{static{this.__NG_ELEMENT_ID__=QV}}return t})();function QV(t){return YV(Pn(),Ke(),(t&16)===16)}function YV(t,e,n){if(Rd(t)&&!n){let r=oi(t.index,e);return new fo(r,r)}else if(t.type&175){let r=e[Zn];return new fo(r,e)}return null}function GS(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=WV(r),s=[HS({}),{provide:po,useExisting:$V},...n||[]],o=new Id({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return qV({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function Hd(t,e){Zi("NgSignals");let n=TC(t);return e?.equal&&(n[gr].equal=e.equal),n}function qd(t){let e=pe(null);try{return t()}finally{pe(e)}}var ZV=new U("",{providedIn:"root",factory:()=>M(JV)}),JV=(()=>{class t{static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>new Zg})}}return t})(),Zg=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=M(Qi),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let n=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(n),this.taskId=null})}}enqueue(e){let n=e.creationZone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}},Jg=class{constructor(e,n,r,i,s,o){this.scheduler=e,this.effectFn=n,this.creationZone=r,this.injector=s,this.watcher=NC(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(n){this.injector.get(Xn,null,{optional:!0})?.handleError(n)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function Bm(t,e){Zi("NgSignals"),!e?.injector&&Sd(Bm);let n=e?.injector??M(me),r=e?.manualCleanup!==!0?n.get(yo):null,i=new Jg(n.get(ZV),t,typeof Zone>"u"?null:Zone.current,r,n,e?.allowSignalWrites??!1),s=n.get(wo,null,{optional:!0});return!s||!(s._lView[ee]&8)?i.watcher.notify():(s._lView[Ql]??=[]).push(i.watcher.notify),i}var ZS=null;function Eo(){return ZS}function JS(t){ZS??=t}var Xd=class{};var In=new U(""),XS=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>M(rU),providedIn:"platform"})}}return t})();var rU=(()=>{class t extends XS{constructor(){super(),this._doc=M(In),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Eo().getBaseHref(this._doc)}onPopState(n){let r=Eo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Eo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function eA(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function WS(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function ts(t){return t&&t[0]!=="?"?"?"+t:t}var nh=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>M(tA),providedIn:"root"})}}return t})(),iU=new U(""),tA=(()=>{class t extends nh{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(In).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return eA(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+ts(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+ts(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+ts(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(J(XS),J(iU,8))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var wc=(()=>{class t{constructor(n){this._subject=new Ut,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=aU(WS(KS(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+ts(r))}normalize(n){return t.stripTrailingSlash(oU(this._basePath,KS(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ts(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ts(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=ts}static{this.joinWithSlash=eA}static{this.stripTrailingSlash=WS}static{this.\u0275fac=function(r){return new(r||t)(J(nh))}}static{this.\u0275prov=H({token:t,factory:()=>sU(),providedIn:"root"})}}return t})();function sU(){return new wc(J(nh))}function oU(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function KS(t){return t.replace(/\/index.html$/,"")}function aU(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var $t=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}($t||{}),xe=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(xe||{}),an=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(an||{}),hi={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function cU(t){return yn(t)[rt.LocaleId]}function uU(t,e,n){let r=yn(t),i=[r[rt.DayPeriodsFormat],r[rt.DayPeriodsStandalone]],s=vn(i,e);return vn(s,n)}function lU(t,e,n){let r=yn(t),i=[r[rt.DaysFormat],r[rt.DaysStandalone]],s=vn(i,e);return vn(s,n)}function dU(t,e,n){let r=yn(t),i=[r[rt.MonthsFormat],r[rt.MonthsStandalone]],s=vn(i,e);return vn(s,n)}function hU(t,e){let r=yn(t)[rt.Eras];return vn(r,e)}function zd(t,e){let n=yn(t);return vn(n[rt.DateFormat],e)}function Gd(t,e){let n=yn(t);return vn(n[rt.TimeFormat],e)}function Wd(t,e){let r=yn(t)[rt.DateTimeFormat];return vn(r,e)}function rh(t,e){let n=yn(t),r=n[rt.NumberSymbols][e];if(typeof r>"u"){if(e===hi.CurrencyDecimal)return n[rt.NumberSymbols][hi.Decimal];if(e===hi.CurrencyGroup)return n[rt.NumberSymbols][hi.Group]}return r}function nA(t){if(!t[rt.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[rt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function fU(t){let e=yn(t);return nA(e),(e[rt.ExtraData][2]||[]).map(r=>typeof r=="string"?$m(r):[$m(r[0]),$m(r[1])])}function pU(t,e,n){let r=yn(t);nA(r);let i=[r[rt.ExtraData][0],r[rt.ExtraData][1]],s=vn(i,e)||[];return vn(s,n)||[]}function vn(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function $m(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var gU=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Kd={},mU=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,br=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(br||{}),be=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(be||{}),Ce=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(Ce||{});function _U(t,e,n,r){let i=DU(t);e=Cr(n,e)||e;let o=[],a;for(;e;)if(a=mU.exec(e),a){o=o.concat(a.slice(1));let d=o.pop();if(!d)break;e=d}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=iA(r,c),i=bU(i,r,!0));let l="";return o.forEach(d=>{let p=TU(d);l+=p?p(i,n,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function eh(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Cr(t,e){let n=cU(t);if(Kd[n]??={},Kd[n][e])return Kd[n][e];let r="";switch(e){case"shortDate":r=zd(t,an.Short);break;case"mediumDate":r=zd(t,an.Medium);break;case"longDate":r=zd(t,an.Long);break;case"fullDate":r=zd(t,an.Full);break;case"shortTime":r=Gd(t,an.Short);break;case"mediumTime":r=Gd(t,an.Medium);break;case"longTime":r=Gd(t,an.Long);break;case"fullTime":r=Gd(t,an.Full);break;case"short":let i=Cr(t,"shortTime"),s=Cr(t,"shortDate");r=Qd(Wd(t,an.Short),[i,s]);break;case"medium":let o=Cr(t,"mediumTime"),a=Cr(t,"mediumDate");r=Qd(Wd(t,an.Medium),[o,a]);break;case"long":let c=Cr(t,"longTime"),l=Cr(t,"longDate");r=Qd(Wd(t,an.Long),[c,l]);break;case"full":let d=Cr(t,"fullTime"),p=Cr(t,"fullDate");r=Qd(Wd(t,an.Full),[d,p]);break}return r&&(Kd[n][e]=r),r}function Qd(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function kn(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function yU(t,e){return kn(t,3).substring(0,e)}function ct(t,e,n=0,r=!1,i=!1){return function(s,o){let a=vU(t,s);if((n>0||a>-n)&&(a+=n),t===be.Hours)a===0&&n===-12&&(a=12);else if(t===be.FractionalSeconds)return yU(a,e);let c=rh(o,hi.MinusSign);return kn(a,e,c,r,i)}}function vU(t,e){switch(t){case be.FullYear:return e.getFullYear();case be.Month:return e.getMonth();case be.Date:return e.getDate();case be.Hours:return e.getHours();case be.Minutes:return e.getMinutes();case be.Seconds:return e.getSeconds();case be.FractionalSeconds:return e.getMilliseconds();case be.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function Fe(t,e,n=$t.Format,r=!1){return function(i,s){return IU(i,s,t,e,n,r)}}function IU(t,e,n,r,i,s){switch(n){case Ce.Months:return dU(e,i,r)[t.getMonth()];case Ce.Days:return lU(e,i,r)[t.getDay()];case Ce.DayPeriods:let o=t.getHours(),a=t.getMinutes();if(s){let l=fU(e),d=pU(e,i,r),p=l.findIndex(g=>{if(Array.isArray(g)){let[_,E]=g,R=o>=_.hours&&a>=_.minutes,A=o<E.hours||o===E.hours&&a<E.minutes;if(_.hours<E.hours){if(R&&A)return!0}else if(R||A)return!0}else if(g.hours===o&&g.minutes===a)return!0;return!1});if(p!==-1)return d[p]}return uU(e,i,r)[o<12?0:1];case Ce.Eras:return hU(e,r)[t.getFullYear()<=0?0:1];default:let c=n;throw new Error(`unexpected translation type ${c}`)}}function Yd(t){return function(e,n,r){let i=-1*r,s=rh(n,hi.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case br.Short:return(i>=0?"+":"")+kn(o,2,s)+kn(Math.abs(i%60),2,s);case br.ShortGMT:return"GMT"+(i>=0?"+":"")+kn(o,1,s);case br.Long:return"GMT"+(i>=0?"+":"")+kn(o,2,s)+":"+kn(Math.abs(i%60),2,s);case br.Extended:return r===0?"Z":(i>=0?"+":"")+kn(o,2,s)+":"+kn(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}var wU=0,Jd=4;function EU(t){let e=eh(t,wU,1).getDay();return eh(t,0,1+(e<=Jd?Jd:Jd+7)-e)}function rA(t){let e=t.getDay(),n=e===0?-3:Jd-e;return eh(t.getFullYear(),t.getMonth(),t.getDate()+n)}function Hm(t,e=!1){return function(n,r){let i;if(e){let s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+s)/7)}else{let s=rA(n),o=EU(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return kn(i,t,rh(r,hi.MinusSign))}}function Zd(t,e=!1){return function(n,r){let s=rA(n).getFullYear();return kn(s,t,rh(r,hi.MinusSign),e)}}var qm={};function TU(t){if(qm[t])return qm[t];let e;switch(t){case"G":case"GG":case"GGG":e=Fe(Ce.Eras,xe.Abbreviated);break;case"GGGG":e=Fe(Ce.Eras,xe.Wide);break;case"GGGGG":e=Fe(Ce.Eras,xe.Narrow);break;case"y":e=ct(be.FullYear,1,0,!1,!0);break;case"yy":e=ct(be.FullYear,2,0,!0,!0);break;case"yyy":e=ct(be.FullYear,3,0,!1,!0);break;case"yyyy":e=ct(be.FullYear,4,0,!1,!0);break;case"Y":e=Zd(1);break;case"YY":e=Zd(2,!0);break;case"YYY":e=Zd(3);break;case"YYYY":e=Zd(4);break;case"M":case"L":e=ct(be.Month,1,1);break;case"MM":case"LL":e=ct(be.Month,2,1);break;case"MMM":e=Fe(Ce.Months,xe.Abbreviated);break;case"MMMM":e=Fe(Ce.Months,xe.Wide);break;case"MMMMM":e=Fe(Ce.Months,xe.Narrow);break;case"LLL":e=Fe(Ce.Months,xe.Abbreviated,$t.Standalone);break;case"LLLL":e=Fe(Ce.Months,xe.Wide,$t.Standalone);break;case"LLLLL":e=Fe(Ce.Months,xe.Narrow,$t.Standalone);break;case"w":e=Hm(1);break;case"ww":e=Hm(2);break;case"W":e=Hm(1,!0);break;case"d":e=ct(be.Date,1);break;case"dd":e=ct(be.Date,2);break;case"c":case"cc":e=ct(be.Day,1);break;case"ccc":e=Fe(Ce.Days,xe.Abbreviated,$t.Standalone);break;case"cccc":e=Fe(Ce.Days,xe.Wide,$t.Standalone);break;case"ccccc":e=Fe(Ce.Days,xe.Narrow,$t.Standalone);break;case"cccccc":e=Fe(Ce.Days,xe.Short,$t.Standalone);break;case"E":case"EE":case"EEE":e=Fe(Ce.Days,xe.Abbreviated);break;case"EEEE":e=Fe(Ce.Days,xe.Wide);break;case"EEEEE":e=Fe(Ce.Days,xe.Narrow);break;case"EEEEEE":e=Fe(Ce.Days,xe.Short);break;case"a":case"aa":case"aaa":e=Fe(Ce.DayPeriods,xe.Abbreviated);break;case"aaaa":e=Fe(Ce.DayPeriods,xe.Wide);break;case"aaaaa":e=Fe(Ce.DayPeriods,xe.Narrow);break;case"b":case"bb":case"bbb":e=Fe(Ce.DayPeriods,xe.Abbreviated,$t.Standalone,!0);break;case"bbbb":e=Fe(Ce.DayPeriods,xe.Wide,$t.Standalone,!0);break;case"bbbbb":e=Fe(Ce.DayPeriods,xe.Narrow,$t.Standalone,!0);break;case"B":case"BB":case"BBB":e=Fe(Ce.DayPeriods,xe.Abbreviated,$t.Format,!0);break;case"BBBB":e=Fe(Ce.DayPeriods,xe.Wide,$t.Format,!0);break;case"BBBBB":e=Fe(Ce.DayPeriods,xe.Narrow,$t.Format,!0);break;case"h":e=ct(be.Hours,1,-12);break;case"hh":e=ct(be.Hours,2,-12);break;case"H":e=ct(be.Hours,1);break;case"HH":e=ct(be.Hours,2);break;case"m":e=ct(be.Minutes,1);break;case"mm":e=ct(be.Minutes,2);break;case"s":e=ct(be.Seconds,1);break;case"ss":e=ct(be.Seconds,2);break;case"S":e=ct(be.FractionalSeconds,1);break;case"SS":e=ct(be.FractionalSeconds,2);break;case"SSS":e=ct(be.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Yd(br.Short);break;case"ZZZZZ":e=Yd(br.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Yd(br.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Yd(br.Long);break;default:return null}return qm[t]=e,e}function iA(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function CU(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function bU(t,e,n){let r=n?-1:1,i=t.getTimezoneOffset(),s=iA(e,i);return CU(t,r*(s-i))}function DU(t){if(QS(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,s=1,o=1]=t.split("-").map(a=>+a);return eh(i,s-1,o)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(gU))return SU(r)}let e=new Date(t);if(!QS(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function SU(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return s.call(e,o,a,c,l),e}function QS(t){return t instanceof Date&&!isNaN(t.valueOf())}function sA(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var zm=/\s+/,YS=[],oA=(()=>{class t{constructor(n,r){this._ngEl=n,this._renderer=r,this.initialClasses=YS,this.stateMap=new Map}set klass(n){this.initialClasses=n!=null?n.trim().split(zm):YS}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(zm):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(zm).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||t)(Er(vc),Er(Vd))}}static{this.\u0275dir=bd({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return t})();function AU(t,e){return new W(2100,!1)}var RU="mediumDate",NU=new U(""),PU=new U(""),aA=(()=>{class t{constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,s){if(n==null||n===""||n!==n)return null;try{let o=r??this.defaultOptions?.dateFormat??RU,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return _U(n,o,s||this.locale,a)}catch(o){throw AU(t,o.message)}}static{this.\u0275fac=function(r){return new(r||t)(Er($d,16),Er(NU,24),Er(PU,24))}}static{this.\u0275pipe=Xb({name:"date",type:t,pure:!0,standalone:!0})}}return t})();var Km="browser",MU="server";function Qm(t){return t===Km}function Ym(t){return t===MU}var th=class{};var Xm=class extends Xd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},e_=class t extends Xm{static makeCurrent(){JS(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=xU();return n==null?null:kU(n)}resetBaseElement(){Ec=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return sA(document.cookie,e)}},Ec=null;function xU(){return Ec=Ec||document.querySelector("base"),Ec?Ec.getAttribute("href"):null}function kU(t){return new URL(t,document.baseURI).pathname}var OU=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),t_=new U(""),dA=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new W(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(J(t_),J(Z))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),ih=class{constructor(e){this._doc=e}},Zm="ng-app-id",hA=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ym(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${Zm}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(Zm),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Zm,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(J(In),J(wm),J(Tm,8),J(Mn))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),Jm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},r_=/%COMP%/g,fA="%COMP%",FU=`_nghost-${fA}`,LU=`_ngcontent-${fA}`,VU=!0,UU=new U("",{providedIn:"root",factory:()=>VU});function jU(t){return LU.replace(r_,t)}function BU(t){return FU.replace(r_,t)}function pA(t,e){return e.map(n=>n.replace(r_,t))}var cA=(()=>{class t{constructor(n,r,i,s,o,a,c,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Ym(a),this.defaultRenderer=new Tc(n,o,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Yn.ShadowDom&&(r=Ae(V({},r),{encapsulation:Yn.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof sh?i.applyToHost(n):i instanceof Cc&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Yn.Emulated:s=new sh(c,l,r,this.appId,d,o,a,p);break;case Yn.ShadowDom:return new n_(c,l,n,r,o,a,this.nonce,p);default:s=new Cc(c,l,r,d,o,a,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(J(dA),J(hA),J(wm),J(UU),J(In),J(Mn),J(Z),J(Tm))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),Tc=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Jm[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(uA(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(uA(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new W(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Jm[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Jm[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Yi.DashCase|Yi.Important)?e.style.setProperty(n,r,i&Yi.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Yi.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Eo().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function uA(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var n_=class extends Tc{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=pA(i.id,i.styles);for(let d of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=d,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Cc=class extends Tc{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?pA(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},sh=class extends Cc{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=jU(l),this.hostAttr=BU(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},$U=(()=>{class t extends ih{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(J(In))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),lA=["alt","control","meta","shift"],HU={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qU={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},zU=(()=>{class t extends ih{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Eo().onAndCancel(n,s.domEventName,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),lA.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(n,r){let i=HU[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),lA.forEach(o=>{if(o!==i){let a=qU[o];a(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(J(In))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})();function gA(t,e){return GS(V({rootComponent:t},GU(e)))}function GU(t){return{appProviders:[...ZU,...t?.providers??[]],platformProviders:YU}}function WU(){e_.makeCurrent()}function KU(){return new Xn}function QU(){return tS(document),document}var YU=[{provide:Mn,useValue:Km},{provide:Em,useValue:WU,multi:!0},{provide:In,useFactory:QU,deps:[]}];var ZU=[{provide:Dd,useValue:"root"},{provide:Xn,useFactory:KU,deps:[]},{provide:t_,useClass:$U,multi:!0,deps:[In,Z,Mn]},{provide:t_,useClass:zU,multi:!0,deps:[In]},cA,hA,dA,{provide:go,useExisting:cA},{provide:th,useClass:OU,deps:[]},[]];var oh=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(J(In))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var oe="primary",$c=Symbol("RouteTitle"),c_=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ao(t){return new c_(t)}function JU(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function XU(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!er(t[n],e[n]))return!1;return!0}function er(t,e){let n=t?u_(t):void 0,r=e?u_(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!CA(t[i],e[i]))return!1;return!0}function u_(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function CA(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function bA(t){return t.length>0?t[t.length-1]:null}function fi(t){return rg(t)?t:Ic(t)?We(Promise.resolve(t)):K(t)}var ej={exact:SA,subset:AA},DA={exact:tj,subset:nj,ignored:()=>!0};function _A(t,e,n){return ej[n.paths](t.root,e.root,n.matrixParams)&&DA[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function tj(t,e){return er(t,e)}function SA(t,e,n){if(!rs(t.segments,e.segments)||!uh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!SA(t.children[r],e.children[r],n))return!1;return!0}function nj(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>CA(t[n],e[n]))}function AA(t,e,n){return RA(t,e,e.segments,n)}function RA(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!rs(i,n)||e.hasChildren()||!uh(i,n,r))}else if(t.segments.length===n.length){if(!rs(t.segments,n)||!uh(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!AA(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!rs(t.segments,i)||!uh(t.segments,i,r)||!t.children[oe]?!1:RA(t.children[oe],e,s,r)}}function uh(t,e,n){return e.every((r,i)=>DA[n](t[i].parameters,r.parameters))}var Sr=class{constructor(e=new De([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ao(this.queryParams),this._queryParamMap}toString(){return sj.serialize(this)}},De=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lh(this)}},ns=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Ao(this.parameters),this._parameterMap}toString(){return PA(this)}};function rj(t,e){return rs(t,e)&&t.every((n,r)=>er(n.parameters,e[r].parameters))}function rs(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function ij(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===oe&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==oe&&(n=n.concat(e(i,r)))}),n}var k_=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>new Pc,providedIn:"root"})}}return t})(),Pc=class{parse(e){let n=new d_(e);return new Sr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${bc(e.root,!0)}`,r=cj(e.queryParams),i=typeof e.fragment=="string"?`#${oj(e.fragment)}`:"";return`${n}${r}${i}`}},sj=new Pc;function lh(t){return t.segments.map(e=>PA(e)).join("/")}function bc(t,e){if(!t.hasChildren())return lh(t);if(e){let n=t.children[oe]?bc(t.children[oe],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==oe&&r.push(`${i}:${bc(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=ij(t,(r,i)=>i===oe?[bc(t.children[oe],!1)]:[`${i}:${bc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[oe]!=null?`${lh(t)}/${n[0]}`:`${lh(t)}/(${n.join("//")})`}}function NA(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ah(t){return NA(t).replace(/%3B/gi,";")}function oj(t){return encodeURI(t)}function l_(t){return NA(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dh(t){return decodeURIComponent(t)}function yA(t){return dh(t.replace(/\+/g,"%20"))}function PA(t){return`${l_(t.path)}${aj(t.parameters)}`}function aj(t){return Object.entries(t).map(([e,n])=>`;${l_(e)}=${l_(n)}`).join("")}function cj(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${ah(n)}=${ah(i)}`).join("&"):`${ah(n)}=${ah(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var uj=/^[^\/()?;#]+/;function i_(t){let e=t.match(uj);return e?e[0]:""}var lj=/^[^\/()?;=#]+/;function dj(t){let e=t.match(lj);return e?e[0]:""}var hj=/^[^=?&#]+/;function fj(t){let e=t.match(hj);return e?e[0]:""}var pj=/^[^&#]+/;function gj(t){let e=t.match(pj);return e?e[0]:""}var d_=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[oe]=new De(e,n)),r}parseSegment(){let e=i_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new W(4009,!1);return this.capture(e),new ns(dh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=dj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=i_(this.remaining);i&&(r=i,this.capture(r))}e[dh(n)]=dh(r)}parseQueryParam(e){let n=fj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=gj(this.remaining);o&&(r=o,this.capture(r))}let i=yA(n),s=yA(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=i_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new W(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=oe);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[oe]:new De([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new W(4011,!1)}};function MA(t){return t.segments.length>0?new De([],{[oe]:t}):t}function xA(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=xA(i);if(r===oe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new De(t.segments,e);return mj(n)}function mj(t){if(t.numberOfChildren===1&&t.children[oe]){let e=t.children[oe];return new De(t.segments.concat(e.segments),e.children)}return t}function Mc(t){return t instanceof Sr}function _j(t,e,n=null,r=null){let i=kA(t);return OA(i,e,n,r)}function kA(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new De(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=MA(r);return e??i}function OA(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return s_(i,i,i,n,r);let s=yj(e);if(s.toRoot())return s_(i,i,new De([],{}),n,r);let o=vj(s,i,t),a=o.processChildren?Ac(o.segmentGroup,o.index,s.commands):LA(o.segmentGroup,o.index,s.commands);return s_(i,o.segmentGroup,a,n,r)}function hh(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function xc(t){return typeof t=="object"&&t!=null&&t.outlets}function s_(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;t===e?o=n:o=FA(t,e,n);let a=MA(xA(o));return new Sr(a,s,i)}function FA(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=FA(s,e,n)}),new De(t.segments,r)}var fh=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&hh(r[0]))throw new W(4003,!1);let i=r.find(xc);if(i&&i!==bA(r))throw new W(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function yj(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new fh(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new fh(n,e,r)}var bo=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function vj(t,e,n){if(t.isAbsolute)return new bo(e,!0,0);if(!n)return new bo(e,!1,NaN);if(n.parent===null)return new bo(n,!0,0);let r=hh(t.commands[0])?0:1,i=n.segments.length-1+r;return Ij(n,i,t.numberOfDoubleDots)}function Ij(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new W(4005,!1);i=r.segments.length}return new bo(r,!1,i-s)}function wj(t){return xc(t[0])?t[0].outlets:{[oe]:t}}function LA(t,e,n){if(t??=new De([],{}),t.segments.length===0&&t.hasChildren())return Ac(t,e,n);let r=Ej(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new De(t.segments.slice(0,r.pathIndex),{});return s.children[oe]=new De(t.segments.slice(r.pathIndex),t.children),Ac(s,0,i)}else return r.match&&i.length===0?new De(t.segments,{}):r.match&&!t.hasChildren()?h_(t,e,n):r.match?Ac(t,0,i):h_(t,e,n)}function Ac(t,e,n){if(n.length===0)return new De(t.segments,{});{let r=wj(n),i={};if(Object.keys(r).some(s=>s!==oe)&&t.children[oe]&&t.numberOfChildren===1&&t.children[oe].segments.length===0){let s=Ac(t.children[oe],e,n);return new De(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=LA(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new De(t.segments,i)}}function Ej(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(xc(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!IA(c,l,o))return s;r+=2}else{if(!IA(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function h_(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(xc(s)){let c=Tj(s.outlets);return new De(r,c)}if(i===0&&hh(n[0])){let c=t.segments[e];r.push(new ns(c.path,vA(n[0]))),i++;continue}let o=xc(s)?s.outlets[oe]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&hh(a)?(r.push(new ns(o,vA(a))),i+=2):(r.push(new ns(o,{})),i++)}return new De(r,{})}function Tj(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=h_(new De([],{}),0,r))}),e}function vA(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function IA(t,e,n){return t==n.path&&er(e,n.parameters)}var Rc="imperative",Et=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Et||{}),wn=class{constructor(e,n){this.id=e,this.url=n}},kc=class extends wn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Et.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},is=class extends wn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Et.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},un=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(un||{}),f_=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(f_||{}),Dr=class extends wn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Et.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ss=class extends wn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Et.NavigationSkipped}},Oc=class extends wn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Et.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ph=class extends wn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Et.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},p_=class extends wn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Et.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},g_=class extends wn{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Et.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},m_=class extends wn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Et.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},__=class extends wn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Et.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},y_=class{constructor(e){this.route=e,this.type=Et.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},v_=class{constructor(e){this.route=e,this.type=Et.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},I_=class{constructor(e){this.snapshot=e,this.type=Et.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},w_=class{constructor(e){this.snapshot=e,this.type=Et.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},E_=class{constructor(e){this.snapshot=e,this.type=Et.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fc=class{constructor(e){this.snapshot=e,this.type=Et.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Lc=class{},Ro=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function Cj(t,e){return t.providers&&!t._injector&&(t._injector=Om(t.providers,e,`Route: ${t.path}`)),t._injector??e}function On(t){return t.outlet||oe}function bj(t,e){let n=t.filter(r=>On(r)===e);return n.push(...t.filter(r=>On(r)!==e)),n}function Hc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var T_=class{get injector(){return Hc(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new wh(this.rootInjector),this.attachRef=null}},wh=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new T_(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)(J(gn))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),gh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=C_(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=C_(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=b_(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return b_(e,this._root).map(n=>n.value)}};function C_(t,e){if(t===e.value)return e;for(let n of e.children){let r=C_(t,n);if(r)return r}return null}function b_(t,e){if(t===e.value)return[e];for(let n of e.children){let r=b_(t,n);if(r.length)return r.unshift(e),r}return[]}var cn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Co(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var mh=class extends gh{constructor(e,n){super(e),this.snapshot=n,O_(this,e)}toString(){return this.snapshot.toString()}};function VA(t){let e=Dj(t),n=new It([new ns("",{})]),r=new It({}),i=new It({}),s=new It({}),o=new It(""),a=new No(n,r,s,o,i,oe,t,e.root);return a.snapshot=e.root,new mh(new cn(a,[]),e)}function Dj(t){let e={},n={},r={},i="",s=new Do([],e,r,i,n,oe,t,null,{});return new yh("",new cn(s,[]))}var No=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Q(l=>l[$c]))??K(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Q(e=>Ao(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Q(e=>Ao(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function _h(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),t.params),data:V(V({},e.data),t.data),resolve:V(V(V(V({},t.data),e.data),i?.data),t._resolvedData)}:r={params:V({},t.params),data:V({},t.data),resolve:V(V({},t.data),t._resolvedData??{})},i&&jA(i)&&(r.resolve[$c]=i.title),r}var Do=class{get title(){return this.data?.[$c]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ao(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ao(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},yh=class extends gh{constructor(e,n){super(n),this.url=e,O_(this,n)}toString(){return UA(this._root)}};function O_(t,e){e.value._routerState=t,e.children.forEach(n=>O_(t,n))}function UA(t){let e=t.children.length>0?` { ${t.children.map(UA).join(", ")} } `:"";return`${t.value}${e}`}function o_(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,er(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),er(e.params,n.params)||t.paramsSubject.next(n.params),XU(e.url,n.url)||t.urlSubject.next(n.url),er(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function D_(t,e){let n=er(t.params,e.params)&&rj(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||D_(t.parent,e.parent))}function jA(t){return typeof t.title=="string"||t.title===null}var F_=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=oe,this.activateEvents=new Ut,this.deactivateEvents=new Ut,this.attachEvents=new Ut,this.detachEvents=new Ut,this.parentContexts=M(wh),this.location=M(Ud),this.changeDetector=M(wo),this.inputBinder=M(L_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new W(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new W(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new W(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new W(4013,!1);this._activatedRoute=n;let i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new S_(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=bd({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Nd]})}}return t})(),S_=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===No?this.route:e===wh?this.childContexts:this.parent.get(e,n)}},L_=new U("");function Sj(t,e,n){let r=Vc(t,e._root,n?n._root:void 0);return new mh(r,e)}function Vc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Aj(t,e,n);return new cn(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Vc(t,a)),o}}let r=Rj(e.value),i=e.children.map(s=>Vc(t,s));return new cn(r,i)}}function Aj(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Vc(t,r,i);return Vc(t,r)})}function Rj(t){return new No(new It(t.url),new It(t.params),new It(t.queryParams),new It(t.fragment),new It(t.data),t.outlet,t.component,t)}var Uc=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},BA="ngNavigationCancelingError";function vh(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Mc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=$A(!1,un.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function $A(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[BA]=!0,n.cancellationCode=e,n}function Nj(t){return HA(t)&&Mc(t.url)}function HA(t){return!!t&&t[BA]}var Pj=(t,e,n,r)=>Q(i=>(new A_(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),A_=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),o_(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Co(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Co(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Co(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Co(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Fc(s.value.snapshot))}),e.children.length&&this.forwardEvent(new w_(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(o_(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),o_(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Ih=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},So=class{constructor(e,n){this.component=e,this.route=n}};function Mj(t,e,n){let r=t._root,i=e?e._root:null;return Dc(r,i,n,[r.value])}function xj(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Mo(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Bb(t)?t:e.get(t):r}function Dc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Co(e);return t.children.forEach(o=>{kj(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Nc(a,n.getContext(o),i)),i}function kj(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=Oj(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Ih(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Dc(t,e,a?a.children:null,r,i):Dc(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new So(a.outlet.component,o))}else o&&Nc(e,a,i),i.canActivateChecks.push(new Ih(r)),s.component?Dc(t,null,a?a.children:null,r,i):Dc(t,null,n,r,i);return i}function Oj(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!rs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!rs(t.url,e.url)||!er(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!D_(t,e)||!er(t.queryParams,e.queryParams);case"paramsChange":default:return!D_(t,e)}}function Nc(t,e,n){let r=Co(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Nc(o,e.children.getContext(s),n):Nc(o,null,n):Nc(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new So(e.outlet.component,i)):n.canDeactivateChecks.push(new So(null,i)):n.canDeactivateChecks.push(new So(null,i))}function qc(t){return typeof t=="function"}function Fj(t){return typeof t=="boolean"}function Lj(t){return t&&qc(t.canLoad)}function Vj(t){return t&&qc(t.canActivate)}function Uj(t){return t&&qc(t.canActivateChild)}function jj(t){return t&&qc(t.canDeactivate)}function Bj(t){return t&&qc(t.canMatch)}function qA(t){return t instanceof mr||t?.name==="EmptyError"}var ch=Symbol("INITIAL_VALUE");function Po(){return Kt(t=>Js(t.map(e=>e.pipe(_r(1),to(ch)))).pipe(Q(e=>{for(let n of e)if(n!==!0){if(n===ch)return ch;if(n===!1||$j(n))return n}return!0}),Vt(e=>e!==ch),_r(1)))}function $j(t){return Mc(t)||t instanceof Uc}function Hj(t,e){return tt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?K(Ae(V({},n),{guardsResult:!0})):qj(o,r,i,t).pipe(tt(a=>a&&Fj(a)?zj(r,s,t,e):K(a)),Q(a=>Ae(V({},n),{guardsResult:a})))})}function qj(t,e,n,r){return We(t).pipe(tt(i=>Yj(i.component,i.route,n,e,r)),Wn(i=>i!==!0,!0))}function zj(t,e,n,r){return We(e).pipe(ji(i=>Xs(Wj(i.route.parent,r),Gj(i.route,r),Qj(t,i.path,n),Kj(t,i.route,n))),Wn(i=>i!==!0,!0))}function Gj(t,e){return t!==null&&e&&e(new E_(t)),K(!0)}function Wj(t,e){return t!==null&&e&&e(new I_(t)),K(!0)}function Kj(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return K(!0);let i=r.map(s=>Bl(()=>{let o=Hc(e)??n,a=Mo(s,o),c=Vj(a)?a.canActivate(e,t):vr(o,()=>a(e,t));return fi(c).pipe(Wn())}));return K(i).pipe(Po())}function Qj(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>xj(o)).filter(o=>o!==null).map(o=>Bl(()=>{let a=o.guards.map(c=>{let l=Hc(o.node)??n,d=Mo(c,l),p=Uj(d)?d.canActivateChild(r,t):vr(l,()=>d(r,t));return fi(p).pipe(Wn())});return K(a).pipe(Po())}));return K(s).pipe(Po())}function Yj(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return K(!0);let o=s.map(a=>{let c=Hc(e)??i,l=Mo(a,c),d=jj(l)?l.canDeactivate(t,e,n,r):vr(c,()=>l(t,e,n,r));return fi(d).pipe(Wn())});return K(o).pipe(Po())}function Zj(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return K(!0);let s=i.map(o=>{let a=Mo(o,t),c=Lj(a)?a.canLoad(e,n):vr(t,()=>a(e,n));return fi(c)});return K(s).pipe(Po(),zA(r))}function zA(t){return Dl(pt(e=>{if(typeof e!="boolean")throw vh(t,e)}),Q(e=>e===!0))}function Jj(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return K(!0);let s=i.map(o=>{let a=Mo(o,t),c=Bj(a)?a.canMatch(e,n):vr(t,()=>a(e,n));return fi(c)});return K(s).pipe(Po(),zA(r))}var jc=class{constructor(e){this.segmentGroup=e||null}},Bc=class extends Error{constructor(e){super(),this.urlTree=e}};function To(t){return Zs(new jc(t))}function Xj(t){return Zs(new W(4e3,!1))}function e2(t){return Zs($A(!1,un.GuardRejected))}var R_=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return K(r);if(i.numberOfChildren>1||!i.children[oe])return Xj(`${e.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:c,fragment:l,routeConfig:d,url:p,outlet:g,params:_,data:E,title:R}=i,A=vr(s,()=>a({params:_,data:E,queryParams:c,fragment:l,routeConfig:d,url:p,outlet:g,title:R}));if(A instanceof Sr)throw new Bc(A);n=A}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Bc(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Sr(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new De(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new W(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},N_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function t2(t,e,n,r,i){let s=GA(t,e,n);return s.matched?(r=Cj(e,r),Jj(r,e,n,i).pipe(Q(o=>o===!0?s:V({},N_)))):K(s)}function GA(t,e,n){if(e.path==="**")return n2(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?V({},N_):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||JU)(n,t,e);if(!i)return V({},N_);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?V(V({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function n2(t){return{matched:!0,parameters:t.length>0?bA(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function wA(t,e,n,r){return n.length>0&&s2(t,n,r)?{segmentGroup:new De(e,i2(r,new De(n,t.children))),slicedSegments:[]}:n.length===0&&o2(t,n,r)?{segmentGroup:new De(t.segments,r2(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new De(t.segments,t.children),slicedSegments:n}}function r2(t,e,n,r){let i={};for(let s of n)if(Eh(t,e,s)&&!r[On(s)]){let o=new De([],{});i[On(s)]=o}return V(V({},r),i)}function i2(t,e){let n={};n[oe]=e;for(let r of t)if(r.path===""&&On(r)!==oe){let i=new De([],{});n[On(r)]=i}return n}function s2(t,e,n){return n.some(r=>Eh(t,e,r)&&On(r)!==oe)}function o2(t,e,n){return n.some(r=>Eh(t,e,r))}function Eh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function a2(t,e,n){return e.length===0&&!t.children[n]}var P_=class{};function c2(t,e,n,r,i,s,o="emptyOnly"){return new M_(t,e,n,r,i,o,s).recognize()}var u2=31,M_=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new R_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new W(4002,`'${e.segmentGroup}'`)}recognize(){let e=wA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Q(({children:n,rootSnapshot:r})=>{let i=new cn(r,n),s=new yh("",i),o=_j(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new Do([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,oe,n).pipe(Q(r=>({children:r,rootSnapshot:n})),Yr(r=>{if(r instanceof Bc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof jc?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(Q(o=>o instanceof cn?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return We(s).pipe(ji(o=>{let a=r.children[o],c=bj(n,o);return this.processSegmentGroup(e,c,a,o,i)}),zl((o,a)=>(o.push(...a),o)),Zr(null),ag(),tt(o=>{if(o===null)return To(r);let a=WA(o);return l2(a),K(a)}))}processSegment(e,n,r,i,s,o,a){return We(n).pipe(ji(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,s,o,a).pipe(Yr(l=>{if(l instanceof jc)return K(null);throw l}))),Wn(c=>!!c),Yr(c=>{if(qA(c))return a2(r,i,s)?K(new P_):To(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,c){return On(r)!==o&&(o===oe||!Eh(i,s,r))?To(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,c):To(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:p,remainingSegments:g}=GA(n,i,s);if(!c)return To(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>u2&&(this.allowRedirects=!1));let _=new Do(s,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,EA(i),On(i),i.component??i._loadedComponent??null,i,TA(i)),E=_h(_,a,this.paramsInheritanceStrategy);_.params=Object.freeze(E.params),_.data=Object.freeze(E.data);let R=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,p,_,e);return this.applyRedirects.lineralizeSegments(i,R).pipe(tt(A=>this.processSegment(e,r,n,A.concat(g),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=t2(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Kt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Kt(({routes:l})=>{let d=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:_}=c,E=new Do(g,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,EA(r),On(r),r.component??r._loadedComponent??null,r,TA(r)),R=_h(E,o,this.paramsInheritanceStrategy);E.params=Object.freeze(R.params),E.data=Object.freeze(R.data);let{segmentGroup:A,slicedSegments:x}=wA(n,g,_,l);if(x.length===0&&A.hasChildren())return this.processChildren(d,l,A,E).pipe(Q($=>new cn(E,$)));if(l.length===0&&x.length===0)return K(new cn(E,[]));let L=On(r)===s;return this.processSegment(d,l,A,x,L?oe:s,!0,E).pipe(Q($=>new cn(E,$ instanceof cn?[$]:[])))}))):To(n)))}getChildConfig(e,n,r){return n.children?K({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?K({routes:n._loadedRoutes,injector:n._loadedInjector}):Zj(e,n,r,this.urlSerializer).pipe(tt(i=>i?this.configLoader.loadChildren(e,n).pipe(pt(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):e2(n))):K({routes:[],injector:e})}};function l2(t){t.sort((e,n)=>e.value.outlet===oe?-1:n.value.outlet===oe?1:e.value.outlet.localeCompare(n.value.outlet))}function d2(t){let e=t.value.routeConfig;return e&&e.path===""}function WA(t){let e=[],n=new Set;for(let r of t){if(!d2(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=WA(r.children);e.push(new cn(r.value,i))}return e.filter(r=>!n.has(r))}function EA(t){return t.data||{}}function TA(t){return t.resolve||{}}function h2(t,e,n,r,i,s){return tt(o=>c2(t,e,n,r,o.extractedUrl,i,s).pipe(Q(({state:a,tree:c})=>Ae(V({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function f2(t,e){return tt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return K(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of KA(c))o.add(l);let a=0;return We(o).pipe(ji(c=>s.has(c)?p2(c,r,t,e):(c.data=_h(c,c.parent,t).resolve,K(void 0))),pt(()=>a++),eo(1),tt(c=>a===o.size?K(n):tn))})}function KA(t){let e=t.children.map(n=>KA(n)).flat();return[t,...e]}function p2(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!jA(i)&&(s[$c]=i.title),g2(s,t,e,r).pipe(Q(o=>(t._resolvedData=o,t.data=_h(t,t.parent,n).resolve,null)))}function g2(t,e,n,r){let i=u_(t);if(i.length===0)return K({});let s={};return We(i).pipe(tt(o=>m2(t[o],e,n,r).pipe(Wn(),pt(a=>{if(a instanceof Uc)throw vh(new Pc,a);s[o]=a}))),eo(1),sg(s),Yr(o=>qA(o)?tn:Zs(o)))}function m2(t,e,n,r){let i=Hc(e)??r,s=Mo(t,i),o=s.resolve?s.resolve(e,n):vr(i,()=>s(e,n));return fi(o)}function a_(t){return Kt(e=>{let n=t(e);return n?We(n).pipe(Q(()=>e)):K(e)})}var QA=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===oe);return r}getResolvedTitleForRoute(n){return n.data[$c]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>M(_2),providedIn:"root"})}}return t})(),_2=(()=>{class t extends QA{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(J(oh))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),V_=new U("",{providedIn:"root",factory:()=>({})}),U_=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=si({type:t,selectors:[["ng-component"]],standalone:!0,features:[li],decls:1,vars:0,template:function(r,i){r&1&&Ji(0,"router-outlet")},dependencies:[F_],encapsulation:2})}}return t})();function j_(t){let e=t.children&&t.children.map(j_),n=e?Ae(V({},t),{children:e}):V({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==oe&&(n.component=U_),n}var B_=new U(""),y2=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=M(jm)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return K(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=fi(n.loadComponent()).pipe(Q(YA),pt(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),ic(()=>{this.componentLoaders.delete(n)})),i=new Ws(r,()=>new et).pipe(Gs());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return K({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=v2(r,this.compiler,n,this.onLoadEndListener).pipe(ic(()=>{this.childrenLoaders.delete(r)})),o=new Ws(s,()=>new et).pipe(Gs());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function v2(t,e,n,r){return fi(t.loadChildren()).pipe(Q(YA),tt(i=>i instanceof mc||Array.isArray(i)?K(i):We(e.compileModuleAsync(i))),Q(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(B_,[],{optional:!0,self:!0}).flat()),{routes:o.map(j_),injector:s}}))}function I2(t){return t&&typeof t=="object"&&"default"in t}function YA(t){return I2(t)?t.default:t}var $_=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>M(w2),providedIn:"root"})}}return t})(),w2=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),E2=new U("");var T2=new U(""),C2=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new et,this.transitionAbortSubject=new et,this.configLoader=M(y2),this.environmentInjector=M(gn),this.urlSerializer=M(k_),this.rootContexts=M(wh),this.location=M(wc),this.inputBindingEnabled=M(L_,{optional:!0})!==null,this.titleStrategy=M(QA),this.options=M(V_,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=M($_),this.createViewTransition=M(E2,{optional:!0}),this.navigationErrorHandler=M(T2,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>K(void 0),this.rootComponentType=null;let n=i=>this.events.next(new y_(i)),r=i=>this.events.next(new v_(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(Ae(V(V({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new It({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Rc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Vt(s=>s.id!==0),Q(s=>Ae(V({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Kt(s=>{let o=!1,a=!1;return K(s).pipe(Kt(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",un.SupersededByNewNavigation),tn;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Ae(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&d!=="reload"){let p="";return this.events.next(new ss(c.id,this.urlSerializer.serialize(c.rawUrl),p,f_.IgnoredSameUrlNavigation)),c.resolve(!1),tn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return K(c).pipe(Kt(p=>{let g=this.transitions?.getValue();return this.events.next(new kc(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),g!==this.transitions?.getValue()?tn:Promise.resolve(p)}),h2(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),pt(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=Ae(V({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let g=new ph(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:g,source:_,restoredState:E,extras:R}=c,A=new kc(p,this.urlSerializer.serialize(g),_,E);this.events.next(A);let x=VA(this.rootComponentType).snapshot;return this.currentTransition=s=Ae(V({},c),{targetSnapshot:x,urlAfterRedirects:g,extras:Ae(V({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,K(s)}else{let p="";return this.events.next(new ss(c.id,this.urlSerializer.serialize(c.extractedUrl),p,f_.IgnoredByUrlHandlingStrategy)),c.resolve(!1),tn}}),pt(c=>{let l=new p_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Q(c=>(this.currentTransition=s=Ae(V({},c),{guards:Mj(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),Hj(this.environmentInjector,c=>this.events.next(c)),pt(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw vh(this.urlSerializer,c.guardsResult);let l=new g_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Vt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",un.GuardRejected),!1)),a_(c=>{if(c.guards.canActivateChecks.length)return K(c).pipe(pt(l=>{let d=new m_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Kt(l=>{let d=!1;return K(l).pipe(f2(this.paramsInheritanceStrategy,this.environmentInjector),pt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",un.NoDataFromResolver)}}))}),pt(l=>{let d=new __(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),a_(c=>{let l=d=>{let p=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(d.routeConfig).pipe(pt(g=>{d.component=g}),Q(()=>{})));for(let g of d.children)p.push(...l(g));return p};return Js(l(c.targetSnapshot.root)).pipe(Zr(null),_r(1))}),a_(()=>this.afterPreactivation()),Kt(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?We(d).pipe(Q(()=>s)):K(s)}),Q(c=>{let l=Sj(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=Ae(V({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),pt(()=>{this.events.next(new Lc)}),Pj(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),_r(1),pt({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new is(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),nn(this.transitionAbortSubject.pipe(pt(c=>{throw c}))),ic(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",un.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Yr(c=>{if(a=!0,HA(c))this.events.next(new Dr(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),Nj(c)?this.events.next(new Ro(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new Oc(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let d=vr(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof Uc){let{message:p,cancellationCode:g}=vh(this.urlSerializer,d);this.events.next(new Dr(s.id,this.urlSerializer.serialize(s.extractedUrl),p,g)),this.events.next(new Ro(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let p=n.errorHandler(c);s.resolve(!!p)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return tn}))}))}cancelNavigationTransition(n,r,i){let s=new Dr(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function b2(t){return t!==Rc}var D2=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>M(S2),providedIn:"root"})}}return t})(),x_=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},S2=(()=>{class t extends x_{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=_m(t)))(i||t)}})()}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),ZA=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>M(A2),providedIn:"root"})}}return t})(),A2=(()=>{class t extends ZA{constructor(){super(...arguments),this.location=M(wc),this.urlSerializer=M(k_),this.options=M(V_,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=M($_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Sr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=VA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof kc)this.stateMemento=this.createStateMemento();else if(n instanceof ss)this.rawUrlTree=r.initialUrl;else if(n instanceof ph){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof Lc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof Dr&&(n.code===un.GuardRejected||n.code===un.NoDataFromResolver)?this.restoreHistory(r):n instanceof Oc?this.restoreHistory(r,!0):n instanceof is&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof Sr?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=V(V({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=_m(t)))(i||t)}})()}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Sc=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Sc||{});function R2(t,e){t.events.pipe(Vt(n=>n instanceof is||n instanceof Dr||n instanceof Oc||n instanceof ss),Q(n=>n instanceof is||n instanceof ss?Sc.COMPLETE:(n instanceof Dr?n.code===un.Redirect||n.code===un.SupersededByNewNavigation:!1)?Sc.REDIRECTING:Sc.FAILED),Vt(n=>n!==Sc.REDIRECTING),_r(1)).subscribe(()=>{e()})}function N2(t){throw t}var P2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},M2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Th=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=M(Bd),this.stateManager=M(ZA),this.options=M(V_,{optional:!0})||{},this.pendingTasks=M(Qi),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=M(C2),this.urlSerializer=M(k_),this.location=M(wc),this.urlHandlingStrategy=M($_),this._events=new et,this.errorHandler=this.options.errorHandler||N2,this.navigated=!1,this.routeReuseStrategy=M(D2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=M(B_,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!M(L_,{optional:!0}),this.eventsSubscription=new Ge,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Dr&&r.code!==un.Redirect&&r.code!==un.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof is)this.navigated=!0;else if(r instanceof Ro){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||b2(i.source)},o);this.scheduleNavigation(a,Rc,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}k2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Rc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=V({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(j_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=V(V({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=kA(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return OA(p,n,d,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Mc(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Rc,null,r)}navigate(n,r={skipLocationChange:!1}){return x2(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=V({},P2):r===!1?i=V({},M2):i=r,Mc(n))return _A(this.currentUrlTree,n,i);let s=this.parseUrl(n);return _A(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((p,g)=>{a=p,c=g});let d=this.pendingTasks.add();return R2(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function x2(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new W(4008,!1)}function k2(t){return!(t instanceof Lc)&&!(t instanceof Ro)}var O2=new U("");function JA(t,...e){return Oe([{provide:B_,multi:!0,useValue:t},[],{provide:No,useFactory:F2,deps:[Th]},{provide:Um,multi:!0,useFactory:L2},e.map(n=>n.\u0275providers)])}function F2(t){return t.routerState.root}function L2(){let t=M(me);return e=>{let n=t.get(es);if(e!==n.components[0])return;let r=t.get(Th),i=t.get(V2);t.get(U2)===1&&r.initialNavigation(),t.get(j2,null,le.Optional)?.setUpPreloading(),t.get(O2,null,le.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var V2=new U("",{factory:()=>new et}),U2=new U("",{providedIn:"root",factory:()=>1});var j2=new U("");var XA=[];var $2="firebase",H2="10.14.1";q($2,H2,"app");var Ve=new ii("ANGULARFIRE2_VERSION"),ko=t=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${t} in the constructor, first ensure that ${t} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${t})\`.`;function ut(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var it=(t,e)=>{let n=e?[e]:pl(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Yt=class{constructor(){return it(q2)}},q2="app-check";function xo(){}var Ch=class{zone;delegate;constructor(e,n=tg){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},H_=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xo,{},xo,xo)),n.pipe(pt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ye=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Ch(Zone.current)),this.insideAngular=n.run(()=>new Ch(Zone.current,eg)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(J(Z))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function bh(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function z2(t){return bh().ngZone.runOutsideAngular(()=>t())}function os(t){return bh().ngZone.run(()=>t())}function G2(t){return W2(bh())(t)}function W2(t){return function(n){return n=n.lift(new H_(t.ngZone)),n.pipe(Qr(t.outsideAngular),Kr(t.insideAngular))}}var K2=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),os(()=>t.apply(void 0,r))},we=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=os(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xo,{},xo,xo))),r[s]=K2(r[s],n));let i=z2(()=>t.apply(this,r));if(!e)if(i instanceof ae){let s=bh();return i.pipe(Qr(s.outsideAngular),Kr(s.insideAngular))}else return os(()=>i);return i instanceof ae?i.pipe(G2):i instanceof Promise?os(()=>new Promise((s,o)=>i.then(a=>os(()=>s(a)),a=>os(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:os(()=>i)};var Ue=class{constructor(e){return e}},$e=class{constructor(){return pl()}};function Q2(t){return t&&t.length===1?t[0]:new Ue(ot())}var q_=new U("angularfire2._apps"),Y2={provide:Ue,useFactory:Q2,deps:[[new te,q_]]},Z2={provide:$e,deps:[[new te,q_]]};function J2(t){return(e,n)=>{let r=n.get(Mn);q("angularfire",Ve.full,"core"),q("angularfire",Ve.full,"app"),q("angular",US.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Ue(i)}}function e0(t,...e){return Oe([Y2,Z2,{provide:q_,useFactory:J2(t),multi:!0,deps:[Z,me,Ye,...e]}])}var t0=we(hC,!0);function m0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var _0=m0,y0=new qn("auth","Firebase",m0());var Ph=new Gn("@firebase/auth");function X2(t,...e){Ph.logLevel<=At.WARN&&Ph.warn(`Auth (${Gt}): ${t}`,...e)}function Sh(t,...e){Ph.logLevel<=At.ERROR&&Ph.error(`Auth (${Gt}): ${t}`,...e)}function gi(t,...e){throw ly(t,...e)}function cs(t,...e){return ly(t,...e)}function v0(t,e,n){let r=Object.assign(Object.assign({},_0()),{[e]:n});return new qn("auth","Firebase",r).create(e,{appName:t.name})}function as(t){return v0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ly(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return y0.create(t,...e)}function ne(t,e,...n){if(!t)throw ly(e,...n)}function Ar(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Sh(e),new Error(e)}function mi(t,e){t||Ar(e)}function K_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function eB(){return n0()==="http:"||n0()==="https:"}function n0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function tB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eB()||Ha()||"connection"in navigator)?navigator.onLine:!0}function nB(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var us=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,mi(n>e,"Short delay should be less than long delay!"),this.isMobile=$a()||dl()}get(){return tB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function dy(t,e){mi(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Mh=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var rB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var iB=new us(3e4,6e4);function hy(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Fo(s,o,a,c){return y(this,arguments,function*(t,e,n,r,i={}){return I0(t,i,()=>y(this,null,function*(){let l={},d={};r&&(e==="GET"?d=r:l={body:JSON.stringify(r)});let p=Oi(Object.assign({key:t.config.apiKey},d)).slice(1),g=yield t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);let _=Object.assign({method:e,headers:g},l);return rC()||(_.referrerPolicy="no-referrer"),Mh.fetch()(w0(t,t.config.apiHost,n,p),_)}))})}function I0(t,e,n){return y(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},rB),e);try{let i=new Q_(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Dh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dh(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Dh(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Dh(t,"user-disabled",o);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw v0(t,d,l);gi(t,d)}}catch(i){if(i instanceof zt)throw i;gi(t,"network-request-failed",{message:String(i)})}})}function sB(s,o,a,c){return y(this,arguments,function*(t,e,n,r,i={}){let l=yield Fo(t,e,n,r,i);return"mfaPendingCredential"in l&&gi(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function w0(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?dy(t.config,i):`${t.config.apiScheme}://${i}`}var Q_=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(cs(this.auth,"network-request-failed")),iB.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Dh(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=cs(t,e,r);return i.customData._tokenResponse=n,i}function oB(t,e){return y(this,null,function*(){return Fo(t,"POST","/v1/accounts:delete",e)})}function E0(t,e){return y(this,null,function*(){return Fo(t,"POST","/v1/accounts:lookup",e)})}function zc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function fy(t,e=!1){return y(this,null,function*(){let n=fe(t),r=yield n.getIdToken(e),i=py(r);ne(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:zc(z_(i.auth_time)),issuedAtTime:zc(z_(i.iat)),expirationTime:zc(z_(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function z_(t){return Number(t)*1e3}function py(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Sh("JWT malformed, contained fewer than 3 sections"),null;try{let i=eC(n);return i?JSON.parse(i):(Sh("Failed to decode base64 JWT payload"),null)}catch(i){return Sh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function r0(t){let e=py(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Wc(t,e,n=!1){return y(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof zt&&aB(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function aB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Y_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>y(this,null,function*(){yield this.iteration()}),n)}iteration(){return y(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Kc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zc(this.lastLoginAt),this.creationTime=zc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function xh(t){return y(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Wc(t,E0(n,{idToken:r}));ne(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?T0(s.providerUserInfo):[],a=cB(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,d=c?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Kc(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,p)})}function gy(t){return y(this,null,function*(){let e=fe(t);yield xh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function cB(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function T0(t){return t.map(e=>{var{providerId:n}=e,r=ng(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function uB(t,e){return y(this,null,function*(){let n=yield I0(t,{},()=>y(this,null,function*(){let r=Oi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=w0(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Mh.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function lB(t,e){return y(this,null,function*(){return Fo(t,"POST","/v2/accounts:revokeToken",hy(t,e))})}var Gc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):r0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ne(e.length!==0,"internal-error");let n=r0(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return y(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return y(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield uB(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(ne(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ne(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ne(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Ar("not implemented")}};function pi(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Oo=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=ng(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Y_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Kc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return y(this,null,function*(){let n=yield Wc(this,this.stsTokenManager.getToken(this.auth,e));return ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return fy(this,e)}reload(){return gy(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return y(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield xh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return y(this,null,function*(){if(pr(this.auth.app))return Promise.reject(as(this.auth));let e=yield this.getIdToken();return yield Wc(this,oB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,d;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(a=n.tenantId)!==null&&a!==void 0?a:void 0,A=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,x=(l=n.createdAt)!==null&&l!==void 0?l:void 0,L=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:$,emailVerified:G,isAnonymous:Ne,providerData:Y,stsTokenManager:T}=n;ne($&&T,e,"internal-error");let v=Gc.fromJSON(this.name,T);ne(typeof $=="string",e,"internal-error"),pi(p,e.name),pi(g,e.name),ne(typeof G=="boolean",e,"internal-error"),ne(typeof Ne=="boolean",e,"internal-error"),pi(_,e.name),pi(E,e.name),pi(R,e.name),pi(A,e.name),pi(x,e.name),pi(L,e.name);let I=new t({uid:$,auth:e,email:g,emailVerified:G,displayName:p,isAnonymous:Ne,photoURL:E,phoneNumber:_,tenantId:R,stsTokenManager:v,createdAt:x,lastLoginAt:L});return Y&&Array.isArray(Y)&&(I.providerData=Y.map(C=>Object.assign({},C))),A&&(I._redirectEventId=A),I}static _fromIdTokenResponse(e,n,r=!1){return y(this,null,function*(){let i=new Gc;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield xh(s),s})}static _fromGetAccountInfoResponse(e,n,r){return y(this,null,function*(){let i=n.users[0];ne(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?T0(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Gc;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Kc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var i0=new Map;function Rr(t){mi(t instanceof Function,"Expected a class definition");let e=i0.get(t);return e?(mi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,i0.set(t,e),e)}var dB=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return y(this,null,function*(){return!0})}_set(n,r){return y(this,null,function*(){this.storage[n]=r})}_get(n){return y(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return y(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Z_=dB;function Ah(t,e,n){return`firebase:${t}:${e}:${n}`}var kh=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Ah(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ah("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return y(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Oo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return y(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return y(this,null,function*(){if(!n.length)return new t(Rr(Z_),e,r);let i=(yield Promise.all(n.map(l=>y(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Rr(Z_),o=Ah(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let d=yield l._get(o);if(d){let p=Oo._fromJSON(e,d);l!==s&&(a=p),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>y(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function s0(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(S0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(C0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(R0(e))return"Blackberry";if(N0(e))return"Webos";if(b0(e))return"Safari";if((e.includes("chrome/")||D0(e))&&!e.includes("edge/"))return"Chrome";if(A0(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function C0(t=St()){return/firefox\//i.test(t)}function b0(t=St()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function D0(t=St()){return/crios\//i.test(t)}function S0(t=St()){return/iemobile/i.test(t)}function A0(t=St()){return/android/i.test(t)}function R0(t=St()){return/blackberry/i.test(t)}function N0(t=St()){return/webos/i.test(t)}function my(t=St()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function hB(t=St()){var e;return my(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function fB(){return iC()&&document.documentMode===10}function P0(t=St()){return my(t)||A0(t)||N0(t)||R0(t)||/windows phone/i.test(t)||S0(t)}function M0(t,e=[]){let n;switch(t){case"Browser":n=s0(St());break;case"Worker":n=`${s0(St())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Gt}/${r}`}var J_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return y(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function pB(n){return y(this,arguments,function*(t,e={}){return Fo(t,"GET","/v2/passwordPolicy",hy(t,e))})}var gB=6,X_=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:gB,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var ey=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Oh(this),this.idTokenSubscription=new Oh(this),this.beforeStateQueue=new J_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=y0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Rr(n)),this._initializationPromise=this.queue(()=>y(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield kh.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return y(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return y(this,null,function*(){try{let n=yield E0(this,{idToken:e}),r=yield Oo._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return y(this,null,function*(){var n;if(pr(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return y(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return y(this,null,function*(){try{yield xh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=nB()}_delete(){return y(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return y(this,null,function*(){if(pr(this.app))return Promise.reject(as(this));let n=e?fe(e):null;return n&&ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return y(this,null,function*(){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>y(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return y(this,null,function*(){return pr(this.app)?Promise.reject(as(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return pr(this.app)?Promise.reject(as(this)):this.queue(()=>y(this,null,function*(){yield this.assertedPersistence.setPersistence(Rr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return y(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return y(this,null,function*(){let e=yield pB(this),n=new X_(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new qn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return y(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield lB(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return y(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return y(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Rr(e)||this._popupRedirectResolver;ne(n,this,"argument-error"),this.redirectPersistenceManager=yield kh.create(this,[Rr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return y(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>y(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return y(this,null,function*(){if(e===this.currentUser)return this.queue(()=>y(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return y(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=M0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return y(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return y(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&X2(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function _y(t){return fe(t)}var Oh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=uC(n=>this.observer=n)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var yy={loadJS(){return y(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mB(t){yy=t}function _B(t){return yy.loadJS(t)}function yB(){return yy.gapiScript}function x0(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function vy(t,e){let n=st(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Wa(s,e??{}))return i;gi(i,"already-initialized")}return n.initialize({options:e})}function vB(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Rr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Iy(t,e,n){let r=_y(t);ne(r._canInitEmulator,r,"emulator-config-failed"),ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=k0(e),{host:o,port:a}=IB(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||wB()}function k0(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function IB(t){let e=k0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:o0(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:o0(o)}}}function o0(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function wB(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Fh=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ar("not implemented")}_getIdTokenResponse(e){return Ar("not implemented")}_linkToIdToken(e,n){return Ar("not implemented")}_getReauthenticationResolver(e){return Ar("not implemented")}};function G_(t,e){return y(this,null,function*(){return sB(t,"POST","/v1/accounts:signInWithIdp",hy(t,e))})}var Lh=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var ty=class extends Lh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Qc=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return y(this,null,function*(){let s=yield Oo._fromIdTokenResponse(e,r,i),o=a0(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return y(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=a0(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function a0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var ny=class t extends zt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function O0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ny._fromErrorAndOperation(t,s,e,r):s})}function EB(t,e,n=!1){return y(this,null,function*(){let r=yield Wc(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Qc._forOperation(t,"link",r)})}function TB(t,e,n=!1){return y(this,null,function*(){let{auth:r}=t;if(pr(r.app))return Promise.reject(as(r));let i="reauthenticate";try{let s=yield Wc(t,O0(r,i,e,t),n);ne(s.idToken,r,"internal-error");let o=py(s.idToken);ne(o,r,"internal-error");let{sub:a}=o;return ne(t.uid===a,r,"user-mismatch"),Qc._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&gi(r,"user-mismatch"),s}})}function CB(t,e,n=!1){return y(this,null,function*(){if(pr(t.app))return Promise.reject(as(t));let r="signIn",i=yield O0(t,r,e),s=yield Qc._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function $h(t,e,n,r){return fe(t).onIdTokenChanged(e,n,r)}function wy(t,e,n){return fe(t).beforeAuthStateChanged(e,n)}function Hh(t,e,n,r){return fe(t).onAuthStateChanged(e,n,r)}var Vh="__sak";var Uh=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vh,"1"),this.storage.removeItem(Vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var bB=1e3,DB=10,SB=(()=>{class t extends Uh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=P0(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);fB()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,DB):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},bB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return y(this,null,function*(){yield zr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return y(this,null,function*(){let r=yield zr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return y(this,null,function*(){yield zr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),F0=SB;var AB=(()=>{class t extends Uh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Ey=AB;function RB(t){return Promise.all(t.map(e=>y(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var NB=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return y(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(d=>y(this,null,function*(){return d(r.origin,o)})),l=yield RB(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function L0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var ry=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return y(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=L0("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function tr(){return window}function PB(t){tr().location.href=t}function V0(){return typeof tr().WorkerGlobalScope<"u"&&typeof tr().importScripts=="function"}function MB(){return y(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function xB(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function kB(){return V0()?self:null}var U0="firebaseLocalStorageDb",OB=1,jh="firebaseLocalStorage",j0="fbase_key",ls=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function qh(t,e){return t.transaction([jh],e?"readwrite":"readonly").objectStore(jh)}function FB(){let t=indexedDB.deleteDatabase(U0);return new ls(t).toPromise()}function iy(){let t=indexedDB.open(U0,OB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(jh,{keyPath:j0})}catch(i){n(i)}}),t.addEventListener("success",()=>y(this,null,function*(){let r=t.result;r.objectStoreNames.contains(jh)?e(r):(r.close(),yield FB(),e(yield iy()))}))})}function c0(t,e,n){return y(this,null,function*(){let r=qh(t,!0).put({[j0]:e,value:n});return new ls(r).toPromise()})}function LB(t,e){return y(this,null,function*(){let n=qh(t,!1).get(e),r=yield new ls(n).toPromise();return r===void 0?null:r.value})}function u0(t,e){let n=qh(t,!0).delete(e);return new ls(n).toPromise()}var VB=800,UB=3,jB=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return y(this,null,function*(){return this.db?this.db:(this.db=yield iy(),this.db)})}_withRetries(n){return y(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>UB)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return y(this,null,function*(){return V0()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return y(this,null,function*(){this.receiver=NB._getInstance(kB()),this.receiver._subscribe("keyChanged",(n,r)=>y(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>y(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return y(this,null,function*(){var n,r;if(this.activeServiceWorker=yield MB(),!this.activeServiceWorker)return;this.sender=new ry(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return y(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||xB()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return y(this,null,function*(){try{if(!indexedDB)return!1;let n=yield iy();return yield c0(n,Vh,"1"),yield u0(n,Vh),!0}catch{}return!1})}_withPendingWrite(n){return y(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(i=>c0(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return y(this,null,function*(){let r=yield this._withRetries(i=>LB(i,n));return this.localCache[n]=r,r})}_remove(n){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(r=>u0(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return y(this,null,function*(){let n=yield this._withRetries(s=>{let o=qh(s,!1).getAll();return new ls(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>y(this,null,function*(){return this._poll()}),VB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),B0=jB;var NJ=x0("rcb"),PJ=new us(3e4,6e4);function BB(t,e){return e?Rr(e):(ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Yc=class extends Fh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return G_(e,this._buildIdpRequest())}_linkToIdToken(e,n){return G_(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return G_(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function $B(t){return CB(t.auth,new Yc(t),t.bypassAuthState)}function HB(t){let{auth:e,user:n}=t;return ne(n,e,"internal-error"),TB(n,new Yc(t),t.bypassAuthState)}function qB(t){return y(this,null,function*(){let{auth:e,user:n}=t;return ne(n,e,"internal-error"),EB(n,new Yc(t),t.bypassAuthState)})}var sy=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>y(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return y(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $B;case"linkViaPopup":case"linkViaRedirect":return qB;case"reauthViaPopup":case"reauthViaRedirect":return HB;default:gi(this.auth,"internal-error")}}resolve(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var MJ=new us(2e3,1e4);var zB="pendingRedirect",Rh=new Map,oy=class t extends sy{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return y(this,null,function*(){let e=Rh.get(this.auth._key());if(!e){try{let r=(yield GB(this.resolver,this.auth))?yield zr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Rh.set(this.auth._key(),e)}return this.bypassAuthState||Rh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return y(this,null,function*(){if(e.type==="signInViaRedirect")return zr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,zr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return y(this,null,function*(){})}cleanUp(){}};function GB(t,e){return y(this,null,function*(){let n=QB(e),r=KB(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function WB(t,e){Rh.set(t._key(),e)}function KB(t){return Rr(t._redirectPersistence)}function QB(t){return Ah(zB,t.config.apiKey,t.name)}function YB(t,e,n=!1){return y(this,null,function*(){if(pr(t.app))return Promise.reject(as(t));let r=_y(t),i=BB(r,e),o=yield new oy(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var ZB=10*60*1e3,ay=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!$0(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(cs(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZB&&this.cachedEventUids.clear(),this.cachedEventUids.has(l0(e))}saveEventToCache(e){this.cachedEventUids.add(l0(e)),this.lastProcessedEventTime=Date.now()}};function l0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $0({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function JB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $0(t);default:return!1}}function XB(n){return y(this,arguments,function*(t,e={}){return Fo(t,"GET","/v1/projects",e)})}var e$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,t$=/^https?/;function n$(t){return y(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield XB(t);for(let n of e)try{if(r$(n))return}catch{}gi(t,"unauthorized-domain")})}function r$(t){let e=K_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!t$.test(n))return!1;if(e$.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var i$=new us(3e4,6e4);function d0(){let t=tr().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function s$(t){return new Promise((e,n)=>{var r,i,s;function o(){d0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{d0(),n(cs(t,"network-request-failed"))},timeout:i$.get()})}if(!((i=(r=tr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=tr().gapi)===null||s===void 0)&&s.load)o();else{let a=x0("iframefcb");return tr()[a]=()=>{gapi.load?o():n(cs(t,"network-request-failed"))},_B(`${yB()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Nh=null,e})}var Nh=null;function o$(t){return Nh=Nh||s$(t),Nh}var a$=new us(5e3,15e3),c$="__/auth/iframe",u$="emulator/auth/iframe",l$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},d$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function h$(t){let e=t.config;ne(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?dy(e,u$):`https://${t.config.authDomain}/${c$}`,r={apiKey:e.apiKey,appName:t.name,v:Gt},i=d$.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Oi(r).slice(1)}`}function f$(t){return y(this,null,function*(){let e=yield o$(t),n=tr().gapi;return ne(n,t,"internal-error"),e.open({where:document.body,url:h$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:l$,dontclear:!0},r=>new Promise((i,s)=>y(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=cs(t,"network-request-failed"),a=tr().setTimeout(()=>{s(o)},a$.get());function c(){tr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var p$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},g$=500,m$=600,_$="_blank",y$="http://localhost",Bh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function v$(t,e,n,r=g$,i=m$){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},p$),{width:r.toString(),height:i.toString(),top:s,left:o}),l=St().toLowerCase();n&&(a=D0(l)?_$:n),C0(l)&&(e=e||y$,c.scrollbars="yes");let d=Object.entries(c).reduce((g,[_,E])=>`${g}${_}=${E},`,"");if(hB(l)&&a!=="_self")return I$(e||"",a),new Bh(null);let p=window.open(e||"",a,d);ne(p,t,"popup-blocked");try{p.focus()}catch{}return new Bh(p)}function I$(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var w$="__/auth/handler",E$="emulator/auth/handler",T$=encodeURIComponent("fac");function h0(t,e,n,r,i,s){return y(this,null,function*(){ne(t.config.authDomain,t,"auth-domain-config-required"),ne(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Gt,eventId:i};if(e instanceof Lh){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",za(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,p]of Object.entries(s||{}))o[d]=p}if(e instanceof ty){let d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield t._getAppCheckToken(),l=c?`#${T$}=${encodeURIComponent(c)}`:"";return`${C$(t)}?${Oi(a).slice(1)}${l}`})}function C$({config:t}){return t.emulator?dy(t,E$):`https://${t.authDomain}/${w$}`}var W_="webStorageSupport",cy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ey,this._completeRedirectFn=YB,this._overrideRedirectResult=WB}_openPopup(e,n,r,i){return y(this,null,function*(){var s;mi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield h0(e,n,r,K_(),i);return v$(e,o,L0())})}_openRedirect(e,n,r,i){return y(this,null,function*(){yield this._originValidation(e);let s=yield h0(e,n,r,K_(),i);return PB(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(mi(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return y(this,null,function*(){let n=yield f$(e),r=new ay(e);return n.register("authEvent",i=>(ne(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(W_,{type:W_},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[W_];o!==void 0&&n(!!o),gi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=n$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return P0()||b0()||my()}},H0=cy;var f0="@firebase/auth",p0="1.7.9";var uy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return y(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function b$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function D$(t){Xe(new Je("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ne(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:M0(t)},l=new ey(r,i,s,c);return vB(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Xe(new Je("auth-internal",e=>{let n=_y(e.getProvider("auth").getImmediate());return(r=>new uy(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),q(f0,p0,b$(t)),q(f0,p0,"esm2017")}var S$=5*60,A$=Up("authIdTokenMaxAge")||S$,g0=null,R$=t=>e=>y(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>A$)return;let i=n?.token;g0!==i&&(g0=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Ty(t=ot()){let e=st(t,"auth");if(e.isInitialized())return e.getImmediate();let n=vy(t,{popupRedirectResolver:H0,persistence:[B0,F0,Ey]}),r=Up("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=R$(s.toString());wy(n,o,()=>o(n.currentUser)),$h(n,a=>o(a))}}let i=nC("auth");return i&&Iy(n,`http://${i}`),n}function N$(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}mB({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=cs("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",N$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});D$("Browser");function z0(t){return new ae(function(e){var n=Hh(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var G0="auth",ds=class{constructor(e){return e}},Fn=class{constructor(){return it(G0)}};var Cy=new U("angularfire2.auth-instances");function EH(t,e){let n=ut(G0,t,e);return n&&new ds(n)}function TH(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ds(r)}}var CH={provide:Fn,deps:[[new te,Cy]]},bH={provide:ds,useFactory:EH,deps:[[new te,Cy],Ue]};function W0(t,...e){return q("angularfire",Ve.full,"auth"),Oe([bH,CH,{provide:Cy,useFactory:TH(t),multi:!0,deps:[Z,me,Ye,$e,[new te,Yt],...e]}])}var K0=we(z0,!0);var Q0=we(Ty,!0);var zh="analytics",SH="firebase_id",AH="origin",RH=60*1e3,NH="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Py="https://www.googletagmanager.com/gtag/js";var Ht=new Gn("@firebase/analytics");var PH={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ln=new qn("analytics","Analytics",PH);function MH(t){if(!t.startsWith(Py)){let e=ln.create("invalid-gtag-resource",{gtagURL:t});return Ht.warn(e.message),""}return t}function nR(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function xH(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function kH(t,e){let n=xH("firebase-js-sdk-policy",{createScriptURL:MH}),r=document.createElement("script"),i=`${Py}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function OH(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function FH(t,e,n,r,i,s){return y(this,null,function*(){let o=r[i];try{if(o)yield e[o];else{let c=(yield nR(n)).find(l=>l.measurementId===i);c&&(yield e[c.appId])}}catch(a){Ht.error(a)}t("config",i,s)})}function LH(t,e,n,r,i){return y(this,null,function*(){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);let a=yield nR(n);for(let c of o){let l=a.find(p=>p.measurementId===c),d=l&&e[l.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),yield Promise.all(s),t("event",r,i||{})}catch(s){Ht.error(s)}})}function VH(t,e,n,r){function i(s,...o){return y(this,null,function*(){try{if(s==="event"){let[a,c]=o;yield LH(t,e,n,a,c)}else if(s==="config"){let[a,c]=o;yield FH(t,e,n,r,a,c)}else if(s==="consent"){let[a,c]=o;t("consent",a,c)}else if(s==="get"){let[a,c,l]=o;t("get",a,c,l)}else if(s==="set"){let[a]=o;t("set",a)}else t(s,...o)}catch(a){Ht.error(a)}})}return i}function UH(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=VH(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function jH(t){let e=window.document.getElementsByTagName("script");for(let n of Object.values(e))if(n.src&&n.src.includes(Py)&&n.src.includes(t))return n;return null}var BH=30,$H=1e3,Dy=class{constructor(e={},n=$H){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},rR=new Dy;function HH(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function qH(t){return y(this,null,function*(){var e;let{appId:n,apiKey:r}=t,i={method:"GET",headers:HH(r)},s=NH.replace("{app-id}",n),o=yield fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{let c=yield o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw ln.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})}function zH(r){return y(this,arguments,function*(t,e=rR,n){let{appId:i,apiKey:s,measurementId:o}=t.options;if(!i)throw ln.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw ln.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new Sy;return setTimeout(()=>y(this,null,function*(){c.abort()}),n!==void 0?n:RH),iR({appId:i,apiKey:s,measurementId:o},a,c,e)})}function iR(s,o,a){return y(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=rR){var c;let{appId:l,measurementId:d}=t;try{yield GH(r,e)}catch(p){if(d)return Ht.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:l,measurementId:d};throw p}try{let p=yield qH(t);return i.deleteThrottleMetadata(l),p}catch(p){let g=p;if(!WH(g)){if(i.deleteThrottleMetadata(l),d)return Ht.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:l,measurementId:d};throw p}let _=Number((c=g?.customData)===null||c===void 0?void 0:c.httpStatus)===503?Qa(n,i.intervalMillis,BH):Qa(n,i.intervalMillis),E={throttleEndTimeMillis:Date.now()+_,backoffCount:n+1};return i.setThrottleMetadata(l,E),Ht.debug(`Calling attemptFetch again in ${_} millis`),iR(t,E,r,i)}})}function GH(t,e){return new Promise((n,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(ln.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function WH(t){if(!(t instanceof zt)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var Sy=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var Ay;function KH(t,e,n,r,i){return y(this,null,function*(){if(i&&i.global){t("event",n,r);return}else{let s=yield e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}})}function QH(t,e,n,r){return y(this,null,function*(){if(r&&r.global)return t("set",{user_id:n}),Promise.resolve();{let i=yield e;t("config",i,{update:!0,user_id:n})}})}var Ry;function YH(t){Ry=t}function ZH(t){Ay=t}function JH(){return y(this,null,function*(){if(fr())try{yield xi()}catch(t){return Ht.warn(ln.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return Ht.warn(ln.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function XH(t,e,n,r,i,s,o){return y(this,null,function*(){var a;let c=zH(t);c.then(_=>{n[_.measurementId]=_.appId,t.options.measurementId&&_.measurementId!==t.options.measurementId&&Ht.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>Ht.error(_)),e.push(c);let l=JH().then(_=>{if(_)return r.getId()}),[d,p]=yield Promise.all([c,l]);jH(s)||kH(s,d.measurementId),Ry&&(i("consent","default",Ry),YH(void 0)),i("js",new Date);let g=(a=o?.config)!==null&&a!==void 0?a:{};return g[AH]="firebase",g.update=!0,p!=null&&(g[SH]=p),i("config",d.measurementId,g),Ay&&(i("set",Ay),ZH(void 0)),d.measurementId})}var Ny=class{constructor(e){this.app=e}_delete(){return delete Lo[this.app.options.appId],Promise.resolve()}},Lo={},Y0=[],Z0={},by="dataLayer",eq="gtag",J0,My,X0=!1;function tq(){let t=[];if(Ha()&&t.push("This is a browser extension environment."),qa()||t.push("Cookies are not available."),t.length>0){let e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=ln.create("invalid-analytics-context",{errorInfo:e});Ht.warn(n.message)}}function nq(t,e,n){tq();let r=t.options.appId;if(!r)throw ln.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ht.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ln.create("no-api-key");if(Lo[r]!=null)throw ln.create("already-exists",{id:r});if(!X0){OH(by);let{wrappedGtag:s,gtagCore:o}=UH(Lo,Y0,Z0,by,eq);My=s,J0=o,X0=!0}return Lo[r]=XH(t,Y0,Z0,e,J0,by,n),new Ny(t)}function sR(t=ot()){t=fe(t);let e=st(t,zh);return e.isInitialized()?e.getImmediate():oR(t)}function oR(t,e={}){let n=st(t,zh);if(n.isInitialized()){let i=n.getImmediate();if(Wa(e,n.getOptions()))return i;throw ln.create("already-initialized")}return n.initialize({options:e})}function aR(){return y(this,null,function*(){if(Ha()||!qa()||!fr())return!1;try{return yield xi()}catch{return!1}})}function cR(t,e,n){t=fe(t),QH(My,Lo[t.app.options.appId],e,n).catch(r=>Ht.error(r))}function xy(t,e,n,r){t=fe(t),KH(My,Lo[t.app.options.appId],e,n,r).catch(i=>Ht.error(i))}var eR="@firebase/analytics",tR="0.10.8";function rq(){Xe(new Je(zh,(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return nq(r,i,n)},"PUBLIC")),Xe(new Je("analytics-internal",t,"PRIVATE")),q(eR,tR),q(eR,tR,"esm2017");function t(e){try{let n=e.getProvider(zh).getImmediate();return{logEvent:(r,i,s)=>xy(n,r,i,s)}}catch(n){throw ln.create("interop-component-reg-failed",{reason:n})}}}rq();var hs=class{constructor(e){return e}},dR="analytics",Oy=class{constructor(){return it(dR)}};var Fy="__angularfire_symbol__analyticsIsSupportedValue",hR="__angularfire_symbol__analyticsIsSupported";globalThis[hR]||=aR().then(t=>globalThis[Fy]=t).catch(()=>globalThis[Fy]=!1);var Gh={async:()=>globalThis[hR],sync:()=>{let t=globalThis[Fy];if(t===void 0)throw new Error(ko("Analytics"));return t}},fR=Gh.async,pR=we(sR,!0);var iq=we(xy,!0);var sq=we(cR,!0);var Vy=(()=>{class t{initialized;disposables=[];constructor(n,r,i){q("angularfire",Ve.full,"user-tracking");let s;this.initialized=r.runOutsideAngular(()=>new Promise(o=>{s=o})),fR().then(()=>{let o=i.get(hs);o?this.disposables=[K0(n).subscribe(a=>{sq(o,a?.uid),s()})]:s()})}ngOnDestroy(){this.disposables.forEach(n=>n.unsubscribe())}static \u0275fac=function(r){return new(r||t)(J(ds),J(Z),J(me))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),oq="firebase_event_origin",aq="firebase_previous_class",cq="firebase_previous_id",uq="firebase_previous_screen",lq="firebase_screen_class",uR="firebase_screen_id",dq="firebase_screen",Ly="outlet",hq="page_path",fq="page_title",Zc="screen_class",lR="screen_name",pq="screen_view",gq="auto",mq="#",_q=Math.floor(Math.random()*(2**32-1))-2**31,ky={},yq=t=>{let e=[t[Zc],t[Ly]].join(mq);if(ky.hasOwnProperty(e))return ky[e];{let n=_q++;return ky[e]=n,n}},vq=(t,e,n)=>t.events.pipe(Vt(i=>i instanceof Fc)).pipe(Kt(i=>{let o=t.parseUrl(t.url.replace(/(?:\().+(?:\))/g,g=>g.replace("://",":///"))).root.children[i.snapshot.outlet]?.toString()||"",a=t.routerState.root.children.map(g=>g).find(g=>g.outlet===i.snapshot.outlet);if(!a)return K(null);let c=a;for(;c.firstChild;)c=c.firstChild;let l=c.pathFromRoot.map(g=>g.routeConfig?.path).filter(g=>g).join("/")||"/",d={[lR]:l,[hq]:`/${o}`,[oq]:gq,[dq]:l,[Ly]:i.snapshot.outlet};e&&(d[fq]=e.getTitle());let p=a.component;if(p){if(p===U_){let g=i.snapshot;for(;g.firstChild;)g=g.firstChild;p=g.component}}else p=i.snapshot.component;if(typeof p=="string")return K(Ae(V({},d),{[Zc]:p}));if(p){let g=n.resolveComponentFactory(p);return K(Ae(V({},d),{[Zc]:g.selector}))}return K(null)}),Vt(i=>!!i),Q(i=>V({[lq]:i[Zc],[uR]:yq(i)},i)),og(i=>i[Ly]),tt(i=>i.pipe($l((s,o)=>JSON.stringify(s)===JSON.stringify(o)),to(void 0),ql(),Q(([s,o])=>s?V({[aq]:s[Zc],[uq]:s[lR],[cq]:s[uR]},o):o)))),gR=(()=>{class t{disposable;constructor(n,r,i,s,o,a){q("angularfire",Ve.full,"screen-tracking"),fR().then(()=>{let c=a.get(hs);!n||!c||s.runOutsideAngular(()=>{this.disposable=vq(n,r,i).pipe(Kt(l=>y(this,null,function*(){return o&&(yield o.initialized),iq(c,pq,l)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(r){return new(r||t)(J(Th,8),J(oh,8),J(ni),J(Z),J(Vy,8),J(me))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),Uy=new U("angularfire2.analytics-instances");function Iq(t,e){if(!Gh.sync())return null;let n=ut(dR,t,e);return n&&new hs(n)}function wq(t){return(e,n)=>{if(!Gh.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new hs(r)}}var Eq={provide:Oy,deps:[[new te,Uy]]},Tq={provide:hs,useFactory:Iq,deps:[[new te,Uy],Ue]};function mR(t,...e){return q("angularfire",Ve.full,"analytics"),Oe([Tq,Eq,{provide:di,useValue:Gh.async,multi:!0},{provide:Uy,useFactory:wq(t),multi:!0,deps:[Z,me,Ye,$e,...e]}])}var _R=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yR={};var _i,jy;(function(){var t;function e(T,v){function I(){}I.prototype=v.prototype,T.D=v.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(C,b,S){for(var w=Array(arguments.length-2),lr=2;lr<arguments.length;lr++)w[lr-2]=arguments[lr];return v.prototype[b].apply(C,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,I){I||(I=0);var C=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)C[b]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(b=0;16>b;++b)C[b]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=T.g[0],I=T.g[1],b=T.g[2];var S=T.g[3],w=v+(S^I&(b^S))+C[0]+3614090360&4294967295;v=I+(w<<7&4294967295|w>>>25),w=S+(b^v&(I^b))+C[1]+3905402710&4294967295,S=v+(w<<12&4294967295|w>>>20),w=b+(I^S&(v^I))+C[2]+606105819&4294967295,b=S+(w<<17&4294967295|w>>>15),w=I+(v^b&(S^v))+C[3]+3250441966&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(S^I&(b^S))+C[4]+4118548399&4294967295,v=I+(w<<7&4294967295|w>>>25),w=S+(b^v&(I^b))+C[5]+1200080426&4294967295,S=v+(w<<12&4294967295|w>>>20),w=b+(I^S&(v^I))+C[6]+2821735955&4294967295,b=S+(w<<17&4294967295|w>>>15),w=I+(v^b&(S^v))+C[7]+4249261313&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(S^I&(b^S))+C[8]+1770035416&4294967295,v=I+(w<<7&4294967295|w>>>25),w=S+(b^v&(I^b))+C[9]+2336552879&4294967295,S=v+(w<<12&4294967295|w>>>20),w=b+(I^S&(v^I))+C[10]+4294925233&4294967295,b=S+(w<<17&4294967295|w>>>15),w=I+(v^b&(S^v))+C[11]+2304563134&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(S^I&(b^S))+C[12]+1804603682&4294967295,v=I+(w<<7&4294967295|w>>>25),w=S+(b^v&(I^b))+C[13]+4254626195&4294967295,S=v+(w<<12&4294967295|w>>>20),w=b+(I^S&(v^I))+C[14]+2792965006&4294967295,b=S+(w<<17&4294967295|w>>>15),w=I+(v^b&(S^v))+C[15]+1236535329&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(b^S&(I^b))+C[1]+4129170786&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^b&(v^I))+C[6]+3225465664&4294967295,S=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(S^v))+C[11]+643717713&4294967295,b=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(b^S))+C[0]+3921069994&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^S&(I^b))+C[5]+3593408605&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^b&(v^I))+C[10]+38016083&4294967295,S=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(S^v))+C[15]+3634488961&4294967295,b=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(b^S))+C[4]+3889429448&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^S&(I^b))+C[9]+568446438&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^b&(v^I))+C[14]+3275163606&4294967295,S=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(S^v))+C[3]+4107603335&4294967295,b=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(b^S))+C[8]+1163531501&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^S&(I^b))+C[13]+2850285829&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^b&(v^I))+C[2]+4243563512&4294967295,S=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(S^v))+C[7]+1735328473&4294967295,b=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(b^S))+C[12]+2368359562&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(I^b^S)+C[5]+4294588738&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^b)+C[8]+2272392833&4294967295,S=v+(w<<11&4294967295|w>>>21),w=b+(S^v^I)+C[11]+1839030562&4294967295,b=S+(w<<16&4294967295|w>>>16),w=I+(b^S^v)+C[14]+4259657740&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^S)+C[1]+2763975236&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^b)+C[4]+1272893353&4294967295,S=v+(w<<11&4294967295|w>>>21),w=b+(S^v^I)+C[7]+4139469664&4294967295,b=S+(w<<16&4294967295|w>>>16),w=I+(b^S^v)+C[10]+3200236656&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^S)+C[13]+681279174&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^b)+C[0]+3936430074&4294967295,S=v+(w<<11&4294967295|w>>>21),w=b+(S^v^I)+C[3]+3572445317&4294967295,b=S+(w<<16&4294967295|w>>>16),w=I+(b^S^v)+C[6]+76029189&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^S)+C[9]+3654602809&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^b)+C[12]+3873151461&4294967295,S=v+(w<<11&4294967295|w>>>21),w=b+(S^v^I)+C[15]+530742520&4294967295,b=S+(w<<16&4294967295|w>>>16),w=I+(b^S^v)+C[2]+3299628645&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(b^(I|~S))+C[0]+4096336452&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~b))+C[7]+1126891415&4294967295,S=v+(w<<10&4294967295|w>>>22),w=b+(v^(S|~I))+C[14]+2878612391&4294967295,b=S+(w<<15&4294967295|w>>>17),w=I+(S^(b|~v))+C[5]+4237533241&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~S))+C[12]+1700485571&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~b))+C[3]+2399980690&4294967295,S=v+(w<<10&4294967295|w>>>22),w=b+(v^(S|~I))+C[10]+4293915773&4294967295,b=S+(w<<15&4294967295|w>>>17),w=I+(S^(b|~v))+C[1]+2240044497&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~S))+C[8]+1873313359&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~b))+C[15]+4264355552&4294967295,S=v+(w<<10&4294967295|w>>>22),w=b+(v^(S|~I))+C[6]+2734768916&4294967295,b=S+(w<<15&4294967295|w>>>17),w=I+(S^(b|~v))+C[13]+1309151649&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~S))+C[4]+4149444226&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~b))+C[11]+3174756917&4294967295,S=v+(w<<10&4294967295|w>>>22),w=b+(v^(S|~I))+C[2]+718787259&4294967295,b=S+(w<<15&4294967295|w>>>17),w=I+(S^(b|~v))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(b+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+S&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var I=v-this.blockSize,C=this.B,b=this.h,S=0;S<v;){if(b==0)for(;S<=I;)i(this,T,S),S+=this.blockSize;if(typeof T=="string"){for(;S<v;)if(C[b++]=T.charCodeAt(S++),b==this.blockSize){i(this,C),b=0;break}}else for(;S<v;)if(C[b++]=T[S++],b==this.blockSize){i(this,C),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var I=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=I&255,I/=256;for(this.u(T),T=Array(16),v=I=0;4>v;++v)for(var C=0;32>C;C+=8)T[I++]=this.g[v]>>>C&255;return T};function s(T,v){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=v(T)}function o(T,v){this.h=v;for(var I=[],C=!0,b=T.length-1;0<=b;b--){var S=T[b]|0;C&&S==v||(I[b]=S,C=!1)}this.g=I}var a={};function c(T){return-128<=T&&128>T?s(T,function(v){return new o([v|0],0>v?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return A(l(-T));for(var v=[],I=1,C=0;T>=I;C++)v[C]=T/I|0,I*=4294967296;return new o(v,0)}function d(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return A(d(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),C=p,b=0;b<T.length;b+=8){var S=Math.min(8,T.length-b),w=parseInt(T.substring(b,b+S),v);8>S?(S=l(Math.pow(v,S)),C=C.j(S).add(l(w))):(C=C.j(I),C=C.add(l(w)))}return C}var p=c(0),g=c(1),_=c(16777216);t=o.prototype,t.m=function(){if(R(this))return-A(this).m();for(var T=0,v=1,I=0;I<this.g.length;I++){var C=this.i(I);T+=(0<=C?C:4294967296+C)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(E(this))return"0";if(R(this))return"-"+A(this).toString(T);for(var v=l(Math.pow(T,6)),I=this,C="";;){var b=G(I,v).g;I=x(I,b.j(v));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=b,E(I))return S+C;for(;6>S.length;)S="0"+S;C=S+C}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function E(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function R(T){return T.h==-1}t.l=function(T){return T=x(this,T),R(T)?-1:E(T)?0:1};function A(T){for(var v=T.g.length,I=[],C=0;C<v;C++)I[C]=~T.g[C];return new o(I,~T.h).add(g)}t.abs=function(){return R(this)?A(this):this},t.add=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],C=0,b=0;b<=v;b++){var S=C+(this.i(b)&65535)+(T.i(b)&65535),w=(S>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);C=w>>>16,S&=65535,w&=65535,I[b]=w<<16|S}return new o(I,I[I.length-1]&-2147483648?-1:0)};function x(T,v){return T.add(A(v))}t.j=function(T){if(E(this)||E(T))return p;if(R(this))return R(T)?A(this).j(A(T)):A(A(this).j(T));if(R(T))return A(this.j(A(T)));if(0>this.l(_)&&0>T.l(_))return l(this.m()*T.m());for(var v=this.g.length+T.g.length,I=[],C=0;C<2*v;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(var b=0;b<T.g.length;b++){var S=this.i(C)>>>16,w=this.i(C)&65535,lr=T.i(b)>>>16,Ta=T.i(b)&65535;I[2*C+2*b]+=w*Ta,L(I,2*C+2*b),I[2*C+2*b+1]+=S*Ta,L(I,2*C+2*b+1),I[2*C+2*b+1]+=w*lr,L(I,2*C+2*b+1),I[2*C+2*b+2]+=S*lr,L(I,2*C+2*b+2)}for(C=0;C<v;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=v;C<2*v;C++)I[C]=0;return new o(I,0)};function L(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function $(T,v){this.g=T,this.h=v}function G(T,v){if(E(v))throw Error("division by zero");if(E(T))return new $(p,p);if(R(T))return v=G(A(T),v),new $(A(v.g),A(v.h));if(R(v))return v=G(T,A(v)),new $(A(v.g),v.h);if(30<T.g.length){if(R(T)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,C=v;0>=C.l(T);)I=Ne(I),C=Ne(C);var b=Y(I,1),S=Y(C,1);for(C=Y(C,2),I=Y(I,2);!E(C);){var w=S.add(C);0>=w.l(T)&&(b=b.add(I),S=w),C=Y(C,1),I=Y(I,1)}return v=x(T,b.j(v)),new $(b,v)}for(b=p;0<=T.l(v);){for(I=Math.max(1,Math.floor(T.m()/v.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),S=l(I),w=S.j(v);R(w)||0<w.l(T);)I-=C,S=l(I),w=S.j(v);E(S)&&(S=g),b=b.add(S),T=x(T,w)}return new $(b,T)}t.A=function(T){return G(this,T).h},t.and=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],C=0;C<v;C++)I[C]=this.i(C)&T.i(C);return new o(I,this.h&T.h)},t.or=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],C=0;C<v;C++)I[C]=this.i(C)|T.i(C);return new o(I,this.h|T.h)},t.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],C=0;C<v;C++)I[C]=this.i(C)^T.i(C);return new o(I,this.h^T.h)};function Ne(T){for(var v=T.g.length+1,I=[],C=0;C<v;C++)I[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(I,T.h)}function Y(T,v){var I=v>>5;v%=32;for(var C=T.g.length-I,b=[],S=0;S<C;S++)b[S]=0<v?T.i(S+I)>>>v|T.i(S+I+1)<<32-v:T.i(S+I);return new o(b,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,jy=yR.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,_i=yR.Integer=o}).apply(typeof _R<"u"?_R:typeof self<"u"?self:typeof window<"u"?window:{});var Wh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Nr={};var By,Cq,Vo,$y,Jc,Kh,Hy,qy,zy;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,f){return u==Array.prototype||u==Object.prototype||(u[h]=f.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wh=="object"&&Wh];for(var h=0;h<u.length;++h){var f=u[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(u,h){if(h)e:{var f=r;u=u.split(".");for(var m=0;m<u.length-1;m++){var D=u[m];if(!(D in f))break e;f=f[D]}u=u[u.length-1],m=f[u],h=h(m),h!=m&&h!=null&&e(f,u,{configurable:!0,writable:!0,value:h})}}function s(u,h){u instanceof String&&(u+="");var f=0,m=!1,D={next:function(){if(!m&&f<u.length){var N=f++;return{value:h(N,u[N]),done:!1}}return m=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(u){return u||function(){return s(this,function(h,f){return f})}});var o=o||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,f){return u.call.apply(u.bind,arguments)}function p(u,h,f){if(!u)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,m),u.apply(h,D)}}return function(){return u.apply(h,arguments)}}function g(u,h,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,g.apply(null,arguments)}function _(u,h){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),u.apply(this,m)}}function E(u,h){function f(){}f.prototype=h.prototype,u.aa=h.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(m,D,N){for(var O=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)O[Pe-2]=arguments[Pe];return h.prototype[D].apply(m,O)}}function R(u){let h=u.length;if(0<h){let f=Array(h);for(let m=0;m<h;m++)f[m]=u[m];return f}return[]}function A(u,h){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(c(m)){let D=u.length||0,N=m.length||0;u.length=D+N;for(let O=0;O<N;O++)u[D+O]=m[O]}else u.push(m)}}class x{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function L(u){return/^[\s\xa0]*$/.test(u)}function $(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function G(u){return G[" "](u),u}G[" "]=function(){};var Ne=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function Y(u,h,f){for(let m in u)h.call(f,u[m],m,u)}function T(u,h){for(let f in u)h.call(void 0,u[f],f,u)}function v(u){let h={};for(let f in u)h[f]=u[f];return h}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,h){let f,m;for(let D=1;D<arguments.length;D++){m=arguments[D];for(f in m)u[f]=m[f];for(let N=0;N<I.length;N++)f=I[N],Object.prototype.hasOwnProperty.call(m,f)&&(u[f]=m[f])}}function b(u){var h=1;u=u.split(":");let f=[];for(;0<h&&u.length;)f.push(u.shift()),h--;return u.length&&f.push(u.join(":")),f}function S(u){a.setTimeout(()=>{throw u},0)}function w(){var u=pp;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class lr{constructor(){this.h=this.g=null}add(h,f){let m=Ta.get();m.set(h,f),this.h?this.h.next=m:this.g=m,this.h=m}}var Ta=new x(()=>new Ik,u=>u.reset());class Ik{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ca,ba=!1,pp=new lr,ZE=()=>{let u=a.Promise.resolve(void 0);Ca=()=>{u.then(wk)}};var wk=()=>{for(var u;u=w();){try{u.h.call(u.g)}catch(f){S(f)}var h=Ta;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}ba=!1};function Br(){this.s=this.s,this.C=this.C}Br.prototype.s=!1,Br.prototype.ma=function(){this.s||(this.s=!0,this.N())},Br.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Tt(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}Tt.prototype.h=function(){this.defaultPrevented=!0};var Ek=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,h),a.removeEventListener("test",f,h)}catch{}return u}();function Da(u,h){if(Tt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,m=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(Ne){e:{try{G(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else f=="mouseover"?h=u.fromElement:f=="mouseout"&&(h=u.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Tk[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Da.aa.h.call(this)}}E(Da,Tt);var Tk={2:"touch",3:"pen",4:"mouse"};Da.prototype.h=function(){Da.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Sa="closure_listenable_"+(1e6*Math.random()|0),Ck=0;function bk(u,h,f,m,D){this.listener=u,this.proxy=null,this.src=h,this.type=f,this.capture=!!m,this.ha=D,this.key=++Ck,this.da=this.fa=!1}function Ku(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Qu(u){this.src=u,this.g={},this.h=0}Qu.prototype.add=function(u,h,f,m,D){var N=u.toString();u=this.g[N],u||(u=this.g[N]=[],this.h++);var O=mp(u,h,m,D);return-1<O?(h=u[O],f||(h.fa=!1)):(h=new bk(h,this.src,N,!!m,D),h.fa=f,u.push(h)),h};function gp(u,h){var f=h.type;if(f in u.g){var m=u.g[f],D=Array.prototype.indexOf.call(m,h,void 0),N;(N=0<=D)&&Array.prototype.splice.call(m,D,1),N&&(Ku(h),u.g[f].length==0&&(delete u.g[f],u.h--))}}function mp(u,h,f,m){for(var D=0;D<u.length;++D){var N=u[D];if(!N.da&&N.listener==h&&N.capture==!!f&&N.ha==m)return D}return-1}var _p="closure_lm_"+(1e6*Math.random()|0),yp={};function JE(u,h,f,m,D){if(m&&m.once)return eT(u,h,f,m,D);if(Array.isArray(h)){for(var N=0;N<h.length;N++)JE(u,h[N],f,m,D);return null}return f=Ep(f),u&&u[Sa]?u.K(h,f,l(m)?!!m.capture:!!m,D):XE(u,h,f,!1,m,D)}function XE(u,h,f,m,D,N){if(!h)throw Error("Invalid event type");var O=l(D)?!!D.capture:!!D,Pe=Ip(u);if(Pe||(u[_p]=Pe=new Qu(u)),f=Pe.add(h,f,m,O,N),f.proxy)return f;if(m=Dk(),f.proxy=m,m.src=u,m.listener=f,u.addEventListener)Ek||(D=O),D===void 0&&(D=!1),u.addEventListener(h.toString(),m,D);else if(u.attachEvent)u.attachEvent(nT(h.toString()),m);else if(u.addListener&&u.removeListener)u.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Dk(){function u(f){return h.call(u.src,u.listener,f)}let h=Sk;return u}function eT(u,h,f,m,D){if(Array.isArray(h)){for(var N=0;N<h.length;N++)eT(u,h[N],f,m,D);return null}return f=Ep(f),u&&u[Sa]?u.L(h,f,l(m)?!!m.capture:!!m,D):XE(u,h,f,!0,m,D)}function tT(u,h,f,m,D){if(Array.isArray(h))for(var N=0;N<h.length;N++)tT(u,h[N],f,m,D);else m=l(m)?!!m.capture:!!m,f=Ep(f),u&&u[Sa]?(u=u.i,h=String(h).toString(),h in u.g&&(N=u.g[h],f=mp(N,f,m,D),-1<f&&(Ku(N[f]),Array.prototype.splice.call(N,f,1),N.length==0&&(delete u.g[h],u.h--)))):u&&(u=Ip(u))&&(h=u.g[h.toString()],u=-1,h&&(u=mp(h,f,m,D)),(f=-1<u?h[u]:null)&&vp(f))}function vp(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[Sa])gp(h.i,u);else{var f=u.type,m=u.proxy;h.removeEventListener?h.removeEventListener(f,m,u.capture):h.detachEvent?h.detachEvent(nT(f),m):h.addListener&&h.removeListener&&h.removeListener(m),(f=Ip(h))?(gp(f,u),f.h==0&&(f.src=null,h[_p]=null)):Ku(u)}}}function nT(u){return u in yp?yp[u]:yp[u]="on"+u}function Sk(u,h){if(u.da)u=!0;else{h=new Da(h,this);var f=u.listener,m=u.ha||u.src;u.fa&&vp(u),u=f.call(m,h)}return u}function Ip(u){return u=u[_p],u instanceof Qu?u:null}var wp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ep(u){return typeof u=="function"?u:(u[wp]||(u[wp]=function(h){return u.handleEvent(h)}),u[wp])}function Ct(){Br.call(this),this.i=new Qu(this),this.M=this,this.F=null}E(Ct,Br),Ct.prototype[Sa]=!0,Ct.prototype.removeEventListener=function(u,h,f,m){tT(this,u,h,f,m)};function Ot(u,h){var f,m=u.F;if(m)for(f=[];m;m=m.F)f.push(m);if(u=u.M,m=h.type||h,typeof h=="string")h=new Tt(h,u);else if(h instanceof Tt)h.target=h.target||u;else{var D=h;h=new Tt(m,u),C(h,D)}if(D=!0,f)for(var N=f.length-1;0<=N;N--){var O=h.g=f[N];D=Yu(O,m,!0,h)&&D}if(O=h.g=u,D=Yu(O,m,!0,h)&&D,D=Yu(O,m,!1,h)&&D,f)for(N=0;N<f.length;N++)O=h.g=f[N],D=Yu(O,m,!1,h)&&D}Ct.prototype.N=function(){if(Ct.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var f=u.g[h],m=0;m<f.length;m++)Ku(f[m]);delete u.g[h],u.h--}}this.F=null},Ct.prototype.K=function(u,h,f,m){return this.i.add(String(u),h,!1,f,m)},Ct.prototype.L=function(u,h,f,m){return this.i.add(String(u),h,!0,f,m)};function Yu(u,h,f,m){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,N=0;N<h.length;++N){var O=h[N];if(O&&!O.da&&O.capture==f){var Pe=O.listener,vt=O.ha||O.src;O.fa&&gp(u.i,O),D=Pe.call(vt,m)!==!1&&D}}return D&&!m.defaultPrevented}function rT(u,h,f){if(typeof u=="function")f&&(u=g(u,f));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function iT(u){u.g=rT(()=>{u.g=null,u.i&&(u.i=!1,iT(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class Ak extends Br{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:iT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Aa(u){Br.call(this),this.h=u,this.g={}}E(Aa,Br);var sT=[];function oT(u){Y(u.g,function(h,f){this.g.hasOwnProperty(f)&&vp(h)},u),u.g={}}Aa.prototype.N=function(){Aa.aa.N.call(this),oT(this)},Aa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tp=a.JSON.stringify,Rk=a.JSON.parse,Nk=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Cp(){}Cp.prototype.h=null;function aT(u){return u.h||(u.h=u.i())}function cT(){}var Ra={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bp(){Tt.call(this,"d")}E(bp,Tt);function Dp(){Tt.call(this,"c")}E(Dp,Tt);var Ri={},uT=null;function Zu(){return uT=uT||new Ct}Ri.La="serverreachability";function lT(u){Tt.call(this,Ri.La,u)}E(lT,Tt);function Na(u){let h=Zu();Ot(h,new lT(h))}Ri.STAT_EVENT="statevent";function dT(u,h){Tt.call(this,Ri.STAT_EVENT,u),this.stat=h}E(dT,Tt);function Ft(u){let h=Zu();Ot(h,new dT(h,u))}Ri.Ma="timingevent";function hT(u,h){Tt.call(this,Ri.Ma,u),this.size=h}E(hT,Tt);function Pa(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function Ma(){this.g=!0}Ma.prototype.xa=function(){this.g=!1};function Pk(u,h,f,m,D,N){u.info(function(){if(u.g)if(N)for(var O="",Pe=N.split("&"),vt=0;vt<Pe.length;vt++){var Ee=Pe[vt].split("=");if(1<Ee.length){var bt=Ee[0];Ee=Ee[1];var Dt=bt.split("_");O=2<=Dt.length&&Dt[1]=="type"?O+(bt+"="+Ee+"&"):O+(bt+"=redacted&")}}else O=null;else O=N;return"XMLHTTP REQ ("+m+") [attempt "+D+"]: "+h+`
`+f+`
`+O})}function Mk(u,h,f,m,D,N,O){u.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+D+"]: "+h+`
`+f+`
`+N+" "+O})}function ks(u,h,f,m){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+kk(u,f)+(m?" "+m:"")})}function xk(u,h){u.info(function(){return"TIMEOUT: "+h})}Ma.prototype.info=function(){};function kk(u,h){if(!u.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var m=f[u];if(!(2>m.length)){var D=m[1];if(Array.isArray(D)&&!(1>D.length)){var N=D[0];if(N!="noop"&&N!="stop"&&N!="close")for(var O=1;O<D.length;O++)D[O]=""}}}}return Tp(f)}catch{return h}}var Ju={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sp;function Xu(){}E(Xu,Cp),Xu.prototype.g=function(){return new XMLHttpRequest},Xu.prototype.i=function(){return{}},Sp=new Xu;function $r(u,h,f,m){this.j=u,this.i=h,this.l=f,this.R=m||1,this.U=new Aa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pT}function pT(){this.i=null,this.g="",this.h=!1}var gT={},Ap={};function Rp(u,h,f){u.L=1,u.v=rl(dr(h)),u.m=f,u.P=!0,mT(u,null)}function mT(u,h){u.F=Date.now(),el(u),u.A=dr(u.v);var f=u.A,m=u.R;Array.isArray(m)||(m=[String(m)]),NT(f.i,"t",m),u.C=0,f=u.j.J,u.h=new pT,u.g=KT(u.j,f?h:null,!u.m),0<u.O&&(u.M=new Ak(g(u.Y,u,u.g),u.O)),h=u.U,f=u.g,m=u.ca;var D="readystatechange";Array.isArray(D)||(D&&(sT[0]=D.toString()),D=sT);for(var N=0;N<D.length;N++){var O=JE(f,D[N],m||h.handleEvent,!1,h.h||h);if(!O)break;h.g[O.key]=O}h=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),Na(),Pk(u.i,u.u,u.A,u.l,u.R,u.m)}$r.prototype.ca=function(u){u=u.target;let h=this.M;h&&hr(u)==3?h.j():this.Y(u)},$r.prototype.Y=function(u){try{if(u==this.g)e:{let Dt=hr(this.g);var h=this.g.Ba();let Ls=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||LT(this.g)))){this.J||Dt!=4||h==7||(h==8||0>=Ls?Na(3):Na(2)),Np(this);var f=this.g.Z();this.X=f;t:if(_T(this)){var m=LT(this.g);u="";var D=m.length,N=hr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ni(this),xa(this);var O="";break t}this.h.i=new a.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,u+=this.h.i.decode(m[h],{stream:!(N&&h==D-1)});m.length=0,this.h.g+=u,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,Mk(this.i,this.u,this.A,this.l,this.R,Dt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,vt=this.g;if((Pe=vt.g?vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(Pe)){var Ee=Pe;break t}}Ee=null}if(f=Ee)ks(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pp(this,f);else{this.o=!1,this.s=3,Ft(12),Ni(this),xa(this);break e}}if(this.P){f=!0;let bn;for(;!this.J&&this.C<O.length;)if(bn=Ok(this,O),bn==Ap){Dt==4&&(this.s=4,Ft(14),f=!1),ks(this.i,this.l,null,"[Incomplete Response]");break}else if(bn==gT){this.s=4,Ft(15),ks(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else ks(this.i,this.l,bn,null),Pp(this,bn);if(_T(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||O.length!=0||this.h.h||(this.s=1,Ft(16),f=!1),this.o=this.o&&f,!f)ks(this.i,this.l,O,"[Invalid Chunked Response]"),Ni(this),xa(this);else if(0<O.length&&!this.W){this.W=!0;var bt=this.j;bt.g==this&&bt.ba&&!bt.M&&(bt.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),Lp(bt),bt.M=!0,Ft(11))}}else ks(this.i,this.l,O,null),Pp(this,O);Dt==4&&Ni(this),this.o&&!this.J&&(Dt==4?qT(this.j,this):(this.o=!1,el(this)))}else Jk(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,Ft(12)):(this.s=0,Ft(13)),Ni(this),xa(this)}}}catch{}finally{}};function _T(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Ok(u,h){var f=u.C,m=h.indexOf(`
`,f);return m==-1?Ap:(f=Number(h.substring(f,m)),isNaN(f)?gT:(m+=1,m+f>h.length?Ap:(h=h.slice(m,m+f),u.C=m+f,h)))}$r.prototype.cancel=function(){this.J=!0,Ni(this)};function el(u){u.S=Date.now()+u.I,yT(u,u.I)}function yT(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Pa(g(u.ba,u),h)}function Np(u){u.B&&(a.clearTimeout(u.B),u.B=null)}$r.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(xk(this.i,this.A),this.L!=2&&(Na(),Ft(17)),Ni(this),this.s=2,xa(this)):yT(this,this.S-u)};function xa(u){u.j.G==0||u.J||qT(u.j,u)}function Ni(u){Np(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,oT(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function Pp(u,h){try{var f=u.j;if(f.G!=0&&(f.g==u||Mp(f.h,u))){if(!u.K&&Mp(f.h,u)&&f.G==3){try{var m=f.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var D=m;if(D[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)cl(f),ol(f);else break e;Fp(f),Ft(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=Pa(g(f.Za,f),6e3));if(1>=wT(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Mi(f,11)}else if((u.K||f.g==u)&&cl(f),!L(h))for(D=f.Da.g.parse(h),h=0;h<D.length;h++){let Ee=D[h];if(f.T=Ee[0],Ee=Ee[1],f.G==2)if(Ee[0]=="c"){f.K=Ee[1],f.ia=Ee[2];let bt=Ee[3];bt!=null&&(f.la=bt,f.j.info("VER="+f.la));let Dt=Ee[4];Dt!=null&&(f.Aa=Dt,f.j.info("SVER="+f.Aa));let Ls=Ee[5];Ls!=null&&typeof Ls=="number"&&0<Ls&&(m=1.5*Ls,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let bn=u.g;if(bn){let ll=bn.g?bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ll){var N=m.h;N.g||ll.indexOf("spdy")==-1&&ll.indexOf("quic")==-1&&ll.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(xp(N,N.h),N.h=null))}if(m.D){let Vp=bn.g?bn.g.getResponseHeader("X-HTTP-Session-Id"):null;Vp&&(m.ya=Vp,Le(m.I,m.D,Vp))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var O=u;if(m.qa=WT(m,m.J?m.ia:null,m.W),O.K){ET(m.h,O);var Pe=O,vt=m.L;vt&&(Pe.I=vt),Pe.B&&(Np(Pe),el(Pe)),m.g=O}else $T(m);0<f.i.length&&al(f)}else Ee[0]!="stop"&&Ee[0]!="close"||Mi(f,7);else f.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?Mi(f,7):Op(f):Ee[0]!="noop"&&f.l&&f.l.ta(Ee),f.v=0)}}Na(4)}catch{}}var Fk=class{constructor(u,h){this.g=u,this.map=h}};function vT(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function IT(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function wT(u){return u.h?1:u.g?u.g.size:0}function Mp(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function xp(u,h){u.g?u.g.add(h):u.h=h}function ET(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}vT.prototype.cancel=function(){if(this.i=TT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function TT(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let f of u.g.values())h=h.concat(f.D);return h}return R(u.i)}function Lk(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],f=u.length,m=0;m<f;m++)h.push(u[m]);return h}h=[],f=0;for(m in u)h[f++]=u[m];return h}function Vk(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var f=0;f<u;f++)h.push(f);return h}h=[],f=0;for(let m in u)h[f++]=m;return h}}}function CT(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var f=Vk(u),m=Lk(u),D=m.length,N=0;N<D;N++)h.call(void 0,m[N],f&&f[N],u)}var bT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Uk(u,h){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var m=u[f].indexOf("="),D=null;if(0<=m){var N=u[f].substring(0,m);D=u[f].substring(m+1)}else N=u[f];h(N,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Pi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Pi){this.h=u.h,tl(this,u.j),this.o=u.o,this.g=u.g,nl(this,u.s),this.l=u.l;var h=u.i,f=new Fa;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),DT(this,f),this.m=u.m}else u&&(h=String(u).match(bT))?(this.h=!1,tl(this,h[1]||"",!0),this.o=ka(h[2]||""),this.g=ka(h[3]||"",!0),nl(this,h[4]),this.l=ka(h[5]||"",!0),DT(this,h[6]||"",!0),this.m=ka(h[7]||"")):(this.h=!1,this.i=new Fa(null,this.h))}Pi.prototype.toString=function(){var u=[],h=this.j;h&&u.push(Oa(h,ST,!0),":");var f=this.g;return(f||h=="file")&&(u.push("//"),(h=this.o)&&u.push(Oa(h,ST,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(Oa(f,f.charAt(0)=="/"?$k:Bk,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",Oa(f,qk)),u.join("")};function dr(u){return new Pi(u)}function tl(u,h,f){u.j=f?ka(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function nl(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function DT(u,h,f){h instanceof Fa?(u.i=h,zk(u.i,u.h)):(f||(h=Oa(h,Hk)),u.i=new Fa(h,u.h))}function Le(u,h,f){u.i.set(h,f)}function rl(u){return Le(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ka(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Oa(u,h,f){return typeof u=="string"?(u=encodeURI(u).replace(h,jk),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function jk(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ST=/[#\/\?@]/g,Bk=/[#\?:]/g,$k=/[#\?]/g,Hk=/[#\?@]/g,qk=/#/g;function Fa(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function Hr(u){u.g||(u.g=new Map,u.h=0,u.i&&Uk(u.i,function(h,f){u.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=Fa.prototype,t.add=function(u,h){Hr(this),this.i=null,u=Os(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(h),this.h+=1,this};function AT(u,h){Hr(u),h=Os(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function RT(u,h){return Hr(u),h=Os(u,h),u.g.has(h)}t.forEach=function(u,h){Hr(this),this.g.forEach(function(f,m){f.forEach(function(D){u.call(h,D,m,this)},this)},this)},t.na=function(){Hr(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let m=0;m<h.length;m++){let D=u[m];for(let N=0;N<D.length;N++)f.push(h[m])}return f},t.V=function(u){Hr(this);let h=[];if(typeof u=="string")RT(this,u)&&(h=h.concat(this.g.get(Os(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)h=h.concat(u[f])}return h},t.set=function(u,h){return Hr(this),this.i=null,u=Os(this,u),RT(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},t.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function NT(u,h,f){AT(u,h),0<f.length&&(u.i=null,u.g.set(Os(u,h),R(f)),u.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var m=h[f];let N=encodeURIComponent(String(m)),O=this.V(m);for(m=0;m<O.length;m++){var D=N;O[m]!==""&&(D+="="+encodeURIComponent(String(O[m]))),u.push(D)}}return this.i=u.join("&")};function Os(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function zk(u,h){h&&!u.j&&(Hr(u),u.i=null,u.g.forEach(function(f,m){var D=m.toLowerCase();m!=D&&(AT(this,m),NT(this,D,f))},u)),u.j=h}function Gk(u,h){let f=new Ma;if(a.Image){let m=new Image;m.onload=_(qr,f,"TestLoadImage: loaded",!0,h,m),m.onerror=_(qr,f,"TestLoadImage: error",!1,h,m),m.onabort=_(qr,f,"TestLoadImage: abort",!1,h,m),m.ontimeout=_(qr,f,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=u}else h(!1)}function Wk(u,h){let f=new Ma,m=new AbortController,D=setTimeout(()=>{m.abort(),qr(f,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:m.signal}).then(N=>{clearTimeout(D),N.ok?qr(f,"TestPingServer: ok",!0,h):qr(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),qr(f,"TestPingServer: error",!1,h)})}function qr(u,h,f,m,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),m(f)}catch{}}function Kk(){this.g=new Nk}function Qk(u,h,f){let m=f||"";try{CT(u,function(D,N){let O=D;l(D)&&(O=Tp(D)),h.push(m+N+"="+encodeURIComponent(O))})}catch(D){throw h.push(m+"type="+encodeURIComponent("_badmap")),D}}function La(u){this.l=u.Ub||null,this.j=u.eb||!1}E(La,Cp),La.prototype.g=function(){return new il(this.l,this.j)},La.prototype.i=function(u){return function(){return u}}({});function il(u,h){Ct.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(il,Ct),t=il.prototype,t.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,Ua(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Va(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ua(this)),this.g&&(this.readyState=3,Ua(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;PT(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function PT(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?Va(this):Ua(this),this.readyState==3&&PT(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Va(this))},t.Qa=function(u){this.g&&(this.response=u,Va(this))},t.ga=function(){this.g&&Va(this)};function Va(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ua(u)}t.setRequestHeader=function(u,h){this.u.append(u,h)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=h.next();return u.join(`\r
`)};function Ua(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(il.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function MT(u){let h="";return Y(u,function(f,m){h+=m,h+=":",h+=f,h+=`\r
`}),h}function kp(u,h,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=MT(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):Le(u,h,f))}function ze(u){Ct.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(ze,Ct);var Yk=/^https?$/i,Zk=["POST","PUT"];t=ze.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,h,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sp.g(),this.v=this.o?aT(this.o):aT(Sp),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(N){xT(this,N);return}if(u=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var D in m)f.set(D,m[D]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let N of m.keys())f.set(N,m.get(N));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(N=>N.toLowerCase()=="content-type"),D=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Zk,h,void 0))||m||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,O]of f)this.g.setRequestHeader(N,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{FT(this),this.u=!0,this.g.send(u),this.u=!1}catch(N){xT(this,N)}};function xT(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,kT(u),sl(u)}function kT(u){u.A||(u.A=!0,Ot(u,"complete"),Ot(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ot(this,"complete"),Ot(this,"abort"),sl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sl(this,!0)),ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?OT(this):this.bb())},t.bb=function(){OT(this)};function OT(u){if(u.h&&typeof o<"u"&&(!u.v[1]||hr(u)!=4||u.Z()!=2)){if(u.u&&hr(u)==4)rT(u.Ea,0,u);else if(Ot(u,"readystatechange"),hr(u)==4){u.h=!1;try{let O=u.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var m;if(m=O===0){var D=String(u.D).match(bT)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),m=!Yk.test(D?D.toLowerCase():"")}f=m}if(f)Ot(u,"complete"),Ot(u,"success");else{u.m=6;try{var N=2<hr(u)?u.g.statusText:""}catch{N=""}u.l=N+" ["+u.Z()+"]",kT(u)}}finally{sl(u)}}}}function sl(u,h){if(u.g){FT(u);let f=u.g,m=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||Ot(u,"ready");try{f.onreadystatechange=m}catch{}}}function FT(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function hr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<hr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),Rk(h)}};function LT(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Jk(u){let h={};u=(u.g&&2<=hr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<u.length;m++){if(L(u[m]))continue;var f=b(u[m]);let D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let N=h[D]||[];h[D]=N,N.push(f)}T(h,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ja(u,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||h}function VT(u){this.Aa=0,this.i=[],this.j=new Ma,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ja("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ja("baseRetryDelayMs",5e3,u),this.cb=ja("retryDelaySeedMs",1e4,u),this.Wa=ja("forwardChannelMaxRetries",2,u),this.wa=ja("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new vT(u&&u.concurrentRequestLimit),this.Da=new Kk,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=VT.prototype,t.la=8,t.G=1,t.connect=function(u,h,f,m){Ft(0),this.W=u,this.H=h||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=WT(this,null,this.W),al(this)};function Op(u){if(UT(u),u.G==3){var h=u.U++,f=dr(u.I);if(Le(f,"SID",u.K),Le(f,"RID",h),Le(f,"TYPE","terminate"),Ba(u,f),h=new $r(u,u.j,h),h.L=2,h.v=rl(dr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=h.v,f=!0),f||(h.g=KT(h.j,null),h.g.ea(h.v)),h.F=Date.now(),el(h)}GT(u)}function ol(u){u.g&&(Lp(u),u.g.cancel(),u.g=null)}function UT(u){ol(u),u.u&&(a.clearTimeout(u.u),u.u=null),cl(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function al(u){if(!IT(u.h)&&!u.s){u.s=!0;var h=u.Ga;Ca||ZE(),ba||(Ca(),ba=!0),pp.add(h,u),u.B=0}}function Xk(u,h){return wT(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Pa(g(u.Ga,u,h),zT(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let D=new $r(this,this.j,u),N=this.o;if(this.S&&(N?(N=v(N),C(N,this.S)):N=this.S),this.m!==null||this.O||(D.H=N,N=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=BT(this,D,h),f=dr(this.I),Le(f,"RID",u),Le(f,"CVER",22),this.D&&Le(f,"X-HTTP-Session-Id",this.D),Ba(this,f),N&&(this.O?h="headers="+encodeURIComponent(String(MT(N)))+"&"+h:this.m&&kp(f,this.m,N)),xp(this.h,D),this.Ua&&Le(f,"TYPE","init"),this.P?(Le(f,"$req",h),Le(f,"SID","null"),D.T=!0,Rp(D,f,null)):Rp(D,f,h),this.G=2}}else this.G==3&&(u?jT(this,u):this.i.length==0||IT(this.h)||jT(this))};function jT(u,h){var f;h?f=h.l:f=u.U++;let m=dr(u.I);Le(m,"SID",u.K),Le(m,"RID",f),Le(m,"AID",u.T),Ba(u,m),u.m&&u.o&&kp(m,u.m,u.o),f=new $r(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),h&&(u.i=h.D.concat(u.i)),h=BT(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),xp(u.h,f),Rp(f,m,h)}function Ba(u,h){u.H&&Y(u.H,function(f,m){Le(h,m,f)}),u.l&&CT({},function(f,m){Le(h,m,f)})}function BT(u,h,f){f=Math.min(u.i.length,f);var m=u.l?g(u.l.Na,u.l,u):null;e:{var D=u.i;let N=-1;for(;;){let O=["count="+f];N==-1?0<f?(N=D[0].g,O.push("ofs="+N)):N=0:O.push("ofs="+N);let Pe=!0;for(let vt=0;vt<f;vt++){let Ee=D[vt].g,bt=D[vt].map;if(Ee-=N,0>Ee)N=Math.max(0,D[vt].g-100),Pe=!1;else try{Qk(bt,O,"req"+Ee+"_")}catch{m&&m(bt)}}if(Pe){m=O.join("&");break e}}}return u=u.i.splice(0,f),h.D=u,m}function $T(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;Ca||ZE(),ba||(Ca(),ba=!0),pp.add(h,u),u.v=0}}function Fp(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Pa(g(u.Fa,u),zT(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,HT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Pa(g(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ft(10),ol(this),HT(this))};function Lp(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function HT(u){u.g=new $r(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=dr(u.qa);Le(h,"RID","rpc"),Le(h,"SID",u.K),Le(h,"AID",u.T),Le(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&Le(h,"TO",u.ja),Le(h,"TYPE","xmlhttp"),Ba(u,h),u.m&&u.o&&kp(h,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=rl(dr(h)),f.m=null,f.P=!0,mT(f,u)}t.Za=function(){this.C!=null&&(this.C=null,ol(this),Fp(this),Ft(19))};function cl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function qT(u,h){var f=null;if(u.g==h){cl(u),Lp(u),u.g=null;var m=2}else if(Mp(u.h,h))f=h.D,ET(u.h,h),m=1;else return;if(u.G!=0){if(h.o)if(m==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var D=u.B;m=Zu(),Ot(m,new hT(m,f)),al(u)}else $T(u);else if(D=h.s,D==3||D==0&&0<h.X||!(m==1&&Xk(u,h)||m==2&&Fp(u)))switch(f&&0<f.length&&(h=u.h,h.i=h.i.concat(f)),D){case 1:Mi(u,5);break;case 4:Mi(u,10);break;case 3:Mi(u,6);break;default:Mi(u,2)}}}function zT(u,h){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*h}function Mi(u,h){if(u.j.info("Error code "+h),h==2){var f=g(u.fb,u),m=u.Xa;let D=!m;m=new Pi(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||tl(m,"https"),rl(m),D?Gk(m.toString(),f):Wk(m.toString(),f)}else Ft(2);u.G=0,u.l&&u.l.sa(h),GT(u),UT(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function GT(u){if(u.G=0,u.ka=[],u.l){let h=TT(u.h);(h.length!=0||u.i.length!=0)&&(A(u.ka,h),A(u.ka,u.i),u.h.i.length=0,R(u.i),u.i.length=0),u.l.ra()}}function WT(u,h,f){var m=f instanceof Pi?dr(f):new Pi(f);if(m.g!="")h&&(m.g=h+"."+m.g),nl(m,m.s);else{var D=a.location;m=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var N=new Pi(null);m&&tl(N,m),h&&(N.g=h),D&&nl(N,D),f&&(N.l=f),m=N}return f=u.D,h=u.ya,f&&h&&Le(m,f,h),Le(m,"VER",u.la),Ba(u,m),m}function KT(u,h,f){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new ze(new La({eb:f})):new ze(u.pa),h.Ha(u.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function QT(){}t=QT.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ul(){}ul.prototype.g=function(u,h){return new en(u,h)};function en(u,h){Ct.call(this),this.g=new VT(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!L(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!L(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new Fs(this)}E(en,Ct),en.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){Op(this.g)},en.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=Tp(u),u=f);h.i.push(new Fk(h.Ya++,u)),h.G==3&&al(h)},en.prototype.N=function(){this.g.l=null,delete this.j,Op(this.g),delete this.g,en.aa.N.call(this)};function YT(u){bp.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let f in h){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}E(YT,bp);function ZT(){Dp.call(this),this.status=1}E(ZT,Dp);function Fs(u){this.g=u}E(Fs,QT),Fs.prototype.ua=function(){Ot(this.g,"a")},Fs.prototype.ta=function(u){Ot(this.g,new YT(u))},Fs.prototype.sa=function(u){Ot(this.g,new ZT)},Fs.prototype.ra=function(){Ot(this.g,"b")},ul.prototype.createWebChannel=ul.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,zy=Nr.createWebChannelTransport=function(){return new ul},qy=Nr.getStatEventTarget=function(){return Zu()},Hy=Nr.Event=Ri,Kh=Nr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ju.NO_ERROR=0,Ju.TIMEOUT=8,Ju.HTTP_ERROR=6,Jc=Nr.ErrorCode=Ju,fT.COMPLETE="complete",$y=Nr.EventType=fT,cT.EventType=Ra,Ra.OPEN="a",Ra.CLOSE="b",Ra.ERROR="c",Ra.MESSAGE="d",Ct.prototype.listen=Ct.prototype.K,Vo=Nr.WebChannel=cT,Cq=Nr.FetchXmlHttpFactory=La,ze.prototype.listenOnce=ze.prototype.L,ze.prototype.getLastError=ze.prototype.Ka,ze.prototype.getLastErrorCode=ze.prototype.Ba,ze.prototype.getStatus=ze.prototype.Z,ze.prototype.getResponseJson=ze.prototype.Oa,ze.prototype.getResponseText=ze.prototype.oa,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Ha,By=Nr.XhrIo=ze}).apply(typeof Wh<"u"?Wh:typeof self<"u"?self:typeof window<"u"?window:{});var vR="@firebase/firestore";var _t=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");var ra="10.14.0";var ms=new Gn("@firebase/firestore");function Xc(){return ms.logLevel}function B(t,...e){if(ms.logLevel<=At.DEBUG){let n=e.map(SI);ms.debug(`Firestore (${ra}): ${t}`,...n)}}function Mr(t,...e){if(ms.logLevel<=At.ERROR){let n=e.map(SI);ms.error(`Firestore (${ra}): ${t}`,...n)}}function zo(t,...e){if(ms.logLevel<=At.WARN){let n=e.map(SI);ms.warn(`Firestore (${ra}): ${t}`,...n)}}function SI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function X(t="Unexpected state"){let e=`FIRESTORE (${ra}) INTERNAL ASSERTION FAILED: `+t;throw Mr(e),new Error(e)}function Se(t,e){t||X()}function re(t,e){return t}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},j=class extends zt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ir=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Xh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Yy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_t.UNAUTHENTICATED))}shutdown(){}},Zy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Jy=class{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Se(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new ir;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ir,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>y(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ir)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Se(typeof r.accessToken=="string"),new Xh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string"),new _t(e)}},Xy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},ev=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Xy(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(_t.FIRST_PARTY))}shutdown(){}invalidateToken(){}},tv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},nv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Se(this.o===void 0);let r=s=>{s.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,B("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Se(typeof n.token=="string"),this.R=n.token,new tv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function bq(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var ef=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=bq(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function Te(t,e){return t<e?-1:t>e?1:0}function Go(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var gt=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new j(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new j(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new j(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var se=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new gt(0,0))}static max(){return new t(new gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var tf=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(),r===void 0?r=e.length-n:r>e.length-n&&X(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},He=class t extends tf{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new j(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},Dq=/^[_a-zA-Z][_a-zA-Z0-9]*$/,dn=class t extends tf{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return Dq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new j(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new j(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new j(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new j(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var z=class t{constructor(e){this.path=e}static fromPath(e){return new t(He.fromString(e))}static fromName(e){return new t(He.fromString(e).popFirst(5))}static empty(){return new t(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new He(e.slice()))}};var rv=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};rv.UNKNOWN_ID=-1;function Sq(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=se.fromTimestamp(r===1e9?new gt(n+1,0):new gt(n,r));return new _s(i,z.empty(),e)}function Aq(t){return new _s(t.readTime,t.key,-1)}var _s=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(se.min(),z.empty(),-1)}static max(){return new t(se.max(),z.empty(),-1)}};function Rq(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=z.comparator(t.documentKey,e.documentKey),n!==0?n:Te(t.largestBatchId,e.largestBatchId))}var Nq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",iv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function vu(t){return y(this,null,function*(){if(t.code!==P.FAILED_PRECONDITION||t.message!==Nq)throw t;B("LocalStore","Unexpectedly lost primary lease")})}var k=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(e[l]).next(d=>{o[l]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function Pq(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Iu(t){return t.name==="IndexedDbTransactionError"}var eN=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Mf(t){return t==null}function su(t){return t===0&&1/t==-1/0}function Mq(t){return typeof t=="number"&&Number.isInteger(t)&&!su(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var xq=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pee=[...xq,"documentOverlays"],kq=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Oq=kq,Fq=[...Oq,"indexConfiguration","indexState","indexEntries"];var gee=[...Fq,"globals"];function IR(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ia(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tN(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ze=class t{constructor(e,n){this.comparator=e,this.root=n||sr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,sr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $o(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $o(this.root,e,this.comparator,!1)}getReverseIterator(){return new $o(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $o(this.root,e,this.comparator,!0)}},$o=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},sr=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();let e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}};sr.EMPTY=null,sr.RED=!0,sr.BLACK=!1;sr.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,r,i,s){return this}insert(e,n,r){return new sr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Nt=class t{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new nf(this.data.getIterator())}getIteratorFrom(e){return new nf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},nf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var rr=class t{constructor(e){this.fields=e,e.sort(dn.comparator)}static empty(){return new t([])}unionWith(e){let n=new Nt(dn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Go(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var rf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Pt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new rf("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Pt.EMPTY_BYTE_STRING=new Pt("");var Lq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xr(t){if(Se(!!t),typeof t=="string"){let e=0,n=Lq.exec(t);if(Se(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Be(t.seconds),nanos:Be(t.nanos)}}function Be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ii(t){return typeof t=="string"?Pt.fromBase64String(t):Pt.fromUint8Array(t)}function AI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function RI(t){let e=t.mapValue.fields.__previous_value__;return AI(e)?RI(e):e}function ou(t){let e=xr(t.mapValue.fields.__local_write_time__.timestampValue);return new gt(e.seconds,e.nanos)}var sv=class{constructor(e,n,r,i,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},sf=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Qh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ys(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?AI(t)?4:rN(t)?9007199254740991:nN(t)?10:11:X()}function cr(t,e){if(t===e)return!0;let n=ys(t);if(n!==ys(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ou(t).isEqual(ou(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=xr(i.timestampValue),a=xr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ii(i.bytesValue).isEqual(Ii(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Be(i.geoPointValue.latitude)===Be(s.geoPointValue.latitude)&&Be(i.geoPointValue.longitude)===Be(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Be(i.integerValue)===Be(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Be(i.doubleValue),a=Be(s.doubleValue);return o===a?su(o)===su(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Go(t.arrayValue.values||[],e.arrayValue.values||[],cr);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(IR(o)!==IR(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!cr(o[c],a[c])))return!1;return!0}(t,e);default:return X()}}function au(t,e){return(t.values||[]).find(n=>cr(n,e))!==void 0}function Wo(t,e){if(t===e)return 0;let n=ys(t),r=ys(e);if(n!==r)return Te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Be(s.integerValue||s.doubleValue),c=Be(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return wR(t.timestampValue,e.timestampValue);case 4:return wR(ou(t),ou(e));case 5:return Te(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Ii(s),c=Ii(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=Te(a[l],c[l]);if(d!==0)return d}return Te(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Te(Be(s.latitude),Be(o.latitude));return a!==0?a:Te(Be(s.longitude),Be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ER(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,d;let p=s.fields||{},g=o.fields||{},_=(a=p.value)===null||a===void 0?void 0:a.arrayValue,E=(c=g.value)===null||c===void 0?void 0:c.arrayValue,R=Te(((l=_?.values)===null||l===void 0?void 0:l.length)||0,((d=E?.values)===null||d===void 0?void 0:d.length)||0);return R!==0?R:ER(_,E)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Qh.mapValue&&o===Qh.mapValue)return 0;if(s===Qh.mapValue)return 1;if(o===Qh.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){let g=Te(c[p],d[p]);if(g!==0)return g;let _=Wo(a[c[p]],l[d[p]]);if(_!==0)return _}return Te(c.length,d.length)}(t.mapValue,e.mapValue);default:throw X()}}function wR(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Te(t,e);let n=xr(t),r=xr(e),i=Te(n.seconds,r.seconds);return i!==0?i:Te(n.nanos,r.nanos)}function ER(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=Wo(n[i],r[i]);if(s)return s}return Te(n.length,r.length)}function Ko(t){return ov(t)}function ov(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=xr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ii(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=ov(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${ov(n.fields[o])}`;return i+"}"}(t.mapValue):X()}function TR(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function av(t){return!!t&&"integerValue"in t}function NI(t){return!!t&&"arrayValue"in t}function CR(t){return!!t&&"nullValue"in t}function bR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zh(t){return!!t&&"mapValue"in t}function nN(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function tu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ia(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=tu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=tu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function rN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Ln=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Zh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=tu(n)}setAll(e){let n=dn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=tu(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Zh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return cr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Zh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ia(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(tu(this.value))}};function iN(t){let e=[];return ia(t.fields,(n,r)=>{let i=new dn([n]);if(Zh(r)){let s=iN(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new rr(e)}var Vn=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,se.min(),se.min(),se.min(),Ln.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,se.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,se.min(),se.min(),Ln.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,se.min(),se.min(),Ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Qo=class{constructor(e,n){this.position=e,this.inclusive=n}};function DR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=z.comparator(z.fromName(o.referenceValue),n.key):r=Wo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function SR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!cr(t.position[n],e.position[n]))return!1;return!0}var Yo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function Vq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var of=class{},ht=class t extends of{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new uv(e,n,r):n==="array-contains"?new hv(e,r):n==="in"?new fv(e,r):n==="not-in"?new pv(e,r):n==="array-contains-any"?new gv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new lv(e,r):new dv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Wo(n,this.value)):n!==null&&ys(this.value)===ys(n)&&this.matchesComparison(Wo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Un=class t extends of{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return sN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function sN(t){return t.op==="and"}function oN(t){return Uq(t)&&sN(t)}function Uq(t){for(let e of t.filters)if(e instanceof Un)return!1;return!0}function cv(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+Ko(t.value);if(oN(t))return t.filters.map(e=>cv(e)).join(",");{let e=t.filters.map(n=>cv(n)).join(",");return`${t.op}(${e})`}}function aN(t,e){return t instanceof ht?function(r,i){return i instanceof ht&&r.op===i.op&&r.field.isEqual(i.field)&&cr(r.value,i.value)}(t,e):t instanceof Un?function(r,i){return i instanceof Un&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&aN(o,i.filters[a]),!0):!1}(t,e):void X()}function cN(t){return t instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${Ko(n.value)}`}(t):t instanceof Un?function(n){return n.op.toString()+" {"+n.getFilters().map(cN).join(" ,")+"}"}(t):"Filter"}var uv=class extends ht{constructor(e,n,r){super(e,n,r),this.key=z.fromName(r.referenceValue)}matches(e){let n=z.comparator(e.key,this.key);return this.matchesComparison(n)}},lv=class extends ht{constructor(e,n){super(e,"in",n),this.keys=uN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},dv=class extends ht{constructor(e,n){super(e,"not-in",n),this.keys=uN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function uN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>z.fromName(r.referenceValue))}var hv=class extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return NI(n)&&au(n.arrayValue,this.value)}},fv=class extends ht{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&au(this.value.arrayValue,n)}},pv=class extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!au(this.value.arrayValue,n)}},gv=class extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!NI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>au(this.value.arrayValue,r))}};var mv=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function AR(t,e=null,n=[],r=[],i=null,s=null,o=null){return new mv(t,e,n,r,i,s,o)}function PI(t){let e=re(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>cv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Mf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ko(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ko(r)).join(",")),e.ue=n}return e.ue}function MI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Vq(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!aN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!SR(t.startAt,e.startAt)&&SR(t.endAt,e.endAt)}function _v(t){return z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var vs=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function jq(t,e,n,r,i,s,o,a){return new vs(t,e,n,r,i,s,o,a)}function xI(t){return new vs(t)}function RR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function lN(t){return t.collectionGroup!==null}function nu(t){let e=re(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Nt(dn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Yo(s,r))}),n.has(dn.keyField().canonicalString())||e.ce.push(new Yo(dn.keyField(),r))}return e.ce}function or(t){let e=re(t);return e.le||(e.le=Bq(e,nu(t))),e.le}function Bq(t,e){if(t.limitType==="F")return AR(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Yo(i.field,s)});let n=t.endAt?new Qo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Qo(t.startAt.position,t.startAt.inclusive):null;return AR(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function yv(t,e){let n=t.filters.concat([e]);return new vs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vv(t,e,n){return new vs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xf(t,e){return MI(or(t),or(e))&&t.limitType===e.limitType}function dN(t){return`${PI(or(t))}|lt:${t.limitType}`}function Uo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>cN(i)).join(", ")}]`),Mf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ko(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ko(i)).join(",")),`Target(${r})`}(or(t))}; limitType=${t.limitType})`}function kf(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):z.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of nu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=DR(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,nu(r),i)||r.endAt&&!function(o,a,c){let l=DR(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,nu(r),i))}(t,e)}function $q(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hN(t){return(e,n)=>{let r=!1;for(let i of nu(t)){let s=Hq(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Hq(t,e,n){let r=t.field.isKeyField()?z.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Wo(c,l):X()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}var wi=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ia(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return tN(this.inner)}size(){return this.innerSize}};var qq=new Ze(z.comparator);function kr(){return qq}var fN=new Ze(z.comparator);function eu(...t){let e=fN;for(let n of t)e=e.insert(n.key,n);return e}function pN(t){let e=fN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function fs(){return ru()}function gN(){return ru()}function ru(){return new wi(t=>t.toString(),(t,e)=>t.isEqual(e))}var zq=new Ze(z.comparator),Gq=new Nt(z.comparator);function he(...t){let e=Gq;for(let n of t)e=e.add(n);return e}var Wq=new Nt(Te);function Kq(){return Wq}function kI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:su(e)?"-0":e}}function mN(t){return{integerValue:""+t}}function Qq(t,e){return Mq(e)?mN(e):kI(t,e)}var Zo=class{constructor(){this._=void 0}};function Yq(t,e,n){return t instanceof Jo?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&AI(s)&&(s=RI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Is?yN(t,e):t instanceof ws?vN(t,e):function(i,s){let o=_N(i,s),a=NR(o)+NR(i.Pe);return av(o)&&av(i.Pe)?mN(a):kI(i.serializer,a)}(t,e)}function Zq(t,e,n){return t instanceof Is?yN(t,e):t instanceof ws?vN(t,e):n}function _N(t,e){return t instanceof Xo?function(r){return av(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Jo=class extends Zo{},Is=class extends Zo{constructor(e){super(),this.elements=e}};function yN(t,e){let n=IN(e);for(let r of t.elements)n.some(i=>cr(i,r))||n.push(r);return{arrayValue:{values:n}}}var ws=class extends Zo{constructor(e){super(),this.elements=e}};function vN(t,e){let n=IN(e);for(let r of t.elements)n=n.filter(i=>!cr(i,r));return{arrayValue:{values:n}}}var Xo=class extends Zo{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function NR(t){return Be(t.integerValue||t.doubleValue)}function IN(t){return NI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Jq(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Is&&i instanceof Is||r instanceof ws&&i instanceof ws?Go(r.elements,i.elements,cr):r instanceof Xo&&i instanceof Xo?cr(r.Pe,i.Pe):r instanceof Jo&&i instanceof Jo}(t.transform,e.transform)}var Iv=class{constructor(e,n){this.version=e,this.transformResults=n}},yi=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Jh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ea=class{};function wN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new cu(t.key,yi.none()):new Es(t.key,t.data,yi.none());{let n=t.data,r=Ln.empty(),i=new Nt(dn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Or(t.key,r,new rr(i.toArray()),yi.none())}}function Xq(t,e,n){t instanceof Es?function(i,s,o){let a=i.value.clone(),c=MR(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Or?function(i,s,o){if(!Jh(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=MR(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(EN(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function iu(t,e,n,r){return t instanceof Es?function(s,o,a,c){if(!Jh(s.precondition,o))return a;let l=s.value.clone(),d=xR(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Or?function(s,o,a,c){if(!Jh(s.precondition,o))return a;let l=xR(s.fieldTransforms,c,o),d=o.data;return d.setAll(EN(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return Jh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function ez(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=_N(r.transform,i||null);s!=null&&(n===null&&(n=Ln.empty()),n.set(r.field,s))}return n||null}function PR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Go(r,i,(s,o)=>Jq(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Es=class extends ea{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Or=class extends ea{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function EN(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function MR(t,e,n){let r=new Map;Se(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Zq(o,a,n[i]))}return r}function xR(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,Yq(s,o,e))}return r}var cu=class extends ea{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},wv=class extends ea{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ev=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Xq(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=iu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=iu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=gN();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=wN(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&Go(this.mutations,e.mutations,(n,r)=>PR(n,r))&&Go(this.baseMutations,e.baseMutations,(n,r)=>PR(n,r))}},Tv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Se(e.mutations.length===r.length);let i=function(){return zq}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Cv=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var bv=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var lt,ye;function tz(t){switch(t){default:return X();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function TN(t){if(t===void 0)return Mr("GRPC error has no .code"),P.UNKNOWN;switch(t){case lt.OK:return P.OK;case lt.CANCELLED:return P.CANCELLED;case lt.UNKNOWN:return P.UNKNOWN;case lt.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case lt.INTERNAL:return P.INTERNAL;case lt.UNAVAILABLE:return P.UNAVAILABLE;case lt.UNAUTHENTICATED:return P.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case lt.NOT_FOUND:return P.NOT_FOUND;case lt.ALREADY_EXISTS:return P.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return P.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case lt.ABORTED:return P.ABORTED;case lt.OUT_OF_RANGE:return P.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return P.UNIMPLEMENTED;case lt.DATA_LOSS:return P.DATA_LOSS;default:return X()}}(ye=lt||(lt={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var kR=null;function nz(){return new TextEncoder}var rz=new _i([4294967295,4294967295],0);function OR(t){let e=nz().encode(t),n=new jy;return n.update(e),new Uint8Array(n.digest())}function FR(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new _i([n,r],0),new _i([i,s],0)]}var Dv=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ps(`Invalid padding: ${n}`);if(r<0)throw new ps(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ps(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ps(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=_i.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(_i.fromNumber(r)));return i.compare(rz)===1&&(i=new _i([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=OR(e),[r,i]=FR(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=OR(e),[r,i]=FR(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},ps=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var af=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,uu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(se.min(),i,new Ze(Te),kr(),he())}},uu=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,he(),he(),he())}};var Ho=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},cf=class{constructor(e,n){this.targetId=e,this.me=n}},uf=class{constructor(e,n,r=Pt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},lf=class{constructor(){this.fe=0,this.ge=VR(),this.pe=Pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=he(),n=he(),r=he();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:X()}}),new uu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=VR()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Se(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Sv=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=kr(),this.qe=LR(),this.Qe=new Ze(Te)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(_v(s))if(r===0){let o=new z(s.path);this.Ue(n,o,Vn.newNoDocument(o,se.min()))}else Se(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}kR?.et(function(d,p,g,_,E){var R,A,x,L,$,G;let Ne={localCacheCount:d,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},Y=p.unchangedNames;return Y&&(Ne.bloomFilter={applied:E===0,hashCount:(R=Y?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(L=(x=(A=Y?.bits)===null||A===void 0?void 0:A.bitmap)===null||x===void 0?void 0:x.length)!==null&&L!==void 0?L:0,padding:(G=($=Y?.bits)===null||$===void 0?void 0:$.padding)!==null&&G!==void 0?G:0,mightContain:T=>{var v;return(v=_?.mightContain(T))!==null&&v!==void 0&&v}}),Ne}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Ii(r).toUint8Array()}catch(c){if(c instanceof rf)return zo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Dv(o,i,s)}catch(c){return zo(c instanceof ps?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&_v(a.target)){let c=new z(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Vn.newNoDocument(c,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=he();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new af(e,n,this.Qe,this.ke,r);return this.ke=kr(),this.qe=LR(),this.Qe=new Ze(Te),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new lf,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Nt(Te),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||B("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new lf),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function LR(){return new Ze(z.comparator)}function VR(){return new Ze(z.comparator)}var iz={asc:"ASCENDING",desc:"DESCENDING"},sz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oz={and:"AND",or:"OR"},Av=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Rv(t,e){return t.useProto3Json||Mf(e)?e:{value:e}}function df(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function az(t,e){return df(t,e.toTimestamp())}function ar(t){return Se(!!t),se.fromTimestamp(function(n){let r=xr(n);return new gt(r.seconds,r.nanos)}(t))}function OI(t,e){return Nv(t,e).canonicalString()}function Nv(t,e){let n=function(i){return new He(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function bN(t){let e=He.fromString(t);return Se(NN(e)),e}function Pv(t,e){return OI(t.databaseId,e.path)}function Gy(t,e){let n=bN(e);if(n.get(1)!==t.databaseId.projectId)throw new j(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new j(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new z(SN(n))}function DN(t,e){return OI(t.databaseId,e)}function cz(t){let e=bN(t);return e.length===4?He.emptyPath():SN(e)}function Mv(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function SN(t){return Se(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function UR(t,e,n){return{name:Pv(t,e),fields:n.value.mapValue.fields}}function uz(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(Se(d===void 0||typeof d=="string"),Pt.fromBase64String(d||"")):(Se(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Pt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let d=l.code===void 0?P.UNKNOWN:TN(l.code);return new j(d,l.message||"")}(o);n=new uf(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Gy(t,r.document.name),s=ar(r.document.updateTime),o=r.document.createTime?ar(r.document.createTime):se.min(),a=new Ln({mapValue:{fields:r.document.fields}}),c=Vn.newFoundDocument(i,s,o,a),l=r.targetIds||[],d=r.removedTargetIds||[];n=new Ho(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Gy(t,r.document),s=r.readTime?ar(r.readTime):se.min(),o=Vn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ho([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Gy(t,r.document),s=r.removedTargetIds||[];n=new Ho([],s,i,null)}else{if(!("filter"in e))return X();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new bv(i,s),a=r.targetId;n=new cf(a,o)}}return n}function lz(t,e){let n;if(e instanceof Es)n={update:UR(t,e.key,e.value)};else if(e instanceof cu)n={delete:Pv(t,e.key)};else if(e instanceof Or)n={update:UR(t,e.key,e.data),updateMask:vz(e.fieldMask)};else{if(!(e instanceof wv))return X();n={verify:Pv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Jo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Is)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ws)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xo)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw X()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:az(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X()}(t,e.precondition)),n}function dz(t,e){return t&&t.length>0?(Se(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?ar(i.updateTime):ar(s);return o.isEqual(se.min())&&(o=ar(s)),new Iv(o,i.transformResults||[])}(n,e))):[]}function hz(t,e){return{documents:[DN(t,e.path)]}}function fz(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=DN(t,i);let s=function(l){if(l.length!==0)return RN(Un.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:jo(g.field),direction:mz(g.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Rv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function pz(t){let e=cz(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Se(r===1);let d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(p){let g=AN(p);return g instanceof Un&&oN(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(E){return new Yo(Bo(E.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,Mf(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){let g=!!p.before,_=p.values||[];return new Qo(_,g)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let g=!p.before,_=p.values||[];return new Qo(_,g)}(n.endAt)),jq(e,i,o,s,a,"F",c,l)}function gz(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function AN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Bo(n.unaryFilter.field);return ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Bo(n.unaryFilter.field);return ht.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Bo(n.unaryFilter.field);return ht.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Bo(n.unaryFilter.field);return ht.create(o,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return ht.create(Bo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Un.create(n.compositeFilter.filters.map(r=>AN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function mz(t){return iz[t]}function _z(t){return sz[t]}function yz(t){return oz[t]}function jo(t){return{fieldPath:t.canonicalString()}}function Bo(t){return dn.fromServerFormat(t.fieldPath)}function RN(t){return t instanceof ht?function(n){if(n.op==="=="){if(bR(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NAN"}};if(CR(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(bR(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NOT_NAN"}};if(CR(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jo(n.field),op:_z(n.op),value:n.value}}}(t):t instanceof Un?function(n){let r=n.getFilters().map(i=>RN(i));return r.length===1?r[0]:{compositeFilter:{op:yz(n.op),filters:r}}}(t):X()}function vz(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function NN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var lu=class t{constructor(e,n,r,i,s=se.min(),o=se.min(),a=Pt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var xv=class{constructor(e){this.ct=e}};function Iz(t){let e=pz({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vv(e,e.limit,"L"):e}var hf=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Be(e.integerValue));else if("doubleValue"in e){let r=Be(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),su(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=xr(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Ii(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?rN(e)?this.dt(n,Number.MAX_SAFE_INTEGER):nN(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):X()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Be(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),z.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};hf.vt=new hf;var kv=class{constructor(){this.un=new Ov}addToCollectionParentIndex(e,n){return this.un.add(n),k.resolve()}getCollectionParents(e,n){return k.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return k.resolve()}deleteFieldIndex(e,n){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,n){return k.resolve()}getDocumentsMatchingTarget(e,n){return k.resolve(null)}getIndexType(e,n){return k.resolve(0)}getFieldIndexes(e,n){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,n){return k.resolve(_s.min())}getMinOffsetFromCollectionGroup(e,n){return k.resolve(_s.min())}updateCollectionGroup(e,n,r){return k.resolve()}updateIndexEntries(e,n){return k.resolve()}},Ov=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Nt(He.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Nt(He.comparator)).toArray()}};var _ee=new Uint8Array(0);var nr=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};nr.DEFAULT_COLLECTION_PERCENTILE=10,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nr.DEFAULT=new nr(41943040,nr.DEFAULT_COLLECTION_PERCENTILE,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nr.DISABLED=new nr(-1,0,0);var du=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var Fv=class{constructor(){this.changes=new wi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Vn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?k.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Lv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Vv=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&iu(r.mutation,i,rr.empty(),gt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){let i=fs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=eu();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=fs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=kr(),o=ru(),a=function(){return ru()}();return n.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Or)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),iu(d.mutation,l,d.mutation.getFieldMask(),gt.now())):o.set(l.key,rr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),n.forEach((l,d)=>{var p;return a.set(l,new Lv(d,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=ru(),i=new Ze((o,a)=>o-a),s=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let d=r.get(c)||rr.empty();d=a.applyToLocalView(l,d),r.set(c,d);let p=(i.get(a.batchId)||he()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,p=gN();d.forEach(g=>{if(!s.has(g)){let _=wN(n.get(g),r.get(g));_!==null&&p.set(g,_),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return k.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):lN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):k.resolve(fs()),a=-1,c=s;return o.next(l=>k.forEach(l,(d,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(d)?k.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,he())).next(d=>({batchId:a,changes:pN(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new z(n)).next(r=>{let i=eu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=eu();return this.indexManager.getCollectionParents(e,s).next(a=>k.forEach(a,c=>{let l=function(p,g){return new vs(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,Vn.newInvalidDocument(d)))});let a=eu();return o.forEach((c,l)=>{let d=s.get(c);d!==void 0&&iu(d.mutation,l,rr.empty(),gt.now()),kf(n,l)&&(a=a.insert(c,l))}),a})}};var Uv=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return k.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ar(i.createTime)}}(n)),k.resolve()}getNamedQuery(e,n){return k.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Iz(i.bundledQuery),readTime:ar(i.readTime)}}(n)),k.resolve()}};var jv=class{constructor(){this.overlays=new Ze(z.comparator),this.Ir=new Map}getOverlay(e,n){return k.resolve(this.overlays.get(n))}getOverlays(e,n){let r=fs();return k.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),k.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),k.resolve()}getOverlaysForCollection(e,n,r){let i=fs(),s=n.length+1,o=new z(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return k.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ze((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let d=s.get(l.largestBatchId);d===null&&(d=fs(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=fs(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return k.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Cv(n,r));let s=this.Ir.get(n);s===void 0&&(s=he(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var Bv=class{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,k.resolve()}};var hu=class{constructor(){this.Tr=new Nt(dt.Er),this.dr=new Nt(dt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new dt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new dt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new z(new He([])),r=new dt(n,e),i=new dt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new z(new He([])),r=new dt(n,e),i=new dt(n,e+1),s=he();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new dt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},dt=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return z.comparator(e.key,n.key)||Te(e.wr,n.wr)}static Ar(e,n){return Te(e.wr,n.wr)||z.comparator(e.key,n.key)}};var $v=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Nt(dt.Er)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Ev(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new dt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(o)}lookupMutationBatch(e,n){return k.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return k.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new dt(n,0),i=new dt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),k.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Nt(Te);return n.forEach(i=>{let s=new dt(i,0),o=new dt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),k.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;z.isDocumentKey(s)||(s=s.child(""));let o=new dt(new z(s),0),a=new Nt(Te);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),k.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Se(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return k.forEach(n.mutations,i=>{let s=new dt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new dt(n,0),i=this.br.firstAfterOrEqual(r);return k.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Hv=class{constructor(e){this.Mr=e,this.docs=function(){return new Ze(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return k.resolve(r?r.document.mutableCopy():Vn.newInvalidDocument(n))}getEntries(e,n){let r=kr();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Vn.newInvalidDocument(i))}),k.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=kr(),o=n.path,a=new z(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Rq(Aq(d),r)<=0||(i.has(d.key)||kf(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return k.resolve(s)}getAllFromCollectionGroup(e,n,r,i){X()}Or(e,n){return k.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new qv(this)}getSize(e){return k.resolve(this.size)}},qv=class extends Fv{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),k.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var zv=class{constructor(e){this.persistence=e,this.Nr=new wi(n=>PI(n),MI),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Lr=0,this.Br=new hu,this.targetCount=0,this.kr=du.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),k.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new du(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,k.resolve()}updateTargetData(e,n){return this.Kn(n),k.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),k.waitFor(s).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return k.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),k.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),k.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),k.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return k.resolve(r)}containsKey(e,n){return k.resolve(this.Br.containsKey(n))}};var Gv=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new eN(0),this.Kr=!1,this.Kr=!0,this.$r=new Bv,this.referenceDelegate=e(this),this.Ur=new zv(this),this.indexManager=new kv,this.remoteDocumentCache=function(i){return new Hv(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new xv(n),this.Gr=new Uv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new jv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new $v(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){B("MemoryPersistence","Starting transaction:",e);let i=new Wv(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return k.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},Wv=class extends iv{constructor(e){super(),this.currentSequenceNumber=e}},Kv=class t{constructor(e){this.persistence=e,this.Jr=new hu,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),k.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),k.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Xr,r=>{let i=z.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,se.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return k.or([()=>k.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var Qv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=he(),i=he();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Yv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Zv=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return sC()?8:Pq(St())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Yv;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Xc()<=At.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",Uo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),k.resolve()):(Xc()<=At.DEBUG&&B("QueryEngine","Query:",Uo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Xc()<=At.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",Uo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,or(n))):k.resolve())}Yi(e,n){if(RR(n))return k.resolve(null);let r=or(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=vv(n,null,"F"),r=or(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=he(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(n,a);return this.ns(n,l,o,c.readTime)?this.Yi(e,vv(n,null,"F")):this.rs(e,l,n,c)}))})))}Zi(e,n,r,i){return RR(n)||i.isEqual(se.min())?k.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?k.resolve(null):(Xc()<=At.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Uo(n)),this.rs(e,o,n,Sq(i,-1)).next(a=>a))})}ts(e,n){let r=new Nt(hN(e));return n.forEach((i,s)=>{kf(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Xc()<=At.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",Uo(n)),this.Ji.getDocumentsMatchingQuery(e,n,_s.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Jv=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ze(Te),this._s=new wi(s=>PI(s),MI),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Vv(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function wz(t,e,n,r){return new Jv(t,e,n,r)}function PN(t,e){return y(this,null,function*(){let n=re(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=he();for(let l of i){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function Ez(t,e){let n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let p=l.batch,g=p.keys(),_=k.resolve();return g.forEach(E=>{_=_.next(()=>d.getEntry(c,E)).next(R=>{let A=l.docVersions.get(E);Se(A!==null),R.version.compareTo(A)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),d.addEntry(R)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=he();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function MN(t){let e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Tz(t,e){let n=re(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((d,p)=>{let g=i.get(p);if(!g)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,p)));let _=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(Pt.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,r)),i=i.insert(p,_),function(R,A,x){return R.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,_,d)&&a.push(n.Ur.updateTargetData(s,_))});let c=kr(),l=he();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(Cz(s,o,e.documentUpdates).next(d=>{c=d.Ps,l=d.Is})),!r.isEqual(se.min())){let d=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return k.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.os=i,s))}function Cz(t,e,n){let r=he(),i=he();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=kr();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(se.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):B("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function bz(t,e){let n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Dz(t,e){let n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,k.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new lu(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function Xv(t,e,n){return y(this,null,function*(){let r=re(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Iu(o))throw o;B("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function jR(t,e,n){let r=re(t),i=se.min(),s=he();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){let p=re(c),g=p._s.get(d);return g!==void 0?k.resolve(p.os.get(g)):p.Ur.getTargetData(l,d)}(r,o,or(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:se.min(),n?s:he())).next(a=>(Sz(r,$q(e),a),{documents:a,Ts:s})))}function Sz(t,e,n){let r=t.us.get(e)||se.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var ff=class{constructor(){this.activeTargetIds=Kq()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var eI=class{constructor(){this.so=new ff,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ff,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var tI=class{_o(e){}shutdown(){}};var pf=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){B("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){B("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Yh=null;function Wy(){return Yh===null?Yh=function(){return 268435456+Math.round(2147483648*Math.random())}():Yh++,"0x"+Yh.toString(16)}var Az={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var nI=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Rt="WebChannelConnection",rI=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let a=Wy(),c=this.xo(n,r.toUriEncodedString());B("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,c,l,i).then(d=>(B("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw zo("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ra}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=Az[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=Wy();return new Promise((o,a)=>{let c=new By;c.setWithCredentials(!0),c.listenOnce($y.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Jc.NO_ERROR:let d=c.getResponseJson();B(Rt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Jc.TIMEOUT:B(Rt,`RPC '${e}' ${s} timed out`),a(new j(P.DEADLINE_EXCEEDED,"Request time out"));break;case Jc.HTTP_ERROR:let p=c.getStatus();if(B(Rt,`RPC '${e}' ${s} failed with status:`,p,"response text:",c.getResponseText()),p>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let _=g?.error;if(_&&_.status&&_.message){let E=function(A){let x=A.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(x)>=0?x:P.UNKNOWN}(_.status);a(new j(E,_.message))}else a(new j(P.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new j(P.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{B(Rt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);B(Rt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=Wy(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=zy(),a=qy(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let d=s.join("");B(Rt,`Creating RPC '${e}' stream ${i}: ${d}`,c);let p=o.createWebChannel(d,c),g=!1,_=!1,E=new nI({Io:A=>{_?B(Rt,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(g||(B(Rt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),B(Rt,`RPC '${e}' stream ${i} sending:`,A),p.send(A))},To:()=>p.close()}),R=(A,x,L)=>{A.listen(x,$=>{try{L($)}catch(G){setTimeout(()=>{throw G},0)}})};return R(p,Vo.EventType.OPEN,()=>{_||(B(Rt,`RPC '${e}' stream ${i} transport opened.`),E.yo())}),R(p,Vo.EventType.CLOSE,()=>{_||(_=!0,B(Rt,`RPC '${e}' stream ${i} transport closed`),E.So())}),R(p,Vo.EventType.ERROR,A=>{_||(_=!0,zo(Rt,`RPC '${e}' stream ${i} transport errored:`,A),E.So(new j(P.UNAVAILABLE,"The operation could not be completed")))}),R(p,Vo.EventType.MESSAGE,A=>{var x;if(!_){let L=A.data[0];Se(!!L);let $=L,G=$.error||((x=$[0])===null||x===void 0?void 0:x.error);if(G){B(Rt,`RPC '${e}' stream ${i} received error:`,G);let Ne=G.status,Y=function(I){let C=lt[I];if(C!==void 0)return TN(C)}(Ne),T=G.message;Y===void 0&&(Y=P.INTERNAL,T="Unknown error status: "+Ne+" with message "+G.message),_=!0,E.So(new j(Y,T)),p.close()}else B(Rt,`RPC '${e}' stream ${i} received:`,L),E.bo(L)}}),R(a,Hy.STAT_EVENT,A=>{A.stat===Kh.PROXY?B(Rt,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===Kh.NOPROXY&&B(Rt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}};function Ky(){return typeof document<"u"?document:null}function Of(t){return new Av(t,!0)}var gf=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var mf=class{constructor(e,n,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new gf(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return y(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return y(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return y(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===P.RESOURCE_EXHAUSTED?(Mr(n.toString()),Mr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new j(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>y(this,null,function*(){this.state=0,this.start()}))}I_(e){return B("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(B("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},iI=class extends mf{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=uz(this.serializer,e),r=function(s){if(!("targetChange"in s))return se.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?se.min():o.readTime?ar(o.readTime):se.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=Mv(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=_v(c)?{documents:hz(s,c)}:{query:fz(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=CN(s,o.resumeToken);let l=Rv(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(se.min())>0){a.readTime=df(s,o.snapshotVersion.toTimestamp());let l=Rv(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=gz(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=Mv(this.serializer),n.removeTarget=e,this.a_(n)}},sI=class extends mf{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Se(!!e.streamToken),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Se(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=dz(e.writeResults,e.commitTime),r=ar(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=Mv(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>lz(this.serializer,r))};this.a_(n)}};var oI=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new j(P.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Nv(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(P.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Nv(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(P.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},aI=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Mr(n),this.D_=!1):B("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var cI=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>y(this,null,function*(){Cs(this)&&(B("RemoteStore","Restarting streams for network reachability change."),yield function(c){return y(this,null,function*(){let l=re(c);l.L_.add(4),yield wu(l),l.q_.set("Unknown"),l.L_.delete(4),yield Ff(l)})}(this))}))}),this.q_=new aI(r,i)}};function Ff(t){return y(this,null,function*(){if(Cs(t))for(let e of t.B_)yield e(!0)})}function wu(t){return y(this,null,function*(){for(let e of t.B_)yield e(!1)})}function xN(t,e){let n=re(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),UI(n)?VI(n):sa(n).r_()&&LI(n,e))}function FI(t,e){let n=re(t),r=sa(n);n.N_.delete(e),r.r_()&&kN(n,e),n.N_.size===0&&(r.r_()?r.o_():Cs(n)&&n.q_.set("Unknown"))}function LI(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}sa(t).A_(e)}function kN(t,e){t.Q_.xe(e),sa(t).R_(e)}function VI(t){t.Q_=new Sv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),sa(t).start(),t.q_.v_()}function UI(t){return Cs(t)&&!sa(t).n_()&&t.N_.size>0}function Cs(t){return re(t).L_.size===0}function ON(t){t.Q_=void 0}function Rz(t){return y(this,null,function*(){t.q_.set("Online")})}function Nz(t){return y(this,null,function*(){t.N_.forEach((e,n)=>{LI(t,e)})})}function Pz(t,e){return y(this,null,function*(){ON(t),UI(t)?(t.q_.M_(e),VI(t)):t.q_.set("Unknown")})}function Mz(t,e,n){return y(this,null,function*(){if(t.q_.set("Online"),e instanceof uf&&e.state===2&&e.cause)try{yield function(i,s){return y(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){B("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield _f(t,r)}else if(e instanceof Ho?t.Q_.Ke(e):e instanceof cf?t.Q_.He(e):t.Q_.We(e),!n.isEqual(se.min()))try{let r=yield MN(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.N_.get(l);d&&s.N_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(Pt.EMPTY_BYTE_STRING,d.snapshotVersion)),kN(s,c);let p=new lu(d.target,c,l,d.sequenceNumber);LI(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){B("RemoteStore","Failed to raise snapshot:",r),yield _f(t,r)}})}function _f(t,e,n){return y(this,null,function*(){if(!Iu(e))throw e;t.L_.add(1),yield wu(t),t.q_.set("Offline"),n||(n=()=>MN(t.localStore)),t.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){B("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield Ff(t)}))})}function FN(t,e){return e().catch(n=>_f(t,n,e))}function Lf(t){return y(this,null,function*(){let e=re(t),n=Ei(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;xz(e);)try{let i=yield bz(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,kz(e,i)}catch(i){yield _f(e,i)}LN(e)&&VN(e)})}function xz(t){return Cs(t)&&t.O_.length<10}function kz(t,e){t.O_.push(e);let n=Ei(t);n.r_()&&n.V_&&n.m_(e.mutations)}function LN(t){return Cs(t)&&!Ei(t).n_()&&t.O_.length>0}function VN(t){Ei(t).start()}function Oz(t){return y(this,null,function*(){Ei(t).p_()})}function Fz(t){return y(this,null,function*(){let e=Ei(t);for(let n of t.O_)e.m_(n.mutations)})}function Lz(t,e,n){return y(this,null,function*(){let r=t.O_.shift(),i=Tv.from(r,e,n);yield FN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Lf(t)})}function Vz(t,e){return y(this,null,function*(){e&&Ei(t).V_&&(yield function(r,i){return y(this,null,function*(){if(function(o){return tz(o)&&o!==P.ABORTED}(i.code)){let s=r.O_.shift();Ei(r).s_(),yield FN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Lf(r)}})}(t,e)),LN(t)&&VN(t)})}function BR(t,e){return y(this,null,function*(){let n=re(t);n.asyncQueue.verifyOperationInProgress(),B("RemoteStore","RemoteStore received new credentials");let r=Cs(n);n.L_.add(3),yield wu(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield Ff(n)})}function Uz(t,e){return y(this,null,function*(){let n=re(t);e?(n.L_.delete(2),yield Ff(n)):e||(n.L_.add(2),yield wu(n),n.q_.set("Unknown"))})}function sa(t){return t.K_||(t.K_=function(n,r,i){let s=re(n);return s.w_(),new iI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:Rz.bind(null,t),Ro:Nz.bind(null,t),mo:Pz.bind(null,t),d_:Mz.bind(null,t)}),t.B_.push(e=>y(this,null,function*(){e?(t.K_.s_(),UI(t)?VI(t):t.q_.set("Unknown")):(yield t.K_.stop(),ON(t))}))),t.K_}function Ei(t){return t.U_||(t.U_=function(n,r,i){let s=re(n);return s.w_(),new sI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Oz.bind(null,t),mo:Vz.bind(null,t),f_:Fz.bind(null,t),g_:Lz.bind(null,t)}),t.B_.push(e=>y(this,null,function*(){e?(t.U_.s_(),yield Lf(t)):(yield t.U_.stop(),t.O_.length>0&&(B("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var uI=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function jI(t,e){if(Mr("AsyncQueue",`${e}: ${t}`),Iu(t))return new j(P.UNAVAILABLE,`${e}: ${t}`);throw t}var yf=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||z.comparator(n.key,r.key):(n,r)=>z.comparator(n.key,r.key),this.keyedMap=eu(),this.sortedSet=new Ze(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var vf=class{constructor(){this.W_=new Ze(z.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},ta=class t{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,yf.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var lI=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},dI=class{constructor(){this.queries=$R(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=re(n),s=i.queries;i.queries=$R(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new j(P.ABORTED,"Firestore shutting down"))}};function $R(){return new wi(t=>dN(t),xf)}function UN(t,e){return y(this,null,function*(){let n=re(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new lI,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=jI(o,`Initialization of query '${Uo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&BI(n)})}function jN(t,e){return y(this,null,function*(){let n=re(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function jz(t,e){let n=re(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&BI(n)}function Bz(t,e,n){let r=re(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function BI(t){t.Y_.forEach(e=>{e.next()})}var hI,HR;(HR=hI||(hI={})).ea="default",HR.Cache="cache";var If=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ta(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ta.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==hI.Cache}};var wf=class{constructor(e){this.key=e}},Ef=class{constructor(e){this.key=e}},fI=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=he(),this.mutatedKeys=he(),this.Aa=hN(e),this.Ra=new yf(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new vf,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,p)=>{let g=i.get(d),_=kf(this.query,p)?p:null,E=!!g&&this.mutatedKeys.has(g.key),R=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),A=!1;g&&_?g.data.isEqual(_.data)?E!==R&&(r.track({type:3,doc:_}),A=!0):this.ga(g,_)||(r.track({type:2,doc:_}),A=!0,(c&&this.Aa(_,c)>0||l&&this.Aa(_,l)<0)&&(a=!0)):!g&&_?(r.track({type:0,doc:_}),A=!0):g&&!_&&(r.track({type:1,doc:g}),A=!0,(c||l)&&(a=!0)),A&&(_?(o=o.add(_),s=R?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,p)=>function(_,E){let R=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return R(_)-R(E)}(d.type,p.type)||this.Aa(d.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new ta(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new vf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=he(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Ef(r))}),this.da.forEach(r=>{e.has(r)||n.push(new wf(r))}),n}ba(e){this.Ta=e.Ts,this.da=he();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ta.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},pI=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},gI=class{constructor(e){this.key=e,this.va=!1}},mI=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new wi(a=>dN(a),xf),this.Ma=new Map,this.xa=new Set,this.Oa=new Ze(z.comparator),this.Na=new Map,this.La=new hu,this.Ba={},this.ka=new Map,this.qa=du.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function $z(t,e,n=!0){return y(this,null,function*(){let r=GN(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield BN(r,e,n,!0),i})}function Hz(t,e){return y(this,null,function*(){let n=GN(t);yield BN(n,e,!0,!1)})}function BN(t,e,n,r){return y(this,null,function*(){let i=yield Dz(t.localStore,or(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n),a;return r&&(a=yield qz(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&xN(t.remoteStore,i),a})}function qz(t,e,n,r,i){return y(this,null,function*(){t.Ka=(p,g,_)=>function(R,A,x,L){return y(this,null,function*(){let $=A.view.ma(x);$.ns&&($=yield jR(R.localStore,A.query,!1).then(({documents:T})=>A.view.ma(T,$)));let G=L&&L.targetChanges.get(A.targetId),Ne=L&&L.targetMismatches.get(A.targetId)!=null,Y=A.view.applyChanges($,R.isPrimaryClient,G,Ne);return zR(R,A.targetId,Y.wa),Y.snapshot})}(t,p,g,_);let s=yield jR(t.localStore,e,!0),o=new fI(e,s.Ts),a=o.ma(s.documents),c=uu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);zR(t,n,l.wa);let d=new pI(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function zz(t,e,n){return y(this,null,function*(){let r=re(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!xf(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Xv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&FI(r.remoteStore,i.targetId),_I(r,i.targetId)}).catch(vu))):(_I(r,i.targetId),yield Xv(r.localStore,i.targetId,!0))})}function Gz(t,e){return y(this,null,function*(){let n=re(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),FI(n.remoteStore,r.targetId))})}function Wz(t,e,n){return y(this,null,function*(){let r=eG(t);try{let i=yield function(o,a){let c=re(o),l=gt.now(),d=a.reduce((_,E)=>_.add(E.key),he()),p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let E=kr(),R=he();return c.cs.getEntries(_,d).next(A=>{E=A,E.forEach((x,L)=>{L.isValidDocument()||(R=R.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,E)).next(A=>{p=A;let x=[];for(let L of a){let $=ez(L,p.get(L.key).overlayedDocument);$!=null&&x.push(new Or(L.key,$,iN($.value.mapValue),yi.exists(!0)))}return c.mutationQueue.addMutationBatch(_,l,x,a)}).next(A=>{g=A;let x=A.applyToLocalDocumentSet(p,R);return c.documentOverlayCache.saveOverlays(_,A.batchId,x)})}).then(()=>({batchId:g.batchId,changes:pN(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new Ze(Te)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Eu(r,i.changes),yield Lf(r.remoteStore)}catch(i){let s=jI(i,"Failed to persist write");n.reject(s)}})}function $N(t,e){return y(this,null,function*(){let n=re(t);try{let r=yield Tz(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(Se(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Se(o.va):i.removedDocuments.size>0&&(Se(o.va),o.va=!1))}),yield Eu(n,r,e)}catch(r){yield vu(r)}})}function qR(t,e,n){let r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=re(o);c.onlineState=a;let l=!1;c.queries.forEach((d,p)=>{for(let g of p.j_)g.Z_(a)&&(l=!0)}),l&&BI(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Kz(t,e,n){return y(this,null,function*(){let r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ze(z.comparator);o=o.insert(s,Vn.newNoDocument(s,se.min()));let a=he().add(s),c=new af(se.min(),new Map,new Ze(Te),o,a);yield $N(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),$I(r)}else yield Xv(r.localStore,e,!1).then(()=>_I(r,e,n)).catch(vu)})}function Qz(t,e){return y(this,null,function*(){let n=re(t),r=e.batch.batchId;try{let i=yield Ez(n.localStore,e);qN(n,r,null),HN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Eu(n,i)}catch(i){yield vu(i)}})}function Yz(t,e,n){return y(this,null,function*(){let r=re(t);try{let i=yield function(o,a){let c=re(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(Se(p!==null),d=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);qN(r,e,n),HN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Eu(r,i)}catch(i){yield vu(i)}})}function HN(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function qN(t,e,n){let r=re(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function _I(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||zN(t,r)})}function zN(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(FI(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),$I(t))}function zR(t,e,n){for(let r of n)r instanceof wf?(t.La.addReference(r.key,e),Zz(t,r)):r instanceof Ef?(B("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||zN(t,r.key)):X()}function Zz(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(B("SyncEngine","New document in limbo: "+n),t.xa.add(r),$I(t))}function $I(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new z(He.fromString(e)),r=t.qa.next();t.Na.set(r,new gI(n)),t.Oa=t.Oa.insert(n,r),xN(t.remoteStore,new lu(or(xI(n.path)),r,"TargetPurposeLimboResolution",eN.oe))}}function Eu(t,e,n){return y(this,null,function*(){let r=re(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,n).then(l=>{var d;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(d=n?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Qv.Wi(c.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return y(this,null,function*(){let d=re(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>k.forEach(l,g=>k.forEach(g.$i,_=>d.persistence.referenceDelegate.addReference(p,g.targetId,_)).next(()=>k.forEach(g.Ui,_=>d.persistence.referenceDelegate.removeReference(p,g.targetId,_)))))}catch(p){if(!Iu(p))throw p;B("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let _=d.os.get(g),E=_.snapshotVersion,R=_.withLastLimboFreeSnapshotVersion(E);d.os=d.os.insert(g,R)}}})}(r.localStore,s))})}function Jz(t,e){return y(this,null,function*(){let n=re(t);if(!n.currentUser.isEqual(e)){B("SyncEngine","User change. New user:",e.toKey());let r=yield PN(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new j(P.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Eu(n,r.hs)}})}function Xz(t,e){let n=re(t),r=n.Na.get(e);if(r&&r.va)return he().add(r.key);{let i=he(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function GN(t){let e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$N.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Kz.bind(null,e),e.Ca.d_=jz.bind(null,e.eventManager),e.Ca.$a=Bz.bind(null,e.eventManager),e}function eG(t){let e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Qz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Yz.bind(null,e),e}var GR=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return y(this,null,function*(){this.serializer=Of(n.databaseInfo.databaseId),this.sharedClientState=this.Wa(n),this.persistence=this.Ga(n),yield this.persistence.start(),this.localStore=this.za(n),this.gcScheduler=this.ja(n,this.localStore),this.indexBackfillerScheduler=this.Ha(n,this.localStore)})}ja(n,r){return null}Ha(n,r){return null}za(n){return wz(this.persistence,new Zv,n.initialUser,this.serializer)}Ga(n){return new Gv(Kv.Zr,this.serializer)}Wa(n){return new eI}terminate(){return y(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})();var tG=(()=>{class t{initialize(n,r){return y(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>qR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Jz.bind(null,this.syncEngine),yield Uz(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new dI}()}createDatastore(n){let r=Of(n.databaseInfo.databaseId),i=function(o){return new rI(o)}(n.databaseInfo);return function(o,a,c,l){return new oI(o,a,c,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,s,o,a,c){return new cI(i,s,o,a,c)}(this.localStore,this.datastore,n.asyncQueue,r=>qR(this.syncEngine,r,0),function(){return pf.D()?new pf:new tI}())}createSyncEngine(n,r){return function(s,o,a,c,l,d,p){let g=new mI(s,o,a,c,l,d);return p&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return y(this,null,function*(){var n,r;yield function(s){return y(this,null,function*(){let o=re(s);B("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield wu(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var Tf=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Mr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var yI=class{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=_t.UNAUTHENTICATED,this.clientId=ef.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>y(this,null,function*(){B("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(B("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=jI(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Qy(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),B("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield PN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function WR(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield nG(t);B("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>BR(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>BR(e.remoteStore,i)),t._onlineComponents=e})}function nG(t){return y(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){B("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Qy(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;zo("Error using user provided cache. Falling back to memory cache: "+n),yield Qy(t,new GR)}}else B("FirestoreClient","Using default OfflineComponentProvider"),yield Qy(t,new GR);return t._offlineComponents})}function WN(t){return y(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(B("FirestoreClient","Using user provided OnlineComponentProvider"),yield WR(t,t._uninitializedComponentsProvider._online)):(B("FirestoreClient","Using default OnlineComponentProvider"),yield WR(t,new tG))),t._onlineComponents})}function rG(t){return WN(t).then(e=>e.syncEngine)}function vI(t){return y(this,null,function*(){let e=yield WN(t),n=e.eventManager;return n.onListen=$z.bind(null,e.syncEngine),n.onUnlisten=zz.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Hz.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Gz.bind(null,e.syncEngine),n})}function iG(t,e,n={}){let r=new ir;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(s,o,a,c,l){let d=new Tf({next:g=>{d.Za(),o.enqueueAndForget(()=>jN(s,p)),g.fromCache&&c.source==="server"?l.reject(new j(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new If(a,d,{includeMetadataChanges:!0,_a:!0});return UN(s,p)}(yield vI(t),t.asyncQueue,e,n,r)})),r.promise}function KN(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var KR=new Map;function QN(t,e,n){if(!n)throw new j(P.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sG(t,e,n,r){if(e===!0&&r===!0)throw new j(P.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function QR(t){if(!z.isDocumentKey(t))throw new j(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function YR(t){if(z.isDocumentKey(t))throw new j(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Vf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function Pr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new j(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Vf(t);throw new j(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Cf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new j(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new j(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new j(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new j(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new j(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},na=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cf({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new j(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Yy;switch(r.type){case"firstParty":return new ev(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return y(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=KR.get(n);r&&(B("ComponentProvider","Removing Datastore"),KR.delete(n),r.terminate())}(this),Promise.resolve()}};function YN(t,e,n,r={}){var i;let s=(t=Pr(t,na))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=_t.MOCK_USER;else{a=Us(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new j(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new _t(l)}t._authCredentials=new Zy(new Xh(a,c))}}var Ts=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Zt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},vi=class t extends Ts{constructor(e,n,r){super(e,n,xI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new z(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function ZN(t,e,...n){if(t=fe(t),QN("collection","path",e),t instanceof na){let r=He.fromString(e,...n);return YR(r),new vi(t,null,r)}{if(!(t instanceof Zt||t instanceof vi))throw new j(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(He.fromString(e,...n));return YR(r),new vi(t.firestore,null,r)}}function JN(t,e,...n){if(t=fe(t),arguments.length===1&&(e=ef.newId()),QN("doc","path",e),t instanceof na){let r=He.fromString(e,...n);return QR(r),new Zt(t,null,new z(r))}{if(!(t instanceof Zt||t instanceof vi))throw new j(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(He.fromString(e,...n));return QR(r),new Zt(t.firestore,t instanceof vi?t.converter:null,new z(r))}}var bf=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new gf(this,"async_queue_retry"),this.Vu=()=>{let r=Ky();r&&B("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=Ky();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=Ky();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new ir;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return y(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Iu(e))throw e;B("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Mr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=uI.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&X()}verifyOperationInProgress(){}wu(){return y(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};function ZR(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Ti=class extends na{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new bf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return y(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new bf(e),this._firestoreClient=void 0,yield e}})}};function XN(t,e){let n=typeof t=="object"?t:ot(),r=typeof t=="string"?t:e||"(default)",i=st(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Gr("firestore");s&&YN(i,...s)}return i}function HI(t){if(t._terminated)throw new j(P.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||oG(t),t._firestoreClient}function oG(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,l,d){return new sv(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,KN(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new yI(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(t._componentsProvider))}var fu=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Pt.fromBase64String(e))}catch(n){throw new j(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var pu=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new j(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Df=class{constructor(e){this._methodName=e}};var gu=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new j(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new j(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}};var mu=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var aG=/^__.*__$/,II=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Or(e,this.data,this.fieldMask,n,this.fieldTransforms):new Es(e,this.data,n,this.fieldTransforms)}};function eP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}var wI=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Sf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(eP(this.Cu)&&aG.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},EI=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Of(e)}Qu(e,n,r,i=!1){return new wI({Cu:e,methodName:n,qu:r,path:dn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function tP(t){let e=t._freezeSettings(),n=Of(t._databaseId);return new EI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function cG(t,e,n,r,i,s={}){let o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);iP("Data must be an object, but it was:",o,r);let a=nP(r,o),c,l;if(s.merge)c=new rr(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let p of s.mergeFields){let g=lG(e,p,n);if(!o.contains(g))throw new j(P.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);hG(d,g)||d.push(g)}c=new rr(d),l=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=o.fieldTransforms;return new II(new Ln(a),c,l)}function uG(t,e,n,r=!1){return qI(n,t.Qu(r?4:3,e))}function qI(t,e){if(rP(t=fe(t)))return iP("Unsupported field value:",e,t),nP(t,e);if(t instanceof Df)return function(r,i){if(!eP(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=qI(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Qq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=gt.fromDate(r);return{timestampValue:df(i.serializer,s)}}if(r instanceof gt){let s=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:df(i.serializer,s)}}if(r instanceof gu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fu)return{bytesValue:CN(i.serializer,r._byteString)};if(r instanceof Zt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:OI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof mu)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return kI(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Vf(r)}`)}(t,e)}function nP(t,e){let n={};return tN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ia(t,(r,i)=>{let s=qI(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function rP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof gu||t instanceof fu||t instanceof Zt||t instanceof Df||t instanceof mu)}function iP(t,e,n){if(!rP(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Vf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function lG(t,e,n){if((e=fe(e))instanceof pu)return e._internalPath;if(typeof e=="string")return sP(t,e);throw Sf("Field path arguments must be of type string or ",t,!1,void 0,n)}var dG=new RegExp("[~\\*/\\[\\]]");function sP(t,e,n){if(e.search(dG)>=0)throw Sf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new pu(...e.split("."))._internalPath}catch{throw Sf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Sf(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new j(P.INVALID_ARGUMENT,a+t+c)}function hG(t,e){return t.some(n=>n.isEqual(e))}var Af=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new TI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(zI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},TI=class extends Af{data(){return super.data()}};function zI(t,e){return typeof e=="string"?sP(t,e):e instanceof pu?e._internalPath:e._delegate._internalPath}function oP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new j(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var _u=class{},CI=class extends _u{};function aP(t,e,...n){let r=[];e instanceof _u&&r.push(e),r=r.concat(n),function(s){let o=s.filter(c=>c instanceof bI).length,a=s.filter(c=>c instanceof Rf).length;if(o>1||o>0&&a>0)throw new j(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Rf=class t extends CI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return uP(e._query,n),new Ts(e.firestore,e.converter,yv(e._query,n))}_parse(e){let n=tP(e.firestore);return function(s,o,a,c,l,d,p){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new j(P.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){XR(p,d);let _=[];for(let E of p)_.push(JR(c,s,E));g={arrayValue:{values:_}}}else g=JR(c,s,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||XR(p,d),g=uG(a,o,p,d==="in"||d==="not-in");return ht.create(l,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function cP(t,e,n){let r=e,i=zI("where",t);return Rf._create(i,r,n)}var bI=class t extends _u{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Un.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)uP(o,c),o=yv(o,c)}(e._query,n),new Ts(e.firestore,e.converter,yv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function JR(t,e,n){if(typeof(n=fe(n))=="string"){if(n==="")throw new j(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lN(e)&&n.indexOf("/")!==-1)throw new j(P.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(He.fromString(n));if(!z.isDocumentKey(r))throw new j(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return TR(t,new z(r))}if(n instanceof Zt)return TR(t,n._key);throw new j(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vf(n)}.`)}function XR(t,e){if(!Array.isArray(t)||t.length===0)throw new j(P.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uP(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new j(P.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new j(P.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var DI=class{convertValue(e,n="none"){switch(ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ii(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return ia(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Be(o.doubleValue));return new mu(s)}convertGeoPoint(e){return new gu(Be(e.latitude),Be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=RI(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ou(e));default:return null}}convertTimestamp(e){let n=xr(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=He.fromString(e);Se(NN(r));let i=new sf(r.get(1),r.get(3)),s=new z(r.popFirst(5));return i.isEqual(n)||Mr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function fG(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var gs=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Nf=class extends Af{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new qo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(zI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},qo=class extends Nf{data(e={}){return super.data(e)}},Pf=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new gs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new qo(this._firestore,this._userDataWriter,r.key,r,new gs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new j(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new qo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new gs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new qo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new gs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:pG(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function pG(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}var yu=class extends DI{constructor(e){super(),this.firestore=e}convertBytes(e){return new fu(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,n)}};function lP(t){t=Pr(t,Ts);let e=Pr(t.firestore,Ti),n=HI(e),r=new yu(e);return oP(t._query),iG(n,t._query).then(i=>new Pf(e,r,t,i))}function dP(t,e,n){t=Pr(t,Zt);let r=Pr(t.firestore,Ti),i=fG(t.converter,e,n);return fP(r,[cG(tP(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,yi.none())])}function hP(t){return fP(Pr(t.firestore,Ti),[new cu(t._key,yi.none())])}function GI(t,...e){var n,r,i;t=fe(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||ZR(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(ZR(e[o])){let p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,d;if(t instanceof Zt)l=Pr(t.firestore,Ti),d=xI(t._key.path),c={next:p=>{e[o]&&e[o](gG(l,t,p))},error:e[o+1],complete:e[o+2]};else{let p=Pr(t,Ts);l=Pr(p.firestore,Ti),d=p._query;let g=new yu(l);c={next:_=>{e[o]&&e[o](new Pf(l,g,p,_))},error:e[o+1],complete:e[o+2]},oP(t._query)}return function(g,_,E,R){let A=new Tf(R),x=new If(_,A,E);return g.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return UN(yield vI(g),x)})),()=>{A.Za(),g.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return jN(yield vI(g),x)}))}}(HI(l),d,a,c)}function fP(t,e){return function(r,i){let s=new ir;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return Wz(yield rG(r),i,s)})),s.promise}(HI(t),e)}function gG(t,e,n){let r=n.docs.get(e._key),i=new yu(t);return new Nf(t,i,e._key,r,new gs(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){ra=i})(Gt),Xe(new Je("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Ti(new Jy(r.getProvider("auth-internal")),new nv(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new j(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sf(l.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),q(vR,"4.7.3",e),q(vR,"4.7.3","esm2017")})();var Uf=function(){return Uf=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Uf.apply(this,arguments)};var yG={includeMetadataChanges:!1};function pP(t,e){return e===void 0&&(e=yG),new ae(function(n){var r=GI(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function gP(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Uf(Uf({},r),(n={},n[e.idField]=t.id,n))}function mP(t){return pP(t,{includeMetadataChanges:!0}).pipe(Q(function(e){return e.docs}))}function _P(t,e){return e===void 0&&(e={}),mP(t).pipe(Q(function(n){return n.map(function(r){return gP(r,e)})}))}var bs=class{constructor(e){return e}},yP="firestore",WI=class{constructor(){return it(yP)}};var KI=new U("angularfire2.firestore-instances");function vG(t,e){let n=ut(yP,t,e);return n&&new bs(n)}function IG(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new bs(r)}}var wG={provide:WI,deps:[[new te,KI]]},EG={provide:bs,useFactory:vG,deps:[[new te,KI],Ue]};function vP(t,...e){return q("angularfire",Ve.full,"fst"),Oe([EG,wG,{provide:KI,useFactory:IG(t),multi:!0,deps:[Z,me,Ye,$e,[new te,Fn],[new te,Yt],...e]}])}var oa=we(_P,!0);var aa=we(ZN,!0);var IP=we(hP,!0);var jf=we(JN,!0);var QI=we(lP,!0);var wP=we(XN,!0);var EP=we(aP,!0);var YI=we(dP,!0);var TP=we(cP,!0);var CP="@firebase/database",bP="1.0.8";var Kw="";function TG(t){Kw=t}var iw=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),mt(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:hl(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var sw=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return zn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var rM=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new iw(e)}}catch{}return new sw},Ss=rM("localStorage"),ow=rM("sessionStorage");var da=new Gn("@firebase/database"),CG=function(){let t=1;return function(){return t++}}(),iM=function(t){let e=dC(t),n=new cC;n.update(e);let r=n.digest();return JT.encodeByteArray(r)},Ou=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Ou.apply(null,r):typeof r=="object"?e+=mt(r):e+=r,e+=" "}return e},As=null,DP=!0,bG=function(t,e){F(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(da.logLevel=At.VERBOSE,As=da.log.bind(da),e&&ow.set("logging_enabled",!0)):typeof t=="function"?As=t:(As=null,ow.remove("logging_enabled"))},Mt=function(...t){if(DP===!0&&(DP=!1,As===null&&ow.get("logging_enabled")===!0&&bG(!0)),As){let e=Ou.apply(null,t);As(e)}},Fu=function(t){return function(...e){Mt(t,...e)}},aw=function(...t){let e="FIREBASE INTERNAL ERROR: "+Ou(...t);da.error(e)},Lr=function(...t){let e=`FIREBASE FATAL ERROR: ${Ou(...t)}`;throw da.error(e),new Error(e)},hn=function(...t){let e="FIREBASE WARNING: "+Ou(...t);da.warn(e)},DG=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&hn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},sM=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},SG=function(t){if(Hn()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},fa="[MIN_NAME]",Rs="[MAX_NAME]",Ia=function(t,e){if(t===e)return 0;if(t===fa||e===Rs)return-1;if(e===fa||t===Rs)return 1;{let n=SP(t),r=SP(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},AG=function(t,e){return t===e?0:t<e?-1:1},Tu=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+mt(e))},Qw=function(t){if(typeof t!="object"||t===null)return mt(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=mt(e[r]),n+=":",n+=Qw(t[e[r]]);return n+="}",n},oM=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Cn(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var aM=function(t){F(!sM(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let d=l.join(""),p="";for(c=0;c<64;c+=8){let g=parseInt(d.substr(c,8),2).toString(16);g.length===1&&(g="0"+g),p=p+g}return p.toLowerCase()},RG=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},NG=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var PG=new RegExp("^-?(0*)\\d{1,10}$"),MG=-2147483648,xG=2147483647,SP=function(t){if(PG.test(t)){let e=Number(t);if(e>=MG&&e<=xG)return e}return null},Lu=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw hn("Exception was thrown by user callback.",n),e},Math.floor(0))}},kG=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Au=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var cw=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){hn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var uw=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Mt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',hn(e)}},Ru=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),$f="5",cM="v",uM="s",lM="r",dM="f",hM=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,fM="ls",pM="p",lw="ac",gM="websocket",mM="long_polling";var Hf=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ss.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ss.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function OG(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function _M(t,e,n){F(typeof e=="string","typeof type must == string"),F(typeof n=="object","typeof params must == object");let r;if(e===gM)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===mM)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);OG(t)&&(n.ns=t.namespace);let i=[];return Cn(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var dw=class{constructor(){this.counters_={}}incrementCounter(e,n=1){zn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return tC(this.counters_)}};var ZI={},JI={};function Yw(t){let e=t.toString();return ZI[e]||(ZI[e]=new dw),ZI[e]}function FG(t,e){let n=t.toString();return JI[n]||(JI[n]=e()),JI[n]}var hw=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Lu(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var AP="start",LG="close",VG="pLPCommand",UG="pRTLPCB",yM="id",vM="pw",IM="ser",jG="cb",BG="seg",$G="ts",HG="d",qG="dframe",wM=1870,EM=30,zG=wM-EM,GG=25e3,WG=3e4,fw=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Fu(e),this.stats_=Yw(n),this.urlFn=c=>(this.appCheckToken&&(c[lw]=this.appCheckToken),_M(n,mM,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new hw(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(WG)),SG(()=>{if(this.isClosed_)return;this.scriptTagHolder=new pw((...s)=>{let[o,a,c,l,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===AP)this.id=a,this.password=c;else if(o===LG)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[AP]="t",r[IM]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[jG]=this.scriptTagHolder.uniqueCallbackIdentifier),r[cM]=$f,this.transportSessionId&&(r[uM]=this.transportSessionId),this.lastSessionId&&(r[fM]=this.lastSessionId),this.applicationId&&(r[pM]=this.applicationId),this.appCheckToken&&(r[lw]=this.appCheckToken),typeof location<"u"&&location.hostname&&hM.test(location.hostname)&&(r[lM]=dM);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Hn()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!RG()&&!NG()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=mt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=XT(n),i=oM(r,zG);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Hn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[qG]="t",r[yM]=e,r[vM]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=mt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},pw=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Hn())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=CG(),window[VG+this.uniqueCallbackIdentifier]=e,window[UG+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Mt("frame writing exception"),a.stack&&Mt(a.stack),Mt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Mt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[yM]=this.myID,e[vM]=this.myPW,e[IM]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+EM+r.length<=wM;){let o=this.pendingSegs.shift();r=r+"&"+BG+i+"="+o.seg+"&"+$G+i+"="+o.ts+"&"+HG+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(GG)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){Hn()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Mt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var KG=16384,QG=45e3,qf=null;typeof MozWebSocket<"u"?qf=MozWebSocket:typeof WebSocket<"u"&&(qf=WebSocket);var Cu=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Fu(this.connId),this.stats_=Yw(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[cM]=$f,!Hn()&&typeof location<"u"&&location.hostname&&hM.test(location.hostname)&&(a[lM]=dM),r&&(a[uM]=r),i&&(a[fM]=i),s&&(a[lw]=s),o&&(a[pM]=o),_M(n,gM,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ss.set("previous_websocket_failure",!0);try{let i;if(Hn()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${$f}/${Kw}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new qf(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&qf!==null&&!t.forceDisallow_}static previouslyFailed(){return Ss.isInMemoryStorage||Ss.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ss.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=hl(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(F(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=mt(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=oM(r,KG);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(QG))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),YG=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[fw,Cu]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Cu&&Cu.isAvailable(),i=r&&!Cu.previouslyFailed();if(n.webSocketOnly&&(r||hn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Cu];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),ZG=6e4,JG=5e3,XG=10*1024,eW=100*1024,XI="t",RP="d",tW="s",NP="r",nW="e",PP="o",MP="a",xP="n",kP="p",rW="h",gw=class{constructor(e,n,r,i,s,o,a,c,l,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Fu("c:"+this.id+":"),this.transportManager_=new YG(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Au(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>eW?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>XG?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(XI in e){let n=e[XI];n===MP?this.upgradeIfSecondaryHealthy_():n===NP?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===PP&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Tu("t",e),r=Tu("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:kP,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:MP,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:xP,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Tu("t",e),r=Tu("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Tu(XI,e);if(RP in e){let r=e[RP];if(n===rW){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===xP){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===tW?this.onConnectionShutdown_(r):n===NP?this.onReset_(r):n===nW?aw("Server Error: "+r):n===PP?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):aw("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),$f!==r&&hn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Au(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(ZG))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Au(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(JG))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:kP,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ss.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var zf=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var Gf=class{constructor(e){this.allowedEvents_=e,this.listeners_={},F(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){F(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var Wf=class t extends Gf{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!$a()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return F(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var OP=32,FP=768,ke=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Re(){return new ke("")}function ve(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function bi(t){return t.pieces_.length-t.pieceNum_}function je(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ke(t.pieces_,e)}function TM(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function iW(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function CM(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function bM(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ke(e,0)}function yt(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ke)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ke(n,0)}function _e(t){return t.pieceNum_>=t.pieces_.length}function En(t,e){let n=ve(t),r=ve(e);if(n===null)return e;if(n===r)return En(je(t),je(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function DM(t,e){if(bi(t)!==bi(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Bn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(bi(t)>bi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var mw=class{constructor(e,n){this.errorPrefix_=n,this.parts_=CM(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Ka(this.parts_[r]);SM(this)}};function sW(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Ka(e),SM(t)}function oW(t){let e=t.parts_.pop();t.byteLength_-=Ka(e),t.parts_.length>0&&(t.byteLength_-=1)}function SM(t){if(t.byteLength_>FP)throw new Error(t.errorPrefix_+"has a key path longer than "+FP+" bytes ("+t.byteLength_+").");if(t.parts_.length>OP)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+OP+") or object contains a cycle "+Ds(t))}function Ds(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var _w=class t extends Gf{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return F(e==="visible","Unknown event type: "+e),[this.visible_]}};var bu=1e3,aW=60*5*1e3,LP=30*1e3,cW=1.3,uW=3e4,lW="server_kill",VP=3,Zw=(()=>{class t extends zf{constructor(n,r,i,s,o,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=Fu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=bu,this.maxReconnectDelay_=aW,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Hn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");_w.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Wf.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(mt(o)),F(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new jp,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),F(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),F(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,d=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(d,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&zn(n,"w")){let i=ki(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();hn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||aC(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=LP)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=oC(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),F(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+mt(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):aw("Unrecognized action received from server: "+mt(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){F(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=bu,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=bu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>uW&&(this.reconnectDelay_=bu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*cW)}this.onConnectStatus_(!1)}establishConnection_(){return y(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},d=function(g){F(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(g)};this.realtime_={close:l,sendRequest:d};let p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[g,_]=yield Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);a?Mt("getToken() completed but was canceled"):(Mt("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=_&&_.token,c=new gw(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,E=>{hn(E+" ("+this.repoInfo_.toString()+")"),this.interrupt(lW)},o))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&hn(g),l())}}})}interrupt(n){Mt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Mt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],za(this.interruptReasons_)&&(this.reconnectDelay_=bu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>Qw(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new ke(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){Mt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=VP&&(this.reconnectDelay_=LP,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Mt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=VP&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Hn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Kw.replace(/\./g,"-")]=1,$a()?n["framework.cordova"]=1:dl()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Wf.getInstance().currentlyOnline();return za(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),Ie=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var pa=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new Ie(fa,e),i=new Ie(fa,n);return this.compare(r,i)!==0}minPost(){return Ie.MIN}};var Bf,Kf=class extends pa{static get __EMPTY_NODE(){return Bf}static set __EMPTY_NODE(e){Bf=e}compare(e,n){return Ia(e.name,n.name)}isDefinedOn(e){throw Vs("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ie.MIN}maxPost(){return new Ie(Rs,Bf)}makePost(e,n){return F(typeof e=="string","KeyIndex indexValue must always be a string."),new Ie(e,Bf)}toString(){return".key"}},ha=new Kf;var ua=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},jn=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??Tn.EMPTY_NODE,this.right=o??Tn.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Tn.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Tn.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),yw=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new jn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Tn=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,jn.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,jn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ua(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ua(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ua(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ua(this.root_,null,this.comparator_,!0,e)}};Tn.EMPTY_NODE=new yw;function dW(t,e){return Ia(t.name,e.name)}function Jw(t,e){return Ia(t,e)}var vw;function hW(t){vw=t}var AM=function(t){return typeof t=="number"?"number:"+aM(t):"string:"+t},RM=function(t){if(t.isLeafNode()){let e=t.val();F(typeof e=="string"||typeof e=="number"||typeof e=="object"&&zn(e,".sv"),"Priority must be a string or number.")}else F(t===vw||t.isEmpty(),"priority of unexpected type.");F(t===vw||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var UP,ga=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,F(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),RM(this.priorityNode_)}static set __childrenNodeConstructor(n){UP=n}static get __childrenNodeConstructor(){return UP}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return _e(n)?this:ve(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=ve(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(F(i!==".priority"||bi(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(je(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+AM(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=aM(this.value_):n+=this.value_,this.lazyHash_=iM(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(F(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return F(s>=0,"Unknown leaf type: "+r),F(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),NM,PM;function fW(t){NM=t}function pW(t){PM=t}var Iw=class extends pa{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Ia(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ie.MIN}maxPost(){return new Ie(Rs,new ga("[PRIORITY-POST]",PM))}makePost(e,n){let r=NM(e);return new Ie(n,new ga("[PRIORITY-POST]",r))}toString(){return".priority"}},kt=new Iw;var gW=Math.log(2),ww=class{constructor(e){let n=s=>parseInt(Math.log(s)/gW,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Qf=function(t,e,n,r){t.sort(e);let i=function(c,l){let d=l-c,p,g;if(d===0)return null;if(d===1)return p=t[c],g=n?n(p):p,new jn(g,p.node,jn.BLACK,null,null);{let _=parseInt(d/2,10)+c,E=i(c,_),R=i(_+1,l);return p=t[_],g=n?n(p):p,new jn(g,p.node,jn.BLACK,E,R)}},s=function(c){let l=null,d=null,p=t.length,g=function(E,R){let A=p-E,x=p;p-=E;let L=i(A+1,x),$=t[A],G=n?n($):$;_(new jn(G,$.node,R,null,L))},_=function(E){l?(l.left=E,l=E):(d=E,l=E)};for(let E=0;E<c.count;++E){let R=c.nextBitIsOne(),A=Math.pow(2,c.count-(E+1));R?g(A,jn.BLACK):(g(A,jn.BLACK),g(A,jn.RED))}return d},o=new ww(t.length),a=s(o);return new Tn(r||e,a)};var ew,ca={},ma=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return F(ca&&kt,"ChildrenNode.ts has not been loaded"),ew=ew||new t({".priority":ca},{".priority":kt}),ew}get(e){let n=ki(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Tn?n:null}hasIndex(e){return zn(this.indexSet_,e.toString())}addIndex(e,n){F(e!==ha,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(Ie.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Qf(r,e.getCompare()):a=ca;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new t(d,l)}addToIndexes(e,n){let r=Ga(this.indexes_,(i,s)=>{let o=ki(this.indexSet_,s);if(F(o,"Missing index implementation for "+s),i===ca)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(Ie.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Qf(a,o.getCompare())}else return ca;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new Ie(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Ga(this.indexes_,i=>{if(i===ca)return i;{let s=n.get(e.name);return s?i.remove(new Ie(e.name,s)):i}});return new t(r,this.indexSet_)}};var Du,qe=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&RM(this.priorityNode_),this.children_.isEmpty()&&F(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Du||(Du=new t(new Tn(Jw),null,ma.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Du}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Du:r}}getChild(n){let r=ve(n);return r===null?this:this.getImmediateChild(r).getChild(je(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(F(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new Ie(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Du:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=ve(n);if(i===null)return r;{F(ve(n)!==".priority"||bi(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(je(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(kt,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+AM(this.getPriority().val())+":"),this.forEachChild(kt,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":iM(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new Ie(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new Ie(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new Ie(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,Ie.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,Ie.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Vu?-1:0}withIndex(n){if(n===ha||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===ha||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(kt),s=r.getIterator(kt),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===ha?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),Ew=class extends qe{constructor(){super(new Tn(Jw),qe.EMPTY_NODE,ma.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return qe.EMPTY_NODE}isEmpty(){return!1}},Vu=new Ew;Object.defineProperties(Ie,{MIN:{value:new Ie(fa,qe.EMPTY_NODE)},MAX:{value:new Ie(Rs,Vu)}});Kf.__EMPTY_NODE=qe.EMPTY_NODE;ga.__childrenNodeConstructor=qe;hW(Vu);pW(Vu);var mW=!0;function xt(t,e=null){if(t===null)return qe.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),F(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new ga(n,xt(e))}if(!(t instanceof Array)&&mW){let n=[],r=!1;if(Cn(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=xt(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Ie(o,c)))}}),n.length===0)return qe.EMPTY_NODE;let s=Qf(n,dW,o=>o.name,Jw);if(r){let o=Qf(n,kt.getCompare());return new qe(s,xt(e),new ma({".priority":o},{".priority":kt}))}else return new qe(s,xt(e),ma.Default)}else{let n=qe.EMPTY_NODE;return Cn(t,(r,i)=>{if(zn(t,r)&&r.substring(0,1)!=="."){let s=xt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(xt(e))}}fW(xt);var Tw=class extends pa{constructor(e){super(),this.indexPath_=e,F(!_e(e)&&ve(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Ia(e.name,n.name):s}makePost(e,n){let r=xt(e),i=qe.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ie(n,i)}maxPost(){let e=qe.EMPTY_NODE.updateChild(this.indexPath_,Vu);return new Ie(Rs,e)}toString(){return CM(this.indexPath_,0).join("/")}};var Cw=class extends pa{compare(e,n){let r=e.node.compareTo(n.node);return r===0?Ia(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ie.MIN}maxPost(){return Ie.MAX}makePost(e,n){let r=xt(e);return new Ie(n,r)}toString(){return".value"}},_W=new Cw;function yW(t){return{type:"value",snapshotNode:t}}function vW(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function IW(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function jP(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function wW(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var bw=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=kt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return F(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return F(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fa}hasEnd(){return this.endSet_}getIndexEndValue(){return F(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return F(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Rs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return F(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===kt}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function BP(t){let e={};if(t.isDefault())return e;let n;if(t.index_===kt?n="$priority":t.index_===_W?n="$value":t.index_===ha?n="$key":(F(t.index_ instanceof Tw,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=mt(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=mt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+mt(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=mt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+mt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function $P(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==kt&&(e.i=t.index_.toString()),e}var Dw=class t extends zf{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Fu("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(F(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=BP(e._queryParams);this.restRequest_(s+".json",c,(l,d)=>{let p=d;if(l===404&&(p=null,l=null),l===null&&this.onDataUpdate_(s,p,!1,r),ki(this.listens_,o)===a){let g;l?l===401?g="permission_denied":g="rest_error:"+l:g="ok",i(g,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=BP(e._queryParams),r=e._path.toString(),i=new jp;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Oi(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=hl(a.responseText)}catch{hn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&hn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var Sw=class{constructor(){this.rootNode_=qe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function Yf(){return{value:null,children:new Map}}function MM(t,e,n){if(_e(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=ve(e);t.children.has(r)||t.children.set(r,Yf());let i=t.children.get(r);e=je(e),MM(i,e,n)}}function Aw(t,e,n){t.value!==null?n(e,t.value):EW(t,(r,i)=>{let s=new ke(e.toString()+"/"+r);Aw(i,s,n)})}function EW(t,e){t.children.forEach((n,r)=>{e(r,n)})}var Rw=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Cn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var HP=10*1e3,TW=30*1e3,CW=5*60*1e3,Nw=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Rw(e);let r=HP+(TW-HP)*Math.random();Au(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;Cn(e,(i,s)=>{s>0&&zn(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Au(this.reportStats_.bind(this),Math.floor(Math.random()*2*CW))}};var Fr=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Fr||{});function xM(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function kM(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function OM(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Pw=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Fr.ACK_USER_WRITE,this.source=xM()}operationForChild(e){if(_e(this.path)){if(this.affectedTree.value!=null)return F(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new ke(e));return new t(Re(),n,this.revert)}}else return F(ve(this.path)===e,"operationForChild called for unrelated child."),new t(je(this.path),this.affectedTree,this.revert)}};var _a=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Fr.OVERWRITE}operationForChild(e){return _e(this.path)?new t(this.source,Re(),this.snap.getImmediateChild(e)):new t(this.source,je(this.path),this.snap)}};var Zf=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Fr.MERGE}operationForChild(e){if(_e(this.path)){let n=this.children.subtree(new ke(e));return n.isEmpty()?null:n.value?new _a(this.source,Re(),n.value):new t(this.source,Re(),n)}else return F(ve(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,je(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Mu=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(_e(e))return this.isFullyInitialized()&&!this.filtered_;let n=ve(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function bW(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(wW(o.childName,o.snapshotNode))}),Su(t,i,"child_removed",e,r,n),Su(t,i,"child_added",e,r,n),Su(t,i,"child_moved",s,r,n),Su(t,i,"child_changed",e,r,n),Su(t,i,"value",e,r,n),i}function Su(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>SW(t,a,c)),o.forEach(a=>{let c=DW(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function DW(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function SW(t,e,n){if(e.childName==null||n.childName==null)throw Vs("Should only compare child_ events.");let r=new Ie(e.childName,e.snapshotNode),i=new Ie(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function FM(t,e){return{eventCache:t,serverCache:e}}function Nu(t,e,n,r){return FM(new Mu(e,n,r),t.serverCache)}function LM(t,e,n,r){return FM(t.eventCache,new Mu(e,n,r))}function Mw(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ns(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var tw,AW=()=>(tw||(tw=new Tn(AG)),tw),Jt=class t{constructor(e,n=AW()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return Cn(e,(r,i)=>{n=n.set(new ke(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Re(),value:this.value};if(_e(e))return null;{let r=ve(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(je(e),n);return s!=null?{path:yt(new ke(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(_e(e))return this;{let n=ve(e),r=this.children.get(n);return r!==null?r.subtree(je(e)):new t(null)}}set(e,n){if(_e(e))return new t(n,this.children);{let r=ve(e),s=(this.children.get(r)||new t(null)).set(je(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(_e(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=ve(e),r=this.children.get(n);if(r){let i=r.remove(je(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(_e(e))return this.value;{let n=ve(e),r=this.children.get(n);return r?r.get(je(e)):null}}setTree(e,n){if(_e(e))return n;{let r=ve(e),s=(this.children.get(r)||new t(null)).setTree(je(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(Re(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(yt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Re(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(_e(e))return null;{let s=ve(e),o=this.children.get(s);return o?o.findOnPath_(je(e),yt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Re(),n)}foreachOnPath_(e,n,r){if(_e(e))return this;{this.value&&r(n,this.value);let i=ve(e),s=this.children.get(i);return s?s.foreachOnPath_(je(e),yt(n,i),r):new t(null)}}foreach(e){this.foreach_(Re(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(yt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var $n=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Jt(null))}};function Pu(t,e,n){if(_e(e))return new $n(new Jt(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=En(i,e);return s=s.updateChild(o,n),new $n(t.writeTree_.set(i,s))}else{let i=new Jt(n),s=t.writeTree_.setTree(e,i);return new $n(s)}}}function qP(t,e,n){let r=t;return Cn(n,(i,s)=>{r=Pu(r,yt(e,i),s)}),r}function zP(t,e){if(_e(e))return $n.empty();{let n=t.writeTree_.setTree(e,new Jt(null));return new $n(n)}}function xw(t,e){return Ps(t,e)!=null}function Ps(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(En(n.path,e)):null}function GP(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(kt,(r,i)=>{e.push(new Ie(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Ie(r,i.value))}),e}function Ci(t,e){if(_e(e))return t;{let n=Ps(t,e);return n!=null?new $n(new Jt(n)):new $n(t.writeTree_.subtree(e))}}function kw(t){return t.writeTree_.isEmpty()}function ya(t,e){return VM(Re(),t.writeTree_,e)}function VM(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(F(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=VM(yt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(yt(t,".priority"),r)),n}}function UM(t,e){return qM(e,t)}function RW(t,e,n,r,i){F(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Pu(t.visibleWrites,e,n)),t.lastWriteId=r}function NW(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function PW(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);F(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&MW(a,r.path)?i=!1:Bn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return xW(t),!0;if(r.snap)t.visibleWrites=zP(t.visibleWrites,r.path);else{let a=r.children;Cn(a,c=>{t.visibleWrites=zP(t.visibleWrites,yt(r.path,c))})}return!0}else return!1}function MW(t,e){if(t.snap)return Bn(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Bn(yt(t.path,n),e))return!0;return!1}function xW(t){t.visibleWrites=jM(t.allWrites,kW,Re()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function kW(t){return t.visible}function jM(t,e,n){let r=$n.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)Bn(n,o)?(a=En(n,o),r=Pu(r,a,s.snap)):Bn(o,n)&&(a=En(o,n),r=Pu(r,Re(),s.snap.getChild(a)));else if(s.children){if(Bn(n,o))a=En(n,o),r=qP(r,a,s.children);else if(Bn(o,n))if(a=En(o,n),_e(a))r=qP(r,Re(),s.children);else{let c=ki(s.children,ve(a));if(c){let l=c.getChild(je(a));r=Pu(r,Re(),l)}}}else throw Vs("WriteRecord should have .snap or .children")}}return r}function BM(t,e,n,r,i){if(!r&&!i){let s=Ps(t.visibleWrites,e);if(s!=null)return s;{let o=Ci(t.visibleWrites,e);if(kw(o))return n;if(n==null&&!xw(o,Re()))return null;{let a=n||qe.EMPTY_NODE;return ya(o,a)}}}else{let s=Ci(t.visibleWrites,e);if(!i&&kw(s))return n;if(!i&&n==null&&!xw(s,Re()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Bn(l.path,e)||Bn(e,l.path))},a=jM(t.allWrites,o,e),c=n||qe.EMPTY_NODE;return ya(a,c)}}}function OW(t,e,n){let r=qe.EMPTY_NODE,i=Ps(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(kt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=Ci(t.visibleWrites,e);return n.forEachChild(kt,(o,a)=>{let c=ya(Ci(s,new ke(o)),a);r=r.updateImmediateChild(o,c)}),GP(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=Ci(t.visibleWrites,e);return GP(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function FW(t,e,n,r,i){F(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=yt(e,n);if(xw(t.visibleWrites,s))return null;{let o=Ci(t.visibleWrites,s);return kw(o)?i.getChild(n):ya(o,i.getChild(n))}}function LW(t,e,n,r){let i=yt(e,n),s=Ps(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=Ci(t.visibleWrites,i);return ya(o,r.getNode().getImmediateChild(n))}else return null}function VW(t,e){return Ps(t.visibleWrites,e)}function UW(t,e,n,r,i,s,o){let a,c=Ci(t.visibleWrites,e),l=Ps(c,Re());if(l!=null)a=l;else if(n!=null)a=ya(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let d=[],p=o.getCompare(),g=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),_=g.getNext();for(;_&&d.length<i;)p(_,r)!==0&&d.push(_),_=g.getNext();return d}else return[]}function jW(){return{visibleWrites:$n.empty(),allWrites:[],lastWriteId:-1}}function Ow(t,e,n,r){return BM(t.writeTree,t.treePath,e,n,r)}function $M(t,e){return OW(t.writeTree,t.treePath,e)}function WP(t,e,n,r){return FW(t.writeTree,t.treePath,e,n,r)}function Jf(t,e){return VW(t.writeTree,yt(t.treePath,e))}function BW(t,e,n,r,i,s){return UW(t.writeTree,t.treePath,e,n,r,i,s)}function Xw(t,e,n){return LW(t.writeTree,t.treePath,e,n)}function HM(t,e){return qM(yt(t.treePath,e),t.writeTree)}function qM(t,e){return{treePath:t,writeTree:e}}var Fw=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;F(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),F(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,jP(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,IW(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,vW(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,jP(r,e.snapshotNode,i.oldSnap));else throw Vs("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var Lw=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},zM=new Lw,xu=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Mu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Xw(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ns(this.viewCache_),s=BW(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function $W(t,e){F(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),F(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function HW(t,e,n,r,i){let s=new Fw,o,a;if(n.type===Fr.OVERWRITE){let l=n;l.source.fromUser?o=Vw(t,e,l.path,l.snap,r,i,s):(F(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!_e(l.path),o=Xf(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===Fr.MERGE){let l=n;l.source.fromUser?o=zW(t,e,l.path,l.children,r,i,s):(F(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=Uw(t,e,l.path,l.children,r,i,a,s))}else if(n.type===Fr.ACK_USER_WRITE){let l=n;l.revert?o=KW(t,e,l.path,r,i,s):o=GW(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===Fr.LISTEN_COMPLETE)o=WW(t,e,n.path,r,s);else throw Vs("Unknown operation type: "+n.type);let c=s.getChanges();return qW(e,o,c),{viewCache:o,changes:c}}function qW(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Mw(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(yW(Mw(e)))}}function GM(t,e,n,r,i,s){let o=e.eventCache;if(Jf(r,n)!=null)return e;{let a,c;if(_e(n))if(F(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=Ns(e),d=l instanceof qe?l:qe.EMPTY_NODE,p=$M(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),p,s)}else{let l=Ow(r,Ns(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=ve(n);if(l===".priority"){F(bi(n)===1,"Can't have a priority with additional path components");let d=o.getNode();c=e.serverCache.getNode();let p=WP(r,n,d,c);p!=null?a=t.filter.updatePriority(d,p):a=o.getNode()}else{let d=je(n),p;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let g=WP(r,n,o.getNode(),c);g!=null?p=o.getNode().getImmediateChild(l).updateChild(d,g):p=o.getNode().getImmediateChild(l)}else p=Xw(r,l,e.serverCache);p!=null?a=t.filter.updateChild(o.getNode(),l,p,d,i,s):a=o.getNode()}}return Nu(e,a,o.isFullyInitialized()||_e(n),t.filter.filtersNodes())}}function Xf(t,e,n,r,i,s,o,a){let c=e.serverCache,l,d=o?t.filter:t.filter.getIndexedFilter();if(_e(n))l=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){let _=c.getNode().updateChild(n,r);l=d.updateFullNode(c.getNode(),_,null)}else{let _=ve(n);if(!c.isCompleteForPath(n)&&bi(n)>1)return e;let E=je(n),A=c.getNode().getImmediateChild(_).updateChild(E,r);_===".priority"?l=d.updatePriority(c.getNode(),A):l=d.updateChild(c.getNode(),_,A,E,zM,null)}let p=LM(e,l,c.isFullyInitialized()||_e(n),d.filtersNodes()),g=new xu(i,p,s);return GM(t,p,n,i,g,a)}function Vw(t,e,n,r,i,s,o){let a=e.eventCache,c,l,d=new xu(i,e,s);if(_e(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Nu(e,l,!0,t.filter.filtersNodes());else{let p=ve(n);if(p===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Nu(e,l,a.isFullyInitialized(),a.isFiltered());else{let g=je(n),_=a.getNode().getImmediateChild(p),E;if(_e(g))E=r;else{let R=d.getCompleteChild(p);R!=null?TM(g)===".priority"&&R.getChild(bM(g)).isEmpty()?E=R:E=R.updateChild(g,r):E=qe.EMPTY_NODE}if(_.equals(E))c=e;else{let R=t.filter.updateChild(a.getNode(),p,E,g,d,o);c=Nu(e,R,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function KP(t,e){return t.eventCache.isCompleteForChild(e)}function zW(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{let d=yt(n,c);KP(e,ve(d))&&(a=Vw(t,a,d,l,i,s,o))}),r.foreach((c,l)=>{let d=yt(n,c);KP(e,ve(d))||(a=Vw(t,a,d,l,i,s,o))}),a}function QP(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Uw(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;_e(n)?l=r:l=new Jt(null).setTree(n,r);let d=e.serverCache.getNode();return l.children.inorderTraversal((p,g)=>{if(d.hasChild(p)){let _=e.serverCache.getNode().getImmediateChild(p),E=QP(t,_,g);c=Xf(t,c,new ke(p),E,i,s,o,a)}}),l.children.inorderTraversal((p,g)=>{let _=!e.serverCache.isCompleteForChild(p)&&g.value===null;if(!d.hasChild(p)&&!_){let E=e.serverCache.getNode().getImmediateChild(p),R=QP(t,E,g);c=Xf(t,c,new ke(p),R,i,s,o,a)}}),c}function GW(t,e,n,r,i,s,o){if(Jf(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(_e(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Xf(t,e,n,c.getNode().getChild(n),i,s,a,o);if(_e(n)){let l=new Jt(null);return c.getNode().forEachChild(ha,(d,p)=>{l=l.set(new ke(d),p)}),Uw(t,e,n,l,i,s,a,o)}else return e}else{let l=new Jt(null);return r.foreach((d,p)=>{let g=yt(n,d);c.isCompleteForPath(g)&&(l=l.set(d,c.getNode().getChild(g)))}),Uw(t,e,n,l,i,s,a,o)}}function WW(t,e,n,r,i){let s=e.serverCache,o=LM(e,s.getNode(),s.isFullyInitialized()||_e(n),s.isFiltered());return GM(t,o,n,r,zM,i)}function KW(t,e,n,r,i,s){let o;if(Jf(r,n)!=null)return e;{let a=new xu(r,e,i),c=e.eventCache.getNode(),l;if(_e(n)||ve(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Ow(r,Ns(e));else{let p=e.serverCache.getNode();F(p instanceof qe,"serverChildren would be complete if leaf node"),d=$M(r,p)}d=d,l=t.filter.updateFullNode(c,d,s)}else{let d=ve(n),p=Xw(r,d,e.serverCache);p==null&&e.serverCache.isCompleteForChild(d)&&(p=c.getImmediateChild(d)),p!=null?l=t.filter.updateChild(c,d,p,je(n),a,s):e.eventCache.getNode().hasChild(d)?l=t.filter.updateChild(c,d,qe.EMPTY_NODE,je(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Ow(r,Ns(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||Jf(r,Re())!=null,Nu(e,l,o,t.filter.filtersNodes())}}function QW(t,e){let n=Ns(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!_e(e)&&!n.getImmediateChild(ve(e)).isEmpty())?n.getChild(e):null}function YP(t,e,n,r){e.type===Fr.MERGE&&e.source.queryId!==null&&(F(Ns(t.viewCache_),"We should always have a full cache before handling merges"),F(Mw(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=HW(t.processor_,i,e,n,r);return $W(t.processor_,s.viewCache),F(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,YW(t,s.changes,s.viewCache.eventCache.getNode(),null)}function YW(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return bW(t.eventGenerator_,e,n,i)}var ZP;function ZW(t){F(!ZP,"__referenceConstructor has already been defined"),ZP=t}function eE(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return F(s!=null,"SyncTree gave us an op for an invalid query."),YP(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(YP(o,e,n,r));return s}}function tE(t,e){let n=null;for(let r of t.views.values())n=n||QW(r,e);return n}var JP;function JW(t){F(!JP,"__referenceConstructor has already been defined"),JP=t}var ep=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Jt(null),this.pendingWriteTree_=jW(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function XW(t,e,n,r,i){return RW(t.pendingWriteTree_,e,n,r,i),i?np(t,new _a(xM(),e,n)):[]}function la(t,e,n=!1){let r=NW(t.pendingWriteTree_,e);if(PW(t.pendingWriteTree_,e)){let s=new Jt(null);return r.snap!=null?s=s.set(Re(),!0):Cn(r.children,o=>{s=s.set(new ke(o),!0)}),np(t,new Pw(r.path,s,n))}else return[]}function tp(t,e,n){return np(t,new _a(kM(),e,n))}function e4(t,e,n){let r=Jt.fromObject(n);return np(t,new Zf(kM(),e,r))}function t4(t,e,n,r){let i=YM(t,r);if(i!=null){let s=ZM(i),o=s.path,a=s.queryId,c=En(o,e),l=new _a(OM(a),c,n);return JM(t,o,l)}else return[]}function n4(t,e,n,r){let i=YM(t,r);if(i){let s=ZM(i),o=s.path,a=s.queryId,c=En(o,e),l=Jt.fromObject(n),d=new Zf(OM(a),c,l);return JM(t,o,d)}else return[]}function WM(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=En(o,e),l=tE(a,c);if(l)return l});return BM(i,e,s,n,!0)}function np(t,e){return KM(e,t.syncPointTree_,null,UM(t.pendingWriteTree_,Re()))}function KM(t,e,n,r){if(_e(t.path))return QM(t,e,n,r);{let i=e.get(Re());n==null&&i!=null&&(n=tE(i,Re()));let s=[],o=ve(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let l=n?n.getImmediateChild(o):null,d=HM(r,o);s=s.concat(KM(a,c,l,d))}return i&&(s=s.concat(eE(i,t,r,n))),s}}function QM(t,e,n,r){let i=e.get(Re());n==null&&i!=null&&(n=tE(i,Re()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,l=HM(r,o),d=t.operationForChild(o);d&&(s=s.concat(QM(d,a,c,l)))}),i&&(s=s.concat(eE(i,t,r,n))),s}function YM(t,e){return t.tagToQueryMap.get(e)}function ZM(t){let e=t.indexOf("$");return F(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ke(t.substr(0,e))}}function JM(t,e,n){let r=t.syncPointTree_.get(e);F(r,"Missing sync point for query tag that we're tracking");let i=UM(t.pendingWriteTree_,e);return eE(r,n,i,null)}var jw=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},Bw=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=yt(this.path_,e);return new t(this.syncTree_,n)}node(){return WM(this.syncTree_,this.path_)}},r4=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},XP=function(t,e,n){if(!t||typeof t!="object")return t;if(F(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return i4(t[".sv"],e,n);if(typeof t[".sv"]=="object")return s4(t[".sv"],e);F(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},i4=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:F(!1,"Unexpected server value: "+t)}},s4=function(t,e,n){t.hasOwnProperty("increment")||F(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&F(!1,"Unexpected increment value: "+r);let i=e.node();if(F(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},o4=function(t,e,n,r){return nE(e,new Bw(n,t),r)},a4=function(t,e,n){return nE(t,new jw(e),n)};function nE(t,e,n){let r=t.getPriority().val(),i=XP(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=XP(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new ga(a,xt(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new ga(i))),o.forEachChild(kt,(a,c)=>{let l=nE(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var ku=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function rE(t,e){let n=e instanceof ke?e:new ke(e),r=t,i=ve(n);for(;i!==null;){let s=ki(r.node.children,i)||{children:{},childCount:0};r=new ku(i,r,s),n=je(n),i=ve(n)}return r}function wa(t){return t.node.value}function XM(t,e){t.node.value=e,$w(t)}function ex(t){return t.node.childCount>0}function c4(t){return wa(t)===void 0&&!ex(t)}function rp(t,e){Cn(t.node.children,(n,r)=>{e(new ku(n,t,r))})}function tx(t,e,n,r){n&&!r&&e(t),rp(t,i=>{tx(i,e,!0,r)}),n&&r&&e(t)}function u4(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Uu(t){return new ke(t.parent===null?t.name:Uu(t.parent)+"/"+t.name)}function $w(t){t.parent!==null&&l4(t.parent,t.name,t)}function l4(t,e,n){let r=c4(n),i=zn(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,$w(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,$w(t))}var d4=/[\[\].#$\/\u0000-\u001F\u007F]/,h4=/[\[\].#$\u0000-\u001F\u007F]/,nw=10*1024*1024,nx=function(t){return typeof t=="string"&&t.length!==0&&!d4.test(t)},f4=function(t){return typeof t=="string"&&t.length!==0&&!h4.test(t)},p4=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),f4(t)};var rx=function(t,e,n){let r=n instanceof ke?new mw(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ds(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ds(r)+" with contents = "+e.toString());if(sM(e))throw new Error(t+"contains "+e.toString()+" "+Ds(r));if(typeof e=="string"&&e.length>nw/3&&Ka(e)>nw)throw new Error(t+"contains a string greater than "+nw+" utf8 bytes "+Ds(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Cn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!nx(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ds(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);sW(r,o),rx(t,a,r),oW(r)}),i&&s)throw new Error(t+' contains ".value" child '+Ds(r)+" in addition to actual children.")}};var g4=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!nx(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!p4(n))throw new Error(lC(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Hw=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function m4(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!DM(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Ms(t,e,n){m4(t,n),_4(t,r=>Bn(r,e)||Bn(e,r))}function _4(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(y4(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function y4(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();As&&Mt("event: "+n.toString()),Lu(r)}}}var v4="repo_interrupt",I4=25,qw=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Hw,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Yf(),this.transactionQueueTree_=new ku,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function w4(t,e,n){if(t.stats_=Yw(t.repoInfo_),t.forceRestClient_||kG())t.server_=new Dw(t.repoInfo_,(r,i,s,o)=>{eM(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>tM(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{mt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Zw(t.repoInfo_,e,(r,i,s,o)=>{eM(t,r,i,s,o)},r=>{tM(t,r)},r=>{T4(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=FG(t.repoInfo_,()=>new Nw(t.stats_,t.server_)),t.infoData_=new Sw,t.infoSyncTree_=new ep({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=tp(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),iE(t,"connected",!1),t.serverSyncTree_=new ep({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);Ms(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function E4(t){let n=t.infoData_.getNode(new ke(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ix(t){return r4({timestamp:E4(t)})}function eM(t,e,n,r,i){t.dataUpdateCount++;let s=new ke(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=Ga(n,l=>xt(l));o=n4(t.serverSyncTree_,s,c,i)}else{let c=xt(n);o=t4(t.serverSyncTree_,s,c,i)}else if(r){let c=Ga(n,l=>xt(l));o=e4(t.serverSyncTree_,s,c)}else{let c=xt(n);o=tp(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=oE(t,s)),Ms(t.eventQueue_,a,o)}function tM(t,e){iE(t,"connected",e),e===!1&&b4(t)}function T4(t,e){Cn(e,(n,r)=>{iE(t,n,r)})}function iE(t,e,n){let r=new ke("/.info/"+e),i=xt(n);t.infoData_.updateSnapshot(r,i);let s=tp(t.infoSyncTree_,r,i);Ms(t.eventQueue_,r,s)}function C4(t){return t.nextWriteId_++}function b4(t){sx(t,"onDisconnectEvents");let e=ix(t),n=Yf();Aw(t.onDisconnect_,Re(),(i,s)=>{let o=o4(i,s,t.serverSyncTree_,e);MM(n,i,o)});let r=[];Aw(n,Re(),(i,s)=>{r=r.concat(tp(t.serverSyncTree_,i,s));let o=R4(t,i);oE(t,o)}),t.onDisconnect_=Yf(),Ms(t.eventQueue_,Re(),r)}function D4(t){t.persistentConnection_&&t.persistentConnection_.interrupt(v4)}function sx(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Mt(n,...e)}function ox(t,e,n){return WM(t.serverSyncTree_,e,n)||qe.EMPTY_NODE}function sE(t,e=t.transactionQueueTree_){if(e||ip(t,e),wa(e)){let n=cx(t,e);F(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&S4(t,Uu(e),n)}else ex(e)&&rp(e,n=>{sE(t,n)})}function S4(t,e,n){let r=n.map(l=>l.currentWriteId),i=ox(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let d=n[l];F(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let p=En(e,d.path);s=s.updateChild(p,d.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{sx(t,"transaction put response",{path:c.toString(),status:l});let d=[];if(l==="ok"){let p=[];for(let g=0;g<n.length;g++)n[g].status=2,d=d.concat(la(t.serverSyncTree_,n[g].currentWriteId)),n[g].onComplete&&p.push(()=>n[g].onComplete(null,!0,n[g].currentOutputSnapshotResolved)),n[g].unwatcher();ip(t,rE(t.transactionQueueTree_,e)),sE(t,t.transactionQueueTree_),Ms(t.eventQueue_,e,d);for(let g=0;g<p.length;g++)Lu(p[g])}else{if(l==="datastale")for(let p=0;p<n.length;p++)n[p].status===3?n[p].status=4:n[p].status=0;else{hn("transaction at "+c.toString()+" failed: "+l);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=l}oE(t,e)}},o)}function oE(t,e){let n=ax(t,e),r=Uu(n),i=cx(t,n);return A4(t,i,r),r}function A4(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=En(n,c.path),d=!1,p;if(F(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,p=c.abortReason,i=i.concat(la(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=I4)d=!0,p="maxretry",i=i.concat(la(t.serverSyncTree_,c.currentWriteId,!0));else{let g=ox(t,c.path,o);c.currentInputSnapshot=g;let _=e[a].update(g.val());if(_!==void 0){rx("transaction failed: Data returned ",_,c.path);let E=xt(_);typeof _=="object"&&_!=null&&zn(_,".priority")||(E=E.updatePriority(g.getPriority()));let A=c.currentWriteId,x=ix(t),L=a4(E,g,x);c.currentOutputSnapshotRaw=E,c.currentOutputSnapshotResolved=L,c.currentWriteId=C4(t),o.splice(o.indexOf(A),1),i=i.concat(XW(t.serverSyncTree_,c.path,L,c.currentWriteId,c.applyLocally)),i=i.concat(la(t.serverSyncTree_,A,!0))}else d=!0,p="nodata",i=i.concat(la(t.serverSyncTree_,c.currentWriteId,!0))}Ms(t.eventQueue_,n,i),i=[],d&&(e[a].status=2,function(g){setTimeout(g,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(p==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(p),!1,null))))}ip(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Lu(r[a]);sE(t,t.transactionQueueTree_)}function ax(t,e){let n,r=t.transactionQueueTree_;for(n=ve(e);n!==null&&wa(r)===void 0;)r=rE(r,n),e=je(e),n=ve(e);return r}function cx(t,e){let n=[];return ux(t,e,n),n.sort((r,i)=>r.order-i.order),n}function ux(t,e,n){let r=wa(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);rp(e,i=>{ux(t,i,n)})}function ip(t,e){let n=wa(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,XM(e,n.length>0?n:void 0)}rp(e,r=>{ip(t,r)})}function R4(t,e){let n=Uu(ax(t,e)),r=rE(t.transactionQueueTree_,e);return u4(r,i=>{rw(t,i)}),rw(t,r),tx(r,i=>{rw(t,i)}),n}function rw(t,e){let n=wa(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(F(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(F(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(la(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?XM(e,void 0):n.length=s+1,Ms(t.eventQueue_,Uu(e),i);for(let o=0;o<r.length;o++)Lu(r[o])}}function N4(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function P4(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):hn(`Invalid query segment '${n}' in query '${t}'`)}return e}var nM=function(t,e){let n=M4(t),r=n.namespace;n.domain==="firebase.com"&&Lr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Lr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||DG();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Hf(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new ke(n.pathString)}},M4=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let d=t.indexOf("/");d===-1&&(d=t.length);let p=t.indexOf("?");p===-1&&(p=t.length),e=t.substring(0,Math.min(d,p)),d<p&&(i=N4(t.substring(d,p)));let g=P4(t.substring(Math.min(t.length,p)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let _=e.slice(0,l);if(_.toLowerCase()==="localhost")n="localhost";else if(_.split(".").length<=2)n=_;else{let E=e.indexOf(".");r=e.substring(0,E).toLowerCase(),n=e.substring(E+1),s=r}"ns"in g&&(s=g.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var zw=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return _e(this._path)?null:TM(this._path)}get ref(){return new va(this._repo,this._path)}get _queryIdentifier(){let e=$P(this._queryParams),n=Qw(e);return n==="{}"?"default":n}get _queryObject(){return $P(this._queryParams)}isEqual(e){if(e=fe(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=DM(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+iW(this._path)}};var va=class t extends zw{constructor(e,n){super(e,n,new bw,!1)}get parent(){let e=bM(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};ZW(va);JW(va);var x4="FIREBASE_DATABASE_EMULATOR_HOST",Gw={},k4=!1;function O4(t,e,n,r){t.repoInfo_=new Hf(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function F4(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Lr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Mt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=nM(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[x4]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=nM(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let d=i&&c?new Ru(Ru.OWNER):new uw(t.name,t.options,e);g4("Invalid Firebase Database URL",o),_e(o.path)||Lr("Database URL must point to the root of a Firebase Database (not including a child path).");let p=V4(a,t,d,new cw(t.name,n));return new Ww(p,t)}function L4(t,e){let n=Gw[e];(!n||n[t.key]!==t)&&Lr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),D4(t),delete n[t.key]}function V4(t,e,n,r){let i=Gw[e.name];i||(i={},Gw[e.name]=i);let s=i[t.toURLString()];return s&&Lr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new qw(t,k4,n,r),i[t.toURLString()]=s,s}var Ww=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(w4(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new va(this._repo,Re())),this._rootInternal}_delete(){return this._rootInternal!==null&&(L4(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Lr("Cannot call "+e+" on a deleted database.")}};function lx(t=ot(),e){let n=st(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=Gr("database");r&&dx(n,...r)}return n}function dx(t,e,n,r={}){t=fe(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Lr("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Lr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ru(Ru.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:Us(r.mockUserToken,t.app.options.projectId);s=new Ru(o)}O4(i,e,n,s)}function U4(t){TG(Gt),Xe(new Je("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return F4(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),q(CP,bP,t),q(CP,bP,"esm2017")}Zw.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Zw.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};U4();var ju=class{constructor(e){return e}},hx="database",aE=class{constructor(){return it(hx)}};var cE=new U("angularfire2.database-instances");function j4(t,e){let n=ut(hx,t,e);return n&&new ju(n)}function B4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ju(r)}}var $4={provide:aE,deps:[[new te,cE]]},H4={provide:ju,useFactory:j4,deps:[[new te,cE],Ue]};function fx(t,...e){return q("angularfire",Ve.full,"rtdb"),Oe([H4,$4,{provide:cE,useFactory:B4(t),multi:!0,deps:[Z,me,Ye,$e,[new te,Fn],[new te,Yt],...e]}])}var px=we(lx,!0);var _x="functions";var uE=class{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){return y(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return y(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return y(this,null,function*(){if(this.appCheck){let n=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return n.error?null:n.token}return null})}getContext(e){return y(this,null,function*(){let n=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}})}};var lE="us-central1";var dE=class{constructor(e,n,r,i,s=lE,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new uE(n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(s);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=lE}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){let n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}};function q4(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}var gx="@firebase/functions",mx="0.11.8";var z4="auth-internal",G4="app-check-internal",W4="messaging-internal";function K4(t,e){let n=(r,{instanceIdentifier:i})=>{let s=r.getProvider("app").getImmediate(),o=r.getProvider(z4),a=r.getProvider(W4),c=r.getProvider(G4);return new dE(s,o,a,c,i,t)};Xe(new Je(_x,n,"PUBLIC").setMultipleInstances(!0)),q(gx,mx,e),q(gx,mx,"esm2017")}function yx(t=ot(),e=lE){let r=st(fe(t),_x).getImmediate({identifier:e}),i=Gr("functions");return i&&vx(r,...i),r}function vx(t,e,n){q4(fe(t),e,n)}K4(fetch.bind(self));var Bu=class{constructor(e){return e}},Ix="functions",hE=class{constructor(){return it(Ix)}};var fE=new U("angularfire2.functions-instances");function Q4(t,e){let n=ut(Ix,t,e);return n&&new Bu(n)}function Y4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Bu(r)}}var Z4={provide:hE,deps:[[new te,fE]]},J4={provide:Bu,useFactory:Q4,deps:[[new te,fE],Ue]};function wx(t,...e){return q("angularfire",Ve.full,"fn"),Oe([J4,Z4,{provide:fE,useFactory:Y4(t),multi:!0,deps:[Z,me,Ye,$e,[new te,Fn],[new te,Yt],...e]}])}var Ex=we(yx,!0);var X4="/firebase-messaging-sw.js",e9="/firebase-cloud-messaging-push-scope",Ax="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",t9="https://fcmregistrations.googleapis.com/v1",Rx="google.c.a.c_id",n9="google.c.a.c_l",r9="google.c.a.ts",i9="google.c.a.e";var sp=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(sp||{});function Vr(t){let e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function s9(t){let e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}var pE="fcm_token_details_db",o9=5,Tx="fcm_token_object_Store";function a9(t){return y(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(pE))return null;let e=null;return(yield Bp(pE,o9,{upgrade:(r,i,s,o)=>y(this,null,function*(){var a;if(i<2||!r.objectStoreNames.contains(Tx))return;let c=o.objectStore(Tx),l=yield c.index("fcmSenderId").get(t);if(yield c.clear(),!!l){if(i===2){let d=l;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(a=d.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:Vr(d.vapidKey)}}}else if(i===3){let d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Vr(d.auth),p256dh:Vr(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Vr(d.vapidKey)}}}else if(i===4){let d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Vr(d.auth),p256dh:Vr(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Vr(d.vapidKey)}}}}})})).close(),yield fl(pE),yield fl("fcm_vapid_details_db"),yield fl("undefined"),c9(e)?e:null})}function c9(t){if(!t||!t.subscriptionOptions)return!1;let{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var u9="firebase-messaging-database",l9=1,$u="firebase-messaging-store",gE=null;function Nx(){return gE||(gE=Bp(u9,l9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore($u)}}})),gE}function d9(t){return y(this,null,function*(){let e=Px(t),r=yield(yield Nx()).transaction($u).objectStore($u).get(e);if(r)return r;{let i=yield a9(t.appConfig.senderId);if(i)return yield yE(t,i),i}})}function yE(t,e){return y(this,null,function*(){let n=Px(t),i=(yield Nx()).transaction($u,"readwrite");return yield i.objectStore($u).put(e,n),yield i.done,e})}function Px({appConfig:t}){return t.appId}var h9={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},qt=new qn("messaging","Messaging",h9);function f9(t,e){return y(this,null,function*(){let n=yield IE(t),r=Mx(e),i={method:"POST",headers:n,body:JSON.stringify(r)},s;try{s=yield(yield fetch(vE(t.appConfig),i)).json()}catch(o){throw qt.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw qt.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw qt.create("token-subscribe-no-token");return s.token})}function p9(t,e){return y(this,null,function*(){let n=yield IE(t),r=Mx(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},s;try{s=yield(yield fetch(`${vE(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw qt.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw qt.create("token-update-failed",{errorInfo:o})}if(!s.token)throw qt.create("token-update-no-token");return s.token})}function g9(t,e){return y(this,null,function*(){let r={method:"DELETE",headers:yield IE(t)};try{let s=yield(yield fetch(`${vE(t.appConfig)}/${e}`,r)).json();if(s.error){let o=s.error.message;throw qt.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw qt.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})}function vE({projectId:t}){return`${t9}/projects/${t}/registrations`}function IE(n){return y(this,arguments,function*({appConfig:t,installations:e}){let r=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})})}function Mx({p256dh:t,auth:e,endpoint:n,vapidKey:r}){let i={web:{endpoint:n,auth:e,p256dh:t}};return r!==Ax&&(i.web.applicationPubKey=r),i}var m9=7*24*60*60*1e3;function _9(t){return y(this,null,function*(){let e=yield v9(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Vr(e.getKey("auth")),p256dh:Vr(e.getKey("p256dh"))},r=yield d9(t.firebaseDependencies);if(r){if(I9(r.subscriptionOptions,n))return Date.now()>=r.createTime+m9?y9(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield g9(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Cx(t.firebaseDependencies,n)}else return Cx(t.firebaseDependencies,n)})}function y9(t,e){return y(this,null,function*(){try{let n=yield p9(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield yE(t.firebaseDependencies,r),n}catch(n){throw n}})}function Cx(t,e){return y(this,null,function*(){let r={token:yield f9(t,e),createTime:Date.now(),subscriptionOptions:e};return yield yE(t,r),r.token})}function v9(t,e){return y(this,null,function*(){let n=yield t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:s9(e)})})}function I9(t,e){let n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}function bx(t){let e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return w9(e,t),E9(e,t),T9(e,t),e}function w9(t,e){if(!e.notification)return;t.notification={};let n=e.notification.title;n&&(t.notification.title=n);let r=e.notification.body;r&&(t.notification.body=r);let i=e.notification.image;i&&(t.notification.image=i);let s=e.notification.icon;s&&(t.notification.icon=s)}function E9(t,e){e.data&&(t.data=e.data)}function T9(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};let a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);let c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(t.fcmOptions.analyticsLabel=c)}function C9(t){return typeof t=="object"&&!!t&&Rx in t}b9("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function b9(t,e){let n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function D9(t){if(!t||!t.options)throw mE("App Configuration Object");if(!t.name)throw mE("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(let r of e)if(!n[r])throw mE(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function mE(t){return qt.create("missing-app-config-values",{valueName:t})}var _E=class{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=D9(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}};function S9(t){return y(this,null,function*(){try{t.swRegistration=yield navigator.serviceWorker.register(X4,{scope:e9}),t.swRegistration.update().catch(()=>{})}catch(e){throw qt.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function A9(t,e){return y(this,null,function*(){if(!e&&!t.swRegistration&&(yield S9(t)),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw qt.create("invalid-sw-registration");t.swRegistration=e}})}function R9(t,e){return y(this,null,function*(){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=Ax)})}function N9(t,e){return y(this,null,function*(){if(!navigator)throw qt.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw qt.create("permission-blocked");return yield R9(t,e?.vapidKey),yield A9(t,e?.serviceWorkerRegistration),_9(t)})}function P9(t,e,n){return y(this,null,function*(){let r=M9(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[Rx],message_name:n[n9],message_time:n[r9],message_device_time:Math.floor(Date.now()/1e3)})})}function M9(t){switch(t){case sp.NOTIFICATION_CLICKED:return"notification_open";case sp.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function x9(t,e){return y(this,null,function*(){let n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===sp.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(bx(n)):t.onMessageHandler.next(bx(n)));let r=n.data;C9(r)&&r[i9]==="1"&&(yield P9(t,n.messageType,r))})}var Dx="@firebase/messaging",Sx="0.12.12";var k9=t=>{let e=new _E(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>x9(e,n)),e},O9=t=>{let e=t.getProvider("messaging").getImmediate();return{getToken:r=>N9(e,r)}};function F9(){Xe(new Je("messaging",k9,"PUBLIC")),Xe(new Je("messaging-internal",O9,"PRIVATE")),q(Dx,Sx),q(Dx,Sx,"esm2017")}function wE(){return y(this,null,function*(){try{yield xi()}catch{return!1}return typeof window<"u"&&fr()&&qa()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function xx(t=ot()){return wE().then(e=>{if(!e)throw qt.create("unsupported-browser")},e=>{throw qt.create("indexed-db-unsupported")}),st(fe(t),"messaging").getImmediate()}F9();var Hu=class{constructor(e){return e}},kx="messaging",EE=class{constructor(){return it(kx)}};var Ox="__angularfire_symbol__messagingIsSupported",TE="__angularfire_symbol__messagingIsSupportedValue";globalThis[Ox]||=wE().then(t=>globalThis[TE]=t).catch(()=>globalThis[TE]=!1);var op={async:()=>globalThis[Ox],sync:()=>{let t=globalThis[TE];if(t===void 0)throw new Error(ko("Messaging"));return t}},CE=new U("angularfire2.messaging-instances");function L9(t,e){if(!op.sync())return null;let n=ut(kx,t,e);return n&&new Hu(n)}function V9(t){return(e,n)=>{if(!op.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new Hu(r)}}var U9={provide:EE,deps:[[new te,CE]]},j9={provide:Hu,useFactory:L9,deps:[[new te,CE],Ue]};function Fx(t,...e){return q("angularfire",Ve.full,"fcm"),Oe([j9,U9,{provide:di,useValue:op.async,multi:!0},{provide:CE,useFactory:V9(t),multi:!0,deps:[Z,me,Ye,$e,...e]}])}var Pre=op.async;var Lx=we(xx,!0);var qu=class{constructor(e){return e}},Vx="performance",bE=class{constructor(){return it(Vx)}};var DE=new U("angularfire2.performance-instances");function B9(t,e,n){if(!Qm(n))return null;let r=ut(Vx,t,e);return r&&new qu(r)}function $9(t){return(e,n,r)=>{if(!Qm(n))return null;let i=e.runOutsideAngular(()=>t(r));return new qu(i)}}var H9={provide:bE,deps:[[new te,DE]]},q9={provide:qu,useFactory:B9,deps:[[new te,DE],Ue,Mn]};function Ux(t,...e){return q("angularfire",Ve.full,"perf"),Oe([q9,H9,{provide:DE,useFactory:$9(t),multi:!0,deps:[Z,Mn,me,Ye,$e,...e]}])}var jx=we(fC,!0);var Gx="firebasestorage.googleapis.com",z9="storageBucket",G9=2*60*1e3,W9=10*60*1e3;var ur=class t extends zt{constructor(e,n,r=0){super(SE(e),`Firebase Storage: ${n} (${SE(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return SE(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},jr=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(jr||{});function SE(t){return"storage/"+t}function K9(){let t="An unknown error occurred, please check the error payload for server response.";return new ur(jr.UNKNOWN,t)}function Q9(){return new ur(jr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Y9(){return new ur(jr.CANCELED,"User canceled the upload/download.")}function Z9(t){return new ur(jr.INVALID_URL,"Invalid URL '"+t+"'.")}function J9(t){return new ur(jr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Bx(t){return new ur(jr.INVALID_ARGUMENT,t)}function Wx(){return new ur(jr.APP_DELETED,"The Firebase app was deleted.")}function X9(t){return new ur(jr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var Ur=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw J9(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(G){G.path.charAt(G.path.length-1)==="/"&&(G.path_=G.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(G){G.path_=decodeURIComponent(G.path)}let d="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",_=new RegExp(`^https?://${p}/${d}/b/${i}/o${g}`,"i"),E={bucket:1,path:3},R=n===Gx?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",x=new RegExp(`^https?://${R}/${i}/${A}`,"i"),$=[{regex:a,indices:c,postModify:s},{regex:_,indices:E,postModify:l},{regex:x,indices:{bucket:1,path:2},postModify:l}];for(let G=0;G<$.length;G++){let Ne=$[G],Y=Ne.regex.exec(e);if(Y){let T=Y[Ne.indices.bucket],v=Y[Ne.indices.path];v||(v=""),r=new t(T,v),Ne.postModify(r);break}}if(r==null)throw Z9(e);return r}},AE=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function e6(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function d(...A){l||(l=!0,e.apply(null,A))}function p(A){i=setTimeout(()=>{i=null,t(_,c())},A)}function g(){s&&clearTimeout(s)}function _(A,...x){if(l){g();return}if(A){g(),d.call(null,A,...x);return}if(c()||o){g(),d.call(null,A,...x);return}r<64&&(r*=2);let $;a===1?(a=2,$=0):$=(r+Math.random())*1e3,p($)}let E=!1;function R(A){E||(E=!0,g(),!l&&(i!==null?(A||(a=2),clearTimeout(i),p(0)):A||(a=1)))}return p(0),s=setTimeout(()=>{o=!0,R(!0)},n),R}function t6(t){t(!1)}function n6(t){return t!==void 0}function $x(t,e,n,r){if(r<e)throw Bx(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Bx(`Invalid value for '${t}'. Expected ${n} or less.`)}function r6(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var RE=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(RE||{});function i6(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var NE=class{constructor(e,n,r,i,s,o,a,c,l,d,p,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=d,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,E)=>{this.resolve_=_,this.reject_=E,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Ea(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===RE.NO_ERROR,c=s.getStatus();if(!a||i6(c,this.additionalRetryCodes_)&&this.retry){let d=s.getErrorCode()===RE.ABORT;r(!1,new Ea(!1,null,d));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new Ea(l,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());n6(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=K9();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?Wx():Y9();o(c)}else{let c=Q9();o(c)}};this.canceled_?n(!1,new Ea(!1,null,!0)):this.backoffId_=e6(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&t6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Ea=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function s6(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function o6(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function a6(t,e){e&&(t["X-Firebase-GMPID"]=e)}function c6(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function u6(t,e,n,r,i,s,o=!0){let a=r6(t.urlParams),c=t.url+a,l=Object.assign({},t.headers);return a6(l,e),s6(l,n),o6(l,s),c6(l,r),new NE(c,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}function l6(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function d6(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}var Kre=256*1024;var PE=class t{constructor(e,n){this._service=e,n instanceof Ur?this._location=n:this._location=Ur.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new Ur(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return d6(this._location.path)}get storage(){return this._service}get parent(){let e=l6(this._location.path);if(e===null)return null;let n=new Ur(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw X9(e)}};function Hx(t,e){let n=e?.[z9];return n==null?null:Ur.makeFromBucketSpec(n,t)}function h6(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Us(i,t.app.options.projectId))}var ME=class{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Gx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=G9,this._maxUploadRetryTime=W9,this._requests=new Set,i!=null?this._bucket=Ur.makeFromBucketSpec(i,this._host):this._bucket=Hx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ur.makeFromBucketSpec(this._url,e):this._bucket=Hx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$x("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$x("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return y(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return y(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new PE(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new AE(Wx());{let o=u6(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return y(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},qx="@firebase/storage",zx="0.13.2";var Kx="storage";function Qx(t=ot(),e){t=fe(t);let r=st(t,Kx).getImmediate({identifier:e}),i=Gr("storage");return i&&Yx(r,...i),r}function Yx(t,e,n,r={}){h6(t,e,n,r)}function f6(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new ME(n,r,i,e,Gt)}function p6(){Xe(new Je(Kx,f6,"PUBLIC").setMultipleInstances(!0)),q(qx,zx,""),q(qx,zx,"esm2017")}p6();var zu=class{constructor(e){return e}},Zx="storage",xE=class{constructor(){return it(Zx)}};var kE=new U("angularfire2.storage-instances");function g6(t,e){let n=ut(Zx,t,e);return n&&new zu(n)}function m6(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new zu(r)}}var _6={provide:xE,deps:[[new te,kE]]},y6={provide:zu,useFactory:g6,deps:[[new te,kE],Ue]};function Jx(t,...e){return q("angularfire",Ve.full,"gcs"),Oe([y6,_6,{provide:kE,useFactory:m6(t),multi:!0,deps:[Z,me,Ye,$e,[new te,Fn],[new te,Yt],...e]}])}var Xx=we(Qx,!0);var OE="@firebase/remote-config",ek="0.4.9";var tk="remote-config";var v6={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},Xt=new qn("remoteconfig","Remote Config",v6);function nk(t=ot()){return t=fe(t),st(t,tk).getImmediate()}function rk(t){let e=fe(t);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}var FE=class{constructor(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let r=Date.now()-n,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){return y(this,null,function*(){let[n,r]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n))return r;e.eTag=r&&r.eTag;let i=yield this.client.fetch(e),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return i.status===200&&s.push(this.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(s),i})}};function I6(t=navigator){return t.languages&&t.languages[0]||t.language}var LE=class{constructor(e,n,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){return y(this,null,function*(){let[n,r]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,o={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:I6()},c={method:"POST",headers:o,body:JSON.stringify(a)},l=fetch(s,c),d=new Promise((A,x)=>{e.signal.addEventListener(()=>{let L=new Error("The operation was aborted.");L.name="AbortError",x(L)})}),p;try{yield Promise.race([l,d]),p=yield l}catch(A){let x="fetch-client-network";throw A?.name==="AbortError"&&(x="fetch-timeout"),Xt.create(x,{originalErrorMessage:A?.message})}let g=p.status,_=p.headers.get("ETag")||void 0,E,R;if(p.status===200){let A;try{A=yield p.json()}catch(x){throw Xt.create("fetch-client-parse",{originalErrorMessage:x?.message})}E=A.entries,R=A.state}if(R==="INSTANCE_STATE_UNSPECIFIED"?g=500:R==="NO_CHANGE"?g=304:(R==="NO_TEMPLATE"||R==="EMPTY_CONFIG")&&(E={}),g!==304&&g!==200)throw Xt.create("fetch-status",{httpStatus:g});return{status:g,eTag:_,config:E}})}};function w6(t,e){return new Promise((n,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Xt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function E6(t){if(!(t instanceof zt)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var VE=class{constructor(e,n){this.client=e,this.storage=n}fetch(e){return y(this,null,function*(){let n=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,n)})}attemptFetch(i,s){return y(this,arguments,function*(e,{throttleEndTimeMillis:n,backoffCount:r}){yield w6(e.signal,n);try{let o=yield this.client.fetch(e);return yield this.storage.deleteThrottleMetadata(),o}catch(o){if(!E6(o))throw o;let a={throttleEndTimeMillis:Date.now()+Qa(r),backoffCount:r+1};return yield this.storage.setThrottleMetadata(a),this.attemptFetch(e,a)}})}};var T6=60*1e3,C6=12*60*60*1e3,UE=class{constructor(e,n,r,i,s){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:T6,minimumFetchIntervalMillis:C6},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}};function ap(t,e){let n=t.target.error||void 0;return Xt.create(e,{originalErrorMessage:n&&n?.message})}var xs="app_namespace_store",b6="firebase_remote_config",D6=1;function S6(){return new Promise((t,e)=>{try{let n=indexedDB.open(b6,D6);n.onerror=r=>{e(ap(r,"storage-open"))},n.onsuccess=r=>{t(r.target.result)},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(xs,{keyPath:"compositeKey"})}}}catch(n){e(Xt.create("storage-open",{originalErrorMessage:n?.message}))}})}var jE=class{constructor(e,n,r,i=S6()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){return y(this,null,function*(){let n=yield this.openDbPromise;return new Promise((r,i)=>{let o=n.transaction([xs],"readonly").objectStore(xs),a=this.createCompositeKey(e);try{let c=o.get(a);c.onerror=l=>{i(ap(l,"storage-get"))},c.onsuccess=l=>{let d=l.target.result;r(d?d.value:void 0)}}catch(c){i(Xt.create("storage-get",{originalErrorMessage:c?.message}))}})})}set(e,n){return y(this,null,function*(){let r=yield this.openDbPromise;return new Promise((i,s)=>{let a=r.transaction([xs],"readwrite").objectStore(xs),c=this.createCompositeKey(e);try{let l=a.put({compositeKey:c,value:n});l.onerror=d=>{s(ap(d,"storage-set"))},l.onsuccess=()=>{i()}}catch(l){s(Xt.create("storage-set",{originalErrorMessage:l?.message}))}})})}delete(e){return y(this,null,function*(){let n=yield this.openDbPromise;return new Promise((r,i)=>{let o=n.transaction([xs],"readwrite").objectStore(xs),a=this.createCompositeKey(e);try{let c=o.delete(a);c.onerror=l=>{i(ap(l,"storage-delete"))},c.onsuccess=()=>{r()}}catch(c){i(Xt.create("storage-delete",{originalErrorMessage:c?.message}))}})})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}};var BE=class{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){return y(this,null,function*(){let e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),i=yield e;i&&(this.lastFetchStatus=i);let s=yield n;s&&(this.lastSuccessfulFetchTimestampMillis=s);let o=yield r;o&&(this.activeConfig=o)})}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}};function A6(){Xe(new Je(tk,t,"PUBLIC").setMultipleInstances(!0)),q(OE,ek),q(OE,ek,"esm2017");function t(e,{instanceIdentifier:n}){let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Xt.create("registration-window");if(!fr())throw Xt.create("indexed-db-unavailable");let{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw Xt.create("registration-project-id");if(!o)throw Xt.create("registration-api-key");if(!a)throw Xt.create("registration-app-id");n=n||"firebase";let c=new jE(a,r.name,n),l=new BE(c),d=new Gn(OE);d.logLevel=At.ERROR;let p=new LE(i,Gt,n,s,o,a),g=new VE(p,c),_=new FE(g,c,l,d),E=new UE(r,_,l,c,d);return rk(E),E}}function ik(){return y(this,null,function*(){if(!fr())return!1;try{return yield xi()}catch{return!1}})}A6();var Gu=class{constructor(e){return e}},sk="remote-config",$E=class{constructor(){return it(sk)}};var HE="__angularfire_symbol__remoteConfigIsSupportedValue",ok="__angularfire_symbol__remoteConfigIsSupported";globalThis[ok]||=ik().then(t=>globalThis[HE]=t).catch(()=>globalThis[HE]=!1);var cp={async:()=>globalThis[ok],sync:()=>{let t=globalThis[HE];if(t===void 0)throw new Error(ko("RemoteConfig"));return t}},qE=new U("angularfire2.remote-config-instances");function R6(t,e){if(!cp.sync())return null;let n=ut(sk,t,e);return n&&new Gu(n)}function N6(t){return(e,n)=>{if(!cp.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new Gu(r)}}var P6={provide:$E,deps:[[new te,qE]]},M6={provide:Gu,useFactory:R6,deps:[[new te,qE],Ue]};function ak(t,...e){return q("angularfire",Ve.full,"rc"),Oe([M6,P6,{provide:di,useValue:cp.async,multi:!0},{provide:qE,useFactory:N6(t),multi:!0,deps:[Z,me,Ye,$e,...e]}])}var zie=cp.async;var ck=we(nk,!0);var uk="@firebase/vertexai-preview",lk="0.0.4";var dk="vertexAI",hk="us-central1";var zE=class{constructor(e,n,r,i){var s;this.app=e,this.options=i;let o=r?.getImmediate({optional:!0}),a=n?.getImmediate({optional:!0});this.auth=a||null,this.appCheck=o||null,this.location=((s=this.options)===null||s===void 0?void 0:s.location)||hk}_delete(){return Promise.resolve()}};var GE=function(t){return t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.OTHER="OTHER",t}(GE||{});var Zie=[GE.RECITATION,GE.SAFETY];function fk(t=ot(),e){return t=fe(t),st(t,dk).getImmediate({identifier:e?.location||hk})}function x6(){Xe(new Je(dk,(t,{instanceIdentifier:e})=>{let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new zE(n,r,i,{location:e})},"PUBLIC").setMultipleInstances(!0)),q(uk,lk),q(uk,lk,"esm2017")}x6();var Wu=class{constructor(e){return e}},pk="vertexai",WE=class{constructor(){return it(pk)}};var KE=new U("angularfire2.vertexai-instances");function k6(t,e){let n=ut(pk,t,e);return n&&new Wu(n)}function O6(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Wu(r)}}var F6={provide:WE,deps:[[new te,KE]]},L6={provide:Wu,useFactory:k6,deps:[[new te,KE],Ue]};function gk(t,...e){return q("angularfire",Ve.full,"vertexai"),Oe([L6,F6,{provide:KE,useFactory:O6(t),multi:!0,deps:[Z,me,Ye,$e,[new te,Yt],...e]}])}var mk=we(fk,!0);var _k={firebaseConfig:{apiKey:"AIzaSyBggO56pZ3V5jgNnv_4i_CpUbgU_iGvcsk",authDomain:"dash-boar-7ee0d.firebaseapp.com",projectId:"dash-boar-7ee0d",storageBucket:"dash-boar-7ee0d.firebasestorage.app",messagingSenderId:"325394396819",appId:"1:325394396819:web:e9673769b33be96849bf66",measurementId:"G-V0X3V5XKL2"},production:!0};var yk={providers:[qS({eventCoalescing:!0}),JA(XA),e0(()=>t0(_k.firebaseConfig)),W0(()=>Q0()),mR(()=>pR()),gR,Vy,vP(()=>wP()),fx(()=>px()),wx(()=>Ex()),Fx(()=>Lx()),Ux(()=>jx()),Jx(()=>Xx()),ak(()=>ck()),gk(()=>mk())]};var Di=class t{firestore=M(bs);destroy$=new et;constructor(){}delete(e){return IP(jf(this.collectionRef,e))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}generateNextId(){return y(this,null,function*(){let e=yield QI(this.collectionRef),n=0;return e.forEach(r=>{let i=r.data(),s=parseInt(i.id,10);!isNaN(s)&&s>n&&(n=s)}),(n+1).toString()})}createData(e,n){let r=jf(this.collectionRef,e);return YI(r,n)}updateData(e,n){return YI(jf(this.collectionRef,e),n,{merge:!0})}getDataById(e){return y(this,null,function*(){let n=EP(this.collectionRef,TP("id","==",e)),r=yield QI(n);if(!r.empty)return r.docs[0].data()})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};var up=class t extends Di{collectionPath="/drivers";collectionRef=aa(this.firestore,this.collectionPath);constructor(){super()}getAll(){return oa(this.collectionRef).pipe(nn(this.destroy$),Q(e=>e.filter(n=>!n.deleted)))}create(e){return y(this,null,function*(){return e.id=yield this.generateNextId(),this.createData(e.id,e)})}update(e){return this.updateData(e.id,e)}getById(e){return this.getDataById(e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};var Si=class t{constructor(){}get(){return{durationHour:24,endTyreChangeWindowHour:14,fuelDurationMinute:120,minDriverChange:30,minStintMinute:5,minTyreChange:1,startTyreChangeWindowHour:10}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};var Ai=class t extends Di{collectionPath="/races";collectionRef=aa(this.firestore,this.collectionPath);raceConfigService=M(Si);activeRace=km(void 0);constructor(){super(),this.getAll().pipe(nn(this.destroy$)).subscribe(e=>{let n=this.getActiveRace(e);this.activeRace.set(n)})}getAll(){return oa(this.collectionRef).pipe(nn(this.destroy$),Q(e=>e.filter(n=>!n.deleted)))}create(e){return y(this,null,function*(){return this.activeRace()!==void 0?(console.warn("Race already active -> "+this.activeRace()),Promise.resolve()):(e.id=yield this.generateNextId(),this.createData(e.id,e))})}updateRace(e){return this.updateData(e.id,e)}getById(e){return this.getDataById(e)}getActiveRace(e){let n=new Date;for(let r of e){let i=r.start.toDate();if(i.setHours(i.getHours()+this.raceConfigService.get().durationHour),i>n)return r}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};function V6(t,e){if(t&1){let n=LS();nt(0,"button",3),Io("click",function(){ED(n);let i=Tr();return TD(i.startRace())}),wt(1," Start race "),Qe()}}function U6(t,e){if(t&1&&(nt(0,"div",2),wt(1),Qe()),t&2){let n=Tr();xn(),Xi(" ",n.timeLeft," ")}}var lp=class t{raceService=M(Ai);raceConfigService=M(Si);durationHour=this.raceConfigService.get().durationHour;intervalId;activeRace=this.raceService.activeRace;timeLeft="";constructor(){}ngOnInit(){this.intervalId=setInterval(()=>{let e=this.activeRace();e?this.timeLeft=this.calculateLeftTime(e.start.toDate()):this.timeLeft=""},1e3)}ngOnDestroy(){this.intervalId&&clearInterval(this.intervalId)}startRace(){this.raceService.create({id:"1",start:gt.now(),deleted:!1})}calculateLeftTime(e){let n=new Date().getTime(),i=e.getTime()+this.durationHour*60*60*1e3-n;if(i<0)return"00:00:00";{let s=Math.floor(i%864e5/36e5),o=Math.floor(i%(1e3*60*60)/(1e3*60)),a=Math.floor(i%(1e3*60)/1e3);return`${this.pad(s)}:${this.pad(o)}:${this.pad(a)}`}}pad(e,n=2){let r=e.toString();for(;r.length<n;)r="0"+r;return r}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=si({type:t,selectors:[["app-race"]],standalone:!0,features:[li],decls:4,vars:1,consts:[[1,"flex","items-center","justify-center","h-20"],[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded"],[1,"text-4xl","font-bold","font-mono"],[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded",3,"click"]],template:function(n,r){n&1&&(nt(0,"div",0)(1,"div"),ci(2,V6,2,0,"button",1)(3,U6,2,1,"div",2),Qe()()),n&2&&(xn(2),ui(r.activeRace()?3:2))}})};function QE(t){t||(Sd(QE),t=M(yo));let e=new ae(n=>t.onDestroy(n.next.bind(n)));return n=>n.pipe(nn(e))}function YE(t,e){!e?.injector&&Sd(YE);let n=e?.injector??M(me),r=new nc(1),i=Bm(()=>{let s;try{s=t()}catch(o){qd(()=>r.error(o));return}qd(()=>r.next(s))},{injector:n,manualCleanup:!0});return n.get(yo).onDestroy(()=>{i.destroy(),r.complete()}),r.asObservable()}var dp=class t extends Di{raceService=M(Ai);collectionPath="/pits";collectionRef=aa(this.firestore,this.collectionPath);activeRace;constructor(){super(),this.activeRace=this.raceService.activeRace}getRacePits(){return Js({pits:oa(this.collectionRef),activeRace:YE(this.activeRace)}).pipe(nn(this.destroy$),Q(({pits:e,activeRace:n})=>n?e.filter(r=>!r.deleted&&r.raceId===n.id):[]))}create(e){return y(this,null,function*(){return e.id=yield this.generateNextId(),this.createData(e.id,e)})}update(e){return this.updateData(e.id,e)}getById(e){return this.getDataById(e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};var j6=t=>({"mb-2":t}),B6=t=>({"animate-bounce":t});function $6(t,e){if(t&1&&(nt(0,"div",4),wt(1),Qe()),t&2){let n=Tr();xn(),Xi(" Remaining: ",n.remainingTyreChange," ")}}function H6(t,e){t&1&&(nt(0,"div",5),wt(1,"Completed!"),Qe())}function q6(t,e){if(t&1&&(nt(0,"div",6),wt(1,"Open"),Qe()),t&2){let n=Tr();jd("ngClass",Fm(1,B6,n.remainingTyreChange>0))}}function z6(t,e){t&1&&(nt(0,"div",7),wt(1,"Close"),Qe())}function G6(t,e){if(t&1&&(wt(0),Lm(1,"date")),t&2){let n=Tr(2);Xi(" ",Vm(1,1,n.openingTime(),"HH:mm:ss")," ")}}function W6(t,e){t&1&&wt(0," --:--:-- ")}function K6(t,e){if(t&1&&(wt(0),Lm(1,"date")),t&2){let n=Tr(2);Xi(" ",Vm(1,1,n.closingTime(),"HH:mm:ss")," ")}}function Q6(t,e){t&1&&wt(0," --:--:-- ")}function Y6(t,e){if(t&1&&(nt(0,"div",8)(1,"div")(2,"div",9),wt(3,"Window opening"),Qe(),nt(4,"div",10),ci(5,G6,2,4)(6,W6,1,0),Qe()(),nt(7,"div")(8,"div",9),wt(9,"Window closing"),Qe(),nt(10,"div",11),ci(11,K6,2,4)(12,Q6,1,0),Qe()()()),t&2){let n=Tr();xn(5),ui(n.openingTime()?5:6),xn(6),ui(n.closingTime()?11:12)}}var hp=class t{raceService=M(Ai);raceConfigService=M(Si);pitService=M(dp);startTyreChangeWindowHour=this.raceConfigService.get().startTyreChangeWindowHour;endTyreChangeWindowHour=this.raceConfigService.get().endTyreChangeWindowHour;minTyreChange=this.raceConfigService.get().minTyreChange;intervalId;isOpen=!0;isTyreChangeWindowOpen=!1;remainingTyreChange=this.raceConfigService.get().minTyreChange;activeRace=this.raceService.activeRace;openingTime=Hd(()=>{let e=this.activeRace();if(e){let n=e.start.toDate().getTime()+this.startTyreChangeWindowHour*60*60*1e3;return new Date(n)}});closingTime=Hd(()=>{let e=this.activeRace();if(e){let n=e.start.toDate().getTime()+this.endTyreChangeWindowHour*60*60*1e3;return new Date(n)}});constructor(){this.intervalId=setInterval(()=>{let e=new Date,n=this.openingTime(),r=this.closingTime();n&&r?this.isTyreChangeWindowOpen=e>=n&&e<=r:this.isTyreChangeWindowOpen=!1},1e3),this.pitService.getRacePits().pipe(QE()).subscribe(e=>{let n=e.filter(r=>r.tyreChange).length;this.remainingTyreChange=this.minTyreChange-n})}ngOnDestroy(){this.intervalId&&clearInterval(this.intervalId)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=si({type:t,selectors:[["app-tyre-window"]],standalone:!0,features:[li],decls:10,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-4","max-w-sm","mx-auto","border","hover:shadow-2xl","hover:cursor-pointer",3,"click"],[1,"flex","justify-between","items-center",3,"ngClass"],[1,"text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[1,"bg-red-500","px-2","py-1","rounded-lg","text-white","font-medium","mr-1","hover:cursor-default"],[1,"flex","justify-between"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-black","font-mono","text-right"]],template:function(n,r){n&1&&(nt(0,"div",0),Io("click",function(){return r.isOpen=!r.isOpen}),nt(1,"div",1)(2,"div",2),wt(3,"\u{1F6DE} Tyre change"),Qe(),nt(4,"div",3),ci(5,$6,2,1,"div",4)(6,H6,2,0,"div",5)(7,q6,2,3,"div",6)(8,z6,2,0,"div",7),Qe()(),ci(9,Y6,13,2,"div",8),Qe()),n&2&&(xn(),jd("ngClass",Fm(4,j6,r.isOpen)),xn(4),ui(r.remainingTyreChange>0?5:6),xn(2),ui(r.isTyreChangeWindowOpen?7:8),xn(2),ui(r.isOpen?9:-1))},dependencies:[aA,oA]})};var fp=class t{driverService=M(up);drivers$;constructor(){this.drivers$=this.driverService.getAll()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=si({type:t,selectors:[["app-root"]],standalone:!0,features:[li],decls:9,vars:0,consts:[[1,"container","mx-auto"],[1,"container","px-4","py-2","flex","items-center","justify-between"],[1,"flex","items-center"],[1,"text-3xl","font-semibold"]],template:function(n,r){n&1&&(nt(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),wt(4,"\u{1F3CE}\uFE0F dash-boar \u{1F417}"),Qe()(),nt(5,"div"),Ji(6,"app-race"),Qe()(),Ji(7,"app-tyre-window"),Qe(),Ji(8,"router-outlet"))},dependencies:[F_,lp,hp]})};gA(fp,yk).catch(t=>console.error(t));
