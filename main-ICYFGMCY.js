import{$ as Fn,A as Gn,B as rr,C as Rh,D as qt,E as lS,F as uS,G as Kr,H as ns,I as zl,J as Gl,K as Kl,L as rs,M as dS,N as hS,O as fS,P as pS,Q as Yl,R as wa,S as Ve,T as It,U as en,V as ir,W as uy,X as xh,Y as Tt,Z as Bt,_ as yi,a as j,aa as mS,b as me,ba as $t,c as co,ca as Nh,d as y,da as ie,e as G,ea as gS,f as ga,g as Sh,h as nS,i as rS,j as iS,k as oS,l as lo,m as ly,n as va,o as ya,p as dn,q as Hl,r as sS,s as Wl,t as Ah,u as aS,v as zr,w as cS,x as Gr,y as _a,z as ql}from"./chunk-TSZ4SNPW.js";function my(n,e){return Object.is(n,e)}var Ht=null,Ql=!1,gy=1,Ln=Symbol("SIGNAL");function Re(n){let e=Ht;return Ht=n,e}function vS(){return Ht}function V2(){return Ql}var is={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ph(n){if(Ql)throw new Error("");if(Ht===null)return;Ht.consumerOnSignalRead(n);let e=Ht.nextProducerIndex++;if(Oh(Ht),e<Ht.producerNode.length&&Ht.producerNode[e]!==n&&Jl(Ht)){let t=Ht.producerNode[e];kh(t,Ht.producerIndexOfThis[e])}Ht.producerNode[e]!==n&&(Ht.producerNode[e]=n,Ht.producerIndexOfThis[e]=Jl(Ht)?ES(n,Ht,e):0),Ht.producerLastReadVersion[e]=n.version}function U2(){gy++}function vy(n){if(!(Jl(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===gy)){if(!n.producerMustRecompute(n)&&!Zl(n)){fy(n);return}n.producerRecomputeValue(n),fy(n)}}function yS(n){if(n.liveConsumerNode===void 0)return;let e=Ql;Ql=!0;try{for(let t of n.liveConsumerNode)t.dirty||wS(t)}finally{Ql=e}}function _S(){return Ht?.consumerAllowSignalWrites!==!1}function wS(n){n.dirty=!0,yS(n),n.consumerMarkedDirty?.(n)}function fy(n){n.dirty=!1,n.lastCleanEpoch=gy}function Ea(n){return n&&(n.nextProducerIndex=0),Re(n)}function Xl(n,e){if(Re(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Jl(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)kh(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Zl(n){Oh(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(vy(t),r!==t.version))return!0}return!1}function Ia(n){if(Oh(n),Jl(n))for(let e=0;e<n.producerNode.length;e++)kh(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function ES(n,e,t){if(IS(n),n.liveConsumerNode.length===0&&TS(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=ES(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function kh(n,e){if(IS(n),n.liveConsumerNode.length===1&&TS(n))for(let r=0;r<n.producerNode.length;r++)kh(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Oh(i),i.producerIndexOfThis[r]=e}}function Jl(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Oh(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function IS(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function TS(n){return n.producerNode!==void 0}function bS(n){let e=Object.create(j2);e.computation=n;let t=()=>{if(vy(e),Ph(e),e.value===Mh)throw e.error;return e.value};return t[Ln]=e,t}var dy=Symbol("UNSET"),hy=Symbol("COMPUTING"),Mh=Symbol("ERRORED"),j2=me(j({},is),{value:dy,dirty:!0,error:null,equal:my,kind:"computed",producerMustRecompute(n){return n.value===dy||n.value===hy},producerRecomputeValue(n){if(n.value===hy)throw new Error("Detected cycle in computations.");let e=n.value;n.value=hy;let t=Ea(n),r,i=!1;try{r=n.computation(),Re(null),i=e!==dy&&e!==Mh&&r!==Mh&&n.equal(e,r)}catch(o){r=Mh,n.error=o}finally{Xl(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function B2(){throw new Error}var CS=B2;function DS(){CS()}function SS(n){CS=n}var $2=null;function AS(n){let e=Object.create(yy);e.value=n;let t=()=>(Ph(e),e.value);return t[Ln]=e,t}function Fh(n,e){_S()||DS(),n.equal(n.value,e)||(n.value=e,H2(n))}function RS(n,e){_S()||DS(),Fh(n,e(n.value))}var yy=me(j({},is),{equal:my,value:void 0,kind:"signal"});function H2(n){n.version++,U2(),yS(n),$2?.()}function xS(n,e,t){let r=Object.create(W2);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;let i=c=>{r.cleanupFn=c};function o(c){return c.fn===null&&c.schedule===null}function s(c){o(c)||(Ia(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=py)}let a=()=>{if(r.fn===null)return;if(V2())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!Zl(r))return;r.hasRun=!0;let c=Ea(r);try{r.cleanupFn(),r.cleanupFn=py,r.fn(i)}finally{Xl(r,c)}};return r.ref={notify:()=>wS(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>s(r),[Ln]:r},r.ref}var py=()=>{},W2=me(j({},is),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule!==null&&n.schedule(n.ref)},hasRun:!1,cleanupFn:py});function _e(n){return typeof n=="function"}function Ta(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Lh=Ta(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function os(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var bt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(_e(r))try{r()}catch(o){e=o instanceof Lh?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{NS(o)}catch(s){e=e??[],s instanceof Lh?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Lh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)NS(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&os(t,e)}remove(e){let{_finalizers:t}=this;t&&os(t,e),e instanceof n&&e._removeParent(this)}};bt.EMPTY=(()=>{let n=new bt;return n.closed=!0,n})();var _y=bt.EMPTY;function Vh(n){return n instanceof bt||n&&"closed"in n&&_e(n.remove)&&_e(n.add)&&_e(n.unsubscribe)}function NS(n){_e(n)?n():n.unsubscribe()}var Cr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ba={setTimeout(n,e,...t){let{delegate:r}=ba;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ba;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Uh(n){ba.setTimeout(()=>{let{onUnhandledError:e}=Cr;if(e)e(n);else throw n})}function eu(){}var MS=wy("C",void 0,void 0);function PS(n){return wy("E",void 0,n)}function kS(n){return wy("N",n,void 0)}function wy(n,e,t){return{kind:n,value:e,error:t}}var ss=null;function Ca(n){if(Cr.useDeprecatedSynchronousErrorHandling){let e=!ss;if(e&&(ss={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ss;if(ss=null,t)throw r}}else n()}function OS(n){Cr.useDeprecatedSynchronousErrorHandling&&ss&&(ss.errorThrown=!0,ss.error=n)}var as=class extends bt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Vh(e)&&e.add(this)):this.destination=G2}static create(e,t,r){return new Da(e,t,r)}next(e){this.isStopped?Iy(kS(e),this):this._next(e)}error(e){this.isStopped?Iy(PS(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Iy(MS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},q2=Function.prototype.bind;function Ey(n,e){return q2.call(n,e)}var Ty=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){jh(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){jh(r)}else jh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){jh(t)}}},Da=class extends as{constructor(e,t,r){super();let i;if(_e(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Cr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ey(e.next,o),error:e.error&&Ey(e.error,o),complete:e.complete&&Ey(e.complete,o)}):i=e}this.destination=new Ty(i)}};function jh(n){Cr.useDeprecatedSynchronousErrorHandling?OS(n):Uh(n)}function z2(n){throw n}function Iy(n,e){let{onStoppedNotification:t}=Cr;t&&ba.setTimeout(()=>t(n,e))}var G2={closed:!0,next:eu,error:z2,complete:eu};var Sa=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Dn(n){return n}function Bh(...n){return by(n)}function by(n){return n.length===0?Dn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var he=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=Y2(t)?t:new Da(t,r,i);return Ca(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=FS(r),new r((i,o)=>{let s=new Da({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Sa](){return this}pipe(...t){return by(t)(this)}toPromise(t){return t=FS(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function FS(n){var e;return(e=n??Cr.Promise)!==null&&e!==void 0?e:Promise}function K2(n){return n&&_e(n.next)&&_e(n.error)&&_e(n.complete)}function Y2(n){return n&&n instanceof as||K2(n)&&Vh(n)}function Cy(n){return _e(n?.lift)}function be(n){return e=>{if(Cy(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ee(n,e,t,r,i){return new tu(n,e,t,r,i)}var tu=class extends as{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Aa(){return be((n,e)=>{let t=null;n._refCount++;let r=Ee(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Ra=class extends he{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Cy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new bt;let t=this.getSubject();e.add(this.source.subscribe(Ee(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=bt.EMPTY)}return e}refCount(){return Aa()(this)}};var LS=Ta(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ct=(()=>{class n extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new $h(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new LS}next(t){Ca(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ca(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ca(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?_y:(this.currentObservers=null,o.push(t),new bt(()=>{this.currentObservers=null,os(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new he;return t.source=this,t}}return n.create=(e,t)=>new $h(e,t),n})(),$h=class extends ct{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:_y}};var tn=class extends ct{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var nu={now(){return(nu.delegate||Date).now()},delegate:void 0};var ru=class extends ct{constructor(e=1/0,t=1/0,r=nu){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Hh=class extends bt{constructor(e,t){super()}schedule(e,t=0){return this}};var iu={setInterval(n,e,...t){let{delegate:r}=iu;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=iu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var xa=class extends Hh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return iu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&iu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,os(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Na=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Na.now=nu.now;var Ma=class extends Na{constructor(e,t=Na.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Pa=new Ma(xa),Dy=Pa;var Wh=class extends xa{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var qh=class extends Ma{};var Sy=new qh(Wh);var Kn=new he(n=>n.complete());function zh(n){return n&&_e(n.schedule)}function VS(n){return n[n.length-1]}function Gh(n){return _e(VS(n))?n.pop():void 0}function uo(n){return zh(VS(n))?n.pop():void 0}function Ay(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function jS(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(r.next(d))}catch(f){s(f)}}function c(d){try{u(r.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):i(d.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function US(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function cs(n){return this instanceof cs?(this.v=n,this):new cs(n)}function BS(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(v){return function(w){return Promise.resolve(w).then(v,f)}}function a(v,w){r[v]&&(i[v]=function(R){return new Promise(function(S,F){o.push([v,R,S,F])>1||c(v,R)})},w&&(i[v]=w(i[v])))}function c(v,w){try{u(r[v](w))}catch(R){m(o[0][3],R)}}function u(v){v.value instanceof cs?Promise.resolve(v.value.v).then(d,f):m(o[0][2],v)}function d(v){c("next",v)}function f(v){c("throw",v)}function m(v,w){v(w),o.shift(),o.length&&c(o[0][0],o[0][1])}}function $S(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof US=="function"?US(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var Kh=n=>n&&typeof n.length=="number"&&typeof n!="function";function Yh(n){return _e(n?.then)}function Qh(n){return _e(n[Sa])}function Jh(n){return Symbol.asyncIterator&&_e(n?.[Symbol.asyncIterator])}function Xh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Q2(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Zh=Q2();function ef(n){return _e(n?.[Zh])}function tf(n){return BS(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield cs(t.read());if(i)return yield cs(void 0);yield yield cs(r)}}finally{t.releaseLock()}})}function nf(n){return _e(n?.getReader)}function Ct(n){if(n instanceof he)return n;if(n!=null){if(Qh(n))return J2(n);if(Kh(n))return X2(n);if(Yh(n))return Z2(n);if(Jh(n))return HS(n);if(ef(n))return eU(n);if(nf(n))return tU(n)}throw Xh(n)}function J2(n){return new he(e=>{let t=n[Sa]();if(_e(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function X2(n){return new he(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Z2(n){return new he(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Uh)})}function eU(n){return new he(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function HS(n){return new he(e=>{nU(n,e).catch(t=>e.error(t))})}function tU(n){return HS(tf(n))}function nU(n,e){var t,r,i,o;return jS(this,void 0,void 0,function*(){try{for(t=$S(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Vn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function ho(n,e=0){return be((t,r)=>{t.subscribe(Ee(r,i=>Vn(r,n,()=>r.next(i),e),()=>Vn(r,n,()=>r.complete(),e),i=>Vn(r,n,()=>r.error(i),e)))})}function fo(n,e=0){return be((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function WS(n,e){return Ct(n).pipe(fo(e),ho(e))}function qS(n,e){return Ct(n).pipe(fo(e),ho(e))}function zS(n,e){return new he(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function GS(n,e){return new he(t=>{let r;return Vn(t,e,()=>{r=n[Zh](),Vn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>_e(r?.return)&&r.return()})}function rf(n,e){if(!n)throw new Error("Iterable cannot be null");return new he(t=>{Vn(t,e,()=>{let r=n[Symbol.asyncIterator]();Vn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function KS(n,e){return rf(tf(n),e)}function YS(n,e){if(n!=null){if(Qh(n))return WS(n,e);if(Kh(n))return zS(n,e);if(Yh(n))return qS(n,e);if(Jh(n))return rf(n,e);if(ef(n))return GS(n,e);if(nf(n))return KS(n,e)}throw Xh(n)}function rt(n,e){return e?YS(n,e):Ct(n)}function se(...n){let e=uo(n);return rt(n,e)}function ka(n,e){let t=_e(n)?n:()=>n,r=i=>i.error(t());return new he(e?i=>e.schedule(r,0,i):r)}function Ry(n){return!!n&&(n instanceof he||_e(n.lift)&&_e(n.subscribe))}var _i=Ta(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function QS(n){return n instanceof Date&&!isNaN(n)}function Q(n,e){return be((t,r)=>{let i=0;t.subscribe(Ee(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:rU}=Array;function iU(n,e){return rU(e)?n(...e):n(e)}function of(n){return Q(e=>iU(n,e))}var{isArray:oU}=Array,{getPrototypeOf:sU,prototype:aU,keys:cU}=Object;function sf(n){if(n.length===1){let e=n[0];if(oU(e))return{args:e,keys:null};if(lU(e)){let t=cU(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function lU(n){return n&&typeof n=="object"&&sU(n)===aU}function af(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function $e(...n){let e=uo(n),t=Gh(n),{args:r,keys:i}=sf(n);if(r.length===0)return rt([],e);let o=new he(uU(r,e,i?s=>af(i,s):Dn));return t?o.pipe(of(t)):o}function uU(n,e,t=Dn){return r=>{JS(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)JS(e,()=>{let u=rt(n[c],e),d=!1;u.subscribe(Ee(r,f=>{o[c]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function JS(n,e,t){n?Vn(t,n,e):e()}function XS(n,e,t,r,i,o,s,a){let c=[],u=0,d=0,f=!1,m=()=>{f&&!c.length&&!u&&e.complete()},v=R=>u<r?w(R):c.push(R),w=R=>{o&&e.next(R),u++;let S=!1;Ct(t(R,d++)).subscribe(Ee(e,F=>{i?.(F),o?v(F):e.next(F)},()=>{S=!0},void 0,()=>{if(S)try{for(u--;c.length&&u<r;){let F=c.shift();s?Vn(e,s,()=>w(F)):w(F)}m()}catch(F){e.error(F)}}))};return n.subscribe(Ee(e,v,()=>{f=!0,m()})),()=>{a?.()}}function Nt(n,e,t=1/0){return _e(e)?Nt((r,i)=>Q((o,s)=>e(r,o,i,s))(Ct(n(r,i))),t):(typeof e=="number"&&(t=e),be((r,i)=>XS(r,i,n,t)))}function xy(n=1/0){return Nt(Dn,n)}function ZS(){return xy(1)}function Oa(...n){return ZS()(rt(n,uo(n)))}function cf(n){return new he(e=>{Ct(n()).subscribe(e)})}function Ny(...n){let e=Gh(n),{args:t,keys:r}=sf(n),i=new he(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let d=0;d<s;d++){let f=!1;Ct(t[d]).subscribe(Ee(o,m=>{f||(f=!0,u--),a[d]=m},()=>c--,void 0,()=>{(!c||!f)&&(u||o.next(r?af(r,a):a),o.complete())}))}});return e?i.pipe(of(e)):i}function My(n=0,e,t=Dy){let r=-1;return e!=null&&(zh(e)?t=e:r=e),new he(i=>{let o=QS(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function gt(n=0,e=Pa){return n<0&&(n=0),My(n,n,e)}function nn(n,e){return be((t,r)=>{let i=0;t.subscribe(Ee(r,o=>n.call(e,o,i++)&&r.next(o)))})}function po(n){return be((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Ee(t,void 0,void 0,s=>{o=Ct(n(s,po(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function eA(n,e,t,r,i){return(o,s)=>{let a=t,c=e,u=0;o.subscribe(Ee(s,d=>{let f=u++;c=a?n(c,d,f):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function wi(n,e){return _e(e)?Nt(n,e,1):Nt(n,1)}function mo(n){return be((e,t)=>{let r=!1;e.subscribe(Ee(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Yr(n){return n<=0?()=>Kn:be((e,t)=>{let r=0;e.subscribe(Ee(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function lf(n,e=Dn){return n=n??dU,be((t,r)=>{let i,o=!0;t.subscribe(Ee(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function dU(n,e){return n===e}function uf(n=hU){return be((e,t)=>{let r=!1;e.subscribe(Ee(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function hU(){return new _i}function ls(n){return be((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ei(n,e){let t=arguments.length>=2;return r=>r.pipe(n?nn((i,o)=>n(i,o,r)):Dn,Yr(1),t?mo(e):uf(()=>new _i))}function Py(n,e,t,r){return be((i,o)=>{let s;!e||typeof e=="function"?s=e:{duration:t,element:s,connector:r}=e;let a=new Map,c=w=>{a.forEach(w),w(o)},u=w=>c(R=>R.error(w)),d=0,f=!1,m=new tu(o,w=>{try{let R=n(w),S=a.get(R);if(!S){a.set(R,S=r?r():new ct);let F=v(R,S);if(o.next(F),t){let W=Ee(S,()=>{S.complete(),W?.unsubscribe()},void 0,void 0,()=>a.delete(R));m.add(Ct(t(F)).subscribe(W))}}S.next(s?s(w):w)}catch(R){u(R)}},()=>c(w=>w.complete()),u,()=>a.clear(),()=>(f=!0,d===0));i.subscribe(m);function v(w,R){let S=new he(F=>{d++;let W=R.subscribe(F);return()=>{W.unsubscribe(),--d===0&&f&&m.unsubscribe()}});return S.key=w,S}})}function Fa(n){return n<=0?()=>Kn:be((e,t)=>{let r=[];e.subscribe(Ee(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ky(n,e){let t=arguments.length>=2;return r=>r.pipe(n?nn((i,o)=>n(i,o,r)):Dn,Fa(1),t?mo(e):uf(()=>new _i))}function df(){return be((n,e)=>{let t,r=!1;n.subscribe(Ee(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function hf(n,e){return be(eA(n,e,arguments.length>=2,!0))}function La(...n){let e=uo(n);return be((t,r)=>{(e?Oa(n,t,e):Oa(n,t)).subscribe(r)})}function hn(n,e){return be((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Ee(r,c=>{i?.unsubscribe();let u=0,d=o++;Ct(n(c,d)).subscribe(i=Ee(r,f=>r.next(e?e(c,f,d,u++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function zt(n){return be((e,t)=>{Ct(n).subscribe(Ee(t,()=>t.complete(),eu)),!t.closed&&e.subscribe(t)})}function Gt(n,e,t){let r=_e(n)||e||t?{next:n,error:e,complete:t}:n;return r?be((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Ee(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Dn}var fU="https://g.co/ng/security#xss",J=class extends Error{code;constructor(e,t){super(Kf(e,t)),this.code=e}};function Kf(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}var UA=Symbol("InputSignalNode#UNSET"),pU=me(j({},yy),{transformFn:void 0,applyValueToInputSignal(n,e){Fh(n,e)}});function jA(n,e){let t=Object.create(pU);t.value=n,t.transformFn=e?.transform;function r(){if(Ph(t),t.value===UA)throw new J(-950,!1);return t.value}return r[Ln]=t,r}function Eu(n){return{toString:n}.toString()}var ff="__parameters__";function mU(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function BA(n,e,t){return Eu(()=>{let r=mU(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,d){let f=c.hasOwnProperty(ff)?c[ff]:Object.defineProperty(c,ff,{value:[]})[ff];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var su=globalThis;function et(n){for(let e in n)if(n[e]===et)return e;throw Error("Could not find renamed property on target object.")}function gU(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function jn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(jn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function tA(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var vU=et({__forward_ref__:et});function ar(n){return n.__forward_ref__=ar,n.toString=function(){return jn(this())},n}function Sn(n){return $A(n)?n():n}function $A(n){return typeof n=="function"&&n.hasOwnProperty(vU)&&n.__forward_ref__===ar}function U(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Di(n){return{providers:n.providers||[],imports:n.imports||[]}}function Yf(n){return nA(n,WA)||nA(n,qA)}function HA(n){return Yf(n)!==null}function nA(n,e){return n.hasOwnProperty(e)?n[e]:null}function yU(n){let e=n&&(n[WA]||n[qA]);return e||null}function rA(n){return n&&(n.hasOwnProperty(iA)||n.hasOwnProperty(_U))?n[iA]:null}var WA=et({\u0275prov:et}),iA=et({\u0275inj:et}),qA=et({ngInjectableDef:et}),_U=et({ngInjectorDef:et}),$=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=U({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function zA(n){return n&&!!n.\u0275providers}var wU=et({\u0275cmp:et}),EU=et({\u0275dir:et}),IU=et({\u0275pipe:et}),TU=et({\u0275mod:et}),If=et({\u0275fac:et}),lu=et({__NG_ELEMENT_ID__:et}),oA=et({__NG_ENV_ID__:et});function W_(n){return typeof n=="string"?n:n==null?"":String(n)}function bU(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():W_(n)}function CU(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new J(-200,n)}function q_(n,e){throw new J(-201,!1)}var Se=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Se||{}),Ky;function GA(){return Ky}function Un(n){let e=Ky;return Ky=n,e}function KA(n,e,t){let r=Yf(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Se.Optional)return null;if(e!==void 0)return e;q_(n,"Injector")}var DU={},uu=DU,Yy="__NG_DI_FLAG__",Tf="ngTempTokenPath",SU="ngTokenPath",AU=/\n/gm,RU="\u0275",sA="__source",Ba;function xU(){return Ba}function go(n){let e=Ba;return Ba=n,e}function NU(n,e=Se.Default){if(Ba===void 0)throw new J(-203,!1);return Ba===null?KA(n,void 0,e):Ba.get(n,e&Se.Optional?null:void 0,e)}function re(n,e=Se.Default){return(GA()||NU)(Sn(n),e)}function D(n,e=Se.Default){return re(n,Qf(e))}function Qf(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Qy(n){let e=[];for(let t=0;t<n.length;t++){let r=Sn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new J(900,!1);let i,o=Se.Default;for(let s=0;s<r.length;s++){let a=r[s],c=MU(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(re(i,o))}else e.push(re(r))}return e}function YA(n,e){return n[Yy]=e,n.prototype[Yy]=e,n}function MU(n){return n[Yy]}function PU(n,e,t,r){let i=n[Tf];throw e[sA]&&i.unshift(e[sA]),n.message=kU(`
`+n.message,i,t,r),n[SU]=i,n[Tf]=null,n}function kU(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==RU?n.slice(2):n;let i=jn(e);if(Array.isArray(e))i=e.map(jn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):jn(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(AU,`
  `)}`}var Ie=YA(BA("Optional"),8);var OU=YA(BA("SkipSelf"),4);function hs(n,e){let t=n.hasOwnProperty(If);return t?n[If]:null}function z_(n,e){n.forEach(t=>Array.isArray(t)?z_(t,e):e(t))}function QA(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function bf(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function FU(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function LU(n,e,t){let r=Iu(n,e);return r>=0?n[r|1]=t:(r=~r,FU(n,r,e,t)),r}function Oy(n,e){let t=Iu(n,e);if(t>=0)return n[t|1]}function Iu(n,e){return VU(n,e,1)}function VU(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Ha={},or=[],Wa=new $(""),JA=new $("",-1),XA=new $(""),Cf=class{get(e,t=uu){if(t===uu){let r=new Error(`NullInjectorError: No provider for ${jn(e)}!`);throw r.name="NullInjectorError",r}return t}};function ZA(n,e){let t=n[TU]||null;if(!t&&e===!0)throw new Error(`Type ${jn(n)} does not have '\u0275mod' property.`);return t}function fs(n){return n[wU]||null}function eR(n){return n[EU]||null}function tR(n){return n[IU]||null}function nR(n){let e=fs(n)||eR(n)||tR(n);return e!==null&&e.standalone}function it(n){return{\u0275providers:n}}function UU(...n){return{\u0275providers:rR(!0,n),\u0275fromNgModule:!0}}function rR(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return z_(e,s=>{let a=s;Jy(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&iR(i,o),t}function iR(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];G_(i,o=>{e(o,r)})}}function Jy(n,e,t,r){if(n=Sn(n),!n)return!1;let i=null,o=rA(n),s=!o&&fs(n);if(!o&&!s){let c=n.ngModule;if(o=rA(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)Jy(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{z_(o.imports,d=>{Jy(d,e,t,r)&&(u||=[],u.push(d))})}finally{}u!==void 0&&iR(u,e)}if(!a){let u=hs(i)||(()=>new i);e({provide:i,useFactory:u,deps:or},i),e({provide:XA,useValue:i,multi:!0},i),e({provide:Wa,useValue:()=>re(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=n;G_(c,d=>{e(d,u)})}}else return!1;return i!==n&&n.providers!==void 0}function G_(n,e){for(let t of n)zA(t)&&(t=t.\u0275providers),Array.isArray(t)?G_(t,e):e(t)}var jU=et({provide:String,useValue:et});function oR(n){return n!==null&&typeof n=="object"&&jU in n}function BU(n){return!!(n&&n.useExisting)}function $U(n){return!!(n&&n.useFactory)}function qa(n){return typeof n=="function"}function HU(n){return!!n.useClass}var Jf=new $(""),gf={},WU={},Fy;function K_(){return Fy===void 0&&(Fy=new Cf),Fy}var pn=class{},du=class extends pn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Zy(e,s=>this.processProvider(s)),this.records.set(JA,Va(void 0,this)),i.has("environment")&&this.records.set(pn,Va(void 0,this));let o=this.records.get(Jf);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(XA,or,Se.Self))}destroy(){au(this),this._destroyed=!0;let e=Re(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Re(e)}}onDestroy(e){return au(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){au(this);let t=go(this),r=Un(void 0),i;try{return e()}finally{go(t),Un(r)}}get(e,t=uu,r=Se.Default){if(au(this),e.hasOwnProperty(oA))return e[oA](this);r=Qf(r);let i,o=go(this),s=Un(void 0);try{if(!(r&Se.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=YU(e)&&Yf(e);u&&this.injectableDefInScope(u)?c=Va(Xy(e),gf):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&Se.Self?K_():this.parent;return t=r&Se.Optional&&t===uu?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Tf]=a[Tf]||[]).unshift(jn(e)),o)throw a;return PU(a,e,"R3InjectorError",this.source)}else throw a}finally{Un(s),go(o)}}resolveInjectorInitializers(){let e=Re(null),t=go(this),r=Un(void 0),i;try{let o=this.get(Wa,or,Se.Self);for(let s of o)s()}finally{go(t),Un(r),Re(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(jn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Sn(e);let t=qa(e)?e:Sn(e&&e.provide),r=zU(e);if(!qa(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Va(void 0,gf,!0),i.factory=()=>Qy(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Re(null);try{return t.value===gf&&(t.value=WU,t.value=t.factory()),typeof t.value=="object"&&t.value&&KU(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Re(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Sn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Xy(n){let e=Yf(n),t=e!==null?e.factory:hs(n);if(t!==null)return t;if(n instanceof $)throw new J(204,!1);if(n instanceof Function)return qU(n);throw new J(204,!1)}function qU(n){if(n.length>0)throw new J(204,!1);let t=yU(n);return t!==null?()=>t.factory(n):()=>new n}function zU(n){if(oR(n))return Va(void 0,n.useValue);{let e=sR(n);return Va(e,gf)}}function sR(n,e,t){let r;if(qa(n)){let i=Sn(n);return hs(i)||Xy(i)}else if(oR(n))r=()=>Sn(n.useValue);else if($U(n))r=()=>n.useFactory(...Qy(n.deps||[]));else if(BU(n))r=()=>re(Sn(n.useExisting));else{let i=Sn(n&&(n.useClass||n.provide));if(GU(n))r=()=>new i(...Qy(n.deps));else return hs(i)||Xy(i)}return r}function au(n){if(n.destroyed)throw new J(205,!1)}function Va(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function GU(n){return!!n.deps}function KU(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function YU(n){return typeof n=="function"||typeof n=="object"&&n instanceof $}function Zy(n,e){for(let t of n)Array.isArray(t)?Zy(t,e):t&&zA(t)?Zy(t.\u0275providers,e):e(t)}function rn(n,e){n instanceof du&&au(n);let t,r=go(n),i=Un(void 0);try{return e()}finally{go(r),Un(i)}}function aR(){return GA()!==void 0||xU()!=null}function Za(n){if(!aR())throw new J(-203,!1)}function QU(n){return typeof n=="function"}var Si=0,Ce=1,fe=2,xn=3,Sr=4,Rr=5,hu=6,Df=7,fn=8,za=9,_o=10,kt=11,fu=12,aA=13,ec=14,Ar=15,Ga=16,Ua=17,Ka=18,Xf=19,cR=20,vo=21,vf=22,ps=23,Yn=24,An=25,lR=1;var ms=7,Sf=8,Af=9,Rn=10;function yo(n){return Array.isArray(n)&&typeof n[lR]=="object"}function Ai(n){return Array.isArray(n)&&n[lR]===!0}function Y_(n){return(n.flags&4)!==0}function Zf(n){return n.componentOffset>-1}function ep(n){return(n.flags&1)===1}function wo(n){return!!n.template}function e_(n){return(n[fe]&512)!==0}function Tu(n){return(n[fe]&256)===256}var t_=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function uR(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Do=(()=>{let n=()=>dR;return n.ngInherit=!0,n})();function dR(n){return n.type.prototype.ngOnChanges&&(n.setInput=XU),JU}function JU(){let n=fR(this),e=n?.current;if(e){let t=n.previous;if(t===Ha)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function XU(n,e,t,r,i){let o=this.declaredInputs[r],s=fR(n)||ZU(n,{previous:Ha,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new t_(u&&u.currentValue,t,c===Ha),uR(n,e,i,t)}var hR="__ngSimpleChanges__";function fR(n){return n[hR]||null}function ZU(n,e){return n[hR]=e}var cA=null;var sr=function(n,e,t){cA?.(n,e,t)},ej="svg",tj="math";function Jr(n){for(;Array.isArray(n);)n=n[Si];return n}function pR(n,e){return Jr(e[n])}function cr(n,e){return Jr(e[n.index])}function Q_(n,e){return n.data[e]}function nj(n,e){return n[e]}function So(n,e){let t=e[n];return yo(t)?t:t[Si]}function J_(n){return(n[fe]&128)===128}function rj(n){return Ai(n[xn])}function Eo(n,e){return e==null?null:n[e]}function mR(n){n[Ua]=0}function X_(n){n[fe]&1024||(n[fe]|=1024,J_(n)&&bu(n))}function ij(n,e){for(;n>0;)e=e[ec],n--;return e}function tp(n){return!!(n[fe]&9216||n[Yn]?.dirty)}function n_(n){n[_o].changeDetectionScheduler?.notify(9),n[fe]&64&&(n[fe]|=1024),tp(n)&&bu(n)}function bu(n){n[_o].changeDetectionScheduler?.notify(0);let e=gs(n);for(;e!==null&&!(e[fe]&8192||(e[fe]|=8192,!J_(e)));)e=gs(e)}function gR(n,e){if(Tu(n))throw new J(911,!1);n[vo]===null&&(n[vo]=[]),n[vo].push(e)}function oj(n,e){if(n[vo]===null)return;let t=n[vo].indexOf(e);t!==-1&&n[vo].splice(t,1)}function gs(n){let e=n[xn];return Ai(e)?e[xn]:e}function sj(n){return n[Df]??=[]}function aj(n){return n.cleanup??=[]}var Ne={lFrame:bR(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var r_=!1;function cj(){return Ne.lFrame.elementDepthCount}function lj(){Ne.lFrame.elementDepthCount++}function uj(){Ne.lFrame.elementDepthCount--}function vR(){return Ne.bindingsEnabled}function dj(){return Ne.skipHydrationRootTNode!==null}function hj(n){return Ne.skipHydrationRootTNode===n}function fj(){Ne.skipHydrationRootTNode=null}function Oe(){return Ne.lFrame.lView}function on(){return Ne.lFrame.tView}function lt(n){return Ne.lFrame.contextLView=n,n[fn]}function ut(n){return Ne.lFrame.contextLView=null,n}function mn(){let n=yR();for(;n!==null&&n.type===64;)n=n.parent;return n}function yR(){return Ne.lFrame.currentTNode}function pj(){let n=Ne.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Is(n,e){let t=Ne.lFrame;t.currentTNode=n,t.isParent=e}function Z_(){return Ne.lFrame.isParent}function _R(){Ne.lFrame.isParent=!1}function wR(){return r_}function Rf(n){let e=r_;return r_=n,e}function np(){let n=Ne.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function mj(n){return Ne.lFrame.bindingIndex=n}function tc(){return Ne.lFrame.bindingIndex++}function gj(n){let e=Ne.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function vj(){return Ne.lFrame.inI18n}function yj(n,e){let t=Ne.lFrame;t.bindingIndex=t.bindingRootIndex=n,i_(e)}function _j(){return Ne.lFrame.currentDirectiveIndex}function i_(n){Ne.lFrame.currentDirectiveIndex=n}function wj(n){let e=Ne.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function ER(n){Ne.lFrame.currentQueryIndex=n}function Ej(n){let e=n[Ce];return e.type===2?e.declTNode:e.type===1?n[Rr]:null}function IR(n,e,t){if(t&Se.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&Se.Host);)if(i=Ej(o),i===null||(o=o[ec],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Ne.lFrame=TR();return r.currentTNode=e,r.lView=n,!0}function ew(n){let e=TR(),t=n[Ce];Ne.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function TR(){let n=Ne.lFrame,e=n===null?null:n.child;return e===null?bR(n):e}function bR(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function CR(){let n=Ne.lFrame;return Ne.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var DR=CR;function tw(){let n=CR();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ij(n){return(Ne.lFrame.contextLView=ij(n,Ne.lFrame.contextLView))[fn]}function Ts(){return Ne.lFrame.selectedIndex}function vs(n){Ne.lFrame.selectedIndex=n}function nw(){let n=Ne.lFrame;return Q_(n.tView,n.selectedIndex)}function Tj(){return Ne.lFrame.currentNamespace}var SR=!0;function rp(){return SR}function ip(n){SR=n}function bj(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=dR(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function op(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function yf(n,e,t){AR(n,e,3,t)}function _f(n,e,t,r){(n[fe]&3)===t&&AR(n,e,t,r)}function Ly(n,e){let t=n[fe];(t&3)===e&&(t&=16383,t+=1,n[fe]=t)}function AR(n,e,t,r){let i=r!==void 0?n[Ua]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Ua]+=65536),(a<o||o==-1)&&(Cj(n,t,e,c),n[Ua]=(n[Ua]&4294901760)+c+2),c++}function lA(n,e){sr(4,n,e);let t=Re(null);try{e.call(n)}finally{Re(t),sr(5,n,e)}}function Cj(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[fe]>>14<n[Ua]>>16&&(n[fe]&3)===e&&(n[fe]+=16384,lA(a,o)):lA(a,o)}var $a=-1,ys=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function Dj(n){return n instanceof ys}function Sj(n){return(n.flags&8)!==0}function Aj(n){return(n.flags&16)!==0}function Rj(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];Nj(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function xj(n){return n===3||n===4||n===6}function Nj(n){return n.charCodeAt(0)===64}function Ya(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?uA(n,t,i,null,e[++r]):uA(n,t,i,null,null))}}return n}function uA(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var Vy={},o_=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Qf(r);let i=this.injector.get(e,Vy,r);return i!==Vy||t===Vy?i:this.parentInjector.get(e,t,r)}};function RR(n){return n!==$a}function xf(n){return n&32767}function Mj(n){return n>>16}function Nf(n,e){let t=Mj(n),r=e;for(;t>0;)r=r[ec],t--;return r}var s_=!0;function Mf(n){let e=s_;return s_=n,e}var Pj=256,xR=Pj-1,NR=5,kj=0,Qr={};function Oj(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(lu)&&(r=t[lu]),r==null&&(r=t[lu]=kj++);let i=r&xR,o=1<<i;e.data[n+(i>>NR)]|=o}function Pf(n,e){let t=MR(n,e);if(t!==-1)return t;let r=e[Ce];r.firstCreatePass&&(n.injectorIndex=e.length,Uy(r.data,n),Uy(e,null),Uy(r.blueprint,null));let i=rw(n,e),o=n.injectorIndex;if(RR(i)){let s=xf(i),a=Nf(i,e),c=a[Ce].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function Uy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function MR(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function rw(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=LR(i),r===null)return $a;if(t++,i=i[ec],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return $a}function a_(n,e,t){Oj(n,e,t)}function PR(n,e,t){if(t&Se.Optional||n!==void 0)return n;q_(e,"NodeInjector")}function kR(n,e,t,r){if(t&Se.Optional&&r===void 0&&(r=null),!(t&(Se.Self|Se.Host))){let i=n[za],o=Un(void 0);try{return i?i.get(e,r,t&Se.Optional):KA(e,r,t&Se.Optional)}finally{Un(o)}}return PR(r,e,t)}function OR(n,e,t,r=Se.Default,i){if(n!==null){if(e[fe]&2048&&!(r&Se.Self)){let s=jj(n,e,t,r,Qr);if(s!==Qr)return s}let o=FR(n,e,t,r,Qr);if(o!==Qr)return o}return kR(e,t,r,i)}function FR(n,e,t,r,i){let o=Vj(t);if(typeof o=="function"){if(!IR(e,n,r))return r&Se.Host?PR(i,t,r):kR(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&Se.Optional))q_(t);else return s}finally{DR()}}else if(typeof o=="number"){let s=null,a=MR(n,e),c=$a,u=r&Se.Host?e[Ar][Rr]:null;for((a===-1||r&Se.SkipSelf)&&(c=a===-1?rw(n,e):e[a+8],c===$a||!hA(r,!1)?a=-1:(s=e[Ce],a=xf(c),e=Nf(c,e)));a!==-1;){let d=e[Ce];if(dA(o,a,d.data)){let f=Fj(a,e,t,s,r,u);if(f!==Qr)return f}c=e[a+8],c!==$a&&hA(r,e[Ce].data[a+8]===u)&&dA(o,a,e)?(s=d,a=xf(c),e=Nf(c,e)):a=-1}}return i}function Fj(n,e,t,r,i,o){let s=e[Ce],a=s.data[n+8],c=r==null?Zf(a)&&s_:r!=s&&(a.type&3)!==0,u=i&Se.Host&&o===a,d=Lj(a,s,t,c,u);return d!==null?Qa(e,s,d,a):Qr}function Lj(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,u=n.directiveEnd,d=o>>20,f=r?a:a+d,m=i?a+d:u;for(let v=f;v<m;v++){let w=s[v];if(v<c&&t===w||v>=c&&w.type===t)return v}if(i){let v=s[c];if(v&&wo(v)&&v.type===t)return c}return null}function Qa(n,e,t,r){let i=n[t],o=e.data;if(Dj(i)){let s=i;s.resolving&&CU(bU(o[t]));let a=Mf(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?Un(s.injectImpl):null,d=IR(n,r,Se.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&bj(t,o[t],e)}finally{u!==null&&Un(u),Mf(a),s.resolving=!1,DR()}}return i}function Vj(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(lu)?n[lu]:void 0;return typeof e=="number"?e>=0?e&xR:Uj:e}function dA(n,e,t){let r=1<<n;return!!(t[e+(n>>NR)]&r)}function hA(n,e){return!(n&Se.Self)&&!(n&Se.Host&&e)}var ds=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return OR(this._tNode,this._lView,e,Qf(r),t)}};function Uj(){return new ds(mn(),Oe())}function xr(n){return Eu(()=>{let e=n.prototype.constructor,t=e[If]||c_(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[If]||c_(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function c_(n){return $A(n)?()=>{let e=c_(Sn(n));return e&&e()}:hs(n)}function jj(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[fe]&2048&&!(s[fe]&512);){let a=FR(o,s,t,r|Se.Self,Qr);if(a!==Qr)return a;let c=o.parent;if(!c){let u=s[cR];if(u){let d=u.get(t,Qr,r);if(d!==Qr)return d}c=LR(s),s=s[ec]}o=c}return i}function LR(n){let e=n[Ce],t=e.type;return t===2?e.declTNode:t===1?n[Rr]:null}function fA(n,e=null,t=null,r){let i=VR(n,e,t,r);return i.resolveInjectorInitializers(),i}function VR(n,e=null,t=null,r,i=new Set){let o=[t||or,UU(n)];return r=r||(typeof n=="object"?void 0:jn(n)),new du(o,e||K_(),r||null,i)}var Ae=class n{static THROW_IF_NOT_FOUND=uu;static NULL=new Cf;static create(e,t){if(Array.isArray(e))return fA({name:""},t,e,"");{let r=e.name??"";return fA({name:r},e.parent,e.providers,r)}}static \u0275prov=U({token:n,providedIn:"any",factory:()=>re(JA)});static __NG_ELEMENT_ID__=-1};var Bj=new $("");Bj.__NG_ELEMENT_ID__=n=>{let e=mn();if(e===null)throw new J(204,!1);if(e.type&2)return e.value;if(n&Se.Optional)return null;throw new J(204,!1)};var UR=!1,Ri=(()=>{class n{static __NG_ELEMENT_ID__=$j;static __NG_ENV_ID__=t=>t}return n})(),kf=class extends Ri{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return gR(this._lView,e),()=>oj(this._lView,e)}};function $j(){return new kf(Oe())}var _s=class{},sp=new $("",{providedIn:"root",factory:()=>!1});var jR=new $(""),BR=new $(""),ei=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new tn(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=U({token:n,providedIn:"root",factory:()=>new n})}return n})(),ap=(()=>{class n{internalPendingTasks=D(ei);scheduler=D(_s);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(12),this.internalPendingTasks.remove(t))}}run(t){return y(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=U({token:n,providedIn:"root",factory:()=>new n})}return n})(),l_=class extends ct{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,aR()&&(this.destroyRef=D(Ri,{optional:!0})??void 0,this.pendingTasks=D(ei,{optional:!0})??void 0)}emit(e){let t=Re(null);try{super.next(e)}finally{Re(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof bt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Kt=l_;function pu(...n){}function $R(n){let e,t;function r(){n=pu;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function pA(n){return queueMicrotask(()=>n()),()=>{n=pu}}var iw="isAngularZone",Of=iw+"_ID",Hj=0,pe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Kt(!1);onMicrotaskEmpty=new Kt(!1);onStable=new Kt(!1);onError=new Kt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=UR}=e;if(typeof Zone>"u")throw new J(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,zj(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(iw)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new J(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new J(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Wj,pu,pu);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Wj={};function ow(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function qj(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){$R(()=>{n.callbackScheduled=!1,u_(n),n.isCheckStableRunning=!0,ow(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),u_(n)}function zj(n){let e=()=>{qj(n)},t=Hj++;n._inner=n._inner.fork({name:"angular",properties:{[iw]:!0,[Of]:t,[Of+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(Gj(c))return r.invokeTask(o,s,a,c);try{return mA(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),gA(n)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return mA(n),r.invoke(o,s,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Kj(c)&&e(),gA(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,u_(n),ow(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function u_(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function mA(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function gA(n){n._nesting--,ow(n)}var d_=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Kt;onMicrotaskEmpty=new Kt;onStable=new Kt;onError=new Kt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Gj(n){return HR(n,"__ignore_ng_zone__")}function Kj(n){return HR(n,"__scheduler_tick__")}function HR(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Ii=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Yj=new $("",{providedIn:"root",factory:()=>{let n=D(pe),e=D(Ii);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function vA(n,e){return jA(n,e)}function Qj(n){return jA(UA,n)}var WR=(vA.required=Qj,vA);function Jj(){return cp(mn(),Oe())}function cp(n,e){return new lr(cr(n,e))}var lr=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=Jj}return n})();var yA=new Set;function ti(n){yA.has(n)||(yA.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Xj(n){return typeof n=="function"&&n[Ln]!==void 0}function ee(n,e){ti("NgSignals");let t=AS(n),r=t[Ln];return e?.equal&&(r.equal=e.equal),t.set=i=>Fh(r,i),t.update=i=>RS(r,i),t.asReadonly=Zj.bind(t),t}function Zj(){let n=this[Ln];if(n.readonlyFn===void 0){let e=()=>this();e[Ln]=n,n.readonlyFn=e}return n.readonlyFn}function qR(n){return Xj(n)&&typeof n.set=="function"}function zR(n){return(n.flags&128)===128}var GR=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(GR||{}),KR=new Map,eB=0;function tB(){return eB++}function nB(n){KR.set(n[Xf],n)}function h_(n){KR.delete(n[Xf])}var _A="__ngContext__";function Io(n,e){yo(e)?(n[_A]=e[Xf],nB(e)):n[_A]=e}function YR(n){return JR(n[fu])}function QR(n){return JR(n[Sr])}function JR(n){for(;n!==null&&!Ai(n);)n=n[Sr];return n}var f_;function XR(n){f_=n}function rB(){if(f_!==void 0)return f_;if(typeof document<"u")return document;throw new J(210,!1)}var sw=new $("",{providedIn:"root",factory:()=>iB}),iB="ng",aw=new $(""),Dt=new $("",{providedIn:"platform",factory:()=>"unknown"});var cw=new $("",{providedIn:"root",factory:()=>rB().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var oB="h",sB="b";var ZR=!1,aB=new $("",{providedIn:"root",factory:()=>ZR});var ex=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(ex||{}),lp=new $("");var cB=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=U({token:n,providedIn:"root",factory:()=>new n})}return n})();var lB=()=>null;function lw(n,e,t=!1){return lB(n,e,t)}function tx(n,e){let t=n.contentQueries;if(t!==null){let r=Re(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];ER(o),a.contentQueries(2,e[s],s)}}}finally{Re(r)}}}function p_(n,e,t){ER(0);let r=Re(null);try{e(n,t)}finally{Re(r)}}function uw(n,e,t){if(Y_(e)){let r=Re(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Re(r)}}}var Xr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Xr||{});var m_=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${fU})`}};function dw(n){return n instanceof m_?n.changingThisBreaksApplicationSecurity:n}var uB=/^>|^->|<!--|-->|--!>|<!-$/g,dB=/(<|>)/g,hB="\u200B$1\u200B";function fB(n){return n.replace(uB,e=>e.replace(dB,hB))}function nx(n){return n instanceof Function?n():n}var To=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(To||{});function pB(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var rx="ng-template";function mB(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&pB(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(hw(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function hw(n){return n.type===4&&n.value!==rx}function gB(n,e,t){let r=n.type===4&&!t?rx:n.value;return e===r}function vB(n,e,t){let r=4,i=n.attrs,o=i!==null?wB(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Dr(r)&&!Dr(c))return!1;if(s&&Dr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!gB(n,c,t)||c===""&&e.length===1){if(Dr(r))return!1;s=!0}}else if(r&8){if(i===null||!mB(n,i,c,t)){if(Dr(r))return!1;s=!0}}else{let u=e[++a],d=yB(c,i,hw(n),t);if(d===-1){if(Dr(r))return!1;s=!0;continue}if(u!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&u!==f){if(Dr(r))return!1;s=!0}}}}return Dr(r)||s}function Dr(n){return(n&1)===0}function yB(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return EB(e,n)}function _B(n,e,t=!1){for(let r=0;r<e.length;r++)if(vB(n,e[r],t))return!0;return!1}function wB(n){for(let e=0;e<n.length;e++){let t=n[e];if(xj(t))return e}return n.length}function EB(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function wA(n,e){return n?":not("+e.trim()+")":e}function IB(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Dr(s)&&(e+=wA(o,i),i=""),r=s,o=o||!Dr(r);t++}return i!==""&&(e+=wA(o,i)),e}function TB(n){return n.map(IB).join(",")}function bB(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Dr(i))break;i=o}r++}return{attrs:e,classes:t}}var Ao={};function k(n=1){ix(on(),Oe(),Ts()+n,!1)}function ix(n,e,t,r){if(!r)if((e[fe]&3)===3){let o=n.preOrderCheckHooks;o!==null&&yf(e,o,t)}else{let o=n.preOrderHooks;o!==null&&_f(e,o,0,t)}vs(t)}function Me(n,e=Se.Default){let t=Oe();if(t===null)return re(n,e);let r=mn();return OR(r,t,Sn(n),e)}function ox(n,e,t,r,i,o){let s=Re(null);try{let a=null;i&To.SignalBased&&(a=e[r][Ln]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&To.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):uR(e,a,r,o)}finally{Re(s)}}function CB(n,e){return n.createText(e)}function DB(n,e,t){n.setValue(e,t)}function SB(n,e){return n.createComment(fB(e))}function sx(n,e,t){return n.createElement(e,t)}function Ff(n,e,t,r,i){n.insertBefore(e,t,r,i)}function ax(n,e,t){n.appendChild(e,t)}function EA(n,e,t,r,i){r!==null?Ff(n,e,t,r,i):ax(n,e,t)}function AB(n,e,t){n.removeChild(null,e,t)}function RB(n,e,t){n.setAttribute(e,"style",t)}function xB(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function cx(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Rj(n,e,r),i!==null&&xB(n,e,i),o!==null&&RB(n,e,o)}function up(n,e,t,r,i,o,s,a,c,u,d){let f=e.blueprint.slice();return f[Si]=i,f[fe]=r|4|128|8|64|1024,(u!==null||n&&n[fe]&2048)&&(f[fe]|=2048),mR(f),f[xn]=f[ec]=n,f[fn]=t,f[_o]=s||n&&n[_o],f[kt]=a||n&&n[kt],f[za]=c||n&&n[za]||null,f[Rr]=o,f[Xf]=tB(),f[hu]=d,f[cR]=u,f[Ar]=e.type==2?n[Ar]:f,f}function lx(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function ux(n,e,t,r,i){let o=Ts(),s=r&2;try{vs(-1),s&&e.length>An&&ix(n,e,An,!1),sr(s?2:0,i),t(r,i)}finally{vs(o),sr(s?3:1,i)}}function fw(n,e,t){vR()&&(jB(n,e,t,cr(t,e)),(t.flags&64)===64&&px(n,e,t))}function pw(n,e,t=cr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function dx(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=mw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function mw(n,e,t,r,i,o,s,a,c,u,d){let f=An+r,m=f+i,v=NB(f,m),w=typeof u=="function"?u():u;return v[Ce]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:d}}function NB(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ao);return t}function MB(n,e,t,r){let o=r.get(aB,ZR)||t===Xr.ShadowDom,s=n.selectRootElement(e,o);return PB(s),s}function PB(n){kB(n)}var kB=()=>null;function IA(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=To.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let u=o;if(i!==null){if(!i.hasOwnProperty(o))continue;u=i[o]}n===0?TA(r,t,u,a,c):TA(r,t,u,a)}return r}function TA(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function OB(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,u=null;for(let d=r;d<i;d++){let f=o[d],m=t?t.get(f):null,v=m?m.inputs:null,w=m?m.outputs:null;c=IA(0,f.inputs,d,c,v),u=IA(1,f.outputs,d,u,w);let R=c!==null&&s!==null&&!hw(e)?JB(c,d,s):null;a.push(R)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function FB(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function hx(n,e,t,r,i,o,s,a){let c=cr(e,t),u=e.inputs,d;!a&&u!=null&&(d=u[r])?(vw(n,t,d,r,i),Zf(e)&&LB(t,e.index)):e.type&3?(r=FB(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function LB(n,e){let t=So(e,n);t[fe]&16||(t[fe]|=64)}function gw(n,e,t,r){if(vR()){let i=r===null?null:{"":-1},o=$B(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&fx(n,e,t,s,i,a),i&&HB(t,r,i)}t.mergedAttrs=Ya(t.mergedAttrs,t.attrs)}function fx(n,e,t,r,i,o){for(let u=0;u<r.length;u++)a_(Pf(t,e),n,r[u].type);qB(t,n.data.length,r.length);for(let u=0;u<r.length;u++){let d=r[u];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=lx(n,e,r.length,null);for(let u=0;u<r.length;u++){let d=r[u];t.mergedAttrs=Ya(t.mergedAttrs,d.hostAttrs),zB(n,t,e,c,d),WB(c,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}OB(n,t,o)}function VB(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;UB(s)!=a&&s.push(a),s.push(t,r,o)}}function UB(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function jB(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Zf(t)&&GB(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Pf(t,e),Io(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],u=Qa(e,n,a,t);if(Io(u,e),s!==null&&QB(e,a-i,u,c,t,s),wo(c)){let d=So(t.index,e);d[fn]=Qa(e,n,a,t)}}}function px(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=_j();try{vs(o);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];i_(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&BB(c,u)}}finally{vs(-1),i_(s)}}function BB(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function $B(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(_B(e,s.selectors,!1))if(r||(r=[]),wo(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;g_(n,e,c)}else r.unshift(s),g_(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function g_(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function HB(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new J(-301,!1);r.push(e[i],o)}}}function WB(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;wo(e)&&(t[""]=n)}}function qB(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function zB(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=hs(i.type,!0)),s=new ys(o,wo(i),Me);n.blueprint[r]=s,t[r]=s,VB(n,e,r,lx(n,t,i.hostVars,Ao),i)}function mx(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function GB(n,e,t){let r=cr(e,n),i=dx(t),o=n[_o].rendererFactory,s=dp(n,up(n,i,null,mx(t),r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=s}function KB(n,e,t,r,i,o){let s=cr(n,e);YB(e[kt],s,o,n.value,t,r,i)}function YB(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?W_(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function QB(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],d=s[a++],f=s[a++];ox(r,t,c,u,d,f)}}function JB(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function gx(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function dp(n,e){return n[fu]?n[aA][Sr]=e:n[fu]=e,n[aA]=e,e}function vx(n,e){let t=n[za],r=t?t.get(Ii,null):null;r&&r.handleError(e)}function vw(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],u=e[s],d=n.data[s];ox(d,u,r,a,c,i)}}function XB(n,e){let t=So(e,n),r=t[Ce];ZB(r,t);let i=t[Si];i!==null&&t[hu]===null&&(t[hu]=lw(i,t[za])),yw(r,t,t[fn])}function ZB(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function yw(n,e,t){ew(e);try{let r=n.viewQuery;r!==null&&p_(1,r,t);let i=n.template;i!==null&&ux(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ka]?.finishViewCreation(n),n.staticContentQueries&&tx(n,e),n.staticViewQueries&&p_(2,n.viewQuery,t);let o=n.components;o!==null&&e$(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[fe]&=-5,tw()}}function e$(n,e){for(let t=0;t<e.length;t++)XB(n,e[t])}var Ti=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ti||{}),t$;function _w(n,e){return t$(n,e)}function ja(n,e,t,r,i){if(r!=null){let o,s=!1;Ai(r)?o=r:yo(r)&&(s=!0,r=r[Si]);let a=Jr(r);n===0&&t!==null?i==null?ax(e,t,a):Ff(e,t,a,i||null,!0):n===1&&t!==null?Ff(e,t,a,i||null,!0):n===2?AB(e,a,s):n===3&&e.destroyNode(a),o!=null&&p$(e,n,o,t,i)}}function n$(n,e){yx(n,e),e[Si]=null,e[Rr]=null}function r$(n,e,t,r,i,o){r[Si]=i,r[Rr]=e,pp(n,r,t,1,i,o)}function yx(n,e){e[_o].changeDetectionScheduler?.notify(10),pp(n,e,e[kt],2,null,null)}function i$(n){let e=n[fu];if(!e)return jy(n[Ce],n);for(;e;){let t=null;if(yo(e))t=e[fu];else{let r=e[Rn];r&&(t=r)}if(!t){for(;e&&!e[Sr]&&e!==n;)yo(e)&&jy(e[Ce],e),e=e[xn];e===null&&(e=n),yo(e)&&jy(e[Ce],e),t=e&&e[Sr]}e=t}}function o$(n,e,t,r){let i=Rn+r,o=t.length;r>0&&(t[i-1][Sr]=e),r<o-Rn?(e[Sr]=t[i],QA(t,Rn+r,e)):(t.push(e),e[Sr]=null),e[xn]=t;let s=e[Ga];s!==null&&t!==s&&_x(s,e);let a=e[Ka];a!==null&&a.insertView(n),n_(e),e[fe]|=128}function _x(n,e){let t=n[Af],r=e[xn];if(yo(r))n[fe]|=2;else{let i=r[xn][Ar];e[Ar]!==i&&(n[fe]|=2)}t===null?n[Af]=[e]:t.push(e)}function ww(n,e){let t=n[Af],r=t.indexOf(e);t.splice(r,1)}function mu(n,e){if(n.length<=Rn)return;let t=Rn+e,r=n[t];if(r){let i=r[Ga];i!==null&&i!==n&&ww(i,r),e>0&&(n[t-1][Sr]=r[Sr]);let o=bf(n,Rn+e);n$(r[Ce],r);let s=o[Ka];s!==null&&s.detachView(o[Ce]),r[xn]=null,r[Sr]=null,r[fe]&=-129}return r}function hp(n,e){if(Tu(e))return;let t=e[kt];t.destroyNode&&pp(n,e,t,3,null,null),i$(e)}function jy(n,e){if(Tu(e))return;let t=Re(null);try{e[fe]&=-129,e[fe]|=256,e[Yn]&&Ia(e[Yn]),a$(n,e),s$(n,e),e[Ce].type===1&&e[kt].destroy();let r=e[Ga];if(r!==null&&Ai(e[xn])){r!==e[xn]&&ww(r,e);let i=e[Ka];i!==null&&i.detachView(n)}h_(e)}finally{Re(t)}}function s$(n,e){let t=n.cleanup,r=e[Df];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Df]=null);let i=e[vo];if(i!==null){e[vo]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[ps];if(o!==null){e[ps]=null;for(let s of o)s.destroy()}}function a$(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ys)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];sr(4,a,c);try{c.call(a)}finally{sr(5,a,c)}}else{sr(4,i,o);try{o.call(i)}finally{sr(5,i,o)}}}}}function c$(n,e,t){return l$(n,e.parent,t)}function l$(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Si];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Xr.None||o===Xr.Emulated)return null}return cr(r,t)}}function u$(n,e,t){return h$(n,e,t)}function d$(n,e,t){return n.type&40?cr(n,t):null}var h$=d$,bA;function fp(n,e,t,r){let i=c$(n,r,e),o=e[kt],s=r.parent||e[Rr],a=u$(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)EA(o,i,t[c],a,!1);else EA(o,i,t,a,!1);bA!==void 0&&bA(o,r,e,t,i)}function cu(n,e){if(e!==null){let t=e.type;if(t&3)return cr(e,n);if(t&4)return v_(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return cu(n,r);{let i=n[e.index];return Ai(i)?v_(-1,i):Jr(i)}}else{if(t&128)return cu(n,e.next);if(t&32)return _w(e,n)()||Jr(n[e.index]);{let r=wx(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=gs(n[Ar]);return cu(i,r)}else return cu(n,e.next)}}}return null}function wx(n,e){if(e!==null){let r=n[Ar][Rr],i=e.projection;return r.projection[i]}return null}function v_(n,e){let t=Rn+n+1;if(t<e.length){let r=e[t],i=r[Ce].firstChild;if(i!==null)return cu(r,i)}return e[ms]}function Ew(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&Io(Jr(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)Ew(n,e,t.child,r,i,o,!1),ja(e,n,i,a,o);else if(c&32){let u=_w(t,r),d;for(;d=u();)ja(e,n,i,d,o);ja(e,n,i,a,o)}else c&16?f$(n,e,r,t,i,o):ja(e,n,i,a,o);t=s?t.projectionNext:t.next}}function pp(n,e,t,r,i,o){Ew(t,r,n.firstChild,e,i,o,!1)}function f$(n,e,t,r,i,o){let s=t[Ar],c=s[Rr].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];ja(e,n,i,d,o)}else{let u=c,d=s[xn];zR(r)&&(u.flags|=128),Ew(n,e,u,d,i,o,!0)}}function p$(n,e,t,r,i){let o=t[ms],s=Jr(t);o!==s&&ja(e,n,r,o,i);for(let a=Rn;a<t.length;a++){let c=t[a];pp(c[Ce],c,n,e,r,o)}}function m$(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Ti.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ti.Important),n.setStyle(t,r,i,o))}}function mp(n,e,t,r){let i=Re(null);try{let o=e.tView,a=n[fe]&4096?4096:16,c=up(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[Ga]=u;let d=n[Ka];return d!==null&&(c[Ka]=d.createEmbeddedView(o)),yw(o,c,t),c}finally{Re(i)}}function Ex(n,e){let t=Rn+e;if(t<n.length)return n[t]}function gu(n,e){return!e||e.firstChild===null||zR(n)}function gp(n,e,t,r=!0){let i=e[Ce];if(o$(i,e,n,t),r){let s=v_(t,n),a=e[kt],c=a.parentNode(n[ms]);c!==null&&r$(i,n[Rr],a,e,c,s)}let o=e[hu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Ix(n,e){let t=mu(n,e);return t!==void 0&&hp(t[Ce],t),t}function Lf(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Jr(o)),Ai(o)&&g$(o,r);let s=t.type;if(s&8)Lf(n,e,t.child,r);else if(s&32){let a=_w(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=wx(e,t);if(Array.isArray(a))r.push(...a);else{let c=gs(e[Ar]);Lf(c[Ce],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function g$(n,e){for(let t=Rn;t<n.length;t++){let r=n[t],i=r[Ce].firstChild;i!==null&&Lf(r[Ce],r,i,e)}n[ms]!==n[Si]&&e.push(n[ms])}var Tx=[];function v$(n){return n[Yn]??y$(n)}function y$(n){let e=Tx.pop()??Object.create(w$);return e.lView=n,e}function _$(n){n.lView[Yn]!==n&&(n.lView=null,Tx.push(n))}var w$=me(j({},is),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{bu(n.lView)},consumerOnSignalRead(){this.lView[Yn]=this}});function E$(n){let e=n[Yn]??Object.create(I$);return e.lView=n,e}var I$=me(j({},is),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=gs(n.lView);for(;e&&!bx(e[Ce]);)e=gs(e);e&&X_(e)},consumerOnSignalRead(){this.lView[Yn]=this}});function bx(n){return n.type!==2}function Cx(n){if(n[ps]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[ps])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[fe]&8192)}}var T$=100;function Dx(n,e=!0,t=0){let i=n[_o].rendererFactory,o=!1;o||i.begin?.();try{b$(n,t)}catch(s){throw e&&vx(n,s),s}finally{o||i.end?.()}}function b$(n,e){let t=wR();try{Rf(!0),y_(n,e);let r=0;for(;tp(n);){if(r===T$)throw new J(103,!1);r++,y_(n,1)}}finally{Rf(t)}}function C$(n,e,t,r){if(Tu(e))return;let i=e[fe],o=!1,s=!1;ew(e);let a=!0,c=null,u=null;o||(bx(n)?(u=v$(e),c=Ea(u)):vS()===null?(a=!1,u=E$(e),c=Ea(u)):e[Yn]&&(Ia(e[Yn]),e[Yn]=null));try{mR(e),mj(n.bindingStartIndex),t!==null&&ux(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let v=n.preOrderCheckHooks;v!==null&&yf(e,v,null)}else{let v=n.preOrderHooks;v!==null&&_f(e,v,0,null),Ly(e,0)}if(s||D$(e),Cx(e),Sx(e,0),n.contentQueries!==null&&tx(n,e),!o)if(d){let v=n.contentCheckHooks;v!==null&&yf(e,v)}else{let v=n.contentHooks;v!==null&&_f(e,v,1),Ly(e,1)}A$(n,e);let f=n.components;f!==null&&Rx(e,f,0);let m=n.viewQuery;if(m!==null&&p_(2,m,r),!o)if(d){let v=n.viewCheckHooks;v!==null&&yf(e,v)}else{let v=n.viewHooks;v!==null&&_f(e,v,2),Ly(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[vf]){for(let v of e[vf])v();e[vf]=null}o||(e[fe]&=-73)}catch(d){throw o||bu(e),d}finally{u!==null&&(Xl(u,c),a&&_$(u)),tw()}}function Sx(n,e){for(let t=YR(n);t!==null;t=QR(t))for(let r=Rn;r<t.length;r++){let i=t[r];Ax(i,e)}}function D$(n){for(let e=YR(n);e!==null;e=QR(e)){if(!(e[fe]&2))continue;let t=e[Af];for(let r=0;r<t.length;r++){let i=t[r];X_(i)}}}function S$(n,e,t){let r=So(e,n);Ax(r,t)}function Ax(n,e){J_(n)&&y_(n,e)}function y_(n,e){let r=n[Ce],i=n[fe],o=n[Yn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Zl(o)),s||=!1,o&&(o.dirty=!1),n[fe]&=-9217,s)C$(r,n,r.template,n[fn]);else if(i&8192){Cx(n),Sx(n,1);let a=r.components;a!==null&&Rx(n,a,1)}}function Rx(n,e,t){for(let r=0;r<e.length;r++)S$(n,e[r],t)}function A$(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)vs(~i);else{let o=i,s=t[++r],a=t[++r];yj(s,o);let c=e[o];sr(24,c),a(2,c),sr(25,c)}}}finally{vs(-1)}}function Iw(n,e){let t=wR()?64:1088;for(n[_o].changeDetectionScheduler?.notify(e);n;){n[fe]|=t;let r=gs(n);if(e_(n)&&!r)return n;n=r}return null}var ws=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[Ce];return Lf(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[fn]}get dirty(){return!!(this._lView[fe]&9280)||!!this._lView[Yn]?.dirty}set context(e){this._lView[fn]=e}get destroyed(){return Tu(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[xn];if(Ai(e)){let t=e[Sf],r=t?t.indexOf(this):-1;r>-1&&(mu(e,r),bf(t,r))}this._attachedToViewContainer=!1}hp(this._lView[Ce],this._lView)}onDestroy(e){gR(this._lView,e)}markForCheck(){Iw(this._cdRefInjectingView||this._lView,4)}markForRefresh(){X_(this._cdRefInjectingView||this._lView)}detach(){this._lView[fe]&=-129}reattach(){n_(this._lView),this._lView[fe]|=128}detectChanges(){this._lView[fe]|=1024,Dx(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new J(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=e_(this._lView),t=this._lView[Ga];t!==null&&!e&&ww(t,this._lView),yx(this._lView[Ce],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new J(902,!1);this._appRef=e;let t=e_(this._lView),r=this._lView[Ga];r!==null&&!t&&_x(r,this._lView),n_(this._lView)}},Tw=(()=>{class n{static __NG_ELEMENT_ID__=N$}return n})(),R$=Tw,x$=class extends R${_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=mp(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new ws(i)}};function N$(){return M$(mn(),Oe())}function M$(n,e){return n.type&4?new x$(e,n,cp(n,e)):null}function Cu(n,e,t,r,i){let o=n.data[e];if(o===null)o=P$(n,e,t,r,i),vj()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=pj();o.injectorIndex=s===null?-1:s.injectorIndex}return Is(o,!0),o}function P$(n,e,t,r,i){let o=yR(),s=Z_(),a=s?o:o&&o.parent,c=n.data[e]=O$(n,a,t,e,r,i);return k$(n,c,o,s),c}function k$(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function O$(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return dj()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var oae=new RegExp(`^(\\d+)*(${sB}|${oB})*(.*)`);var F$=()=>null;function vu(n,e){return F$(n,e)}var __=class{},Vf=class{},w_=class{resolveComponentFactory(e){throw Error(`No component factory found for ${jn(e)}.`)}},bo=class{static NULL=new w_},Ja=class{},xi=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>L$()}return n})();function L$(){let n=Oe(),e=mn(),t=So(e.index,n);return(yo(t)?t:n)[kt]}var V$=(()=>{class n{static \u0275prov=U({token:n,providedIn:"root",factory:()=>null})}return n})();function Uf(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=tA(i,a);else if(o==2){let c=a,u=e[++s];r=tA(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var jf=class extends bo{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=fs(e);return new yu(t,this.ngModule)}};function CA(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:To.None;e?t.push({propName:s,templateName:r,isSignal:(a&To.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function U$(n){let e=n.toLowerCase();return e==="svg"?ej:e==="math"?tj:null}function j$(n){let{attrs:e,classes:t}=bB(n),r=e;return t.length&&r.push(1,...t),r}var yu=class extends Vf{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){let e=this.componentDef,t=e.inputTransforms,r=CA(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return CA(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=TB(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Re(null);try{i=i||this.ngModule;let s=i instanceof pn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new o_(e,s):e,c=a.get(Ja,null);if(c===null)throw new J(407,!1);let u=a.get(V$,null),d=a.get(_s,null),f={rendererFactory:c,sanitizer:u,changeDetectionScheduler:d},m=c.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",w=r?MB(m,r,this.componentDef.encapsulation,a):sx(m,v,U$(v)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let S=null;w!==null&&(S=lw(w,a,!0));let F=mw(0,null,null,1,0,null,null,null,null,null,null),W=up(null,F,null,R,null,null,f,m,a,null,S);W[An]=w,ew(W);let q,te=null;try{let ue=this.componentDef,A,_=null;ue.findHostDirectiveDefs?(A=[],_=new Map,ue.findHostDirectiveDefs(ue,A,_),A.push(ue)):A=[ue];let E=r?["ng-version","19.1.3"]:j$(this.componentDef.selectors[0]),C=Cu(F,An,2,"#host",E);for(let x of A)C.mergedAttrs=Ya(C.mergedAttrs,x.hostAttrs);C.mergedAttrs=Ya(C.mergedAttrs,E),Uf(C,C.mergedAttrs,!0),w&&cx(m,w,C),te=B$(C,w,ue,A,W,f),t!==void 0&&H$(C,this.ngContentSelectors,t),q=$$(te,ue,A,_,W,[W$]),yw(F,W,null)}catch(ue){throw te!==null&&h_(te),h_(W),ue}finally{tw()}let Xe=Q_(F,An);return new E_(this.componentType,q,cp(Xe,W),W,Xe)}finally{Re(o)}}},E_=class extends __{location;_rootLView;_tNode;instance;hostView;changeDetectorRef;componentType;previousInputValues=null;constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new ws(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;vw(o[Ce],o,i,e,t),this.previousInputValues.set(e,t);let s=So(this._tNode.index,o);Iw(s,1)}}get injector(){return new ds(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function B$(n,e,t,r,i,o){let s=i[Ce],a=null;e!==null&&(a=lw(e,i[za]));let c=o.rendererFactory.createRenderer(e,t),u=up(i,dx(t),null,mx(t),i[n.index],n,o,c,null,null,a);return s.firstCreatePass&&g_(s,n,r.length-1),dp(i,u),i[n.index]=u}function $$(n,e,t,r,i,o){let s=mn(),a=i[Ce],c=cr(s,i);fx(a,i,s,t,null,r);for(let d=0;d<t.length;d++){let f=s.directiveStart+d,m=Qa(i,a,f,s);Io(m,i)}px(a,i,s),c&&Io(c,i);let u=Qa(i,a,s.directiveStart+s.componentOffset,s);if(n[fn]=i[fn]=u,o!==null)for(let d of o)d(u,e);return uw(a,s,i),u}function H$(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}function W$(){let n=mn();op(Oe()[Ce],n)}var bs=(()=>{class n{static __NG_ELEMENT_ID__=q$}return n})();function q$(){let n=mn();return G$(n,Oe())}var z$=bs,xx=class extends z${_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return cp(this._hostTNode,this._hostLView)}get injector(){return new ds(this._hostTNode,this._hostLView)}get parentInjector(){let e=rw(this._hostTNode,this._hostLView);if(RR(e)){let t=Nf(e,this._hostLView),r=xf(e),i=t[Ce].data[r+8];return new ds(i,t)}else return new ds(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=DA(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Rn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=vu(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,gu(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!QU(e),a;if(s)a=t;else{let w=t||{};a=w.index,r=w.injector,i=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef}let c=s?e:new yu(fs(e)),u=r||this.parentInjector;if(!o&&c.ngModule==null){let R=(s?u:this.parentInjector).get(pn,null);R&&(o=R)}let d=fs(c.componentType??{}),f=vu(this._lContainer,d?.id??null),m=f?.firstChild??null,v=c.create(u,i,m,o);return this.insertImpl(v.hostView,a,gu(this._hostTNode,f)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(rj(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[xn],u=new xx(c,c[Rr],c[xn]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return gp(s,i,o,r),e.attachToViewContainerRef(),QA(By(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=DA(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=mu(this._lContainer,t);r&&(bf(By(this._lContainer),t),hp(r[Ce],r))}detach(e){let t=this._adjustIndex(e,-1),r=mu(this._lContainer,t);return r&&bf(By(this._lContainer),t)!=null?new ws(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function DA(n){return n[Sf]}function By(n){return n[Sf]||(n[Sf]=[])}function G$(n,e){let t,r=e[n.index];return Ai(r)?t=r:(t=gx(r,e,null,n),e[n.index]=t,dp(e,t)),Y$(t,e,n,r),new xx(t,n,e)}function K$(n,e){let t=n[kt],r=t.createComment(""),i=cr(e,n),o=t.parentNode(i);return Ff(t,o,r,t.nextSibling(i),!1),r}var Y$=X$,Q$=()=>!1;function J$(n,e,t){return Q$(n,e,t)}function X$(n,e,t,r){if(n[ms])return;let i;t.type&8?i=Jr(r):i=K$(e,t),n[ms]=i}var Co=class{},_u=class{};var I_=class extends Co{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new jf(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=ZA(e);this._bootstrapComponents=nx(o.bootstrap),this._r3Injector=VR(e,t,[{provide:Co,useValue:this},{provide:bo,useValue:this.componentFactoryResolver},...r],jn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},T_=class extends _u{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new I_(this.moduleType,e,[])}};var Bf=class extends Co{injector;componentFactoryResolver=new jf(this);instance=null;constructor(e){super();let t=new du([...e.providers,{provide:Co,useValue:this},{provide:bo,useValue:this.componentFactoryResolver}],e.parent||K_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function bw(n,e,t=null){return new Bf({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Z$=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=rR(!1,t.type),i=r.length>0?bw([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=U({token:n,providedIn:"environment",factory:()=>new n(re(pn))})}return n})();function Pe(n){return Eu(()=>{let e=Mx(n),t=me(j({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===GR.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(Z$).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Xr.Emulated,styles:n.styles||or,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&ti("NgStandalone"),Px(t);let r=n.dependencies;return t.directiveDefs=AA(r,!1),t.pipeDefs=AA(r,!0),t.id=nH(t),t})}function eH(n){return fs(n)||eR(n)}function tH(n){return n!==null}function Ni(n){return Eu(()=>({type:n.type,bootstrap:n.bootstrap||or,declarations:n.declarations||or,imports:n.imports||or,exports:n.exports||or,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function SA(n,e){if(n==null)return Ha;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=To.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==To.None?[r,a]:r,e[o]=s):t[o]=r}return t}function dt(n){return Eu(()=>{let e=Mx(n);return Px(e),e})}function Nx(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Mx(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ha,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||or,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:SA(n.inputs,e),outputs:SA(n.outputs),debugInfo:null}}function Px(n){n.features?.forEach(e=>e(n))}function AA(n,e){if(!n)return null;let t=e?tR:eH;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(tH)}function nH(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function rH(n){return Object.getPrototypeOf(n.prototype).constructor}function Bn(n){let e=rH(n.type),t=!0,r=[n];for(;e;){let i;if(wo(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new J(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=pf(n.inputs),s.inputTransforms=pf(n.inputTransforms),s.declaredInputs=pf(n.declaredInputs),s.outputs=pf(n.outputs);let a=i.hostBindings;a&&cH(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&sH(n,c),u&&aH(n,u),iH(n,i),gU(n.outputs,i.outputs),wo(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Bn&&(t=!1)}}e=Object.getPrototypeOf(e)}oH(r)}function iH(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function oH(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ya(i.hostAttrs,t=Ya(t,i.hostAttrs))}}function pf(n){return n===Ha?{}:n===or?[]:n}function sH(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function aH(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function cH(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function kx(n){return uH(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function lH(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function uH(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Cw(n,e,t){return n[e]=t}function Zr(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function b_(n,e,t,r){let i=Zr(n,e,t);return Zr(n,e+1,r)||i}function dH(n,e,t,r,i,o){let s=b_(n,e,t,r);return b_(n,e+2,i,o)||s}function hH(n){return(n.flags&32)===32}function fH(n,e,t,r,i,o,s,a,c){let u=e.consts,d=Cu(e,n,4,s||null,a||null);gw(e,t,d,Eo(u,c)),op(e,d);let f=d.tView=mw(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function C_(n,e,t,r,i,o,s,a,c,u){let d=t+An,f=e.firstCreatePass?fH(d,e,n,r,i,o,s,a,c):e.data[d];Is(f,!1);let m=pH(e,n,f,t);rp()&&fp(e,n,m,f),Io(m,n);let v=gx(m,n,m,f);return n[d]=v,dp(n,v),J$(v,f,n),ep(f)&&fw(e,n,f),c!=null&&pw(n,f,u),f}function X(n,e,t,r,i,o,s,a){let c=Oe(),u=on(),d=Eo(u.consts,o);return C_(c,u,n,e,t,r,i,d,s,a),X}var pH=mH;function mH(n,e,t,r){return ip(!0),e[kt].createComment("")}var Dw=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Ox=new $("");function Cs(n){return!!n&&typeof n.then=="function"}function Fx(n){return!!n&&typeof n.subscribe=="function"}var Lx=new $("");var Vx=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=D(Lx,{optional:!0})??[];injector=D(Ae);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=rn(this.injector,i);if(Cs(o))t.push(o);else if(Fx(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ux=(()=>{class n{static \u0275prov=U({token:n,providedIn:"root",factory:()=>new $f})}return n})(),$f=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}},vp=new $("");function gH(){SS(()=>{throw new J(600,!1)})}function vH(n){return n.isBoundToModule}var yH=10;function _H(n,e,t){try{let r=t();return Cs(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var bi=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=D(Yj);afterRenderManager=D(cB);zonelessEnabled=D(sp);rootEffectScheduler=D(Ux);dirtyFlags=0;deferredDirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new ct;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=D(ei).hasPendingTasks.pipe(Q(t=>!t));constructor(){D(lp,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=D(pn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Vf;if(!this._injector.get(Vx).done){let m=!i&&nR(t),v=!1;throw new J(405,v)}let s;i?s=t:s=this._injector.get(bo).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=vH(s)?void 0:this._injector.get(Co),c=r||s.selector,u=s.create(Ae.NULL,[],c,a),d=u.location.nativeElement,f=u.injector.get(Ox,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),wf(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick=()=>{if(this.tracingSnapshot!==null){let r=this.tracingSnapshot;this.tracingSnapshot=null,r.run(ex.CHANGE_DETECTION,this._tick),r.dispose();return}if(this._runningTick)throw new J(101,!1);let t=Re(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Re(t),this.afterTick.next()}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ja,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let t=0;for(;this.dirtyFlags!==0&&t++<yH;)this.synchronizeOnce()}synchronizeOnce(){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)wH(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>tp(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;wf(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(vp,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>wf(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new J(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wf(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function wH(n,e,t,r){if(!t&&!tp(n))return;Dx(n,e,t&&!r?0:1)}function Du(n,e,t,r){let i=Oe(),o=tc();if(Zr(i,o,e)){let s=on(),a=nw();KB(a,i,n,e,t,r)}return Du}function EH(n,e,t,r){return Zr(n,tc(),t)?e+W_(t)+r:Ao}function mf(n,e){return n<<17|e<<2}function Es(n){return n>>17&32767}function IH(n){return(n&2)==2}function TH(n,e){return n&131071|e<<17}function D_(n){return n|2}function Xa(n){return(n&131068)>>2}function $y(n,e){return n&-131069|e<<2}function bH(n){return(n&1)===1}function S_(n){return n|1}function CH(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Es(s),c=Xa(s);n[r]=t;let u=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||Iu(f,d)>0)&&(u=!0)}else d=t;if(i)if(c!==0){let m=Es(n[a+1]);n[r+1]=mf(m,a),m!==0&&(n[m+1]=$y(n[m+1],r)),n[a+1]=TH(n[a+1],r)}else n[r+1]=mf(a,0),a!==0&&(n[a+1]=$y(n[a+1],r)),a=r;else n[r+1]=mf(c,0),a===0?a=r:n[c+1]=$y(n[c+1],r),c=r;u&&(n[r+1]=D_(n[r+1])),RA(n,d,r,!0),RA(n,d,r,!1),DH(e,d,n,r,o),s=mf(a,c),o?e.classBindings=s:e.styleBindings=s}function DH(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Iu(o,e)>=0&&(t[r+1]=S_(t[r+1]))}function RA(n,e,t,r){let i=n[t+1],o=e===null,s=r?Es(i):Xa(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],u=n[s+1];SH(c,e)&&(a=!0,n[s+1]=r?S_(u):D_(u)),s=r?Es(u):Xa(u)}a&&(n[t+1]=r?D_(i):S_(i))}function SH(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Iu(n,e)>=0:!1}function Z(n,e,t){let r=Oe(),i=tc();if(Zr(r,i,e)){let o=on(),s=nw();hx(o,s,r,n,e,r[kt],t,!1)}return Z}function xA(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";vw(n,t,o[s],s,r)}function nc(n,e,t){return jx(n,e,t,!1),nc}function yp(n,e){return jx(n,e,null,!0),yp}function jx(n,e,t,r){let i=Oe(),o=on(),s=gj(2);if(o.firstUpdatePass&&RH(o,n,s,r),e!==Ao&&Zr(i,s,e)){let a=o.data[Ts()];kH(o,a,i,i[kt],n,i[s+1]=OH(e,t),r,s)}}function AH(n,e){return e>=n.expandoStartIndex}function RH(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Ts()],s=AH(n,t);FH(o,r)&&e===null&&!s&&(e=!1),e=xH(i,o,e,r),CH(i,o,e,t,s,r)}}function xH(n,e,t,r){let i=wj(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Hy(null,n,e,t,r),t=wu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Hy(i,n,e,t,r),o===null){let c=NH(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Hy(null,n,e,c[1],r),c=wu(c,e.attrs,r),MH(n,e,r,c))}else o=PH(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function NH(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Xa(r)!==0)return n[Es(r)]}function MH(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Es(i)]=r}function PH(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=wu(r,s,t)}return wu(r,e.attrs,t)}function Hy(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=wu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function wu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),LU(n,s,t?!0:e[++o]))}return n===void 0?null:n}function kH(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],d=bH(u)?NA(c,e,t,i,Xa(u),s):void 0;if(!Hf(d)){Hf(o)||IH(u)&&(o=NA(c,null,t,i,a,s));let f=pR(Ts(),t);m$(r,s,f,i,o)}}function NA(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),d=u?c[1]:c,f=d===null,m=t[i+1];m===Ao&&(m=f?or:void 0);let v=f?Oy(m,r):d===r?m:void 0;if(u&&!Hf(v)&&(v=Oy(c,r)),Hf(v)&&(a=v,s))return a;let w=n[i+1];i=s?Es(w):Xa(w)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Oy(c,r))}return a}function Hf(n){return n!==void 0}function OH(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=jn(dw(n)))),n}function FH(n,e){return(n.flags&(e?8:16))!==0}var A_=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function Wy(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function LH(n,e,t){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){let u=n.at(o),d=e[o],f=Wy(o,u,o,d,t);if(f!==0){f<0&&n.updateValue(o,d),o++;continue}let m=n.at(s),v=e[c],w=Wy(s,m,c,v,t);if(w!==0){w<0&&n.updateValue(s,v),s--,c--;continue}let R=t(o,u),S=t(s,m),F=t(o,d);if(Object.is(F,S)){let W=t(c,v);Object.is(W,R)?(n.swap(o,s),n.updateValue(s,v),c--,s--):n.move(s,o),n.updateValue(o,d),o++;continue}if(r??=new Wf,i??=PA(n,o,s,t),R_(n,r,o,F))n.updateValue(o,d),o++,s++;else if(i.has(F))r.set(R,n.detach(o)),s--;else{let W=n.create(o,e[o]);n.attach(o,W),o++,s++}}for(;o<=c;)MA(n,r,t,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),u=c.next();for(;!u.done&&o<=s;){let d=n.at(o),f=u.value,m=Wy(o,d,o,f,t);if(m!==0)m<0&&n.updateValue(o,f),o++,u=c.next();else{r??=new Wf,i??=PA(n,o,s,t);let v=t(o,f);if(R_(n,r,o,v))n.updateValue(o,f),o++,s++,u=c.next();else if(!i.has(v))n.attach(o,n.create(o,f)),o++,s++,u=c.next();else{let w=t(o,d);r.set(w,n.detach(o)),s--}}}for(;!u.done;)MA(n,r,t,n.length,u.value),u=c.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(c=>{n.destroy(c)})}function R_(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function MA(n,e,t,r,i){if(R_(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function PA(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var Wf=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function ne(n,e){ti("NgControlFlow");let t=Oe(),r=tc(),i=t[r]!==Ao?t[r]:-1,o=i!==-1?qf(t,An+i):void 0,s=0;if(Zr(t,r,n)){let a=Re(null);try{if(o!==void 0&&Ix(o,s),n!==-1){let c=An+n,u=qf(t,c),d=P_(t[Ce],c),f=vu(u,d.tView.ssrId),m=mp(t,d,e,{dehydratedView:f});gp(u,m,s,gu(d,f))}}finally{Re(a)}}else if(o!==void 0){let a=Ex(o,s);a!==void 0&&(a[fn]=e)}}var x_=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Rn}};function Bx(n,e){return e}var N_=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function $x(n,e,t,r,i,o,s,a,c,u,d,f,m){ti("NgControlFlow");let v=Oe(),w=on(),R=c!==void 0,S=Oe(),F=a?s.bind(S[Ar][fn]):s,W=new N_(R,F);S[An+n]=W,C_(v,w,n+1,e,t,r,i,Eo(w.consts,o)),R&&C_(v,w,n+2,c,u,d,f,Eo(w.consts,m))}var M_=class extends A_{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-Rn}at(e){return this.getLView(e)[fn].$implicit}attach(e,t){let r=t[hu];this.needsIndexUpdate||=e!==this.length,gp(this.lContainer,t,e,gu(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,VH(this.lContainer,e)}create(e,t){let r=vu(this.lContainer,this.templateTNode.tView.ssrId),i=mp(this.hostLView,this.templateTNode,new x_(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){hp(e[Ce],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[fn].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[fn].$index=e}getLView(e){return UH(this.lContainer,e)}};function Hx(n){let e=Re(null),t=Ts();try{let r=Oe(),i=r[Ce],o=r[t],s=t+1,a=qf(r,s);if(o.liveCollection===void 0){let u=P_(i,s);o.liveCollection=new M_(a,r,u)}else o.liveCollection.reset();let c=o.liveCollection;if(LH(c,n,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let u=tc(),d=c.length===0;if(Zr(r,u,d)){let f=t+2,m=qf(r,f);if(d){let v=P_(i,f),w=vu(m,v.tView.ssrId),R=mp(r,v,void 0,{dehydratedView:w});gp(m,R,0,gu(v,w))}else Ix(m,0)}}}finally{Re(e)}}function qf(n,e){return n[e]}function VH(n,e){return mu(n,e)}function UH(n,e){return Ex(n,e)}function P_(n,e){return Q_(n,e)}function jH(n,e,t,r,i,o){let s=e.consts,a=Eo(s,i),c=Cu(e,n,2,r,a);return gw(e,t,c,Eo(s,o)),c.attrs!==null&&Uf(c,c.attrs,!1),c.mergedAttrs!==null&&Uf(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function I(n,e,t,r){let i=Oe(),o=on(),s=An+n,a=i[kt],c=o.firstCreatePass?jH(s,o,i,e,t,r):o.data[s],u=BH(o,i,c,a,e,n);i[s]=u;let d=ep(c);return Is(c,!0),cx(a,u,c),!hH(c)&&rp()&&fp(o,i,u,c),cj()===0&&Io(u,i),lj(),d&&(fw(o,i,c),uw(o,c,i)),r!==null&&pw(i,c),I}function b(){let n=mn();Z_()?_R():(n=n.parent,Is(n,!1));let e=n;hj(e)&&fj(),uj();let t=on();return t.firstCreatePass&&(op(t,n),Y_(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&Sj(e)&&xA(t,e,Oe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Aj(e)&&xA(t,e,Oe(),e.stylesWithoutHost,!1),b}function ve(n,e,t,r){return I(n,e,t,r),b(),ve}var BH=(n,e,t,r,i,o)=>(ip(!0),sx(r,i,Tj()));function $H(n,e,t,r,i){let o=e.consts,s=Eo(o,r),a=Cu(e,n,8,"ng-container",s);s!==null&&Uf(a,s,!0);let c=Eo(o,i);return gw(e,t,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function Sw(n,e,t){let r=Oe(),i=on(),o=n+An,s=i.firstCreatePass?$H(o,i,r,e,t):i.data[o];Is(s,!0);let a=HH(i,r,s,n);return r[o]=a,rp()&&fp(i,r,a,s),Io(a,r),ep(s)&&(fw(i,r,s),uw(i,s,r)),t!=null&&pw(r,s),Sw}function Aw(){let n=mn(),e=on();return Z_()?_R():(n=n.parent,Is(n,!1)),e.firstCreatePass&&(op(e,n),Y_(n)&&e.queries.elementEnd(n)),Aw}var HH=(n,e,t,r)=>(ip(!0),SB(e[kt],""));function ur(){return Oe()}var us=void 0;function WH(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var qH=["en",[["a","p"],["AM","PM"],us],[["AM","PM"],us,us],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],us,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],us,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",us,"{1} 'at' {0}",us],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",WH],qy={};function dr(n){let e=zH(n),t=kA(e);if(t)return t;let r=e.split("-")[0];if(t=kA(r),t)return t;if(r==="en")return qH;throw new J(701,!1)}function kA(n){return n in qy||(qy[n]=su.ng&&su.ng.common&&su.ng.common.locales&&su.ng.common.locales[n]),qy[n]}var Mt=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Mt||{});function zH(n){return n.toLowerCase().replace(/_/g,"-")}var zf="en-US";var GH=zf;function KH(n){typeof n=="string"&&(GH=n.toLowerCase().replace(/_/g,"-"))}var YH=(n,e,t)=>{};function le(n,e,t,r){let i=Oe(),o=on(),s=mn();return Wx(o,i,i[kt],s,n,e,r),le}function QH(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Df],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function Wx(n,e,t,r,i,o,s){let a=ep(r),u=n.firstCreatePass&&aj(n),d=e[fn],f=sj(e),m=!0;if(r.type&3||s){let R=cr(r,e),S=s?s(R):R,F=f.length,W=s?te=>s(Jr(te[r.index])):r.index,q=null;if(!s&&a&&(q=QH(n,e,i,r.index)),q!==null){let te=q.__ngLastListenerFn__||q;te.__ngNextListenerFn__=o,q.__ngLastListenerFn__=o,m=!1}else{o=FA(r,e,d,o),YH(R,i,o);let te=t.listen(S,i,o);f.push(o,te),u&&u.push(i,W,F,F+1)}}else o=FA(r,e,d,o);let v=r.outputs,w;if(m&&v!==null&&(w=v[i])){let R=w.length;if(R)for(let S=0;S<R;S+=2){let F=w[S],W=w[S+1],Xe=e[F][W].subscribe(o),ue=f.length;f.push(o,Xe),u&&u.push(i,r.index,ue,-(ue+1))}}}function OA(n,e,t,r){let i=Re(null);try{return sr(6,e,t),t(r)!==!1}catch(o){return vx(n,o),!1}finally{sr(7,e,t),Re(i)}}function FA(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?So(n.index,e):e;Iw(s,5);let a=OA(e,t,r,o),c=i.__ngNextListenerFn__;for(;c;)a=OA(e,t,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function H(n=1){return Ij(n)}function JH(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function N(n,e=""){let t=Oe(),r=on(),i=n+An,o=r.firstCreatePass?Cu(r,i,1,e,null):r.data[i],s=XH(r,t,o,e,n);t[i]=s,rp()&&fp(r,t,s,o),Is(o,!1)}var XH=(n,e,t,r,i)=>(ip(!0),CB(e[kt],r));function Nn(n){return z("",n,""),Nn}function z(n,e,t){let r=Oe(),i=EH(r,n,e,t);return i!==Ao&&ZH(r,Ts(),i),z}function ZH(n,e,t){let r=pR(e,n);DB(n[kt],r,t)}function Nr(n,e,t){qR(e)&&(e=e());let r=Oe(),i=tc();if(Zr(r,i,e)){let o=on(),s=nw();hx(o,s,r,n,e,r[kt],t,!1)}return Nr}function ni(n,e){let t=qR(n);return t&&n.set(e),t}function Mr(n,e){let t=Oe(),r=on(),i=mn();return Wx(r,t,t[kt],i,n,e),Mr}function eW(n,e,t){let r=on();if(r.firstCreatePass){let i=wo(n);k_(t,r.data,r.blueprint,i,!0),k_(e,r.data,r.blueprint,i,!1)}}function k_(n,e,t,r,i){if(n=Sn(n),Array.isArray(n))for(let o=0;o<n.length;o++)k_(n[o],e,t,r,i);else{let o=on(),s=Oe(),a=mn(),c=qa(n)?n:Sn(n.provide),u=sR(n),d=a.providerIndexes&1048575,f=a.directiveStart,m=a.providerIndexes>>20;if(qa(n)||!n.multi){let v=new ys(u,i,Me),w=Gy(c,e,i?d:d+m,f);w===-1?(a_(Pf(a,s),o,c),zy(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(v),s.push(v)):(t[w]=v,s[w]=v)}else{let v=Gy(c,e,d+m,f),w=Gy(c,e,d,d+m),R=v>=0&&t[v],S=w>=0&&t[w];if(i&&!S||!i&&!R){a_(Pf(a,s),o,c);let F=rW(i?nW:tW,t.length,i,r,u);!i&&S&&(t[w].providerFactory=F),zy(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(F),s.push(F)}else{let F=qx(t[i?w:v],u,!i&&r);zy(o,n,v>-1?v:w,F)}!i&&r&&S&&t[w].componentProviders++}}}function zy(n,e,t,r){let i=qa(e),o=HU(e);if(i||o){let c=(o?Sn(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=u.indexOf(t);d===-1?u.push(t,[r,c]):u[d+1].push(r,c)}else u.push(t,c)}}}function qx(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Gy(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function tW(n,e,t,r){return O_(this.multi,[])}function nW(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Qa(t,t[Ce],this.providerFactory.index,r);o=a.slice(0,s),O_(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],O_(i,o);return o}function O_(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function rW(n,e,t,r,i){let o=new ys(n,t,Me);return o.multi=[],o.index=e,o.componentProviders=0,qx(o,i,r&&!t),o}function ri(n,e=[]){return t=>{t.providersResolver=(r,i)=>eW(r,i?i(n):n,e)}}function ot(n,e,t,r){return iW(Oe(),np(),n,e,t,r)}function Pr(n,e,t,r,i){return Gx(Oe(),np(),n,e,t,r,i)}function zx(n,e,t,r,i,o,s){return oW(Oe(),np(),n,e,t,r,i,o,s)}function Rw(n,e){let t=n[e];return t===Ao?void 0:t}function iW(n,e,t,r,i,o){let s=e+t;return Zr(n,s,i)?Cw(n,s+1,o?r.call(o,i):r(i)):Rw(n,s+1)}function Gx(n,e,t,r,i,o,s){let a=e+t;return b_(n,a,i,o)?Cw(n,a+2,s?r.call(s,i,o):r(i,o)):Rw(n,a+2)}function oW(n,e,t,r,i,o,s,a,c){let u=e+t;return dH(n,u,i,o,s,a)?Cw(n,u+4,c?r.call(c,i,o,s,a):r(i,o,s,a)):Rw(n,u+4)}function Ro(n,e){let t=on(),r,i=n+An;t.firstCreatePass?(r=sW(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=hs(r.type,!0)),s,a=Un(Me);try{let c=Mf(!1),u=o();return Mf(c),JH(t,Oe(),i,u),u}finally{Un(a)}}function sW(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function xo(n,e,t,r){let i=n+An,o=Oe(),s=nj(o,i);return aW(o,i)?Gx(o,np(),e,s.transform,t,r,s):s.transform(t,r)}function aW(n,e){return n[Ce].data[e].pure}var Ci=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Kx=new Ci("19.1.3"),F_=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},xw=(()=>{class n{compileModuleSync(t){return new T_(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=ZA(t),o=nx(i.declarations).reduce((s,a)=>{let c=fs(a);return c&&s.push(new yu(c)),s},[]);return new F_(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var cW=(()=>{class n{zone=D(pe);changeDetectionScheduler=D(_s);applicationRef=D(bi);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lW=new $("",{factory:()=>!1});function Yx({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new pe(me(j({},Jx()),{scheduleInRootZone:t})),[{provide:pe,useFactory:n},{provide:Wa,multi:!0,useFactory:()=>{let r=D(cW,{optional:!0});return()=>r.initialize()}},{provide:Wa,multi:!0,useFactory:()=>{let r=D(uW);return()=>{r.initialize()}}},e===!0?{provide:jR,useValue:!0}:[],{provide:BR,useValue:t??UR}]}function Qx(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=Yx({ngZoneFactory:()=>{let i=Jx(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&ti("NgZone_CoalesceEvent"),new pe(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return it([{provide:lW,useValue:!0},{provide:sp,useValue:!1},r])}function Jx(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var uW=(()=>{class n{subscription=new bt;initialized=!1;zone=D(pe);pendingTasks=D(ei);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{pe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var dW=(()=>{class n{appRef=D(bi);taskService=D(ei);ngZone=D(pe);zonelessEnabled=D(sp);tracing=D(lp,{optional:!0});disableScheduling=D(jR,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new bt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Of):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(D(BR,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof d_||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 13:{this.appRef.dirtyFlags|=16,r=!0;break}case 14:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{r=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?pA:$R;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Of+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,pA(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hW(){return typeof $localize<"u"&&$localize.locale||zf}var _p=new $("",{providedIn:"root",factory:()=>D(_p,Se.Optional|Se.SkipSelf)||hW()});var L_=new $(""),fW=new $("");function ou(n){return!n.moduleRef}function pW(n){let e=ou(n)?n.r3Injector:n.moduleRef.injector,t=e.get(pe);return t.run(()=>{ou(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Ii,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),ou(n)){let o=()=>e.destroy(),s=n.platformInjector.get(L_);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(L_);s.add(o),n.moduleRef.onDestroy(()=>{wf(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return _H(r,t,()=>{let o=e.get(Vx);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(_p,zf);if(KH(s||zf),!e.get(fW,!0))return ou(n)?e.get(bi):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(ou(n)){let c=e.get(bi);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return mW(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function mW(n,e){let t=n.injector.get(bi);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new J(-403,!1);e.push(n)}var Ef=null;function gW(n=[],e){return Ae.create({name:e,providers:[{provide:Jf,useValue:"platform"},{provide:L_,useValue:new Set([()=>Ef=null])},...n]})}function vW(n=[]){if(Ef)return Ef;let e=gW(n);return Ef=e,gH(),yW(e),e}function yW(n){let e=n.get(aw,null);rn(n,()=>{e?.forEach(t=>t())})}function Nw(){return!1}var No=(()=>{class n{static __NG_ELEMENT_ID__=_W}return n})();function _W(n){return wW(mn(),Oe(),(n&16)===16)}function wW(n,e,t){if(Zf(n)&&!t){let r=So(n.index,e);return new ws(r,r)}else if(n.type&175){let r=e[Ar];return new ws(r,e)}return null}var V_=class{constructor(){}supports(e){return kx(e)}create(e){return new U_(e)}},EW=(n,e)=>e,U_=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||EW}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<LA(r,i,o)?t:r,a=LA(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,d=c-i;if(u!=d){for(let m=0;m<u;m++){let v=m<o.length?o[m]:o[m]=0,w=v+m;d<=w&&w<u&&(o[m]=v+1)}let f=s.previousIndex;o[f]=d-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!kx(e))throw new J(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,lH(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new j_(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Gf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Gf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},j_=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},B_=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Gf=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new B_,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function LA(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function VA(){return new Mw([new V_])}var Mw=(()=>{class n{factories;static \u0275prov=U({token:n,providedIn:"root",factory:VA});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||VA()),deps:[[n,new OU,new Ie]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new J(901,!1)}}return n})();function Xx(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=vW(r),o=[Yx({}),{provide:_s,useExisting:dW},...t||[]],s=new Bf({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return pW({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function Su(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function xe(n,e){ti("NgSignals");let t=bS(n);return e?.equal&&(t[Ln].equal=e.equal),t}function hr(n){let e=Re(null);try{return n()}finally{Re(e)}}var Zx=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=IW}return n})();function IW(){return new Zx(Oe(),mn())}var TW=!1,bW=(()=>{class n extends $f{pendingTasks=D(ei);taskId=null;schedule(t){super.schedule(t),this.taskId===null&&(this.taskId=this.pendingTasks.add(),queueMicrotask(()=>this.flush()))}flush(){try{super.flush()}finally{this.taskId!==null&&(this.pendingTasks.remove(this.taskId),this.taskId=null)}}static \u0275prov=U({token:n,providedIn:"root",factory:()=>new n})}return n})(),$_=class{scheduler;effectFn;zone;injector;unregisterOnDestroy;watcher;constructor(e,t,r,i,o,s){this.scheduler=e,this.effectFn=t,this.zone=r,this.injector=o,this.watcher=xS(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(t){this.injector.get(Ii,null,{optional:!0})?.handleError(t)}}run(){this.watcher.run()}schedule(){this.scheduler.schedule(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function CW(){}function eN(n,e){ti("NgSignals"),!e?.injector&&Za(CW);let t=e?.injector??D(Ae),r=e?.manualCleanup!==!0?t.get(Ri):null,i=new $_(t.get(bW),n,typeof Zone>"u"?null:Zone.current,r,t,e?.allowSignalWrites??!1),o=t.get(No,null,{optional:!0});return!o||!(o._lView[fe]&8)?i.watcher.notify():(o._lView[vf]??=[]).push(i.watcher.notify),i}var DW=TW;var H_=class{[Ln];constructor(e){this[Ln]=e}destroy(){this[Ln].destroy()}};function kr(n,e){if(DW)return eN(n,e);ti("NgSignals"),!e?.injector&&Za(kr);let t=e?.injector??D(Ae),r=e?.manualCleanup!==!0?t.get(Ri):null,i,o=t.get(Zx,null,{optional:!0}),s=t.get(_s);return o!==null&&!e?.forceRoot?(i=RW(o.view,s,n),r instanceof kf&&r._lView===o.view&&(r=null)):i=xW(n,t.get(Ux),s),i.injector=t,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new H_(i)}var tN=me(j({},is),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:pu,run(){if(this.dirty=!1,this.hasRun&&!Zl(this))return;this.hasRun=!0;let n=r=>(this.cleanupFns??=[]).push(r),e=Ea(this),t=Rf(!1);try{this.maybeCleanup(),this.fn(n)}finally{Rf(t),Xl(this,e)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),SW=me(j({},tN),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(13)},destroy(){Ia(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),AW=me(j({},tN),{consumerMarkedDirty(){this.view[fe]|=8192,bu(this.view),this.notifier.notify(14)},destroy(){Ia(this),this.onDestroyFn(),this.maybeCleanup(),this.view[ps]?.delete(this)}});function RW(n,e,t){let r=Object.create(AW);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=t,n[ps]??=new Set,n[ps].add(r),r.consumerMarkedDirty(r),r}function xW(n,e,t){let r=Object.create(SW);return r.fn=n,r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.schedule(r),r.notifier.notify(13),r}var aN=null;function Pi(){return aN}function cN(n){aN??=n}var Ap=class{};var gn=new $(""),lN=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:()=>D(PW),providedIn:"platform"})}return n})();var PW=(()=>{class n extends lN{_location;_history;_doc=D(gn);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pi().getBaseHref(this._doc)}onPopState(t){let r=Pi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Pi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function uN(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function nN(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Ds(n){return n&&n[0]!=="?"?"?"+n:n}var xp=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:()=>D(dN),providedIn:"root"})}return n})(),kW=new $(""),dN=(()=>{class n extends xp{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??D(gn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return uN(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Ds(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Ds(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Ds(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(re(lN),re(kW,8))};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Au=(()=>{class n{_subject=new ct;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=LW(nN(rN(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ds(r))}normalize(t){return n.stripTrailingSlash(FW(this._basePath,rN(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ds(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ds(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Ds;static joinWithSlash=uN;static stripTrailingSlash=nN;static \u0275fac=function(r){return new(r||n)(re(xp))};static \u0275prov=U({token:n,factory:()=>OW(),providedIn:"root"})}return n})();function OW(){return new Au(re(xp))}function FW(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function rN(n){return n.replace(/\/index.html$/,"")}function LW(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Mn=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Mn||{}),tt=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(tt||{}),Qn=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Qn||{}),Mo={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function VW(n){return dr(n)[Mt.LocaleId]}function UW(n,e,t){let r=dr(n),i=[r[Mt.DayPeriodsFormat],r[Mt.DayPeriodsStandalone]],o=fr(i,e);return fr(o,t)}function jW(n,e,t){let r=dr(n),i=[r[Mt.DaysFormat],r[Mt.DaysStandalone]],o=fr(i,e);return fr(o,t)}function BW(n,e,t){let r=dr(n),i=[r[Mt.MonthsFormat],r[Mt.MonthsStandalone]],o=fr(i,e);return fr(o,t)}function $W(n,e){let r=dr(n)[Mt.Eras];return fr(r,e)}function wp(n,e){let t=dr(n);return fr(t[Mt.DateFormat],e)}function Ep(n,e){let t=dr(n);return fr(t[Mt.TimeFormat],e)}function Ip(n,e){let r=dr(n)[Mt.DateTimeFormat];return fr(r,e)}function Np(n,e){let t=dr(n),r=t[Mt.NumberSymbols][e];if(typeof r>"u"){if(e===Mo.CurrencyDecimal)return t[Mt.NumberSymbols][Mo.Decimal];if(e===Mo.CurrencyGroup)return t[Mt.NumberSymbols][Mo.Group]}return r}function hN(n){if(!n[Mt.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Mt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function HW(n){let e=dr(n);return hN(e),(e[Mt.ExtraData][2]||[]).map(r=>typeof r=="string"?Pw(r):[Pw(r[0]),Pw(r[1])])}function WW(n,e,t){let r=dr(n);hN(r);let i=[r[Mt.ExtraData][0],r[Mt.ExtraData][1]],o=fr(i,e)||[];return fr(o,t)||[]}function fr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Pw(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var qW=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Tp={},zW=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function GW(n,e,t,r){let i=nq(n);e=Mi(t,e)||e;let s=[],a;for(;e;)if(a=zW.exec(e),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;e=d}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=pN(r,c),i=tq(i,r,!0));let u="";return s.forEach(d=>{let f=ZW(d);u+=f?f(i,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function Rp(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Mi(n,e){let t=VW(n);if(Tp[t]??={},Tp[t][e])return Tp[t][e];let r="";switch(e){case"shortDate":r=wp(n,Qn.Short);break;case"mediumDate":r=wp(n,Qn.Medium);break;case"longDate":r=wp(n,Qn.Long);break;case"fullDate":r=wp(n,Qn.Full);break;case"shortTime":r=Ep(n,Qn.Short);break;case"mediumTime":r=Ep(n,Qn.Medium);break;case"longTime":r=Ep(n,Qn.Long);break;case"fullTime":r=Ep(n,Qn.Full);break;case"short":let i=Mi(n,"shortTime"),o=Mi(n,"shortDate");r=bp(Ip(n,Qn.Short),[i,o]);break;case"medium":let s=Mi(n,"mediumTime"),a=Mi(n,"mediumDate");r=bp(Ip(n,Qn.Medium),[s,a]);break;case"long":let c=Mi(n,"longTime"),u=Mi(n,"longDate");r=bp(Ip(n,Qn.Long),[c,u]);break;case"full":let d=Mi(n,"fullTime"),f=Mi(n,"fullDate");r=bp(Ip(n,Qn.Full),[d,f]);break}return r&&(Tp[t][e]=r),r}function bp(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Or(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function KW(n,e){return Or(n,3).substring(0,e)}function Ot(n,e,t=0,r=!1,i=!1){return function(o,s){let a=YW(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return KW(a,e);let c=Np(s,Mo.MinusSign);return Or(a,e,c,r,i)}}function YW(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function st(n,e,t=Mn.Format,r=!1){return function(i,o){return QW(i,o,n,e,t,r)}}function QW(n,e,t,r,i,o){switch(t){case 2:return BW(e,i,r)[n.getMonth()];case 1:return jW(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let u=HW(e),d=WW(e,i,r),f=u.findIndex(m=>{if(Array.isArray(m)){let[v,w]=m,R=s>=v.hours&&a>=v.minutes,S=s<w.hours||s===w.hours&&a<w.minutes;if(v.hours<w.hours){if(R&&S)return!0}else if(R||S)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return UW(e,i,r)[s<12?0:1];case 3:return $W(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new Error(`unexpected translation type ${c}`)}}function Cp(n){return function(e,t,r){let i=-1*r,o=Np(t,Mo.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Or(s,2,o)+Or(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Or(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Or(s,2,o)+":"+Or(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Or(s,2,o)+":"+Or(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var JW=0,Sp=4;function XW(n){let e=Rp(n,JW,1).getDay();return Rp(n,0,1+(e<=Sp?Sp:Sp+7)-e)}function fN(n){let e=n.getDay(),t=e===0?-3:Sp-e;return Rp(n.getFullYear(),n.getMonth(),n.getDate()+t)}function kw(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=fN(t),s=XW(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Or(i,n,Np(r,Mo.MinusSign))}}function Dp(n,e=!1){return function(t,r){let o=fN(t).getFullYear();return Or(o,n,Np(r,Mo.MinusSign),e)}}var Ow={};function ZW(n){if(Ow[n])return Ow[n];let e;switch(n){case"G":case"GG":case"GGG":e=st(3,tt.Abbreviated);break;case"GGGG":e=st(3,tt.Wide);break;case"GGGGG":e=st(3,tt.Narrow);break;case"y":e=Ot(0,1,0,!1,!0);break;case"yy":e=Ot(0,2,0,!0,!0);break;case"yyy":e=Ot(0,3,0,!1,!0);break;case"yyyy":e=Ot(0,4,0,!1,!0);break;case"Y":e=Dp(1);break;case"YY":e=Dp(2,!0);break;case"YYY":e=Dp(3);break;case"YYYY":e=Dp(4);break;case"M":case"L":e=Ot(1,1,1);break;case"MM":case"LL":e=Ot(1,2,1);break;case"MMM":e=st(2,tt.Abbreviated);break;case"MMMM":e=st(2,tt.Wide);break;case"MMMMM":e=st(2,tt.Narrow);break;case"LLL":e=st(2,tt.Abbreviated,Mn.Standalone);break;case"LLLL":e=st(2,tt.Wide,Mn.Standalone);break;case"LLLLL":e=st(2,tt.Narrow,Mn.Standalone);break;case"w":e=kw(1);break;case"ww":e=kw(2);break;case"W":e=kw(1,!0);break;case"d":e=Ot(2,1);break;case"dd":e=Ot(2,2);break;case"c":case"cc":e=Ot(7,1);break;case"ccc":e=st(1,tt.Abbreviated,Mn.Standalone);break;case"cccc":e=st(1,tt.Wide,Mn.Standalone);break;case"ccccc":e=st(1,tt.Narrow,Mn.Standalone);break;case"cccccc":e=st(1,tt.Short,Mn.Standalone);break;case"E":case"EE":case"EEE":e=st(1,tt.Abbreviated);break;case"EEEE":e=st(1,tt.Wide);break;case"EEEEE":e=st(1,tt.Narrow);break;case"EEEEEE":e=st(1,tt.Short);break;case"a":case"aa":case"aaa":e=st(0,tt.Abbreviated);break;case"aaaa":e=st(0,tt.Wide);break;case"aaaaa":e=st(0,tt.Narrow);break;case"b":case"bb":case"bbb":e=st(0,tt.Abbreviated,Mn.Standalone,!0);break;case"bbbb":e=st(0,tt.Wide,Mn.Standalone,!0);break;case"bbbbb":e=st(0,tt.Narrow,Mn.Standalone,!0);break;case"B":case"BB":case"BBB":e=st(0,tt.Abbreviated,Mn.Format,!0);break;case"BBBB":e=st(0,tt.Wide,Mn.Format,!0);break;case"BBBBB":e=st(0,tt.Narrow,Mn.Format,!0);break;case"h":e=Ot(3,1,-12);break;case"hh":e=Ot(3,2,-12);break;case"H":e=Ot(3,1);break;case"HH":e=Ot(3,2);break;case"m":e=Ot(4,1);break;case"mm":e=Ot(4,2);break;case"s":e=Ot(5,1);break;case"ss":e=Ot(5,2);break;case"S":e=Ot(6,1);break;case"SS":e=Ot(6,2);break;case"SSS":e=Ot(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Cp(0);break;case"ZZZZZ":e=Cp(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Cp(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Cp(2);break;default:return null}return Ow[n]=e,e}function pN(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function eq(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function tq(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),o=pN(e,i);return eq(n,r*(o-i))}function nq(n){if(iN(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Rp(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(qW))return rq(r)}let e=new Date(n);if(!iN(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function rq(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,u),e}function iN(n){return n instanceof Date&&!isNaN(n.valueOf())}function Mp(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Fw=/\s+/,oN=[],Qe=(()=>{class n{_ngEl;_renderer;initialClasses=oN;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(Fw):oN}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Fw):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Fw).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(Me(lr),Me(xi))};static \u0275dir=dt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Lw=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},$n=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Lw(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),sN(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);sN(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Me(bs),Me(Tw),Me(Mw))};static \u0275dir=dt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function sN(n,e){n.context.$implicit=e.item}function iq(n,e){return new J(2100,!1)}var oq="mediumDate",sq=new $(""),aq=new $(""),ic=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??oq,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return GW(t,s,o||this.locale,a)}catch(s){throw iq(n,s.message)}}static \u0275fac=function(r){return new(r||n)(Me(_p,16),Me(sq,24),Me(aq,24))};static \u0275pipe=Nx({name:"date",type:n,pure:!0})}return n})();var Vw="browser",cq="server";function oc(n){return n===Vw}function ki(n){return n===cq}var rc=class{};var xu=class{},kp=class{},Ss=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var jw=class{encodeKey(e){return mN(e)}encodeValue(e){return mN(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function uq(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var dq=/%(\d[a-f0-9])/gi,hq={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function mN(n){return encodeURIComponent(n).replace(dq,(e,t)=>hq[t]??e)}function Pp(n){return`${n}`}var Po=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new jw,e.fromString){if(e.fromObject)throw new J(2805,!1);this.map=uq(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Pp):[Pp(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Pp(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Pp(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Bw=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function fq(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function gN(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function vN(n){return typeof Blob<"u"&&n instanceof Blob}function yN(n){return typeof FormData<"u"&&n instanceof FormData}function pq(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var _N="Content-Type",IN="X-Request-URL",TN="text/plain",bN="application/json",mq=`${bN}, ${TN}, */*`,Ru=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(fq(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Ss,this.context??=new Bw,!this.params)this.params=new Po,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||gN(this.body)||vN(this.body)||yN(this.body)||pq(this.body)?this.body:this.body instanceof Po?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||yN(this.body)?null:vN(this.body)?this.body.type||null:gN(this.body)?null:typeof this.body=="string"?TN:this.body instanceof Po?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?bN:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,u=e.headers||this.headers,d=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((m,v)=>m.set(v,e.setHeaders[v]),u)),e.setParams&&(d=Object.keys(e.setParams).reduce((m,v)=>m.set(v,e.setParams[v]),d)),new n(t,r,s,{params:d,headers:u,context:f,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},sc=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(sc||{}),Nu=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new Ss,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},$w=class n extends Nu{constructor(e={}){super(e)}type=sc.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Op=class n extends Nu{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=sc.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Fp=class extends Nu{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},gq=200,vq=204;function Uw(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var yq=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Ru)o=t;else{let c;i.headers instanceof Ss?c=i.headers:c=new Ss(i.headers);let u;i.params&&(i.params instanceof Po?u=i.params:u=new Po({fromObject:i.params})),o=new Ru(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=se(o).pipe(wi(c=>this.handler.handle(c)));if(t instanceof Ru||i.observe==="events")return s;let a=s.pipe(nn(c=>c instanceof Op));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Q(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(Q(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(Q(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(Q(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Po().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Uw(i,r))}post(t,r,i={}){return this.request("POST",t,Uw(i,r))}put(t,r,i={}){return this.request("PUT",t,Uw(i,r))}static \u0275fac=function(r){return new(r||n)(re(xu))};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})();var _q=new $("");function wq(n,e){return e(n)}function Eq(n,e,t){return(r,i)=>rn(t,()=>e(r,o=>n(o,i)))}var CN=new $(""),Iq=new $(""),Tq=new $("",{providedIn:"root",factory:()=>!0});var wN=(()=>{class n extends xu{backend;injector;chain=null;pendingTasks=D(ei);contributeToStability=D(Tq);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(CN),...this.injector.get(Iq,[])]));this.chain=r.reduceRight((i,o)=>Eq(i,o,this.injector),wq)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(ls(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(re(kp),re(pn))};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})();var bq=/^\)\]\}',?\n/,Cq=RegExp(`^${IN}:`,"m");function Dq(n){return"responseURL"in n&&n.responseURL?n.responseURL:Cq.test(n.getAllResponseHeaders())?n.getResponseHeader(IN):null}var EN=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new J(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?rt(r.\u0275loadImpl()):se(null)).pipe(hn(()=>new he(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((R,S)=>s.setRequestHeader(R,S.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept",mq),!t.headers.has(_N)){let R=t.detectContentTypeHeader();R!==null&&s.setRequestHeader(_N,R)}if(t.responseType){let R=t.responseType.toLowerCase();s.responseType=R!=="json"?R:"text"}let a=t.serializeBody(),c=null,u=()=>{if(c!==null)return c;let R=s.statusText||"OK",S=new Ss(s.getAllResponseHeaders()),F=Dq(s)||t.url;return c=new $w({headers:S,status:s.status,statusText:R,url:F}),c},d=()=>{let{headers:R,status:S,statusText:F,url:W}=u(),q=null;S!==vq&&(q=typeof s.response>"u"?s.responseText:s.response),S===0&&(S=q?gq:0);let te=S>=200&&S<300;if(t.responseType==="json"&&typeof q=="string"){let Xe=q;q=q.replace(bq,"");try{q=q!==""?JSON.parse(q):null}catch(ue){q=Xe,te&&(te=!1,q={error:ue,text:q})}}te?(o.next(new Op({body:q,headers:R,status:S,statusText:F,url:W||void 0})),o.complete()):o.error(new Fp({error:q,headers:R,status:S,statusText:F,url:W||void 0}))},f=R=>{let{url:S}=u(),F=new Fp({error:R,status:s.status||0,statusText:s.statusText||"Unknown Error",url:S||void 0});o.error(F)},m=!1,v=R=>{m||(o.next(u()),m=!0);let S={type:sc.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(S.total=R.total),t.responseType==="text"&&s.responseText&&(S.partialText=s.responseText),o.next(S)},w=R=>{let S={type:sc.UploadProgress,loaded:R.loaded};R.lengthComputable&&(S.total=R.total),o.next(S)};return s.addEventListener("load",d),s.addEventListener("error",f),s.addEventListener("timeout",f),s.addEventListener("abort",f),t.reportProgress&&(s.addEventListener("progress",v),a!==null&&s.upload&&s.upload.addEventListener("progress",w)),s.send(a),o.next({type:sc.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",d),s.removeEventListener("timeout",f),t.reportProgress&&(s.removeEventListener("progress",v),a!==null&&s.upload&&s.upload.removeEventListener("progress",w)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(re(rc))};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})(),DN=new $(""),Sq="XSRF-TOKEN",Aq=new $("",{providedIn:"root",factory:()=>Sq}),Rq="X-XSRF-TOKEN",xq=new $("",{providedIn:"root",factory:()=>Rq}),Lp=class{},Nq=(()=>{class n{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Mp(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(re(gn),re(Dt),re(Aq))};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})();function Mq(n,e){let t=n.url.toLowerCase();if(!D(DN)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=D(Lp).getToken(),i=D(xq);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function SN(...n){let e=[yq,EN,wN,{provide:xu,useExisting:wN},{provide:kp,useFactory:()=>D(_q,{optional:!0})??D(EN)},{provide:CN,useValue:Mq,multi:!0},{provide:DN,useValue:!0},{provide:Lp,useClass:Nq}];for(let t of n)e.push(...t.\u0275providers);return it(e)}var Ww=class extends Ap{supportsDOMEvents=!0},qw=class n extends Ww{static makeCurrent(){cN(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Pq();return t==null?null:kq(t)}resetBaseElement(){Mu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Mp(document.cookie,e)}},Mu=null;function Pq(){return Mu=Mu||document.querySelector("base"),Mu?Mu.getAttribute("href"):null}function kq(n){return new URL(n,document.baseURI).pathname}var Oq=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})(),zw=new $(""),PN=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new J(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(re(zw),re(pe))};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})(),Up=class{_doc;constructor(e){this._doc=e}manager},Vp="ng-app-id";function AN(n){for(let e of n)e.remove()}function RN(n,e){let t=e.createElement("style");return t.textContent=n,t}function Fq(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Vp}="${e}"],link[${Vp}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Vp),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Gw(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var kN=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=ki(o),Fq(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,RN);r?.forEach(i=>this.addUsage(i,this.external,Gw))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(AN(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])AN(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,RN(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Gw(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Vp,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(re(gn),re(sw),re(cw,8),re(Dt))};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})(),Hw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Yw=/%COMP%/g,ON="%COMP%",Lq=`_nghost-${ON}`,Vq=`_ngcontent-${ON}`,Uq=!0,jq=new $("",{providedIn:"root",factory:()=>Uq});function Bq(n){return Vq.replace(Yw,n)}function $q(n){return Lq.replace(Yw,n)}function FN(n,e){return e.map(t=>t.replace(Yw,n))}var xN=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c,u=null,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.tracingService=d,this.platformIsServer=ki(a),this.defaultRenderer=new Pu(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Xr.ShadowDom&&(r=me(j({},r),{encapsulation:Xr.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof jp?i.applyToHost(t):i instanceof ku&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case Xr.Emulated:o=new jp(c,u,r,this.appId,d,s,a,f,this.tracingService);break;case Xr.ShadowDom:return new Kw(c,u,t,r,s,a,this.nonce,f,this.tracingService);default:o=new ku(c,u,r,d,s,a,f,this.tracingService);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(re(PN),re(kN),re(sw),re(jq),re(gn),re(Dt),re(pe),re(cw),re(lp,8))};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})(),Pu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Hw[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(NN(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(NN(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new J(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Hw[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Hw[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ti.DashCase|Ti.Important)?e.style.setProperty(t,r,i&Ti.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ti.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Pi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);let o=this.decoratePreventDefault(r);return this.tracingService!==null&&this.tracingService.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function NN(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Kw=class extends Pu{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=FN(i.id,i.styles);for(let m of d){let v=document.createElement("style");a&&v.setAttribute("nonce",a),v.textContent=m,this.shadowRoot.appendChild(v)}let f=i.getExternalStyles?.();if(f)for(let m of f){let v=Gw(m,o);a&&v.setAttribute("nonce",a),this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ku=class extends Pu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?FN(u,r.styles):r.styles,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},jp=class extends ku{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,u){let d=i+"-"+r.id;super(e,t,r,o,s,a,c,u,d),this.contentAttr=Bq(d),this.hostAttr=$q(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},Hq=(()=>{class n extends Up{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(re(gn))};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})(),MN=["alt","control","meta","shift"],Wq={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qq={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},zq=(()=>{class n extends Up{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pi().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),MN.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=Wq[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),MN.forEach(s=>{if(s!==i){let a=qq[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(re(gn))};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})();function LN(n,e){return Xx(j({rootComponent:n},Gq(e)))}function Gq(n){return{appProviders:[...Xq,...n?.providers??[]],platformProviders:Jq}}function Kq(){qw.makeCurrent()}function Yq(){return new Ii}function Qq(){return XR(document),document}var Jq=[{provide:Dt,useValue:Vw},{provide:aw,useValue:Kq,multi:!0},{provide:gn,useFactory:Qq,deps:[]}];var Xq=[{provide:Jf,useValue:"root"},{provide:Ii,useFactory:Yq,deps:[]},{provide:zw,useClass:Hq,multi:!0,deps:[gn,pe,Dt]},{provide:zw,useClass:zq,multi:!0,deps:[gn]},xN,kN,PN,{provide:Ja,useExisting:xN},{provide:rc,useClass:Oq,deps:[]},[]];var Bp=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(re(gn))};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Te="primary",Ju=Symbol("RouteTitle"),eE=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function hc(n){return new eE(n)}function Zq(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ez(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ii(n[t],e[t]))return!1;return!0}function ii(n,e){let t=n?tE(n):void 0,r=e?tE(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!zN(n[i],e[i]))return!1;return!0}function tE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function zN(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function GN(n){return n.length>0?n[n.length-1]:null}function ko(n){return Ry(n)?n:Cs(n)?rt(Promise.resolve(n)):se(n)}var tz={exact:YN,subset:QN},KN={exact:nz,subset:rz,ignored:()=>!0};function UN(n,e,t){return tz[t.paths](n.root,e.root,t.matrixParams)&&KN[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function nz(n,e){return ii(n,e)}function YN(n,e,t){if(!Rs(n.segments,e.segments)||!Wp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!YN(n.children[r],e.children[r],t))return!1;return!0}function rz(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>zN(n[t],e[t]))}function QN(n,e,t){return JN(n,e,e.segments,t)}function JN(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Rs(i,t)||e.hasChildren()||!Wp(i,t,r))}else if(n.segments.length===t.length){if(!Rs(n.segments,t)||!Wp(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!QN(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Rs(n.segments,i)||!Wp(n.segments,i,r)||!n.children[Te]?!1:JN(n.children[Te],e,o,r)}}function Wp(n,e,t){return e.every((r,i)=>KN[t](n[i].parameters,r.parameters))}var Fi=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ze([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=hc(this.queryParams),this._queryParamMap}toString(){return sz.serialize(this)}},ze=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qp(this)}},As=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=hc(this.parameters),this._parameterMap}toString(){return ZN(this)}};function iz(n,e){return Rs(n,e)&&n.every((t,r)=>ii(t.parameters,e[r].parameters))}function Rs(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function oz(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Te&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Te&&(t=t.concat(e(i,r)))}),t}var DE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:()=>new ju,providedIn:"root"})}return n})(),ju=class{parse(e){let t=new rE(e);return new Fi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ou(e.root,!0)}`,r=lz(e.queryParams),i=typeof e.fragment=="string"?`#${az(e.fragment)}`:"";return`${t}${r}${i}`}},sz=new ju;function qp(n){return n.segments.map(e=>ZN(e)).join("/")}function Ou(n,e){if(!n.hasChildren())return qp(n);if(e){let t=n.children[Te]?Ou(n.children[Te],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Te&&r.push(`${i}:${Ou(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=oz(n,(r,i)=>i===Te?[Ou(n.children[Te],!1)]:[`${i}:${Ou(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Te]!=null?`${qp(n)}/${t[0]}`:`${qp(n)}/(${t.join("//")})`}}function XN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $p(n){return XN(n).replace(/%3B/gi,";")}function az(n){return encodeURI(n)}function nE(n){return XN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zp(n){return decodeURIComponent(n)}function jN(n){return zp(n.replace(/\+/g,"%20"))}function ZN(n){return`${nE(n.path)}${cz(n.parameters)}`}function cz(n){return Object.entries(n).map(([e,t])=>`;${nE(e)}=${nE(t)}`).join("")}function lz(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${$p(t)}=${$p(i)}`).join("&"):`${$p(t)}=${$p(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var uz=/^[^\/()?;#]+/;function Qw(n){let e=n.match(uz);return e?e[0]:""}var dz=/^[^\/()?;=#]+/;function hz(n){let e=n.match(dz);return e?e[0]:""}var fz=/^[^=?&#]+/;function pz(n){let e=n.match(fz);return e?e[0]:""}var mz=/^[^&#]+/;function gz(n){let e=n.match(mz);return e?e[0]:""}var rE=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ze([],{}):new ze([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Te]=new ze(e,t)),r}parseSegment(){let e=Qw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new J(4009,!1);return this.capture(e),new As(zp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=hz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Qw(this.remaining);i&&(r=i,this.capture(r))}e[zp(t)]=zp(r)}parseQueryParam(e){let t=pz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=gz(this.remaining);s&&(r=s,this.capture(r))}let i=jN(t),o=jN(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Qw(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new J(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Te);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[Te]:new ze([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new J(4011,!1)}};function eM(n){return n.segments.length>0?new ze([],{[Te]:n}):n}function tM(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=tM(i);if(r===Te&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new ze(n.segments,e);return vz(t)}function vz(n){if(n.numberOfChildren===1&&n.children[Te]){let e=n.children[Te];return new ze(n.segments.concat(e.segments),e.children)}return n}function Bu(n){return n instanceof Fi}function yz(n,e,t=null,r=null){let i=nM(n);return rM(i,e,t,r)}function nM(n){let e;function t(o){let s={};for(let c of o.children){let u=t(c);s[c.outlet]=u}let a=new ze(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=eM(r);return e??i}function rM(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Jw(i,i,i,t,r);let o=_z(e);if(o.toRoot())return Jw(i,i,new ze([],{}),t,r);let s=wz(o,i,n),a=s.processChildren?Lu(s.segmentGroup,s.index,o.commands):oM(s.segmentGroup,s.index,o.commands);return Jw(i,s.segmentGroup,a,t,r)}function Gp(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function $u(n){return typeof n=="object"&&n!=null&&n.outlets}function Jw(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let s;n===e?s=t:s=iM(n,e,t);let a=eM(tM(s));return new Fi(a,o,i)}function iM(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=iM(o,e,t)}),new ze(n.segments,r)}var Kp=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Gp(r[0]))throw new J(4003,!1);let i=r.find($u);if(i&&i!==GN(r))throw new J(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function _z(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Kp(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Kp(t,e,r)}var lc=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function wz(n,e,t){if(n.isAbsolute)return new lc(e,!0,0);if(!t)return new lc(e,!1,NaN);if(t.parent===null)return new lc(t,!0,0);let r=Gp(n.commands[0])?0:1,i=t.segments.length-1+r;return Ez(t,i,n.numberOfDoubleDots)}function Ez(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new J(4005,!1);i=r.segments.length}return new lc(r,!1,i-o)}function Iz(n){return $u(n[0])?n[0].outlets:{[Te]:n}}function oM(n,e,t){if(n??=new ze([],{}),n.segments.length===0&&n.hasChildren())return Lu(n,e,t);let r=Tz(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new ze(n.segments.slice(0,r.pathIndex),{});return o.children[Te]=new ze(n.segments.slice(r.pathIndex),n.children),Lu(o,0,i)}else return r.match&&i.length===0?new ze(n.segments,{}):r.match&&!n.hasChildren()?iE(n,e,t):r.match?Lu(n,0,i):iE(n,e,t)}function Lu(n,e,t){if(t.length===0)return new ze(n.segments,{});{let r=Iz(t),i={};if(Object.keys(r).some(o=>o!==Te)&&n.children[Te]&&n.numberOfChildren===1&&n.children[Te].segments.length===0){let o=Lu(n.children[Te],e,t);return new ze(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=oM(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ze(n.segments,i)}}function Tz(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if($u(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!$N(c,u,s))return o;r+=2}else{if(!$N(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function iE(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if($u(o)){let c=bz(o.outlets);return new ze(r,c)}if(i===0&&Gp(t[0])){let c=n.segments[e];r.push(new As(c.path,BN(t[0]))),i++;continue}let s=$u(o)?o.outlets[Te]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Gp(a)?(r.push(new As(s,BN(a))),i+=2):(r.push(new As(s,{})),i++)}return new ze(r,{})}function bz(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=iE(new ze([],{}),0,r))}),e}function BN(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function $N(n,e,t){return n==t.path&&ii(e,t.parameters)}var Vu="imperative",sn=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(sn||{}),pr=class{id;url;constructor(e,t){this.id=e,this.url=t}},Hu=class extends pr{type=sn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},xs=class extends pr{urlAfterRedirects;type=sn.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Xn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Xn||{}),oE=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(oE||{}),Oi=class extends pr{reason;code;type=sn.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ns=class extends pr{reason;code;type=sn.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Wu=class extends pr{error;target;type=sn.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Yp=class extends pr{urlAfterRedirects;state;type=sn.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sE=class extends pr{urlAfterRedirects;state;type=sn.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},aE=class extends pr{urlAfterRedirects;state;shouldActivate;type=sn.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},cE=class extends pr{urlAfterRedirects;state;type=sn.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lE=class extends pr{urlAfterRedirects;state;type=sn.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},uE=class{route;type=sn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},dE=class{route;type=sn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},hE=class{snapshot;type=sn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fE=class{snapshot;type=sn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pE=class{snapshot;type=sn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qu=class{snapshot;type=sn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var zu=class{},fc=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Cz(n,e){return n.providers&&!n._injector&&(n._injector=bw(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Fr(n){return n.outlet||Te}function Dz(n,e){let t=n.filter(r=>Fr(r)===e);return t.push(...n.filter(r=>Fr(r)!==e)),t}function Xu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var mE=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Xu(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new nm(this.rootInjector)}},nm=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new mE(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(re(pn))};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Qp=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=gE(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=gE(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=vE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return vE(e,this._root).map(t=>t.value)}};function gE(n,e){if(n===e.value)return e;for(let t of e.children){let r=gE(n,t);if(r)return r}return null}function vE(n,e){if(n===e.value)return[e];for(let t of e.children){let r=vE(n,t);if(r.length)return r.unshift(e),r}return[]}var Jn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function cc(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Jp=class extends Qp{snapshot;constructor(e,t){super(e),this.snapshot=t,SE(this,e)}toString(){return this.snapshot.toString()}};function sM(n){let e=Sz(n),t=new tn([new As("",{})]),r=new tn({}),i=new tn({}),o=new tn({}),s=new tn(""),a=new pc(t,r,o,s,i,Te,n,e.root);return a.snapshot=e.root,new Jp(new Jn(a,[]),e)}function Sz(n){let e={},t={},r={},i="",o=new uc([],e,r,i,t,Te,n,null,{});return new Zp("",new Jn(o,[]))}var pc=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Q(u=>u[Ju]))??se(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Q(e=>hc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Q(e=>hc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Xp(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:j(j({},e.params),n.params),data:j(j({},e.data),n.data),resolve:j(j(j(j({},n.data),e.data),i?.data),n._resolvedData)}:r={params:j({},n.params),data:j({},n.data),resolve:j(j({},n.data),n._resolvedData??{})},i&&cM(i)&&(r.resolve[Ju]=i.title),r}var uc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ju]}constructor(e,t,r,i,o,s,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=hc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=hc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Zp=class extends Qp{url;constructor(e,t){super(t),this.url=e,SE(this,t)}toString(){return aM(this._root)}};function SE(n,e){e.value._routerState=n,e.children.forEach(t=>SE(n,t))}function aM(n){let e=n.children.length>0?` { ${n.children.map(aM).join(", ")} } `:"";return`${n.value}${e}`}function Xw(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ii(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ii(e.params,t.params)||n.paramsSubject.next(t.params),ez(e.url,t.url)||n.urlSubject.next(t.url),ii(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function yE(n,e){let t=ii(n.params,e.params)&&iz(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||yE(n.parent,e.parent))}function cM(n){return typeof n.title=="string"||n.title===null}var Az=new $(""),AE=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Te;activateEvents=new Kt;deactivateEvents=new Kt;attachEvents=new Kt;detachEvents=new Kt;routerOutletData=WR(void 0);parentContexts=D(nm);location=D(bs);changeDetector=D(No);inputBinder=D(RE,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new J(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new J(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new J(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new J(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new _E(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=dt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Do]})}return n})(),_E=class n{route;childContexts;parent;outletData;__ngOutletInjector(e){return new n(this.route,this.childContexts,e,this.outletData)}constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===pc?this.route:e===nm?this.childContexts:e===Az?this.outletData:this.parent.get(e,t)}},RE=new $("");function Rz(n,e,t){let r=Gu(n,e._root,t?t._root:void 0);return new Jp(r,e)}function Gu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=xz(n,e,t);return new Jn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Gu(n,a)),s}}let r=Nz(e.value),i=e.children.map(o=>Gu(n,o));return new Jn(r,i)}}function xz(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Gu(n,r,i);return Gu(n,r)})}function Nz(n){return new pc(new tn(n.url),new tn(n.params),new tn(n.queryParams),new tn(n.fragment),new tn(n.data),n.outlet,n.component,n)}var Ku=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},lM="ngNavigationCancelingError";function em(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Bu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=uM(!1,Xn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function uM(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[lM]=!0,t.cancellationCode=e,t}function Mz(n){return dM(n)&&Bu(n.url)}function dM(n){return!!n&&n[lM]}var Pz=(n,e,t,r)=>Q(i=>(new wE(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),wE=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Xw(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=cc(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=cc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=cc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=cc(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new qu(o.value.snapshot))}),e.children.length&&this.forwardEvent(new fE(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Xw(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Xw(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},tm=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},dc=class{component;route;constructor(e,t){this.component=e,this.route=t}};function kz(n,e,t){let r=n._root,i=e?e._root:null;return Fu(r,i,t,[r.value])}function Oz(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function gc(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!HA(n)?n:e.get(n):r}function Fu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=cc(e);return n.children.forEach(s=>{Fz(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Uu(a,t.getContext(s),i)),i}function Fz(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=Lz(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new tm(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Fu(n,e,a?a.children:null,r,i):Fu(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new dc(a.outlet.component,s))}else s&&Uu(e,a,i),i.canActivateChecks.push(new tm(r)),o.component?Fu(n,null,a?a.children:null,r,i):Fu(n,null,t,r,i);return i}function Lz(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Rs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Rs(n.url,e.url)||!ii(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yE(n,e)||!ii(n.queryParams,e.queryParams);case"paramsChange":default:return!yE(n,e)}}function Uu(n,e,t){let r=cc(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Uu(s,e.children.getContext(o),t):Uu(s,null,t):Uu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new dc(e.outlet.component,i)):t.canDeactivateChecks.push(new dc(null,i)):t.canDeactivateChecks.push(new dc(null,i))}function Zu(n){return typeof n=="function"}function Vz(n){return typeof n=="boolean"}function Uz(n){return n&&Zu(n.canLoad)}function jz(n){return n&&Zu(n.canActivate)}function Bz(n){return n&&Zu(n.canActivateChild)}function $z(n){return n&&Zu(n.canDeactivate)}function Hz(n){return n&&Zu(n.canMatch)}function hM(n){return n instanceof _i||n?.name==="EmptyError"}var Hp=Symbol("INITIAL_VALUE");function mc(){return hn(n=>$e(n.map(e=>e.pipe(Yr(1),La(Hp)))).pipe(Q(e=>{for(let t of e)if(t!==!0){if(t===Hp)return Hp;if(t===!1||Wz(t))return t}return!0}),nn(e=>e!==Hp),Yr(1)))}function Wz(n){return Bu(n)||n instanceof Ku}function qz(n,e){return Nt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?se(me(j({},t),{guardsResult:!0})):zz(s,r,i,n).pipe(Nt(a=>a&&Vz(a)?Gz(r,o,n,e):se(a)),Q(a=>me(j({},t),{guardsResult:a})))})}function zz(n,e,t,r){return rt(n).pipe(Nt(i=>Xz(i.component,i.route,t,e,r)),Ei(i=>i!==!0,!0))}function Gz(n,e,t,r){return rt(e).pipe(wi(i=>Oa(Yz(i.route.parent,r),Kz(i.route,r),Jz(n,i.path,t),Qz(n,i.route,t))),Ei(i=>i!==!0,!0))}function Kz(n,e){return n!==null&&e&&e(new pE(n)),se(!0)}function Yz(n,e){return n!==null&&e&&e(new hE(n)),se(!0)}function Qz(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return se(!0);let i=r.map(o=>cf(()=>{let s=Xu(e)??t,a=gc(o,s),c=jz(a)?a.canActivate(e,n):rn(s,()=>a(e,n));return ko(c).pipe(Ei())}));return se(i).pipe(mc())}function Jz(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Oz(s)).filter(s=>s!==null).map(s=>cf(()=>{let a=s.guards.map(c=>{let u=Xu(s.node)??t,d=gc(c,u),f=Bz(d)?d.canActivateChild(r,n):rn(u,()=>d(r,n));return ko(f).pipe(Ei())});return se(a).pipe(mc())}));return se(o).pipe(mc())}function Xz(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return se(!0);let s=o.map(a=>{let c=Xu(e)??i,u=gc(a,c),d=$z(u)?u.canDeactivate(n,e,t,r):rn(c,()=>u(n,e,t,r));return ko(d).pipe(Ei())});return se(s).pipe(mc())}function Zz(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return se(!0);let o=i.map(s=>{let a=gc(s,n),c=Uz(a)?a.canLoad(e,t):rn(n,()=>a(e,t));return ko(c)});return se(o).pipe(mc(),fM(r))}function fM(n){return Bh(Gt(e=>{if(typeof e!="boolean")throw em(n,e)}),Q(e=>e===!0))}function eG(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return se(!0);let o=i.map(s=>{let a=gc(s,n),c=Hz(a)?a.canMatch(e,t):rn(n,()=>a(e,t));return ko(c)});return se(o).pipe(mc(),fM(r))}var Yu=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Qu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function ac(n){return ka(new Yu(n))}function tG(n){return ka(new J(4e3,!1))}function nG(n){return ka(uM(!1,Xn.GuardRejected))}var EE=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return se(r);if(i.numberOfChildren>1||!i.children[Te])return tG(`${e.redirectTo}`);i=i.children[Te]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:u,routeConfig:d,url:f,outlet:m,params:v,data:w,title:R}=i,S=rn(o,()=>a({params:v,data:w,queryParams:c,fragment:u,routeConfig:d,url:f,outlet:m,title:R}));if(S instanceof Fi)throw new Qu(S);t=S}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Qu(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Fi(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new ze(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new J(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},IE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rG(n,e,t,r,i){let o=pM(n,e,t);return o.matched?(r=Cz(e,r),eG(r,e,t,i).pipe(Q(s=>s===!0?o:j({},IE)))):se(o)}function pM(n,e,t){if(e.path==="**")return iG(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?j({},IE):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Zq)(t,n,e);if(!i)return j({},IE);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?j(j({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function iG(n){return{matched:!0,parameters:n.length>0?GN(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function HN(n,e,t,r){return t.length>0&&aG(n,t,r)?{segmentGroup:new ze(e,sG(r,new ze(t,n.children))),slicedSegments:[]}:t.length===0&&cG(n,t,r)?{segmentGroup:new ze(n.segments,oG(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ze(n.segments,n.children),slicedSegments:t}}function oG(n,e,t,r){let i={};for(let o of t)if(rm(n,e,o)&&!r[Fr(o)]){let s=new ze([],{});i[Fr(o)]=s}return j(j({},r),i)}function sG(n,e){let t={};t[Te]=e;for(let r of n)if(r.path===""&&Fr(r)!==Te){let i=new ze([],{});t[Fr(r)]=i}return t}function aG(n,e,t){return t.some(r=>rm(n,e,r)&&Fr(r)!==Te)}function cG(n,e,t){return t.some(r=>rm(n,e,r))}function rm(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function lG(n,e,t){return e.length===0&&!n.children[t]}var TE=class{};function uG(n,e,t,r,i,o,s="emptyOnly"){return new bE(n,e,t,r,i,s,o).recognize()}var dG=31,bE=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new EE(this.urlSerializer,this.urlTree)}noMatchError(e){return new J(4002,`'${e.segmentGroup}'`)}recognize(){let e=HN(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Q(({children:t,rootSnapshot:r})=>{let i=new Jn(r,t),o=new Zp("",i),s=yz(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new uc([],Object.freeze({}),Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Te,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Te,t).pipe(Q(r=>({children:r,rootSnapshot:t})),po(r=>{if(r instanceof Qu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Yu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Q(s=>s instanceof Jn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return rt(o).pipe(wi(s=>{let a=r.children[s],c=Dz(t,s);return this.processSegmentGroup(e,c,a,s,i)}),hf((s,a)=>(s.push(...a),s)),mo(null),ky(),Nt(s=>{if(s===null)return ac(r);let a=mM(s);return hG(a),se(a)}))}processSegment(e,t,r,i,o,s,a){return rt(t).pipe(wi(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(po(u=>{if(u instanceof Yu)return se(null);throw u}))),Ei(c=>!!c),po(c=>{if(hM(c))return lG(r,i,o)?se(new TE):ac(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return Fr(r)!==s&&(s===Te||!rm(i,o,r))?ac(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):ac(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:f,remainingSegments:m}=pM(t,i,o);if(!c)return ac(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>dG&&(this.allowRedirects=!1));let v=new uc(o,u,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,WN(i),Fr(i),i.component??i._loadedComponent??null,i,qN(i)),w=Xp(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(w.params),v.data=Object.freeze(w.data);let R=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,v,e);return this.applyRedirects.lineralizeSegments(i,R).pipe(Nt(S=>this.processSegment(e,r,t,S.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=rG(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(hn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(hn(({routes:u})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:m,remainingSegments:v}=c,w=new uc(m,f,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,WN(r),Fr(r),r.component??r._loadedComponent??null,r,qN(r)),R=Xp(w,s,this.paramsInheritanceStrategy);w.params=Object.freeze(R.params),w.data=Object.freeze(R.data);let{segmentGroup:S,slicedSegments:F}=HN(t,m,v,u);if(F.length===0&&S.hasChildren())return this.processChildren(d,u,S,w).pipe(Q(q=>new Jn(w,q)));if(u.length===0&&F.length===0)return se(new Jn(w,[]));let W=Fr(r)===o;return this.processSegment(d,u,S,F,W?Te:o,!0,w).pipe(Q(q=>new Jn(w,q instanceof Jn?[q]:[])))}))):ac(t)))}getChildConfig(e,t,r){return t.children?se({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?se({routes:t._loadedRoutes,injector:t._loadedInjector}):Zz(e,t,r,this.urlSerializer).pipe(Nt(i=>i?this.configLoader.loadChildren(e,t).pipe(Gt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):nG(t))):se({routes:[],injector:e})}};function hG(n){n.sort((e,t)=>e.value.outlet===Te?-1:t.value.outlet===Te?1:e.value.outlet.localeCompare(t.value.outlet))}function fG(n){let e=n.value.routeConfig;return e&&e.path===""}function mM(n){let e=[],t=new Set;for(let r of n){if(!fG(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=mM(r.children);e.push(new Jn(r.value,i))}return e.filter(r=>!t.has(r))}function WN(n){return n.data||{}}function qN(n){return n.resolve||{}}function pG(n,e,t,r,i,o){return Nt(s=>uG(n,e,t,r,s.extractedUrl,i,o).pipe(Q(({state:a,tree:c})=>me(j({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function mG(n,e){return Nt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return se(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of gM(c))s.add(u);let a=0;return rt(s).pipe(wi(c=>o.has(c)?gG(c,r,n,e):(c.data=Xp(c,c.parent,n).resolve,se(void 0))),Gt(()=>a++),Fa(1),Nt(c=>a===s.size?se(t):Kn))})}function gM(n){let e=n.children.map(t=>gM(t)).flat();return[n,...e]}function gG(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!cM(i)&&(o[Ju]=i.title),vG(o,n,e,r).pipe(Q(s=>(n._resolvedData=s,n.data=Xp(n,n.parent,t).resolve,null)))}function vG(n,e,t,r){let i=tE(n);if(i.length===0)return se({});let o={};return rt(i).pipe(Nt(s=>yG(n[s],e,t,r).pipe(Ei(),Gt(a=>{if(a instanceof Ku)throw em(new ju,a);o[s]=a}))),Fa(1),Q(()=>o),po(s=>hM(s)?Kn:ka(s)))}function yG(n,e,t,r){let i=Xu(e)??r,o=gc(n,i),s=o.resolve?o.resolve(e,t):rn(i,()=>o(e,t));return ko(s)}function Zw(n){return hn(e=>{let t=n(e);return t?rt(t).pipe(Q(()=>e)):se(e)})}var vM=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Te);return r}getResolvedTitleForRoute(t){return t.data[Ju]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:()=>D(_G),providedIn:"root"})}return n})(),_G=(()=>{class n extends vM{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(re(Bp))};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xE=new $("",{providedIn:"root",factory:()=>({})}),NE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Pe({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&ve(0,"router-outlet")},dependencies:[AE],encapsulation:2})}return n})();function ME(n){let e=n.children&&n.children.map(ME),t=e?me(j({},n),{children:e}):j({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Te&&(t.component=NE),t}var PE=new $(""),wG=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=D(xw);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return se(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=ko(t.loadComponent()).pipe(Q(yM),Gt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ls(()=>{this.componentLoaders.delete(t)})),i=new Ra(r,()=>new ct).pipe(Aa());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return se({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=EG(r,this.compiler,t,this.onLoadEndListener).pipe(ls(()=>{this.childrenLoaders.delete(r)})),s=new Ra(o,()=>new ct).pipe(Aa());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function EG(n,e,t,r){return ko(n.loadChildren()).pipe(Q(yM),Nt(i=>i instanceof _u||Array.isArray(i)?se(i):rt(e.compileModuleAsync(i))),Q(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(PE,[],{optional:!0,self:!0}).flat()),{routes:s.map(ME),injector:o}}))}function IG(n){return n&&typeof n=="object"&&"default"in n}function yM(n){return IG(n)?n.default:n}var kE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:()=>D(TG),providedIn:"root"})}return n})(),TG=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bG=new $("");var CG=new $(""),DG=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ct;transitionAbortSubject=new ct;configLoader=D(wG);environmentInjector=D(pn);urlSerializer=D(DE);rootContexts=D(nm);location=D(Au);inputBindingEnabled=D(RE,{optional:!0})!==null;titleStrategy=D(vM);options=D(xE,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=D(kE);createViewTransition=D(bG,{optional:!0});navigationErrorHandler=D(CG,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>se(void 0);rootComponentType=null;constructor(){let t=i=>this.events.next(new uE(i)),r=i=>this.events.next(new dE(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(me(j(j({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new tn({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Vu,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(nn(o=>o.id!==0),Q(o=>me(j({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),hn(o=>{let s=!1,a=!1;return se(o).pipe(hn(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Xn.SupersededByNewNavigation),Kn;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?me(j({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!u&&d!=="reload"){let f="";return this.events.next(new Ns(c.id,this.urlSerializer.serialize(c.rawUrl),f,oE.IgnoredSameUrlNavigation)),c.resolve(!1),Kn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return se(c).pipe(hn(f=>{let m=this.transitions?.getValue();return this.events.next(new Hu(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),m!==this.transitions?.getValue()?Kn:Promise.resolve(f)}),pG(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Gt(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=me(j({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let m=new Yp(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:m,source:v,restoredState:w,extras:R}=c,S=new Hu(f,this.urlSerializer.serialize(m),v,w);this.events.next(S);let F=sM(this.rootComponentType).snapshot;return this.currentTransition=o=me(j({},c),{targetSnapshot:F,urlAfterRedirects:m,extras:me(j({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,se(o)}else{let f="";return this.events.next(new Ns(c.id,this.urlSerializer.serialize(c.extractedUrl),f,oE.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Kn}}),Gt(c=>{let u=new sE(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Q(c=>(this.currentTransition=o=me(j({},c),{guards:kz(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),qz(this.environmentInjector,c=>this.events.next(c)),Gt(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw em(this.urlSerializer,c.guardsResult);let u=new aE(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),nn(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Xn.GuardRejected),!1)),Zw(c=>{if(c.guards.canActivateChecks.length)return se(c).pipe(Gt(u=>{let d=new cE(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),hn(u=>{let d=!1;return se(u).pipe(mG(this.paramsInheritanceStrategy,this.environmentInjector),Gt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",Xn.NoDataFromResolver)}}))}),Gt(u=>{let d=new lE(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),Zw(c=>{let u=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(Gt(m=>{d.component=m}),Q(()=>{})));for(let m of d.children)f.push(...u(m));return f};return $e(u(c.targetSnapshot.root)).pipe(mo(null),Yr(1))}),Zw(()=>this.afterPreactivation()),hn(()=>{let{currentSnapshot:c,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return d?rt(d).pipe(Q(()=>o)):se(o)}),Q(c=>{let u=Rz(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=me(j({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),Gt(()=>{this.events.next(new zu)}),Pz(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Yr(1),Gt({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new xs(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),zt(this.transitionAbortSubject.pipe(Gt(c=>{throw c}))),ls(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Xn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),po(c=>{if(a=!0,dM(c))this.events.next(new Oi(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),Mz(c)?this.events.next(new fc(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let u=new Wu(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let d=rn(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(d instanceof Ku){let{message:f,cancellationCode:m}=em(this.urlSerializer,d);this.events.next(new Oi(o.id,this.urlSerializer.serialize(o.extractedUrl),f,m)),this.events.next(new fc(d.redirectTo,d.navigationBehaviorOptions))}else throw this.events.next(u),c}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return Kn}))}))}cancelNavigationTransition(t,r,i){let o=new Oi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function SG(n){return n!==Vu}var AG=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:()=>D(RG),providedIn:"root"})}return n})(),CE=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},RG=(()=>{class n extends CE{static \u0275fac=(()=>{let t;return function(i){return(t||(t=xr(n)))(i||n)}})();static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_M=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:()=>D(xG),providedIn:"root"})}return n})(),xG=(()=>{class n extends _M{location=D(Au);urlSerializer=D(DE);options=D(xE,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=D(kE);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Fi;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=sM(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Hu)this.stateMemento=this.createStateMemento();else if(t instanceof Ns)this.rawUrlTree=r.initialUrl;else if(t instanceof Yp){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof zu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Oi&&(t.code===Xn.GuardRejected||t.code===Xn.NoDataFromResolver)?this.restoreHistory(r):t instanceof Wu?this.restoreHistory(r,!0):t instanceof xs&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Fi?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=j(j({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=j(j({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=xr(n)))(i||n)}})();static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function NG(n,e){n.events.pipe(nn(t=>t instanceof xs||t instanceof Oi||t instanceof Wu||t instanceof Ns),Q(t=>t instanceof xs||t instanceof Ns?0:(t instanceof Oi?t.code===Xn.Redirect||t.code===Xn.SupersededByNewNavigation:!1)?2:1),nn(t=>t!==2),Yr(1)).subscribe(()=>{e()})}var MG={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},PG={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},im=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=D(Dw);stateManager=D(_M);options=D(xE,{optional:!0})||{};pendingTasks=D(ei);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=D(DG);urlSerializer=D(DE);location=D(Au);urlHandlingStrategy=D(kE);_events=new ct;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=D(AG);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=D(PE,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!D(RE,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new bt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Oi&&r.code!==Xn.Redirect&&r.code!==Xn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof xs)this.navigated=!0;else if(r instanceof fc){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=j({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||SG(i.source)},s);this.scheduleNavigation(a,Vu,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}OG(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Vu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=j({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(ME),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=j(j({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let m=i?i.snapshot:this.routerState.snapshot.root;f=nM(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return rM(f,t,d,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Bu(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Vu,null,r)}navigate(t,r={skipLocationChange:!1}){return kG(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=j({},MG):r===!1?i=j({},PG):i=r,Bu(t))return UN(this.currentUrlTree,t,i);let o=this.parseUrl(t);return UN(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((f,m)=>{a=f,c=m});let d=this.pendingTasks.add();return NG(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kG(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new J(4008,!1)}function OG(n){return!(n instanceof zu)&&!(n instanceof fc)}var FG=new $("");function wM(n,...e){return it([{provide:PE,multi:!0,useValue:n},[],{provide:pc,useFactory:LG,deps:[im]},{provide:vp,multi:!0,useFactory:VG},e.map(t=>t.\u0275providers)])}function LG(n){return n.routerState.root}function VG(){let n=D(Ae);return e=>{let t=n.get(bi);if(e!==t.components[0])return;let r=n.get(im),i=n.get(UG);n.get(jG)===1&&r.initialNavigation(),n.get(BG,null,Se.Optional)?.setUpPreloading(),n.get(FG,null,Se.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var UG=new $("",{factory:()=>new ct}),jG=new $("",{providedIn:"root",factory:()=>1});var BG=new $("");var EM=[];var HG="firebase",WG="11.2.0";ie(HG,WG,"app");function Ye(n){n||(Za(Ye),n=D(Ri));let e=new he(t=>n.onDestroy(t.next.bind(t)));return t=>t.pipe(zt(e))}function ae(n,e){!e?.injector&&Za(ae);let t=e?.injector??D(Ae),r=new ru(1),i=kr(()=>{let o;try{o=n()}catch(s){hr(()=>r.error(s));return}hr(()=>r.next(o))},{injector:t,manualCleanup:!0});return t.get(Ri).onDestroy(()=>{i.destroy(),r.complete()}),r.asObservable()}function OE(n){n===void 0&&(Za(OE),n=D(Ae));let e=n.get(ap);return t=>new he(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var ft=new Ci("ANGULARFIRE2_VERSION");function Wt(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ft=(n,e)=>{let t=e?[e]:Nh(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},vc=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(vc||{}),IM=Nw()&&typeof Zone<"u"?vc.WARN:vc.SILENT;var om=class{zone;delegate;constructor(e,t=Sy){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},St=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=D(pe);this.outsideAngular=t.runOutsideAngular(()=>new om(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new om(typeof Zone>"u"?void 0:Zone.current,Pa))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),TM=!1;function qG(n,e){!TM&&(IM>vc.SILENT||Nw())&&(TM=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),IM>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function zG(n){let e=D(pe,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Ms(n){let e=D(pe,{optional:!0});return e?e.run(()=>n()):n()}var GG=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),rn(t,()=>Ms(()=>n.apply(void 0,r)))),We=(n,e,t)=>(t||=e?vc.WARN:vc.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=D(St),s=D(ap),a=D(pn)}catch{return qG(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=Ms(()=>s.add())),i[u]=GG(i[u],r,a));let c=zG(()=>n.apply(this,i));return e?c instanceof he?c.pipe(fo(o.outsideAngular),ho(o.insideAngular),OE(a)):c instanceof Promise?Ms(()=>new Promise((u,d)=>{s.run(()=>c).then(f=>rn(a,()=>Ms(()=>u(f))),f=>rn(a,()=>Ms(()=>d(f))))})):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Ms(()=>c):c instanceof he?c.pipe(fo(o.outsideAngular),ho(o.insideAngular)):Ms(()=>c)});var vt=class{constructor(e){return e}},Pt=class{constructor(){return Nh()}};function KG(n){return n&&n.length===1?n[0]:new vt($t())}var FE=new $("angularfire2._apps"),YG={provide:vt,useFactory:KG,deps:[[new Ie,FE]]},QG={provide:Pt,deps:[[new Ie,FE]]};function JG(n){return(e,t)=>{let r=t.get(Dt);ie("angularfire",ft.full,"core"),ie("angularfire",ft.full,"app"),ie("angular",Kx.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new vt(i)}}function bM(n,...e){return it([YG,QG,{provide:FE,useFactory:JG(n),multi:!0,deps:[pe,Ae,St,...e]}])}var CM=We(mS,!0);var XG=new Map,ZG={activated:!1,tokenObservers:[]},e4={initialized:!1,enabled:!1};function Lr(n){return XG.get(n)||Object.assign({},ZG)}function xM(){return e4}var t4="https://content-firebaseappcheck.googleapis.com/v1";var n4="exchangeDebugToken",DM={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Mle=24*60*60*1e3;var VE=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return y(this,null,function*(){this.stop();try{this.pending=new va,this.pending.promise.catch(t=>{}),yield r4(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new va,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function r4(n){return new Promise(e=>{setTimeout(e,n)})}var i4={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Oo=new rr("appCheck","AppCheck",i4);function NM(n){if(!Lr(n).activated)throw Oo.create("use-before-activation",{appName:n.name})}function MM(r,i){return y(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let v=yield s.getHeartbeatsHeader();v&&(o["X-Firebase-Client"]=v)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(v){throw Oo.create("fetch-network-error",{originalErrorMessage:v?.message})}if(c.status!==200)throw Oo.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(v){throw Oo.create("fetch-parse-error",{originalErrorMessage:v?.message})}let d=u.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Oo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let f=Number(d[1])*1e3,m=Date.now();return{token:u.token,expireTimeMillis:m+f,issuedAtTimeMillis:m}})}function PM(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${t4}/projects/${t}/apps/${r}:${n4}?key=${i}`,body:{debug_token:e}}}var o4="firebase-app-check-database",s4=1,UE="firebase-app-check-store";var sm=null;function a4(){return sm||(sm=new Promise((n,e)=>{try{let t=indexedDB.open(o4,s4);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Oo.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(UE,{keyPath:"compositeKey"})}}}catch(t){e(Oo.create("storage-open",{originalErrorMessage:t?.message}))}}),sm)}function c4(n,e){return l4(u4(n),e)}function l4(n,e){return y(this,null,function*(){let r=(yield a4()).transaction(UE,"readwrite"),o=r.objectStore(UE).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(Oo.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function u4(n){return`${n.options.appId}-${n.name}`}var jE=new ir("@firebase/app-check");function LE(n,e){return Gr()?c4(n,e).catch(t=>{jE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function kM(){return xM().enabled}function OM(){return y(this,null,function*(){let n=xM();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var d4={error:"UNKNOWN_ERROR"};function h4(n){return Sh.encodeString(JSON.stringify(n),!1)}function BE(n,e=!1){return y(this,null,function*(){let t=n.app;NM(t);let r=Lr(t),i=r.token,o;if(i&&!ed(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(ed(c)?i=c:yield LE(t,void 0))}if(!e&&i&&ed(i))return{token:i.token};let s=!1;if(kM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=MM(PM(t,yield OM()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield LE(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Lr(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?jE.warn(c.message):jE.error(c),o=c}let a;return i?o?ed(i)?a={token:i.token,internalError:o}:a=AM(o):(a={token:i.token},r.token=i,yield LE(t,i)):a=AM(o),s&&g4(t,a),a})}function f4(n){return y(this,null,function*(){let e=n.app;NM(e);let{provider:t}=Lr(e);if(kM()){let r=yield OM(),{token:i}=yield MM(PM(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function p4(n,e,t,r){let{app:i}=n,o=Lr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&ed(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),SM(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>SM(n))}function FM(n,e){let t=Lr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function SM(n){let{app:e}=n,t=Lr(e),r=t.tokenRefresher;r||(r=m4(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function m4(n){let{app:e}=n;return new VE(()=>y(this,null,function*(){let t=Lr(e),r;if(t.token?r=yield BE(n,!0):r=yield BE(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Lr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},DM.RETRIAL_MIN_WAIT,DM.RETRIAL_MAX_WAIT)}function g4(n,e){let t=Lr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function ed(n){return n.expireTimeMillis-Date.now()>0}function AM(n){return{token:h4(d4),error:n}}var $E=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Lr(this.app);for(let t of e)FM(this.app,t.next);return Promise.resolve()}};function v4(n,e){return new $E(n,e)}function y4(n){return{getToken:e=>BE(n,e),getLimitedUseToken:()=>f4(n),addTokenListener:e=>p4(n,"INTERNAL",e),removeTokenListener:e=>FM(n.app,e)}}var _4="@firebase/app-check",w4="0.8.11";var E4="app-check",RM="app-check-internal";function I4(){Tt(new It(E4,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return v4(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(RM).initialize()})),Tt(new It(RM,n=>{let e=n.getProvider("app-check").getImmediate();return y4(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ie(_4,w4)}I4();var T4="app-check";var mr=class{constructor(){return Ft(T4)}};var b4=["localhost","0.0.0.0","127.0.0.1"],qle=typeof window<"u"&&b4.includes(window.location.hostname);function JM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var XM=JM,ZM=new rr("auth","Firebase",JM());var hm=new ir("@firebase/auth");function C4(n,...e){hm.logLevel<=en.WARN&&hm.warn(`Auth (${Fn}): ${n}`,...e)}function cm(n,...e){hm.logLevel<=en.ERROR&&hm.error(`Auth (${Fn}): ${n}`,...e)}function Lo(n,...e){throw cI(n,...e)}function ks(n,...e){return cI(n,...e)}function eP(n,e,t){let r=Object.assign(Object.assign({},XM()),{[e]:t});return new rr("auth","Firebase",r).create(e,{appName:n.name})}function Ps(n){return eP(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cI(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return ZM.create(n,...e)}function ge(n,e,...t){if(!n)throw cI(e,...t)}function Li(n){let e="INTERNAL ASSERTION FAILED: "+n;throw cm(e),new Error(e)}function Vo(n,e){n||Li(e)}function zE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function D4(){return LM()==="http:"||LM()==="https:"}function LM(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function S4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(D4()||Wl()||"connection"in navigator)?navigator.onLine:!0}function A4(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Os=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vo(t>e,"Short delay should be less than long delay!"),this.isMobile=Hl()||Ah()}get(){return S4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function lI(n,e){Vo(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var fm=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Li("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Li("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Li("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var R4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var x4=new Os(3e4,6e4);function uI(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function _c(o,s,a,c){return y(this,arguments,function*(n,e,t,r,i={}){return tP(n,i,()=>y(this,null,function*(){let u={},d={};r&&(e==="GET"?d=r:u={body:JSON.stringify(r)});let f=rs(Object.assign({key:n.config.apiKey},d)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let v=Object.assign({method:e,headers:m},u);return sS()||(v.referrerPolicy="no-referrer"),fm.fetch()(nP(n,n.config.apiHost,t,f),v)}))})}function tP(n,e,t){return y(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},R4),e);try{let i=new GE(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw am(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw am(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw am(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw am(n,"user-disabled",s);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw eP(n,d,u);Lo(n,d)}}catch(i){if(i instanceof Gn)throw i;Lo(n,"network-request-failed",{message:String(i)})}})}function N4(o,s,a,c){return y(this,arguments,function*(n,e,t,r,i={}){let u=yield _c(n,e,t,r,i);return"mfaPendingCredential"in u&&Lo(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function nP(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?lI(n.config,i):`${n.config.apiScheme}://${i}`}var GE=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ks(this.auth,"network-request-failed")),x4.get())})}};function am(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ks(n,e,r);return i.customData._tokenResponse=t,i}function M4(n,e){return y(this,null,function*(){return _c(n,"POST","/v1/accounts:delete",e)})}function rP(n,e){return y(this,null,function*(){return _c(n,"POST","/v1/accounts:lookup",e)})}function td(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function dI(n,e=!1){return y(this,null,function*(){let t=Ve(n),r=yield t.getIdToken(e),i=hI(r);ge(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:td(HE(i.auth_time)),issuedAtTime:td(HE(i.iat)),expirationTime:td(HE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function HE(n){return Number(n)*1e3}function hI(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return cm("JWT malformed, contained fewer than 3 sections"),null;try{let i=rS(t);return i?JSON.parse(i):(cm("Failed to decode base64 JWT payload"),null)}catch(i){return cm("Caught error parsing JWT payload as JSON",i?.toString()),null}}function VM(n){let e=hI(n);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function rd(n,e,t=!1){return y(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Gn&&P4(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function P4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var KE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>y(this,null,function*(){yield this.iteration()}),t)}iteration(){return y(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var id=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=td(this.lastLoginAt),this.creationTime=td(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function pm(n){return y(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield rd(n,rP(t,{idToken:r}));ge(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?iP(o.providerUserInfo):[],a=k4(n.providerData,s),c=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!a?.length,d=c?u:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new id(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(n,f)})}function fI(n){return y(this,null,function*(){let e=Ve(n);yield pm(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function k4(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function iP(n){return n.map(e=>{var{providerId:t}=e,r=Ay(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function O4(n,e){return y(this,null,function*(){let t=yield tP(n,{},()=>y(this,null,function*(){let r=rs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=nP(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",fm.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function F4(n,e){return y(this,null,function*(){return _c(n,"POST","/v2/accounts:revokeToken",uI(n,e))})}var nd=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):VM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ge(e.length!==0,"internal-error");let t=VM(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return y(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return y(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield O4(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(ge(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ge(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ge(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Li("not implemented")}};function Fo(n,e){ge(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var yc=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Ay(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new id(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return y(this,null,function*(){let t=yield rd(this,this.stsTokenManager.getToken(this.auth,e));return ge(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return dI(this,e)}reload(){return fI(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return y(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield pm(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return y(this,null,function*(){if(yi(this.auth.app))return Promise.reject(Ps(this.auth));let e=yield this.getIdToken();return yield rd(this,M4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,u,d;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,v=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,w=(s=t.photoURL)!==null&&s!==void 0?s:void 0,R=(a=t.tenantId)!==null&&a!==void 0?a:void 0,S=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,F=(u=t.createdAt)!==null&&u!==void 0?u:void 0,W=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:q,emailVerified:te,isAnonymous:Xe,providerData:ue,stsTokenManager:A}=t;ge(q&&A,e,"internal-error");let _=nd.fromJSON(this.name,A);ge(typeof q=="string",e,"internal-error"),Fo(f,e.name),Fo(m,e.name),ge(typeof te=="boolean",e,"internal-error"),ge(typeof Xe=="boolean",e,"internal-error"),Fo(v,e.name),Fo(w,e.name),Fo(R,e.name),Fo(S,e.name),Fo(F,e.name),Fo(W,e.name);let E=new n({uid:q,auth:e,email:m,emailVerified:te,displayName:f,isAnonymous:Xe,photoURL:w,phoneNumber:v,tenantId:R,stsTokenManager:_,createdAt:F,lastLoginAt:W});return ue&&Array.isArray(ue)&&(E.providerData=ue.map(C=>Object.assign({},C))),S&&(E._redirectEventId=S),E}static _fromIdTokenResponse(e,t,r=!1){return y(this,null,function*(){let i=new nd;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield pm(o),o})}static _fromGetAccountInfoResponse(e,t,r){return y(this,null,function*(){let i=t.users[0];ge(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?iP(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new nd;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new id(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c})}};var UM=new Map;function Vi(n){Vo(n instanceof Function,"Expected a class definition");let e=UM.get(n);return e?(Vo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,UM.set(n,e),e)}var L4=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return y(this,null,function*(){return!0})}_set(t,r){return y(this,null,function*(){this.storage[t]=r})}_get(t){return y(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return y(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),YE=L4;function lm(n,e,t){return`firebase:${n}:${e}:${t}`}var mm=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=lm(this.userKey,i.apiKey,o),this.fullPersistenceKey=lm("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return y(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?yc._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return y(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return y(this,null,function*(){if(!t.length)return new n(Vi(YE),e,r);let i=(yield Promise.all(t.map(u=>y(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||Vi(YE),s=lm(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let d=yield u._get(s);if(d){let f=yc._fromJSON(e,d);u!==o&&(a=f),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(u=>y(this,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new n(o,e,r))})}};function jM(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(oP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uP(e))return"Blackberry";if(dP(e))return"Webos";if(sP(e))return"Safari";if((e.includes("chrome/")||aP(e))&&!e.includes("edge/"))return"Chrome";if(lP(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function oP(n=dn()){return/firefox\//i.test(n)}function sP(n=dn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aP(n=dn()){return/crios\//i.test(n)}function cP(n=dn()){return/iemobile/i.test(n)}function lP(n=dn()){return/android/i.test(n)}function uP(n=dn()){return/blackberry/i.test(n)}function dP(n=dn()){return/webos/i.test(n)}function pI(n=dn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function V4(n=dn()){var e;return pI(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function U4(){return aS()&&document.documentMode===10}function hP(n=dn()){return pI(n)||lP(n)||dP(n)||uP(n)||/windows phone/i.test(n)||cP(n)}function fP(n,e=[]){let t;switch(n){case"Browser":t=jM(dn());break;case"Worker":t=`${jM(dn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Fn}/${r}`}var QE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return y(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function j4(t){return y(this,arguments,function*(n,e={}){return _c(n,"GET","/v2/passwordPolicy",uI(n,e))})}var B4=6,JE=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:B4,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var XE=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gm(this),this.idTokenSubscription=new gm(this),this.beforeStateQueue=new QE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vi(t)),this._initializationPromise=this.queue(()=>y(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield mm.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return y(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return y(this,null,function*(){try{let t=yield rP(this,{idToken:e}),r=yield yc._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return y(this,null,function*(){var t;if(yi(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return y(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return y(this,null,function*(){try{yield pm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=A4()}_delete(){return y(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return y(this,null,function*(){if(yi(this.app))return Promise.reject(Ps(this));let t=e?Ve(e):null;return t&&ge(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return y(this,null,function*(){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>y(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return y(this,null,function*(){return yi(this.app)?Promise.reject(Ps(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return yi(this.app)?Promise.reject(Ps(this)):this.queue(()=>y(this,null,function*(){yield this.assertedPersistence.setPersistence(Vi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return y(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return y(this,null,function*(){let e=yield j4(this),t=new JE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new rr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return y(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield F4(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return y(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return y(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Vi(e)||this._popupRedirectResolver;ge(t,this,"argument-error"),this.redirectPersistenceManager=yield mm.create(this,[Vi(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return y(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>y(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return y(this,null,function*(){if(e===this.currentUser)return this.queue(()=>y(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return y(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return y(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return y(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&C4(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function mI(n){return Ve(n)}var gm=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=hS(t=>this.observer=t)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var gI={loadJS(){return y(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $4(n){gI=n}function H4(n){return gI.loadJS(n)}function W4(){return gI.gapiScript}function pP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function vI(n,e){let t=Bt(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Kl(o,e??{}))return i;Lo(i,"already-initialized")}return t.initialize({options:e})}function q4(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Vi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function yI(n,e,t){let r=mI(n);ge(r._canInitEmulator,r,"emulator-config-failed"),ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=mP(e),{host:s,port:a}=z4(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||G4()}function mP(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function z4(n){let e=mP(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:BM(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:BM(s)}}}function BM(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function G4(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var vm=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Li("not implemented")}_getIdTokenResponse(e){return Li("not implemented")}_linkToIdToken(e,t){return Li("not implemented")}_getReauthenticationResolver(e){return Li("not implemented")}};function WE(n,e){return y(this,null,function*(){return N4(n,"POST","/v1/accounts:signInWithIdp",uI(n,e))})}var ym=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var ZE=class extends ym{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var od=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return y(this,null,function*(){let o=yield yc._fromIdTokenResponse(e,r,i),s=$M(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return y(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=$M(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function $M(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var eI=class n extends Gn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function gP(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?eI._fromErrorAndOperation(n,o,e,r):o})}function K4(n,e,t=!1){return y(this,null,function*(){let r=yield rd(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return od._forOperation(n,"link",r)})}function Y4(n,e,t=!1){return y(this,null,function*(){let{auth:r}=n;if(yi(r.app))return Promise.reject(Ps(r));let i="reauthenticate";try{let o=yield rd(n,gP(r,i,e,n),t);ge(o.idToken,r,"internal-error");let s=hI(o.idToken);ge(s,r,"internal-error");let{sub:a}=s;return ge(n.uid===a,r,"user-mismatch"),od._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Lo(r,"user-mismatch"),o}})}function Q4(n,e,t=!1){return y(this,null,function*(){if(yi(n.app))return Promise.reject(Ps(n));let r="signIn",i=yield gP(n,r,e),o=yield od._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function Tm(n,e,t,r){return Ve(n).onIdTokenChanged(e,t,r)}function _I(n,e,t){return Ve(n).beforeAuthStateChanged(e,t)}function bm(n,e,t,r){return Ve(n).onAuthStateChanged(e,t,r)}var _m="__sak";var wm=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_m,"1"),this.storage.removeItem(_m),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var J4=1e3,X4=10,Z4=(()=>{class n extends wm{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hP(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);U4()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,X4):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},J4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return y(this,null,function*(){yield co(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return y(this,null,function*(){let r=yield co(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return y(this,null,function*(){yield co(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),vP=Z4;var e3=(()=>{class n extends wm{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),wI=e3;function t3(n){return Promise.all(n.map(e=>y(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var n3=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return y(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(d=>y(this,null,function*(){return d(r.origin,s)})),u=yield t3(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function yP(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var tI=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return y(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let u=yP("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(f){let m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function oi(){return window}function r3(n){oi().location.href=n}function _P(){return typeof oi().WorkerGlobalScope<"u"&&typeof oi().importScripts=="function"}function i3(){return y(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function o3(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function s3(){return _P()?self:null}var wP="firebaseLocalStorageDb",a3=1,Em="firebaseLocalStorage",EP="fbase_key",Fs=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Cm(n,e){return n.transaction([Em],e?"readwrite":"readonly").objectStore(Em)}function c3(){let n=indexedDB.deleteDatabase(wP);return new Fs(n).toPromise()}function nI(){let n=indexedDB.open(wP,a3);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Em,{keyPath:EP})}catch(i){t(i)}}),n.addEventListener("success",()=>y(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Em)?e(r):(r.close(),yield c3(),e(yield nI()))}))})}function HM(n,e,t){return y(this,null,function*(){let r=Cm(n,!0).put({[EP]:e,value:t});return new Fs(r).toPromise()})}function l3(n,e){return y(this,null,function*(){let t=Cm(n,!1).get(e),r=yield new Fs(t).toPromise();return r===void 0?null:r.value})}function WM(n,e){let t=Cm(n,!0).delete(e);return new Fs(t).toPromise()}var u3=800,d3=3,h3=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return y(this,null,function*(){return this.db?this.db:(this.db=yield nI(),this.db)})}_withRetries(t){return y(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>d3)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return y(this,null,function*(){return _P()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return y(this,null,function*(){this.receiver=n3._getInstance(s3()),this.receiver._subscribe("keyChanged",(t,r)=>y(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>y(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return y(this,null,function*(){var t,r;if(this.activeServiceWorker=yield i3(),!this.activeServiceWorker)return;this.sender=new tI(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return y(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||o3()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return y(this,null,function*(){try{if(!indexedDB)return!1;let t=yield nI();return yield HM(t,_m,"1"),yield WM(t,_m),!0}catch{}return!1})}_withPendingWrite(t){return y(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(i=>HM(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return y(this,null,function*(){let r=yield this._withRetries(i=>l3(i,t));return this.localCache[t]=r,r})}_remove(t){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(r=>WM(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return y(this,null,function*(){let t=yield this._withRetries(o=>{let s=Cm(o,!1).getAll();return new Fs(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>y(this,null,function*(){return this._poll()}),u3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),IP=h3;var tue=pP("rcb"),nue=new Os(3e4,6e4);function f3(n,e){return e?Vi(e):(ge(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var sd=class extends vm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return WE(e,this._buildIdpRequest())}_linkToIdToken(e,t){return WE(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return WE(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function p3(n){return Q4(n.auth,new sd(n),n.bypassAuthState)}function m3(n){let{auth:e,user:t}=n;return ge(t,e,"internal-error"),Y4(t,new sd(n),n.bypassAuthState)}function g3(n){return y(this,null,function*(){let{auth:e,user:t}=n;return ge(t,e,"internal-error"),K4(t,new sd(n),n.bypassAuthState)})}var rI=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>y(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return y(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return p3;case"linkViaPopup":case"linkViaRedirect":return g3;case"reauthViaPopup":case"reauthViaRedirect":return m3;default:Lo(this.auth,"internal-error")}}resolve(e){Vo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var rue=new Os(2e3,1e4);var v3="pendingRedirect",um=new Map,iI=class n extends rI{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return y(this,null,function*(){let e=um.get(this.auth._key());if(!e){try{let r=(yield y3(this.resolver,this.auth))?yield co(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}um.set(this.auth._key(),e)}return this.bypassAuthState||um.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return y(this,null,function*(){if(e.type==="signInViaRedirect")return co(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,co(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return y(this,null,function*(){})}cleanUp(){}};function y3(n,e){return y(this,null,function*(){let t=E3(e),r=w3(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function _3(n,e){um.set(n._key(),e)}function w3(n){return Vi(n._redirectPersistence)}function E3(n){return lm(v3,n.config.apiKey,n.name)}function I3(n,e,t=!1){return y(this,null,function*(){if(yi(n.app))return Promise.reject(Ps(n));let r=mI(n),i=f3(r,e),s=yield new iI(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var T3=10*60*1e3,oI=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!b3(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!TP(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ks(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=T3&&this.cachedEventUids.clear(),this.cachedEventUids.has(qM(e))}saveEventToCache(e){this.cachedEventUids.add(qM(e)),this.lastProcessedEventTime=Date.now()}};function qM(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function TP({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function b3(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TP(n);default:return!1}}function C3(t){return y(this,arguments,function*(n,e={}){return _c(n,"GET","/v1/projects",e)})}var D3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,S3=/^https?/;function A3(n){return y(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield C3(n);for(let t of e)try{if(R3(t))return}catch{}Lo(n,"unauthorized-domain")})}function R3(n){let e=zE(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!S3.test(t))return!1;if(D3.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var x3=new Os(3e4,6e4);function zM(){let n=oi().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function N3(n){return new Promise((e,t)=>{var r,i,o;function s(){zM(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zM(),t(ks(n,"network-request-failed"))},timeout:x3.get()})}if(!((i=(r=oi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=oi().gapi)===null||o===void 0)&&o.load)s();else{let a=pP("iframefcb");return oi()[a]=()=>{gapi.load?s():t(ks(n,"network-request-failed"))},H4(`${W4()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw dm=null,e})}var dm=null;function M3(n){return dm=dm||N3(n),dm}var P3=new Os(5e3,15e3),k3="__/auth/iframe",O3="emulator/auth/iframe",F3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},L3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function V3(n){let e=n.config;ge(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?lI(e,O3):`https://${n.config.authDomain}/${k3}`,r={apiKey:e.apiKey,appName:n.name,v:Fn},i=L3.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${rs(r).slice(1)}`}function U3(n){return y(this,null,function*(){let e=yield M3(n),t=oi().gapi;return ge(t,n,"internal-error"),e.open({where:document.body,url:V3(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:F3,dontclear:!0},r=>new Promise((i,o)=>y(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=ks(n,"network-request-failed"),a=oi().setTimeout(()=>{o(s)},P3.get());function c(){oi().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var j3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},B3=500,$3=600,H3="_blank",W3="http://localhost",Im=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function q3(n,e,t,r=B3,i=$3){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},j3),{width:r.toString(),height:i.toString(),top:o,left:s}),u=dn().toLowerCase();t&&(a=aP(u)?H3:t),oP(u)&&(e=e||W3,c.scrollbars="yes");let d=Object.entries(c).reduce((m,[v,w])=>`${m}${v}=${w},`,"");if(V4(u)&&a!=="_self")return z3(e||"",a),new Im(null);let f=window.open(e||"",a,d);ge(f,n,"popup-blocked");try{f.focus()}catch{}return new Im(f)}function z3(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var G3="__/auth/handler",K3="emulator/auth/handler",Y3=encodeURIComponent("fac");function GM(n,e,t,r,i,o){return y(this,null,function*(){ge(n.config.authDomain,n,"auth-domain-config-required"),ge(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Fn,eventId:i};if(e instanceof ym){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",zl(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(o||{}))s[d]=f}if(e instanceof ZE){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(s.scopes=d.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield n._getAppCheckToken(),u=c?`#${Y3}=${encodeURIComponent(c)}`:"";return`${Q3(n)}?${rs(a).slice(1)}${u}`})}function Q3({config:n}){return n.emulator?lI(n,K3):`https://${n.authDomain}/${G3}`}var qE="webStorageSupport",sI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wI,this._completeRedirectFn=I3,this._overrideRedirectResult=_3}_openPopup(e,t,r,i){return y(this,null,function*(){var o;Vo((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield GM(e,t,r,zE(),i);return q3(e,s,yP())})}_openRedirect(e,t,r,i){return y(this,null,function*(){yield this._originValidation(e);let o=yield GM(e,t,r,zE(),i);return r3(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Vo(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return y(this,null,function*(){let t=yield U3(e),r=new oI(e);return t.register("authEvent",i=>(ge(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qE,{type:qE},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[qE];s!==void 0&&t(!!s),Lo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=A3(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return hP()||sP()||pI()}},bP=sI;var KM="@firebase/auth",YM="1.8.2";var aI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return y(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function J3(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function X3(n){Tt(new It("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ge(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fP(n)},u=new XE(r,i,o,c);return q4(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Tt(new It("auth-internal",e=>{let t=mI(e.getProvider("auth").getImmediate());return(r=>new aI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ie(KM,YM,J3(n)),ie(KM,YM,"esm2017")}var Z3=5*60,e5=ly("authIdTokenMaxAge")||Z3,QM=null,t5=n=>e=>y(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>e5)return;let i=t?.token;QM!==i&&(QM=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function EI(n=$t()){let e=Bt(n,"auth");if(e.isInitialized())return e.getImmediate();let t=vI(n,{popupRedirectResolver:bP,persistence:[IP,vP,wI]}),r=ly("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=t5(o.toString());_I(t,s,()=>s(t.currentUser)),Tm(t,a=>s(a))}}let i=oS("auth");return i&&yI(t,`http://${i}`),t}function n5(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}$4({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=ks("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",n5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});X3("Browser");function DP(n){return new he(function(e){var t=bm(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var SP="auth",Ls=class{constructor(e){return e}},Vr=class{constructor(){return Ft(SP)}};var II=new $("angularfire2.auth-instances");function G5(n,e){let t=Wt(SP,n,e);return t&&new Ls(t)}function K5(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ls(r)}}var Y5={provide:Vr,deps:[[new Ie,II]]},Q5={provide:Ls,useFactory:G5,deps:[[new Ie,II],vt]};function AP(n,...e){return ie("angularfire",ft.full,"auth"),it([Q5,Y5,{provide:II,useFactory:K5(n),multi:!0,deps:[pe,Ae,St,Pt,[new Ie,mr],...e]}])}var RP=We(DP,!0);var xP=We(EI,!0);var Dm="analytics",X5="firebase_id",Z5="origin",e6=60*1e3,t6="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",RI="https://www.googletagmanager.com/gtag/js";var Pn=new ir("@firebase/analytics");var n6={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Zn=new rr("analytics","Analytics",n6);function r6(n){if(!n.startsWith(RI)){let e=Zn.create("invalid-gtag-resource",{gtagURL:n});return Pn.warn(e.message),""}return n}function LP(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function i6(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function o6(n,e){let t=i6("firebase-js-sdk-policy",{createScriptURL:r6}),r=document.createElement("script"),i=`${RI}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function s6(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function a6(n,e,t,r,i,o){return y(this,null,function*(){let s=r[i];try{if(s)yield e[s];else{let c=(yield LP(t)).find(u=>u.measurementId===i);c&&(yield e[c.appId])}}catch(a){Pn.error(a)}n("config",i,o)})}function c6(n,e,t,r,i){return y(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield LP(t);for(let c of s){let u=a.find(f=>f.measurementId===c),d=u&&e[u.appId];if(d)o.push(d);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),n("event",r,i||{})}catch(o){Pn.error(o)}})}function l6(n,e,t,r){function i(o,...s){return y(this,null,function*(){try{if(o==="event"){let[a,c]=s;yield c6(n,e,t,a,c)}else if(o==="config"){let[a,c]=s;yield a6(n,e,t,r,a,c)}else if(o==="consent"){let[a,c]=s;n("consent",a,c)}else if(o==="get"){let[a,c,u]=s;n("get",a,c,u)}else if(o==="set"){let[a]=s;n("set",a)}else n(o,...s)}catch(a){Pn.error(a)}})}return i}function u6(n,e,t,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=l6(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}function d6(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(RI)&&t.src.includes(n))return t;return null}var h6=30,f6=1e3,bI=class{constructor(e={},t=f6){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},VP=new bI;function p6(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function m6(n){return y(this,null,function*(){var e;let{appId:t,apiKey:r}=n,i={method:"GET",headers:p6(r)},o=t6.replace("{app-id}",t),s=yield fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{let c=yield s.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw Zn.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})}function g6(r){return y(this,arguments,function*(n,e=VP,t){let{appId:i,apiKey:o,measurementId:s}=n.options;if(!i)throw Zn.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw Zn.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new CI;return setTimeout(()=>y(this,null,function*(){c.abort()}),t!==void 0?t:e6),UP({appId:i,apiKey:o,measurementId:s},a,c,e)})}function UP(o,s,a){return y(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=VP){var c;let{appId:u,measurementId:d}=n;try{yield v6(r,e)}catch(f){if(d)return Pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:u,measurementId:d};throw f}try{let f=yield m6(n);return i.deleteThrottleMetadata(u),f}catch(f){let m=f;if(!y6(m)){if(i.deleteThrottleMetadata(u),d)return Pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:u,measurementId:d};throw f}let v=Number((c=m?.customData)===null||c===void 0?void 0:c.httpStatus)===503?wa(t,i.intervalMillis,h6):wa(t,i.intervalMillis),w={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return i.setThrottleMetadata(u,w),Pn.debug(`Calling attemptFetch again in ${v} millis`),UP(n,w,r,i)}})}function v6(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(Zn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function y6(n){if(!(n instanceof Gn)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var CI=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var DI;function _6(n,e,t,r,i){return y(this,null,function*(){if(i&&i.global){n("event",t,r);return}else{let o=yield e,s=Object.assign(Object.assign({},r),{send_to:o});n("event",t,s)}})}function w6(n,e,t,r){return y(this,null,function*(){if(r&&r.global)return n("set",{user_id:t}),Promise.resolve();{let i=yield e;n("config",i,{update:!0,user_id:t})}})}var SI;function E6(n){SI=n}function I6(n){DI=n}function T6(){return y(this,null,function*(){if(Gr())try{yield _a()}catch(n){return Pn.warn(Zn.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Pn.warn(Zn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function b6(n,e,t,r,i,o,s){return y(this,null,function*(){var a;let c=g6(n);c.then(v=>{t[v.measurementId]=v.appId,n.options.measurementId&&v.measurementId!==n.options.measurementId&&Pn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>Pn.error(v)),e.push(c);let u=T6().then(v=>{if(v)return r.getId()}),[d,f]=yield Promise.all([c,u]);d6(o)||o6(o,d.measurementId),SI&&(i("consent","default",SI),E6(void 0)),i("js",new Date);let m=(a=s?.config)!==null&&a!==void 0?a:{};return m[Z5]="firebase",m.update=!0,f!=null&&(m[X5]=f),i("config",d.measurementId,m),DI&&(i("set",DI),I6(void 0)),d.measurementId})}var AI=class{constructor(e){this.app=e}_delete(){return delete wc[this.app.options.appId],Promise.resolve()}},wc={},NP=[],MP={},TI="dataLayer",C6="gtag",PP,xI,kP=!1;function D6(){let n=[];if(Wl()&&n.push("This is a browser extension environment."),ql()||n.push("Cookies are not available."),n.length>0){let e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Zn.create("invalid-analytics-context",{errorInfo:e});Pn.warn(t.message)}}function S6(n,e,t){D6();let r=n.options.appId;if(!r)throw Zn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Zn.create("no-api-key");if(wc[r]!=null)throw Zn.create("already-exists",{id:r});if(!kP){s6(TI);let{wrappedGtag:o,gtagCore:s}=u6(wc,NP,MP,TI,C6);xI=o,PP=s,kP=!0}return wc[r]=b6(n,NP,MP,e,PP,TI,t),new AI(n)}function jP(n=$t()){n=Ve(n);let e=Bt(n,Dm);return e.isInitialized()?e.getImmediate():BP(n)}function BP(n,e={}){let t=Bt(n,Dm);if(t.isInitialized()){let i=t.getImmediate();if(Kl(e,t.getOptions()))return i;throw Zn.create("already-initialized")}return t.initialize({options:e})}function $P(){return y(this,null,function*(){if(Wl()||!ql()||!Gr())return!1;try{return yield _a()}catch{return!1}})}function HP(n,e,t){n=Ve(n),w6(xI,wc[n.app.options.appId],e,t).catch(r=>Pn.error(r))}function NI(n,e,t,r){n=Ve(n),_6(xI,wc[n.app.options.appId],e,t,r).catch(i=>Pn.error(i))}var OP="@firebase/analytics",FP="0.10.11";function A6(){Tt(new It(Dm,(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return S6(r,i,t)},"PUBLIC")),Tt(new It("analytics-internal",n,"PRIVATE")),ie(OP,FP),ie(OP,FP,"esm2017");function n(e){try{let t=e.getProvider(Dm).getImmediate();return{logEvent:(r,i,o)=>NI(t,r,i,o)}}catch(t){throw Zn.create("interop-component-reg-failed",{reason:t})}}}A6();var Vs=class{constructor(e){return e}},zP="analytics",PI=class{constructor(){return Ft(zP)}};var GP=We(jP,!0);var KP=We($P,!1),R6=We(NI,!1,2);var x6=We(HP,!0,2);var OI=(()=>{class n{initialized;disposables=[];constructor(t,r,i){ie("angularfire",ft.full,"user-tracking");let o;this.initialized=r.runOutsideAngular(()=>new Promise(s=>{o=s})),KP().then(()=>{let s=i.get(Vs);s?this.disposables=[RP(t).subscribe(a=>{x6(s,a?.uid),o()})]:o()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}static \u0275fac=function(r){return new(r||n)(re(Ls),re(pe),re(Ae))};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})(),N6="firebase_event_origin",M6="firebase_previous_class",P6="firebase_previous_id",k6="firebase_previous_screen",O6="firebase_screen_class",WP="firebase_screen_id",F6="firebase_screen",kI="outlet",L6="page_path",V6="page_title",ad="screen_class",qP="screen_name",U6="screen_view",j6="auto",B6="#",$6=Math.floor(Math.random()*(2**32-1))-2**31,MI={},H6=n=>{let e=[n[ad],n[kI]].join(B6);if(MI.hasOwnProperty(e))return MI[e];{let t=$6++;return MI[e]=t,t}},W6=(n,e,t)=>n.events.pipe(nn(i=>i instanceof qu)).pipe(hn(i=>{let s=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,m=>m.replace("://",":///"))).root.children[i.snapshot.outlet]?.toString()||"",a=n.routerState.root.children.map(m=>m).find(m=>m.outlet===i.snapshot.outlet);if(!a)return se(null);let c=a;for(;c.firstChild;)c=c.firstChild;let u=c.pathFromRoot.map(m=>m.routeConfig?.path).filter(m=>m).join("/")||"/",d={[qP]:u,[L6]:`/${s}`,[N6]:j6,[F6]:u,[kI]:i.snapshot.outlet};e&&(d[V6]=e.getTitle());let f=a.component;if(f){if(f===NE){let m=i.snapshot;for(;m.firstChild;)m=m.firstChild;f=m.component}}else f=i.snapshot.component;if(typeof f=="string")return se(me(j({},d),{[ad]:f}));if(f){let m=t.resolveComponentFactory(f);return se(me(j({},d),{[ad]:m.selector}))}return se(null)}),nn(i=>!!i),Q(i=>j({[O6]:i[ad],[WP]:H6(i)},i)),Py(i=>i[kI]),Nt(i=>i.pipe(lf((o,s)=>JSON.stringify(o)===JSON.stringify(s)),La(void 0),df(),Q(([o,s])=>o?j({[M6]:o[ad],[k6]:o[qP],[P6]:o[WP]},s):s)))),YP=(()=>{class n{disposable;constructor(t,r,i,o,s,a){ie("angularfire",ft.full,"screen-tracking"),KP().then(()=>{let c=a.get(Vs);!t||!c||o.runOutsideAngular(()=>{this.disposable=W6(t,r,i).pipe(hn(u=>y(this,null,function*(){return s&&(yield s.initialized),R6(c,U6,u)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(r){return new(r||n)(re(im,8),re(Bp,8),re(bo),re(pe),re(OI,8),re(Ae))};static \u0275prov=U({token:n,factory:n.\u0275fac})}return n})(),FI=new $("angularfire2.analytics-instances");function q6(n,e,t){if(!oc(t))return null;let r=Wt(zP,n,e);return r&&new Vs(r)}function z6(n){return(e,t,r)=>{if(!oc(r))return null;let i=e.runOutsideAngular(()=>n(t));return new Vs(i)}}var G6={provide:PI,deps:[[new Ie,FI]]},K6={provide:Vs,useFactory:q6,deps:[[new Ie,FI],vt,Dt]};function QP(n,...e){return ie("angularfire",ft.full,"analytics"),it([K6,G6,{provide:FI,useFactory:z6(n),multi:!0,deps:[pe,Ae,Dt,St,Pt,...e]}])}var JP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},XP={};var Ui,LI;(function(){var n;function e(A,_){function E(){}E.prototype=_.prototype,A.D=_.prototype,A.prototype=new E,A.prototype.constructor=A,A.C=function(C,x,P){for(var T=Array(arguments.length-2),mi=2;mi<arguments.length;mi++)T[mi-2]=arguments[mi];return _.prototype[x].apply(C,T)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,_,E){E||(E=0);var C=Array(16);if(typeof _=="string")for(var x=0;16>x;++x)C[x]=_.charCodeAt(E++)|_.charCodeAt(E++)<<8|_.charCodeAt(E++)<<16|_.charCodeAt(E++)<<24;else for(x=0;16>x;++x)C[x]=_[E++]|_[E++]<<8|_[E++]<<16|_[E++]<<24;_=A.g[0],E=A.g[1],x=A.g[2];var P=A.g[3],T=_+(P^E&(x^P))+C[0]+3614090360&4294967295;_=E+(T<<7&4294967295|T>>>25),T=P+(x^_&(E^x))+C[1]+3905402710&4294967295,P=_+(T<<12&4294967295|T>>>20),T=x+(E^P&(_^E))+C[2]+606105819&4294967295,x=P+(T<<17&4294967295|T>>>15),T=E+(_^x&(P^_))+C[3]+3250441966&4294967295,E=x+(T<<22&4294967295|T>>>10),T=_+(P^E&(x^P))+C[4]+4118548399&4294967295,_=E+(T<<7&4294967295|T>>>25),T=P+(x^_&(E^x))+C[5]+1200080426&4294967295,P=_+(T<<12&4294967295|T>>>20),T=x+(E^P&(_^E))+C[6]+2821735955&4294967295,x=P+(T<<17&4294967295|T>>>15),T=E+(_^x&(P^_))+C[7]+4249261313&4294967295,E=x+(T<<22&4294967295|T>>>10),T=_+(P^E&(x^P))+C[8]+1770035416&4294967295,_=E+(T<<7&4294967295|T>>>25),T=P+(x^_&(E^x))+C[9]+2336552879&4294967295,P=_+(T<<12&4294967295|T>>>20),T=x+(E^P&(_^E))+C[10]+4294925233&4294967295,x=P+(T<<17&4294967295|T>>>15),T=E+(_^x&(P^_))+C[11]+2304563134&4294967295,E=x+(T<<22&4294967295|T>>>10),T=_+(P^E&(x^P))+C[12]+1804603682&4294967295,_=E+(T<<7&4294967295|T>>>25),T=P+(x^_&(E^x))+C[13]+4254626195&4294967295,P=_+(T<<12&4294967295|T>>>20),T=x+(E^P&(_^E))+C[14]+2792965006&4294967295,x=P+(T<<17&4294967295|T>>>15),T=E+(_^x&(P^_))+C[15]+1236535329&4294967295,E=x+(T<<22&4294967295|T>>>10),T=_+(x^P&(E^x))+C[1]+4129170786&4294967295,_=E+(T<<5&4294967295|T>>>27),T=P+(E^x&(_^E))+C[6]+3225465664&4294967295,P=_+(T<<9&4294967295|T>>>23),T=x+(_^E&(P^_))+C[11]+643717713&4294967295,x=P+(T<<14&4294967295|T>>>18),T=E+(P^_&(x^P))+C[0]+3921069994&4294967295,E=x+(T<<20&4294967295|T>>>12),T=_+(x^P&(E^x))+C[5]+3593408605&4294967295,_=E+(T<<5&4294967295|T>>>27),T=P+(E^x&(_^E))+C[10]+38016083&4294967295,P=_+(T<<9&4294967295|T>>>23),T=x+(_^E&(P^_))+C[15]+3634488961&4294967295,x=P+(T<<14&4294967295|T>>>18),T=E+(P^_&(x^P))+C[4]+3889429448&4294967295,E=x+(T<<20&4294967295|T>>>12),T=_+(x^P&(E^x))+C[9]+568446438&4294967295,_=E+(T<<5&4294967295|T>>>27),T=P+(E^x&(_^E))+C[14]+3275163606&4294967295,P=_+(T<<9&4294967295|T>>>23),T=x+(_^E&(P^_))+C[3]+4107603335&4294967295,x=P+(T<<14&4294967295|T>>>18),T=E+(P^_&(x^P))+C[8]+1163531501&4294967295,E=x+(T<<20&4294967295|T>>>12),T=_+(x^P&(E^x))+C[13]+2850285829&4294967295,_=E+(T<<5&4294967295|T>>>27),T=P+(E^x&(_^E))+C[2]+4243563512&4294967295,P=_+(T<<9&4294967295|T>>>23),T=x+(_^E&(P^_))+C[7]+1735328473&4294967295,x=P+(T<<14&4294967295|T>>>18),T=E+(P^_&(x^P))+C[12]+2368359562&4294967295,E=x+(T<<20&4294967295|T>>>12),T=_+(E^x^P)+C[5]+4294588738&4294967295,_=E+(T<<4&4294967295|T>>>28),T=P+(_^E^x)+C[8]+2272392833&4294967295,P=_+(T<<11&4294967295|T>>>21),T=x+(P^_^E)+C[11]+1839030562&4294967295,x=P+(T<<16&4294967295|T>>>16),T=E+(x^P^_)+C[14]+4259657740&4294967295,E=x+(T<<23&4294967295|T>>>9),T=_+(E^x^P)+C[1]+2763975236&4294967295,_=E+(T<<4&4294967295|T>>>28),T=P+(_^E^x)+C[4]+1272893353&4294967295,P=_+(T<<11&4294967295|T>>>21),T=x+(P^_^E)+C[7]+4139469664&4294967295,x=P+(T<<16&4294967295|T>>>16),T=E+(x^P^_)+C[10]+3200236656&4294967295,E=x+(T<<23&4294967295|T>>>9),T=_+(E^x^P)+C[13]+681279174&4294967295,_=E+(T<<4&4294967295|T>>>28),T=P+(_^E^x)+C[0]+3936430074&4294967295,P=_+(T<<11&4294967295|T>>>21),T=x+(P^_^E)+C[3]+3572445317&4294967295,x=P+(T<<16&4294967295|T>>>16),T=E+(x^P^_)+C[6]+76029189&4294967295,E=x+(T<<23&4294967295|T>>>9),T=_+(E^x^P)+C[9]+3654602809&4294967295,_=E+(T<<4&4294967295|T>>>28),T=P+(_^E^x)+C[12]+3873151461&4294967295,P=_+(T<<11&4294967295|T>>>21),T=x+(P^_^E)+C[15]+530742520&4294967295,x=P+(T<<16&4294967295|T>>>16),T=E+(x^P^_)+C[2]+3299628645&4294967295,E=x+(T<<23&4294967295|T>>>9),T=_+(x^(E|~P))+C[0]+4096336452&4294967295,_=E+(T<<6&4294967295|T>>>26),T=P+(E^(_|~x))+C[7]+1126891415&4294967295,P=_+(T<<10&4294967295|T>>>22),T=x+(_^(P|~E))+C[14]+2878612391&4294967295,x=P+(T<<15&4294967295|T>>>17),T=E+(P^(x|~_))+C[5]+4237533241&4294967295,E=x+(T<<21&4294967295|T>>>11),T=_+(x^(E|~P))+C[12]+1700485571&4294967295,_=E+(T<<6&4294967295|T>>>26),T=P+(E^(_|~x))+C[3]+2399980690&4294967295,P=_+(T<<10&4294967295|T>>>22),T=x+(_^(P|~E))+C[10]+4293915773&4294967295,x=P+(T<<15&4294967295|T>>>17),T=E+(P^(x|~_))+C[1]+2240044497&4294967295,E=x+(T<<21&4294967295|T>>>11),T=_+(x^(E|~P))+C[8]+1873313359&4294967295,_=E+(T<<6&4294967295|T>>>26),T=P+(E^(_|~x))+C[15]+4264355552&4294967295,P=_+(T<<10&4294967295|T>>>22),T=x+(_^(P|~E))+C[6]+2734768916&4294967295,x=P+(T<<15&4294967295|T>>>17),T=E+(P^(x|~_))+C[13]+1309151649&4294967295,E=x+(T<<21&4294967295|T>>>11),T=_+(x^(E|~P))+C[4]+4149444226&4294967295,_=E+(T<<6&4294967295|T>>>26),T=P+(E^(_|~x))+C[11]+3174756917&4294967295,P=_+(T<<10&4294967295|T>>>22),T=x+(_^(P|~E))+C[2]+718787259&4294967295,x=P+(T<<15&4294967295|T>>>17),T=E+(P^(x|~_))+C[9]+3951481745&4294967295,A.g[0]=A.g[0]+_&4294967295,A.g[1]=A.g[1]+(x+(T<<21&4294967295|T>>>11))&4294967295,A.g[2]=A.g[2]+x&4294967295,A.g[3]=A.g[3]+P&4294967295}r.prototype.u=function(A,_){_===void 0&&(_=A.length);for(var E=_-this.blockSize,C=this.B,x=this.h,P=0;P<_;){if(x==0)for(;P<=E;)i(this,A,P),P+=this.blockSize;if(typeof A=="string"){for(;P<_;)if(C[x++]=A.charCodeAt(P++),x==this.blockSize){i(this,C),x=0;break}}else for(;P<_;)if(C[x++]=A[P++],x==this.blockSize){i(this,C),x=0;break}}this.h=x,this.o+=_},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var _=1;_<A.length-8;++_)A[_]=0;var E=8*this.o;for(_=A.length-8;_<A.length;++_)A[_]=E&255,E/=256;for(this.u(A),A=Array(16),_=E=0;4>_;++_)for(var C=0;32>C;C+=8)A[E++]=this.g[_]>>>C&255;return A};function o(A,_){var E=a;return Object.prototype.hasOwnProperty.call(E,A)?E[A]:E[A]=_(A)}function s(A,_){this.h=_;for(var E=[],C=!0,x=A.length-1;0<=x;x--){var P=A[x]|0;C&&P==_||(E[x]=P,C=!1)}this.g=E}var a={};function c(A){return-128<=A&&128>A?o(A,function(_){return new s([_|0],0>_?-1:0)}):new s([A|0],0>A?-1:0)}function u(A){if(isNaN(A)||!isFinite(A))return f;if(0>A)return S(u(-A));for(var _=[],E=1,C=0;A>=E;C++)_[C]=A/E|0,E*=4294967296;return new s(_,0)}function d(A,_){if(A.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(A.charAt(0)=="-")return S(d(A.substring(1),_));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=u(Math.pow(_,8)),C=f,x=0;x<A.length;x+=8){var P=Math.min(8,A.length-x),T=parseInt(A.substring(x,x+P),_);8>P?(P=u(Math.pow(_,P)),C=C.j(P).add(u(T))):(C=C.j(E),C=C.add(u(T)))}return C}var f=c(0),m=c(1),v=c(16777216);n=s.prototype,n.m=function(){if(R(this))return-S(this).m();for(var A=0,_=1,E=0;E<this.g.length;E++){var C=this.i(E);A+=(0<=C?C:4294967296+C)*_,_*=4294967296}return A},n.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(w(this))return"0";if(R(this))return"-"+S(this).toString(A);for(var _=u(Math.pow(A,6)),E=this,C="";;){var x=te(E,_).g;E=F(E,x.j(_));var P=((0<E.g.length?E.g[0]:E.h)>>>0).toString(A);if(E=x,w(E))return P+C;for(;6>P.length;)P="0"+P;C=P+C}},n.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function w(A){if(A.h!=0)return!1;for(var _=0;_<A.g.length;_++)if(A.g[_]!=0)return!1;return!0}function R(A){return A.h==-1}n.l=function(A){return A=F(this,A),R(A)?-1:w(A)?0:1};function S(A){for(var _=A.g.length,E=[],C=0;C<_;C++)E[C]=~A.g[C];return new s(E,~A.h).add(m)}n.abs=function(){return R(this)?S(this):this},n.add=function(A){for(var _=Math.max(this.g.length,A.g.length),E=[],C=0,x=0;x<=_;x++){var P=C+(this.i(x)&65535)+(A.i(x)&65535),T=(P>>>16)+(this.i(x)>>>16)+(A.i(x)>>>16);C=T>>>16,P&=65535,T&=65535,E[x]=T<<16|P}return new s(E,E[E.length-1]&-2147483648?-1:0)};function F(A,_){return A.add(S(_))}n.j=function(A){if(w(this)||w(A))return f;if(R(this))return R(A)?S(this).j(S(A)):S(S(this).j(A));if(R(A))return S(this.j(S(A)));if(0>this.l(v)&&0>A.l(v))return u(this.m()*A.m());for(var _=this.g.length+A.g.length,E=[],C=0;C<2*_;C++)E[C]=0;for(C=0;C<this.g.length;C++)for(var x=0;x<A.g.length;x++){var P=this.i(C)>>>16,T=this.i(C)&65535,mi=A.i(x)>>>16,bl=A.i(x)&65535;E[2*C+2*x]+=T*bl,W(E,2*C+2*x),E[2*C+2*x+1]+=P*bl,W(E,2*C+2*x+1),E[2*C+2*x+1]+=T*mi,W(E,2*C+2*x+1),E[2*C+2*x+2]+=P*mi,W(E,2*C+2*x+2)}for(C=0;C<_;C++)E[C]=E[2*C+1]<<16|E[2*C];for(C=_;C<2*_;C++)E[C]=0;return new s(E,0)};function W(A,_){for(;(A[_]&65535)!=A[_];)A[_+1]+=A[_]>>>16,A[_]&=65535,_++}function q(A,_){this.g=A,this.h=_}function te(A,_){if(w(_))throw Error("division by zero");if(w(A))return new q(f,f);if(R(A))return _=te(S(A),_),new q(S(_.g),S(_.h));if(R(_))return _=te(A,S(_)),new q(S(_.g),_.h);if(30<A.g.length){if(R(A)||R(_))throw Error("slowDivide_ only works with positive integers.");for(var E=m,C=_;0>=C.l(A);)E=Xe(E),C=Xe(C);var x=ue(E,1),P=ue(C,1);for(C=ue(C,2),E=ue(E,2);!w(C);){var T=P.add(C);0>=T.l(A)&&(x=x.add(E),P=T),C=ue(C,1),E=ue(E,1)}return _=F(A,x.j(_)),new q(x,_)}for(x=f;0<=A.l(_);){for(E=Math.max(1,Math.floor(A.m()/_.m())),C=Math.ceil(Math.log(E)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),P=u(E),T=P.j(_);R(T)||0<T.l(A);)E-=C,P=u(E),T=P.j(_);w(P)&&(P=m),x=x.add(P),A=F(A,T)}return new q(x,A)}n.A=function(A){return te(this,A).h},n.and=function(A){for(var _=Math.max(this.g.length,A.g.length),E=[],C=0;C<_;C++)E[C]=this.i(C)&A.i(C);return new s(E,this.h&A.h)},n.or=function(A){for(var _=Math.max(this.g.length,A.g.length),E=[],C=0;C<_;C++)E[C]=this.i(C)|A.i(C);return new s(E,this.h|A.h)},n.xor=function(A){for(var _=Math.max(this.g.length,A.g.length),E=[],C=0;C<_;C++)E[C]=this.i(C)^A.i(C);return new s(E,this.h^A.h)};function Xe(A){for(var _=A.g.length+1,E=[],C=0;C<_;C++)E[C]=A.i(C)<<1|A.i(C-1)>>>31;return new s(E,A.h)}function ue(A,_){var E=_>>5;_%=32;for(var C=A.g.length-E,x=[],P=0;P<C;P++)x[P]=0<_?A.i(P+E)>>>_|A.i(P+E+1)<<32-_:A.i(P+E);return new s(x,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,LI=XP.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,Ui=XP.Integer=s}).apply(typeof JP<"u"?JP:typeof self<"u"?self:typeof window<"u"?window:{});var Sm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ji={};var VI,Y6,Ec,UI,cd,Am,jI,BI,$I;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sm=="object"&&Sm];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(l,h){if(h)e:{var p=r;l=l.split(".");for(var g=0;g<l.length-1;g++){var M=l[g];if(!(M in p))break e;p=p[M]}l=l[l.length-1],g=p[l],h=h(g),h!=g&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function o(l,h){l instanceof String&&(l+="");var p=0,g=!1,M={next:function(){if(!g&&p<l.length){var O=p++;return{value:h(O,l[O]),done:!1}}return g=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}i("Array.prototype.values",function(l){return l||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function u(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,p){return l.call.apply(l.bind,arguments)}function f(l,h,p){if(!l)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,g),l.apply(h,M)}}return function(){return l.apply(h,arguments)}}function m(l,h,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function v(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),l.apply(this,g)}}function w(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(g,M,O){for(var B=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)B[Ze-2]=arguments[Ze];return h.prototype[M].apply(g,B)}}function R(l){let h=l.length;if(0<h){let p=Array(h);for(let g=0;g<h;g++)p[g]=l[g];return p}return[]}function S(l,h){for(let p=1;p<arguments.length;p++){let g=arguments[p];if(c(g)){let M=l.length||0,O=g.length||0;l.length=M+O;for(let B=0;B<O;B++)l[M+B]=g[B]}else l.push(g)}}class F{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function W(l){return/^[\s\xa0]*$/.test(l)}function q(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function te(l){return te[" "](l),l}te[" "]=function(){};var Xe=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function ue(l,h,p){for(let g in l)h.call(p,l[g],g,l)}function A(l,h){for(let p in l)h.call(void 0,l[p],p,l)}function _(l){let h={};for(let p in l)h[p]=l[p];return h}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(l,h){let p,g;for(let M=1;M<arguments.length;M++){g=arguments[M];for(p in g)l[p]=g[p];for(let O=0;O<E.length;O++)p=E[O],Object.prototype.hasOwnProperty.call(g,p)&&(l[p]=g[p])}}function x(l){var h=1;l=l.split(":");let p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function P(l){a.setTimeout(()=>{throw l},0)}function T(){var l=Vv;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class mi{constructor(){this.h=this.g=null}add(h,p){let g=bl.get();g.set(h,p),this.h?this.h.next=g:this.g=g,this.h=g}}var bl=new F(()=>new i2,l=>l.reset());class i2{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Cl,Dl=!1,Vv=new mi,tD=()=>{let l=a.Promise.resolve(void 0);Cl=()=>{l.then(o2)}};var o2=()=>{for(var l;l=T();){try{l.h.call(l.g)}catch(p){P(p)}var h=bl;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}Dl=!1};function io(){this.s=this.s,this.C=this.C}io.prototype.s=!1,io.prototype.ma=function(){this.s||(this.s=!0,this.N())},io.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function an(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}an.prototype.h=function(){this.defaultPrevented=!0};var s2=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return l}();function Sl(l,h){if(an.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,g=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(Xe){e:{try{te(h.nodeName);var M=!0;break e}catch{}M=!1}M||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:a2[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Sl.aa.h.call(this)}}w(Sl,an);var a2={2:"touch",3:"pen",4:"mouse"};Sl.prototype.h=function(){Sl.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Al="closure_listenable_"+(1e6*Math.random()|0),c2=0;function l2(l,h,p,g,M){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!g,this.ha=M,this.key=++c2,this.da=this.fa=!1}function uh(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function dh(l){this.src=l,this.g={},this.h=0}dh.prototype.add=function(l,h,p,g,M){var O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);var B=jv(l,h,g,M);return-1<B?(h=l[B],p||(h.fa=!1)):(h=new l2(h,this.src,O,!!g,M),h.fa=p,l.push(h)),h};function Uv(l,h){var p=h.type;if(p in l.g){var g=l.g[p],M=Array.prototype.indexOf.call(g,h,void 0),O;(O=0<=M)&&Array.prototype.splice.call(g,M,1),O&&(uh(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function jv(l,h,p,g){for(var M=0;M<l.length;++M){var O=l[M];if(!O.da&&O.listener==h&&O.capture==!!p&&O.ha==g)return M}return-1}var Bv="closure_lm_"+(1e6*Math.random()|0),$v={};function nD(l,h,p,g,M){if(g&&g.once)return iD(l,h,p,g,M);if(Array.isArray(h)){for(var O=0;O<h.length;O++)nD(l,h[O],p,g,M);return null}return p=zv(p),l&&l[Al]?l.K(h,p,u(g)?!!g.capture:!!g,M):rD(l,h,p,!1,g,M)}function rD(l,h,p,g,M,O){if(!h)throw Error("Invalid event type");var B=u(M)?!!M.capture:!!M,Ze=Wv(l);if(Ze||(l[Bv]=Ze=new dh(l)),p=Ze.add(h,p,g,B,O),p.proxy)return p;if(g=u2(),p.proxy=g,g.src=l,g.listener=p,l.addEventListener)s2||(M=B),M===void 0&&(M=!1),l.addEventListener(h.toString(),g,M);else if(l.attachEvent)l.attachEvent(sD(h.toString()),g);else if(l.addListener&&l.removeListener)l.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function u2(){function l(p){return h.call(l.src,l.listener,p)}let h=d2;return l}function iD(l,h,p,g,M){if(Array.isArray(h)){for(var O=0;O<h.length;O++)iD(l,h[O],p,g,M);return null}return p=zv(p),l&&l[Al]?l.L(h,p,u(g)?!!g.capture:!!g,M):rD(l,h,p,!0,g,M)}function oD(l,h,p,g,M){if(Array.isArray(h))for(var O=0;O<h.length;O++)oD(l,h[O],p,g,M);else g=u(g)?!!g.capture:!!g,p=zv(p),l&&l[Al]?(l=l.i,h=String(h).toString(),h in l.g&&(O=l.g[h],p=jv(O,p,g,M),-1<p&&(uh(O[p]),Array.prototype.splice.call(O,p,1),O.length==0&&(delete l.g[h],l.h--)))):l&&(l=Wv(l))&&(h=l.g[h.toString()],l=-1,h&&(l=jv(h,p,g,M)),(p=-1<l?h[l]:null)&&Hv(p))}function Hv(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[Al])Uv(h.i,l);else{var p=l.type,g=l.proxy;h.removeEventListener?h.removeEventListener(p,g,l.capture):h.detachEvent?h.detachEvent(sD(p),g):h.addListener&&h.removeListener&&h.removeListener(g),(p=Wv(h))?(Uv(p,l),p.h==0&&(p.src=null,h[Bv]=null)):uh(l)}}}function sD(l){return l in $v?$v[l]:$v[l]="on"+l}function d2(l,h){if(l.da)l=!0;else{h=new Sl(h,this);var p=l.listener,g=l.ha||l.src;l.fa&&Hv(l),l=p.call(g,h)}return l}function Wv(l){return l=l[Bv],l instanceof dh?l:null}var qv="__closure_events_fn_"+(1e9*Math.random()>>>0);function zv(l){return typeof l=="function"?l:(l[qv]||(l[qv]=function(h){return l.handleEvent(h)}),l[qv])}function cn(){io.call(this),this.i=new dh(this),this.M=this,this.F=null}w(cn,io),cn.prototype[Al]=!0,cn.prototype.removeEventListener=function(l,h,p,g){oD(this,l,h,p,g)};function bn(l,h){var p,g=l.F;if(g)for(p=[];g;g=g.F)p.push(g);if(l=l.M,g=h.type||h,typeof h=="string")h=new an(h,l);else if(h instanceof an)h.target=h.target||l;else{var M=h;h=new an(g,l),C(h,M)}if(M=!0,p)for(var O=p.length-1;0<=O;O--){var B=h.g=p[O];M=hh(B,g,!0,h)&&M}if(B=h.g=l,M=hh(B,g,!0,h)&&M,M=hh(B,g,!1,h)&&M,p)for(O=0;O<p.length;O++)B=h.g=p[O],M=hh(B,g,!1,h)&&M}cn.prototype.N=function(){if(cn.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],g=0;g<p.length;g++)uh(p[g]);delete l.g[h],l.h--}}this.F=null},cn.prototype.K=function(l,h,p,g){return this.i.add(String(l),h,!1,p,g)},cn.prototype.L=function(l,h,p,g){return this.i.add(String(l),h,!0,p,g)};function hh(l,h,p,g){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var M=!0,O=0;O<h.length;++O){var B=h[O];if(B&&!B.da&&B.capture==p){var Ze=B.listener,Zt=B.ha||B.src;B.fa&&Uv(l.i,B),M=Ze.call(Zt,g)!==!1&&M}}return M&&!g.defaultPrevented}function aD(l,h,p){if(typeof l=="function")p&&(l=m(l,p));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function cD(l){l.g=aD(()=>{l.g=null,l.i&&(l.i=!1,cD(l))},l.l);let h=l.h;l.h=null,l.m.apply(null,h)}class h2 extends io{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:cD(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rl(l){io.call(this),this.h=l,this.g={}}w(Rl,io);var lD=[];function uD(l){ue(l.g,function(h,p){this.g.hasOwnProperty(p)&&Hv(h)},l),l.g={}}Rl.prototype.N=function(){Rl.aa.N.call(this),uD(this)},Rl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gv=a.JSON.stringify,f2=a.JSON.parse,p2=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Kv(){}Kv.prototype.h=null;function dD(l){return l.h||(l.h=l.i())}function hD(){}var xl={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yv(){an.call(this,"d")}w(Yv,an);function Qv(){an.call(this,"c")}w(Qv,an);var Xo={},fD=null;function fh(){return fD=fD||new cn}Xo.La="serverreachability";function pD(l){an.call(this,Xo.La,l)}w(pD,an);function Nl(l){let h=fh();bn(h,new pD(h))}Xo.STAT_EVENT="statevent";function mD(l,h){an.call(this,Xo.STAT_EVENT,l),this.stat=h}w(mD,an);function Cn(l){let h=fh();bn(h,new mD(h,l))}Xo.Ma="timingevent";function gD(l,h){an.call(this,Xo.Ma,l),this.size=h}w(gD,an);function Ml(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function Pl(){this.g=!0}Pl.prototype.xa=function(){this.g=!1};function m2(l,h,p,g,M,O){l.info(function(){if(l.g)if(O)for(var B="",Ze=O.split("&"),Zt=0;Zt<Ze.length;Zt++){var He=Ze[Zt].split("=");if(1<He.length){var ln=He[0];He=He[1];var un=ln.split("_");B=2<=un.length&&un[1]=="type"?B+(ln+"="+He+"&"):B+(ln+"=redacted&")}}else B=null;else B=O;return"XMLHTTP REQ ("+g+") [attempt "+M+"]: "+h+`
`+p+`
`+B})}function g2(l,h,p,g,M,O,B){l.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+M+"]: "+h+`
`+p+`
`+O+" "+B})}function ha(l,h,p,g){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+y2(l,p)+(g?" "+g:"")})}function v2(l,h){l.info(function(){return"TIMEOUT: "+h})}Pl.prototype.info=function(){};function y2(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var g=p[l];if(!(2>g.length)){var M=g[1];if(Array.isArray(M)&&!(1>M.length)){var O=M[0];if(O!="noop"&&O!="stop"&&O!="close")for(var B=1;B<M.length;B++)M[B]=""}}}}return Gv(p)}catch{return h}}var ph={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vD={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jv;function mh(){}w(mh,Kv),mh.prototype.g=function(){return new XMLHttpRequest},mh.prototype.i=function(){return{}},Jv=new mh;function oo(l,h,p,g){this.j=l,this.i=h,this.l=p,this.R=g||1,this.U=new Rl(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yD}function yD(){this.i=null,this.g="",this.h=!1}var _D={},Xv={};function Zv(l,h,p){l.L=1,l.v=_h(gi(h)),l.m=p,l.P=!0,wD(l,null)}function wD(l,h){l.F=Date.now(),gh(l),l.A=gi(l.v);var p=l.A,g=l.R;Array.isArray(g)||(g=[String(g)]),kD(p.i,"t",g),l.C=0,p=l.j.J,l.h=new yD,l.g=XD(l.j,p?h:null,!l.m),0<l.O&&(l.M=new h2(m(l.Y,l,l.g),l.O)),h=l.U,p=l.g,g=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(lD[0]=M.toString()),M=lD);for(var O=0;O<M.length;O++){var B=nD(p,M[O],g||h.handleEvent,!1,h.h||h);if(!B)break;h.g[B.key]=B}h=l.H?_(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Nl(),m2(l.i,l.u,l.A,l.l,l.R,l.m)}oo.prototype.ca=function(l){l=l.target;let h=this.M;h&&vi(l)==3?h.j():this.Y(l)},oo.prototype.Y=function(l){try{if(l==this.g)e:{let un=vi(this.g);var h=this.g.Ba();let ma=this.g.Z();if(!(3>un)&&(un!=3||this.g&&(this.h.h||this.g.oa()||BD(this.g)))){this.J||un!=4||h==7||(h==8||0>=ma?Nl(3):Nl(2)),ey(this);var p=this.g.Z();this.X=p;t:if(ED(this)){var g=BD(this.g);l="";var M=g.length,O=vi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zo(this),kl(this);var B="";break t}this.h.i=new a.TextDecoder}for(h=0;h<M;h++)this.h.h=!0,l+=this.h.i.decode(g[h],{stream:!(O&&h==M-1)});g.length=0,this.h.g+=l,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=p==200,g2(this.i,this.u,this.A,this.l,this.R,un,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,Zt=this.g;if((Ze=Zt.g?Zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(Ze)){var He=Ze;break t}}He=null}if(p=He)ha(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ty(this,p);else{this.o=!1,this.s=3,Cn(12),Zo(this),kl(this);break e}}if(this.P){p=!0;let br;for(;!this.J&&this.C<B.length;)if(br=_2(this,B),br==Xv){un==4&&(this.s=4,Cn(14),p=!1),ha(this.i,this.l,null,"[Incomplete Response]");break}else if(br==_D){this.s=4,Cn(15),ha(this.i,this.l,B,"[Invalid Chunk]"),p=!1;break}else ha(this.i,this.l,br,null),ty(this,br);if(ED(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),un!=4||B.length!=0||this.h.h||(this.s=1,Cn(16),p=!1),this.o=this.o&&p,!p)ha(this.i,this.l,B,"[Invalid Chunked Response]"),Zo(this),kl(this);else if(0<B.length&&!this.W){this.W=!0;var ln=this.j;ln.g==this&&ln.ba&&!ln.M&&(ln.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),ay(ln),ln.M=!0,Cn(11))}}else ha(this.i,this.l,B,null),ty(this,B);un==4&&Zo(this),this.o&&!this.J&&(un==4?KD(this.j,this):(this.o=!1,gh(this)))}else F2(this.g),p==400&&0<B.indexOf("Unknown SID")?(this.s=3,Cn(12)):(this.s=0,Cn(13)),Zo(this),kl(this)}}}catch{}finally{}};function ED(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function _2(l,h){var p=l.C,g=h.indexOf(`
`,p);return g==-1?Xv:(p=Number(h.substring(p,g)),isNaN(p)?_D:(g+=1,g+p>h.length?Xv:(h=h.slice(g,g+p),l.C=g+p,h)))}oo.prototype.cancel=function(){this.J=!0,Zo(this)};function gh(l){l.S=Date.now()+l.I,ID(l,l.I)}function ID(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Ml(m(l.ba,l),h)}function ey(l){l.B&&(a.clearTimeout(l.B),l.B=null)}oo.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(v2(this.i,this.A),this.L!=2&&(Nl(),Cn(17)),Zo(this),this.s=2,kl(this)):ID(this,this.S-l)};function kl(l){l.j.G==0||l.J||KD(l.j,l)}function Zo(l){ey(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,uD(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function ty(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||ny(p.h,l))){if(!l.K&&ny(p.h,l)&&p.G==3){try{var g=p.Da.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var M=g;if(M[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)bh(p),Ih(p);else break e;sy(p),Cn(18)}}else p.za=M[1],0<p.za-p.T&&37500>M[2]&&p.F&&p.v==0&&!p.C&&(p.C=Ml(m(p.Za,p),6e3));if(1>=CD(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else ts(p,11)}else if((l.K||p.g==l)&&bh(p),!W(h))for(M=p.Da.g.parse(h),h=0;h<M.length;h++){let He=M[h];if(p.T=He[0],He=He[1],p.G==2)if(He[0]=="c"){p.K=He[1],p.ia=He[2];let ln=He[3];ln!=null&&(p.la=ln,p.j.info("VER="+p.la));let un=He[4];un!=null&&(p.Aa=un,p.j.info("SVER="+p.Aa));let ma=He[5];ma!=null&&typeof ma=="number"&&0<ma&&(g=1.5*ma,p.L=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;let br=l.g;if(br){let Dh=br.g?br.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dh){var O=g.h;O.g||Dh.indexOf("spdy")==-1&&Dh.indexOf("quic")==-1&&Dh.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(ry(O,O.h),O.h=null))}if(g.D){let cy=br.g?br.g.getResponseHeader("X-HTTP-Session-Id"):null;cy&&(g.ya=cy,at(g.I,g.D,cy))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),g=p;var B=l;if(g.qa=JD(g,g.J?g.ia:null,g.W),B.K){DD(g.h,B);var Ze=B,Zt=g.L;Zt&&(Ze.I=Zt),Ze.B&&(ey(Ze),gh(Ze)),g.g=B}else zD(g);0<p.i.length&&Th(p)}else He[0]!="stop"&&He[0]!="close"||ts(p,7);else p.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?ts(p,7):oy(p):He[0]!="noop"&&p.l&&p.l.ta(He),p.v=0)}}Nl(4)}catch{}}var w2=class{constructor(l,h){this.g=l,this.map=h}};function TD(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bD(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function CD(l){return l.h?1:l.g?l.g.size:0}function ny(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function ry(l,h){l.g?l.g.add(h):l.h=h}function DD(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}TD.prototype.cancel=function(){if(this.i=SD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function SD(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(let p of l.g.values())h=h.concat(p.D);return h}return R(l.i)}function E2(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],p=l.length,g=0;g<p;g++)h.push(l[g]);return h}h=[],p=0;for(g in l)h[p++]=l[g];return h}function I2(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(let g in l)h[p++]=g;return h}}}function AD(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=I2(l),g=E2(l),M=g.length,O=0;O<M;O++)h.call(void 0,g[O],p&&p[O],l)}var RD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function T2(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var g=l[p].indexOf("="),M=null;if(0<=g){var O=l[p].substring(0,g);M=l[p].substring(g+1)}else O=l[p];h(O,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function es(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof es){this.h=l.h,vh(this,l.j),this.o=l.o,this.g=l.g,yh(this,l.s),this.l=l.l;var h=l.i,p=new Ll;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),xD(this,p),this.m=l.m}else l&&(h=String(l).match(RD))?(this.h=!1,vh(this,h[1]||"",!0),this.o=Ol(h[2]||""),this.g=Ol(h[3]||"",!0),yh(this,h[4]),this.l=Ol(h[5]||"",!0),xD(this,h[6]||"",!0),this.m=Ol(h[7]||"")):(this.h=!1,this.i=new Ll(null,this.h))}es.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Fl(h,ND,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Fl(h,ND,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Fl(p,p.charAt(0)=="/"?D2:C2,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Fl(p,A2)),l.join("")};function gi(l){return new es(l)}function vh(l,h,p){l.j=p?Ol(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function yh(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function xD(l,h,p){h instanceof Ll?(l.i=h,R2(l.i,l.h)):(p||(h=Fl(h,S2)),l.i=new Ll(h,l.h))}function at(l,h,p){l.i.set(h,p)}function _h(l){return at(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ol(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Fl(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,b2),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function b2(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ND=/[#\/\?@]/g,C2=/[#\?:]/g,D2=/[#\?]/g,S2=/[#\?@]/g,A2=/#/g;function Ll(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function so(l){l.g||(l.g=new Map,l.h=0,l.i&&T2(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=Ll.prototype,n.add=function(l,h){so(this),this.i=null,l=fa(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function MD(l,h){so(l),h=fa(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function PD(l,h){return so(l),h=fa(l,h),l.g.has(h)}n.forEach=function(l,h){so(this),this.g.forEach(function(p,g){p.forEach(function(M){l.call(h,M,g,this)},this)},this)},n.na=function(){so(this);let l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let g=0;g<h.length;g++){let M=l[g];for(let O=0;O<M.length;O++)p.push(h[g])}return p},n.V=function(l){so(this);let h=[];if(typeof l=="string")PD(this,l)&&(h=h.concat(this.g.get(fa(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},n.set=function(l,h){return so(this),this.i=null,l=fa(this,l),PD(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},n.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function kD(l,h,p){MD(l,h),0<p.length&&(l.i=null,l.g.set(fa(l,h),R(p)),l.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var g=h[p];let O=encodeURIComponent(String(g)),B=this.V(g);for(g=0;g<B.length;g++){var M=O;B[g]!==""&&(M+="="+encodeURIComponent(String(B[g]))),l.push(M)}}return this.i=l.join("&")};function fa(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function R2(l,h){h&&!l.j&&(so(l),l.i=null,l.g.forEach(function(p,g){var M=g.toLowerCase();g!=M&&(MD(this,g),kD(this,M,p))},l)),l.j=h}function x2(l,h){let p=new Pl;if(a.Image){let g=new Image;g.onload=v(ao,p,"TestLoadImage: loaded",!0,h,g),g.onerror=v(ao,p,"TestLoadImage: error",!1,h,g),g.onabort=v(ao,p,"TestLoadImage: abort",!1,h,g),g.ontimeout=v(ao,p,"TestLoadImage: timeout",!1,h,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=l}else h(!1)}function N2(l,h){let p=new Pl,g=new AbortController,M=setTimeout(()=>{g.abort(),ao(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:g.signal}).then(O=>{clearTimeout(M),O.ok?ao(p,"TestPingServer: ok",!0,h):ao(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(M),ao(p,"TestPingServer: error",!1,h)})}function ao(l,h,p,g,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),g(p)}catch{}}function M2(){this.g=new p2}function P2(l,h,p){let g=p||"";try{AD(l,function(M,O){let B=M;u(M)&&(B=Gv(M)),h.push(g+O+"="+encodeURIComponent(B))})}catch(M){throw h.push(g+"type="+encodeURIComponent("_badmap")),M}}function Vl(l){this.l=l.Ub||null,this.j=l.eb||!1}w(Vl,Kv),Vl.prototype.g=function(){return new wh(this.l,this.j)},Vl.prototype.i=function(l){return function(){return l}}({});function wh(l,h){cn.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(wh,cn),n=wh.prototype,n.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,jl(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ul(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,jl(this)),this.g&&(this.readyState=3,jl(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;OD(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function OD(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Ul(this):jl(this),this.readyState==3&&OD(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,Ul(this))},n.Qa=function(l){this.g&&(this.response=l,Ul(this))},n.ga=function(){this.g&&Ul(this)};function Ul(l){l.readyState=4,l.l=null,l.j=null,l.v=null,jl(l)}n.setRequestHeader=function(l,h){this.u.append(l,h)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function jl(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(wh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function FD(l){let h="";return ue(l,function(p,g){h+=g,h+=":",h+=p,h+=`\r
`}),h}function iy(l,h,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=FD(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):at(l,h,p))}function Et(l){cn.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Et,cn);var k2=/^https?$/i,O2=["POST","PUT"];n=Et.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,h,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jv.g(),this.v=this.o?dD(this.o):dD(Jv),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(O){LD(this,O);return}if(l=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var M in g)p.set(M,g[M]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let O of g.keys())p.set(O,g.get(O));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),M=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(O2,h,void 0))||g||M||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[O,B]of p)this.g.setRequestHeader(O,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jD(this),this.u=!0,this.g.send(l),this.u=!1}catch(O){LD(this,O)}};function LD(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,VD(l),Eh(l)}function VD(l){l.A||(l.A=!0,bn(l,"complete"),bn(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,bn(this,"complete"),bn(this,"abort"),Eh(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Eh(this,!0)),Et.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?UD(this):this.bb())},n.bb=function(){UD(this)};function UD(l){if(l.h&&typeof s<"u"&&(!l.v[1]||vi(l)!=4||l.Z()!=2)){if(l.u&&vi(l)==4)aD(l.Ea,0,l);else if(bn(l,"readystatechange"),vi(l)==4){l.h=!1;try{let B=l.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var g;if(g=B===0){var M=String(l.D).match(RD)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),g=!k2.test(M?M.toLowerCase():"")}p=g}if(p)bn(l,"complete"),bn(l,"success");else{l.m=6;try{var O=2<vi(l)?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.Z()+"]",VD(l)}}finally{Eh(l)}}}}function Eh(l,h){if(l.g){jD(l);let p=l.g,g=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||bn(l,"ready");try{p.onreadystatechange=g}catch{}}}function jD(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function vi(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<vi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),f2(h)}};function BD(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function F2(l){let h={};l=(l.g&&2<=vi(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<l.length;g++){if(W(l[g]))continue;var p=x(l[g]);let M=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let O=h[M]||[];h[M]=O,O.push(p)}A(h,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bl(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function $D(l){this.Aa=0,this.i=[],this.j=new Pl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bl("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bl("baseRetryDelayMs",5e3,l),this.cb=Bl("retryDelaySeedMs",1e4,l),this.Wa=Bl("forwardChannelMaxRetries",2,l),this.wa=Bl("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new TD(l&&l.concurrentRequestLimit),this.Da=new M2,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=$D.prototype,n.la=8,n.G=1,n.connect=function(l,h,p,g){Cn(0),this.W=l,this.H=h||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.I=JD(this,null,this.W),Th(this)};function oy(l){if(HD(l),l.G==3){var h=l.U++,p=gi(l.I);if(at(p,"SID",l.K),at(p,"RID",h),at(p,"TYPE","terminate"),$l(l,p),h=new oo(l,l.j,h),h.L=2,h.v=_h(gi(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=XD(h.j,null),h.g.ea(h.v)),h.F=Date.now(),gh(h)}QD(l)}function Ih(l){l.g&&(ay(l),l.g.cancel(),l.g=null)}function HD(l){Ih(l),l.u&&(a.clearTimeout(l.u),l.u=null),bh(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Th(l){if(!bD(l.h)&&!l.s){l.s=!0;var h=l.Ga;Cl||tD(),Dl||(Cl(),Dl=!0),Vv.add(h,l),l.B=0}}function L2(l,h){return CD(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Ml(m(l.Ga,l,h),YD(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let M=new oo(this,this.j,l),O=this.o;if(this.S&&(O?(O=_(O),C(O,this.S)):O=this.S),this.m!==null||this.O||(M.H=O,O=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=qD(this,M,h),p=gi(this.I),at(p,"RID",l),at(p,"CVER",22),this.D&&at(p,"X-HTTP-Session-Id",this.D),$l(this,p),O&&(this.O?h="headers="+encodeURIComponent(String(FD(O)))+"&"+h:this.m&&iy(p,this.m,O)),ry(this.h,M),this.Ua&&at(p,"TYPE","init"),this.P?(at(p,"$req",h),at(p,"SID","null"),M.T=!0,Zv(M,p,null)):Zv(M,p,h),this.G=2}}else this.G==3&&(l?WD(this,l):this.i.length==0||bD(this.h)||WD(this))};function WD(l,h){var p;h?p=h.l:p=l.U++;let g=gi(l.I);at(g,"SID",l.K),at(g,"RID",p),at(g,"AID",l.T),$l(l,g),l.m&&l.o&&iy(g,l.m,l.o),p=new oo(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=qD(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),ry(l.h,p),Zv(p,g,h)}function $l(l,h){l.H&&ue(l.H,function(p,g){at(h,g,p)}),l.l&&AD({},function(p,g){at(h,g,p)})}function qD(l,h,p){p=Math.min(l.i.length,p);var g=l.l?m(l.l.Na,l.l,l):null;e:{var M=l.i;let O=-1;for(;;){let B=["count="+p];O==-1?0<p?(O=M[0].g,B.push("ofs="+O)):O=0:B.push("ofs="+O);let Ze=!0;for(let Zt=0;Zt<p;Zt++){let He=M[Zt].g,ln=M[Zt].map;if(He-=O,0>He)O=Math.max(0,M[Zt].g-100),Ze=!1;else try{P2(ln,B,"req"+He+"_")}catch{g&&g(ln)}}if(Ze){g=B.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,g}function zD(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;Cl||tD(),Dl||(Cl(),Dl=!0),Vv.add(h,l),l.v=0}}function sy(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Ml(m(l.Fa,l),YD(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,GD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Ml(m(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Cn(10),Ih(this),GD(this))};function ay(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function GD(l){l.g=new oo(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=gi(l.qa);at(h,"RID","rpc"),at(h,"SID",l.K),at(h,"AID",l.T),at(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&at(h,"TO",l.ja),at(h,"TYPE","xmlhttp"),$l(l,h),l.m&&l.o&&iy(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=_h(gi(h)),p.m=null,p.P=!0,wD(p,l)}n.Za=function(){this.C!=null&&(this.C=null,Ih(this),sy(this),Cn(19))};function bh(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function KD(l,h){var p=null;if(l.g==h){bh(l),ay(l),l.g=null;var g=2}else if(ny(l.h,h))p=h.D,DD(l.h,h),g=1;else return;if(l.G!=0){if(h.o)if(g==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var M=l.B;g=fh(),bn(g,new gD(g,p)),Th(l)}else zD(l);else if(M=h.s,M==3||M==0&&0<h.X||!(g==1&&L2(l,h)||g==2&&sy(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),M){case 1:ts(l,5);break;case 4:ts(l,10);break;case 3:ts(l,6);break;default:ts(l,2)}}}function YD(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function ts(l,h){if(l.j.info("Error code "+h),h==2){var p=m(l.fb,l),g=l.Xa;let M=!g;g=new es(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||vh(g,"https"),_h(g),M?x2(g.toString(),p):N2(g.toString(),p)}else Cn(2);l.G=0,l.l&&l.l.sa(h),QD(l),HD(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Cn(2)):(this.j.info("Failed to ping google.com"),Cn(1))};function QD(l){if(l.G=0,l.ka=[],l.l){let h=SD(l.h);(h.length!=0||l.i.length!=0)&&(S(l.ka,h),S(l.ka,l.i),l.h.i.length=0,R(l.i),l.i.length=0),l.l.ra()}}function JD(l,h,p){var g=p instanceof es?gi(p):new es(p);if(g.g!="")h&&(g.g=h+"."+g.g),yh(g,g.s);else{var M=a.location;g=M.protocol,h=h?h+"."+M.hostname:M.hostname,M=+M.port;var O=new es(null);g&&vh(O,g),h&&(O.g=h),M&&yh(O,M),p&&(O.l=p),g=O}return p=l.D,h=l.ya,p&&h&&at(g,p,h),at(g,"VER",l.la),$l(l,g),g}function XD(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Et(new Vl({eb:p})):new Et(l.pa),h.Ha(l.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ZD(){}n=ZD.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ch(){}Ch.prototype.g=function(l,h){return new zn(l,h)};function zn(l,h){cn.call(this),this.g=new $D(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!W(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!W(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new pa(this)}w(zn,cn),zn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zn.prototype.close=function(){oy(this.g)},zn.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=Gv(l),l=p);h.i.push(new w2(h.Ya++,l)),h.G==3&&Th(h)},zn.prototype.N=function(){this.g.l=null,delete this.j,oy(this.g),delete this.g,zn.aa.N.call(this)};function eS(l){Yv.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(let p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}w(eS,Yv);function tS(){Qv.call(this),this.status=1}w(tS,Qv);function pa(l){this.g=l}w(pa,ZD),pa.prototype.ua=function(){bn(this.g,"a")},pa.prototype.ta=function(l){bn(this.g,new eS(l))},pa.prototype.sa=function(l){bn(this.g,new tS)},pa.prototype.ra=function(){bn(this.g,"b")},Ch.prototype.createWebChannel=Ch.prototype.g,zn.prototype.send=zn.prototype.o,zn.prototype.open=zn.prototype.m,zn.prototype.close=zn.prototype.close,$I=ji.createWebChannelTransport=function(){return new Ch},BI=ji.getStatEventTarget=function(){return fh()},jI=ji.Event=Xo,Am=ji.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ph.NO_ERROR=0,ph.TIMEOUT=8,ph.HTTP_ERROR=6,cd=ji.ErrorCode=ph,vD.COMPLETE="complete",UI=ji.EventType=vD,hD.EventType=xl,xl.OPEN="a",xl.CLOSE="b",xl.ERROR="c",xl.MESSAGE="d",cn.prototype.listen=cn.prototype.K,Ec=ji.WebChannel=hD,Y6=ji.FetchXmlHttpFactory=Vl,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,VI=ji.XhrIo=Et}).apply(typeof Sm<"u"?Sm:typeof self<"u"?self:typeof window<"u"?window:{});var ZP="@firebase/firestore";var Yt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");var Bc="11.2.0";var Hs=new ir("@firebase/firestore");function Ic(){return Hs.logLevel}function K(n,...e){if(Hs.logLevel<=en.DEBUG){let t=e.map(S0);Hs.debug(`Firestore (${Bc}): ${n}`,...t)}}function Bi(n,...e){if(Hs.logLevel<=en.ERROR){let t=e.map(S0);Hs.error(`Firestore (${Bc}): ${n}`,...t)}}function Rc(n,...e){if(Hs.logLevel<=en.WARN){let t=e.map(S0);Hs.warn(`Firestore (${Bc}): ${n}`,...t)}}function S0(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function de(n="Unexpected state"){let e=`FIRESTORE (${Bc}) INTERNAL ASSERTION FAILED: `+n;throw Bi(e),new Error(e)}function Ge(n,e){n||de()}function ye(n,e){return n}var L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Y=class extends Gn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ai=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Om=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},GI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Yt.UNAUTHENTICATED))}shutdown(){}},KI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},YI=class{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ge(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new ai;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ai,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>y(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ai)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ge(typeof r.accessToken=="string"),new Om(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string"),new Yt(e)}},QI=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}},JI=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new QI(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},XI=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ZI=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ge(this.o===void 0);let r=o=>{o.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,K("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ge(typeof t.token=="string"),this.R=t.token,new XI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Q6(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Fm=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Q6(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function Fe(n,e){return n<e?-1:n>e?1:0}function xc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var At=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Y(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Y(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Y(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var we=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new At(0,0))}static max(){return new n(new At(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Lm=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&de(),r===void 0?r=e.length-t:r>e.length-t&&de(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Math.sign(e.length-t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ui.fromString(e.substring(4,e.length-2))}},yt=class n extends Lm{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new Y(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},J6=/^[_a-zA-Z][_a-zA-Z0-9]*$/,er=class n extends Lm{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return J6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new Y(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new Y(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Y(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Y(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var oe=class n{constructor(e){this.path=e}static fromPath(e){return new n(yt.fromString(e))}static fromName(e){return new n(yt.fromString(e).popFirst(5))}static empty(){return new n(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new yt(e.slice()))}};var eT=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};eT.UNKNOWN_ID=-1;function X6(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=we.fromTimestamp(r===1e9?new At(t+1,0):new At(t,r));return new Ws(i,oe.empty(),e)}function Z6(n){return new Ws(n.readTime,n.key,-1)}var Ws=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(we.min(),oe.empty(),-1)}static max(){return new n(we.max(),oe.empty(),-1)}};function e9(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=oe.comparator(n.documentKey,e.documentKey),t!==0?t:Fe(n.largestBatchId,e.largestBatchId))}var t9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",tT=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function $c(n){return y(this,null,function*(){if(n.code!==L.FAILED_PRECONDITION||n.message!==t9)throw n;K("LocalStore","Unexpectedly lost primary lease")})}var V=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&de(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;t(e[u]).next(d=>{s[u]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function n9(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Hc(n){return n.name==="IndexedDbTransactionError"}var A0=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function gg(n){return n==null}function pd(n){return n===0&&1/n==-1/0}function r9(n){return typeof n=="number"&&Number.isInteger(n)&&!pd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function i9(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ek(e)),e=o9(n.get(t),e);return ek(e)}function o9(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function ek(n){return n+""}var s9=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Bde=[...s9,"documentOverlays"],a9=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],c9=a9,l9=[...c9,"indexConfiguration","indexState","indexEntries"];var $de=[...l9,"globals"];function tk(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Js(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ok(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Rt=class n{constructor(e,t){this.comparator=e,this.root=t||ci.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ci.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ci.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dc(this.root,e,this.comparator,!0)}},Dc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ci=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw de();let e=this.left.check();if(e!==this.right.check())throw de();return e+(this.isRed()?0:1)}};ci.EMPTY=null,ci.RED=!0,ci.BLACK=!1;ci.EMPTY=new class{constructor(){this.size=0}get key(){throw de()}get value(){throw de()}get color(){throw de()}get left(){throw de()}get right(){throw de()}copy(e,t,r,i,o){return this}insert(e,t,r){return new ci(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Qt=class n{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vm(this.data.getIterator())}getIteratorFrom(e){return new Vm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Vm=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var si=class n{constructor(e){this.fields=e,e.sort(er.comparator)}static empty(){return new n([])}unionWith(e){let t=new Qt(er.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xc(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Um=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var yn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Um("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};yn.EMPTY_BYTE_STRING=new yn("");var u9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $i(n){if(Ge(!!n),typeof n=="string"){let e=0,t=u9.exec(n);if(Ge(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(n.seconds),nanos:pt(n.nanos)}}function pt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Hi(n){return typeof n=="string"?yn.fromBase64String(n):yn.fromUint8Array(n)}function R0(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function vg(n){let e=n.mapValue.fields.__previous_value__;return R0(e)?vg(e):e}function md(n){let e=$i(n.mapValue.fields.__local_write_time__.timestampValue);return new At(e.seconds,e.nanos)}var nT=class{constructor(e,t,r,i,o,s,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},jm=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Rm={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Bo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?R0(n)?4:Lk(n)?9007199254740991:Fk(n)?10:11:de()}function di(n,e){if(n===e)return!0;let t=Bo(n);if(t!==Bo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return md(n).isEqual(md(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=$i(i.timestampValue),a=$i(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Hi(i.bytesValue).isEqual(Hi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return pt(i.geoPointValue.latitude)===pt(o.geoPointValue.latitude)&&pt(i.geoPointValue.longitude)===pt(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return pt(i.integerValue)===pt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=pt(i.doubleValue),a=pt(o.doubleValue);return s===a?pd(s)===pd(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return xc(n.arrayValue.values||[],e.arrayValue.values||[],di);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(tk(s)!==tk(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!di(s[c],a[c])))return!1;return!0}(n,e);default:return de()}}function gd(n,e){return(n.values||[]).find(t=>di(t,e))!==void 0}function Nc(n,e){if(n===e)return 0;let t=Bo(n),r=Bo(e);if(t!==r)return Fe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fe(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=pt(o.integerValue||o.doubleValue),c=pt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return nk(n.timestampValue,e.timestampValue);case 4:return nk(md(n),md(e));case 5:return Fe(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Hi(o),c=Hi(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let d=Fe(a[u],c[u]);if(d!==0)return d}return Fe(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Fe(pt(o.latitude),pt(s.latitude));return a!==0?a:Fe(pt(o.longitude),pt(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return rk(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,d;let f=o.fields||{},m=s.fields||{},v=(a=f.value)===null||a===void 0?void 0:a.arrayValue,w=(c=m.value)===null||c===void 0?void 0:c.arrayValue,R=Fe(((u=v?.values)===null||u===void 0?void 0:u.length)||0,((d=w?.values)===null||d===void 0?void 0:d.length)||0);return R!==0?R:rk(v,w)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Rm.mapValue&&s===Rm.mapValue)return 0;if(o===Rm.mapValue)return 1;if(s===Rm.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let m=Fe(c[f],d[f]);if(m!==0)return m;let v=Nc(a[c[f]],u[d[f]]);if(v!==0)return v}return Fe(c.length,d.length)}(n.mapValue,e.mapValue);default:throw de()}}function nk(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Fe(n,e);let t=$i(n),r=$i(e),i=Fe(t.seconds,r.seconds);return i!==0?i:Fe(t.nanos,r.nanos)}function rk(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Nc(t[i],r[i]);if(o)return o}return Fe(t.length,r.length)}function Mc(n){return rT(n)}function rT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=$i(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Hi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return oe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=rT(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${rT(t.fields[s])}`;return i+"}"}(n.mapValue):de()}function Mm(n){switch(Bo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=vg(n);return e?16+Mm(e):16;case 5:return 2*n.stringValue.length;case 6:return Hi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Mm(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Js(r.fields,(o,s)=>{i+=o.length+Mm(s)}),i}(n.mapValue);default:throw de()}}function ik(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function iT(n){return!!n&&"integerValue"in n}function x0(n){return!!n&&"arrayValue"in n}function ok(n){return!!n&&"nullValue"in n}function sk(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Pm(n){return!!n&&"mapValue"in n}function Fk(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ud(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Js(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ud(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ud(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Lk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Ur=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Pm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ud(t)}setAll(e){let t=er.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=ud(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Pm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return di(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Pm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Js(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(ud(this.value))}};function Vk(n){let e=[];return Js(n.fields,(t,r)=>{let i=new er([t]);if(Pm(r)){let o=Vk(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new si(e)}var jr=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,we.min(),we.min(),we.min(),Ur.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,we.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,we.min(),we.min(),Ur.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,we.min(),we.min(),Ur.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ur.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Pc=class{constructor(e,t){this.position=e,this.inclusive=t}};function ak(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=oe.comparator(oe.fromName(s.referenceValue),t.key):r=Nc(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function ck(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!di(n.position[t],e.position[t]))return!1;return!0}var kc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function d9(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Bm=class{},Ut=class n extends Bm{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new sT(e,t,r):t==="array-contains"?new lT(e,r):t==="in"?new uT(e,r):t==="not-in"?new dT(e,r):t==="array-contains-any"?new hT(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new aT(e,r):new cT(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Nc(t,this.value)):t!==null&&Bo(this.value)===Bo(t)&&this.matchesComparison(Nc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Br=class n extends Bm{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Uk(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Uk(n){return n.op==="and"}function jk(n){return h9(n)&&Uk(n)}function h9(n){for(let e of n.filters)if(e instanceof Br)return!1;return!0}function oT(n){if(n instanceof Ut)return n.field.canonicalString()+n.op.toString()+Mc(n.value);if(jk(n))return n.filters.map(e=>oT(e)).join(",");{let e=n.filters.map(t=>oT(t)).join(",");return`${n.op}(${e})`}}function Bk(n,e){return n instanceof Ut?function(r,i){return i instanceof Ut&&r.op===i.op&&r.field.isEqual(i.field)&&di(r.value,i.value)}(n,e):n instanceof Br?function(r,i){return i instanceof Br&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&Bk(s,i.filters[a]),!0):!1}(n,e):void de()}function $k(n){return n instanceof Ut?function(t){return`${t.field.canonicalString()} ${t.op} ${Mc(t.value)}`}(n):n instanceof Br?function(t){return t.op.toString()+" {"+t.getFilters().map($k).join(" ,")+"}"}(n):"Filter"}var sT=class extends Ut{constructor(e,t,r){super(e,t,r),this.key=oe.fromName(r.referenceValue)}matches(e){let t=oe.comparator(e.key,this.key);return this.matchesComparison(t)}},aT=class extends Ut{constructor(e,t){super(e,"in",t),this.keys=Hk("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},cT=class extends Ut{constructor(e,t){super(e,"not-in",t),this.keys=Hk("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Hk(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>oe.fromName(r.referenceValue))}var lT=class extends Ut{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return x0(t)&&gd(t.arrayValue,this.value)}},uT=class extends Ut{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&gd(this.value.arrayValue,t)}},dT=class extends Ut{constructor(e,t){super(e,"not-in",t)}matches(e){if(gd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!gd(this.value.arrayValue,t)}},hT=class extends Ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!x0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>gd(this.value.arrayValue,r))}};var fT=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function lk(n,e=null,t=[],r=[],i=null,o=null,s=null){return new fT(n,e,t,r,i,o,s)}function N0(n){let e=ye(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>oT(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),gg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Mc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Mc(r)).join(",")),e.ue=t}return e.ue}function M0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!d9(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Bk(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ck(n.startAt,e.startAt)&&ck(n.endAt,e.endAt)}function pT(n){return oe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var qs=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function f9(n,e,t,r,i,o,s,a){return new qs(n,e,t,r,i,o,s,a)}function P0(n){return new qs(n)}function uk(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Wk(n){return n.collectionGroup!==null}function dd(n){let e=ye(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Qt(er.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new kc(o,r))}),t.has(er.keyField().canonicalString())||e.ce.push(new kc(er.keyField(),r))}return e.ce}function li(n){let e=ye(n);return e.le||(e.le=p9(e,dd(n))),e.le}function p9(n,e){if(n.limitType==="F")return lk(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new kc(i.field,o)});let t=n.endAt?new Pc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Pc(n.startAt.position,n.startAt.inclusive):null;return lk(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function mT(n,e){let t=n.filters.concat([e]);return new qs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function gT(n,e,t){return new qs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function yg(n,e){return M0(li(n),li(e))&&n.limitType===e.limitType}function qk(n){return`${N0(li(n))}|lt:${n.limitType}`}function Tc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>$k(i)).join(", ")}]`),gg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Mc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Mc(i)).join(",")),`Target(${r})`}(li(n))}; limitType=${n.limitType})`}function _g(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):oe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of dd(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=ak(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,dd(r),i)||r.endAt&&!function(s,a,c){let u=ak(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,dd(r),i))}(n,e)}function m9(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function zk(n){return(e,t)=>{let r=!1;for(let i of dd(n)){let o=g9(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function g9(n,e,t){let r=n.field.isKeyField()?oe.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?Nc(c,u):de()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return de()}}var Wi=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Js(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Ok(this.inner)}size(){return this.innerSize}};var v9=new Rt(oe.comparator);function qi(){return v9}var Gk=new Rt(oe.comparator);function ld(...n){let e=Gk;for(let t of n)e=e.insert(t.key,t);return e}function Kk(n){let e=Gk;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Us(){return hd()}function Yk(){return hd()}function hd(){return new Wi(n=>n.toString(),(n,e)=>n.isEqual(e))}var y9=new Rt(oe.comparator),_9=new Qt(oe.comparator);function ke(...n){let e=_9;for(let t of n)e=e.add(t);return e}var w9=new Qt(Fe);function E9(){return w9}function k0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pd(e)?"-0":e}}function Qk(n){return{integerValue:""+n}}function I9(n,e){return r9(e)?Qk(e):k0(n,e)}var Oc=class{constructor(){this._=void 0}};function T9(n,e,t){return n instanceof Fc?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&R0(o)&&(o=vg(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof zs?Xk(n,e):n instanceof Gs?Zk(n,e):function(i,o){let s=Jk(i,o),a=dk(s)+dk(i.Pe);return iT(s)&&iT(i.Pe)?Qk(a):k0(i.serializer,a)}(n,e)}function b9(n,e,t){return n instanceof zs?Xk(n,e):n instanceof Gs?Zk(n,e):t}function Jk(n,e){return n instanceof Lc?function(r){return iT(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Fc=class extends Oc{},zs=class extends Oc{constructor(e){super(),this.elements=e}};function Xk(n,e){let t=eO(e);for(let r of n.elements)t.some(i=>di(i,r))||t.push(r);return{arrayValue:{values:t}}}var Gs=class extends Oc{constructor(e){super(),this.elements=e}};function Zk(n,e){let t=eO(e);for(let r of n.elements)t=t.filter(i=>!di(i,r));return{arrayValue:{values:t}}}var Lc=class extends Oc{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function dk(n){return pt(n.integerValue||n.doubleValue)}function eO(n){return x0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function C9(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof zs&&i instanceof zs||r instanceof Gs&&i instanceof Gs?xc(r.elements,i.elements,di):r instanceof Lc&&i instanceof Lc?di(r.Pe,i.Pe):r instanceof Fc&&i instanceof Fc}(n.transform,e.transform)}var vT=class{constructor(e,t){this.version=e,this.transformResults=t}},$s=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function km(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Vc=class{};function tO(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new $m(n.key,$s.none()):new Ks(n.key,n.data,$s.none());{let t=n.data,r=Ur.empty(),i=new Qt(er.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new zi(n.key,r,new si(i.toArray()),$s.none())}}function D9(n,e,t){n instanceof Ks?function(i,o,s){let a=i.value.clone(),c=fk(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof zi?function(i,o,s){if(!km(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=fk(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(nO(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function fd(n,e,t,r){return n instanceof Ks?function(o,s,a,c){if(!km(o.precondition,s))return a;let u=o.value.clone(),d=pk(o.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof zi?function(o,s,a,c){if(!km(o.precondition,s))return a;let u=pk(o.fieldTransforms,c,s),d=s.data;return d.setAll(nO(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return km(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function S9(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Jk(r.transform,i||null);o!=null&&(t===null&&(t=Ur.empty()),t.set(r.field,o))}return t||null}function hk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&xc(r,i,(o,s)=>C9(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ks=class extends Vc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},zi=class extends Vc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function nO(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function fk(n,e,t){let r=new Map;Ge(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,b9(s,a,t[i]))}return r}function pk(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,T9(o,s,e))}return r}var $m=class extends Vc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},yT=class extends Vc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var _T=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&D9(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=fd(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=fd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Yk();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=tO(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(we.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ke())}isEqual(e){return this.batchId===e.batchId&&xc(this.mutations,e.mutations,(t,r)=>hk(t,r))&&xc(this.baseMutations,e.baseMutations,(t,r)=>hk(t,r))}},wT=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ge(e.mutations.length===r.length);let i=function(){return y9}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var ET=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var IT=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Lt,Ue;function A9(n){switch(n){default:return de();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function rO(n){if(n===void 0)return Bi("GRPC error has no .code"),L.UNKNOWN;switch(n){case Lt.OK:return L.OK;case Lt.CANCELLED:return L.CANCELLED;case Lt.UNKNOWN:return L.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return L.INTERNAL;case Lt.UNAVAILABLE:return L.UNAVAILABLE;case Lt.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Lt.NOT_FOUND:return L.NOT_FOUND;case Lt.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Lt.ABORTED:return L.ABORTED;case Lt.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Lt.DATA_LOSS:return L.DATA_LOSS;default:return de()}}(Ue=Lt||(Lt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";var mk=null;function R9(){return new TextEncoder}var x9=new Ui([4294967295,4294967295],0);function gk(n){let e=R9().encode(n),t=new LI;return t.update(e),new Uint8Array(t.digest())}function vk(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ui([t,r],0),new Ui([i,o],0)]}var TT=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new js(`Invalid padding: ${t}`);if(r<0)throw new js(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new js(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new js(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Ui.fromNumber(this.Te)}de(e,t,r){let i=e.add(t.multiply(Ui.fromNumber(r)));return i.compare(x9)===1&&(i=new Ui([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let t=gk(e),[r,i]=vk(t);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);if(!this.Ee(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;let t=gk(e),[r,i]=vk(t);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},js=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Hm=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,vd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(we.min(),i,new Rt(Fe),qi(),ke())}},vd=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ke(),ke(),ke())}};var Sc=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Wm=class{constructor(e,t){this.targetId=e,this.me=t}},qm=class{constructor(e,t,r=yn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},zm=class{constructor(){this.fe=0,this.ge=yk(),this.pe=yn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ke(),t=ke(),r=ke();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:de()}}),new vd(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=yk()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ge(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},bT=class{constructor(e){this.Be=e,this.Le=new Map,this.ke=qi(),this.qe=xm(),this.Qe=xm(),this.Ke=new Rt(Fe)}$e(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{let r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:de()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Le.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){let t=e.targetId,r=e.me.count,i=this.Ye(t);if(i){let o=i.target;if(pT(o))if(r===0){let s=new oe(o.path);this.We(t,s,jr.newNoDocument(s,we.min()))}else Ge(r===1);else{let s=this.Ze(t);if(s!==r){let a=this.Xe(e),c=a?this.et(a,e,s):1;if(c!==0){this.He(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,u)}mk?.tt(function(d,f,m,v,w){var R,S,F,W,q,te;let Xe={localCacheCount:d,existenceFilterCount:f.count,databaseId:m.database,projectId:m.projectId},ue=f.unchangedNames;return ue&&(Xe.bloomFilter={applied:w===0,hashCount:(R=ue?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(W=(F=(S=ue?.bits)===null||S===void 0?void 0:S.bitmap)===null||F===void 0?void 0:F.length)!==null&&W!==void 0?W:0,padding:(te=(q=ue?.bits)===null||q===void 0?void 0:q.padding)!==null&&te!==void 0?te:0,mightContain:A=>{var _;return(_=v?.mightContain(A))!==null&&_!==void 0&&_}}),Xe}(s,e.me,this.Be.nt(),a,c))}}}}Xe(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Hi(r).toUint8Array()}catch(c){if(c instanceof Um)return Rc("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new TT(s,i,o)}catch(c){return Rc(c instanceof js?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){let r=this.Be.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Be.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(t,o,null),i++)}),i}it(e){let t=new Map;this.Le.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&pT(a.target)){let c=new oe(a.target.path);this.st(c).has(s)||this.ot(s,c)||this.We(s,c,jr.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ke();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.Ye(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Hm(e,t,this.Ke,this.ke,r);return this.ke=qi(),this.qe=xm(),this.Qe=xm(),this.Ke=new Rt(Fe),i}Ue(e,t){if(!this.je(e))return;let r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;let i=this.ze(e);this.ot(e,t)?i.Fe(t,1):i.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Le.delete(e)}Ze(e){let t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Le.get(e);return t||(t=new zm,this.Le.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new Qt(Fe),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Qt(Fe),this.qe=this.qe.insert(e,t)),t}je(e){let t=this.Ye(e)!==null;return t||K("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){let t=this.Le.get(e);return t&&t.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new zm),this.Be.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}};function xm(){return new Rt(oe.comparator)}function yk(){return new Rt(oe.comparator)}var N9={asc:"ASCENDING",desc:"DESCENDING"},M9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},P9={and:"AND",or:"OR"},CT=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function DT(n,e){return n.useProto3Json||gg(e)?e:{value:e}}function Gm(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iO(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function k9(n,e){return Gm(n,e.toTimestamp())}function ui(n){return Ge(!!n),we.fromTimestamp(function(t){let r=$i(t);return new At(r.seconds,r.nanos)}(n))}function O0(n,e){return ST(n,e).canonicalString()}function ST(n,e){let t=function(i){return new yt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function oO(n){let e=yt.fromString(n);return Ge(uO(e)),e}function AT(n,e){return O0(n.databaseId,e.path)}function HI(n,e){let t=oO(e);if(t.get(1)!==n.databaseId.projectId)throw new Y(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Y(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new oe(aO(t))}function sO(n,e){return O0(n.databaseId,e)}function O9(n){let e=oO(n);return e.length===4?yt.emptyPath():aO(e)}function RT(n){return new yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function aO(n){return Ge(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function _k(n,e,t){return{name:AT(n,e),fields:t.value.mapValue.fields}}function F9(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:de()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(Ge(d===void 0||typeof d=="string"),yn.fromBase64String(d||"")):(Ge(d===void 0||d instanceof Buffer||d instanceof Uint8Array),yn.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let d=u.code===void 0?L.UNKNOWN:rO(u.code);return new Y(d,u.message||"")}(s);t=new qm(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=HI(n,r.document.name),o=ui(r.document.updateTime),s=r.document.createTime?ui(r.document.createTime):we.min(),a=new Ur({mapValue:{fields:r.document.fields}}),c=jr.newFoundDocument(i,o,s,a),u=r.targetIds||[],d=r.removedTargetIds||[];t=new Sc(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=HI(n,r.document),o=r.readTime?ui(r.readTime):we.min(),s=jr.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Sc([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=HI(n,r.document),o=r.removedTargetIds||[];t=new Sc([],o,i,null)}else{if(!("filter"in e))return de();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new IT(i,o),a=r.targetId;t=new Wm(a,s)}}return t}function L9(n,e){let t;if(e instanceof Ks)t={update:_k(n,e.key,e.value)};else if(e instanceof $m)t={delete:AT(n,e.key)};else if(e instanceof zi)t={update:_k(n,e.key,e.data),updateMask:z9(e.fieldMask)};else{if(!(e instanceof yT))return de();t={verify:AT(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Fc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof zs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Gs)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Lc)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw de()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:k9(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:de()}(n,e.precondition)),t}function V9(n,e){return n&&n.length>0?(Ge(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?ui(i.updateTime):ui(o);return s.isEqual(we.min())&&(s=ui(o)),new vT(s,i.transformResults||[])}(t,e))):[]}function U9(n,e){return{documents:[sO(n,e.path)]}}function j9(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=sO(n,i);let o=function(u){if(u.length!==0)return lO(Br.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:bc(m.field),direction:H9(m.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=DT(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ct:t,parent:i}}function B9(n){let e=O9(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ge(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(f){let m=cO(f);return m instanceof Br&&jk(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(m=>function(w){return new kc(Cc(w.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,gg(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(f){let m=!!f.before,v=f.values||[];return new Pc(v,m)}(t.startAt));let u=null;return t.endAt&&(u=function(f){let m=!f.before,v=f.values||[];return new Pc(v,m)}(t.endAt)),f9(e,i,s,o,a,"F",c,u)}function $9(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function cO(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Cc(t.unaryFilter.field);return Ut.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Cc(t.unaryFilter.field);return Ut.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Cc(t.unaryFilter.field);return Ut.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Cc(t.unaryFilter.field);return Ut.create(s,"!=",{nullValue:"NULL_VALUE"});default:return de()}}(n):n.fieldFilter!==void 0?function(t){return Ut.create(Cc(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return de()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Br.create(t.compositeFilter.filters.map(r=>cO(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return de()}}(t.compositeFilter.op))}(n):de()}function H9(n){return N9[n]}function W9(n){return M9[n]}function q9(n){return P9[n]}function bc(n){return{fieldPath:n.canonicalString()}}function Cc(n){return er.fromServerFormat(n.fieldPath)}function lO(n){return n instanceof Ut?function(t){if(t.op==="=="){if(sk(t.value))return{unaryFilter:{field:bc(t.field),op:"IS_NAN"}};if(ok(t.value))return{unaryFilter:{field:bc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(sk(t.value))return{unaryFilter:{field:bc(t.field),op:"IS_NOT_NAN"}};if(ok(t.value))return{unaryFilter:{field:bc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bc(t.field),op:W9(t.op),value:t.value}}}(n):n instanceof Br?function(t){let r=t.getFilters().map(i=>lO(i));return r.length===1?r[0]:{compositeFilter:{op:q9(t.op),filters:r}}}(n):de()}function z9(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function uO(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var yd=class n{constructor(e,t,r,i,o=we.min(),s=we.min(),a=yn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var xT=class{constructor(e){this.ht=e}};function G9(n){let e=B9({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?gT(e,e.limit,"L"):e}var Km=class{constructor(){}dt(e,t){this.Et(e,t),t.At()}Et(e,t){if("nullValue"in e)this.Rt(t,5);else if("booleanValue"in e)this.Rt(t,10),t.Vt(e.booleanValue?1:0);else if("integerValue"in e)this.Rt(t,15),t.Vt(pt(e.integerValue));else if("doubleValue"in e){let r=pt(e.doubleValue);isNaN(r)?this.Rt(t,13):(this.Rt(t,15),pd(r)?t.Vt(0):t.Vt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Rt(t,20),typeof r=="string"&&(r=$i(r)),t.ft(`${r.seconds||""}`),t.Vt(r.nanos||0)}else if("stringValue"in e)this.gt(e.stringValue,t),this.yt(t);else if("bytesValue"in e)this.Rt(t,30),t.wt(Hi(e.bytesValue)),this.yt(t);else if("referenceValue"in e)this.St(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Rt(t,45),t.Vt(r.latitude||0),t.Vt(r.longitude||0)}else"mapValue"in e?Lk(e)?this.Rt(t,Number.MAX_SAFE_INTEGER):Fk(e)?this.bt(e.mapValue,t):(this.Dt(e.mapValue,t),this.yt(t)):"arrayValue"in e?(this.vt(e.arrayValue,t),this.yt(t)):de()}gt(e,t){this.Rt(t,25),this.Ct(e,t)}Ct(e,t){t.ft(e)}Dt(e,t){let r=e.fields||{};this.Rt(t,55);for(let i of Object.keys(r))this.gt(i,t),this.Et(r[i],t)}bt(e,t){var r,i;let o=e.fields||{};this.Rt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Rt(t,15),t.Vt(pt(a)),this.gt(s,t),this.Et(o[s],t)}vt(e,t){let r=e.values||[];this.Rt(t,50);for(let i of r)this.Et(i,t)}St(e,t){this.Rt(t,37),oe.fromName(e).path.forEach(r=>{this.Rt(t,60),this.Ct(r,t)})}Rt(e,t){e.Vt(t)}yt(e){e.Vt(2)}};Km.Ft=new Km;var NT=class{constructor(){this.ln=new MT}addToCollectionParentIndex(e,t){return this.ln.add(t),V.resolve()}getCollectionParents(e,t){return V.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return V.resolve()}deleteFieldIndex(e,t){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,t){return V.resolve()}getDocumentsMatchingTarget(e,t){return V.resolve(null)}getIndexType(e,t){return V.resolve(0)}getFieldIndexes(e,t){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,t){return V.resolve(Ws.min())}getMinOffsetFromCollectionGroup(e,t){return V.resolve(Ws.min())}updateCollectionGroup(e,t,r){return V.resolve()}updateIndexEntries(e,t){return V.resolve()}},MT=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Qt(yt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Qt(yt.comparator)).toArray()}};var Wde=new Uint8Array(0);var wk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};gr.DEFAULT_COLLECTION_PERCENTILE=10,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gr.DEFAULT=new gr(41943040,gr.DEFAULT_COLLECTION_PERCENTILE,gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gr.DISABLED=new gr(-1,0,0);var _d=class n{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new n(0)}static Qn(){return new n(-1)}};function Ek([n,e],[t,r]){let i=Fe(n,t);return i===0?Fe(e,r):i}var PT=class{constructor(e){this.Gn=e,this.buffer=new Qt(Ek),this.zn=0}jn(){return++this.zn}Hn(e){let t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();Ek(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},kT=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){K("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>y(this,null,function*(){this.Jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Hc(t)?K("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield $c(t)}yield this.Yn(3e5)}))}},OT=class{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return V.resolve(A0.oe);let r=new PT(t);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(wk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wk):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,i,o,s,a,c,u,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Ic()<=en.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function K9(n,e){return new OT(n,e)}var FT=class{constructor(){this.changes=new Wi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?V.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var LT=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var VT=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&fd(r.mutation,i,si.empty(),At.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ke()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ke()){let i=Us();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=ld();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Us();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ke()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=qi(),s=hd(),a=function(){return hd()}();return t.forEach((c,u)=>{let d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof zi)?o=o.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),fd(d.mutation,u,d.mutation.getFieldMask(),At.now())):s.set(u.key,si.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>s.set(u,d)),t.forEach((u,d)=>{var f;return a.set(u,new LT(d,(f=s.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=hd(),i=new Rt((s,a)=>s-a),o=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let d=r.get(c)||si.empty();d=a.applyToLocalView(u,d),r.set(c,d);let f=(i.get(a.batchId)||ke()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,d=c.value,f=Yk();d.forEach(m=>{if(!o.has(m)){let v=tO(t.get(m),r.get(m));v!==null&&f.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,f))}return V.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return oe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Wk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):V.resolve(Us()),a=-1,c=o;return s.next(u=>V.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,ke())).next(d=>({batchId:a,changes:Kk(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new oe(t)).next(r=>{let i=ld();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=ld();return this.indexManager.getCollectionParents(e,o).next(a=>V.forEach(a,c=>{let u=function(f,m){return new qs(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,m)=>{s=s.insert(f,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,u)=>{let d=u.getKey();s.get(d)===null&&(s=s.insert(d,jr.newInvalidDocument(d)))});let a=ld();return s.forEach((c,u)=>{let d=o.get(c);d!==void 0&&fd(d.mutation,u,si.empty(),At.now()),_g(t,u)&&(a=a.insert(c,u))}),a})}};var UT=class{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return V.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ui(i.createTime)}}(t)),V.resolve()}getNamedQuery(e,t){return V.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(i){return{name:i.name,query:G9(i.bundledQuery),readTime:ui(i.readTime)}}(t)),V.resolve()}};var jT=class{constructor(){this.overlays=new Rt(oe.comparator),this.dr=new Map}getOverlay(e,t){return V.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Us();return V.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.Tt(e,t,o)}),V.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.dr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.dr.delete(r)),V.resolve()}getOverlaysForCollection(e,t,r){let i=Us(),o=t.length+1,s=new oe(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return V.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Rt((u,d)=>u-d),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let d=o.get(u.largestBatchId);d===null&&(d=Us(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=Us(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return V.resolve(a)}Tt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.dr.get(i.largestBatchId).delete(r.key);this.dr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new ET(t,r));let o=this.dr.get(t);o===void 0&&(o=ke(),this.dr.set(t,o)),this.dr.set(t,o.add(r.key))}};var BT=class{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,V.resolve()}};var wd=class{constructor(){this.Er=new Qt(Vt.Ar),this.Rr=new Qt(Vt.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,t){let r=new Vt(e,t);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new Vt(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){let t=new oe(new yt([])),r=new Vt(t,e),i=new Vt(t,e+1),o=[];return this.Rr.forEachInRange([r,i],s=>{this.gr(s),o.push(s.key)}),o}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){let t=new oe(new yt([])),r=new Vt(t,e),i=new Vt(t,e+1),o=ke();return this.Rr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Vt(e,0),r=this.Er.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Vt=class{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return oe.comparator(e.key,t.key)||Fe(e.br,t.br)}static Vr(e,t){return Fe(e.br,t.br)||oe.comparator(e.key,t.key)}};var $T=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new Qt(Vt.Ar)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new _T(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.vr=this.vr.add(new Vt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(s)}lookupMutationBatch(e,t){return V.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Fr(r),o=i<0?0:i;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Vt(t,0),i=new Vt(t,Number.POSITIVE_INFINITY),o=[];return this.vr.forEachInRange([r,i],s=>{let a=this.Cr(s.br);o.push(a)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Qt(Fe);return t.forEach(i=>{let o=new Vt(i,0),s=new Vt(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([o,s],a=>{r=r.add(a.br)})}),V.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;oe.isDocumentKey(o)||(o=o.child(""));let s=new Vt(new oe(o),0),a=new Qt(Fe);return this.vr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.br)),!0)},s),V.resolve(this.Mr(a))}Mr(e){let t=[];return e.forEach(r=>{let i=this.Cr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ge(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return V.forEach(t.mutations,i=>{let o=new Vt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Bn(e){}containsKey(e,t){let r=new Vt(t,0),i=this.vr.firstAfterOrEqual(r);return V.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){let t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var HT=class{constructor(e){this.Nr=e,this.docs=function(){return new Rt(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return V.resolve(r?r.document.mutableCopy():jr.newInvalidDocument(t))}getEntries(e,t){let r=qi();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():jr.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=qi(),s=t.path,a=new oe(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||e9(Z6(d),r)<=0||(i.has(d.key)||_g(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(e,t,r,i){de()}Br(e,t){return V.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new WT(this)}getSize(e){return V.resolve(this.size)}},WT=class extends FT{constructor(e){super(),this.hr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),V.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}};var qT=class{constructor(e){this.persistence=e,this.Lr=new Wi(t=>N0(t),M0),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.kr=0,this.qr=new wd,this.targetCount=0,this.Qr=_d.qn()}forEachTarget(e,t){return this.Lr.forEach((r,i)=>t(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),V.resolve()}Un(e){this.Lr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Qr=new _d(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,V.resolve()}updateTargetData(e,t){return this.Un(t),V.resolve()}removeTargetData(e,t){return this.Lr.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Lr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Lr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(o).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,t){let r=this.Lr.get(t)||null;return V.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),V.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),V.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),V.resolve()}getMatchingKeysForTargetId(e,t){let r=this.qr.Sr(t);return V.resolve(r)}containsKey(e,t){return V.resolve(this.qr.containsKey(t))}};var Ym=class{constructor(e,t){this.Kr={},this.overlays={},this.$r=new A0(0),this.Ur=!1,this.Ur=!0,this.Wr=new BT,this.referenceDelegate=e(this),this.Gr=new qT(this),this.indexManager=new NT,this.remoteDocumentCache=function(i){return new HT(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new xT(t),this.jr=new UT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new $T(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){K("MemoryPersistence","Starting transaction:",e);let i=new zT(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(o=>this.referenceDelegate.Jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Yr(e,t){return V.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}},zT=class extends tT{constructor(e){super(),this.currentSequenceNumber=e}},GT=class n{constructor(e){this.persistence=e,this.Zr=new wd,this.Xr=null}static ei(e){return new n(e)}get ti(){if(this.Xr)return this.Xr;throw de()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),V.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),V.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(i=>this.ti.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.ti.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.ti,r=>{let i=oe.fromPath(r);return this.ni(e,i).next(o=>{o||t.removeEntry(i,we.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return V.or([()=>V.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}},Qm=class n{constructor(e,t){this.persistence=e,this.ri=new Wi(r=>i9(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=K9(this,t)}static ei(e,t){return new n(e,t)}Hr(){}Jr(e){return V.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){let t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return V.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(o=>o?V.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Br(e,s=>this.ir(e,s,t).next(a=>{a||(r++,o.removeEntry(s,we.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),V.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),V.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Mm(e.data.value)),t}ir(e,t,r){return V.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.ri.get(t);return V.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var KT=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=i}static zi(e,t){let r=ke(),i=ke();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var YT=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var QT=class{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return cS()?8:n9(dn())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Xi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.es(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new YT;return this.ts(e,t,s).next(a=>{if(o.result=a,this.Hi)return this.ns(e,t,s,a.size)})}).next(()=>o.result)}ns(e,t,r,i){return r.documentReadCount<this.Ji?(Ic()<=en.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Tc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),V.resolve()):(Ic()<=en.DEBUG&&K("QueryEngine","Query:",Tc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(Ic()<=en.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Tc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,li(t))):V.resolve())}Xi(e,t){if(uk(t))return V.resolve(null);let r=li(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=gT(t,null,"F"),r=li(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ke(...o);return this.Zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.rs(t,a);return this.ss(t,u,s,c.readTime)?this.Xi(e,gT(t,null,"F")):this.os(e,u,t,c)}))})))}es(e,t,r,i){return uk(t)||i.isEqual(we.min())?V.resolve(null):this.Zi.getDocuments(e,r).next(o=>{let s=this.rs(t,o);return this.ss(t,s,r,i)?V.resolve(null):(Ic()<=en.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Tc(t)),this.os(e,s,t,X6(i,-1)).next(a=>a))})}rs(e,t){let r=new Qt(zk(e));return t.forEach((i,o)=>{_g(e,o)&&(r=r.add(o))}),r}ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ts(e,t,r){return Ic()<=en.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Tc(t)),this.Zi.getDocumentsMatchingQuery(e,t,Ws.min(),r)}os(e,t,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var JT=class{constructor(e,t,r,i){this.persistence=e,this._s=t,this.serializer=i,this.us=new Rt(Fe),this.cs=new Wi(o=>N0(o),M0),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VT(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}};function Y9(n,e,t,r){return new JT(n,e,t,r)}function dO(n,e){return y(this,null,function*(){let t=ye(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=ke();for(let u of i){s.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}for(let u of o){a.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Ts:u,removedBatchIds:s,addedBatchIds:a}))})})})}function Q9(n,e){let t=ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.hs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){let f=u.batch,m=f.keys(),v=V.resolve();return m.forEach(w=>{v=v.next(()=>d.getEntry(c,w)).next(R=>{let S=u.docVersions.get(w);Ge(S!==null),R.version.compareTo(S)<0&&(f.applyToRemoteDocument(R,u),R.isValidDocument()&&(R.setReadTime(u.commitVersion),d.addEntry(R)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ke();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function hO(n){let e=ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function J9(n,e){let t=ye(n),r=e.snapshotVersion,i=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.hs.newChangeBuffer({trackRemovals:!0});i=t.us;let a=[];e.targetChanges.forEach((d,f)=>{let m=i.get(f);if(!m)return;a.push(t.Gr.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.Gr.addMatchingKeys(o,d.addedDocuments,f)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(yn.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),i=i.insert(f,v),function(R,S,F){return R.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(m,v,d)&&a.push(t.Gr.updateTargetData(o,v))});let c=qi(),u=ke();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(X9(o,s,e.documentUpdates).next(d=>{c=d.Is,u=d.ds})),!r.isEqual(we.min())){let d=t.Gr.getLastRemoteSnapshotVersion(o).next(f=>t.Gr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return V.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.us=i,o))}function X9(n,e,t){let r=ke(),i=ke();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=qi();return t.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(we.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):K("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Is:s,ds:i}})}function Z9(n,e){let t=ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function e8(n,e){let t=ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Gr.getTargetData(r,e).next(o=>o?(i=o,V.resolve(i)):t.Gr.allocateTargetId(r).next(s=>(i=new yd(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}function XT(n,e,t){return y(this,null,function*(){let r=ye(n),i=r.us.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Hc(s))throw s;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.us=r.us.remove(e),r.cs.delete(i.target)})}function Ik(n,e,t){let r=ye(n),i=we.min(),o=ke();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,d){let f=ye(c),m=f.cs.get(d);return m!==void 0?V.resolve(f.us.get(m)):f.Gr.getTargetData(u,d)}(r,s,li(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r._s.getDocumentsMatchingQuery(s,e,t?i:we.min(),t?o:ke())).next(a=>(t8(r,m9(e),a),{documents:a,Es:o})))}function t8(n,e,t){let r=n.ls.get(e)||we.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.ls.set(e,r)}var Jm=class{constructor(){this.activeTargetIds=E9()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var ZT=class{constructor(){this._o=new Jm,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Jm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var e0=class{uo(e){}shutdown(){}};var Xm=class{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.To)e(0)}Po(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Nm=null;function WI(){return Nm===null?Nm=function(){return 268435456+Math.round(2147483648*Math.random())}():Nm++,"0x"+Nm.toString(16)}var n8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var t0=class{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}};var vn="WebChannelConnection",n0=class extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${i}/databases/${o}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Oo(t,r,i,o,s){let a=WI(),c=this.No(t,r.toUriEncodedString());K("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(u,o,s),this.Lo(t,c,u,i).then(d=>(K("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw Rc("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}ko(t,r,i,o,s,a){return this.Oo(t,r,i,o,s)}Bo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}No(t,r){let i=n8[t];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,t,r,i){let o=WI();return new Promise((s,a)=>{let c=new VI;c.setWithCredentials(!0),c.listenOnce(UI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case cd.NO_ERROR:let d=c.getResponseJson();K(vn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case cd.TIMEOUT:K(vn,`RPC '${e}' ${o} timed out`),a(new Y(L.DEADLINE_EXCEEDED,"Request time out"));break;case cd.HTTP_ERROR:let f=c.getStatus();if(K(vn,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let w=function(S){let F=S.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(F)>=0?F:L.UNKNOWN}(v.status);a(new Y(w,v.message))}else a(new Y(L.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new Y(L.UNAVAILABLE,"Connection failed."));break;default:de()}}finally{K(vn,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(i);K(vn,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",u,r,15)})}qo(e,t,r){let i=WI(),o=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=$I(),a=BI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Bo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=o.join("");K(vn,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=s.createWebChannel(d,c),m=!1,v=!1,w=new t0({Eo:S=>{v?K(vn,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(m||(K(vn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),K(vn,`RPC '${e}' stream ${i} sending:`,S),f.send(S))},Ao:()=>f.close()}),R=(S,F,W)=>{S.listen(F,q=>{try{W(q)}catch(te){setTimeout(()=>{throw te},0)}})};return R(f,Ec.EventType.OPEN,()=>{v||(K(vn,`RPC '${e}' stream ${i} transport opened.`),w.So())}),R(f,Ec.EventType.CLOSE,()=>{v||(v=!0,K(vn,`RPC '${e}' stream ${i} transport closed`),w.Do())}),R(f,Ec.EventType.ERROR,S=>{v||(v=!0,Rc(vn,`RPC '${e}' stream ${i} transport errored:`,S),w.Do(new Y(L.UNAVAILABLE,"The operation could not be completed")))}),R(f,Ec.EventType.MESSAGE,S=>{var F;if(!v){let W=S.data[0];Ge(!!W);let q=W,te=q?.error||((F=q[0])===null||F===void 0?void 0:F.error);if(te){K(vn,`RPC '${e}' stream ${i} received error:`,te);let Xe=te.status,ue=function(E){let C=Lt[E];if(C!==void 0)return rO(C)}(Xe),A=te.message;ue===void 0&&(ue=L.INTERNAL,A="Unknown error status: "+Xe+" with message "+te.message),v=!0,w.Do(new Y(ue,A)),f.close()}else K(vn,`RPC '${e}' stream ${i} received:`,W),w.vo(W)}}),R(a,jI.STAT_EVENT,S=>{S.stat===Am.PROXY?K(vn,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===Am.NOPROXY&&K(vn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.bo()},0),w}};function qI(){return typeof document<"u"?document:null}function wg(n){return new CT(n,!0)}var Zm=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=i,this.$o=o,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();let t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,t-r);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}};var eg=class{constructor(e,t,r,i,o,s,a,c){this.li=e,this.Yo=r,this.Zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new Zm(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}stop(){return y(this,null,function*(){this.i_()&&(yield this.close(0))})}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}u_(){return y(this,null,function*(){if(this.s_())return this.close(0)})}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}close(e,t){return y(this,null,function*(){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===L.RESOURCE_EXHAUSTED?(Bi(t.toString()),Bi("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.po(t)})}P_(){}auth(){this.state=1;let e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===t&&this.I_(r,i)},r=>{e(()=>{let i=new Y(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(i)})})}I_(e,t){let r=this.T_(this.Xo);this.stream=this.E_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.d_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(()=>y(this,null,function*(){this.state=0,this.start()}))}d_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},r0=class extends eg{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}E_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();let t=F9(this.serializer,e),r=function(o){if(!("targetChange"in o))return we.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?we.min():s.readTime?ui(s.readTime):we.min()}(e);return this.listener.R_(t,r)}V_(e){let t={};t.database=RT(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=pT(c)?{documents:U9(o,c)}:{query:j9(o,c).ct},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=iO(o,s.resumeToken);let u=DT(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(we.min())>0){a.readTime=Gm(o,s.snapshotVersion.toTimestamp());let u=DT(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=$9(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){let t={};t.database=RT(this.serializer),t.removeTarget=e,this.c_(t)}},i0=class extends eg{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,t){return this.connection.qo("Write",e,t)}A_(e){return Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();let t=V9(e.writeResults,e.commitTime),r=ui(e.commitTime);return this.listener.y_(r,t)}w_(){let e={};e.database=RT(this.serializer),this.c_(e)}g_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>L9(this.serializer,r))};this.c_(t)}};var o0=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new Y(L.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Oo(e,ST(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(L.UNKNOWN,o.toString())})}ko(e,t,r,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.ko(e,ST(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(L.UNKNOWN,s.toString())})}terminate(){this.S_=!0,this.connection.terminate()}},s0=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Bi(t),this.C_=!1):K("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}};var a0=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=o,this.Q_.uo(s=>{r.enqueueAndForget(()=>y(this,null,function*(){Xs(this)&&(K("RemoteStore","Restarting streams for network reachability change."),yield function(c){return y(this,null,function*(){let u=ye(c);u.k_.add(4),yield Sd(u),u.K_.set("Unknown"),u.k_.delete(4),yield Eg(u)})}(this))}))}),this.K_=new s0(r,i)}};function Eg(n){return y(this,null,function*(){if(Xs(n))for(let e of n.q_)yield e(!0)})}function Sd(n){return y(this,null,function*(){for(let e of n.q_)yield e(!1)})}function fO(n,e){let t=ye(n);t.L_.has(e.targetId)||(t.L_.set(e.targetId,e),U0(t)?V0(t):Wc(t).s_()&&L0(t,e))}function F0(n,e){let t=ye(n),r=Wc(t);t.L_.delete(e),r.s_()&&pO(t,e),t.L_.size===0&&(r.s_()?r.a_():Xs(t)&&t.K_.set("Unknown"))}function L0(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wc(n).V_(e)}function pO(n,e){n.U_.xe(e),Wc(n).m_(e)}function V0(n){n.U_=new bT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.L_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Wc(n).start(),n.K_.F_()}function U0(n){return Xs(n)&&!Wc(n).i_()&&n.L_.size>0}function Xs(n){return ye(n).k_.size===0}function mO(n){n.U_=void 0}function r8(n){return y(this,null,function*(){n.K_.set("Online")})}function i8(n){return y(this,null,function*(){n.L_.forEach((e,t)=>{L0(n,e)})})}function o8(n,e){return y(this,null,function*(){mO(n),U0(n)?(n.K_.O_(e),V0(n)):n.K_.set("Unknown")})}function s8(n,e,t){return y(this,null,function*(){if(n.K_.set("Online"),e instanceof qm&&e.state===2&&e.cause)try{yield function(i,o){return y(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.L_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.L_.delete(a),i.U_.removeTarget(a))})}(n,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield tg(n,r)}else if(e instanceof Sc?n.U_.$e(e):e instanceof Wm?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(we.min()))try{let r=yield hO(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.U_.it(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.L_.get(u);d&&o.L_.set(u,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let d=o.L_.get(c);if(!d)return;o.L_.set(c,d.withResumeToken(yn.EMPTY_BYTE_STRING,d.snapshotVersion)),pO(o,c);let f=new yd(d.target,c,u,d.sequenceNumber);L0(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){K("RemoteStore","Failed to raise snapshot:",r),yield tg(n,r)}})}function tg(n,e,t){return y(this,null,function*(){if(!Hc(e))throw e;n.k_.add(1),yield Sd(n),n.K_.set("Offline"),t||(t=()=>hO(n.localStore)),n.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){K("RemoteStore","Retrying IndexedDB access"),yield t(),n.k_.delete(1),yield Eg(n)}))})}function gO(n,e){return e().catch(t=>tg(n,t,e))}function Ig(n){return y(this,null,function*(){let e=ye(n),t=$o(e),r=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;a8(e);)try{let i=yield Z9(e.localStore,r);if(i===null){e.B_.length===0&&t.a_();break}r=i.batchId,c8(e,i)}catch(i){yield tg(e,i)}vO(e)&&yO(e)})}function a8(n){return Xs(n)&&n.B_.length<10}function c8(n,e){n.B_.push(e);let t=$o(n);t.s_()&&t.f_&&t.g_(e.mutations)}function vO(n){return Xs(n)&&!$o(n).i_()&&n.B_.length>0}function yO(n){$o(n).start()}function l8(n){return y(this,null,function*(){$o(n).w_()})}function u8(n){return y(this,null,function*(){let e=$o(n);for(let t of n.B_)e.g_(t.mutations)})}function d8(n,e,t){return y(this,null,function*(){let r=n.B_.shift(),i=wT.from(r,e,t);yield gO(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ig(n)})}function h8(n,e){return y(this,null,function*(){e&&$o(n).f_&&(yield function(r,i){return y(this,null,function*(){if(function(s){return A9(s)&&s!==L.ABORTED}(i.code)){let o=r.B_.shift();$o(r).__(),yield gO(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Ig(r)}})}(n,e)),vO(n)&&yO(n)})}function Tk(n,e){return y(this,null,function*(){let t=ye(n);t.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");let r=Xs(t);t.k_.add(3),yield Sd(t),r&&t.K_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),yield Eg(t)})}function f8(n,e){return y(this,null,function*(){let t=ye(n);e?(t.k_.delete(2),yield Eg(t)):e||(t.k_.add(2),yield Sd(t),t.K_.set("Unknown"))})}function Wc(n){return n.W_||(n.W_=function(t,r,i){let o=ye(t);return o.b_(),new r0(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Ro:r8.bind(null,n),mo:i8.bind(null,n),po:o8.bind(null,n),R_:s8.bind(null,n)}),n.q_.push(e=>y(this,null,function*(){e?(n.W_.__(),U0(n)?V0(n):n.K_.set("Unknown")):(yield n.W_.stop(),mO(n))}))),n.W_}function $o(n){return n.G_||(n.G_=function(t,r,i){let o=ye(t);return o.b_(),new i0(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:l8.bind(null,n),po:h8.bind(null,n),p_:u8.bind(null,n),y_:d8.bind(null,n)}),n.q_.push(e=>y(this,null,function*(){e?(n.G_.__(),yield Ig(n)):(yield n.G_.stop(),n.B_.length>0&&(K("RemoteStore",`Stopping write stream with ${n.B_.length} pending writes`),n.B_=[]))}))),n.G_}var c0=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function j0(n,e){if(Bi("AsyncQueue",`${e}: ${n}`),Hc(n))return new Y(L.UNAVAILABLE,`${e}: ${n}`);throw n}var ng=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||oe.comparator(t.key,r.key):(t,r)=>oe.comparator(t.key,r.key),this.keyedMap=ld(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var rg=class{constructor(){this.z_=new Rt(oe.comparator)}track(e){let t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):de():this.z_=this.z_.insert(t,e)}j_(){let e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}},Uc=class n{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,ng.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var l0=class{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}},u0=class{constructor(){this.queries=bk(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){let i=ye(t),o=i.queries;i.queries=bk(),o.forEach((s,a)=>{for(let c of a.J_)c.onError(r)})})(this,new Y(L.ABORTED,"Firestore shutting down"))}};function bk(){return new Wi(n=>qk(n),yg)}function _O(n,e){return y(this,null,function*(){let t=ye(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Y_()&&e.Z_()&&(r=2):(o=new l0,r=e.Z_()?0:1);try{switch(r){case 0:o.H_=yield t.onListen(i,!0);break;case 1:o.H_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=j0(s,`Initialization of query '${Tc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.J_.push(e),e.ea(t.onlineState),o.H_&&e.ta(o.H_)&&B0(t)})}function wO(n,e){return y(this,null,function*(){let t=ye(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.J_.indexOf(e);s>=0&&(o.J_.splice(s,1),o.J_.length===0?i=e.Z_()?0:1:!o.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function p8(n,e){let t=ye(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.J_)a.ta(i)&&(r=!0);s.H_=i}}r&&B0(t)}function m8(n,e,t){let r=ye(n),i=r.queries.get(e);if(i)for(let o of i.J_)o.onError(t);r.queries.delete(e)}function B0(n){n.X_.forEach(e=>{e.next()})}var d0,Ck;(Ck=d0||(d0={})).na="default",Ck.Cache="cache";var ig=class{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Uc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;let r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;let t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=Uc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==d0.Cache}};var og=class{constructor(e){this.key=e}},sg=class{constructor(e){this.key=e}},h0=class{constructor(e,t){this.query=e,this.Ea=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=ke(),this.mutatedKeys=ke(),this.Va=zk(e),this.ma=new ng(this.Va)}get fa(){return this.Ea}ga(e,t){let r=t?t.pa:new rg,i=t?t.ma:this.ma,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let m=i.get(d),v=_g(this.query,f)?f:null,w=!!m&&this.mutatedKeys.has(m.key),R=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),S=!1;m&&v?m.data.isEqual(v.data)?w!==R&&(r.track({type:3,doc:v}),S=!0):this.ya(m,v)||(r.track({type:2,doc:v}),S=!0,(c&&this.Va(v,c)>0||u&&this.Va(v,u)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),S=!0):m&&!v&&(r.track({type:1,doc:m}),S=!0,(c||u)&&(a=!0)),S&&(v?(s=s.add(v),o=R?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{ma:s,pa:r,ss:a,mutatedKeys:o}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;let s=e.pa.j_();s.sort((d,f)=>function(v,w){let R=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de()}};return R(v)-R(w)}(d.type,f.type)||this.Va(d.doc,f.doc)),this.wa(r),i=i!=null&&i;let a=t&&!i?this.Sa():[],c=this.Ra.size===0&&this.current&&!i?1:0,u=c!==this.Aa;return this.Aa=c,s.length!==0||u?{snapshot:new Uc(this.query,e.ma,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new rg,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.Ea=this.Ea.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ea=this.Ea.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];let e=this.Ra;this.Ra=ke(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});let t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new sg(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new og(r))}),t}va(e){this.Ea=e.Es,this.Ra=ke();let t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Uc.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}},f0=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},p0=class{constructor(e){this.key=e,this.Fa=!1}},m0=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ma={},this.xa=new Wi(a=>qk(a),yg),this.Oa=new Map,this.Na=new Set,this.Ba=new Rt(oe.comparator),this.La=new Map,this.ka=new wd,this.qa={},this.Qa=new Map,this.Ka=_d.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}};function g8(n,e,t=!0){return y(this,null,function*(){let r=DO(n),i,o=r.xa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Ca()):i=yield EO(r,e,t,!0),i})}function v8(n,e){return y(this,null,function*(){let t=DO(n);yield EO(t,e,!0,!1)})}function EO(n,e,t,r){return y(this,null,function*(){let i=yield e8(n.localStore,li(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield y8(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&fO(n.remoteStore,i),a})}function y8(n,e,t,r,i){return y(this,null,function*(){n.Ua=(f,m,v)=>function(R,S,F,W){return y(this,null,function*(){let q=S.view.ga(F);q.ss&&(q=yield Ik(R.localStore,S.query,!1).then(({documents:A})=>S.view.ga(A,q)));let te=W&&W.targetChanges.get(S.targetId),Xe=W&&W.targetMismatches.get(S.targetId)!=null,ue=S.view.applyChanges(q,R.isPrimaryClient,te,Xe);return Sk(R,S.targetId,ue.ba),ue.snapshot})}(n,f,m,v);let o=yield Ik(n.localStore,e,!0),s=new h0(e,o.Es),a=s.ga(o.documents),c=vd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,c);Sk(n,t,u.ba);let d=new f0(e,t,s);return n.xa.set(e,d),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),u.snapshot})}function _8(n,e,t){return y(this,null,function*(){let r=ye(n),i=r.xa.get(e),o=r.Oa.get(i.targetId);if(o.length>1)return r.Oa.set(i.targetId,o.filter(s=>!yg(s,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield XT(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&F0(r.remoteStore,i.targetId),g0(r,i.targetId)}).catch($c))):(g0(r,i.targetId),yield XT(r.localStore,i.targetId,!0))})}function w8(n,e){return y(this,null,function*(){let t=ye(n),r=t.xa.get(e),i=t.Oa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),F0(t.remoteStore,r.targetId))})}function E8(n,e,t){return y(this,null,function*(){let r=A8(n);try{let i=yield function(s,a){let c=ye(s),u=At.now(),d=a.reduce((v,w)=>v.add(w.key),ke()),f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let w=qi(),R=ke();return c.hs.getEntries(v,d).next(S=>{w=S,w.forEach((F,W)=>{W.isValidDocument()||(R=R.add(F))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,w)).next(S=>{f=S;let F=[];for(let W of a){let q=S9(W,f.get(W.key).overlayedDocument);q!=null&&F.push(new zi(W.key,q,Vk(q.value.mapValue),$s.exists(!0)))}return c.mutationQueue.addMutationBatch(v,u,F,a)}).next(S=>{m=S;let F=S.applyToLocalDocumentSet(f,R);return c.documentOverlayCache.saveOverlays(v,S.batchId,F)})}).then(()=>({batchId:m.batchId,changes:Kk(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.qa[s.currentUser.toKey()];u||(u=new Rt(Fe)),u=u.insert(a,c),s.qa[s.currentUser.toKey()]=u}(r,i.batchId,t),yield Ad(r,i.changes),yield Ig(r.remoteStore)}catch(i){let o=j0(i,"Failed to persist write");t.reject(o)}})}function IO(n,e){return y(this,null,function*(){let t=ye(n);try{let r=yield J9(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.La.get(o);s&&(Ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Fa=!0:i.modifiedDocuments.size>0?Ge(s.Fa):i.removedDocuments.size>0&&(Ge(s.Fa),s.Fa=!1))}),yield Ad(t,r,e)}catch(r){yield $c(r)}})}function Dk(n,e,t){let r=ye(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.xa.forEach((o,s)=>{let a=s.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=ye(s);c.onlineState=a;let u=!1;c.queries.forEach((d,f)=>{for(let m of f.J_)m.ea(a)&&(u=!0)}),u&&B0(c)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function I8(n,e,t){return y(this,null,function*(){let r=ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.La.get(e),o=i&&i.key;if(o){let s=new Rt(oe.comparator);s=s.insert(o,jr.newNoDocument(o,we.min()));let a=ke().add(o),c=new Hm(we.min(),new Map,new Rt(Fe),s,a);yield IO(r,c),r.Ba=r.Ba.remove(o),r.La.delete(e),$0(r)}else yield XT(r.localStore,e,!1).then(()=>g0(r,e,t)).catch($c)})}function T8(n,e){return y(this,null,function*(){let t=ye(n),r=e.batch.batchId;try{let i=yield Q9(t.localStore,e);bO(t,r,null),TO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ad(t,i)}catch(i){yield $c(i)}})}function b8(n,e,t){return y(this,null,function*(){let r=ye(n);try{let i=yield function(s,a){let c=ye(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(Ge(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);bO(r,e,t),TO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ad(r,i)}catch(i){yield $c(i)}})}function TO(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function bO(n,e,t){let r=ye(n),i=r.qa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function g0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||CO(n,r)})}function CO(n,e){n.Na.delete(e.path.canonicalString());let t=n.Ba.get(e);t!==null&&(F0(n.remoteStore,t),n.Ba=n.Ba.remove(e),n.La.delete(t),$0(n))}function Sk(n,e,t){for(let r of t)r instanceof og?(n.ka.addReference(r.key,e),C8(n,r)):r instanceof sg?(K("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||CO(n,r.key)):de()}function C8(n,e){let t=e.key,r=t.path.canonicalString();n.Ba.get(t)||n.Na.has(r)||(K("SyncEngine","New document in limbo: "+t),n.Na.add(r),$0(n))}function $0(n){for(;n.Na.size>0&&n.Ba.size<n.maxConcurrentLimboResolutions;){let e=n.Na.values().next().value;n.Na.delete(e);let t=new oe(yt.fromString(e)),r=n.Ka.next();n.La.set(r,new p0(t)),n.Ba=n.Ba.insert(t,r),fO(n.remoteStore,new yd(li(P0(t.path)),r,"TargetPurposeLimboResolution",A0.oe))}}function Ad(n,e,t){return y(this,null,function*(){let r=ye(n),i=[],o=[],s=[];r.xa.isEmpty()||(r.xa.forEach((a,c)=>{s.push(r.Ua(c,e,t).then(u=>{var d;if((u||t)&&r.isPrimaryClient){let f=u?!u.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);let f=KT.zi(c.targetId,u);o.push(f)}}))}),yield Promise.all(s),r.Ma.R_(i),yield function(c,u){return y(this,null,function*(){let d=ye(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>V.forEach(u,m=>V.forEach(m.Wi,v=>d.persistence.referenceDelegate.addReference(f,m.targetId,v)).next(()=>V.forEach(m.Gi,v=>d.persistence.referenceDelegate.removeReference(f,m.targetId,v)))))}catch(f){if(!Hc(f))throw f;K("LocalStore","Failed to update sequence numbers: "+f)}for(let f of u){let m=f.targetId;if(!f.fromCache){let v=d.us.get(m),w=v.snapshotVersion,R=v.withLastLimboFreeSnapshotVersion(w);d.us=d.us.insert(m,R)}}})}(r.localStore,o))})}function D8(n,e){return y(this,null,function*(){let t=ye(n);if(!t.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());let r=yield dO(t.localStore,e);t.currentUser=e,function(o,s){o.Qa.forEach(a=>{a.forEach(c=>{c.reject(new Y(L.CANCELLED,s))})}),o.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ad(t,r.Ts)}})}function S8(n,e){let t=ye(n),r=t.La.get(e);if(r&&r.Fa)return ke().add(r.key);{let i=ke(),o=t.Oa.get(e);if(!o)return i;for(let s of o){let a=t.xa.get(s);i=i.unionWith(a.view.fa)}return i}}function DO(n){let e=ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=IO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=S8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=I8.bind(null,e),e.Ma.R_=p8.bind(null,e.eventManager),e.Ma.Wa=m8.bind(null,e.eventManager),e}function A8(n){let e=ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=T8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=b8.bind(null,e),e}var SO=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return y(this,null,function*(){this.serializer=wg(t.databaseInfo.databaseId),this.sharedClientState=this.za(t),this.persistence=this.ja(t),yield this.persistence.start(),this.localStore=this.Ha(t),this.gcScheduler=this.Ja(t,this.localStore),this.indexBackfillerScheduler=this.Ya(t,this.localStore)})}Ja(t,r){return null}Ya(t,r){return null}Ha(t){return Y9(this.persistence,new QT,t.initialUser,this.serializer)}ja(t){return new Ym(GT.ei,this.serializer)}za(t){return new ZT}terminate(){return y(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),v0=class extends SO{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){Ge(this.persistence.referenceDelegate instanceof Qm);let r=this.persistence.referenceDelegate.garbageCollector;return new kT(r,e.asyncQueue,t)}ja(e){let t=this.cacheSizeBytes!==void 0?gr.withCacheSize(this.cacheSizeBytes):gr.DEFAULT;return new Ym(r=>Qm.ei(r,t),this.serializer)}};var R8=(()=>{class n{initialize(t,r){return y(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Dk(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=D8.bind(null,this.syncEngine),yield f8(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new u0}()}createDatastore(t){let r=wg(t.databaseInfo.databaseId),i=function(s){return new n0(s)}(t.databaseInfo);return function(s,a,c,u){return new o0(s,a,c,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new a0(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>Dk(this.syncEngine,r,0),function(){return Xm.p()?new Xm:new e0}())}createSyncEngine(t,r){return function(o,s,a,c,u,d,f){let m=new m0(o,s,a,c,u,d);return f&&(m.$a=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return y(this,null,function*(){var t,r;yield function(o){return y(this,null,function*(){let s=ye(o);K("RemoteStore","RemoteStore shutting down."),s.k_.add(5),yield Sd(s),s.Q_.shutdown(),s.K_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var ag=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Bi("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var y0=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Yt.UNAUTHENTICATED,this.clientId=Fm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>y(this,null,function*(){K("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(K("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=j0(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function zI(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield dO(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function Ak(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield x8(n);K("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Tk(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Tk(e.remoteStore,i)),n._onlineComponents=e})}function x8(n){return y(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{yield zI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===L.FAILED_PRECONDITION||i.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Rc("Error using user provided cache. Falling back to memory cache: "+t),yield zI(n,new SO)}}else K("FirestoreClient","Using default OfflineComponentProvider"),yield zI(n,new v0(void 0));return n._offlineComponents})}function AO(n){return y(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),yield Ak(n,n._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),yield Ak(n,new R8))),n._onlineComponents})}function N8(n){return AO(n).then(e=>e.syncEngine)}function _0(n){return y(this,null,function*(){let e=yield AO(n),t=e.eventManager;return t.onListen=g8.bind(null,e.syncEngine),t.onUnlisten=_8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=v8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=w8.bind(null,e.syncEngine),t})}function M8(n,e,t={}){let r=new ai;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(o,s,a,c,u){let d=new ag({next:m=>{d.eu(),s.enqueueAndForget(()=>wO(o,f)),m.fromCache&&c.source==="server"?u.reject(new Y(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new ig(a,d,{includeMetadataChanges:!0,ua:!0});return _O(o,f)}(yield _0(n),n.asyncQueue,e,t,r)})),r.promise}function RO(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Rk=new Map;function xO(n,e,t){if(!t)throw new Y(L.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function P8(n,e,t,r){if(e===!0&&r===!0)throw new Y(L.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function xk(n){if(!oe.isDocumentKey(n))throw new Y(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Nk(n){if(oe.isDocumentKey(n))throw new Y(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Tg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":de()}function Uo(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Y(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Tg(n);throw new Y(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var cg=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}P8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RO((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Y(L.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Y(L.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Y(L.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},jc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new GI;switch(r.type){case"firstParty":return new JI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return y(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=Rk.get(t);r&&(K("ComponentProvider","Removing Datastore"),Rk.delete(t),r.terminate())}(this),Promise.resolve()}};function NO(n,e,t,r={}){var i;let o=(n=Uo(n,jc))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Rc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Yt.MOCK_USER;else{a=ya(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Y(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Yt(u)}n._authCredentials=new KI(new Om(a,c))}}var Ys=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Hn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},jo=class n extends Ys{constructor(e,t,r){super(e,t,P0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Hn(this.firestore,null,new oe(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function MO(n,e,...t){if(n=Ve(n),xO("collection","path",e),n instanceof jc){let r=yt.fromString(e,...t);return Nk(r),new jo(n,null,r)}{if(!(n instanceof Hn||n instanceof jo))throw new Y(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(yt.fromString(e,...t));return Nk(r),new jo(n.firestore,null,r)}}function PO(n,e,...t){if(n=Ve(n),arguments.length===1&&(e=Fm.newId()),xO("doc","path",e),n instanceof jc){let r=yt.fromString(e,...t);return xk(r),new Hn(n,null,new oe(r))}{if(!(n instanceof Hn||n instanceof jo))throw new Y(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(yt.fromString(e,...t));return xk(r),new Hn(n.firestore,n instanceof jo?n.converter:null,new oe(r))}}var lg=class{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new Zm(this,"async_queue_retry"),this.fu=()=>{let r=qI();r&&K("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;let t=qI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;let t=qI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});let t=new ai;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}wu(){return y(this,null,function*(){if(this.Iu.length!==0){try{yield this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Hc(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}})}yu(e){let t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Bi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);let i=c0.createAndSchedule(this,e,t,r,o=>this.Su(o));return this.Eu.push(i),i}pu(){this.Au&&de()}verifyOperationInProgress(){}bu(){return y(this,null,function*(){let e;do e=this.gu,yield e;while(e!==this.gu)})}Du(e){for(let t of this.Eu)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Eu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){let t=this.Eu.indexOf(e);this.Eu.splice(t,1)}};function Mk(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Qs=class extends jc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new lg,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return y(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new lg(e),this._firestoreClient=void 0,yield e}})}};function kO(n,e){let t=typeof n=="object"?n:$t(),r=typeof n=="string"?n:e||"(default)",i=Bt(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=lo("firestore");o&&NO(i,...o)}return i}function H0(n){if(n._terminated)throw new Y(L.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||k8(n),n._firestoreClient}function k8(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,u,d){return new nT(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,RO(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new y0(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var Ed=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(yn.fromBase64String(e))}catch(t){throw new Y(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Id=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Y(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ug=class{constructor(e){this._methodName=e}};var Td=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Y(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Y(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}};var bd=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var O8=/^__.*__$/,w0=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new zi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ks(e,this.data,t,this.fieldTransforms)}};function OO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de()}}var E0=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Fu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Bu(e),i}Lu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return dg(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(OO(this.Mu)&&O8.test(e))throw this.qu('Document fields cannot begin and end with "__"')}},I0=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||wg(e)}$u(e,t,r,i=!1){return new E0({Mu:e,methodName:t,Ku:r,path:er.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function FO(n){let e=n._freezeSettings(),t=wg(n._databaseId);return new I0(n._databaseId,!!e.ignoreUndefinedProperties,t)}function F8(n,e,t,r,i,o={}){let s=n.$u(o.merge||o.mergeFields?2:0,e,t,i);UO("Data must be an object, but it was:",s,r);let a=LO(r,s),c,u;if(o.merge)c=new si(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let m=V8(e,f,t);if(!s.contains(m))throw new Y(L.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);j8(d,m)||d.push(m)}c=new si(d),u=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=s.fieldTransforms;return new w0(new Ur(a),c,u)}function L8(n,e,t,r=!1){return W0(t,n.$u(r?4:3,e))}function W0(n,e){if(VO(n=Ve(n)))return UO("Unsupported field value:",e,n),LO(n,e);if(n instanceof ug)return function(r,i){if(!OO(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=W0(a,i.ku(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Ve(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return I9(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=At.fromDate(r);return{timestampValue:Gm(i.serializer,o)}}if(r instanceof At){let o=new At(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gm(i.serializer,o)}}if(r instanceof Td)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ed)return{bytesValue:iO(i.serializer,r._byteString)};if(r instanceof Hn){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.qu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:O0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof bd)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.qu("VectorValues must only contain numeric values.");return k0(a.serializer,c)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${Tg(r)}`)}(n,e)}function LO(n,e){let t={};return Ok(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Js(n,(r,i)=>{let o=W0(i,e.Ou(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function VO(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof At||n instanceof Td||n instanceof Ed||n instanceof Hn||n instanceof ug||n instanceof bd)}function UO(n,e,t){if(!VO(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Tg(t);throw r==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+r)}}function V8(n,e,t){if((e=Ve(e))instanceof Id)return e._internalPath;if(typeof e=="string")return jO(n,e);throw dg("Field path arguments must be of type string or ",n,!1,void 0,t)}var U8=new RegExp("[~\\*/\\[\\]]");function jO(n,e,t){if(e.search(U8)>=0)throw dg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Id(...e.split("."))._internalPath}catch{throw dg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function dg(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Y(L.INVALID_ARGUMENT,a+n+c)}function j8(n,e){return n.some(t=>t.isEqual(e))}var hg=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new T0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(q0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},T0=class extends hg{data(){return super.data()}};function q0(n,e){return typeof e=="string"?jO(n,e):e instanceof Id?e._internalPath:e._delegate._internalPath}function BO(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Y(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Cd=class{},b0=class extends Cd{};function $O(n,e,...t){let r=[];e instanceof Cd&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof C0).length,a=o.filter(c=>c instanceof fg).length;if(s>1||s>0&&a>0)throw new Y(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var fg=class n extends b0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return WO(e._query,t),new Ys(e.firestore,e.converter,mT(e._query,t))}_parse(e){let t=FO(e.firestore);return function(o,s,a,c,u,d,f){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Y(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){kk(f,d);let v=[];for(let w of f)v.push(Pk(c,o,w));m={arrayValue:{values:v}}}else m=Pk(c,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||kk(f,d),m=L8(a,s,f,d==="in"||d==="not-in");return Ut.create(u,d,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function HO(n,e,t){let r=e,i=q0("where",n);return fg._create(i,r,t)}var C0=class n extends Cd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Br.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)WO(s,c),s=mT(s,c)}(e._query,t),new Ys(e.firestore,e.converter,mT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function Pk(n,e,t){if(typeof(t=Ve(t))=="string"){if(t==="")throw new Y(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wk(e)&&t.indexOf("/")!==-1)throw new Y(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(yt.fromString(t));if(!oe.isDocumentKey(r))throw new Y(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ik(n,new oe(r))}if(t instanceof Hn)return ik(n,t._key);throw new Y(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tg(t)}.`)}function kk(n,e){if(!Array.isArray(n)||n.length===0)throw new Y(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function WO(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Y(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var D0=class{convertValue(e,t="none"){switch(Bo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw de()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Js(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>pt(s.doubleValue));return new bd(o)}convertGeoPoint(e){return new Td(pt(e.latitude),pt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=vg(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(md(e));default:return null}}convertTimestamp(e){let t=$i(e);return new At(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=yt.fromString(e);Ge(uO(r));let i=new jm(r.get(1),r.get(3)),o=new oe(r.popFirst(5));return i.isEqual(t)||Bi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function B8(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Bs=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},pg=class extends hg{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ac(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(q0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Ac=class extends pg{data(e={}){return super.data(e)}},mg=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Bs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ac(this._firestore,this._userDataWriter,r.key,r,new Bs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Y(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Ac(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Bs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Ac(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Bs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,d=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:$8(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function $8(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de()}}var Dd=class extends D0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ed(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hn(this.firestore,null,t)}};function qO(n){n=Uo(n,Ys);let e=Uo(n.firestore,Qs),t=H0(e),r=new Dd(e);return BO(n._query),M8(t,n._query).then(i=>new mg(e,r,n,i))}function zO(n,e,t){n=Uo(n,Hn);let r=Uo(n.firestore,Qs),i=B8(n.converter,e,t);return H8(r,[F8(FO(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,$s.none())])}function z0(n,...e){var t,r,i;n=Ve(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Mk(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Mk(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,u,d;if(n instanceof Hn)u=Uo(n.firestore,Qs),d=P0(n._key.path),c={next:f=>{e[s]&&e[s](W8(u,n,f))},error:e[s+1],complete:e[s+2]};else{let f=Uo(n,Ys);u=Uo(f.firestore,Qs),d=f._query;let m=new Dd(u);c={next:v=>{e[s]&&e[s](new mg(u,m,f,v))},error:e[s+1],complete:e[s+2]},BO(n._query)}return function(m,v,w,R){let S=new ag(R),F=new ig(v,S,w);return m.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return _O(yield _0(m),F)})),()=>{S.eu(),m.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return wO(yield _0(m),F)}))}}(H0(u),d,a,c)}function H8(n,e){return function(r,i){let o=new ai;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return E8(yield N8(r),i,o)})),o.promise}(H0(n),e)}function W8(n,e,t){let r=t.docs.get(e._key),i=new Dd(n);return new pg(n,i,e._key,r,new Bs(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Bc=i})(Fn),Tt(new It("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Qs(new YI(r.getProvider("auth-internal")),new ZI(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Y(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jm(u.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ie(ZP,"4.7.6",e),ie(ZP,"4.7.6","esm2017")})();var bg=function(){return bg=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},bg.apply(this,arguments)};var G8={includeMetadataChanges:!1};function GO(n,e){return e===void 0&&(e=G8),new he(function(t){var r=z0(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function KO(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:bg(bg({},r),(t={},t[e.idField]=n.id,t))}function YO(n){return GO(n,{includeMetadataChanges:!0}).pipe(Q(function(e){return e.docs}))}function QO(n,e){return e===void 0&&(e={}),YO(n).pipe(Q(function(t){return t.map(function(r){return KO(r,e)})}))}var Zs=class{constructor(e){return e}},JO="firestore",G0=class{constructor(){return Ft(JO)}};var K0=new $("angularfire2.firestore-instances");function K8(n,e){let t=Wt(JO,n,e);return t&&new Zs(t)}function Y8(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Zs(r)}}var Q8={provide:G0,deps:[[new Ie,K0]]},J8={provide:Zs,useFactory:K8,deps:[[new Ie,K0],vt]};function XO(n,...e){return ie("angularfire",ft.full,"fst"),it([J8,Q8,{provide:K0,useFactory:Y8(n),multi:!0,deps:[pe,Ae,St,Pt,[new Ie,Vr],[new Ie,mr],...e]}])}var vr=We(QO,!0);var yr=We(MO,!0,2);var Y0=We(PO,!0,2);var Q0=We(qO,!0);var ZO=We(kO,!0);var e1=We($O,!0,2);var J0=We(zO,!0,2);var t1=We(HO,!0,2);var n1="@firebase/database",r1="1.0.11";var Yb="";function X8(n){Yb=n}var ob=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),qt(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Rh(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var sb=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Kr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var O1=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ob(e)}}catch{}return new sb},ta=O1("localStorage"),ab=O1("sessionStorage");var Kc=new ir("@firebase/database"),Z8=function(){let n=1;return function(){return n++}}(),F1=function(n){let e=pS(n),t=new dS;t.update(e);let r=t.digest();return Sh.encodeByteArray(r)},Bd=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Bd.apply(null,r):typeof r=="object"?e+=qt(r):e+=r,e+=" "}return e},na=null,i1=!0,eK=function(n,e){G(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(Kc.logLevel=en.VERBOSE,na=Kc.log.bind(Kc),e&&ab.set("logging_enabled",!0)):typeof n=="function"?na=n:(na=null,ab.remove("logging_enabled"))},_n=function(...n){if(i1===!0&&(i1=!1,na===null&&ab.get("logging_enabled")===!0&&eK(!0)),na){let e=Bd.apply(null,n);na(e)}},$d=function(n){return function(...e){_n(n,...e)}},cb=function(...n){let e="FIREBASE INTERNAL ERROR: "+Bd(...n);Kc.error(e)},Ki=function(...n){let e=`FIREBASE FATAL ERROR: ${Bd(...n)}`;throw Kc.error(e),new Error(e)},tr=function(...n){let e="FIREBASE WARNING: "+Bd(...n);Kc.warn(e)},tK=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&tr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},L1=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},nK=function(n){if(zr()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Qc="[MIN_NAME]",ra="[MAX_NAME]",rl=function(n,e){if(n===e)return 0;if(n===Qc||e===ra)return-1;if(e===Qc||n===ra)return 1;{let t=o1(n),r=o1(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},rK=function(n,e){return n===e?0:n<e?-1:1},Rd=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+qt(e))},Qb=function(n){if(typeof n!="object"||n===null)return qt(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=qt(e[r]),t+=":",t+=Qb(n[e[r]]);return t+="}",t},V1=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function Er(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var U1=function(n){G(!L1(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,o,s,a,c;n===0?(o=0,s=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=a+r,s=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(o=0,s=Math.round(n/Math.pow(2,1-r-t))));let u=[];for(c=t;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);for(c=e;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);u.push(i?1:0),u.reverse();let d=u.join(""),f="";for(c=0;c<64;c+=8){let m=parseInt(d.substr(c,8),2).toString(16);m.length===1&&(m="0"+m),f=f+m}return f.toLowerCase()},iK=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},oK=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var sK=new RegExp("^-?(0*)\\d{1,10}$"),aK=-2147483648,cK=2147483647,o1=function(n){if(sK.test(n)){let e=Number(n);if(e>=aK&&e<=cK)return e}return null},Hd=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw tr("Exception was thrown by user callback.",t),e},Math.floor(0))}},lK=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},kd=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var lb=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){tr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var ub=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(_n("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',tr(e)}},Od=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),Dg="5",j1="v",B1="s",$1="r",H1="f",W1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,q1="ls",z1="p",db="ac",G1="websocket",K1="long_polling";var Sg=class{constructor(e,t,r,i,o=!1,s="",a=!1,c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ta.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ta.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function uK(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function Y1(n,e,t){G(typeof e=="string","typeof type must == string"),G(typeof t=="object","typeof params must == object");let r;if(e===G1)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===K1)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);uK(n)&&(t.ns=n.namespace);let i=[];return Er(t,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var hb=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Kr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return iS(this.counters_)}};var X0={},Z0={};function Jb(n){let e=n.toString();return X0[e]||(X0[e]=new hb),X0[e]}function dK(n,e){let t=n.toString();return Z0[t]||(Z0[t]=e()),Z0[t]}var fb=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Hd(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var s1="start",hK="close",fK="pLPCommand",pK="pRTLPCB",Q1="id",J1="pw",X1="ser",mK="cb",gK="seg",vK="ts",yK="d",_K="dframe",Z1=1870,eF=30,wK=Z1-eF,EK=25e3,IK=3e4,pb=class n{constructor(e,t,r,i,o,s,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$d(e),this.stats_=Jb(t),this.urlFn=c=>(this.appCheckToken&&(c[db]=this.appCheckToken),Y1(t,K1,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new fb(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(IK)),nK(()=>{if(this.isClosed_)return;this.scriptTagHolder=new mb((...o)=>{let[s,a,c,u,d]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===s1)this.id=a,this.password=c;else if(s===hK)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[s1]="t",r[X1]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[mK]=this.scriptTagHolder.uniqueCallbackIdentifier),r[j1]=Dg,this.transportSessionId&&(r[B1]=this.transportSessionId),this.lastSessionId&&(r[q1]=this.lastSessionId),this.applicationId&&(r[z1]=this.applicationId),this.appCheckToken&&(r[db]=this.appCheckToken),typeof location<"u"&&location.hostname&&W1.test(location.hostname)&&(r[$1]=H1);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return zr()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!iK()&&!oK()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=qt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=nS(t),i=V1(r,wK);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(zr())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[_K]="t",r[Q1]=e,r[J1]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=qt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},mb=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,zr())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Z8(),window[fK+this.uniqueCallbackIdentifier]=e,window[pK+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){_n("frame writing exception"),a.stack&&_n(a.stack),_n(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||_n("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Q1]=this.myID,e[J1]=this.myPW,e[X1]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+eF+r.length<=Z1;){let s=this.pendingSegs.shift();r=r+"&"+gK+i+"="+s.seg+"&"+vK+i+"="+s.ts+"&"+yK+i+"="+s.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(EK)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,t){zr()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{_n("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var TK=16384,bK=45e3,Ag=null;typeof MozWebSocket<"u"?Ag=MozWebSocket:typeof WebSocket<"u"&&(Ag=WebSocket);var xd=(()=>{class n{constructor(t,r,i,o,s,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$d(this.connId),this.stats_=Jb(r),this.connURL=n.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,s){let a={};return a[j1]=Dg,!zr()&&typeof location<"u"&&location.hostname&&W1.test(location.hostname)&&(a[$1]=H1),r&&(a[B1]=r),i&&(a[q1]=i),o&&(a[db]=o),s&&(a[z1]=s),Y1(t,G1,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ta.set("previous_websocket_failure",!0);try{let i;if(zr()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Dg}/${Yb}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Ag(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&Ag!==null&&!n.forceDisallow_}static previouslyFailed(){return ta.isInMemoryStorage||ta.get("previous_websocket_failure")===!0}markConnectionHealthy(){ta.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Rh(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(G(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=qt(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=V1(r,TK);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(bK))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),CK=(()=>{class n{static get ALL_TRANSPORTS(){return[pb,xd]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){let r=xd&&xd.isAvailable(),i=r&&!xd.previouslyFailed();if(t.webSocketOnly&&(r||tr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[xd];else{let o=this.transports_=[];for(let s of n.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),DK=6e4,SK=5e3,AK=10*1024,RK=100*1024,eb="t",a1="d",xK="s",c1="r",NK="e",l1="o",u1="a",d1="n",h1="p",MK="h",gb=class{constructor(e,t,r,i,o,s,a,c,u,d){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$d("c:"+this.id+":"),this.transportManager_=new CK(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=kd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>RK?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>AK?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(eb in e){let t=e[eb];t===u1?this.upgradeIfSecondaryHealthy_():t===c1?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===l1&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=Rd("t",e),r=Rd("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:h1,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:u1,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:d1,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=Rd("t",e),r=Rd("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=Rd(eb,e);if(a1 in e){let r=e[a1];if(t===MK){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===d1){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===xK?this.onConnectionShutdown_(r):t===c1?this.onReset_(r):t===NK?cb("Server Error: "+r):t===l1?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):cb("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Dg!==r&&tr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),kd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(DK))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):kd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(SK))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:h1,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ta.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Rg=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var xg=class{constructor(e){this.allowedEvents_=e,this.listeners_={},G(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){G(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var Ng=class n extends xg{static getInstance(){return new n}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Hl()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return G(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var f1=32,p1=768,nt=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function Je(){return new nt("")}function je(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Wo(n){return n.pieces_.length-n.pieceNum_}function ht(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new nt(n.pieces_,e)}function tF(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function PK(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function nF(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function rF(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new nt(e,0)}function Jt(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof nt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new nt(t,0)}function Le(n){return n.pieceNum_>=n.pieces_.length}function _r(n,e){let t=je(n),r=je(e);if(t===null)return e;if(t===r)return _r(ht(n),ht(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function iF(n,e){if(Wo(n)!==Wo(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Hr(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Wo(n)>Wo(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var vb=class{constructor(e,t){this.errorPrefix_=t,this.parts_=nF(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Yl(this.parts_[r]);oF(this)}};function kK(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Yl(e),oF(n)}function OK(n){let e=n.parts_.pop();n.byteLength_-=Yl(e),n.parts_.length>0&&(n.byteLength_-=1)}function oF(n){if(n.byteLength_>p1)throw new Error(n.errorPrefix_+"has a key path longer than "+p1+" bytes ("+n.byteLength_+").");if(n.parts_.length>f1)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+f1+") or object contains a cycle "+ea(n))}function ea(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var yb=class n extends xg{static getInstance(){return new n}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return G(e==="visible","Unknown event type: "+e),[this.visible_]}};var Nd=1e3,FK=60*5*1e3,m1=30*1e3,LK=1.3,VK=3e4,UK="server_kill",g1=3,Xb=(()=>{class n extends Rg{constructor(t,r,i,o,s,a,c,u){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=n.nextPersistentConnectionId_++,this.log_=$d("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Nd,this.maxReconnectDelay_=FK,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!zr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");yb.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Ng.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let o=++this.requestNumber_,s={r:o,a:t,b:r};this.log_(qt(s)),G(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();let r=new va,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(t,r,i,o){this.initConnection_();let s=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),G(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),G(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest(a,s,c=>{let u=c.d,d=c.s;n.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,o),t.onComplete&&t.onComplete(d,u))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Kr(t,"w")){let i=ns(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();tr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||uS(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=m1)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=lS(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===t&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),G(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);let s={p:t},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+t,s),this.sendRequest(t,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:t,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+qt(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):cb("Unrecognized action received from server: "+qt(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){G(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Nd,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Nd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>VK&&(this.reconnectDelay_=Nd),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*LK)}this.onConnectStatus_(!1)}establishConnection_(){return y(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+n.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,u=function(){c?c.close():(a=!0,i())},d=function(m){G(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(m)};this.realtime_={close:u,sendRequest:d};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[m,v]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?_n("getToken() completed but was canceled"):(_n("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=v&&v.token,c=new gb(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,w=>{tr(w+" ("+this.repoInfo_.toString()+")"),this.interrupt(UK)},s))}catch(m){this.log_("Failed to get token: "+m),a||(this.repoInfo_.nodeAdmin&&tr(m),u())}}})}interrupt(t){_n("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){_n("Resuming connection for reason: "+t),delete this.interruptReasons_[t],zl(this.interruptReasons_)&&(this.reconnectDelay_=Nd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(s=>Qb(s)).join("$"):i="default";let o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){let i=new nt(t).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){_n("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=g1&&(this.reconnectDelay_=m1,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){_n("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=g1&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";zr()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+Yb.replace(/\./g,"-")]=1,Hl()?t["framework.cordova"]=1:Ah()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=Ng.getInstance().currentlyOnline();return zl(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),Be=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var Jc=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new Be(Qc,e),i=new Be(Qc,t);return this.compare(r,i)!==0}minPost(){return Be.MIN}};var Cg,Mg=class extends Jc{static get __EMPTY_NODE(){return Cg}static set __EMPTY_NODE(e){Cg=e}compare(e,t){return rl(e.name,t.name)}isDefinedOn(e){throw ga("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Be.MIN}maxPost(){return new Be(ra,Cg)}makePost(e,t){return G(typeof e=="string","KeyIndex indexValue must always be a string."),new Be(e,Cg)}toString(){return".key"}},Yc=new Mg;var zc=class{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=t?r(e.key,t):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},$r=(()=>{class n{constructor(t,r,i,o,s){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??wr.EMPTY_NODE,this.right=s??wr.EMPTY_NODE}copy(t,r,i,o,s){return new n(t??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this,s=i(t,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(t,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return wr.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return wr.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),_b=class{copy(e,t,r,i,o){return this}insert(e,t,r){return new $r(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},wr=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,$r.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,$r.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new zc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new zc(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new zc(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new zc(this.root_,null,this.comparator_,!0,e)}};wr.EMPTY_NODE=new _b;function jK(n,e){return rl(n.name,e.name)}function Zb(n,e){return rl(n,e)}var wb;function BK(n){wb=n}var sF=function(n){return typeof n=="number"?"number:"+U1(n):"string:"+n},aF=function(n){if(n.isLeafNode()){let e=n.val();G(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Kr(e,".sv"),"Priority must be a string or number.")}else G(n===wb||n.isEmpty(),"priority of unexpected type.");G(n===wb||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var v1,Xc=(()=>{class n{static set __childrenNodeConstructor(t){v1=t}static get __childrenNodeConstructor(){return v1}constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,G(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),aF(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Le(t)?this:je(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=je(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(G(i!==".priority"||Wo(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ht(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+sF(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=U1(this.value_):t+=this.value_,this.lazyHash_=F1(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(G(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),s=n.VALUE_TYPE_ORDER.indexOf(i);return G(o>=0,"Unknown leaf type: "+r),G(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),cF,lF;function $K(n){cF=n}function HK(n){lF=n}var Eb=class extends Jc{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return o===0?rl(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Be.MIN}maxPost(){return new Be(ra,new Xc("[PRIORITY-POST]",lF))}makePost(e,t){let r=cF(e);return new Be(t,new Xc("[PRIORITY-POST]",r))}toString(){return".priority"}},En=new Eb;var WK=Math.log(2),Ib=class{constructor(e){let t=o=>parseInt(Math.log(o)/WK,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Pg=function(n,e,t,r){n.sort(e);let i=function(c,u){let d=u-c,f,m;if(d===0)return null;if(d===1)return f=n[c],m=t?t(f):f,new $r(m,f.node,$r.BLACK,null,null);{let v=parseInt(d/2,10)+c,w=i(c,v),R=i(v+1,u);return f=n[v],m=t?t(f):f,new $r(m,f.node,$r.BLACK,w,R)}},o=function(c){let u=null,d=null,f=n.length,m=function(w,R){let S=f-w,F=f;f-=w;let W=i(S+1,F),q=n[S],te=t?t(q):q;v(new $r(te,q.node,R,null,W))},v=function(w){u?(u.left=w,u=w):(d=w,u=w)};for(let w=0;w<c.count;++w){let R=c.nextBitIsOne(),S=Math.pow(2,c.count-(w+1));R?m(S,$r.BLACK):(m(S,$r.BLACK),m(S,$r.RED))}return d},s=new Ib(n.length),a=o(s);return new wr(r||e,a)};var tb,qc={},Zc=class n{static get Default(){return G(qc&&En,"ChildrenNode.ts has not been loaded"),tb=tb||new n({".priority":qc},{".priority":En}),tb}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){let t=ns(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof wr?t:null}hasIndex(e){return Kr(this.indexSet_,e.toString())}addIndex(e,t){G(e!==Yc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=t.getIterator(Be.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=Pg(r,e.getCompare()):a=qc;let c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new n(d,u)}addToIndexes(e,t){let r=Gl(this.indexes_,(i,o)=>{let s=ns(this.indexSet_,o);if(G(s,"Missing index implementation for "+o),i===qc)if(s.isDefinedOn(e.node)){let a=[],c=t.getIterator(Be.Wrap),u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),Pg(a,s.getCompare())}else return qc;else{let a=t.get(e.name),c=i;return a&&(c=c.remove(new Be(e.name,a))),c.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=Gl(this.indexes_,i=>{if(i===qc)return i;{let o=t.get(e.name);return o?i.remove(new Be(e.name,o)):i}});return new n(r,this.indexSet_)}};var Md,_t=(()=>{class n{static get EMPTY_NODE(){return Md||(Md=new n(new wr(Zb),null,Zc.Default))}constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&aF(this.priorityNode_),this.children_.isEmpty()&&G(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Md}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?Md:r}}getChild(t){let r=je(t);return r===null?this:this.getImmediateChild(r).getChild(ht(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(G(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new Be(t,r),o,s;r.isEmpty()?(o=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?Md:this.priorityNode_;return new n(o,a,s)}}updateChild(t,r){let i=je(t);if(i===null)return r;{G(je(t)!==".priority"||Wo(t)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(ht(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(En,(a,c)=>{r[a]=c.val(t),i++,s&&n.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!t&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+sF(this.getPriority().val())+":"),this.forEachChild(En,(r,i)=>{let o=i.hash();o!==""&&(t+=":"+r+":"+o)}),this.lazyHash_=t===""?"":F1(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new Be(t,r));return s?s.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new Be(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new Be(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{let o=this.children_.getIteratorFrom(t.name,Be.Wrap),s=o.peek();for(;s!=null&&r.compare(s,t)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{let o=this.children_.getReverseIteratorFrom(t.name,Be.Wrap),s=o.peek();for(;s!=null&&r.compare(s,t)>0;)o.getNext(),s=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Wd?-1:0}withIndex(t){if(t===Yc||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Yc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(En),o=r.getIterator(En),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===Yc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),Tb=class extends _t{constructor(){super(new wr(Zb),_t.EMPTY_NODE,Zc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return _t.EMPTY_NODE}isEmpty(){return!1}},Wd=new Tb;Object.defineProperties(Be,{MIN:{value:new Be(Qc,_t.EMPTY_NODE)},MAX:{value:new Be(ra,Wd)}});Mg.__EMPTY_NODE=_t.EMPTY_NODE;Xc.__childrenNodeConstructor=_t;BK(Wd);HK(Wd);var qK=!0;function wn(n,e=null){if(n===null)return _t.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),G(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new Xc(t,wn(e))}if(!(n instanceof Array)&&qK){let t=[],r=!1;if(Er(n,(s,a)=>{if(s.substring(0,1)!=="."){let c=wn(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new Be(s,c)))}}),t.length===0)return _t.EMPTY_NODE;let o=Pg(t,jK,s=>s.name,Zb);if(r){let s=Pg(t,En.getCompare());return new _t(o,wn(e),new Zc({".priority":s},{".priority":En}))}else return new _t(o,wn(e),Zc.Default)}else{let t=_t.EMPTY_NODE;return Er(n,(r,i)=>{if(Kr(n,r)&&r.substring(0,1)!=="."){let o=wn(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(wn(e))}}$K(wn);var bb=class extends Jc{constructor(e){super(),this.indexPath_=e,G(!Le(e)&&je(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return o===0?rl(e.name,t.name):o}makePost(e,t){let r=wn(e),i=_t.EMPTY_NODE.updateChild(this.indexPath_,r);return new Be(t,i)}maxPost(){let e=_t.EMPTY_NODE.updateChild(this.indexPath_,Wd);return new Be(ra,e)}toString(){return nF(this.indexPath_,0).join("/")}};var Cb=class extends Jc{compare(e,t){let r=e.node.compareTo(t.node);return r===0?rl(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Be.MIN}maxPost(){return Be.MAX}makePost(e,t){let r=wn(e);return new Be(t,r)}toString(){return".value"}},zK=new Cb;function GK(n){return{type:"value",snapshotNode:n}}function KK(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function YK(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function y1(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function QK(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var Db=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=En}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return G(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return G(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Qc}hasEnd(){return this.endSet_}getIndexEndValue(){return G(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return G(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ra}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return G(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===En}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function _1(n){let e={};if(n.isDefault())return e;let t;if(n.index_===En?t="$priority":n.index_===zK?t="$value":n.index_===Yc?t="$key":(G(n.index_ instanceof bb,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=qt(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=qt(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+qt(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=qt(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+qt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function w1(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==En&&(e.i=n.index_.toString()),e}var Sb=class n extends Rg{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(G(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=$d("p:rest:"),this.listens_={}}listen(e,t,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=n.getListenId_(e,r),a={};this.listens_[s]=a;let c=_1(e._queryParams);this.restRequest_(o+".json",c,(u,d)=>{let f=d;if(u===404&&(f=null,u=null),u===null&&this.onDataUpdate_(o,f,!1,r),ns(this.listens_,s)===a){let m;u?u===401?m="permission_denied":m="rest_error:"+u:m="ok",i(m,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=_1(e._queryParams),r=e._path.toString(),i=new va;return this.restRequest_(r+".json",t,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+rs(t);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Rh(a.responseText)}catch{tr("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&tr("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var Ab=class{constructor(){this.rootNode_=_t.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function kg(){return{value:null,children:new Map}}function uF(n,e,t){if(Le(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=je(e);n.children.has(r)||n.children.set(r,kg());let i=n.children.get(r);e=ht(e),uF(i,e,t)}}function Rb(n,e,t){n.value!==null?t(e,n.value):JK(n,(r,i)=>{let o=new nt(e.toString()+"/"+r);Rb(i,o,t)})}function JK(n,e){n.children.forEach((t,r)=>{e(r,t)})}var xb=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Er(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var E1=10*1e3,XK=30*1e3,ZK=5*60*1e3,Nb=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new xb(e);let r=E1+(XK-E1)*Math.random();kd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;Er(e,(i,o)=>{o>0&&Kr(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),kd(this.reportStats_.bind(this),Math.floor(Math.random()*2*ZK))}};var Gi=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Gi||{});function dF(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function hF(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function fF(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var Mb=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Gi.ACK_USER_WRITE,this.source=dF()}operationForChild(e){if(Le(this.path)){if(this.affectedTree.value!=null)return G(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new nt(e));return new n(Je(),t,this.revert)}}else return G(je(this.path)===e,"operationForChild called for unrelated child."),new n(ht(this.path),this.affectedTree,this.revert)}};var el=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Gi.OVERWRITE}operationForChild(e){return Le(this.path)?new n(this.source,Je(),this.snap.getImmediateChild(e)):new n(this.source,ht(this.path),this.snap)}};var Og=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Gi.MERGE}operationForChild(e){if(Le(this.path)){let t=this.children.subtree(new nt(e));return t.isEmpty()?null:t.value?new el(this.source,Je(),t.value):new n(this.source,Je(),t)}else return G(je(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,ht(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Vd=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Le(e))return this.isFullyInitialized()&&!this.filtered_;let t=je(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function e7(n,e,t,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&n.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(QK(s.childName,s.snapshotNode))}),Pd(n,i,"child_removed",e,r,t),Pd(n,i,"child_added",e,r,t),Pd(n,i,"child_moved",o,r,t),Pd(n,i,"child_changed",e,r,t),Pd(n,i,"value",e,r,t),i}function Pd(n,e,t,r,i,o){let s=r.filter(a=>a.type===t);s.sort((a,c)=>n7(n,a,c)),s.forEach(a=>{let c=t7(n,a,o);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,n.query_))})})}function t7(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function n7(n,e,t){if(e.childName==null||t.childName==null)throw ga("Should only compare child_ events.");let r=new Be(e.childName,e.snapshotNode),i=new Be(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function pF(n,e){return{eventCache:n,serverCache:e}}function Fd(n,e,t,r){return pF(new Vd(e,t,r),n.serverCache)}function mF(n,e,t,r){return pF(n.eventCache,new Vd(e,t,r))}function Pb(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ia(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var nb,r7=()=>(nb||(nb=new wr(rK)),nb),Wn=class n{static fromObject(e){let t=new n(null);return Er(e,(r,i)=>{t=t.set(new nt(r),i)}),t}constructor(e,t=r7()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Je(),value:this.value};if(Le(e))return null;{let r=je(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(ht(e),t);return o!=null?{path:Jt(new nt(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Le(e))return this;{let t=je(e),r=this.children.get(t);return r!==null?r.subtree(ht(e)):new n(null)}}set(e,t){if(Le(e))return new n(t,this.children);{let r=je(e),o=(this.children.get(r)||new n(null)).set(ht(e),t),s=this.children.insert(r,o);return new n(this.value,s)}}remove(e){if(Le(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=je(e),r=this.children.get(t);if(r){let i=r.remove(ht(e)),o;return i.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,i),this.value===null&&o.isEmpty()?new n(null):new n(this.value,o)}else return this}}get(e){if(Le(e))return this.value;{let t=je(e),r=this.children.get(t);return r?r.get(ht(e)):null}}setTree(e,t){if(Le(e))return t;{let r=je(e),o=(this.children.get(r)||new n(null)).setTree(ht(e),t),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new n(this.value,s)}}fold(e){return this.fold_(Je(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Jt(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Je(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(Le(e))return null;{let o=je(e),s=this.children.get(o);return s?s.findOnPath_(ht(e),Jt(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Je(),t)}foreachOnPath_(e,t,r){if(Le(e))return this;{this.value&&r(t,this.value);let i=je(e),o=this.children.get(i);return o?o.foreachOnPath_(ht(e),Jt(t,i),r):new n(null)}}foreach(e){this.foreach_(Je(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Jt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var Wr=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new Wn(null))}};function Ld(n,e,t){if(Le(e))return new Wr(new Wn(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=_r(i,e);return o=o.updateChild(s,t),new Wr(n.writeTree_.set(i,o))}else{let i=new Wn(t),o=n.writeTree_.setTree(e,i);return new Wr(o)}}}function I1(n,e,t){let r=n;return Er(t,(i,o)=>{r=Ld(r,Jt(e,i),o)}),r}function T1(n,e){if(Le(e))return Wr.empty();{let t=n.writeTree_.setTree(e,new Wn(null));return new Wr(t)}}function kb(n,e){return oa(n,e)!=null}function oa(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(_r(t.path,e)):null}function b1(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(En,(r,i)=>{e.push(new Be(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Be(r,i.value))}),e}function Ho(n,e){if(Le(e))return n;{let t=oa(n,e);return t!=null?new Wr(new Wn(t)):new Wr(n.writeTree_.subtree(e))}}function Ob(n){return n.writeTree_.isEmpty()}function tl(n,e){return gF(Je(),n.writeTree_,e)}function gF(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(G(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=gF(Jt(n,i),o,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Jt(n,".priority"),r)),t}}function vF(n,e){return IF(e,n)}function i7(n,e,t,r,i){G(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Ld(n.visibleWrites,e,t)),n.lastWriteId=r}function o7(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function s7(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);G(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,s=n.allWrites.length-1;for(;i&&s>=0;){let a=n.allWrites[s];a.visible&&(s>=t&&a7(a,r.path)?i=!1:Hr(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return c7(n),!0;if(r.snap)n.visibleWrites=T1(n.visibleWrites,r.path);else{let a=r.children;Er(a,c=>{n.visibleWrites=T1(n.visibleWrites,Jt(r.path,c))})}return!0}else return!1}function a7(n,e){if(n.snap)return Hr(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&Hr(Jt(n.path,t),e))return!0;return!1}function c7(n){n.visibleWrites=yF(n.allWrites,l7,Je()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function l7(n){return n.visible}function yF(n,e,t){let r=Wr.empty();for(let i=0;i<n.length;++i){let o=n[i];if(e(o)){let s=o.path,a;if(o.snap)Hr(t,s)?(a=_r(t,s),r=Ld(r,a,o.snap)):Hr(s,t)&&(a=_r(s,t),r=Ld(r,Je(),o.snap.getChild(a)));else if(o.children){if(Hr(t,s))a=_r(t,s),r=I1(r,a,o.children);else if(Hr(s,t))if(a=_r(s,t),Le(a))r=I1(r,Je(),o.children);else{let c=ns(o.children,je(a));if(c){let u=c.getChild(ht(a));r=Ld(r,Je(),u)}}}else throw ga("WriteRecord should have .snap or .children")}}return r}function _F(n,e,t,r,i){if(!r&&!i){let o=oa(n.visibleWrites,e);if(o!=null)return o;{let s=Ho(n.visibleWrites,e);if(Ob(s))return t;if(t==null&&!kb(s,Je()))return null;{let a=t||_t.EMPTY_NODE;return tl(s,a)}}}else{let o=Ho(n.visibleWrites,e);if(!i&&Ob(o))return t;if(!i&&t==null&&!kb(o,Je()))return null;{let s=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Hr(u.path,e)||Hr(e,u.path))},a=yF(n.allWrites,s,e),c=t||_t.EMPTY_NODE;return tl(a,c)}}}function u7(n,e,t){let r=_t.EMPTY_NODE,i=oa(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(En,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(t){let o=Ho(n.visibleWrites,e);return t.forEachChild(En,(s,a)=>{let c=tl(Ho(o,new nt(s)),a);r=r.updateImmediateChild(s,c)}),b1(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=Ho(n.visibleWrites,e);return b1(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function d7(n,e,t,r,i){G(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=Jt(e,t);if(kb(n.visibleWrites,o))return null;{let s=Ho(n.visibleWrites,o);return Ob(s)?i.getChild(t):tl(s,i.getChild(t))}}function h7(n,e,t,r){let i=Jt(e,t),o=oa(n.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(t)){let s=Ho(n.visibleWrites,i);return tl(s,r.getNode().getImmediateChild(t))}else return null}function f7(n,e){return oa(n.visibleWrites,e)}function p7(n,e,t,r,i,o,s){let a,c=Ho(n.visibleWrites,e),u=oa(c,Je());if(u!=null)a=u;else if(t!=null)a=tl(c,t);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let d=[],f=s.getCompare(),m=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),v=m.getNext();for(;v&&d.length<i;)f(v,r)!==0&&d.push(v),v=m.getNext();return d}else return[]}function m7(){return{visibleWrites:Wr.empty(),allWrites:[],lastWriteId:-1}}function Fb(n,e,t,r){return _F(n.writeTree,n.treePath,e,t,r)}function wF(n,e){return u7(n.writeTree,n.treePath,e)}function C1(n,e,t,r){return d7(n.writeTree,n.treePath,e,t,r)}function Fg(n,e){return f7(n.writeTree,Jt(n.treePath,e))}function g7(n,e,t,r,i,o){return p7(n.writeTree,n.treePath,e,t,r,i,o)}function eC(n,e,t){return h7(n.writeTree,n.treePath,e,t)}function EF(n,e){return IF(Jt(n.treePath,e),n.writeTree)}function IF(n,e){return{treePath:n,writeTree:e}}var Lb=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;G(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),G(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,y1(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,YK(r,i.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,KK(r,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,y1(r,e.snapshotNode,i.oldSnap));else throw ga("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var Vb=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},TF=new Vb,Ud=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Vd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return eC(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ia(this.viewCache_),o=g7(this.writes_,i,t,1,r,e);return o.length===0?null:o[0]}};function v7(n,e){G(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),G(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function y7(n,e,t,r,i){let o=new Lb,s,a;if(t.type===Gi.OVERWRITE){let u=t;u.source.fromUser?s=Ub(n,e,u.path,u.snap,r,i,o):(G(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Le(u.path),s=Lg(n,e,u.path,u.snap,r,i,a,o))}else if(t.type===Gi.MERGE){let u=t;u.source.fromUser?s=w7(n,e,u.path,u.children,r,i,o):(G(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),s=jb(n,e,u.path,u.children,r,i,a,o))}else if(t.type===Gi.ACK_USER_WRITE){let u=t;u.revert?s=T7(n,e,u.path,r,i,o):s=E7(n,e,u.path,u.affectedTree,r,i,o)}else if(t.type===Gi.LISTEN_COMPLETE)s=I7(n,e,t.path,r,o);else throw ga("Unknown operation type: "+t.type);let c=o.getChanges();return _7(e,s,c),{viewCache:s,changes:c}}function _7(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Pb(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(GK(Pb(e)))}}function bF(n,e,t,r,i,o){let s=e.eventCache;if(Fg(r,t)!=null)return e;{let a,c;if(Le(t))if(G(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let u=ia(e),d=u instanceof _t?u:_t.EMPTY_NODE,f=wF(r,d);a=n.filter.updateFullNode(e.eventCache.getNode(),f,o)}else{let u=Fb(r,ia(e));a=n.filter.updateFullNode(e.eventCache.getNode(),u,o)}else{let u=je(t);if(u===".priority"){G(Wo(t)===1,"Can't have a priority with additional path components");let d=s.getNode();c=e.serverCache.getNode();let f=C1(r,t,d,c);f!=null?a=n.filter.updatePriority(d,f):a=s.getNode()}else{let d=ht(t),f;if(s.isCompleteForChild(u)){c=e.serverCache.getNode();let m=C1(r,t,s.getNode(),c);m!=null?f=s.getNode().getImmediateChild(u).updateChild(d,m):f=s.getNode().getImmediateChild(u)}else f=eC(r,u,e.serverCache);f!=null?a=n.filter.updateChild(s.getNode(),u,f,d,i,o):a=s.getNode()}}return Fd(e,a,s.isFullyInitialized()||Le(t),n.filter.filtersNodes())}}function Lg(n,e,t,r,i,o,s,a){let c=e.serverCache,u,d=s?n.filter:n.filter.getIndexedFilter();if(Le(t))u=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){let v=c.getNode().updateChild(t,r);u=d.updateFullNode(c.getNode(),v,null)}else{let v=je(t);if(!c.isCompleteForPath(t)&&Wo(t)>1)return e;let w=ht(t),S=c.getNode().getImmediateChild(v).updateChild(w,r);v===".priority"?u=d.updatePriority(c.getNode(),S):u=d.updateChild(c.getNode(),v,S,w,TF,null)}let f=mF(e,u,c.isFullyInitialized()||Le(t),d.filtersNodes()),m=new Ud(i,f,o);return bF(n,f,t,i,m,a)}function Ub(n,e,t,r,i,o,s){let a=e.eventCache,c,u,d=new Ud(i,e,o);if(Le(t))u=n.filter.updateFullNode(e.eventCache.getNode(),r,s),c=Fd(e,u,!0,n.filter.filtersNodes());else{let f=je(t);if(f===".priority")u=n.filter.updatePriority(e.eventCache.getNode(),r),c=Fd(e,u,a.isFullyInitialized(),a.isFiltered());else{let m=ht(t),v=a.getNode().getImmediateChild(f),w;if(Le(m))w=r;else{let R=d.getCompleteChild(f);R!=null?tF(m)===".priority"&&R.getChild(rF(m)).isEmpty()?w=R:w=R.updateChild(m,r):w=_t.EMPTY_NODE}if(v.equals(w))c=e;else{let R=n.filter.updateChild(a.getNode(),f,w,m,d,s);c=Fd(e,R,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function D1(n,e){return n.eventCache.isCompleteForChild(e)}function w7(n,e,t,r,i,o,s){let a=e;return r.foreach((c,u)=>{let d=Jt(t,c);D1(e,je(d))&&(a=Ub(n,a,d,u,i,o,s))}),r.foreach((c,u)=>{let d=Jt(t,c);D1(e,je(d))||(a=Ub(n,a,d,u,i,o,s))}),a}function S1(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function jb(n,e,t,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;Le(t)?u=r:u=new Wn(null).setTree(t,r);let d=e.serverCache.getNode();return u.children.inorderTraversal((f,m)=>{if(d.hasChild(f)){let v=e.serverCache.getNode().getImmediateChild(f),w=S1(n,v,m);c=Lg(n,c,new nt(f),w,i,o,s,a)}}),u.children.inorderTraversal((f,m)=>{let v=!e.serverCache.isCompleteForChild(f)&&m.value===null;if(!d.hasChild(f)&&!v){let w=e.serverCache.getNode().getImmediateChild(f),R=S1(n,w,m);c=Lg(n,c,new nt(f),R,i,o,s,a)}}),c}function E7(n,e,t,r,i,o,s){if(Fg(i,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Le(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return Lg(n,e,t,c.getNode().getChild(t),i,o,a,s);if(Le(t)){let u=new Wn(null);return c.getNode().forEachChild(Yc,(d,f)=>{u=u.set(new nt(d),f)}),jb(n,e,t,u,i,o,a,s)}else return e}else{let u=new Wn(null);return r.foreach((d,f)=>{let m=Jt(t,d);c.isCompleteForPath(m)&&(u=u.set(d,c.getNode().getChild(m)))}),jb(n,e,t,u,i,o,a,s)}}function I7(n,e,t,r,i){let o=e.serverCache,s=mF(e,o.getNode(),o.isFullyInitialized()||Le(t),o.isFiltered());return bF(n,s,t,r,TF,i)}function T7(n,e,t,r,i,o){let s;if(Fg(r,t)!=null)return e;{let a=new Ud(r,e,i),c=e.eventCache.getNode(),u;if(Le(t)||je(t)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Fb(r,ia(e));else{let f=e.serverCache.getNode();G(f instanceof _t,"serverChildren would be complete if leaf node"),d=wF(r,f)}d=d,u=n.filter.updateFullNode(c,d,o)}else{let d=je(t),f=eC(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?u=n.filter.updateChild(c,d,f,ht(t),a,o):e.eventCache.getNode().hasChild(d)?u=n.filter.updateChild(c,d,_t.EMPTY_NODE,ht(t),a,o):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=Fb(r,ia(e)),s.isLeafNode()&&(u=n.filter.updateFullNode(u,s,o)))}return s=e.serverCache.isFullyInitialized()||Fg(r,Je())!=null,Fd(e,u,s,n.filter.filtersNodes())}}function b7(n,e){let t=ia(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Le(e)&&!t.getImmediateChild(je(e)).isEmpty())?t.getChild(e):null}function A1(n,e,t,r){e.type===Gi.MERGE&&e.source.queryId!==null&&(G(ia(n.viewCache_),"We should always have a full cache before handling merges"),G(Pb(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,o=y7(n.processor_,i,e,t,r);return v7(n.processor_,o.viewCache),G(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,C7(n,o.changes,o.viewCache.eventCache.getNode(),null)}function C7(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return e7(n.eventGenerator_,e,t,i)}var R1;function D7(n){G(!R1,"__referenceConstructor has already been defined"),R1=n}function tC(n,e,t,r){let i=e.source.queryId;if(i!==null){let o=n.views.get(i);return G(o!=null,"SyncTree gave us an op for an invalid query."),A1(o,e,t,r)}else{let o=[];for(let s of n.views.values())o=o.concat(A1(s,e,t,r));return o}}function nC(n,e){let t=null;for(let r of n.views.values())t=t||b7(r,e);return t}var x1;function S7(n){G(!x1,"__referenceConstructor has already been defined"),x1=n}var Vg=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Wn(null),this.pendingWriteTree_=m7(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function A7(n,e,t,r,i){return i7(n.pendingWriteTree_,e,t,r,i),i?jg(n,new el(dF(),e,t)):[]}function Gc(n,e,t=!1){let r=o7(n.pendingWriteTree_,e);if(s7(n.pendingWriteTree_,e)){let o=new Wn(null);return r.snap!=null?o=o.set(Je(),!0):Er(r.children,s=>{o=o.set(new nt(s),!0)}),jg(n,new Mb(r.path,o,t))}else return[]}function Ug(n,e,t){return jg(n,new el(hF(),e,t))}function R7(n,e,t){let r=Wn.fromObject(t);return jg(n,new Og(hF(),e,r))}function x7(n,e,t,r){let i=AF(n,r);if(i!=null){let o=RF(i),s=o.path,a=o.queryId,c=_r(s,e),u=new el(fF(a),c,t);return xF(n,s,u)}else return[]}function N7(n,e,t,r){let i=AF(n,r);if(i){let o=RF(i),s=o.path,a=o.queryId,c=_r(s,e),u=Wn.fromObject(t),d=new Og(fF(a),c,u);return xF(n,s,d)}else return[]}function CF(n,e,t){let i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(s,a)=>{let c=_r(s,e),u=nC(a,c);if(u)return u});return _F(i,e,o,t,!0)}function jg(n,e){return DF(e,n.syncPointTree_,null,vF(n.pendingWriteTree_,Je()))}function DF(n,e,t,r){if(Le(n.path))return SF(n,e,t,r);{let i=e.get(Je());t==null&&i!=null&&(t=nC(i,Je()));let o=[],s=je(n.path),a=n.operationForChild(s),c=e.children.get(s);if(c&&a){let u=t?t.getImmediateChild(s):null,d=EF(r,s);o=o.concat(DF(a,c,u,d))}return i&&(o=o.concat(tC(i,n,r,t))),o}}function SF(n,e,t,r){let i=e.get(Je());t==null&&i!=null&&(t=nC(i,Je()));let o=[];return e.children.inorderTraversal((s,a)=>{let c=t?t.getImmediateChild(s):null,u=EF(r,s),d=n.operationForChild(s);d&&(o=o.concat(SF(d,a,c,u)))}),i&&(o=o.concat(tC(i,n,r,t))),o}function AF(n,e){return n.tagToQueryMap.get(e)}function RF(n){let e=n.indexOf("$");return G(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new nt(n.substr(0,e))}}function xF(n,e,t){let r=n.syncPointTree_.get(e);G(r,"Missing sync point for query tag that we're tracking");let i=vF(n.pendingWriteTree_,e);return tC(r,t,i,null)}var Bb=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},$b=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=Jt(this.path_,e);return new n(this.syncTree_,t)}node(){return CF(this.syncTree_,this.path_)}},M7=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},N1=function(n,e,t){if(!n||typeof n!="object")return n;if(G(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return P7(n[".sv"],e,t);if(typeof n[".sv"]=="object")return k7(n[".sv"],e);G(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},P7=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:G(!1,"Unexpected server value: "+n)}},k7=function(n,e,t){n.hasOwnProperty("increment")||G(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&G(!1,"Unexpected increment value: "+r);let i=e.node();if(G(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},O7=function(n,e,t,r){return rC(e,new $b(t,n),r)},F7=function(n,e,t){return rC(n,new Bb(e),t)};function rC(n,e,t){let r=n.getPriority().val(),i=N1(r,e.getImmediateChild(".priority"),t),o;if(n.isLeafNode()){let s=n,a=N1(s.getValue(),e,t);return a!==s.getValue()||i!==s.getPriority().val()?new Xc(a,wn(i)):n}else{let s=n;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Xc(i))),s.forEachChild(En,(a,c)=>{let u=rC(c,e.getImmediateChild(a),t);u!==c&&(o=o.updateImmediateChild(a,u))}),o}}var jd=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function iC(n,e){let t=e instanceof nt?e:new nt(e),r=n,i=je(t);for(;i!==null;){let o=ns(r.node.children,i)||{children:{},childCount:0};r=new jd(i,r,o),t=ht(t),i=je(t)}return r}function il(n){return n.node.value}function NF(n,e){n.node.value=e,Hb(n)}function MF(n){return n.node.childCount>0}function L7(n){return il(n)===void 0&&!MF(n)}function Bg(n,e){Er(n.node.children,(t,r)=>{e(new jd(t,n,r))})}function PF(n,e,t,r){t&&!r&&e(n),Bg(n,i=>{PF(i,e,!0,r)}),t&&r&&e(n)}function V7(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function qd(n){return new nt(n.parent===null?n.name:qd(n.parent)+"/"+n.name)}function Hb(n){n.parent!==null&&U7(n.parent,n.name,n)}function U7(n,e,t){let r=L7(t),i=Kr(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Hb(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Hb(n))}var j7=/[\[\].#$\/\u0000-\u001F\u007F]/,B7=/[\[\].#$\u0000-\u001F\u007F]/,rb=10*1024*1024,kF=function(n){return typeof n=="string"&&n.length!==0&&!j7.test(n)},$7=function(n){return typeof n=="string"&&n.length!==0&&!B7.test(n)},H7=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),$7(n)};var OF=function(n,e,t){let r=t instanceof nt?new vb(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+ea(r));if(typeof e=="function")throw new Error(n+"contains a function "+ea(r)+" with contents = "+e.toString());if(L1(e))throw new Error(n+"contains "+e.toString()+" "+ea(r));if(typeof e=="string"&&e.length>rb/3&&Yl(e)>rb)throw new Error(n+"contains a string greater than "+rb+" utf8 bytes "+ea(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(Er(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!kF(s)))throw new Error(n+" contains an invalid key ("+s+") "+ea(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);kK(r,s),OF(n,a,r),OK(r)}),i&&o)throw new Error(n+' contains ".value" child '+ea(r)+" in addition to actual children.")}};var W7=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!kF(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!H7(t))throw new Error(fS(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Wb=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function q7(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();t!==null&&!iF(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function sa(n,e,t){q7(n,t),z7(n,r=>Hr(r,e)||Hr(e,r))}function z7(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let o=i.path;e(o)?(G7(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function G7(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();na&&_n("event: "+t.toString()),Hd(r)}}}var K7="repo_interrupt",Y7=25,qb=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Wb,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=kg(),this.transactionQueueTree_=new jd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function Q7(n,e,t){if(n.stats_=Jb(n.repoInfo_),n.forceRestClient_||lK())n.server_=new Sb(n.repoInfo_,(r,i,o,s)=>{M1(n,r,i,o,s)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>P1(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{qt(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Xb(n.repoInfo_,e,(r,i,o,s)=>{M1(n,r,i,o,s)},r=>{P1(n,r)},r=>{X7(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=dK(n.repoInfo_,()=>new Nb(n.stats_,n.server_)),n.infoData_=new Ab,n.infoSyncTree_=new Vg({startListening:(r,i,o,s)=>{let a=[],c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=Ug(n.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),oC(n,"connected",!1),n.serverSyncTree_=new Vg({startListening:(r,i,o,s)=>(n.server_.listen(r,o,i,(a,c)=>{let u=s(a,c);sa(n.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function J7(n){let t=n.infoData_.getNode(new nt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function FF(n){return M7({timestamp:J7(n)})}function M1(n,e,t,r,i){n.dataUpdateCount++;let o=new nt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let s=[];if(i)if(r){let c=Gl(t,u=>wn(u));s=N7(n.serverSyncTree_,o,c,i)}else{let c=wn(t);s=x7(n.serverSyncTree_,o,c,i)}else if(r){let c=Gl(t,u=>wn(u));s=R7(n.serverSyncTree_,o,c)}else{let c=wn(t);s=Ug(n.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=aC(n,o)),sa(n.eventQueue_,a,s)}function P1(n,e){oC(n,"connected",e),e===!1&&eY(n)}function X7(n,e){Er(e,(t,r)=>{oC(n,t,r)})}function oC(n,e,t){let r=new nt("/.info/"+e),i=wn(t);n.infoData_.updateSnapshot(r,i);let o=Ug(n.infoSyncTree_,r,i);sa(n.eventQueue_,r,o)}function Z7(n){return n.nextWriteId_++}function eY(n){LF(n,"onDisconnectEvents");let e=FF(n),t=kg();Rb(n.onDisconnect_,Je(),(i,o)=>{let s=O7(i,o,n.serverSyncTree_,e);uF(t,i,s)});let r=[];Rb(t,Je(),(i,o)=>{r=r.concat(Ug(n.serverSyncTree_,i,o));let s=iY(n,i);aC(n,s)}),n.onDisconnect_=kg(),sa(n.eventQueue_,Je(),r)}function tY(n){n.persistentConnection_&&n.persistentConnection_.interrupt(K7)}function LF(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),_n(t,...e)}function VF(n,e,t){return CF(n.serverSyncTree_,e,t)||_t.EMPTY_NODE}function sC(n,e=n.transactionQueueTree_){if(e||$g(n,e),il(e)){let t=jF(n,e);G(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&nY(n,qd(e),t)}else MF(e)&&Bg(e,t=>{sC(n,t)})}function nY(n,e,t){let r=t.map(u=>u.currentWriteId),i=VF(n,e,r),o=i,s=i.hash();for(let u=0;u<t.length;u++){let d=t[u];G(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let f=_r(e,d.path);o=o.updateChild(f,d.currentOutputSnapshotRaw)}let a=o.val(!0),c=e;n.server_.put(c.toString(),a,u=>{LF(n,"transaction put response",{path:c.toString(),status:u});let d=[];if(u==="ok"){let f=[];for(let m=0;m<t.length;m++)t[m].status=2,d=d.concat(Gc(n.serverSyncTree_,t[m].currentWriteId)),t[m].onComplete&&f.push(()=>t[m].onComplete(null,!0,t[m].currentOutputSnapshotResolved)),t[m].unwatcher();$g(n,iC(n.transactionQueueTree_,e)),sC(n,n.transactionQueueTree_),sa(n.eventQueue_,e,d);for(let m=0;m<f.length;m++)Hd(f[m])}else{if(u==="datastale")for(let f=0;f<t.length;f++)t[f].status===3?t[f].status=4:t[f].status=0;else{tr("transaction at "+c.toString()+" failed: "+u);for(let f=0;f<t.length;f++)t[f].status=4,t[f].abortReason=u}aC(n,e)}},s)}function aC(n,e){let t=UF(n,e),r=qd(t),i=jF(n,t);return rY(n,i,r),r}function rY(n,e,t){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],u=_r(t,c.path),d=!1,f;if(G(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,i=i.concat(Gc(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Y7)d=!0,f="maxretry",i=i.concat(Gc(n.serverSyncTree_,c.currentWriteId,!0));else{let m=VF(n,c.path,s);c.currentInputSnapshot=m;let v=e[a].update(m.val());if(v!==void 0){OF("transaction failed: Data returned ",v,c.path);let w=wn(v);typeof v=="object"&&v!=null&&Kr(v,".priority")||(w=w.updatePriority(m.getPriority()));let S=c.currentWriteId,F=FF(n),W=F7(w,m,F);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=W,c.currentWriteId=Z7(n),s.splice(s.indexOf(S),1),i=i.concat(A7(n.serverSyncTree_,c.path,W,c.currentWriteId,c.applyLocally)),i=i.concat(Gc(n.serverSyncTree_,S,!0))}else d=!0,f="nodata",i=i.concat(Gc(n.serverSyncTree_,c.currentWriteId,!0))}sa(n.eventQueue_,t,i),i=[],d&&(e[a].status=2,function(m){setTimeout(m,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}$g(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Hd(r[a]);sC(n,n.transactionQueueTree_)}function UF(n,e){let t,r=n.transactionQueueTree_;for(t=je(e);t!==null&&il(r)===void 0;)r=iC(r,t),e=ht(e),t=je(e);return r}function jF(n,e){let t=[];return BF(n,e,t),t.sort((r,i)=>r.order-i.order),t}function BF(n,e,t){let r=il(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Bg(e,i=>{BF(n,i,t)})}function $g(n,e){let t=il(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,NF(e,t.length>0?t:void 0)}Bg(e,r=>{$g(n,r)})}function iY(n,e){let t=qd(UF(n,e)),r=iC(n.transactionQueueTree_,e);return V7(r,i=>{ib(n,i)}),ib(n,r),PF(r,i=>{ib(n,i)}),t}function ib(n,e){let t=il(e);if(t){let r=[],i=[],o=-1;for(let s=0;s<t.length;s++)t[s].status===3||(t[s].status===1?(G(o===s-1,"All SENT items should be at beginning of queue."),o=s,t[s].status=3,t[s].abortReason="set"):(G(t[s].status===0,"Unexpected transaction status in abort"),t[s].unwatcher(),i=i.concat(Gc(n.serverSyncTree_,t[s].currentWriteId,!0)),t[s].onComplete&&r.push(t[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?NF(e,void 0):t.length=o+1,sa(n.eventQueue_,qd(e),i);for(let s=0;s<r.length;s++)Hd(r[s])}}function oY(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function sY(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):tr(`Invalid query segment '${t}' in query '${n}'`)}return e}var k1=function(n,e){let t=aY(n),r=t.namespace;t.domain==="firebase.com"&&Ki(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Ki("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||tK();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Sg(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new nt(t.pathString)}},aY=function(n){let e="",t="",r="",i="",o="",s=!0,a="https",c=443;if(typeof n=="string"){let u=n.indexOf("//");u>=0&&(a=n.substring(0,u-1),n=n.substring(u+2));let d=n.indexOf("/");d===-1&&(d=n.length);let f=n.indexOf("?");f===-1&&(f=n.length),e=n.substring(0,Math.min(d,f)),d<f&&(i=oY(n.substring(d,f)));let m=sY(n.substring(Math.min(n.length,f)));u=e.indexOf(":"),u>=0?(s=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;let v=e.slice(0,u);if(v.toLowerCase()==="localhost")t="localhost";else if(v.split(".").length<=2)t=v;else{let w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),t=e.substring(w+1),o=r}"ns"in m&&(o=m.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var zb=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Le(this._path)?null:tF(this._path)}get ref(){return new nl(this._repo,this._path)}get _queryIdentifier(){let e=w1(this._queryParams),t=Qb(e);return t==="{}"?"default":t}get _queryObject(){return w1(this._queryParams)}isEqual(e){if(e=Ve(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=iF(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+PK(this._path)}};var nl=class n extends zb{constructor(e,t){super(e,t,new Db,!1)}get parent(){let e=rF(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};D7(nl);S7(nl);var cY="FIREBASE_DATABASE_EMULATOR_HOST",Gb={},lY=!1;function uY(n,e,t,r){n.repoInfo_=new Sg(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function dY(n,e,t,r,i){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||Ki("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_n("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let s=k1(o,i),a=s.repoInfo,c,u;typeof process<"u"&&process.env&&(u=process.env[cY]),u?(c=!0,o=`http://${u}?ns=${a.namespace}`,s=k1(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let d=i&&c?new Od(Od.OWNER):new ub(n.name,n.options,e);W7("Invalid Firebase Database URL",s),Le(s.path)||Ki("Database URL must point to the root of a Firebase Database (not including a child path).");let f=fY(a,n,d,new lb(n.name,t));return new Kb(f,n)}function hY(n,e){let t=Gb[e];(!t||t[n.key]!==n)&&Ki(`Database ${e}(${n.repoInfo_}) has already been deleted.`),tY(n),delete t[n.key]}function fY(n,e,t,r){let i=Gb[e.name];i||(i={},Gb[e.name]=i);let o=i[n.toURLString()];return o&&Ki("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new qb(n,lY,t,r),i[n.toURLString()]=o,o}var Kb=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Q7(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new nl(this._repo,Je())),this._rootInternal}_delete(){return this._rootInternal!==null&&(hY(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ki("Cannot call "+e+" on a deleted database.")}};function $F(n=$t(),e){let t=Bt(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let r=lo("database");r&&HF(t,...r)}return t}function HF(n,e,t,r={}){n=Ve(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&Ki("Cannot call useEmulator() after instance has already been initialized.");let i=n._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ki('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Od(Od.OWNER);else if(r.mockUserToken){let s=typeof r.mockUserToken=="string"?r.mockUserToken:ya(r.mockUserToken,n.app.options.projectId);o=new Od(s)}uY(i,e,t,o)}function pY(n){X8(Fn),Tt(new It("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return dY(r,i,o,t)},"PUBLIC").setMultipleInstances(!0)),ie(n1,r1,n),ie(n1,r1,"esm2017")}Xb.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Xb.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};pY();var zd=class{constructor(e){return e}},WF="database",cC=class{constructor(){return Ft(WF)}};var lC=new $("angularfire2.database-instances");function mY(n,e){let t=Wt(WF,n,e);return t&&new zd(t)}function gY(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new zd(r)}}var vY={provide:cC,deps:[[new Ie,lC]]},yY={provide:zd,useFactory:mY,deps:[[new Ie,lC],vt]};function qF(n,...e){return ie("angularfire",ft.full,"rtdb"),it([yY,vY,{provide:lC,useFactory:gY(n),multi:!0,deps:[pe,Ae,St,Pt,[new Ie,Vr],[new Ie,mr],...e]}])}var zF=We($F,!0);var YF="functions";var uC=class{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){return y(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return y(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return y(this,null,function*(){if(this.appCheck){let t=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return t.error?null:t.token}return null})}getContext(e){return y(this,null,function*(){let t=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}})}};var dC="us-central1";var hC=class{constructor(e,t,r,i,o=dC,s=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new uC(t,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(o);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=dC}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function _Y(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}var GF="@firebase/functions",KF="0.12.1";var wY="auth-internal",EY="app-check-internal",IY="messaging-internal";function TY(n){let e=(t,{instanceIdentifier:r})=>{let i=t.getProvider("app").getImmediate(),o=t.getProvider(wY),s=t.getProvider(IY),a=t.getProvider(EY);return new hC(i,o,s,a,r)};Tt(new It(YF,e,"PUBLIC").setMultipleInstances(!0)),ie(GF,KF,n),ie(GF,KF,"esm2017")}function QF(n=$t(),e=dC){let r=Bt(Ve(n),YF).getImmediate({identifier:e}),i=lo("functions");return i&&JF(r,...i),r}function JF(n,e,t){_Y(Ve(n),e,t)}TY();var Gd=class{constructor(e){return e}},XF="functions",fC=class{constructor(){return Ft(XF)}};var pC=new $("angularfire2.functions-instances");function bY(n,e){let t=Wt(XF,n,e);return t&&new Gd(t)}function CY(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Gd(r)}}var DY={provide:fC,deps:[[new Ie,pC]]},SY={provide:Gd,useFactory:bY,deps:[[new Ie,pC],vt]};function ZF(n,...e){return ie("angularfire",ft.full,"fn"),it([SY,DY,{provide:pC,useFactory:CY(n),multi:!0,deps:[pe,Ae,St,Pt,[new Ie,Vr],[new Ie,mr],...e]}])}var eL=We(QF,!0);var AY="/firebase-messaging-sw.js",RY="/firebase-cloud-messaging-push-scope",aL="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",xY="https://fcmregistrations.googleapis.com/v1",cL="google.c.a.c_id",NY="google.c.a.c_l",MY="google.c.a.ts",PY="google.c.a.e",tL=1e4;var Hg=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(Hg||{});function Yi(n){let e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function kY(n){let e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}var mC="fcm_token_details_db",OY=5,nL="fcm_token_object_Store";function FY(n){return y(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(o=>o.name).includes(mC))return null;let e=null;return(yield uy(mC,OY,{upgrade:(r,i,o,s)=>y(this,null,function*(){var a;if(i<2||!r.objectStoreNames.contains(nL))return;let c=s.objectStore(nL),u=yield c.index("fcmSenderId").get(n);if(yield c.clear(),!!u){if(i===2){let d=u;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(a=d.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:Yi(d.vapidKey)}}}else if(i===3){let d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Yi(d.auth),p256dh:Yi(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Yi(d.vapidKey)}}}else if(i===4){let d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Yi(d.auth),p256dh:Yi(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Yi(d.vapidKey)}}}}})})).close(),yield xh(mC),yield xh("fcm_vapid_details_db"),yield xh("undefined"),LY(e)?e:null})}function LY(n){if(!n||!n.subscriptionOptions)return!1;let{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var VY="firebase-messaging-database",UY=1,Kd="firebase-messaging-store",gC=null;function lL(){return gC||(gC=uy(VY,UY,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Kd)}}})),gC}function jY(n){return y(this,null,function*(){let e=uL(n),r=yield(yield lL()).transaction(Kd).objectStore(Kd).get(e);if(r)return r;{let i=yield FY(n.appConfig.senderId);if(i)return yield _C(n,i),i}})}function _C(n,e){return y(this,null,function*(){let t=uL(n),i=(yield lL()).transaction(Kd,"readwrite");return yield i.objectStore(Kd).put(e,t),yield i.done,e})}function uL({appConfig:n}){return n.appId}var BY={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},kn=new rr("messaging","Messaging",BY);function $Y(n,e){return y(this,null,function*(){let t=yield EC(n),r=dL(e),i={method:"POST",headers:t,body:JSON.stringify(r)},o;try{o=yield(yield fetch(wC(n.appConfig),i)).json()}catch(s){throw kn.create("token-subscribe-failed",{errorInfo:s?.toString()})}if(o.error){let s=o.error.message;throw kn.create("token-subscribe-failed",{errorInfo:s})}if(!o.token)throw kn.create("token-subscribe-no-token");return o.token})}function HY(n,e){return y(this,null,function*(){let t=yield EC(n),r=dL(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)},o;try{o=yield(yield fetch(`${wC(n.appConfig)}/${e.token}`,i)).json()}catch(s){throw kn.create("token-update-failed",{errorInfo:s?.toString()})}if(o.error){let s=o.error.message;throw kn.create("token-update-failed",{errorInfo:s})}if(!o.token)throw kn.create("token-update-no-token");return o.token})}function WY(n,e){return y(this,null,function*(){let r={method:"DELETE",headers:yield EC(n)};try{let o=yield(yield fetch(`${wC(n.appConfig)}/${e}`,r)).json();if(o.error){let s=o.error.message;throw kn.create("token-unsubscribe-failed",{errorInfo:s})}}catch(i){throw kn.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})}function wC({projectId:n}){return`${xY}/projects/${n}/registrations`}function EC(t){return y(this,arguments,function*({appConfig:n,installations:e}){let r=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})})}function dL({p256dh:n,auth:e,endpoint:t,vapidKey:r}){let i={web:{endpoint:t,auth:e,p256dh:n}};return r!==aL&&(i.web.applicationPubKey=r),i}var qY=7*24*60*60*1e3;function zY(n){return y(this,null,function*(){let e=yield KY(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Yi(e.getKey("auth")),p256dh:Yi(e.getKey("p256dh"))},r=yield jY(n.firebaseDependencies);if(r){if(YY(r.subscriptionOptions,t))return Date.now()>=r.createTime+qY?GY(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield WY(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return rL(n.firebaseDependencies,t)}else return rL(n.firebaseDependencies,t)})}function GY(n,e){return y(this,null,function*(){try{let t=yield HY(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield _C(n.firebaseDependencies,r),t}catch(t){throw t}})}function rL(n,e){return y(this,null,function*(){let r={token:yield $Y(n,e),createTime:Date.now(),subscriptionOptions:e};return yield _C(n,r),r.token})}function KY(n,e){return y(this,null,function*(){let t=yield n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:kY(e)})})}function YY(n,e){let t=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,i=e.auth===n.auth,o=e.p256dh===n.p256dh;return t&&r&&i&&o}function iL(n){let e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return QY(e,n),JY(e,n),XY(e,n),e}function QY(n,e){if(!e.notification)return;n.notification={};let t=e.notification.title;t&&(n.notification.title=t);let r=e.notification.body;r&&(n.notification.body=r);let i=e.notification.image;i&&(n.notification.image=i);let o=e.notification.icon;o&&(n.notification.icon=o)}function JY(n,e){e.data&&(n.data=e.data)}function XY(n,e){var t,r,i,o,s;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;n.fcmOptions={};let a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(o=e.notification)===null||o===void 0?void 0:o.click_action;a&&(n.fcmOptions.link=a);let c=(s=e.fcmOptions)===null||s===void 0?void 0:s.analytics_label;c&&(n.fcmOptions.analyticsLabel=c)}function ZY(n){return typeof n=="object"&&!!n&&cL in n}eQ("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function eQ(n,e){let t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function tQ(n){if(!n||!n.options)throw vC("App Configuration Object");if(!n.name)throw vC("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(let r of e)if(!t[r])throw vC(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function vC(n){return kn.create("missing-app-config-values",{valueName:n})}var yC=class{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=tQ(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}};function nQ(n){return y(this,null,function*(){try{n.swRegistration=yield navigator.serviceWorker.register(AY,{scope:RY}),n.swRegistration.update().catch(()=>{}),yield rQ(n.swRegistration)}catch(e){throw kn.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function rQ(n){return y(this,null,function*(){return new Promise((e,t)=>{let r=setTimeout(()=>t(new Error(`Service worker not registered after ${tL} ms`)),tL),i=n.installing||n.waiting;n.active?(clearTimeout(r),e()):i?i.onstatechange=o=>{var s;((s=o.target)===null||s===void 0?void 0:s.state)==="activated"&&(i.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),t(new Error("No incoming service worker found.")))})})}function iQ(n,e){return y(this,null,function*(){if(!e&&!n.swRegistration&&(yield nQ(n)),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw kn.create("invalid-sw-registration");n.swRegistration=e}})}function oQ(n,e){return y(this,null,function*(){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=aL)})}function sQ(n,e){return y(this,null,function*(){if(!navigator)throw kn.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw kn.create("permission-blocked");return yield oQ(n,e?.vapidKey),yield iQ(n,e?.serviceWorkerRegistration),zY(n)})}function aQ(n,e,t){return y(this,null,function*(){let r=cQ(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[cL],message_name:t[NY],message_time:t[MY],message_device_time:Math.floor(Date.now()/1e3)})})}function cQ(n){switch(n){case Hg.NOTIFICATION_CLICKED:return"notification_open";case Hg.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function lQ(n,e){return y(this,null,function*(){let t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Hg.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(iL(t)):n.onMessageHandler.next(iL(t)));let r=t.data;ZY(r)&&r[PY]==="1"&&(yield aQ(n,t.messageType,r))})}var oL="@firebase/messaging",sL="0.12.16";var uQ=n=>{let e=new yC(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>lQ(e,t)),e},dQ=n=>{let e=n.getProvider("messaging").getImmediate();return{getToken:r=>sQ(e,r)}};function hQ(){Tt(new It("messaging",uQ,"PUBLIC")),Tt(new It("messaging-internal",dQ,"PRIVATE")),ie(oL,sL),ie(oL,sL,"esm2017")}function hL(){return y(this,null,function*(){try{yield _a()}catch{return!1}return typeof window<"u"&&Gr()&&ql()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function fL(n=$t()){return hL().then(e=>{if(!e)throw kn.create("unsupported-browser")},e=>{throw kn.create("indexed-db-unsupported")}),Bt(Ve(n),"messaging").getImmediate()}hQ();var Yd=class{constructor(e){return e}},pL="messaging",IC=class{constructor(){return Ft(pL)}};var TC=new $("angularfire2.messaging-instances");function fQ(n,e,t){if(ki(t))return null;let r=Wt(pL,n,e);return r&&new Yd(r)}function pQ(n){return(e,t,r)=>{if(ki(r))return null;let i=e.runOutsideAngular(()=>n(t));return new Yd(i)}}var mQ={provide:IC,deps:[[new Ie,TC]]},gQ={provide:Yd,useFactory:fQ,deps:[[new Ie,TC],vt,Dt]};function mL(n,...e){return ie("angularfire",ft.full,"fcm"),it([gQ,mQ,{provide:TC,useFactory:pQ(n),multi:!0,deps:[pe,Ae,Dt,St,Pt,...e]}])}var gL=We(fL,!0);var Qd=class{constructor(e){return e}},vL="performance",bC=class{constructor(){return Ft(vL)}};var CC=new $("angularfire2.performance-instances");function vQ(n,e,t){if(!oc(t))return null;let r=Wt(vL,n,e);return r&&new Qd(r)}function yQ(n){return(e,t,r)=>{if(!oc(t))return null;let i=e.runOutsideAngular(()=>n(r));return new Qd(i)}}var _Q={provide:bC,deps:[[new Ie,CC]]},wQ={provide:Qd,useFactory:vQ,deps:[[new Ie,CC],vt,Dt]};function yL(n,...e){return ie("angularfire",ft.full,"perf"),it([wQ,_Q,{provide:CC,useFactory:yQ(n),multi:!0,deps:[pe,Dt,Ae,St,Pt,...e]}])}var _L=We(gS,!0);var CL="firebasestorage.googleapis.com",EQ="storageBucket",IQ=2*60*1e3,TQ=10*60*1e3;var hi=class n extends Gn{constructor(e,t,r=0){super(DC(e),`Firebase Storage: ${t} (${DC(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return DC(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Ji=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Ji||{});function DC(n){return"storage/"+n}function bQ(){let n="An unknown error occurred, please check the error payload for server response.";return new hi(Ji.UNKNOWN,n)}function CQ(){return new hi(Ji.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function DQ(){return new hi(Ji.CANCELED,"User canceled the upload/download.")}function SQ(n){return new hi(Ji.INVALID_URL,"Invalid URL '"+n+"'.")}function AQ(n){return new hi(Ji.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function wL(n){return new hi(Ji.INVALID_ARGUMENT,n)}function DL(){return new hi(Ji.APP_DELETED,"The Firebase app was deleted.")}function RQ(n){return new hi(Ji.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var Qi=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw AQ(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(te){te.path.charAt(te.path.length-1)==="/"&&(te.path_=te.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function u(te){te.path_=decodeURIComponent(te.path)}let d="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",v=new RegExp(`^https?://${f}/${d}/b/${i}/o${m}`,"i"),w={bucket:1,path:3},R=t===CL?"(?:storage.googleapis.com|storage.cloud.google.com)":t,S="([^?#]*)",F=new RegExp(`^https?://${R}/${i}/${S}`,"i"),q=[{regex:a,indices:c,postModify:o},{regex:v,indices:w,postModify:u},{regex:F,indices:{bucket:1,path:2},postModify:u}];for(let te=0;te<q.length;te++){let Xe=q[te],ue=Xe.regex.exec(e);if(ue){let A=ue[Xe.indices.bucket],_=ue[Xe.indices.path];_||(_=""),r=new n(A,_),Xe.postModify(r);break}}if(r==null)throw SQ(e);return r}},SC=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function xQ(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function c(){return a===2}let u=!1;function d(...S){u||(u=!0,e.apply(null,S))}function f(S){i=setTimeout(()=>{i=null,n(v,c())},S)}function m(){o&&clearTimeout(o)}function v(S,...F){if(u){m();return}if(S){m(),d.call(null,S,...F);return}if(c()||s){m(),d.call(null,S,...F);return}r<64&&(r*=2);let q;a===1?(a=2,q=0):q=(r+Math.random())*1e3,f(q)}let w=!1;function R(S){w||(w=!0,m(),!u&&(i!==null?(S||(a=2),clearTimeout(i),f(0)):S||(a=1)))}return f(0),o=setTimeout(()=>{s=!0,R(!0)},t),R}function NQ(n){n(!1)}function MQ(n){return n!==void 0}function EL(n,e,t,r){if(r<e)throw wL(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw wL(`Invalid value for '${n}'. Expected ${t} or less.`)}function PQ(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var AC=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(AC||{});function kQ(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var RC=class{constructor(e,t,r,i,o,s,a,c,u,d,f,m=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,w)=>{this.resolve_=v,this.reject_=w,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new ol(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===AC.NO_ERROR,c=o.getStatus();if(!a||kQ(c,this.additionalRetryCodes_)&&this.retry){let d=o.getErrorCode()===AC.ABORT;r(!1,new ol(!1,null,d));return}let u=this.successCodes_.indexOf(c)!==-1;r(!0,new ol(u,o))})},t=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());MQ(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=bQ();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(i.canceled){let c=this.appDelete_?DL():DQ();s(c)}else{let c=CQ();s(c)}};this.canceled_?t(!1,new ol(!1,null,!0)):this.backoffId_=xQ(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&NQ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},ol=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function OQ(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function FQ(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function LQ(n,e){e&&(n["X-Firebase-GMPID"]=e)}function VQ(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function UQ(n,e,t,r,i,o,s=!0){let a=PQ(n.urlParams),c=n.url+a,u=Object.assign({},n.headers);return LQ(u,e),OQ(u,t),FQ(u,o),VQ(u,r),new RC(c,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s)}function jQ(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function BQ(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var pme=256*1024;var xC=class n{constructor(e,t){this._service=e,t instanceof Qi?this._location=t:this._location=Qi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new Qi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return BQ(this._location.path)}get storage(){return this._service}get parent(){let e=jQ(this._location.path);if(e===null)return null;let t=new Qi(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw RQ(e)}};function IL(n,e){let t=e?.[EQ];return t==null?null:Qi.makeFromBucketSpec(t,n)}function $Q(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:ya(i,n.app.options.projectId))}var NC=class{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=CL,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=IQ,this._maxUploadRetryTime=TQ,this._requests=new Set,i!=null?this._bucket=Qi.makeFromBucketSpec(i,this._host):this._bucket=IL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Qi.makeFromBucketSpec(this._url,e):this._bucket=IL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){EL("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){EL("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return y(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return y(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xC(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new SC(DL());{let s=UQ(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){return y(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},TL="@firebase/storage",bL="0.13.5";var SL="storage";function AL(n=$t(),e){n=Ve(n);let r=Bt(n,SL).getImmediate({identifier:e}),i=lo("storage");return i&&RL(r,...i),r}function RL(n,e,t,r={}){$Q(n,e,t,r)}function HQ(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new NC(t,r,i,e,Fn)}function WQ(){Tt(new It(SL,HQ,"PUBLIC").setMultipleInstances(!0)),ie(TL,bL,""),ie(TL,bL,"esm2017")}WQ();var Jd=class{constructor(e){return e}},xL="storage",MC=class{constructor(){return Ft(xL)}};var PC=new $("angularfire2.storage-instances");function qQ(n,e){let t=Wt(xL,n,e);return t&&new Jd(t)}function zQ(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Jd(r)}}var GQ={provide:MC,deps:[[new Ie,PC]]},KQ={provide:Jd,useFactory:qQ,deps:[[new Ie,PC],vt]};function NL(n,...e){return ie("angularfire",ft.full,"gcs"),it([KQ,GQ,{provide:PC,useFactory:zQ(n),multi:!0,deps:[pe,Ae,St,Pt,[new Ie,Vr],[new Ie,mr],...e]}])}var ML=We(AL,!0);var kC="@firebase/remote-config",PL="0.5.0";var OL="remote-config",kL=100;var YQ={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser","custom-signal-max-allowed-signals":"Setting more than {$maxSignals} custom signals is not supported."},On=new rr("remoteconfig","Remote Config",YQ);function FL(n=$t()){return n=Ve(n),Bt(n,OL).getImmediate()}function LL(n){let e=Ve(n);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}var OC=class{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){return y(this,null,function*(){let[t,r]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,t))return r;e.eTag=r&&r.eTag;let i=yield this.client.fetch(e),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return i.status===200&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(o),i})}};function QQ(n=navigator){return n.languages&&n.languages[0]||n.language}var FC=class{constructor(e,t,r,i,o,s){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=o,this.appId=s}fetch(e){return y(this,null,function*(){let[t,r]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:t,app_instance_id_token:r,app_id:this.appId,language_code:QQ(),custom_signals:e.customSignals},c={method:"POST",headers:s,body:JSON.stringify(a)},u=fetch(o,c),d=new Promise((S,F)=>{e.signal.addEventListener(()=>{let W=new Error("The operation was aborted.");W.name="AbortError",F(W)})}),f;try{yield Promise.race([u,d]),f=yield u}catch(S){let F="fetch-client-network";throw S?.name==="AbortError"&&(F="fetch-timeout"),On.create(F,{originalErrorMessage:S?.message})}let m=f.status,v=f.headers.get("ETag")||void 0,w,R;if(f.status===200){let S;try{S=yield f.json()}catch(F){throw On.create("fetch-client-parse",{originalErrorMessage:F?.message})}w=S.entries,R=S.state}if(R==="INSTANCE_STATE_UNSPECIFIED"?m=500:R==="NO_CHANGE"?m=304:(R==="NO_TEMPLATE"||R==="EMPTY_CONFIG")&&(w={}),m!==304&&m!==200)throw On.create("fetch-status",{httpStatus:m});return{status:m,eTag:v,config:w}})}};function JQ(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(On.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function XQ(n){if(!(n instanceof Gn)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var LC=class{constructor(e,t){this.client=e,this.storage=t}fetch(e){return y(this,null,function*(){let t=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,t)})}attemptFetch(i,o){return y(this,arguments,function*(e,{throttleEndTimeMillis:t,backoffCount:r}){yield JQ(e.signal,t);try{let s=yield this.client.fetch(e);return yield this.storage.deleteThrottleMetadata(),s}catch(s){if(!XQ(s))throw s;let a={throttleEndTimeMillis:Date.now()+wa(r),backoffCount:r+1};return yield this.storage.setThrottleMetadata(a),this.attemptFetch(e,a)}})}};var ZQ=60*1e3,eJ=12*60*60*1e3,VC=class{get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}constructor(e,t,r,i,o){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=o,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:ZQ,minimumFetchIntervalMillis:eJ},this.defaultConfig={}}};function Wg(n,e){let t=n.target.error||void 0;return On.create(e,{originalErrorMessage:t&&t?.message})}var qo="app_namespace_store",tJ="firebase_remote_config",nJ=1;function rJ(){return new Promise((n,e)=>{try{let t=indexedDB.open(tJ,nJ);t.onerror=r=>{e(Wg(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(qo,{keyPath:"compositeKey"})}}}catch(t){e(On.create("storage-open",{originalErrorMessage:t?.message}))}})}var UC=class{constructor(e,t,r,i=rJ()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}getCustomSignals(){return this.get("custom_signals")}setCustomSignals(e){return y(this,null,function*(){let r=(yield this.openDbPromise).transaction([qo],"readwrite"),i=yield this.getWithTransaction("custom_signals",r),o=Object.assign(Object.assign({},i),e),s=Object.fromEntries(Object.entries(o).filter(([a,c])=>c!==null).map(([a,c])=>typeof c=="number"?[a,c.toString()]:[a,c]));if(Object.keys(s).length>kL)throw On.create("custom-signal-max-allowed-signals",{maxSignals:kL});return yield this.setWithTransaction("custom_signals",s,r),s})}getWithTransaction(e,t){return y(this,null,function*(){return new Promise((r,i)=>{let o=t.objectStore(qo),s=this.createCompositeKey(e);try{let a=o.get(s);a.onerror=c=>{i(Wg(c,"storage-get"))},a.onsuccess=c=>{let u=c.target.result;r(u?u.value:void 0)}}catch(a){i(On.create("storage-get",{originalErrorMessage:a?.message}))}})})}setWithTransaction(e,t,r){return y(this,null,function*(){return new Promise((i,o)=>{let s=r.objectStore(qo),a=this.createCompositeKey(e);try{let c=s.put({compositeKey:a,value:t});c.onerror=u=>{o(Wg(u,"storage-set"))},c.onsuccess=()=>{i()}}catch(c){o(On.create("storage-set",{originalErrorMessage:c?.message}))}})})}get(e){return y(this,null,function*(){let r=(yield this.openDbPromise).transaction([qo],"readonly");return this.getWithTransaction(e,r)})}set(e,t){return y(this,null,function*(){let i=(yield this.openDbPromise).transaction([qo],"readwrite");return this.setWithTransaction(e,t,i)})}delete(e){return y(this,null,function*(){let t=yield this.openDbPromise;return new Promise((r,i)=>{let s=t.transaction([qo],"readwrite").objectStore(qo),a=this.createCompositeKey(e);try{let c=s.delete(a);c.onerror=u=>{i(Wg(u,"storage-delete"))},c.onsuccess=()=>{r()}}catch(c){i(On.create("storage-delete",{originalErrorMessage:c?.message}))}})})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}};var jC=class{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}getCustomSignals(){return this.customSignals}loadFromStorage(){return y(this,null,function*(){let e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),i=this.storage.getCustomSignals(),o=yield e;o&&(this.lastFetchStatus=o);let s=yield t;s&&(this.lastSuccessfulFetchTimestampMillis=s);let a=yield r;a&&(this.activeConfig=a);let c=yield i;c&&(this.customSignals=c)})}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}setCustomSignals(e){return y(this,null,function*(){this.customSignals=yield this.storage.setCustomSignals(e)})}};function iJ(){Tt(new It(OL,n,"PUBLIC").setMultipleInstances(!0)),ie(kC,PL),ie(kC,PL,"esm2017");function n(e,{instanceIdentifier:t}){let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw On.create("registration-window");if(!Gr())throw On.create("indexed-db-unavailable");let{projectId:o,apiKey:s,appId:a}=r.options;if(!o)throw On.create("registration-project-id");if(!s)throw On.create("registration-api-key");if(!a)throw On.create("registration-app-id");t=t||"firebase";let c=new UC(a,r.name,t),u=new jC(c),d=new ir(kC);d.logLevel=en.ERROR;let f=new FC(i,Fn,t,o,s,a),m=new LC(f,c),v=new OC(m,c,u,d),w=new VC(r,v,u,c,d);return LL(w),w}}iJ();var Xd=class{constructor(e){return e}},VL="remote-config",BC=class{constructor(){return Ft(VL)}};var $C=new $("angularfire2.remote-config-instances");function oJ(n,e,t){if(ki(t))return null;let r=Wt(VL,n,e);return r&&new Xd(r)}function sJ(n){return(e,t,r)=>{if(ki(r))return null;let i=e.runOutsideAngular(()=>n(t));return new Xd(i)}}var aJ={provide:BC,deps:[[new Ie,$C]]},cJ={provide:Xd,useFactory:oJ,deps:[[new Ie,$C],vt,Dt]};function UL(n,...e){return ie("angularfire",ft.full,"rc"),it([cJ,aJ,{provide:$C,useFactory:sJ(n),multi:!0,deps:[pe,Ae,Dt,St,Pt,...e]}])}var jL=We(FL,!0);var BL={firebaseConfig:{apiKey:"AIzaSyCaMopW6HWBwUEvvtDZUQ7UemvGdT7xGEA",authDomain:"dash-boar-7ee0d.firebaseapp.com",projectId:"dash-boar-7ee0d",storageBucket:"dash-boar-7ee0d.firebasestorage.app",messagingSenderId:"325394396819",appId:"1:325394396819:web:82c3741552a46bb149bf66",measurementId:"G-LXRMSZ5ZSH"},production:!0};var $L={providers:[SN(),Qx({eventCoalescing:!0}),wM(EM),bM(()=>CM(BL.firebaseConfig)),AP(()=>xP()),QP(()=>GP()),YP,OI,XO(()=>ZO()),qF(()=>zF()),ZF(()=>eL()),mL(()=>gL()),yL(()=>_L()),NL(()=>ML()),UL(()=>jL())]};var qn=class n{destroyRef=D(Ri);firestore=D(Zs);destroyed=new ct;constructor(){this.destroyRef.onDestroy(()=>{this.destroyed.next(),this.destroyed.complete()})}generateNextId(){return y(this,null,function*(){let e=yield Q0(this.collectionRef),t=0;return e.forEach(r=>{let i=r.data(),o=parseInt(i.id,10);!isNaN(o)&&o>t&&(t=o)}),(t+1).toString()})}createData(e,t){let r=Y0(this.collectionRef,e);return J0(r,t)}updateData(e,t){return J0(Y0(this.collectionRef,e),t,{merge:!0})}getDataById(e){return y(this,null,function*(){let t=e1(this.collectionRef,t1("id","==",e)),r=yield Q0(t);if(!r.empty)return r.docs[0].data()})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ke=class n extends qn{collectionPath="/race-configs";collectionRef=yr(this.firestore,this.collectionPath);activeRaceConfig=ee(void 0);constructor(){super(),this.getAll().pipe(Ye()).subscribe(e=>{e.length>0&&this.activeRaceConfig.set(e.at(0))})}updateFuelDurationMinute(e){let t=this.activeRaceConfig();return t?(t.fuelDurationMinute=e,this.updateData(t.id,t)):Promise.resolve()}updateStartRaceDriverId(e){let t=this.activeRaceConfig();return t?(t.startRaceDriverId=e,this.updateData(t.id,t)):Promise.resolve()}updateNextPitDriverId(e){let t=this.activeRaceConfig();return t?(t.nextPitDriverId=e,this.updateData(t.id,t)):Promise.resolve()}updateNextPitRefueling(e){let t=this.activeRaceConfig();return t?(t.nextPitRefueling=e,this.updateData(t.id,t)):Promise.resolve()}updateNextPitTyreChange(e){let t=this.activeRaceConfig();return t?(t.nextPitTyreChange=e,this.updateData(t.id,t)):Promise.resolve()}updateReferenceLapTime(e){let t=this.activeRaceConfig();return t?(t.referenceLapTimeMillisecond=e,this.updateData(t.id,t)):Promise.resolve()}getAll(){return vr(this.collectionRef).pipe(zt(this.destroyed),Q(e=>e.map(t=>t).filter(t=>!t.deleted)))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};var lJ=Math.pow(10,8)*24*60*60*1e3,Qge=-lJ,qg=6048e5,HL=864e5,sl=6e4,al=36e5,WL=1e3;var uJ=3600;var qL=uJ*24,Jge=qL*7,dJ=qL*365.2425,hJ=dJ/12,Xge=hJ*3,HC=Symbol.for("constructDateFrom");function wt(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&HC in n?n[HC](e):n instanceof Date?new n.constructor(e):new Date(e)}function ce(n,e){return wt(e||n,n)}function zL(n,e,t){let r=ce(n,t?.in);return isNaN(e)?wt(t?.in||n,NaN):(e&&r.setDate(r.getDate()+e),r)}function GL(n,e,t){let r=ce(n,t?.in);if(isNaN(e))return wt(t?.in||n,NaN);if(!e)return r;let i=r.getDate(),o=wt(t?.in||n,r.getTime());o.setMonth(r.getMonth()+e+1,0);let s=o.getDate();return i>=s?o:(r.setFullYear(o.getFullYear(),o.getMonth(),i),r)}function cl(n,e,t){let{years:r=0,months:i=0,weeks:o=0,days:s=0,hours:a=0,minutes:c=0,seconds:u=0}=e,d=ce(n,t?.in),f=i||r?GL(d,i+r*12):d,m=s||o?zL(f,s+o*7):f,v=c+a*60,R=(u+v*60)*1e3;return wt(t?.in||n,+m+R)}function nr(n,e,t){return wt(t?.in||n,+ce(n)+e)}function Xi(n,e,t){return nr(n,e*al,t)}var fJ={};function zo(){return fJ}function Zi(n,e){let t=zo(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=ce(n,e?.in),o=i.getDay(),s=(o<r?7:0)+o-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function aa(n,e){return Zi(n,me(j({},e),{weekStartsOn:1}))}function zg(n,e){let t=ce(n,e?.in),r=t.getFullYear(),i=wt(t,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);let o=aa(i),s=wt(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);let a=aa(s);return t.getTime()>=o.getTime()?r+1:t.getTime()>=a.getTime()?r:r-1}function WC(n){let e=ce(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function In(n,...e){let t=wt.bind(null,n||e.find(r=>typeof r=="object"));return e.map(t)}function qC(n,e){let t=ce(n,e?.in);return t.setHours(0,0,0,0),t}function Gg(n,e,t){let[r,i]=In(t?.in,n,e),o=qC(r),s=qC(i),a=+o-WC(o),c=+s-WC(s);return Math.round((a-c)/HL)}function KL(n,e){let t=zg(n,e),r=wt(e?.in||n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),aa(r)}function ca(n,e,t){let r=ce(n,t?.in);return r.setTime(r.getTime()+e*sl),r}function ll(n,e,t){return nr(n,e*1e3,t)}function la(n,e){let t=+ce(n)-+ce(e);return t<0?-1:t>0?1:t}function YL(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function QL(n){return!(!YL(n)&&typeof n!="number"||isNaN(+ce(n)))}function JL(n,e,t){let[r,i]=In(t?.in,n,e),o=r.getFullYear()-i.getFullYear(),s=r.getMonth()-i.getMonth();return o*12+s}function XL(n,e,t){let[r,i]=In(t?.in,n,e);return r.getFullYear()-i.getFullYear()}function eV(n,e,t){let[r,i]=In(t?.in,n,e),o=ZL(r,i),s=Math.abs(Gg(r,i));r.setDate(r.getDate()-o*s);let a=+(ZL(r,i)===-o),c=o*(s-a);return c===0?0:c}function ZL(n,e){let t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function ul(n){return e=>{let r=(n?Math[n]:Math.trunc)(e);return r===0?0:r}}function tV(n,e,t){let[r,i]=In(t?.in,n,e),o=(+r-+i)/al;return ul(t?.roundingMethod)(o)}function eo(n,e){return+ce(n)-+ce(e)}function Kg(n,e,t){let r=eo(n,e)/sl;return ul(t?.roundingMethod)(r)}function nV(n,e){let t=ce(n,e?.in);return t.setHours(23,59,59,999),t}function rV(n,e){let t=ce(n,e?.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function iV(n,e){let t=ce(n,e?.in);return+nV(t,e)==+rV(t,e)}function oV(n,e,t){let[r,i,o]=In(t?.in,n,n,e),s=la(i,o),a=Math.abs(JL(i,o));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-s*a);let c=la(i,o)===-s;iV(r)&&a===1&&la(r,o)===1&&(c=!1);let u=s*(a-+c);return u===0?0:u}function Yg(n,e,t){let r=eo(n,e)/1e3;return ul(t?.roundingMethod)(r)}function sV(n,e,t){let[r,i]=In(t?.in,n,e),o=la(r,i),s=Math.abs(XL(r,i));r.setFullYear(1584),i.setFullYear(1584);let a=la(r,i)===-o,c=o*(s-+a);return c===0?0:c}function aV(n,e){let[t,r]=In(n,e.start,e.end);return{start:t,end:r}}function cV(n,e){let t=ce(n,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}var pJ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},lV=(n,e,t)=>{let r,i=pJ[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Qg(n){return(e={})=>{let t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}var mJ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},gJ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},vJ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},uV={date:Qg({formats:mJ,defaultWidth:"full"}),time:Qg({formats:gJ,defaultWidth:"full"}),dateTime:Qg({formats:vJ,defaultWidth:"full"})};var yJ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},dV=(n,e,t,r)=>yJ[n];function dl(n){return(e,t)=>{let r=t?.context?String(t.context):"standalone",i;if(r==="formatting"&&n.formattingValues){let s=n.defaultFormattingWidth||n.defaultWidth,a=t?.width?String(t.width):s;i=n.formattingValues[a]||n.formattingValues[s]}else{let s=n.defaultWidth,a=t?.width?String(t.width):n.defaultWidth;i=n.values[a]||n.values[s]}let o=n.argumentCallback?n.argumentCallback(e):e;return i[o]}}var _J={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},wJ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},EJ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},IJ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},TJ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},bJ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},CJ=(n,e)=>{let t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},hV={ordinalNumber:CJ,era:dl({values:_J,defaultWidth:"wide"}),quarter:dl({values:wJ,defaultWidth:"wide",argumentCallback:n=>n-1}),month:dl({values:EJ,defaultWidth:"wide"}),day:dl({values:IJ,defaultWidth:"wide"}),dayPeriod:dl({values:TJ,defaultWidth:"wide",formattingValues:bJ,defaultFormattingWidth:"wide"})};function hl(n){return(e,t={})=>{let r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],o=e.match(i);if(!o)return null;let s=o[0],a=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(a)?SJ(a,f=>f.test(s)):DJ(a,f=>f.test(s)),u;u=n.valueCallback?n.valueCallback(c):c,u=t.valueCallback?t.valueCallback(u):u;let d=e.slice(s.length);return{value:u,rest:d}}}function DJ(n,e){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function SJ(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function fV(n){return(e,t={})=>{let r=e.match(n.matchPattern);if(!r)return null;let i=r[0],o=e.match(n.parsePattern);if(!o)return null;let s=n.valueCallback?n.valueCallback(o[0]):o[0];s=t.valueCallback?t.valueCallback(s):s;let a=e.slice(i.length);return{value:s,rest:a}}}var AJ=/^(\d+)(th|st|nd|rd)?/i,RJ=/\d+/i,xJ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},NJ={any:[/^b/i,/^(a|c)/i]},MJ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},PJ={any:[/1/i,/2/i,/3/i,/4/i]},kJ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},OJ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},FJ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},LJ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},VJ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},UJ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},pV={ordinalNumber:fV({matchPattern:AJ,parsePattern:RJ,valueCallback:n=>parseInt(n,10)}),era:hl({matchPatterns:xJ,defaultMatchWidth:"wide",parsePatterns:NJ,defaultParseWidth:"any"}),quarter:hl({matchPatterns:MJ,defaultMatchWidth:"wide",parsePatterns:PJ,defaultParseWidth:"any",valueCallback:n=>n+1}),month:hl({matchPatterns:kJ,defaultMatchWidth:"wide",parsePatterns:OJ,defaultParseWidth:"any"}),day:hl({matchPatterns:FJ,defaultMatchWidth:"wide",parsePatterns:LJ,defaultParseWidth:"any"}),dayPeriod:hl({matchPatterns:VJ,defaultMatchWidth:"any",parsePatterns:UJ,defaultParseWidth:"any"})};var zC={code:"en-US",formatDistance:lV,formatLong:uV,formatRelative:dV,localize:hV,match:pV,options:{weekStartsOn:0,firstWeekContainsDate:1}};function mV(n,e){let t=ce(n,e?.in);return Gg(t,cV(t))+1}function gV(n,e){let t=ce(n,e?.in),r=+aa(t)-+KL(t);return Math.round(r/qg)+1}function Jg(n,e){let t=ce(n,e?.in),r=t.getFullYear(),i=zo(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,s=wt(e?.in||n,0);s.setFullYear(r+1,0,o),s.setHours(0,0,0,0);let a=Zi(s,e),c=wt(e?.in||n,0);c.setFullYear(r,0,o),c.setHours(0,0,0,0);let u=Zi(c,e);return+t>=+a?r+1:+t>=+u?r:r-1}function vV(n,e){let t=zo(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,i=Jg(n,e),o=wt(e?.in||n,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),Zi(o,e)}function yV(n,e){let t=ce(n,e?.in),r=+Zi(t,e)-+vV(t,e);return Math.round(r/qg)+1}function qe(n,e){let t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}var to={y(n,e){let t=n.getFullYear(),r=t>0?t:1-t;return qe(e==="yy"?r%100:r,e.length)},M(n,e){let t=n.getMonth();return e==="M"?String(t+1):qe(t+1,2)},d(n,e){return qe(n.getDate(),e.length)},a(n,e){let t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return qe(n.getHours()%12||12,e.length)},H(n,e){return qe(n.getHours(),e.length)},m(n,e){return qe(n.getMinutes(),e.length)},s(n,e){return qe(n.getSeconds(),e.length)},S(n,e){let t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return qe(i,e.length)}};var fl={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},GC={G:function(n,e,t){let r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){let r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return to.y(n,e)},Y:function(n,e,t,r){let i=Jg(n,r),o=i>0?i:1-i;if(e==="YY"){let s=o%100;return qe(s,2)}return e==="Yo"?t.ordinalNumber(o,{unit:"year"}):qe(o,e.length)},R:function(n,e){let t=zg(n);return qe(t,e.length)},u:function(n,e){let t=n.getFullYear();return qe(t,e.length)},Q:function(n,e,t){let r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return qe(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){let r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return qe(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){let r=n.getMonth();switch(e){case"M":case"MM":return to.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){let r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return qe(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){let i=yV(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):qe(i,e.length)},I:function(n,e,t){let r=gV(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):qe(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):to.d(n,e)},D:function(n,e,t){let r=mV(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):qe(r,e.length)},E:function(n,e,t){let r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){let i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return qe(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){let i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return qe(o,e.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){let r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return qe(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){let i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){let r=n.getHours(),i;switch(r===12?i=fl.noon:r===0?i=fl.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){let r=n.getHours(),i;switch(r>=17?i=fl.evening:r>=12?i=fl.afternoon:r>=4?i=fl.morning:i=fl.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return to.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):to.H(n,e)},K:function(n,e,t){let r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):qe(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):qe(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):to.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):to.s(n,e)},S:function(n,e){return to.S(n,e)},X:function(n,e,t){let r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return wV(r);case"XXXX":case"XX":return ua(r);case"XXXXX":case"XXX":default:return ua(r,":")}},x:function(n,e,t){let r=n.getTimezoneOffset();switch(e){case"x":return wV(r);case"xxxx":case"xx":return ua(r);case"xxxxx":case"xxx":default:return ua(r,":")}},O:function(n,e,t){let r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+_V(r,":");case"OOOO":default:return"GMT"+ua(r,":")}},z:function(n,e,t){let r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+_V(r,":");case"zzzz":default:return"GMT"+ua(r,":")}},t:function(n,e,t){let r=Math.trunc(+n/1e3);return qe(r,e.length)},T:function(n,e,t){return qe(+n,e.length)}};function _V(n,e=""){let t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),o=r%60;return o===0?t+String(i):t+String(i)+e+qe(o,2)}function wV(n,e){return n%60===0?(n>0?"-":"+")+qe(Math.abs(n)/60,2):ua(n,e)}function ua(n,e=""){let t=n>0?"-":"+",r=Math.abs(n),i=qe(Math.trunc(r/60),2),o=qe(r%60,2);return t+i+e+o}var EV=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},IV=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},jJ=(n,e)=>{let t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return EV(n,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",EV(r,e)).replace("{{time}}",IV(i,e))},TV={p:IV,P:jJ};var BJ=/^D+$/,$J=/^Y+$/,HJ=["D","DD","YY","YYYY"];function bV(n){return BJ.test(n)}function CV(n){return $J.test(n)}function DV(n,e,t){let r=WJ(n,e,t);if(console.warn(r),HJ.includes(n))throw new RangeError(r)}function WJ(n,e,t){let r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}var qJ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,zJ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,GJ=/^'([^]*?)'?$/,KJ=/''/g,YJ=/[a-zA-Z]/;function qr(n,e,t){let r=zo(),i=t?.locale??r.locale??zC,o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=ce(n,t?.in);if(!QL(a))throw new RangeError("Invalid time value");let c=e.match(zJ).map(d=>{let f=d[0];if(f==="p"||f==="P"){let m=TV[f];return m(d,i.formatLong)}return d}).join("").match(qJ).map(d=>{if(d==="''")return{isToken:!1,value:"'"};let f=d[0];if(f==="'")return{isToken:!1,value:QJ(d)};if(GC[f])return{isToken:!0,value:d};if(f.match(YJ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");return{isToken:!1,value:d}});i.localize.preprocessor&&(c=i.localize.preprocessor(a,c));let u={firstWeekContainsDate:o,weekStartsOn:s,locale:i};return c.map(d=>{if(!d.isToken)return d.value;let f=d.value;(!t?.useAdditionalWeekYearTokens&&CV(f)||!t?.useAdditionalDayOfYearTokens&&bV(f))&&DV(f,e,String(n));let m=GC[f[0]];return m(a,f,i.localize,u)}).join("")}function QJ(n){let e=n.match(GJ);return e?e[1].replace(KJ,"'"):n}function KC(n){return Math.trunc(n*al)}function YC(n,e){let{start:t,end:r}=aV(e?.in,n),i={},o=sV(r,t);o&&(i.years=o);let s=cl(t,{years:i.years}),a=oV(r,s);a&&(i.months=a);let c=cl(s,{months:i.months}),u=eV(r,c);u&&(i.days=u);let d=cl(c,{days:i.days}),f=tV(r,d);f&&(i.hours=f);let m=cl(d,{hours:i.hours}),v=Kg(r,m);v&&(i.minutes=v);let w=cl(m,{minutes:i.minutes}),R=Yg(r,w);return R&&(i.seconds=R),i}function Xg(n,e){return+ce(n)>+ce(e)}function SV(n,e){return+ce(n)<+ce(e)}function Zg(n){return Math.trunc(n*sl)}function pl(n){return n*WL}function AV(n,e,t){return ca(n,-e,t)}var xt=class n extends qn{collectionPath="/races";collectionRef=yr(this.firestore,this.collectionPath);raceConfigService=D(Ke);activeRace=ee(void 0);willEndRaceDate=ee(void 0);constructor(){super(),$e({races:this.getAll(),raceConfig:ae(this.raceConfigService.activeRaceConfig)}).pipe(Ye(),Q(({races:e,raceConfig:t})=>{if(e&&t){let r=this.getActiveRace(e),i=this.getWillEndRaceDate(r,t);return{activeRace:r,willEndRaceDate:i}}return{activeRace:void 0,willEndRaceDate:void 0}})).subscribe(e=>{this.activeRace.set(e.activeRace),this.willEndRaceDate.set(e.willEndRaceDate)})}create(e){return y(this,null,function*(){return this.activeRace()!==void 0?(console.warn("Race already active -> "+this.activeRace()),Promise.resolve()):(e.id=yield this.generateNextId(),yield this.createData(e.id,e),e)})}update(e){return this.updateData(e.id,e)}getAll(){return vr(this.collectionRef).pipe(zt(this.destroyed),Q(e=>e.map(t=>t).filter(t=>!t.deleted)))}getActiveRace(e){return e.sort((r,i)=>i.start.toDate().getTime()-r.start.toDate().getTime()).at(0)}getWillEndRaceDate(e,t){if(e!==void 0)return e.end!==null?e.end.toDate():Xi(e.start.toDate(),t.durationHour)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};function Ir(n,e){if(!n||!e)return"--:--:--";let t=YC({end:e,start:n});return ev(t)}function da(n){if(!n)return"--:--:--";let e=YC({end:n,start:new Date});return ev(e)}function mt(n){if(!n||n<0)return"--:--:--";let e=Math.floor(n/1e3),t={hours:Math.floor(e/3600),minutes:Math.floor(e%3600/60),seconds:e%60};return ev(t)}function RV(n){if(!n||n<0)return"--:--:--";let e=Math.floor(n/1e3),t={minutes:Math.floor(e%3600/60),seconds:e%60};return ev(t)}function xV(n){if(!n||n<0)return"--:--:---";let e=Math.floor(n/1e3),t=n%1e3,r={minutes:Math.floor(e/60),seconds:e%60};return JJ(r,t)}function JJ(n,e){return n.minutes&&n.minutes<0||n.seconds&&n.seconds<0?"--:--:---":[Zd(n.minutes),Zd(n.seconds),XJ(e)].join(":")}function ev(n){return n.hours&&n.hours<0||n.minutes&&n.minutes<0||n.seconds&&n.seconds<0?"--:--:--":[Zd(n.hours),Zd(n.minutes),Zd(n.seconds)].join(":")}function Zd(n){return n?n<10?`0${n}`:`${n}`:"00"}function XJ(n){return n<10?`00${n}`:n<100?`0${n}`:`${n}`}var Xt=class n extends qn{collectionPath="/pits";collectionRef=yr(this.firestore,this.collectionPath);raceService=D(xt);raceConfigService=D(Ke);activePit=ee(void 0);activePitRemainingMilliseconds=ee(0);lastRefuelPit=ee(void 0);pits=ee([]);completedDriverChanges=ee(0);lastPit=ee(void 0);remainingDriverChanges=ee(0);constructor(){super(),$e({pits:this.getRacePits(),activeRaceConfig:ae(this.raceConfigService.activeRaceConfig),ping:gt(1e3)}).pipe(Ye()).subscribe(({pits:e,activeRaceConfig:t})=>{this.pits.set(e),this.activePit.set(this.getActivePit(e)),this.activePitRemainingMilliseconds.set(this.calculateActivePitRemainingMilliseconds(e,t)),this.lastRefuelPit.set(this.getLastRefuelPit(e)),this.lastPit.set(this.getLastPit(e)),this.completedDriverChanges.set(this.calculateCompletedDriverChanges(e)),this.remainingDriverChanges.set(this.calculateRemainingDriverChanges(e,t))})}create(e){return y(this,null,function*(){return e.id=yield this.generateNextId(),yield this.createData(e.id,e),e})}update(e){return this.updateData(e.id,e)}getRacePits(){return $e({pits:vr(this.collectionRef),activeRace:ae(this.raceService.activeRace)}).pipe(zt(this.destroyed),Q(({pits:e,activeRace:t})=>t?e.filter(r=>!r.deleted&&r.raceId===t.id).sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime()):[]))}getActivePit(e){for(let t of e)if(!t.exitTime)return t}calculateActivePitRemainingMilliseconds(e,t){if(!t)return 0;let r=this.getActivePit(e);if(r){let i=new Date().getTime();return ll(r.entryTime.toDate(),t.minPitSeconds).getTime()-i}return 0}getLastRefuelPit(e){return e.filter(r=>r.refuel&&r.exitTime).sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime()).at(0)}getLastPit(e){return e.length===0?void 0:e.sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime()).at(0)}calculateCompletedDriverChanges(e){return e.reduce((t,r)=>t+(r.entryDriverId!==r.exitDriverId?1:0),0)}calculateRemainingDriverChanges(e,t){return t?Math.max(0,t.minDriverChange-this.calculateCompletedDriverChanges(e)):0}static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};var fi=class n{raceService=D(xt);raceConfigService=D(Ke);pitService=D(Xt);openingTime=ee(void 0);closingTime=ee(void 0);tyreChangeWindowOpen=ee(!1);remainingTyreChange=ee(0);constructor(){$e({pits:ae(this.pitService.pits),activeRace:ae(this.raceService.activeRace),raceConfig:ae(this.raceConfigService.activeRaceConfig),ping:gt(1e3)}).pipe(Ye()).subscribe(({pits:e,activeRace:t,raceConfig:r})=>{t&&r?(this.openingTime.set(Xi(t.start.toDate(),r.startTyreChangeWindowHour)),this.closingTime.set(Xi(t.start.toDate(),r.endTyreChangeWindowHour)),this.tyreChangeWindowOpen.set(this.isTyreChangeWindowOpen(this.openingTime(),this.closingTime()))):(this.openingTime.set(void 0),this.closingTime.set(void 0),this.tyreChangeWindowOpen.set(!1)),r&&this.remainingTyreChange.set(this.calculateRemainingTyreChange(e,r.minTyreChange))})}isTyreChangeWindowOpen(e,t){if(e&&t){let r=new Date;return r>=e&&r<=t}return!1}calculateRemainingTyreChange(e,t){let r=e.filter(i=>i.tyreChange&&i.exitTime).length;return t-r}static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};var pi=class n{raceService=D(xt);pitService=D(Xt);raceConfigService=D(Ke);tyreService=D(fi);optimizedStint=ee(void 0);constructor(){$e({activeRace:ae(this.raceService.activeRace),willEndRaceDate:ae(this.raceService.willEndRaceDate),activeRaceConfig:ae(this.raceConfigService.activeRaceConfig),remainingDriverChanges:ae(this.pitService.remainingDriverChanges),remainingTyreChange:ae(this.tyreService.remainingTyreChange),lastPit:ae(this.pitService.lastPit),ping:gt(1e3)}).pipe(Ye()).subscribe(({activeRace:e,willEndRaceDate:t,activeRaceConfig:r,remainingDriverChanges:i,remainingTyreChange:o,lastPit:s})=>{r?this.optimizedStint.set(this.calculateOptimizedStint(e,e?e.start.toDate():new Date,t||Xi(new Date,r.durationHour),r,i,o,s)):this.optimizedStint.set(void 0)})}calculateOptimizedStint(e,t,r,i,o,s,a){let c=new Date;if(c>=r)return;let u=this.calculateRemainingPitTime(i,o,s),d=eo(r,c)-u,f;a&&(a.exitTime?f=a.exitTime.toDate():f=ll(a.entryTime.toDate(),i.minPitSeconds));let w=(eo(r,f||t)-u)/(o+1),R=0,S=0;return o>0&&e!==void 0&&(R=d/o,S=Math.floor(R/i.referenceLapTimeMillisecond)),{avgStintMillisecondsTime:w,laps:Math.floor(w/i.referenceLapTimeMillisecond),avgStintMillisecondsIfDriverChangedNow:R,lapsIfDriverChangeNow:S}}calculateRemainingPitTime(e,t,r){let i=t-r,o=pl(e.minPitSeconds*i),s=pl(e.minPitWithTyreChangeSeconds*r);return o+s}static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};var jt=class n extends qn{collectionPath="/stints";collectionRef=yr(this.firestore,this.collectionPath);raceService=D(xt);raceConfigService=D(Ke);stintOptimizerService=D(pi);activeRace=this.raceService.activeRace;stints=ee([]);activeStint=ee(void 0);activeStintTimeOnTrack=ee(0);activeStintLaps=ee(0);activeStintRemainingTimeOnTrack=ee(0);activeStintRemainingLaps=ee(0);activeStintGainedTimeOnTrack=ee(0);activeStintGainedLaps=ee(0);constructor(){super(),$e({stints:this.getRaceStints(),activeRaceConfig:ae(this.raceConfigService.activeRaceConfig),optimizedStint:ae(this.stintOptimizerService.optimizedStint),ping:gt(1e3)}).pipe(Ye()).subscribe(({stints:e,activeRaceConfig:t,optimizedStint:r})=>{this.stints.set(e),this.activeStint.set(this.getActiveStint(e)),this.activeStintTimeOnTrack.set(this.calculateActiveStintTimeOnTrack(this.activeStint())),this.activeStintLaps.set(this.calculateActiveStintLaps(this.activeStintTimeOnTrack(),t)),this.activeStintRemainingTimeOnTrack.set(this.calculateActiveStintRemainingTimeOnTrack(this.activeStintTimeOnTrack(),r)),this.activeStintRemainingLaps.set(this.calculateActiveStintRemainingLaps(this.activeStintLaps(),r)),this.activeStintGainedTimeOnTrack.set(this.calculateActiveStintGainedTimeOnTrack(this.activeStintTimeOnTrack(),r)),this.activeStintGainedLaps.set(this.calculateActiveStintGainedLaps(this.activeStintLaps(),r))})}create(e){return y(this,null,function*(){return e.id=yield this.generateNextId(),yield this.createData(e.id,e),e})}update(e){return y(this,null,function*(){return yield this.updateData(e.id,e),e})}getRaceStints(){return $e({stints:vr(this.collectionRef),activeRace:ae(this.activeRace)}).pipe(zt(this.destroyed),Q(({stints:e,activeRace:t})=>t?e.filter(r=>!r.deleted&&r.raceId===t.id).sort((r,i)=>i.startDate.toDate().getTime()-r.startDate.toDate().getTime()):[]))}getActiveStint(e){for(let t of e)if(!t.endDate)return t}calculateActiveStintTimeOnTrack(e){return e?new Date().getTime()-e.startDate.toDate().getTime():0}calculateActiveStintLaps(e,t){return e>=0&&t?Math.floor(e/t.referenceLapTimeMillisecond):0}calculateActiveStintRemainingTimeOnTrack(e,t){return e>=0&&t?t.avgStintMillisecondsTime-e:0}calculateActiveStintRemainingLaps(e,t){let r=0;return e>=0&&t&&(r=t.laps-e),r>0?r:0}calculateActiveStintGainedTimeOnTrack(e,t){let r=0;return e>=0&&t&&(r=t.avgStintMillisecondsTime-e),r<0?Math.abs(r):0}calculateActiveStintGainedLaps(e,t){let r=0;return e>=0&&t&&(r=t.laps-e),r<0?Math.abs(r):0}static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};var Go=class n{raceService=D(xt);stintService=D(jt);pitService=D(Xt);stintOptimizerService=D(pi);activeRace=this.raceService.activeRace;activeStint=this.stintService.activeStint;activePit=this.pitService.activePit;optimizedStintMilliseconds=xe(()=>{let e=this.stintOptimizerService.optimizedStint();return e?e.avgStintMillisecondsTime:0});startRace(e){return y(this,null,function*(){let t=this.createRace(),r=yield this.raceService.create(t);r&&(yield this.startStint(r.id,e,r.start))})}endRace(){return y(this,null,function*(){let e=this.activeRace();if(e){let t=At.now();e.end=t,yield this.raceService.update(e),yield this.closeActiveStint(t),yield this.closeActivePit(t)}})}pitIn(e,t,r){return y(this,null,function*(){let i=this.activeRace(),o=this.activeStint();if(i&&o){let s=this.createPit(o.driverId,e,i.id,t,r),a=yield this.pitService.create(s);yield this.closeActiveStint(a.entryTime)}})}pitOut(){return y(this,null,function*(){let e=this.activeRace(),t=this.activePit();if(e&&t){let r=At.now();yield this.closeActivePit(r),yield this.startStint(e.id,t.exitDriverId,r)}})}startStint(e,t,r){return y(this,null,function*(){let i=this.createStint(e,t,r);return yield this.stintService.create(i),i})}closeActiveStint(e){return y(this,null,function*(){let t=this.activeStint();t&&(t.endDate=e,yield this.stintService.update(t))})}closeActivePit(e){return y(this,null,function*(){let t=this.activePit();t&&(t.exitTime=e,yield this.pitService.update(t))})}createRace(){return{id:"1",start:At.now(),end:null,deleted:!1}}createStint(e,t,r){return{id:"1",deleted:!1,driverId:t,endDate:null,optimumMilliseconds:this.optimizedStintMilliseconds(),raceId:e,startDate:r}}createPit(e,t,r,i,o){return{id:"1",entryDriverId:e,entryTime:At.now(),exitDriverId:t,exitTime:null,raceId:r,refuel:i,tyreChange:o,deleted:!1}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};var jV=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(Me(xi),Me(lr))};static \u0275dir=dt({type:n})}return n})(),sh=(()=>{class n extends jV{static \u0275fac=(()=>{let t;return function(i){return(t||(t=xr(n)))(i||n)}})();static \u0275dir=dt({type:n,features:[Bn]})}return n})(),_l=new $(""),ZJ={provide:_l,useExisting:ar(()=>XC),multi:!0},XC=(()=>{class n extends sh{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=xr(n)))(i||n)}})();static \u0275dir=dt({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&le("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[ri([ZJ]),Bn]})}return n})(),eX={provide:_l,useExisting:ar(()=>wl),multi:!0};function tX(){let n=Pi()?Pi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var nX=new $(""),wl=(()=>{class n extends jV{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!tX())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(Me(xi),Me(lr),Me(nX,8))};static \u0275dir=dt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&le("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[ri([eX]),Bn]})}return n})();function QC(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var cv=new $(""),BV=new $("");function rX(n){return e=>{if(QC(e.value)||QC(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function iX(n){return QC(n.value)?{required:!0}:null}function NV(n){return null}function $V(n){return n!=null}function HV(n){return Cs(n)?rt(n):n}function WV(n){let e={};return n.forEach(t=>{e=t!=null?j(j({},e),t):e}),Object.keys(e).length===0?null:e}function qV(n,e){return e.map(t=>t(n))}function oX(n){return!n.validate}function zV(n){return n.map(e=>oX(e)?e:t=>e.validate(t))}function sX(n){if(!n)return null;let e=n.filter($V);return e.length==0?null:function(t){return WV(qV(t,e))}}function ZC(n){return n!=null?sX(zV(n)):null}function aX(n){if(!n)return null;let e=n.filter($V);return e.length==0?null:function(t){let r=qV(t,e).map(HV);return Ny(r).pipe(Q(WV))}}function eD(n){return n!=null?aX(zV(n)):null}function MV(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function cX(n){return n._rawValidators}function lX(n){return n._rawAsyncValidators}function JC(n){return n?Array.isArray(n)?n:[n]:[]}function nv(n,e){return Array.isArray(n)?n.includes(e):n===e}function PV(n,e){let t=JC(e);return JC(n).forEach(i=>{nv(t,i)||t.push(i)}),t}function kV(n,e){return JC(e).filter(t=>!nv(n,t))}var rv=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ZC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=eD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},vl=class extends rv{name;get formDirective(){return null}get path(){return null}},oh=class extends rv{_parent=null;name=null;valueAccessor=null},iv=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},uX={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},oIe=me(j({},uX),{"[class.ng-submitted]":"isSubmitted"}),Ko=(()=>{class n extends iv{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Me(oh,2))};static \u0275dir=dt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&yp("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Bn]})}return n})(),Yo=(()=>{class n extends iv{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Me(vl,10))};static \u0275dir=dt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&yp("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Bn]})}return n})();var eh="VALID",tv="INVALID",ml="PENDING",th="DISABLED",yl=class{},ov=class extends yl{value;source;constructor(e,t){super(),this.value=e,this.source=t}},rh=class extends yl{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},ih=class extends yl{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},gl=class extends yl{status;source;constructor(e,t){super(),this.status=e,this.source=t}};function GV(n){return(lv(n)?n.validators:n)||null}function dX(n){return Array.isArray(n)?ZC(n):n||null}function KV(n,e){return(lv(e)?e.asyncValidators:n)||null}function hX(n){return Array.isArray(n)?eD(n):n||null}function lv(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function fX(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new J(1e3,"");if(!r[t])throw new J(1001,"")}function pX(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new J(1002,"")})}var sv=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return hr(this.statusReactive)}set status(e){hr(()=>this.statusReactive.set(e))}_status=xe(()=>this.statusReactive());statusReactive=ee(void 0);get valid(){return this.status===eh}get invalid(){return this.status===tv}get pending(){return this.status==ml}get disabled(){return this.status===th}get enabled(){return this.status!==th}errors;get pristine(){return hr(this.pristineReactive)}set pristine(e){hr(()=>this.pristineReactive.set(e))}_pristine=xe(()=>this.pristineReactive());pristineReactive=ee(!0);get dirty(){return!this.pristine}get touched(){return hr(this.touchedReactive)}set touched(e){hr(()=>this.touchedReactive.set(e))}_touched=xe(()=>this.touchedReactive());touchedReactive=ee(!1);get untouched(){return!this.touched}_events=new ct;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(PV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(PV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(kV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(kV(e,this._rawAsyncValidators))}hasValidator(e){return nv(this._rawValidators,e)}hasAsyncValidator(e){return nv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(me(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ih(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new ih(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(me(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new rh(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new rh(!0,r))}markAsPending(e={}){this.status=ml;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new gl(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(me(j({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=th,this.errors=null,this._forEachChild(i=>{i.disable(me(j({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ov(this.value,r)),this._events.next(new gl(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(me(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=eh,this._forEachChild(r=>{r.enable(me(j({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(me(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===eh||this.status===ml)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ov(this.value,t)),this._events.next(new gl(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(me(j({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?th:eh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ml,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=HV(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new gl(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Kt,this.statusChanges=new Kt}_calculateStatus(){return this._allControlsDisabled()?th:this.errors?tv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ml)?ml:this._anyControlsHaveStatus(tv)?tv:eh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new rh(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new ih(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){lv(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=dX(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=hX(this._rawAsyncValidators)}},av=class extends sv{constructor(e,t,r){super(GV(t),KV(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){pX(this,!0,e),Object.keys(e).forEach(r=>{fX(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var uv=new $("",{providedIn:"root",factory:()=>dv}),dv="always";function mX(n,e){return[...e.path,n]}function YV(n,e,t=dv){QV(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),vX(n,e),_X(n,e),yX(n,e),gX(n,e)}function OV(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function gX(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function QV(n,e){let t=cX(n);e.validator!==null?n.setValidators(MV(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=lX(n);e.asyncValidator!==null?n.setAsyncValidators(MV(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();OV(e._rawValidators,i),OV(e._rawAsyncValidators,i)}function vX(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&JV(n,e)})}function yX(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&JV(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function JV(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function _X(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function wX(n,e){n==null,QV(n,e)}function EX(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function IX(n){return Object.getPrototypeOf(n.constructor)===sh}function TX(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function bX(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===wl?t=o:IX(o)?r=o:i=o}),i||r||t||null}var CX={provide:vl,useExisting:ar(()=>no)},nh=Promise.resolve(),no=(()=>{class n extends vl{callSetDisabledState;get submitted(){return hr(this.submittedReactive)}_submitted=xe(()=>this.submittedReactive());submittedReactive=ee(!1);_directives=new Set;form;ngSubmit=new Kt;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new av({},ZC(t),eD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){nh.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),YV(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){nh.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){nh.then(()=>{let r=this._findContainer(t.path),i=new av({});wX(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){nh.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){nh.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),TX(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(Me(cv,10),Me(BV,10),Me(uv,8))};static \u0275dir=dt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&le("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ri([CX]),Bn]})}return n})();function FV(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function LV(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var DX=class extends sv{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(GV(t),KV(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),lv(t)&&(t.nonNullable||t.initialValueIsDefault)&&(LV(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){FV(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){FV(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){LV(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var SX={provide:oh,useExisting:ar(()=>ro)},VV=Promise.resolve(),ro=(()=>{class n extends oh{_changeDetectorRef;callSetDisabledState;control=new DX;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Kt;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=bX(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),EX(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){YV(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){VV.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Su(r);VV.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?mX(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(Me(vl,9),Me(cv,10),Me(BV,10),Me(_l,10),Me(No,8),Me(uv,8))};static \u0275dir=dt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[ri([SX]),Bn,Do]})}return n})(),Qo=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=dt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),AX={provide:_l,useExisting:ar(()=>ah),multi:!0},ah=(()=>{class n extends sh{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=xr(n)))(i||n)}})();static \u0275dir=dt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&le("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[ri([AX]),Bn]})}return n})();var RX=new $("");var xX={provide:_l,useExisting:ar(()=>El),multi:!0};function XV(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function NX(n){return n.split(":")[0]}var El=(()=>{class n extends sh{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=XV(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=NX(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=xr(n)))(i||n)}})();static \u0275dir=dt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&le("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ri([xX]),Bn]})}return n})(),hv=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(XV(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(Me(lr),Me(xi),Me(El,9))};static \u0275dir=dt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),MX={provide:_l,useExisting:ar(()=>ZV),multi:!0};function UV(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function PX(n){return n.split(":")[0]}var ZV=(()=>{class n extends sh{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],u=this._getOptionValue(c.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=PX(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=xr(n)))(i||n)}})();static \u0275dir=dt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&le("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ri([MX]),Bn]})}return n})(),fv=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(UV(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(UV(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(Me(lr),Me(xi),Me(ZV,9))};static \u0275dir=dt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function kX(n){return typeof n=="number"?n:parseFloat(n)}var e2=(()=>{class n{_validator=NV;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):NV,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=dt({type:n,features:[Do]})}return n})();var OX={provide:cv,useExisting:ar(()=>ch),multi:!0},ch=(()=>{class n extends e2{min;inputName="min";normalizeInput=t=>kX(t);createValidator=t=>rX(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=xr(n)))(i||n)}})();static \u0275dir=dt({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Du("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[ri([OX]),Bn]})}return n})(),FX={provide:cv,useExisting:ar(()=>lh),multi:!0};var lh=(()=>{class n extends e2{required;inputName="required";normalizeInput=Su;createValidator=t=>iX;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=xr(n)))(i||n)}})();static \u0275dir=dt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Du("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[ri([FX]),Bn]})}return n})();var t2=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ni({type:n});static \u0275inj=Di({})}return n})();var Jo=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:uv,useValue:t.callSetDisabledState??dv}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ni({type:n});static \u0275inj=Di({imports:[t2]})}return n})(),n2=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:RX,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:uv,useValue:t.callSetDisabledState??dv}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ni({type:n});static \u0275inj=Di({imports:[t2]})}return n})();var mv=class n extends qn{collectionPath="/laps";collectionRef=yr(this.firestore,this.collectionPath);raceService=D(xt);laps=ee([]);constructor(){super(),$e({laps:this.getRaceLaps(),activeRace:ae(this.raceService.activeRace)}).pipe(Ye()).subscribe(e=>this.laps.set(e.laps))}getRaceLaps(){return $e({laps:vr(this.collectionRef),activeRace:ae(this.raceService.activeRace)}).pipe(zt(this.destroyed),Q(({laps:e,activeRace:t})=>t?e.filter(r=>!r.deleted&&r.raceId===t.id):[]))}create(e){return y(this,null,function*(){return e.id=yield this.generateNextId(),yield this.createData(e.id,e),e})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};var Tr=class n extends qn{collectionPath="/drivers";collectionRef=yr(this.firestore,this.collectionPath);lapService=D(mv);stintService=D(jt);raceConfigService=D(Ke);drivers=ee([]);driversReferenceLapTimeMap=ee(new Map);driversTimeOnTrackMap=ee(new Map);driversTimeOnTrackWarningMap=ee(new Map);driversStintCountMap=ee(new Map);driverWithMoreTimeFromLastStint=ee(void 0);driversTimeFromLastStintMap=ee(new Map);driversTimeOnTrackWarningCount=xe(()=>{let e=this.driversTimeOnTrackWarningMap(),t=0;return e.forEach(r=>{r&&t++}),t});constructor(){super(),$e({drivers:this.getAll(),laps:ae(this.lapService.laps),stints:ae(this.stintService.stints),activeRaceConfig:ae(this.raceConfigService.activeRaceConfig),ping:gt(1e3)}).pipe(Ye()).subscribe(({drivers:e,laps:t,stints:r,activeRaceConfig:i})=>{this.drivers.set(e),this.driversReferenceLapTimeMap.set(this.createDriverReferenceLapTimeMap(t,e)),this.driversTimeOnTrackMap.set(this.createDriverTrackTimeMap(r,e)),this.driversTimeOnTrackWarningMap.set(this.createDriversTimeOnTrackWarningMap(this.driversTimeOnTrackMap(),i)),this.driversStintCountMap.set(this.createDriverStintCountMap(r,e)),this.driverWithMoreTimeFromLastStint.set(this.getDriverWithMoreTimeFromLastStint(r,e)),this.driversTimeFromLastStintMap.set(this.createDriversTimeFromLastStintMap(r,e))})}getAll(){return vr(this.collectionRef).pipe(zt(this.destroyed),Q(e=>e.map(t=>t).filter(t=>!t.deleted)))}createDriverReferenceLapTimeMap(e,t){let r=new Map;t.forEach(o=>{r.set(o.id,0)});let i=e.reduce((o,s)=>(o[s.driverId]||(o[s.driverId]=[]),o[s.driverId].push(s.millisecondsTime),o),{});for(let o in i){let s=i[o],a=s.reduce((c,u)=>c+u,0)/s.length;r.set(o,a)}return r}createDriverTrackTimeMap(e,t){let r=new Map;return t.forEach(i=>{r.set(i.id,0)}),e.forEach(i=>{let o;i.endDate?o=i.endDate.toDate().getTime()-i.startDate.toDate().getTime():o=new Date().getTime()-i.startDate.toDate().getTime(),r.has(i.driverId)?r.set(i.driverId,r.get(i.driverId)+o):r.set(i.driverId,o)}),r}createDriversTimeOnTrackWarningMap(e,t){let r=new Map;if(t){let i=KC(t.minDriverOnTrackHour),o=KC(t.maxDriverOnTrackHour),s=Zg(t.warningDriverOnTrackThresholdMinute);e.forEach((a,c)=>{let u=a<i,d=o-a<=s;r.set(c,u||d)})}return r}createDriverStintCountMap(e,t){let r=new Map;return t.forEach(i=>{r.set(i.id,0)}),e.forEach(i=>{r.has(i.driverId)?r.set(i.driverId,r.get(i.driverId)+1):r.set(i.driverId,1)}),r}getDriverWithMoreTimeFromLastStint(e,t){if(t.length===0)return;let r,i=this.createDriversTimeFromLastStintMap(e,t),o=e.find(u=>u.endDate===null)?.driverId,s=new Map(t.map(u=>[u.id,u])),a=-1,c=!1;return i.forEach((u,d)=>{d!==o&&(u===0?(!c||c&&u>a)&&(a=u,r=s.get(d),c=!0):!c&&u>a&&(a=u,r=s.get(d)))}),r}createDriversTimeFromLastStintMap(e,t){let r=new Map;return t.forEach(i=>{let o=e.filter(s=>s.driverId===i.id).sort((s,a)=>a.startDate.toDate().getTime()-s.startDate.toDate().getTime()).at(0);o&&o.endDate?r.set(i.id,new Date().getTime()-o.endDate.toDate().getTime()):r.set(i.id,0)}),r}static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};function LX(n,e){if(n&1&&(I(0,"option",6),N(1),b()),n&2){let t=e.$implicit;Z("value",t.id),k(),z(" ",t.raceName," ")}}function VX(n,e){if(n&1){let t=ur();I(0,"div",0)(1,"div",2)(2,"form")(3,"label",3),N(4,"Start driver"),b(),I(5,"select",4),Mr("ngModelChange",function(i){lt(t);let o=H();return ni(o.selectedDriver,i)||(o.selectedDriver=i),ut(i)}),le("change",function(){lt(t);let i=H();return ut(i.updateDriverId())}),X(6,LX,2,2,"option",5),b()()()()}if(n&2){let t=H();k(5),Nr("ngModel",t.selectedDriver),k(),Z("ngForOf",t.drivers())}}function UX(n,e){if(n&1&&(I(0,"div",1),N(1),b()),n&2){let t=H();k(),z(" ",t.endRaceCountdown," ")}}var gv=class n{raceService=D(xt);raceConfigService=D(Ke);raceManagerService=D(Go);driverService=D(Tr);drivers=this.driverService.drivers;willEndRaceDate=this.raceService.willEndRaceDate;endRaceCountdown="00:00:00";selectedDriver="1";constructor(){$e({willEndRaceDate:ae(this.willEndRaceDate),ping:gt(1e3)}).pipe(Ye()).subscribe(e=>{let t=e.willEndRaceDate;t&&(Xg(new Date,t)?this.endRaceCountdown="00:00:00":this.endRaceCountdown=da(t))}),kr(()=>{let e=this.raceConfigService.activeRaceConfig();e&&(this.selectedDriver=e.startRaceDriverId)})}startRace(){this.raceManagerService.startRace(this.selectedDriver)}updateDriverId(){this.raceConfigService.updateStartRaceDriverId(this.selectedDriver)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-race"]],decls:2,vars:1,consts:[[1,"flex","items-center","justify-center"],[1,"text-2xl","md:text-4xl","font-bold","font-mono","dark:text-white"],[1,"font-bold","mr-2"],["for","driverSelect",1,"mr-2","dark:text-white"],["id","driverSelect","name","driverSelect",1,"border","rounded","p-1",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,r){t&1&&X(0,VX,7,2,"div",0)(1,UX,2,1,"div",1),t&2&&ne(r.willEndRaceDate()?1:0)},dependencies:[Jo,Qo,hv,fv,El,Ko,Yo,ro,no,$n],encapsulation:2})};var jX=n=>({"mb-2":n}),BX=n=>({"animate-bounce":n});function $X(n,e){if(n&1&&(I(0,"div",4),N(1),b()),n&2){let t=H();k(),z(" Remaining: ",t.remainingTyreChange()," ")}}function HX(n,e){n&1&&(I(0,"div",5),N(1," Completed! "),b())}function WX(n,e){if(n&1&&(I(0,"div",6),N(1," Window open "),b()),n&2){let t=H();Z("ngClass",ot(1,BX,t.remainingTyreChange()>0))}}function qX(n,e){n&1&&(I(0,"div",7),N(1," Window closed "),b())}function zX(n,e){if(n&1&&(N(0),Ro(1,"date")),n&2){let t=H(2);z(" ",xo(1,1,t.openingTime(),"HH:mm:ss")," ")}}function GX(n,e){n&1&&N(0," --:--:-- ")}function KX(n,e){if(n&1&&(N(0),Ro(1,"date")),n&2){let t=H(2);z(" ",xo(1,1,t.closingTime(),"HH:mm:ss")," ")}}function YX(n,e){n&1&&N(0," --:--:-- ")}function QX(n,e){if(n&1&&(I(0,"div",8)(1,"div")(2,"div",9),N(3,"Opening time"),b(),I(4,"div",10),X(5,zX,2,4)(6,GX,1,0),b()(),I(7,"div")(8,"div",11),N(9,"Opening in"),b(),I(10,"div",12),N(11),b()()(),ve(12,"hr",13),I(13,"div",14)(14,"div")(15,"div",9),N(16,"Closing time"),b(),I(17,"div",10),X(18,KX,2,4)(19,YX,1,0),b()(),I(20,"div")(21,"div",11),N(22,"Closing in"),b(),I(23,"div",12),N(24),b()()()),n&2){let t=H();k(5),ne(t.openingTime()?5:6),k(6),z(" ",t.countdownOpeningTime()," "),k(7),ne(t.closingTime()?18:19),k(6),z(" ",t.countdownClosingTime()," ")}}var vv=class n{tyreService=D(fi);openingTime=this.tyreService.openingTime;closingTime=this.tyreService.closingTime;remainingTyreChange=this.tyreService.remainingTyreChange;tyreChangeWindowOpen=this.tyreService.tyreChangeWindowOpen;countdownOpeningTime=xe(()=>da(this.tyreService.openingTime()));countdownClosingTime=xe(()=>da(this.tyreService.closingTime()));isOpen=!1;constructor(){}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-tyre-change-window"]],decls:10,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default",3,"ngClass"],[1,"bg-red-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(I(0,"div",0)(1,"div",1),le("click",function(){return r.isOpen=!r.isOpen}),I(2,"div",2),N(3,"\u{1F6DE} \u{1F504} Tyre change"),b(),I(4,"div",3),X(5,$X,2,1,"div",4)(6,HX,2,0,"div",5)(7,WX,2,3,"div",6)(8,qX,2,0,"div",7),b()(),X(9,QX,25,4),b()),t&2&&(k(),Z("ngClass",ot(4,jX,r.isOpen)),k(4),ne(r.remainingTyreChange()>0?5:6),k(2),ne(r.tyreChangeWindowOpen()?7:8),k(2),ne(r.isOpen?9:-1))},dependencies:[ic,Qe],encapsulation:2})};var yv=class n{charge=100;batteryColor="bg-green-500";batteryBorderColor="border-gray-200";ngOnChanges(e){this.batteryColor=this.getBackgroundColor(this.charge),this.batteryBorderColor=this.getBorderColor(this.charge)}getBackgroundColor(e){return e<=10?"bg-red-500":e<=25?"bg-orange-500":e<=50?"bg-yellow-500":"bg-green-500"}getBorderColor(e){return e<=10?"border-red-500":e<=25?"border-orange-500":"border-gray-200"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-battery"]],inputs:{charge:"charge"},features:[Do],decls:6,vars:6,consts:[[1,"w-16","lg:w-20","h-8","grid","grid-cols-6","items-center"],[1,"shadow","col-span-5","rounded","border-2","flex","relative",3,"ngClass"],[1,"cursor-default","leading-none","rounded-sm","flex","items-center","m-0.5","py-3",3,"ngClass"],[1,"absolute","right-2","text-black","font-semibold","font-mono"],[1,"ml-0.5","border-r-8","w-1","h-4","rounded-r",3,"ngClass"]],template:function(t,r){t&1&&(I(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),N(4),b()()(),ve(5,"div",4),b()),t&2&&(k(),Z("ngClass",r.batteryBorderColor),k(),nc("width",r.charge,"%"),Z("ngClass",r.batteryColor),k(2),Nn(r.charge),k(),Z("ngClass",r.batteryBorderColor))},dependencies:[Qe],encapsulation:2,changeDetection:0})};var _v=class n{raceService=D(xt);pitService=D(Xt);raceConfigService=D(Ke);lastRefuelTime=ee(void 0);emptyFuelTime=ee(void 0);remainingFuelPercentage=ee(100);remainingFuelLap=ee(0);constructor(){$e({lastRefuelPit:ae(this.pitService.lastRefuelPit),activeRace:ae(this.raceService.activeRace),raceConfig:ae(this.raceConfigService.activeRaceConfig),ping:gt(1e3)}).pipe(Ye()).subscribe(({lastRefuelPit:e,activeRace:t,raceConfig:r})=>{this.lastRefuelTime.set(this.getLastRefuelDate(e,t)),this.emptyFuelTime.set(this.calculateEmptyFuelTime(this.lastRefuelTime(),r)),this.remainingFuelLap.set(this.calculateRemainingFuelLaps(this.emptyFuelTime(),r)),this.remainingFuelPercentage.set(this.calculateRemainingFuelPercentage(this.emptyFuelTime(),r))})}getLastRefuelDate(e,t){if(e&&e.exitTime)return e.exitTime.toDate();if(t)return t.start.toDate()}calculateEmptyFuelTime(e,t){if(e&&t)return ca(e,t.fuelDurationMinute)}calculateRemainingFuelPercentage(e,t){if(e&&t){let i=Kg(e,new Date)/t.fuelDurationMinute*100,o=Math.max(0,Math.min(i,100));return parseFloat(o.toFixed(0))}return 100}calculateRemainingFuelLaps(e,t){if(e&&t){let r=eo(e,new Date);return Math.floor(r/t.referenceLapTimeMillisecond)}if(!e&&t){let r=Zg(t.fuelDurationMinute);return Math.floor(r/t.referenceLapTimeMillisecond)}return 0}static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};var JX=n=>({"mb-2":n}),XX=n=>({"animate-bounce":n});function ZX(n,e){if(n&1&&(N(0),Ro(1,"date")),n&2){let t=H(2);z(" ",xo(1,1,t.lastRefuelTime(),"HH:mm:ss")," ")}}function eZ(n,e){n&1&&N(0," --:--:-- ")}function tZ(n,e){if(n&1&&(N(0),Ro(1,"date")),n&2){let t=H(2);z(" ",xo(1,1,t.emptyFuelTime(),"HH:mm:ss")," ")}}function nZ(n,e){n&1&&N(0," --:--:-- ")}function rZ(n,e){if(n&1){let t=ur();I(0,"div",7)(1,"div")(2,"div",8),N(3,"Last refuel time"),b(),I(4,"div",9),X(5,ZX,2,4)(6,eZ,1,0),b()(),I(7,"div")(8,"div",10),N(9,"Since last refuel"),b(),I(10,"div",11),N(11),b()()(),ve(12,"hr",12),I(13,"div",7)(14,"div")(15,"div",8),N(16,"Empty time"),b(),I(17,"div",9),X(18,tZ,2,4)(19,nZ,1,0),b()(),I(20,"div")(21,"div",10),N(22,"Empty in"),b(),I(23,"div",11),N(24),b()()(),ve(25,"hr",12),I(26,"div",13)(27,"div")(28,"div",8),N(29,"Remaining laps"),b(),I(30,"div",9),N(31),b()(),I(32,"div")(33,"div",10),N(34,"Fuel duration (min)"),b(),I(35,"div",14)(36,"button",15),le("click",function(){lt(t);let i=H();return ut(i.increaseFuelDuration())}),N(37," + "),b(),I(38,"form",16),le("ngSubmit",function(){lt(t);let i=H();return ut(i.onSubmit())}),I(39,"input",17),Mr("ngModelChange",function(i){lt(t);let o=H();return ni(o.fuelDurationMinute,i)||(o.fuelDurationMinute=i),ut(i)}),b()(),I(40,"button",18),le("click",function(){lt(t);let i=H();return ut(i.decreaseFuelDuration())}),N(41," - "),b()()()()}if(n&2){let t=H();k(5),ne(t.lastRefuelTime()?5:6),k(6),z(" ",t.sinceLastRefuel()," "),k(7),ne(t.emptyFuelTime()?18:19),k(6),z(" ",t.emptyFuelCountdown()," "),k(7),z(" ",t.remainingFuelLap()," "),k(8),Nr("ngModel",t.fuelDurationMinute)}}var wv=class n{raceConfigService=D(Ke);fuelService=D(_v);remainingFuelPercentage=this.fuelService.remainingFuelPercentage;remainingFuelLap=this.fuelService.remainingFuelLap;emptyFuelTime=this.fuelService.emptyFuelTime;lastRefuelTime=this.fuelService.lastRefuelTime;emptyFuelCountdown=xe(()=>da(this.emptyFuelTime()));sinceLastRefuel=xe(()=>Ir(this.lastRefuelTime(),new Date));warning=xe(()=>this.remainingFuelPercentage()<=20);remainingColor=xe(()=>this.getRemainingColor(this.remainingFuelPercentage()));isOpen=!0;fuelDurationMinute=0;constructor(){kr(()=>{let e=this.raceConfigService.activeRaceConfig();e&&(this.fuelDurationMinute=e.fuelDurationMinute)})}onSubmit(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute)}increaseFuelDuration(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute+1)}decreaseFuelDuration(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute-1)}getRemainingColor(e){return e<=10?"bg-red-500":e<=25?"bg-orange-500":e<=50?"bg-yellow-500":"bg-green-500"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-fuel"]],decls:11,vars:12,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center",3,"ngClass"],[1,"px-2","py-1","w-36","rounded-lg","text-left","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[1,"px-2","py-1","rounded-lg","text-center","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[3,"charge"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"],[1,"flex","justify-end"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","mr-1","rounded",3,"click"],[1,"text-right",3,"ngSubmit"],["type","number","id","fuelDuration","name","fuelDuration","required","","min","1",1,"border","rounded-lg","px-2","py-1","w-20","text-right",3,"ngModelChange","ngModel"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","ml-1","rounded",3,"click"]],template:function(t,r){t&1&&(I(0,"div",0)(1,"div",1),le("click",function(){return r.isOpen=!r.isOpen}),I(2,"div",2),N(3,"\u26FD\uFE0F Fuel"),b(),I(4,"div",3)(5,"div",4),N(6),b(),I(7,"div",5),N(8),b(),ve(9,"app-battery",6),b()(),X(10,rZ,42,6),b()),t&2&&(k(),Z("ngClass",ot(8,JX,r.isOpen)),k(3),Z("ngClass",ot(10,XX,r.warning())),k(),Z("ngClass",r.remainingColor()),k(),z(" Empty: ",r.emptyFuelCountdown()," "),k(),Z("ngClass",r.remainingColor()),k(),z(" Laps: ",r.remainingFuelLap()," "),k(),Z("charge",r.remainingFuelPercentage()),k(),ne(r.isOpen?10:-1))},dependencies:[Qe,ic,yv,Jo,Qo,wl,ah,Ko,Yo,lh,ch,ro,no],encapsulation:2})};var iZ=n=>({"mb-2":n});function oZ(n,e){if(n&1&&(I(0,"div",6)(1,"div")(2,"div",7),N(3,"Optimized AVG time"),b(),I(4,"div",8),N(5),b()(),I(6,"div")(7,"div",9),N(8,"Laps"),b(),I(9,"div",10),N(10),b()()(),ve(11,"hr",11),I(12,"div",12)(13,"div")(14,"div",7),N(15," Optimized AVG time "),I(16,"strong"),N(17,"if driver change now"),b()(),I(18,"div",8),N(19),b()(),I(20,"div")(21,"div",9),N(22,"Laps"),b(),I(23,"div",10),N(24),b()()()),n&2){let t=H();k(5),z(" ",t.AVGStintTime()," "),k(5),z(" ",t.laps()," "),k(9),z(" ",t.AVGStintTimeIfDriverChangeNow()," "),k(5),z(" ",t.lapsIfDriverChangeNow()," ")}}var Ev=class n{stintOptimizerService=D(pi);AVGStintTime=xe(()=>{let e=this.stintOptimizerService.optimizedStint();return e?mt(e.avgStintMillisecondsTime):"--:--:--"});laps=xe(()=>{let e=this.stintOptimizerService.optimizedStint();return e?e.laps:0});AVGStintTimeIfDriverChangeNow=xe(()=>{let e=this.stintOptimizerService.optimizedStint();return e?mt(e.avgStintMillisecondsIfDriverChangedNow):"--:--:--"});lapsIfDriverChangeNow=xe(()=>{let e=this.stintOptimizerService.optimizedStint();return e?e.lapsIfDriverChangeNow:0});isOpen=!0;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-stint-optimizer"]],decls:10,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(I(0,"div",0)(1,"div",1),le("click",function(){return r.isOpen=!r.isOpen}),I(2,"div",2),N(3,"\u{1F9E0} Stint optimizer"),b(),I(4,"div",3)(5,"div",4),N(6),b(),I(7,"div",5),N(8),b()()(),X(9,oZ,25,4),b()),t&2&&(k(),Z("ngClass",ot(4,iZ,r.isOpen)),k(5),z(" Optimum: ",r.AVGStintTime()," "),k(2),z(" Laps: ",r.laps()," "),k(),ne(r.isOpen?9:-1))},dependencies:[Qe],encapsulation:2})};var sZ=n=>({"mb-2":n}),aZ=(n,e)=>({"bg-green-100 font-semibold":n,"hover:bg-gray-50":e}),cZ=n=>({"bg-yellow-500 text-white":n});function lZ(n,e){if(n&1&&(I(0,"div",4),N(1),b()),n&2){let t=H();k(),z(" Warning: ",t.driversTimeOnTrackWarningCount()," ")}}function uZ(n,e){n&1&&(I(0,"div",5),N(1," Completed! "),b())}function dZ(n,e){if(n&1&&(I(0,"tr",17)(1,"td",18),N(2),b(),I(3,"td",19),N(4),b(),I(5,"td",20),N(6),b(),I(7,"td",21)(8,"div",22),N(9),b()(),I(10,"td",23),N(11),b()()),n&2){let t=e.$implicit,r=H(2);Z("ngClass",Pr(7,aZ,t.id===r.activeStintDriverId(),t.id!==r.activeStintDriverId())),k(2),Nn(t.id),k(2),Nn(t.raceName),k(2),z(" ",r.getDriverStintCount(t.id)," "),k(2),Z("ngClass",ot(10,cZ,r.getDriverTimeOnTrackWarning(t.id))),k(),z(" ",r.getDriverTimeOnTrack(t.id)," "),k(2),z("",r.getDriverTimeFromLastStint(t.id)," ")}}function hZ(n,e){if(n&1&&(I(0,"div",6)(1,"table",7)(2,"thead",8)(3,"tr"),ve(4,"th",9),I(5,"th",10),N(6," Name "),b(),I(7,"th",11),N(8," Stint "),b(),I(9,"th",12),N(10," On track "),b(),I(11,"th",13),N(12," From last stint "),b()()()(),I(13,"div",14)(14,"table",15)(15,"tbody"),X(16,dZ,12,12,"tr",16),b()()()()),n&2){let t=H();k(16),Z("ngForOf",t.drivers())}}var Iv=class n{driverService=D(Tr);stintService=D(jt);drivers=this.driverService.drivers;driversTimeOnTrackWarningCount=this.driverService.driversTimeOnTrackWarningCount;activeStintDriverId=xe(()=>{let e=this.stintService.activeStint();if(e)return e.driverId});isOpen=!0;getDriverTimeOnTrack(e){return mt(this.driverService.driversTimeOnTrackMap().get(e))}getDriverTimeOnTrackWarning(e){return this.driverService.driversTimeOnTrackWarningMap().get(e)||!1}getDriverStintCount(e){return this.driverService.driversStintCountMap().get(e)??0}getDriverTimeFromLastStint(e){return mt(this.driverService.driversTimeFromLastStintMap().get(e))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-driver"]],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","flex-col","overflow-clip"],[1,"w-full","bg-white","table-fixed"],[1,"sticky","top-0"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"py-2","border-b","border-gray-200","text-left","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"flex-1","overflow-y-auto"],[1,"w-full","table-fixed"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-sm","xl:text-base","text-black"],[1,"py-2","border-b","border-gray-200","text-left","text-sm","xl:text-base","text-black"],[1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],[1,"p-1","text-center","rounded",3,"ngClass"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"]],template:function(t,r){t&1&&(I(0,"div",0)(1,"div",1),le("click",function(){return r.isOpen=!r.isOpen}),I(2,"div",2),N(3,"\u{1F417} Driver"),b(),I(4,"div",3),X(5,lZ,2,1,"div",4)(6,uZ,2,0,"div",5),b()(),X(7,hZ,17,1,"div",6),b()),t&2&&(k(),Z("ngClass",ot(3,sZ,r.isOpen)),k(4),ne(r.driversTimeOnTrackWarningCount()>0?5:6),k(2),ne(r.isOpen?7:-1))},dependencies:[Qe,$n],encapsulation:2})};var Tv=class n{raceService=D(xt);stintService=D(jt);raceConfigService=D(Ke);open=ee(!1);openInMilliseconds=ee(0);constructor(){$e({willEndRaceDate:ae(this.raceService.willEndRaceDate),activeStint:ae(this.stintService.activeStint),activeRaceConfig:ae(this.raceConfigService.activeRaceConfig),ping:gt(1e3)}).pipe(Ye()).subscribe(({willEndRaceDate:e,activeStint:t,activeRaceConfig:r})=>{e&&t&&r?(this.open.set(this.calculatePitLaneOpen(e,t,r)),this.openInMilliseconds.set(this.calculatePitLaneOpenInMilliseconds(t,r))):(this.open.set(!1),this.openInMilliseconds.set(0))})}calculatePitLaneOpenInMilliseconds(e,t){let r=new Date().getTime();return ca(e.startDate.toDate(),t.minStintMinute).getTime()-r}calculatePitLaneOpen(e,t,r){let i=new Date,o=AV(e,r.pitLaneCloseBeforeEndRaceMinute),s=SV(i,o),a=ca(t.startDate.toDate(),r.minStintMinute),c=Xg(i,a);return s&&c}static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};var bv=class n{audio=new Audio;constructor(){this.audio.addEventListener("error",e=>console.error("Audio error:",e))}play(){this.audio.play()}playFile(e){this.audio=new Audio(e),this.audio.play()}pause(){this.audio.pause()}stop(){this.audio.pause(),this.audio.currentTime=0}seek(e){this.audio.currentTime=e}setVolume(e){this.audio.volume=e}setLoop(e){this.audio.loop=e}on(e,t){this.audio.addEventListener(e,t)}off(e,t){this.audio.removeEventListener(e,t)}getCurrentTime(){return this.audio.currentTime}getDuration(){return this.audio.duration}static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};var fZ=n=>({"mb-4":n}),pZ=n=>({"animate-bounce":n});function mZ(n,e){if(n&1&&(I(0,"div",3),N(1),b()),n&2){let t=H();k(),z(" Open in: ",t.pitLaneOpenInMillisecondsString()," ")}}function gZ(n,e){n&1&&(I(0,"div",5),N(1," Open "),b())}function vZ(n,e){n&1&&(I(0,"div",6),N(1," Closed "),b())}function yZ(n,e){if(n&1&&(I(0,"option",20),N(1),b()),n&2){let t=e.$implicit;Z("value",t.id),k(),z(" ",t.raceName," ")}}function _Z(n,e){if(n&1){let t=ur();I(0,"div",11),N(1,"PIT SETTINGS"),b(),I(2,"form")(3,"div",12)(4,"label",13),N(5,"\u{1F417} Driver"),b(),I(6,"select",14),Mr("ngModelChange",function(i){lt(t);let o=H(2);return ni(o.selectedDriver,i)||(o.selectedDriver=i),ut(i)}),le("change",function(){lt(t);let i=H(2);return ut(i.updateDriverId())}),X(7,yZ,2,2,"option",15),b()(),I(8,"div",12)(9,"label",16),N(10,"\u26FD\uFE0F Refueling"),b(),I(11,"input",17),le("change",function(){lt(t);let i=H(2);return ut(i.updateRefueling())}),Mr("ngModelChange",function(i){lt(t);let o=H(2);return ni(o.refueling,i)||(o.refueling=i),ut(i)}),b()(),I(12,"div",12)(13,"label",18),N(14,"\u{1F6DE} Tyre change"),b(),I(15,"input",19),Mr("ngModelChange",function(i){lt(t);let o=H(2);return ni(o.tyreChange,i)||(o.tyreChange=i),ut(i)}),le("change",function(){lt(t);let i=H(2);return ut(i.updateTyreChange())}),b()()()}if(n&2){let t=H(2);k(6),Z("disabled",t.activePit()!==void 0),Nr("ngModel",t.selectedDriver),k(),Z("ngForOf",t.drivers()),k(4),Z("disabled",t.activePit()!==void 0),Nr("ngModel",t.refueling),k(4),Z("disabled",t.activePit()!==void 0||!t.tyreChangeWindowOpen()||t.remainingTyreChange()<=0),Nr("ngModel",t.tyreChange)}}function wZ(n,e){if(n&1&&(I(0,"div",21),N(1),b()),n&2){let t=H(3);Z("ngClass",ot(2,pZ,t.activePitRemainingMilliseconds()<1e4)),k(),z(" Pit out enabled in: ",t.activePitRemainingMillisecondsString()," ")}}function EZ(n,e){n&1&&(I(0,"div",22),N(1," Pit out ready! "),b())}function IZ(n,e){if(n&1&&X(0,wZ,2,4,"div",21)(1,EZ,2,0,"div",22),n&2){let t=H(2);ne(t.activePitRemainingMilliseconds()>0?0:1)}}function TZ(n,e){if(n&1){let t=ur();I(0,"div",7),X(1,_Z,16,7)(2,IZ,2,1),b(),I(3,"div",8)(4,"button",9),le("click",function(){lt(t);let i=H();return ut(i.pitIn())}),N(5," Pit in "),b(),I(6,"button",10),le("click",function(){lt(t);let i=H();return ut(i.pitOut())}),N(7," Pit out "),b()()}if(n&2){let t=H();k(),ne(t.activePit()?2:1),k(3),Z("disabled",!t.pitLaneOpen()),k(2),Z("disabled",!t.activePit()||t.activePit()&&t.activePitRemainingMilliseconds()>0)}}var Cv=class n{pitLaneService=D(Tv);pitService=D(Xt);driverService=D(Tr);raceManagerService=D(Go);tyreService=D(fi);raceConfigService=D(Ke);audioService=D(bv);pitLaneOpen=this.pitLaneService.open;pitLaneOpenInMilliseconds=this.pitLaneService.openInMilliseconds;pitLaneOpenInMillisecondsString=xe(()=>mt(this.pitLaneService.openInMilliseconds()));activePit=this.pitService.activePit;activePitRemainingMilliseconds=this.pitService.activePitRemainingMilliseconds;activePitRemainingMillisecondsString=xe(()=>RV(this.pitService.activePitRemainingMilliseconds()));drivers=this.driverService.drivers;remainingTyreChange=this.tyreService.remainingTyreChange;tyreChangeWindowOpen=this.tyreService.tyreChangeWindowOpen;isOpen=!0;refueling=!1;tyreChange=!1;selectedDriver="1";constructor(){kr(()=>{let e=this.raceConfigService.activeRaceConfig();e&&(this.selectedDriver=e.nextPitDriverId,this.refueling=e.nextPitRefueling,this.tyreChange=e.nextPitTyreChange)})}pitIn(){return y(this,null,function*(){this.audioService.playFile("assets/box_box_box_box.mp3"),yield this.raceManagerService.pitIn(this.selectedDriver,this.refueling,this.tyreChange)})}pitOut(){return y(this,null,function*(){yield this.raceManagerService.pitOut(),this.raceConfigService.updateNextPitRefueling(!1),this.raceConfigService.updateNextPitTyreChange(!1);let e=this.driverService.driverWithMoreTimeFromLastStint();e&&this.raceConfigService.updateNextPitDriverId(e.id)})}updateDriverId(){this.raceConfigService.updateNextPitDriverId(this.selectedDriver)}updateTyreChange(){this.raceConfigService.updateNextPitTyreChange(this.tyreChange)}updateRefueling(){this.raceConfigService.updateNextPitRefueling(this.refueling)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-pit-lane"]],decls:9,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"flex","items-center"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"bg-red-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","flex-col","items-center","mb-2"],[1,"flex","justify-between"],[1,"bg-green-500","hover:bg-green-700","disabled:bg-green-200","text-white","font-bold","py-2","px-4","rounded",3,"click","disabled"],[1,"bg-red-500","hover:bg-red-700","disabled:bg-red-200","text-white","font-bold","py-2","px-4","rounded",3,"click","disabled"],[1,"font-semibold","mb-2"],[1,"mb-2"],["for","driverSelect",1,"mr-2"],["id","driverSelect","name","driverSelect",1,"border","rounded","p-1",3,"ngModelChange","change","disabled","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","refueling",1,"mr-2"],["type","checkbox","id","refueling","name","refueling",3,"change","ngModelChange","disabled","ngModel"],["for","tyreChange",1,"mr-2"],["type","checkbox","id","tyreChange","name","tyreChange",3,"ngModelChange","change","disabled","ngModel"],[3,"value"],[1,"bg-yellow-500","p-2","rounded-lg","text-white","text-center","text-xl","font-black","hover:cursor-default",3,"ngClass"],[1,"bg-green-500","p-2","rounded-lg","text-white","text-center","text-xl","font-black","hover:cursor-default"]],template:function(t,r){t&1&&(I(0,"div",0)(1,"div",1),le("click",function(){return r.isOpen=!r.isOpen}),I(2,"div",2),N(3,"\u{1F17F}\uFE0F Pit Lane"),b(),X(4,mZ,2,1,"div",3),I(5,"div",4),X(6,gZ,2,0,"div",5)(7,vZ,2,0,"div",6),b()(),X(8,TZ,8,3),b()),t&2&&(k(),Z("ngClass",ot(4,fZ,r.isOpen)),k(3),ne(r.pitLaneOpenInMilliseconds()>0?4:-1),k(2),ne(r.pitLaneOpen()?6:7),k(2),ne(r.isOpen?8:-1))},dependencies:[Qe,Jo,Qo,hv,fv,XC,El,Ko,Yo,ro,no,$n],encapsulation:2})};var bZ=n=>({"mb-2":n});function CZ(n,e){if(n&1&&(I(0,"div",4),N(1),b()),n&2){let t=H();k(),z(" Remaining: ",t.remainingDriverChanges()," ")}}function DZ(n,e){n&1&&(I(0,"div",5),N(1," Completed! "),b())}function SZ(n,e){if(n&1&&(I(0,"div",6)(1,"div")(2,"div",7),N(3,"Competed"),b(),I(4,"div",8),N(5),b()(),I(6,"div")(7,"div",9),N(8,"Remaining"),b(),I(9,"div",10),N(10),b()()()),n&2){let t=H();k(5),z(" ",t.completedDriverChanges()," "),k(5),z(" ",t.remainingDriverChanges()," ")}}var Dv=class n{pitService=D(Xt);remainingDriverChanges=this.pitService.remainingDriverChanges;completedDriverChanges=this.pitService.completedDriverChanges;isOpen=!1;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-driver-change"]],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"]],template:function(t,r){t&1&&(I(0,"div",0)(1,"div",1),le("click",function(){return r.isOpen=!r.isOpen}),I(2,"div",2),N(3,"\u{1F417} \u{1F504} Driver change"),b(),I(4,"div",3),X(5,CZ,2,1,"div",4)(6,DZ,2,0,"div",5),b()(),X(7,SZ,11,2,"div",6),b()),t&2&&(k(),Z("ngClass",ot(3,bZ,r.isOpen)),k(4),ne(r.remainingDriverChanges()>0?5:6),k(2),ne(r.isOpen?7:-1))},dependencies:[Qe],encapsulation:2})};var AZ=n=>({"mb-2":n});function RZ(n,e){if(n&1&&(I(0,"div",4),N(1),b(),I(2,"div",5),N(3),b()),n&2){let t=H(2);k(),z(" Remaining: ",t.activeStintRemainingTimeOnTrackString()," "),k(2),z(" Laps: ",t.activeStintRemainingLaps()," ")}}function xZ(n,e){if(n&1&&(I(0,"div",6),N(1),b(),I(2,"div",7),N(3),b()),n&2){let t=H(2);k(),z(" Gaining: ",t.activeStintGainedTimeOnTrackString()," "),k(2),z(" Laps: ",t.activeStintGainedLaps()," ")}}function NZ(n,e){if(n&1&&X(0,RZ,4,2)(1,xZ,4,2),n&2){let t=H();ne(t.activeStintRemainingTimeOnTrack()>0?0:1)}}function MZ(n,e){if(n&1&&N(0),n&2){let t=H(2);z(" ",t.activeStintRemainingTimeOnTrackString()," ")}}function PZ(n,e){n&1&&N(0," --:--:-- ")}function kZ(n,e){if(n&1&&N(0),n&2){let t=H(2);z(" ",t.activeStintRemainingLaps()," ")}}function OZ(n,e){n&1&&N(0," 0 ")}function FZ(n,e){if(n&1&&(I(0,"div",8)(1,"div")(2,"div",9),N(3,"Time on track"),b(),I(4,"div",10),N(5),b()(),I(6,"div")(7,"div",11),N(8,"Laps"),b(),I(9,"div",12),N(10),b()()(),ve(11,"hr",13),I(12,"div",8)(13,"div")(14,"div",9),N(15,"Remaining time on track"),b(),I(16,"div",10),X(17,MZ,1,1)(18,PZ,1,0),b()(),I(19,"div")(20,"div",11),N(21,"Remaining laps"),b(),I(22,"div",12),X(23,kZ,1,1)(24,OZ,1,0),b()()(),ve(25,"hr",13),I(26,"div",14)(27,"div")(28,"div",9),N(29,"Gained time on track"),b(),I(30,"div",10),N(31),b()(),I(32,"div")(33,"div",11),N(34,"Gained laps"),b(),I(35,"div",12),N(36),b()()()),n&2){let t=H();k(5),z(" ",t.activeStintTimeOnTrackString()," "),k(5),z(" ",t.activeStintLaps()," "),k(7),ne(t.activeStint()?17:18),k(6),ne(t.activeStint()?23:24),k(8),z(" ",t.activeStintGainedTimeOnTrackString()," "),k(5),z(" ",t.activeStintGainedLaps()," ")}}var Sv=class n{stintService=D(jt);activeStint=this.stintService.activeStint;activeStintRemainingTimeOnTrack=this.stintService.activeStintRemainingTimeOnTrack;activeStintTimeOnTrackString=xe(()=>mt(this.stintService.activeStintTimeOnTrack()));activeStintRemainingTimeOnTrackString=xe(()=>mt(this.stintService.activeStintRemainingTimeOnTrack()));activeStintGainedTimeOnTrackString=xe(()=>mt(this.stintService.activeStintGainedTimeOnTrack()));activeStintLaps=this.stintService.activeStintLaps;activeStintRemainingLaps=this.stintService.activeStintRemainingLaps;activeStintGainedLaps=this.stintService.activeStintGainedLaps;isOpen=!0;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-active-stint"]],decls:7,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","mr-1","font-medium","hover:cursor-default"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","mr-1","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(I(0,"div",0)(1,"div",1),le("click",function(){return r.isOpen=!r.isOpen}),I(2,"div",2),N(3,"\u{1F3CE}\uFE0F \u{1F4A8} Active stint"),b(),I(4,"div",3),X(5,NZ,2,1),b()(),X(6,FZ,37,6),b()),t&2&&(k(),Z("ngClass",ot(3,AZ,r.isOpen)),k(4),ne(r.activeStint()?5:-1),k(),ne(r.isOpen?6:-1))},dependencies:[Qe],encapsulation:2})};var LZ=n=>({"mb-2":n}),VZ=(n,e)=>({"bg-green-100 font-semibold":n,"hover:bg-gray-50":e});function UZ(n,e){if(n&1&&(I(0,"tr",19)(1,"td",20),N(2),b(),I(3,"td",21),N(4),b(),I(5,"td",18),N(6),Ro(7,"date"),b(),I(8,"td",18),N(9),b(),I(10,"td",18),N(11),b()()),n&2){let t=e.$implicit,r=H(2);Z("ngClass",Pr(9,VZ,t.id===r.activeStintId(),t.id!==r.activeStintId())),k(2),Nn(t.id),k(2),z("",r.getDriverRacingName(t.driverId)," "),k(2),z("",xo(7,6,t.startDate.toDate(),"HH:mm:ss")," "),k(3),z(" ",r.getEndDate(t)," "),k(2),z(" ",r.calculateTimeOnTrack(t.startDate.toDate(),t.endDate==null?null:t.endDate.toDate())," ")}}function jZ(n,e){if(n&1&&(I(0,"div",5)(1,"table",6)(2,"thead",7)(3,"tr"),ve(4,"th",8),I(5,"th",9),N(6," Driver "),b(),I(7,"th",10),N(8,"Start "),b(),I(9,"th",10),N(10,"End "),b(),I(11,"th",10),N(12,"On track "),b()()()(),I(13,"div",11)(14,"table",12)(15,"tbody"),X(16,UZ,12,12,"tr",13),b()()(),I(17,"div",14)(18,"table",12)(19,"tfoot",15)(20,"tr",16)(21,"td",17),N(22,"Totals "),b(),I(23,"td",18),N(24),b()()()()()()),n&2){let t=H();k(16),Z("ngForOf",t.stints()),k(8),z("",t.calculateTotalTimeOnTrack()," ")}}var Av=class n{stintService=D(jt);driverService=D(Tr);stints=this.stintService.stints;activeStintId=xe(()=>{let e=this.stintService.activeStint();if(e)return e.id});isOpen=!0;getDriverRacingName(e){let r=this.driverService.drivers().find(i=>i.id===e);return r?r.raceName:""}calculateTimeOnTrack(e,t){return t?Ir(e,t):Ir(e,new Date)}calculateTotalTimeOnTrack(){let e=this.stintService.stints(),t=0;return e.forEach(r=>{r.endDate?t+=r.endDate.toDate().getTime()-r.startDate.toDate().getTime():t+=new Date().getTime()-r.startDate.toDate().getTime()}),mt(t)}getEndDate(e){if(e.endDate)return qr(e.endDate.toDate(),"HH:mm:ss");let t=nr(e.startDate.toDate(),e.optimumMilliseconds);return"("+qr(t,"HH:mm:ss")+")"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-stint"]],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"max-h-72","flex","flex-col","overflow-clip"],[1,"w-full","bg-white","table-fixed"],[1,"sticky","top-0"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-xs","xl:text-base","font-medium","text-gray-700"],[1,"py-2","border-b","border-gray-200","text-left","text-xs","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-xs","xl:text-base","font-medium","text-gray-700"],[1,"flex-1","overflow-y-auto"],[1,"w-full","table-fixed"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"flex"],[1,"sticky","bottom-0-0"],[1,"bg-gray-100","font-bold"],["colspan","6",1,"py-2","px-3","border-b","border-gray-200","text-xs","xl:text-base","text-black"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-xs","xl:text-base","text-black","font-mono"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-gray-200","text-xs","xl:text-base","text-black"],[1,"py-2","border-b","border-gray-200","text-xs","xl:text-base","text-black"]],template:function(t,r){t&1&&(I(0,"div",0)(1,"div",1),le("click",function(){return r.isOpen=!r.isOpen}),I(2,"div",2),N(3,"\u23F3 Stint"),b(),I(4,"div",3)(5,"div",4),N(6),b()()(),X(7,jZ,25,2,"div",5),b()),t&2&&(k(),Z("ngClass",ot(3,LZ,r.isOpen)),k(5),z(" Total: ",r.stints().length," "),k(),ne(r.isOpen?7:-1))},dependencies:[Qe,$n,ic],encapsulation:2})};var BZ=n=>({"mb-2":n});function $Z(n,e){if(n&1){let t=ur();I(0,"div",5)(1,"div")(2,"div",6),N(3,"Reference time (mills)"),b(),I(4,"div",7)(5,"button",8),le("click",function(){lt(t);let i=H();return ut(i.increaseReferenceLapTime())}),N(6," + "),b(),I(7,"form",9),le("ngSubmit",function(){lt(t);let i=H();return ut(i.onSubmit())}),I(8,"input",10),Mr("ngModelChange",function(i){lt(t);let o=H();return ni(o.referenceLapTime,i)||(o.referenceLapTime=i),ut(i)}),b()(),I(9,"button",11),le("click",function(){lt(t);let i=H();return ut(i.decreaseReferenceLapTime())}),N(10," - "),b()()()()}if(n&2){let t=H();k(8),Nr("ngModel",t.referenceLapTime)}}var Rv=class n{raceConfigService=D(Ke);isOpen=!0;referenceLapTime=0;referenceLapTimeString="--:--:---";constructor(){kr(()=>{let e=this.raceConfigService.activeRaceConfig();e&&(this.referenceLapTime=e.referenceLapTimeMillisecond,this.referenceLapTimeString=xV(e.referenceLapTimeMillisecond))})}onSubmit(){this.raceConfigService.updateReferenceLapTime(this.referenceLapTime)}increaseReferenceLapTime(){this.raceConfigService.updateReferenceLapTime(this.referenceLapTime+1)}decreaseReferenceLapTime(){this.raceConfigService.updateReferenceLapTime(this.referenceLapTime-1)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-lap"]],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-center"],[1,"text-gray-600","text-center"],[1,"flex","justify-end"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","mr-1","rounded",3,"click"],[1,"text-right",3,"ngSubmit"],["type","number","id","referenceLapTime","name","referenceLapTime","required","","min","1",1,"border","rounded-lg","px-2","py-1","w-36","text-right",3,"ngModelChange","ngModel"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","ml-1","rounded",3,"click"]],template:function(t,r){t&1&&(I(0,"div",0)(1,"div",1),le("click",function(){return r.isOpen=!r.isOpen}),I(2,"div",2),N(3,"\u23F1\uFE0F Lap"),b(),I(4,"div",3)(5,"div",4),N(6),b()()(),X(7,$Z,11,1,"div",5),b()),t&2&&(k(),Z("ngClass",ot(3,BZ,r.isOpen)),k(5),z(" Reference: ",r.referenceLapTimeString," "),k(),ne(r.isOpen?7:-1))},dependencies:[Qe,Jo,Qo,wl,ah,Ko,Yo,lh,ch,ro,no,n2],encapsulation:2})};var HZ=n=>({"mb-2":n}),WZ=(n,e)=>({"bg-green-100 font-semibold":n,"hover:bg-gray-50":e});function qZ(n,e){n&1&&N(0," \u2705 ")}function zZ(n,e){n&1&&N(0," \u2705 ")}function GZ(n,e){n&1&&N(0," \u2705 ")}function KZ(n,e){if(n&1&&(I(0,"tr",20)(1,"td",17),N(2),b(),I(3,"td",21),X(4,qZ,1,0),b(),I(5,"td",22),X(6,zZ,1,0),b(),I(7,"td",22),X(8,GZ,1,0),b(),I(9,"td",23),N(10),b()()),n&2){let t=e.$implicit,r=H(2);Z("ngClass",Pr(6,WZ,t.id===r.activePitId(),t.id!==r.activePitId())),k(2),Nn(t.id),k(2),ne(t.entryDriverId!==t.exitDriverId?4:-1),k(2),ne(t.refuel?6:-1),k(2),ne(t.tyreChange?8:-1),k(2),z(" ",r.calculatePitTime(t.entryTime.toDate(),t.exitTime==null?null:t.exitTime.toDate())," ")}}function YZ(n,e){if(n&1&&(I(0,"div",5)(1,"table",6)(2,"thead",7)(3,"tr"),ve(4,"th",8),I(5,"th",9),N(6," \u{1F417} \u{1F504} "),b(),I(7,"th",9),N(8," \u26FD\uFE0F "),b(),I(9,"th",9),N(10," \u{1F6DE} \u{1F504} "),b(),I(11,"th",10),N(12,"Time "),b()()()(),I(13,"div",11)(14,"table",12)(15,"tbody"),X(16,KZ,11,9,"tr",13),b()()(),I(17,"div",14)(18,"table",12)(19,"tfoot",15)(20,"tr",16)(21,"td",17),N(22,"Totals "),b(),I(23,"td",18),N(24),b(),I(25,"td",18),N(26),b(),I(27,"td",18),N(28),b(),I(29,"td",19),N(30),b()()()()()()),n&2){let t=H();k(16),Z("ngForOf",t.pits()),k(8),Nn(t.completedDriverChanges()),k(2),Nn(t.calculateTotalRefueling()),k(2),Nn(t.calculateTotalTyreChanges()),k(2),z("",t.calculateTotalPitTime()," ")}}var xv=class n{pitService=D(Xt);pits=this.pitService.pits;activePitId=xe(()=>{let e=this.pitService.activePit();if(e)return e.id});completedDriverChanges=this.pitService.completedDriverChanges;isOpen=!0;calculatePitTime(e,t){return t?Ir(e,t):Ir(e,new Date)}calculateTotalPitTime(){let e=this.pitService.pits(),t=0;return e.forEach(r=>{r.exitTime?t+=r.exitTime.toDate().getTime()-r.entryTime.toDate().getTime():t+=new Date().getTime()-r.entryTime.toDate().getTime()}),mt(t)}calculateTotalRefueling(){return this.pitService.pits().filter(e=>e.refuel).length}calculateTotalTyreChanges(){return this.pitService.pits().filter(e=>e.tyreChange).length}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-pit"]],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"max-h-72","flex","flex-col","overflow-clip"],[1,"w-full","bg-white","table-fixed"],[1,"sticky","top-0"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"flex-1","overflow-y-auto"],[1,"w-full","table-fixed"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"flex"],[1,"sticky","bottom-0-0"],[1,"bg-gray-100","font-bold"],[1,"py-2","px-3","border-b","border-gray-200","text-sm","xl:text-base","text-black"],[1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black"],[1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"]],template:function(t,r){t&1&&(I(0,"div",0)(1,"div",1),le("click",function(){return r.isOpen=!r.isOpen}),I(2,"div",2),N(3,"\u{1F468}\u{1F3FB}\u200D\u{1F527} Pit"),b(),I(4,"div",3)(5,"div",4),N(6),b()()(),X(7,YZ,31,5,"div",5),b()),t&2&&(k(),Z("ngClass",ot(3,HZ,r.isOpen)),k(5),z(" Total: ",r.pits().length," "),k(),ne(r.isOpen?7:-1))},dependencies:[Qe,$n],encapsulation:2})};var Nv=class n{stintService=D(jt);deltaStints=ee([]);totalDeltaMilliseconds=ee(0);deltaMilliseconds=ee(0);constructor(){$e({stints:ae(this.stintService.stints),ping:gt(1e3)}).pipe(Ye()).subscribe(({stints:e})=>{let t=this.createDeltaStints(e);this.deltaStints.set(t),this.totalDeltaMilliseconds.set(t.reduce((r,i)=>r+i.delta,0)),this.deltaMilliseconds.set(this.createDeltaStints(this.filterCompletedStints(e)).reduce((r,i)=>r+i.delta,0))})}filterCompletedStints(e){return e.filter(t=>t.endDate!==null)}createDeltaStints(e){let t=[];return e.forEach(r=>{t.push(this.createDeltaStint(r))}),t}createDeltaStint(e){let r=(e.endDate?e.endDate.toDate():new Date).getTime()-e.startDate.toDate().getTime(),i=r-e.optimumMilliseconds;return{id:e.id,delta:i,optimum:e.optimumMilliseconds,timeOnTrack:r}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};var Il=(i=>(i.ABOVE="above",i.BELOW="below",i.LEFT="left",i.RIGHT="right",i))(Il||{});var QZ=(n,e,t,r)=>({"tooltip--above":n,"tooltip--below":e,"tooltip--left":t,"tooltip--right":r});function JZ(n,e){n&1&&ve(0,"hr",2)}function XZ(n,e){if(n&1&&(I(0,"div",2),N(1),b(),X(2,JZ,1,0,"hr",2)),n&2){let t=H(),r=t.$implicit,i=t.$index,o=t.$count;k(),z(" ",r," "),k(),ne(i!==o-1?2:-1)}}function ZZ(n,e){if(n&1&&X(0,XZ,3,2),n&2){let t=e.$implicit;ne(t!==""?0:-1)}}function eee(n,e){if(n&1&&(ve(0,"hr",2),I(1,"div",3),N(2),b()),n&2){let t=H();k(2),z(" ",t.data==null?null:t.data.footer," ")}}var Mv=class n{left=0;top=0;data;position="below";TooltipPosition=Il;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["tooltip"]],inputs:{left:"left",top:"top",data:"data",position:"position"},decls:6,vars:12,consts:[[1,"whitespace-pre-line","fixed","bg-black","rounded-lg","shadow-md","p-4","text-white",3,"ngClass"],[1,"font-bold","text-lg","mb-2"],[1,"mb-1"],[1,"text-lg"]],template:function(t,r){t&1&&(I(0,"div",0)(1,"div",1),N(2),b(),$x(3,ZZ,1,1,null,null,Bx),X(5,eee,3,1),b()),t&2&&(nc("left",r.left+"px")("top",r.top+"px"),Z("ngClass",zx(7,QZ,r.position===r.TooltipPosition.ABOVE,r.position===r.TooltipPosition.BELOW,r.position===r.TooltipPosition.LEFT,r.position===r.TooltipPosition.RIGHT)),k(2),z(" ",r.data==null?null:r.data.title," "),k(),Hx(r.data==null?null:r.data.paragraphs),k(2),ne((r.data==null?null:r.data.footer)!==""?5:-1))},dependencies:[Qe],styles:[".tooltip--below[_ngcontent-%COMP%]{transform:translate(-50%);margin-top:7px}.tooltip--below[_ngcontent-%COMP%]:before{border-left-color:transparent;border-right-color:transparent;border-top:none;left:calc(50% - 5px);top:-5px}.tooltip--above[_ngcontent-%COMP%]{transform:translate(-50%,-100%);margin-bottom:7px}.tooltip--above[_ngcontent-%COMP%]:before{border-left-color:transparent;border-right-color:transparent;border-bottom:none;left:calc(50% - 5px);bottom:-5px}.tooltip--left[_ngcontent-%COMP%]{transform:translate(calc(-100% - 7px),-50%)}.tooltip--left[_ngcontent-%COMP%]:before{border-top-color:transparent;border-bottom-color:transparent;border-right:none;right:-5px;top:calc(50% - 5px)}.tooltip--right[_ngcontent-%COMP%]{transform:translateY(-50%);margin-left:7px}.tooltip--right[_ngcontent-%COMP%]:before{left:-5px;top:calc(50% - 5px)}"]})};var Tl=class n{elementRef=D(lr);viewContainerRef=D(bs);document=D(gn);tooltipData;tooltipPosition="below";tooltipComponent;hideTooltipTimeout;onMouseEnter(){this.tooltipComponent||(this.tooltipComponent=this.viewContainerRef.createComponent(Mv),this.document.body.appendChild(this.tooltipComponent.location.nativeElement),this.setTooltipComponentProperties(),this.tooltipComponent.hostView.detectChanges())}onMouseLeave(){this.removeTooltip()}removeTooltip(){this.tooltipComponent&&(this.tooltipComponent.destroy(),this.tooltipComponent=void 0,this.hideTooltipTimeout&&(clearTimeout(this.hideTooltipTimeout),this.hideTooltipTimeout=void 0))}setTooltipComponentProperties(){if(!this.tooltipComponent)return;this.tooltipComponent.instance.data=this.tooltipData,this.tooltipComponent.instance.position=this.tooltipPosition;let{left:e,right:t,top:r,bottom:i}=this.elementRef.nativeElement.getBoundingClientRect();switch(this.tooltipPosition){case"below":{this.tooltipComponent.instance.left=Math.round((t-e)/2+e),this.tooltipComponent.instance.top=Math.round(i);break}case"above":{this.tooltipComponent.instance.left=Math.round((t-e)/2+e),this.tooltipComponent.instance.top=Math.round(r);break}case"right":{this.tooltipComponent.instance.left=Math.round(t),this.tooltipComponent.instance.top=Math.round(r+(i-r)/2);break}case"left":{this.tooltipComponent.instance.left=Math.round(e),this.tooltipComponent.instance.top=Math.round(r+(i-r)/2);break}default:break}}static \u0275fac=function(t){return new(t||n)};static \u0275dir=dt({type:n,selectors:[["","tooltip",""]],hostBindings:function(t,r){t&1&&le("mouseenter",function(){return r.onMouseEnter()})("mouseleave",function(){return r.onMouseLeave()})},inputs:{tooltipData:"tooltipData",tooltipPosition:"tooltipPosition"}})};var tee=n=>({"mb-2":n}),nee=(n,e)=>({"bg-yellow-500 text-white":n,"bg-green-500 text-white":e}),r2=(n,e)=>({"bg-yellow-500":n,"bg-green-500":e}),ree=(n,e)=>({"bg-green-100 font-semibold":n,"hover:bg-gray-50":e});function iee(n,e){n&1&&N(0," Losing: ")}function oee(n,e){n&1&&N(0," Gaining: ")}function see(n,e){if(n&1&&(I(0,"tr",19)(1,"td",20),N(2),b(),I(3,"td",17),N(4),b(),I(5,"td",17),N(6),b(),I(7,"td",21)(8,"div",18),N(9),b()()()),n&2){let t=e.$implicit,r=H(2);Z("ngClass",Pr(6,ree,t.id===r.activeStintId(),t.id!==r.activeStintId())),k(2),Nn(t.id),k(2),z("",r.getMillisecondsToTimeString(t.timeOnTrack)," "),k(2),z("",r.getMillisecondsToTimeString(t.optimum)," "),k(2),Z("ngClass",Pr(9,r2,t.delta<0,t.delta>=0)),k(),z(" ",r.getMillisecondsToTimeString(t.delta)," ")}}function aee(n,e){if(n&1&&(I(0,"div",5)(1,"table",6)(2,"thead",7)(3,"tr"),ve(4,"th",8),I(5,"th",9),N(6,"On track "),b(),I(7,"th",9),N(8,"Optimum "),b(),I(9,"th",9),N(10,"Delta "),b()()()(),I(11,"div",10)(12,"table",11)(13,"tbody"),X(14,see,10,12,"tr",12),b()()(),I(15,"div",13)(16,"table",11)(17,"tfoot",14)(18,"tr",15)(19,"td",16),N(20,"Totals "),b(),I(21,"td",17)(22,"div",18),N(23),b()()()()()()()),n&2){let t=H();k(14),Z("ngForOf",t.deltaStints()),k(8),Z("ngClass",Pr(3,r2,t.totalDeltaMilliseconds()<0,t.totalDeltaMilliseconds()>=0)),k(),z(" ",t.getMillisecondsToTimeString(t.totalDeltaMilliseconds())," ")}}var Pv=class n{stintService=D(jt);deltaStintService=D(Nv);deltaStints=this.deltaStintService.deltaStints;totalDeltaMilliseconds=this.deltaStintService.totalDeltaMilliseconds;deltaMilliseconds=this.deltaStintService.deltaMilliseconds;activeStintId=xe(()=>{let e=this.stintService.activeStint();if(e)return e.id});isOpen=!0;tooltipInfo={footer:"",paragraphs:["Only completed stint"],title:""};tooltipPosition="above";getMillisecondsToTimeString(e){return mt(Math.abs(e))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-delta-stint"]],decls:10,vars:12,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],["tooltip","",1,"px-2","py-1","rounded-lg","text-center","font-medium","hover:cursor-default",3,"ngClass","tooltipData","tooltipPosition"],[1,"max-h-72","flex","flex-col","overflow-clip"],[1,"w-full","bg-white","table-fixed"],[1,"sticky","top-0"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-xs","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-xs","xl:text-base","font-medium","text-gray-700"],[1,"flex-1","overflow-y-auto"],[1,"w-full","table-fixed"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"flex"],[1,"sticky","bottom-0-0"],[1,"bg-gray-100","font-bold"],["colspan","5",1,"py-2","px-3","border-b","border-gray-200","text-xs","xl:text-base","text-black"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-xs","xl:text-base","text-black","font-mono"],[1,"p-1","text-center","text-white","rounded",3,"ngClass"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-gray-200","text-xs","xl:text-base","text-black"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-xs","xl:text-base","font-mono"]],template:function(t,r){t&1&&(I(0,"div",0)(1,"div",1),le("click",function(){return r.isOpen=!r.isOpen}),I(2,"div",2),N(3,"\u{1F9D0} Delta stint"),b(),I(4,"div",3)(5,"div",4),X(6,iee,1,0)(7,oee,1,0),N(8),b()()(),X(9,aee,24,6,"div",5),b()),t&2&&(k(),Z("ngClass",ot(7,tee,r.isOpen)),k(4),Z("ngClass",Pr(9,nee,r.deltaMilliseconds()<0,r.deltaMilliseconds()>0))("tooltipData",r.tooltipInfo)("tooltipPosition",r.tooltipPosition),k(),ne(r.deltaMilliseconds()<0?6:r.deltaMilliseconds()>0?7:-1),k(2),z(" ",r.getMillisecondsToTimeString(r.deltaMilliseconds())," "),k(),ne(r.isOpen?9:-1))},dependencies:[$n,Qe,Tl],encapsulation:2})};var kv=class n{stintService=D(jt);pitService=D(Xt);stintOptimizerService=D(pi);raceConfigService=D(Ke);tyreService=D(fi);timelineSteps=ee([]);constructor(){$e({stints:ae(this.stintService.stints),pits:ae(this.pitService.pits),remainingDriverChanges:ae(this.pitService.remainingDriverChanges),raceConfig:ae(this.raceConfigService.activeRaceConfig),optimizedStint:ae(this.stintOptimizerService.optimizedStint),remainingTyreChange:ae(this.tyreService.remainingTyreChange),ping:gt(1e3)}).pipe(Ye()).subscribe(({stints:e,pits:t,remainingDriverChanges:r,raceConfig:i,optimizedStint:o,remainingTyreChange:s})=>{let a=this.createRealSteps(e,t);if(a=a.sort((c,u)=>c.start.getTime()-u.start.getTime()),o&&i){let c=this.createFutureSteps(a.at(a.length-1),r,o,i,s);a.push(...c)}a=a.sort((c,u)=>c.start.getTime()-u.start.getTime()),this.timelineSteps.set(a)})}createRealSteps(e,t){let r=[];return e.forEach(i=>{r.push(this.createTimelineStepFromStint(i))}),t.forEach(i=>{r.push(this.createTimelineStepFromPit(i))}),r}createTimelineStepFromPit(e){return{durationMills:e.exitTime?e.exitTime.toDate().getTime()-e.entryTime.toDate().getTime():void 0,end:e.exitTime?.toDate(),pit:e,start:e.entryTime.toDate(),status:e.exitTime?"DONE":"ACTIVE",stint:void 0,type:"PIT"}}createTimelineStepFromStint(e){return{durationMills:e.endDate?e.endDate.toDate().getTime()-e.startDate.toDate().getTime():void 0,end:e.endDate?.toDate(),pit:void 0,start:e.startDate.toDate(),status:e.endDate?"DONE":"ACTIVE",stint:e,type:"STINT"}}createFutureSteps(e,t,r,i,o){let s=[],a=this.calculateLastEndDateFromRealStep(e,r,i);if(e===void 0||e.type==="PIT"){let u=nr(a,r.avgStintMillisecondsTime);s.push(this.createFutureStintStep(a,u,r.avgStintMillisecondsTime)),a=u}let c=Math.floor(t/2);for(let u=0;u<t;u++){let d=pl(i.minPitSeconds);o>0&&u>=c-Math.floor(o/2)&&u<c+Math.ceil(o/2)&&(d=pl(i.minPitWithTyreChangeSeconds),o--);let f=nr(a,d);s.push(this.createFuturePitStep(a,f,d));let m=nr(f,r.avgStintMillisecondsTime);s.push(this.createFutureStintStep(f,m,r.avgStintMillisecondsTime)),a=m}return s}createFutureStintStep(e,t,r){return{durationMills:r,end:t,pit:void 0,start:e,status:"FUTURE",stint:void 0,type:"STINT"}}createFuturePitStep(e,t,r){return{durationMills:r,end:t,pit:void 0,start:e,status:"FUTURE",stint:void 0,type:"PIT"}}calculateLastEndDateFromRealStep(e,t,r){if(e===void 0)return new Date;let i;return e.type==="PIT"?i=ll(e.start,r.minPitSeconds):i=nr(e.start,t.avgStintMillisecondsTime),i>new Date?i:new Date}static \u0275fac=function(t){return new(t||n)};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};function cee(n,e){if(n&1&&(I(0,"div",2),N(1),b()),n&2){let t=H(),r=t.$implicit,i=t.index,o=H(2);Z("ngClass",o.getStintColor(r))("tooltipData",o.getStintTooltipInfo(r))("tooltipPosition",o.getTooltipPosition(i)),k(),z(" ",o.getStintIcon(r)," ")}}function lee(n,e){if(n&1&&(I(0,"div",3),N(1),b()),n&2){let t=H(),r=t.$implicit,i=t.index,o=H(2);Z("ngClass",o.getPitColor(r))("tooltipData",o.getPitTooltipInfo(r))("tooltipPosition",o.getTooltipPosition(i)),k(),z(" ",o.getPitIcon(r)," ")}}function uee(n,e){if(n&1&&(Sw(0),X(1,cee,2,4,"div",2)(2,lee,2,4,"div",3),Aw()),n&2){let t=e.$implicit;k(),ne(t.type==="STINT"?1:2)}}function dee(n,e){if(n&1&&(I(0,"div",0),X(1,uee,3,1,"ng-container",1),b()),n&2){let t=H();k(),Z("ngForOf",t.timelineSteps())}}var Ov=class n{timelineService=D(kv);driverService=D(Tr);timelineSteps=this.timelineService.timelineSteps;hide=!1;constructor(){this.onResize(),window.addEventListener("resize",this.onResize.bind(this))}onResize(){this.hide=window.innerWidth<=1460}getTooltipPosition(e){let t=this.timelineSteps().length;if(t<=9)return"below";let r=Math.floor(t/10);return e<r?"right":e>=t-r?"left":"below"}getStintColor(e){return e.status==="DONE"?"bg-blue-400":e.status==="FUTURE"?"bg-blue-100":"bg-green-500"}getStintIcon(e){return e.status==="ACTIVE"?"\u{1F3CE}\uFE0F":"\u23F3"}getStintTooltipInfo(e){return{footer:"",paragraphs:[this.getStintTimeInfo(e),this.getDriverInfo(e)].filter(Boolean),title:this.getTooltipTitle(e)}}getStintTimeInfo(e){let t=[];t.push("Start: "+qr(e.start,"HH:mm:ss"));let r=e.stint?e.stint.optimumMilliseconds??0:0;switch(e.status){case"ACTIVE":t.push("On track: "+Ir(e.start,new Date)),t.push("Optimum: "+mt(r)),t.push("End: ("+qr(nr(e.start,r),"HH:mm:ss")+")");break;case"DONE":t.push("On track: "+Ir(e.start,e.end)),t.push("Optimum: "+mt(r)),t.push("End: "+(e.end?qr(e.end,"HH:mm:ss"):""));break;case"FUTURE":t.push("Optimum: "+mt(e.durationMills)),t.push("End: "+(e.end?qr(e.end,"HH:mm:ss"):""));break}return t.filter(Boolean).join(`
`)}getPitColor(e){return e.status==="DONE"?"bg-amber-400":e.status==="FUTURE"?"bg-amber-100":"bg-green-500"}getPitIcon(e){return e.status==="ACTIVE"?"\u{1F17F}\uFE0F":"\u{1F468}\u{1F3FB}\u200D\u{1F527}"}getPitTooltipInfo(e){let t=[this.getPitTimeInfo(e),this.getDriverInfo(e)].filter(Boolean);return{footer:this.getPitFooter(e),paragraphs:t,title:this.getTooltipTitle(e)}}getPitTimeInfo(e){let t=[];switch(t.push("Enter: "+qr(e.start,"HH:mm:ss")),e.status){case"ACTIVE":t.push("Time: "+Ir(e.start,new Date));break;case"DONE":t.push("Time: "+mt(e.durationMills)),t.push("Exit: "+(e.end?qr(e.end,"HH:mm:ss"):""));break;case"FUTURE":t.push("Time: "+mt(e.durationMills)),t.push("Exit: "+(e.end?qr(e.end,"HH:mm:ss"):""));break}return t.filter(Boolean).join(`
`)}getPitFooter(e){let t=[];return e.pit&&(e.pit.entryDriverId!==e.pit.exitDriverId&&t.push("\u{1F417}"),e.pit.refuel&&t.push("\u26FD\uFE0F"),e.pit.tyreChange&&t.push("\u{1F6DE}\uFE0F")),t.join(" | ")}getTooltipTitle(e){if(e.type==="STINT"){let t=e.stint?"("+e.stint.id+")":"";return e.status==="ACTIVE"?"Active stint "+t:e.status==="DONE"?"Stint "+t:"Future stint"}if(e.type==="PIT"){let t=e.pit?"("+e.pit.id+")":"";return e.status==="ACTIVE"?"Active pit "+t:e.status==="DONE"?"Pit "+t:"Future pit"}return""}getDriverInfo(e){if(e.type==="STINT"&&e.stint)return"Driver: "+this.getDriverRacingName(e.stint.driverId);if(e.type==="PIT"&&e.pit){let t="Driver in: "+this.getDriverRacingName(e.pit.entryDriverId),r="Driver out: "+this.getDriverRacingName(e.pit.exitDriverId);return t+`
`+r}return""}getDriverRacingName(e){let r=this.driverService.drivers().find(i=>i.id===e);return r?r.raceName:""}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-timeline"]],decls:1,vars:1,consts:[[1,"mb-3","flex","justify-center","items-center"],[4,"ngFor","ngForOf"],["tooltip","",1,"flex-1","flex","px-1","py-3","justify-center","items-center",3,"ngClass","tooltipData","tooltipPosition"],["tooltip","",1,"flex-0","flex","px-1","py-3","justify-center","items-center",3,"ngClass","tooltipData","tooltipPosition"]],template:function(t,r){t&1&&X(0,dee,2,1,"div",0),t&2&&ne(r.hide?-1:0)},dependencies:[$n,Qe,Tl],encapsulation:2})};function hee(n,e){if(n&1){let t=ur();I(0,"button",3),le("click",function(){lt(t);let i=H(2);return ut(i.startRace())}),N(1," Start race "),b()}}function fee(n,e){if(n&1){let t=ur();I(0,"button",4),le("click",function(){lt(t);let i=H(2);return ut(i.endRace())}),N(1," End race "),b()}}function pee(n,e){if(n&1&&(I(0,"div",0),X(1,hee,2,0,"button",1)(2,fee,2,0,"button",2),b()),n&2){let t=H();k(),ne(t.willEndRaceDate()?-1:1),k(),ne(t.hideEndRaceButton?-1:2)}}var Fv=class n{raceService=D(xt);raceConfigService=D(Ke);raceManagerService=D(Go);activeRace=this.raceService.activeRace;activeRaceConfig=this.raceConfigService.activeRaceConfig;willEndRaceDate=this.raceService.willEndRaceDate;hideEndRaceButton=!0;constructor(){$e({activeRace:ae(this.activeRace),activeRaceConfig:ae(this.activeRaceConfig),ping:gt(1e3)}).pipe(Ye()).subscribe(({activeRace:e,activeRaceConfig:t})=>{e&&t?this.hideEndRaceButton=this.calculateHide(e,t):this.hideEndRaceButton=!0})}endRace(){this.raceManagerService.endRace()}calculateHide(e,t){if(e.end===null)return!0;let r=Xi(e.start.toDate(),t.durationHour);return Yg(r,new Date)>t.endRaceThresholdSeconds}startRace(){let e=this.raceConfigService.activeRaceConfig()?.startRaceDriverId;e&&this.raceManagerService.startRace(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-race-button"]],decls:1,vars:1,consts:[[1,"mb-3","flex","justify-center","items-center"],[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded"],[1,"bg-red-500","hover:bg-red-700","disabled:bg-red-200","text-white","font-bold","py-2","px-4","rounded"],[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded",3,"click"],[1,"bg-red-500","hover:bg-red-700","disabled:bg-red-200","text-white","font-bold","py-2","px-4","rounded",3,"click"]],template:function(t,r){t&1&&X(0,pee,3,2,"div",0),t&2&&ne(!r.hideEndRaceButton||!r.willEndRaceDate()?0:-1)},encapsulation:2})};var Lv=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-root"]],decls:40,vars:0,consts:[[1,"w-full","h-full","min-h-full","dark:bg-black"],[1,"p-4","grid","grid-cols-1","lg:grid-cols-3","gap-3"],[1,"text-xl","md:text-3xl","dark:text-white","font-semibold"],[1,"text-right","lg:text-center"],[1,"mx-4","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-3","mb-4"],[1,"flex-col","md:h-fit"],[1,"mb-3","lg:mb-4"],[1,"lg:mb-4"],[1,"flex-col"],[1,"flex","flex-col","justify-center","items-center"],["src","assets/circuit_logo.png","alt","Circuito",1,"max-w-48","md:max-w-xs"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-1"],["src","assets/cremona_circuit.jpg","alt","Circuito",1,"max-w-sm","md:max-w-xl"],["src","assets/cremona_circuit_plan.jpg","alt","Circuito",1,"max-w-sm","md:max-w-xl"]],template:function(t,r){t&1&&(I(0,"div",0)(1,"div",1)(2,"div",2),N(3,"\u{1F3CE}\uFE0F dash-boar \u{1F417}"),b(),I(4,"div",3),ve(5,"app-race"),b()(),ve(6,"app-race-button")(7,"app-timeline"),I(8,"div",4)(9,"div",5)(10,"div",6),ve(11,"app-pit-lane"),b(),I(12,"div",6),ve(13,"app-driver-change"),b(),I(14,"div",6),ve(15,"app-tyre-change-window"),b(),I(16,"div",7),ve(17,"app-pit"),b()(),I(18,"div",8)(19,"div",6),ve(20,"app-fuel"),b(),I(21,"div",6),ve(22,"app-stint-optimizer"),b(),I(23,"div",6),ve(24,"app-lap"),b(),I(25,"div",7),ve(26,"app-driver"),b()(),I(27,"div",8)(28,"div",6),ve(29,"app-active-stint"),b(),I(30,"div",6),ve(31,"app-stint"),b(),I(32,"div",7),ve(33,"app-delta-stint"),b()()(),I(34,"div",9),ve(35,"img",10),I(36,"div",11),ve(37,"img",12)(38,"img",13),b()()(),ve(39,"router-outlet"))},dependencies:[AE,gv,vv,wv,Ev,Iv,Cv,Dv,Sv,Av,Rv,xv,Pv,Ov,Fv],encapsulation:2})};LN(Lv,$L).catch(n=>console.error(n));
