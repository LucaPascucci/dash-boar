import{$ as Yt,A as Qt,B as tr,C as Ml,D as vt,E as GC,F as WC,G as nr,H as qi,I as uc,J as lc,K as dc,L as zi,M as KC,N as QC,O as YC,P as ZC,Q as hc,R as fc,S as _e,T as nt,U as Nt,V as rr,W as vg,X as kl,Y as rt,Z as ct,_ as Ar,a as V,aa as JC,b as xe,ba as ut,c as oi,ca as Ol,d as y,da as q,e as F,ea as XC,f as Zs,g as VC,h as UC,i as jC,j as BC,k as $C,l as ai,m as _g,n as yg,o as Js,p as Rt,q as oc,r as HC,s as ac,t as Pl,u as qC,v as er,w as zC,x as Sr,y as Hi,z as cc}from"./chunk-VUN4IAWB.js";function eb(t,e){return Object.is(t,e)}var mt=null,pc=!1,Fl=1,Rr=Symbol("SIGNAL");function ye(t){let e=mt;return mt=t,e}function tb(){return mt}function a1(){return pc}var Xs={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Tg(t){if(pc)throw new Error("");if(mt===null)return;mt.consumerOnSignalRead(t);let e=mt.nextProducerIndex++;if($l(mt),e<mt.producerNode.length&&mt.producerNode[e]!==t&&gc(mt)){let n=mt.producerNode[e];Bl(n,mt.producerIndexOfThis[e])}mt.producerNode[e]!==t&&(mt.producerNode[e]=t,mt.producerIndexOfThis[e]=gc(mt)?ob(t,mt,e):0),mt.producerLastReadVersion[e]=t.version}function c1(){Fl++}function nb(t){if(!(gc(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Fl)){if(!t.producerMustRecompute(t)&&!Ul(t)){t.dirty=!1,t.lastCleanEpoch=Fl;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Fl}}function rb(t){if(t.liveConsumerNode===void 0)return;let e=pc;pc=!0;try{for(let n of t.liveConsumerNode)n.dirty||sb(n)}finally{pc=e}}function ib(){return mt?.consumerAllowSignalWrites!==!1}function sb(t){t.dirty=!0,rb(t),t.consumerMarkedDirty?.(t)}function mc(t){return t&&(t.nextProducerIndex=0),ye(t)}function Vl(t,e){if(ye(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(gc(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Bl(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ul(t){$l(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(nb(n),r!==n.version))return!0}return!1}function jl(t){if($l(t),gc(t))for(let e=0;e<t.producerNode.length;e++)Bl(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function ob(t,e,n){if(ab(t),t.liveConsumerNode.length===0&&cb(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=ob(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Bl(t,e){if(ab(t),t.liveConsumerNode.length===1&&cb(t))for(let r=0;r<t.producerNode.length;r++)Bl(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];$l(i),i.producerIndexOfThis[r]=e}}function gc(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function $l(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function ab(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function cb(t){return t.producerNode!==void 0}function ub(t){let e=Object.create(u1);e.computation=t;let n=()=>{if(nb(e),Tg(e),e.value===Ll)throw e.error;return e.value};return n[Rr]=e,n}var Ig=Symbol("UNSET"),wg=Symbol("COMPUTING"),Ll=Symbol("ERRORED"),u1=xe(V({},Xs),{value:Ig,dirty:!0,error:null,equal:eb,producerMustRecompute(t){return t.value===Ig||t.value===wg},producerRecomputeValue(t){if(t.value===wg)throw new Error("Detected cycle in computations.");let e=t.value;t.value=wg;let n=mc(t),r;try{r=t.computation()}catch(i){r=Ll,t.error=i}finally{Vl(t,n)}if(e!==Ig&&e!==Ll&&r!==Ll&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function l1(){throw new Error}var lb=l1;function db(){lb()}function hb(t){lb=t}var d1=null;function fb(t){let e=Object.create(gb);e.value=t;let n=()=>(Tg(e),e.value);return n[Rr]=e,n}function Cg(t,e){ib()||db(),t.equal(t.value,e)||(t.value=e,h1(t))}function pb(t,e){ib()||db(),Cg(t,e(t.value))}var gb=xe(V({},Xs),{equal:eb,value:void 0});function h1(t){t.version++,c1(),rb(t),d1?.()}function mb(t,e,n){let r=Object.create(f1);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;let i=c=>{r.cleanupFn=c};function s(c){return c.fn===null&&c.schedule===null}function o(c){s(c)||(jl(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=Eg)}let a=()=>{if(r.fn===null)return;if(a1())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!Ul(r))return;r.hasRun=!0;let c=mc(r);try{r.cleanupFn(),r.cleanupFn=Eg,r.fn(i)}finally{Vl(r,c)}};return r.ref={notify:()=>sb(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>o(r),[Rr]:r},r.ref}var Eg=()=>{},f1=xe(V({},Xs),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule!==null&&t.schedule(t.ref)},hasRun:!1,cleanupFn:Eg});function oe(t){return typeof t=="function"}function eo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Hl=eo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Gi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Je=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(oe(r))try{r()}catch(s){e=s instanceof Hl?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{_b(s)}catch(o){e=e??[],o instanceof Hl?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Hl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)_b(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Gi(n,e)}remove(e){let{_finalizers:n}=this;n&&Gi(n,e),e instanceof t&&e._removeParent(this)}};Je.EMPTY=(()=>{let t=new Je;return t.closed=!0,t})();var bg=Je.EMPTY;function ql(t){return t instanceof Je||t&&"closed"in t&&oe(t.remove)&&oe(t.add)&&oe(t.unsubscribe)}function _b(t){oe(t)?t():t.unsubscribe()}var Fn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var to={setTimeout(t,e,...n){let{delegate:r}=to;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=to;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function zl(t){to.setTimeout(()=>{let{onUnhandledError:e}=Fn;if(e)e(t);else throw t})}function _c(){}var yb=Dg("C",void 0,void 0);function vb(t){return Dg("E",void 0,t)}function Ib(t){return Dg("N",t,void 0)}function Dg(t,e,n){return{kind:t,value:e,error:n}}var Wi=null;function no(t){if(Fn.useDeprecatedSynchronousErrorHandling){let e=!Wi;if(e&&(Wi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Wi;if(Wi=null,n)throw r}}else t()}function wb(t){Fn.useDeprecatedSynchronousErrorHandling&&Wi&&(Wi.errorThrown=!0,Wi.error=t)}var Ki=class extends Je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ql(e)&&e.add(this)):this.destination=m1}static create(e,n,r){return new ro(e,n,r)}next(e){this.isStopped?Ag(Ib(e),this):this._next(e)}error(e){this.isStopped?Ag(vb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ag(yb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},p1=Function.prototype.bind;function Sg(t,e){return p1.call(t,e)}var Rg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Gl(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Gl(r)}else Gl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Gl(n)}}},ro=class extends Ki{constructor(e,n,r){super();let i;if(oe(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Fn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Sg(e.next,s),error:e.error&&Sg(e.error,s),complete:e.complete&&Sg(e.complete,s)}):i=e}this.destination=new Rg(i)}};function Gl(t){Fn.useDeprecatedSynchronousErrorHandling?wb(t):zl(t)}function g1(t){throw t}function Ag(t,e){let{onStoppedNotification:n}=Fn;n&&to.setTimeout(()=>n(t,e))}var m1={closed:!0,next:_c,error:g1,complete:_c};var io=typeof Symbol=="function"&&Symbol.observable||"@@observable";function $t(t){return t}function Wl(...t){return Ng(t)}function Ng(t){return t.length===0?$t:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ae=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=y1(n)?n:new ro(n,r,i);return no(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Eb(r),new r((i,s)=>{let o=new ro({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[io](){return this}pipe(...n){return Ng(n)(this)}toPromise(n){return n=Eb(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Eb(t){var e;return(e=t??Fn.Promise)!==null&&e!==void 0?e:Promise}function _1(t){return t&&oe(t.next)&&oe(t.error)&&oe(t.complete)}function y1(t){return t&&t instanceof Ki||_1(t)&&ql(t)}function xg(t){return oe(t?.lift)}function de(t){return e=>{if(xg(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function he(t,e,n,r,i){return new yc(t,e,n,r,i)}var yc=class extends Ki{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function so(){return de((t,e)=>{let n=null;t._refCount++;let r=he(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var oo=class extends ae{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,xg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Je;let n=this.getSubject();e.add(this.source.subscribe(he(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Je.EMPTY)}return e}refCount(){return so()(this)}};var Tb=eo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var it=(()=>{class t extends ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Kl(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Tb}next(n){no(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){no(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){no(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?bg:(this.currentObservers=null,s.push(n),new Je(()=>{this.currentObservers=null,Gi(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new ae;return n.source=this,n}}return t.create=(e,n)=>new Kl(e,n),t})(),Kl=class extends it{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:bg}};var Tt=class extends it{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var vc={now(){return(vc.delegate||Date).now()},delegate:void 0};var Ic=class extends it{constructor(e=1/0,n=1/0,r=vc){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var Ql=class extends Je{constructor(e,n){super()}schedule(e,n=0){return this}};var wc={setInterval(t,e,...n){let{delegate:r}=wc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=wc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ao=class extends Ql{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return wc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&wc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Gi(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var co=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};co.now=vc.now;var uo=class extends co{constructor(e,n=co.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var lo=new uo(ao),Pg=lo;var Yl=class extends ao{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Zl=class extends uo{};var Mg=new Zl(Yl);var cn=new ae(t=>t.complete());function Jl(t){return t&&oe(t.schedule)}function Cb(t){return t[t.length-1]}function bb(t){return oe(Cb(t))?t.pop():void 0}function ci(t){return Jl(Cb(t))?t.pop():void 0}function kg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Sb(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(f){o(f)}}function c(d){try{l(r.throw(d))}catch(f){o(f)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Db(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qi(t){return this instanceof Qi?(this.v=t,this):new Qi(t)}function Ab(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(_){return function(E){return Promise.resolve(E).then(_,f)}}function a(_,E){r[_]&&(i[_]=function(R){return new Promise(function(A,M){s.push([_,R,A,M])>1||c(_,R)})},E&&(i[_]=E(i[_])))}function c(_,E){try{l(r[_](E))}catch(R){g(s[0][3],R)}}function l(_){_.value instanceof Qi?Promise.resolve(_.value.v).then(d,f):g(s[0][2],_)}function d(_){c("next",_)}function f(_){c("throw",_)}function g(_,E){_(E),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Rb(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Db=="function"?Db(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Xl=t=>t&&typeof t.length=="number"&&typeof t!="function";function ed(t){return oe(t?.then)}function td(t){return oe(t[io])}function nd(t){return Symbol.asyncIterator&&oe(t?.[Symbol.asyncIterator])}function rd(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function v1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var id=v1();function sd(t){return oe(t?.[id])}function od(t){return Ab(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Qi(n.read());if(i)return yield Qi(void 0);yield yield Qi(r)}}finally{n.releaseLock()}})}function ad(t){return oe(t?.getReader)}function lt(t){if(t instanceof ae)return t;if(t!=null){if(td(t))return I1(t);if(Xl(t))return w1(t);if(ed(t))return E1(t);if(nd(t))return Nb(t);if(sd(t))return T1(t);if(ad(t))return C1(t)}throw rd(t)}function I1(t){return new ae(e=>{let n=t[io]();if(oe(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function w1(t){return new ae(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function E1(t){return new ae(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,zl)})}function T1(t){return new ae(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Nb(t){return new ae(e=>{b1(t,e).catch(n=>e.error(n))})}function C1(t){return Nb(od(t))}function b1(t,e){var n,r,i,s;return Sb(this,void 0,void 0,function*(){try{for(n=Rb(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function Zt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function ui(t,e=0){return de((n,r)=>{n.subscribe(he(r,i=>Zt(r,t,()=>r.next(i),e),()=>Zt(r,t,()=>r.complete(),e),i=>Zt(r,t,()=>r.error(i),e)))})}function li(t,e=0){return de((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function xb(t,e){return lt(t).pipe(li(e),ui(e))}function Pb(t,e){return lt(t).pipe(li(e),ui(e))}function Mb(t,e){return new ae(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function kb(t,e){return new ae(n=>{let r;return Zt(n,e,()=>{r=t[id](),Zt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>oe(r?.return)&&r.return()})}function cd(t,e){if(!t)throw new Error("Iterable cannot be null");return new ae(n=>{Zt(n,e,()=>{let r=t[Symbol.asyncIterator]();Zt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Ob(t,e){return cd(od(t),e)}function Fb(t,e){if(t!=null){if(td(t))return xb(t,e);if(Xl(t))return Mb(t,e);if(ed(t))return Pb(t,e);if(nd(t))return cd(t,e);if(sd(t))return kb(t,e);if(ad(t))return Ob(t,e)}throw rd(t)}function Xe(t,e){return e?Fb(t,e):lt(t)}function K(...t){let e=ci(t);return Xe(t,e)}function ho(t,e){let n=oe(t)?t:()=>t,r=i=>i.error(n());return new ae(e?i=>e.schedule(r,0,i):r)}function Og(t){return!!t&&(t instanceof ae||oe(t.lift)&&oe(t.subscribe))}var Nr=eo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Lb(t){return t instanceof Date&&!isNaN(t)}function Q(t,e){return de((n,r)=>{let i=0;n.subscribe(he(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:D1}=Array;function S1(t,e){return D1(e)?t(...e):t(e)}function Vb(t){return Q(e=>S1(t,e))}var{isArray:A1}=Array,{getPrototypeOf:R1,prototype:N1,keys:x1}=Object;function Ub(t){if(t.length===1){let e=t[0];if(A1(e))return{args:e,keys:null};if(P1(e)){let n=x1(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function P1(t){return t&&typeof t=="object"&&R1(t)===N1}function jb(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function di(...t){let e=ci(t),n=bb(t),{args:r,keys:i}=Ub(t);if(r.length===0)return Xe([],e);let s=new ae(M1(r,e,i?o=>jb(i,o):$t));return n?s.pipe(Vb(n)):s}function M1(t,e,n=$t){return r=>{Bb(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)Bb(e,()=>{let l=Xe(t[c],e),d=!1;l.subscribe(he(r,f=>{s[c]=f,d||(d=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Bb(t,e,n){t?Zt(n,t,e):e()}function $b(t,e,n,r,i,s,o,a){let c=[],l=0,d=0,f=!1,g=()=>{f&&!c.length&&!l&&e.complete()},_=R=>l<r?E(R):c.push(R),E=R=>{s&&e.next(R),l++;let A=!1;lt(n(R,d++)).subscribe(he(e,M=>{i?.(M),s?_(M):e.next(M)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;c.length&&l<r;){let M=c.shift();o?Zt(e,o,()=>E(M)):E(M)}g()}catch(M){e.error(M)}}))};return t.subscribe(he(e,_,()=>{f=!0,g()})),()=>{a?.()}}function st(t,e,n=1/0){return oe(e)?st((r,i)=>Q((s,o)=>e(r,s,i,o))(lt(t(r,i))),n):(typeof e=="number"&&(n=e),de((r,i)=>$b(r,i,t,n)))}function Fg(t=1/0){return st($t,t)}function Hb(){return Fg(1)}function fo(...t){return Hb()(Xe(t,ci(t)))}function ud(t){return new ae(e=>{lt(t()).subscribe(e)})}function Lg(t=0,e,n=Pg){let r=-1;return e!=null&&(Jl(e)?n=e:r=e),new ae(i=>{let s=Lb(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function Yi(t=0,e=lo){return t<0&&(t=0),Lg(t,t,e)}function Ht(t,e){return de((n,r)=>{let i=0;n.subscribe(he(r,s=>t.call(e,s,i++)&&r.next(s)))})}function hi(t){return de((e,n)=>{let r=null,i=!1,s;r=e.subscribe(he(n,void 0,void 0,o=>{s=lt(t(o,hi(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function qb(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(he(o,d=>{let f=l++;c=a?t(c,d,f):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Zi(t,e){return oe(e)?st(t,e,1):st(t,1)}function fi(t){return de((e,n)=>{let r=!1;e.subscribe(he(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function xr(t){return t<=0?()=>cn:de((e,n)=>{let r=0;e.subscribe(he(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Vg(t){return Q(()=>t)}function ld(t,e=$t){return t=t??k1,de((n,r)=>{let i,s=!0;n.subscribe(he(r,o=>{let a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function k1(t,e){return t===e}function dd(t=O1){return de((e,n)=>{let r=!1;e.subscribe(he(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function O1(){return new Nr}function Ec(t){return de((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function ir(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ht((i,s)=>t(i,s,r)):$t,xr(1),n?fi(e):dd(()=>new Nr))}function Ug(t,e,n,r){return de((i,s)=>{let o;!e||typeof e=="function"?o=e:{duration:n,element:o,connector:r}=e;let a=new Map,c=E=>{a.forEach(E),E(s)},l=E=>c(R=>R.error(E)),d=0,f=!1,g=new yc(s,E=>{try{let R=t(E),A=a.get(R);if(!A){a.set(R,A=r?r():new it);let M=_(R,A);if(s.next(M),n){let L=he(A,()=>{A.complete(),L?.unsubscribe()},void 0,void 0,()=>a.delete(R));g.add(lt(n(M)).subscribe(L))}}A.next(o?o(E):E)}catch(R){l(R)}},()=>c(E=>E.complete()),l,()=>a.clear(),()=>(f=!0,d===0));i.subscribe(g);function _(E,R){let A=new ae(M=>{d++;let L=R.subscribe(M);return()=>{L.unsubscribe(),--d===0&&f&&g.unsubscribe()}});return A.key=E,A}})}function po(t){return t<=0?()=>cn:de((e,n)=>{let r=[];e.subscribe(he(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function jg(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ht((i,s)=>t(i,s,r)):$t,po(1),n?fi(e):dd(()=>new Nr))}function hd(){return de((t,e)=>{let n,r=!1;t.subscribe(he(e,i=>{let s=n;n=i,r&&e.next([s,i]),r=!0}))})}function fd(t,e){return de(qb(t,e,arguments.length>=2,!0))}function go(...t){let e=ci(t);return de((n,r)=>{(e?fo(t,n,e):fo(t,n)).subscribe(r)})}function Jt(t,e){return de((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(he(r,c=>{i?.unsubscribe();let l=0,d=s++;lt(t(c,d)).subscribe(i=he(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Ln(t){return de((e,n)=>{lt(t).subscribe(he(n,()=>n.complete(),_c)),!n.closed&&e.subscribe(n)})}function _t(t,e,n){let r=oe(t)||e||n?{next:t,error:e,complete:n}:t;return r?de((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(he(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):$t}var F1="https://g.co/ng/security#xss",W=class extends Error{constructor(e,n){super(Vm(e,n)),this.code=e}};function Vm(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Gd(t){return{toString:t}.toString()}var pd="__parameters__";function L1(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function V1(t,e,n){return Gd(()=>{let r=L1(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,d){let f=c.hasOwnProperty(pd)?c[pd]:Object.defineProperty(c,pd,{value:[]})[pd];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Tc=globalThis;function Fe(t){for(let e in t)if(t[e]===Fe)return e;throw Error("Could not find renamed property on target object.")}function en(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(en).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function zb(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var U1=Fe({__forward_ref__:Fe});function SD(t){return t.__forward_ref__=SD,t.toString=function(){return en(this())},t}function vn(t){return AD(t)?t():t}function AD(t){return typeof t=="function"&&t.hasOwnProperty(U1)&&t.__forward_ref__===SD}function H(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Wd(t){return Gb(t,ND)||Gb(t,xD)}function RD(t){return Wd(t)!==null}function Gb(t,e){return t.hasOwnProperty(e)?t[e]:null}function j1(t){let e=t&&(t[ND]||t[xD]);return e||null}function Wb(t){return t&&(t.hasOwnProperty(Kb)||t.hasOwnProperty(B1))?t[Kb]:null}var ND=Fe({\u0275prov:Fe}),Kb=Fe({\u0275inj:Fe}),xD=Fe({ngInjectableDef:Fe}),B1=Fe({ngInjectorDef:Fe}),U=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=H({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function PD(t){return t&&!!t.\u0275providers}var $1=Fe({\u0275cmp:Fe}),H1=Fe({\u0275dir:Fe}),q1=Fe({\u0275pipe:Fe}),z1=Fe({\u0275mod:Fe}),Td=Fe({\u0275fac:Fe}),Dc=Fe({__NG_ELEMENT_ID__:Fe}),Qb=Fe({__NG_ENV_ID__:Fe});function MD(t){return typeof t=="string"?t:t==null?"":String(t)}function G1(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():MD(t)}function W1(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new W(-200,t)}function Um(t,e){throw new W(-201,!1)}var fe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(fe||{}),Jg;function kD(){return Jg}function Xt(t){let e=Jg;return Jg=t,e}function OD(t,e,n){let r=Wd(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&fe.Optional)return null;if(e!==void 0)return e;Um(t,"Injector")}var K1={},Sc=K1,Xg="__NG_DI_FLAG__",Cd="ngTempTokenPath",Q1="ngTokenPath",Y1=/\n/gm,Z1="\u0275",Yb="__source",vo;function J1(){return vo}function pi(t){let e=vo;return vo=t,e}function X1(t,e=fe.Default){if(vo===void 0)throw new W(-203,!1);return vo===null?OD(t,void 0,e):vo.get(t,e&fe.Optional?null:void 0,e)}function J(t,e=fe.Default){return(kD()||X1)(vn(t),e)}function P(t,e=fe.Default){return J(t,Kd(e))}function Kd(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function em(t){let e=[];for(let n=0;n<t.length;n++){let r=vn(t[n]);if(Array.isArray(r)){if(r.length===0)throw new W(900,!1);let i,s=fe.Default;for(let o=0;o<r.length;o++){let a=r[o],c=tF(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(J(i,s))}else e.push(J(r))}return e}function eF(t,e){return t[Xg]=e,t.prototype[Xg]=e,t}function tF(t){return t[Xg]}function nF(t,e,n,r){let i=t[Cd];throw e[Yb]&&i.unshift(e[Yb]),t.message=rF(`
`+t.message,i,n,r),t[Q1]=i,t[Cd]=null,t}function rF(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==Z1?t.slice(2):t;let i=en(e);if(Array.isArray(e))i=e.map(en).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):en(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Y1,`
  `)}`}var te=eF(V1("Optional"),8);function es(t,e){let n=t.hasOwnProperty(Td);return n?t[Td]:null}function jm(t,e){t.forEach(n=>Array.isArray(n)?jm(n,e):e(n))}function FD(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function bd(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function iF(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function sF(t,e,n){let r=Fc(t,e);return r>=0?t[r|1]=n:(r=~r,iF(t,r,e,n)),r}function Bg(t,e){let n=Fc(t,e);if(n>=0)return t[n|1]}function Fc(t,e){return oF(t,e,1)}function oF(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Ac={},ts=[],wo=new U(""),LD=new U("",-1),VD=new U(""),Dd=class{get(e,n=Sc){if(n===Sc){let r=new Error(`NullInjectorError: No provider for ${en(e)}!`);throw r.name="NullInjectorError",r}return n}},UD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(UD||{}),ar=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ar||{}),_i=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(_i||{});function aF(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function tm(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];uF(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function cF(t){return t===3||t===4||t===6}function uF(t){return t.charCodeAt(0)===64}function Bm(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Zb(t,n,i,null,e[++r]):Zb(t,n,i,null,null))}}return t}function Zb(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var jD="ng-template";function lF(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&aF(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if($m(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function $m(t){return t.type===4&&t.value!==jD}function dF(t,e,n){let r=t.type===4&&!n?jD:t.value;return e===r}function hF(t,e,n){let r=4,i=t.attrs,s=i!==null?gF(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Vn(r)&&!Vn(c))return!1;if(o&&Vn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!dF(t,c,n)||c===""&&e.length===1){if(Vn(r))return!1;o=!0}}else if(r&8){if(i===null||!lF(t,i,c,n)){if(Vn(r))return!1;o=!0}}else{let l=e[++a],d=fF(c,i,$m(t),n);if(d===-1){if(Vn(r))return!1;o=!0;continue}if(l!==""){let f;if(d>s?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(Vn(r))return!1;o=!0}}}}return Vn(r)||o}function Vn(t){return(t&1)===0}function fF(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return mF(e,t)}function pF(t,e,n=!1){for(let r=0;r<e.length;r++)if(hF(t,e[r],n))return!0;return!1}function gF(t){for(let e=0;e<t.length;e++){let n=t[e];if(cF(n))return e}return t.length}function mF(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Jb(t,e){return t?":not("+e.trim()+")":e}function _F(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Vn(o)&&(e+=Jb(s,i),i=""),r=o,s=s||!Vn(r);n++}return i!==""&&(e+=Jb(s,i)),e}function yF(t){return t.map(_F).join(",")}function vF(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Vn(i))break;i=s}r++}return{attrs:e,classes:n}}function Cn(t){return Gd(()=>{let e=GD(t),n=xe(V({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===UD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ar.Emulated,styles:t.styles||ts,_:null,schemas:t.schemas||null,tView:null,id:""});WD(n);let r=t.dependencies;return n.directiveDefs=eD(r,!1),n.pipeDefs=eD(r,!0),n.id=EF(n),n})}function IF(t){return ns(t)||$D(t)}function wF(t){return t!==null}function Xb(t,e){if(t==null)return Ac;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=_i.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==_i.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Qd(t){return Gd(()=>{let e=GD(t);return WD(e),e})}function BD(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function ns(t){return t[$1]||null}function $D(t){return t[H1]||null}function HD(t){return t[q1]||null}function qD(t){let e=ns(t)||$D(t)||HD(t);return e!==null?e.standalone:!1}function zD(t,e){let n=t[z1]||null;if(!n&&e===!0)throw new Error(`Type ${en(t)} does not have '\u0275mod' property.`);return n}function GD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ac,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||ts,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Xb(t.inputs,e),outputs:Xb(t.outputs),debugInfo:null}}function WD(t){t.features?.forEach(e=>e(t))}function eD(t,e){if(!t)return null;let n=e?HD:IF;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(wF)}function EF(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ue(t){return{\u0275providers:t}}function TF(...t){return{\u0275providers:KD(!0,t),\u0275fromNgModule:!0}}function KD(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return jm(e,o=>{let a=o;nm(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&QD(i,s),n}function QD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Hm(i,s=>{e(s,r)})}}function nm(t,e,n,r){if(t=vn(t),!t)return!1;let i=null,s=Wb(t),o=!s&&ns(t);if(!s&&!o){let c=t.ngModule;if(s=Wb(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)nm(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{jm(s.imports,d=>{nm(d,e,n,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&QD(l,e)}if(!a){let l=es(i)||(()=>new i);e({provide:i,useFactory:l,deps:ts},i),e({provide:VD,useValue:i,multi:!0},i),e({provide:wo,useValue:()=>J(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;Hm(c,d=>{e(d,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Hm(t,e){for(let n of t)PD(n)&&(n=n.\u0275providers),Array.isArray(n)?Hm(n,e):e(n)}var CF=Fe({provide:String,useValue:Fe});function YD(t){return t!==null&&typeof t=="object"&&CF in t}function bF(t){return!!(t&&t.useExisting)}function DF(t){return!!(t&&t.useFactory)}function rm(t){return typeof t=="function"}var Yd=new U(""),_d={},SF={},$g;function qm(){return $g===void 0&&($g=new Dd),$g}var wn=class{},Rc=class extends wn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,sm(e,o=>this.processProvider(o)),this.records.set(LD,mo(void 0,this)),i.has("environment")&&this.records.set(wn,mo(void 0,this));let s=this.records.get(Yd);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(VD,ts,fe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ye(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ye(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=pi(this),r=Xt(void 0),i;try{return e()}finally{pi(n),Xt(r)}}get(e,n=Sc,r=fe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Qb))return e[Qb](this);r=Kd(r);let i,s=pi(this),o=Xt(void 0);try{if(!(r&fe.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=MF(e)&&Wd(e);l&&this.injectableDefInScope(l)?c=mo(im(e),_d):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&fe.Self?qm():this.parent;return n=r&fe.Optional&&n===Sc?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Cd]=a[Cd]||[]).unshift(en(e)),s)throw a;return nF(a,e,"R3InjectorError",this.source)}else throw a}finally{Xt(o),pi(s)}}resolveInjectorInitializers(){let e=ye(null),n=pi(this),r=Xt(void 0),i;try{let s=this.get(wo,ts,fe.Self);for(let o of s)o()}finally{pi(n),Xt(r),ye(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(en(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new W(205,!1)}processProvider(e){e=vn(e);let n=rm(e)?e:vn(e&&e.provide),r=RF(e);if(!rm(e)&&e.multi===!0){let i=this.records.get(n);i||(i=mo(void 0,_d,!0),i.factory=()=>em(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=ye(null);try{return n.value===_d&&(n.value=SF,n.value=n.factory()),typeof n.value=="object"&&n.value&&PF(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ye(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=vn(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function im(t){let e=Wd(t),n=e!==null?e.factory:es(t);if(n!==null)return n;if(t instanceof U)throw new W(204,!1);if(t instanceof Function)return AF(t);throw new W(204,!1)}function AF(t){if(t.length>0)throw new W(204,!1);let n=j1(t);return n!==null?()=>n.factory(t):()=>new t}function RF(t){if(YD(t))return mo(void 0,t.useValue);{let e=NF(t);return mo(e,_d)}}function NF(t,e,n){let r;if(rm(t)){let i=vn(t);return es(i)||im(i)}else if(YD(t))r=()=>vn(t.useValue);else if(DF(t))r=()=>t.useFactory(...em(t.deps||[]));else if(bF(t))r=()=>J(vn(t.useExisting));else{let i=vn(t&&(t.useClass||t.provide));if(xF(t))r=()=>new i(...em(t.deps));else return es(i)||im(i)}return r}function mo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function xF(t){return!!t.deps}function PF(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function MF(t){return typeof t=="function"||typeof t=="object"&&t instanceof U}function sm(t,e){for(let n of t)Array.isArray(n)?sm(n,e):n&&PD(n)?sm(n.\u0275providers,e):e(n)}function kr(t,e){t instanceof Rc&&t.assertNotDestroyed();let n,r=pi(t),i=Xt(void 0);try{return e()}finally{pi(r),Xt(i)}}function ZD(){return kD()!==void 0||J1()!=null}function Zd(t){if(!ZD())throw new W(-203,!1)}function kF(t){return typeof t=="function"}var Or=0,pe=1,ee=2,zt=3,Un=4,jn=5,Sd=6,Ad=7,En=8,Eo=9,Pr=10,xt=11,Nc=12,tD=13,Ro=14,cr=15,To=16,_o=17,Co=18,Jd=19,JD=20,gi=21,yd=22,In=23,Tn=25,XD=1;var rs=7,Rd=8,Nd=9,un=10,xd=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(xd||{});function mi(t){return Array.isArray(t)&&typeof t[XD]=="object"}function Fr(t){return Array.isArray(t)&&t[XD]===!0}function eS(t){return(t.flags&4)!==0}function Xd(t){return t.componentOffset>-1}function zm(t){return(t.flags&1)===1}function Lc(t){return!!t.template}function om(t){return(t[ee]&512)!==0}var am=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function tS(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function No(){return nS}function nS(t){return t.type.prototype.ngOnChanges&&(t.setInput=FF),OF}No.ngInherit=!0;function OF(){let t=iS(this),e=t?.current;if(e){let n=t.previous;if(n===Ac)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function FF(t,e,n,r,i){let s=this.declaredInputs[r],o=iS(t)||LF(t,{previous:Ac,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new am(l&&l.currentValue,n,c===Ac),tS(t,e,i,n)}var rS="__ngSimpleChanges__";function iS(t){return t[rS]||null}function LF(t,e){return t[rS]=e}var nD=null;var sr=function(t,e,n){nD?.(t,e,n)},VF="svg",UF="math";function ur(t){for(;Array.isArray(t);)t=t[Or];return t}function sS(t,e){return ur(e[t])}function Bn(t,e){return ur(e[t.index])}function Gm(t,e){return t.data[e]}function jF(t,e){return t[e]}function wi(t,e){let n=e[t];return mi(n)?n:n[Or]}function Wm(t){return(t[ee]&128)===128}function BF(t){return Fr(t[zt])}function Pd(t,e){return e==null?null:t[e]}function oS(t){t[_o]=0}function aS(t){t[ee]&1024||(t[ee]|=1024,Wm(t)&&th(t))}function $F(t,e){for(;t>0;)e=e[Ro],t--;return e}function eh(t){return!!(t[ee]&9216||t[In]?.dirty)}function cm(t){t[Pr].changeDetectionScheduler?.notify(8),t[ee]&64&&(t[ee]|=1024),eh(t)&&th(t)}function th(t){t[Pr].changeDetectionScheduler?.notify(0);let e=is(t);for(;e!==null&&!(e[ee]&8192||(e[ee]|=8192,!Wm(e)));)e=is(e)}function cS(t,e){if((t[ee]&256)===256)throw new W(911,!1);t[gi]===null&&(t[gi]=[]),t[gi].push(e)}function HF(t,e){if(t[gi]===null)return;let n=t[gi].indexOf(e);n!==-1&&t[gi].splice(n,1)}function is(t){let e=t[zt];return Fr(e)?e[zt]:e}var ge={lFrame:IS(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var uS=!1;function qF(){return ge.lFrame.elementDepthCount}function zF(){ge.lFrame.elementDepthCount++}function GF(){ge.lFrame.elementDepthCount--}function lS(){return ge.bindingsEnabled}function WF(){return ge.skipHydrationRootTNode!==null}function KF(t){return ge.skipHydrationRootTNode===t}function QF(){ge.skipHydrationRootTNode=null}function We(){return ge.lFrame.lView}function Lr(){return ge.lFrame.tView}function dS(t){return ge.lFrame.contextLView=t,t[En]}function hS(t){return ge.lFrame.contextLView=null,t}function $n(){let t=fS();for(;t!==null&&t.type===64;)t=t.parent;return t}function fS(){return ge.lFrame.currentTNode}function YF(){let t=ge.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Vc(t,e){let n=ge.lFrame;n.currentTNode=t,n.isParent=e}function pS(){return ge.lFrame.isParent}function ZF(){ge.lFrame.isParent=!1}function gS(){return uS}function rD(t){uS=t}function mS(){let t=ge.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function JF(t){return ge.lFrame.bindingIndex=t}function Km(){return ge.lFrame.bindingIndex++}function XF(t){let e=ge.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function eL(){return ge.lFrame.inI18n}function tL(t,e){let n=ge.lFrame;n.bindingIndex=n.bindingRootIndex=t,um(e)}function nL(){return ge.lFrame.currentDirectiveIndex}function um(t){ge.lFrame.currentDirectiveIndex=t}function rL(t){let e=ge.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function _S(t){ge.lFrame.currentQueryIndex=t}function iL(t){let e=t[pe];return e.type===2?e.declTNode:e.type===1?t[jn]:null}function yS(t,e,n){if(n&fe.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&fe.Host);)if(i=iL(s),i===null||(s=s[Ro],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=ge.lFrame=vS();return r.currentTNode=e,r.lView=t,!0}function Qm(t){let e=vS(),n=t[pe];ge.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function vS(){let t=ge.lFrame,e=t===null?null:t.child;return e===null?IS(t):e}function IS(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function wS(){let t=ge.lFrame;return ge.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ES=wS;function Ym(){let t=wS();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function sL(t){return(ge.lFrame.contextLView=$F(t,ge.lFrame.contextLView))[En]}function xo(){return ge.lFrame.selectedIndex}function ss(t){ge.lFrame.selectedIndex=t}function oL(){let t=ge.lFrame;return Gm(t.tView,t.selectedIndex)}function aL(){return ge.lFrame.currentNamespace}var TS=!0;function Zm(){return TS}function Jm(t){TS=t}function cL(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=nS(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Xm(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function vd(t,e,n){CS(t,e,3,n)}function Id(t,e,n,r){(t[ee]&3)===n&&CS(t,e,n,r)}function Hg(t,e){let n=t[ee];(n&3)===e&&(n&=16383,n+=1,t[ee]=n)}function CS(t,e,n,r){let i=r!==void 0?t[_o]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[_o]+=65536),(a<s||s==-1)&&(uL(t,n,e,c),t[_o]=(t[_o]&4294901760)+c+2),c++}function iD(t,e){sr(4,t,e);let n=ye(null);try{e.call(t)}finally{ye(n),sr(5,t,e)}}function uL(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[ee]>>14<t[_o]>>16&&(t[ee]&3)===e&&(t[ee]+=16384,iD(a,s)):iD(a,s)}var Io=-1,xc=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function lL(t){return t instanceof xc}function dL(t){return(t.flags&8)!==0}function hL(t){return(t.flags&16)!==0}var qg={},lm=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Kd(r);let i=this.injector.get(e,qg,r);return i!==qg||n===qg?i:this.parentInjector.get(e,n,r)}};function bS(t){return t!==Io}function Md(t){return t&32767}function fL(t){return t>>16}function kd(t,e){let n=fL(t),r=e;for(;n>0;)r=r[Ro],n--;return r}var dm=!0;function Od(t){let e=dm;return dm=t,e}var pL=256,DS=pL-1,SS=5,gL=0,or={};function mL(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Dc)&&(r=n[Dc]),r==null&&(r=n[Dc]=gL++);let i=r&DS,s=1<<i;e.data[t+(i>>SS)]|=s}function AS(t,e){let n=RS(t,e);if(n!==-1)return n;let r=e[pe];r.firstCreatePass&&(t.injectorIndex=e.length,zg(r.data,t),zg(e,null),zg(r.blueprint,null));let i=e_(t,e),s=t.injectorIndex;if(bS(i)){let o=Md(i),a=kd(i,e),c=a[pe].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function zg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function RS(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function e_(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=kS(i),r===null)return Io;if(n++,i=i[Ro],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Io}function _L(t,e,n){mL(t,e,n)}function NS(t,e,n){if(n&fe.Optional||t!==void 0)return t;Um(e,"NodeInjector")}function xS(t,e,n,r){if(n&fe.Optional&&r===void 0&&(r=null),!(n&(fe.Self|fe.Host))){let i=t[Eo],s=Xt(void 0);try{return i?i.get(e,r,n&fe.Optional):OD(e,r,n&fe.Optional)}finally{Xt(s)}}return NS(r,e,n)}function PS(t,e,n,r=fe.Default,i){if(t!==null){if(e[ee]&2048&&!(r&fe.Self)){let o=EL(t,e,n,r,or);if(o!==or)return o}let s=MS(t,e,n,r,or);if(s!==or)return s}return xS(e,n,r,i)}function MS(t,e,n,r,i){let s=IL(n);if(typeof s=="function"){if(!yS(e,t,r))return r&fe.Host?NS(i,n,r):xS(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&fe.Optional))Um(n);else return o}finally{ES()}}else if(typeof s=="number"){let o=null,a=RS(t,e),c=Io,l=r&fe.Host?e[cr][jn]:null;for((a===-1||r&fe.SkipSelf)&&(c=a===-1?e_(t,e):e[a+8],c===Io||!oD(r,!1)?a=-1:(o=e[pe],a=Md(c),e=kd(c,e)));a!==-1;){let d=e[pe];if(sD(s,a,d.data)){let f=yL(a,e,n,o,r,l);if(f!==or)return f}c=e[a+8],c!==Io&&oD(r,e[pe].data[a+8]===l)&&sD(s,a,e)?(o=d,a=Md(c),e=kd(c,e)):a=-1}}return i}function yL(t,e,n,r,i,s){let o=e[pe],a=o.data[t+8],c=r==null?Xd(a)&&dm:r!=o&&(a.type&3)!==0,l=i&fe.Host&&s===a,d=vL(a,o,n,c,l);return d!==null?Pc(e,o,d,a):or}function vL(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,d=s>>20,f=r?a:a+d,g=i?a+d:l;for(let _=f;_<g;_++){let E=o[_];if(_<c&&n===E||_>=c&&E.type===n)return _}if(i){let _=o[c];if(_&&Lc(_)&&_.type===n)return c}return null}function Pc(t,e,n,r){let i=t[n],s=e.data;if(lL(i)){let o=i;o.resolving&&W1(G1(s[n]));let a=Od(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?Xt(o.injectImpl):null,d=yS(t,r,fe.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&cL(n,s[n],e)}finally{l!==null&&Xt(l),Od(a),o.resolving=!1,ES()}}return i}function IL(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Dc)?t[Dc]:void 0;return typeof e=="number"?e>=0?e&DS:wL:e}function sD(t,e,n){let r=1<<t;return!!(n[e+(t>>SS)]&r)}function oD(t,e){return!(t&fe.Self)&&!(t&fe.Host&&e)}var Xi=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return PS(this._tNode,this._lView,e,Kd(r),n)}};function wL(){return new Xi($n(),We())}function t_(t){return Gd(()=>{let e=t.prototype.constructor,n=e[Td]||hm(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Td]||hm(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function hm(t){return AD(t)?()=>{let e=hm(vn(t));return e&&e()}:es(t)}function EL(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[ee]&2048&&!(o[ee]&512);){let a=MS(s,o,n,r|fe.Self,or);if(a!==or)return a;let c=s.parent;if(!c){let l=o[JD];if(l){let d=l.get(n,or,r);if(d!==or)return d}c=kS(o),o=o[Ro]}s=c}return i}function kS(t){let e=t[pe],n=e.type;return n===2?e.declTNode:n===1?t[jn]:null}function aD(t,e=null,n=null,r){let i=OS(t,e,n,r);return i.resolveInjectorInitializers(),i}function OS(t,e=null,n=null,r,i=new Set){let s=[n||ts,TF(t)];return r=r||(typeof t=="object"?void 0:en(t)),new Rc(s,e||qm(),r||null,i)}var ve=class t{static{this.THROW_IF_NOT_FOUND=Sc}static{this.NULL=new Dd}static create(e,n){if(Array.isArray(e))return aD({name:""},n,e,"");{let r=e.name??"";return aD({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=H({token:t,providedIn:"any",factory:()=>J(LD)})}static{this.__NG_ELEMENT_ID__=-1}};var TL=new U("");TL.__NG_ELEMENT_ID__=t=>{let e=$n();if(e===null)throw new W(204,!1);if(e.type&2)return e.value;if(t&fe.Optional)return null;throw new W(204,!1)};var CL="ngOriginalError";function Gg(t){return t[CL]}var FS=!0,Po=(()=>{class t{static{this.__NG_ELEMENT_ID__=bL}static{this.__NG_ENV_ID__=n=>n}}return t})(),fm=class extends Po{constructor(e){super(),this._lView=e}onDestroy(e){return cS(this._lView,e),()=>HF(this._lView,e)}};function bL(){return new fm(We())}var us=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Tt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}}return t})();var pm=class extends it{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,ZD()&&(this.destroyRef=P(Po,{optional:!0})??void 0,this.pendingTasks=P(us,{optional:!0})??void 0)}emit(e){let n=ye(null);try{super.next(e)}finally{ye(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Je&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},qt=pm;function Fd(...t){}function LS(t){let e,n;function r(){t=Fd;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function cD(t){return queueMicrotask(()=>t()),()=>{t=Fd}}var n_="isAngularZone",Ld=n_+"_ID",DL=0,Z=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new qt(!1),this.onMicrotaskEmpty=new qt(!1),this.onStable=new qt(!1),this.onError=new qt(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=FS}=e;if(typeof Zone>"u")throw new W(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,RL(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(n_)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new W(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new W(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,SL,Fd,Fd);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},SL={};function r_(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function AL(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){LS(()=>{t.callbackScheduled=!1,gm(t),t.isCheckStableRunning=!0,r_(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),gm(t)}function RL(t){let e=()=>{AL(t)},n=DL++;t._inner=t._inner.fork({name:"angular",properties:{[n_]:!0,[Ld]:n,[Ld+n]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(NL(c))return r.invokeTask(s,o,a,c);try{return uD(t),r.invokeTask(s,o,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),lD(t)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return uD(t),r.invoke(s,o,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!xL(c)&&e(),lD(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,gm(t),r_(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function gm(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function uD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function lD(t){t._nesting--,r_(t)}var mm=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new qt,this.onMicrotaskEmpty=new qt,this.onStable=new qt,this.onError=new qt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function NL(t){return VS(t,"__ignore_ng_zone__")}function xL(t){return VS(t,"__scheduler_tick__")}function VS(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var lr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Gg(e);for(;n&&Gg(n);)n=Gg(n);return n||null}},PL=new U("",{providedIn:"root",factory:()=>{let t=P(Z),e=P(lr);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function ML(){return i_($n(),We())}function i_(t,e){return new Uc(Bn(t,e))}var Uc=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=ML}}return t})();function US(t){return(t.flags&128)===128}var jS=new Map,kL=0;function OL(){return kL++}function FL(t){jS.set(t[Jd],t)}function _m(t){jS.delete(t[Jd])}var dD="__ngContext__";function os(t,e){mi(e)?(t[dD]=e[Jd],FL(e)):t[dD]=e}function BS(t){return HS(t[Nc])}function $S(t){return HS(t[Un])}function HS(t){for(;t!==null&&!Fr(t);)t=t[Un];return t}var ym;function qS(t){ym=t}function LL(){if(ym!==void 0)return ym;if(typeof document<"u")return document;throw new W(210,!1)}var s_=new U("",{providedIn:"root",factory:()=>VL}),VL="ng",o_=new U(""),Hn=new U("",{providedIn:"platform",factory:()=>"unknown"});var a_=new U("",{providedIn:"root",factory:()=>LL().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var UL="h",jL="b";var BL=()=>null;function c_(t,e,n=!1){return BL(t,e,n)}var zS=!1,$L=new U("",{providedIn:"root",factory:()=>zS});var vm=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${F1})`}};function u_(t){return t instanceof vm?t.changingThisBreaksApplicationSecurity:t}function GS(t){return t instanceof Function?t():t}var Mr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Mr||{}),HL;function l_(t,e){return HL(t,e)}function yo(t,e,n,r,i){if(r!=null){let s,o=!1;Fr(r)?s=r:mi(r)&&(o=!0,r=r[Or]);let a=ur(r);t===0&&n!==null?i==null?YS(e,n,a):Ud(e,n,a,i||null,!0):t===1&&n!==null?Ud(e,n,a,i||null,!0):t===2?iV(e,a,o):t===3&&e.destroyNode(a),s!=null&&oV(e,t,s,n,i)}}function qL(t,e){return t.createText(e)}function zL(t,e,n){t.setValue(e,n)}function WS(t,e,n){return t.createElement(e,n)}function GL(t,e){KS(t,e),e[Or]=null,e[jn]=null}function WL(t,e,n,r,i,s){r[Or]=i,r[jn]=e,nh(t,r,n,1,i,s)}function KS(t,e){e[Pr].changeDetectionScheduler?.notify(9),nh(t,e,e[xt],2,null,null)}function KL(t){let e=t[Nc];if(!e)return Wg(t[pe],t);for(;e;){let n=null;if(mi(e))n=e[Nc];else{let r=e[un];r&&(n=r)}if(!n){for(;e&&!e[Un]&&e!==t;)mi(e)&&Wg(e[pe],e),e=e[zt];e===null&&(e=t),mi(e)&&Wg(e[pe],e),n=e&&e[Un]}e=n}}function QL(t,e,n,r){let i=un+r,s=n.length;r>0&&(n[i-1][Un]=e),r<s-un?(e[Un]=n[i],FD(n,un+r,e)):(n.push(e),e[Un]=null),e[zt]=n;let o=e[To];o!==null&&n!==o&&QS(o,e);let a=e[Co];a!==null&&a.insertView(t),cm(e),e[ee]|=128}function QS(t,e){let n=t[Nd],r=e[zt];if(mi(r))t[ee]|=xd.HasTransplantedViews;else{let i=r[zt][cr];e[cr]!==i&&(t[ee]|=xd.HasTransplantedViews)}n===null?t[Nd]=[e]:n.push(e)}function d_(t,e){let n=t[Nd],r=n.indexOf(e);n.splice(r,1)}function Vd(t,e){if(t.length<=un)return;let n=un+e,r=t[n];if(r){let i=r[To];i!==null&&i!==t&&d_(i,r),e>0&&(t[n-1][Un]=r[Un]);let s=bd(t,un+e);GL(r[pe],r);let o=s[Co];o!==null&&o.detachView(s[pe]),r[zt]=null,r[Un]=null,r[ee]&=-129}return r}function h_(t,e){if(!(e[ee]&256)){let n=e[xt];n.destroyNode&&nh(t,e,n,3,null,null),KL(e)}}function Wg(t,e){if(e[ee]&256)return;let n=ye(null);try{e[ee]&=-129,e[ee]|=256,e[In]&&jl(e[In]),ZL(t,e),YL(t,e),e[pe].type===1&&e[xt].destroy();let r=e[To];if(r!==null&&Fr(e[zt])){r!==e[zt]&&d_(r,e);let i=e[Co];i!==null&&i.detachView(t)}_m(e)}finally{ye(n)}}function YL(t,e){let n=t.cleanup,r=e[Ad];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Ad]=null);let i=e[gi];if(i!==null){e[gi]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function ZL(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof xc)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];sr(4,a,c);try{c.call(a)}finally{sr(5,a,c)}}else{sr(4,i,s);try{s.call(i)}finally{sr(5,i,s)}}}}}function JL(t,e,n){return XL(t,e.parent,n)}function XL(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Or];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===ar.None||s===ar.Emulated)return null}return Bn(r,n)}}function Ud(t,e,n,r,i){t.insertBefore(e,n,r,i)}function YS(t,e,n){t.appendChild(e,n)}function hD(t,e,n,r,i){r!==null?Ud(t,e,n,r,i):YS(t,e,n)}function ZS(t,e){return t.parentNode(e)}function eV(t,e){return t.nextSibling(e)}function tV(t,e,n){return rV(t,e,n)}function nV(t,e,n){return t.type&40?Bn(t,n):null}var rV=nV,fD;function f_(t,e,n,r){let i=JL(t,r,e),s=e[xt],o=r.parent||e[jn],a=tV(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)hD(s,i,n[c],a,!1);else hD(s,i,n,a,!1);fD!==void 0&&fD(s,r,e,n,i)}function Cc(t,e){if(e!==null){let n=e.type;if(n&3)return Bn(e,t);if(n&4)return Im(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Cc(t,r);{let i=t[e.index];return Fr(i)?Im(-1,i):ur(i)}}else{if(n&128)return Cc(t,e.next);if(n&32)return l_(e,t)()||ur(t[e.index]);{let r=JS(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=is(t[cr]);return Cc(i,r)}else return Cc(t,e.next)}}}return null}function JS(t,e){if(e!==null){let r=t[cr][jn],i=e.projection;return r.projection[i]}return null}function Im(t,e){let n=un+t+1;if(n<e.length){let r=e[n],i=r[pe].firstChild;if(i!==null)return Cc(r,i)}return e[rs]}function iV(t,e,n){t.removeChild(null,e,n)}function p_(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(o&&e===0&&(a&&os(ur(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)p_(t,e,n.child,r,i,s,!1),yo(e,t,i,a,s);else if(c&32){let l=l_(n,r),d;for(;d=l();)yo(e,t,i,d,s);yo(e,t,i,a,s)}else c&16?sV(t,e,r,n,i,s):yo(e,t,i,a,s);n=o?n.projectionNext:n.next}}function nh(t,e,n,r,i,s){p_(n,r,t.firstChild,e,i,s,!1)}function sV(t,e,n,r,i,s){let o=n[cr],c=o[jn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];yo(e,t,i,d,s)}else{let l=c,d=o[zt];US(r)&&(l.flags|=128),p_(t,e,l,d,i,s,!0)}}function oV(t,e,n,r,i){let s=n[rs],o=ur(n);s!==o&&yo(e,t,r,s,i);for(let a=un;a<n.length;a++){let c=n[a];nh(c[pe],c,t,e,r,s)}}function aV(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Mr.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Mr.Important),t.setStyle(n,r,i,s))}}function cV(t,e,n){t.setAttribute(e,"style",n)}function XS(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function e0(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&tm(t,e,r),i!==null&&XS(t,e,i),s!==null&&cV(t,e,s)}var Ei={};function Pe(t=1){t0(Lr(),We(),xo()+t,!1)}function t0(t,e,n,r){if(!r)if((e[ee]&3)===3){let s=t.preOrderCheckHooks;s!==null&&vd(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Id(e,s,0,n)}ss(n)}function Vr(t,e=fe.Default){let n=We();if(n===null)return J(t,e);let r=$n();return PS(r,n,vn(t),e)}function n0(t,e,n,r,i,s){let o=ye(null);try{let a=null;i&_i.SignalBased&&(a=e[r][Rr]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&_i.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):tS(e,a,r,s)}finally{ye(o)}}function uV(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ss(~i);else{let s=i,o=n[++r],a=n[++r];tL(o,s);let c=e[s];a(2,c)}}}finally{ss(-1)}}function rh(t,e,n,r,i,s,o,a,c,l,d){let f=e.blueprint.slice();return f[Or]=i,f[ee]=r|4|128|8|64,(l!==null||t&&t[ee]&2048)&&(f[ee]|=2048),oS(f),f[zt]=f[Ro]=t,f[En]=n,f[Pr]=o||t&&t[Pr],f[xt]=a||t&&t[xt],f[Eo]=c||t&&t[Eo]||null,f[jn]=s,f[Jd]=OL(),f[Sd]=d,f[JD]=l,f[cr]=e.type==2?t[cr]:f,f}function ih(t,e,n,r,i){let s=t.data[e];if(s===null)s=lV(t,e,n,r,i),eL()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=YF();s.injectorIndex=o===null?-1:o.injectorIndex}return Vc(s,!0),s}function lV(t,e,n,r,i){let s=fS(),o=pS(),a=o?s:s&&s.parent,c=t.data[e]=gV(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function r0(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function i0(t,e,n,r,i){let s=xo(),o=r&2;try{ss(-1),o&&e.length>Tn&&t0(t,e,Tn,!1),sr(o?2:0,i),n(r,i)}finally{ss(s),sr(o?3:1,i)}}function s0(t,e,n){if(eS(e)){let r=ye(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{ye(r)}}}function o0(t,e,n){lS()&&(EV(t,e,n,Bn(n,e)),(n.flags&64)===64&&d0(t,e,n))}function a0(t,e,n=Bn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function c0(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=g_(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function g_(t,e,n,r,i,s,o,a,c,l,d){let f=Tn+r,g=f+i,_=dV(f,g),E=typeof l=="function"?l():l;return _[pe]={type:t,blueprint:_,template:n,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:E,incompleteFirstPass:!1,ssrId:d}}function dV(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ei);return n}function hV(t,e,n,r){let s=r.get($L,zS)||n===ar.ShadowDom,o=t.selectRootElement(e,s);return fV(o),o}function fV(t){pV(t)}var pV=()=>null;function gV(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return WF()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function pD(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=_i.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?gD(r,n,l,a,c):gD(r,n,l,a)}return r}function gD(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function mV(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let f=s[d],g=n?n.get(f):null,_=g?g.inputs:null,E=g?g.outputs:null;c=pD(0,f.inputs,d,c,_),l=pD(1,f.outputs,d,l,E);let R=c!==null&&o!==null&&!$m(e)?xV(c,d,o):null;a.push(R)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function _V(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function yV(t,e,n,r,i,s,o,a){let c=Bn(e,n),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(m_(t,n,d,r,i),Xd(e)&&vV(n,e.index)):e.type&3?(r=_V(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function vV(t,e){let n=wi(e,t);n[ee]&16||(n[ee]|=64)}function u0(t,e,n,r){if(lS()){let i=r===null?null:{"":-1},s=CV(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&l0(t,e,n,o,i,a),i&&bV(n,r,i)}n.mergedAttrs=Bm(n.mergedAttrs,n.attrs)}function l0(t,e,n,r,i,s){for(let l=0;l<r.length;l++)_L(AS(n,e),t,r[l].type);SV(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=r0(t,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];n.mergedAttrs=Bm(n.mergedAttrs,d.hostAttrs),AV(t,n,e,c,d),DV(c,d,i),d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let f=d.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}mV(t,n,s)}function IV(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;wV(o)!=a&&o.push(a),o.push(n,r,s)}}function wV(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function EV(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Xd(n)&&RV(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||AS(n,e),os(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=Pc(e,t,a,n);if(os(l,e),o!==null&&NV(e,a-i,l,c,n,o),Lc(c)){let d=wi(n.index,e);d[En]=Pc(e,t,a,n)}}}function d0(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=nL();try{ss(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];um(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&TV(c,l)}}finally{ss(-1),um(o)}}function TV(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function CV(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(pF(e,o.selectors,!1))if(r||(r=[]),Lc(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;wm(t,e,c)}else r.unshift(o),wm(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function wm(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function bV(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new W(-301,!1);r.push(e[i],s)}}}function DV(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Lc(e)&&(n[""]=t)}}function SV(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function AV(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=es(i.type,!0)),o=new xc(s,Lc(i),Vr);t.blueprint[r]=o,n[r]=o,IV(t,e,r,r0(t,n,i.hostVars,Ei),i)}function RV(t,e,n){let r=Bn(e,t),i=c0(n),s=t[Pr].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=sh(t,rh(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function NV(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],d=o[a++],f=o[a++];n0(r,n,c,l,d,f)}}function xV(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function h0(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function f0(t,e){let n=t.contentQueries;if(n!==null){let r=ye(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];_S(s),a.contentQueries(2,e[o],o)}}}finally{ye(r)}}}function sh(t,e){return t[Nc]?t[tD][Un]=e:t[Nc]=e,t[tD]=e,e}function Em(t,e,n){_S(0);let r=ye(null);try{e(t,n)}finally{ye(r)}}function PV(t){return t[Ad]??=[]}function MV(t){return t.cleanup??=[]}function p0(t,e){let n=t[Eo],r=n?n.get(lr,null):null;r&&r.handleError(e)}function m_(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],d=t.data[o];n0(d,l,r,a,c,i)}}function kV(t,e,n){let r=sS(e,t);zL(t[xt],r,n)}function OV(t,e){let n=wi(e,t),r=n[pe];FV(r,n);let i=n[Or];i!==null&&n[Sd]===null&&(n[Sd]=c_(i,n[Eo])),__(r,n,n[En])}function FV(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function __(t,e,n){Qm(e);try{let r=t.viewQuery;r!==null&&Em(1,r,n);let i=t.template;i!==null&&i0(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Co]?.finishViewCreation(t),t.staticContentQueries&&f0(t,e),t.staticViewQueries&&Em(2,t.viewQuery,n);let s=t.components;s!==null&&LV(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ee]&=-5,Ym()}}function LV(t,e){for(let n=0;n<e.length;n++)OV(t,e[n])}function VV(t,e,n,r){let i=ye(null);try{let s=e.tView,a=t[ee]&4096?4096:16,c=rh(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[To]=l;let d=t[Co];return d!==null&&(c[Co]=d.createEmbeddedView(s)),__(s,c,n),c}finally{ye(i)}}function UV(t,e){let n=un+e;if(n<t.length)return t[n]}function Tm(t,e){return!e||e.firstChild===null||US(t)}function g0(t,e,n,r=!0){let i=e[pe];if(QL(i,e,t,n),r){let o=Im(n,t),a=e[xt],c=ZS(a,t[rs]);c!==null&&WL(i,t[jn],a,e,c,o)}let s=e[Sd];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function jV(t,e){let n=Vd(t,e);return n!==void 0&&h_(n[pe],n),n}function jd(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(ur(s)),Fr(s)&&BV(s,r);let o=n.type;if(o&8)jd(t,e,n.child,r);else if(o&32){let a=l_(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=JS(e,n);if(Array.isArray(a))r.push(...a);else{let c=is(e[cr]);jd(c[pe],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function BV(t,e){for(let n=un;n<t.length;n++){let r=t[n],i=r[pe].firstChild;i!==null&&jd(r[pe],r,i,e)}t[rs]!==t[Or]&&e.push(t[rs])}var m0=[];function $V(t){return t[In]??HV(t)}function HV(t){let e=m0.pop()??Object.create(zV);return e.lView=t,e}function qV(t){t.lView[In]!==t&&(t.lView=null,m0.push(t))}var zV=xe(V({},Xs),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{th(t.lView)},consumerOnSignalRead(){this.lView[In]=this}});function GV(t){let e=t[In]??Object.create(WV);return e.lView=t,e}var WV=xe(V({},Xs),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=is(t.lView);for(;e&&!_0(e[pe]);)e=is(e);e&&aS(e)},consumerOnSignalRead(){this.lView[In]=this}});function _0(t){return t.type!==2}var KV=100;function y0(t,e=!0,n=0){let r=t[Pr],i=r.rendererFactory,s=!1;s||i.begin?.();try{QV(t,n)}catch(o){throw e&&p0(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function QV(t,e){let n=gS();try{rD(!0),Cm(t,e);let r=0;for(;eh(t);){if(r===KV)throw new W(103,!1);r++,Cm(t,1)}}finally{rD(n)}}function YV(t,e,n,r){let i=e[ee];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Pr].inlineEffectRunner?.flush(),Qm(e);let a=!0,c=null,l=null;s||(_0(t)?(l=$V(e),c=mc(l)):tb()===null?(a=!1,l=GV(e),c=mc(l)):e[In]&&(jl(e[In]),e[In]=null));try{oS(e),JF(t.bindingStartIndex),n!==null&&i0(t,e,n,2,r);let d=(i&3)===3;if(!s)if(d){let _=t.preOrderCheckHooks;_!==null&&vd(e,_,null)}else{let _=t.preOrderHooks;_!==null&&Id(e,_,0,null),Hg(e,0)}if(o||ZV(e),v0(e,0),t.contentQueries!==null&&f0(t,e),!s)if(d){let _=t.contentCheckHooks;_!==null&&vd(e,_)}else{let _=t.contentHooks;_!==null&&Id(e,_,1),Hg(e,1)}uV(t,e);let f=t.components;f!==null&&w0(e,f,0);let g=t.viewQuery;if(g!==null&&Em(2,g,r),!s)if(d){let _=t.viewCheckHooks;_!==null&&vd(e,_)}else{let _=t.viewHooks;_!==null&&Id(e,_,2),Hg(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[yd]){for(let _ of e[yd])_();e[yd]=null}s||(e[ee]&=-73)}catch(d){throw s||th(e),d}finally{l!==null&&(Vl(l,c),a&&qV(l)),Ym()}}function v0(t,e){for(let n=BS(t);n!==null;n=$S(n))for(let r=un;r<n.length;r++){let i=n[r];I0(i,e)}}function ZV(t){for(let e=BS(t);e!==null;e=$S(e)){if(!(e[ee]&xd.HasTransplantedViews))continue;let n=e[Nd];for(let r=0;r<n.length;r++){let i=n[r];aS(i)}}}function JV(t,e,n){let r=wi(e,t);I0(r,n)}function I0(t,e){Wm(t)&&Cm(t,e)}function Cm(t,e){let r=t[pe],i=t[ee],s=t[In],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Ul(s)),o||=!1,s&&(s.dirty=!1),t[ee]&=-9217,o)YV(r,t,r.template,t[En]);else if(i&8192){v0(t,1);let a=r.components;a!==null&&w0(t,a,1)}}function w0(t,e,n){for(let r=0;r<e.length;r++)JV(t,e[r],n)}function y_(t,e){let n=gS()?64:1088;for(t[Pr].changeDetectionScheduler?.notify(e);t;){t[ee]|=n;let r=is(t);if(om(t)&&!r)return t;t=r}return null}var bo=class{get rootNodes(){let e=this._lView,n=e[pe];return jd(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[En]}set context(e){this._lView[En]=e}get destroyed(){return(this._lView[ee]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[zt];if(Fr(e)){let n=e[Rd],r=n?n.indexOf(this):-1;r>-1&&(Vd(e,r),bd(n,r))}this._attachedToViewContainer=!1}h_(this._lView[pe],this._lView)}onDestroy(e){cS(this._lView,e)}markForCheck(){y_(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ee]&=-129}reattach(){cm(this._lView),this._lView[ee]|=128}detectChanges(){this._lView[ee]|=1024,y0(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new W(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=om(this._lView),n=this._lView[To];n!==null&&!e&&d_(n,this._lView),KS(this._lView[pe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new W(902,!1);this._appRef=e;let n=om(this._lView),r=this._lView[To];r!==null&&!n&&QS(r,this._lView),cm(this._lView)}};var yJ=new RegExp(`^(\\d+)*(${jL}|${UL})*(.*)`);var XV=()=>null;function bm(t,e){return XV(t,e)}var Do=class{},oh=new U("",{providedIn:"root",factory:()=>!1});var E0=new U(""),T0=new U(""),Dm=class{},Bd=class{};function eU(t){let e=Error(`No component factory found for ${en(t)}.`);return e[tU]=t,e}var tU="ngComponent";var Sm=class{resolveComponentFactory(e){throw eU(e)}},yi=class{static{this.NULL=new Sm}},So=class{},ah=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>nU()}}return t})();function nU(){let t=We(),e=$n(),n=wi(e.index,t);return(mi(n)?n:t)[xt]}var rU=(()=>{class t{static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>null})}}return t})();function Am(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=zb(i,a);else if(s==2){let c=a,l=e[++o];r=zb(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var $d=class extends yi{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ns(e);return new Mc(n,this.ngModule)}};function mD(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:_i.None;e?n.push({propName:o,templateName:r,isSignal:(a&_i.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function iU(t){let e=t.toLowerCase();return e==="svg"?VF:e==="math"?UF:null}var Mc=class extends Bd{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=mD(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return mD(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=yF(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=ye(null);try{i=i||this.ngModule;let o=i instanceof wn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new lm(e,o):e,c=a.get(So,null);if(c===null)throw new W(407,!1);let l=a.get(rU,null),d=a.get(Do,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},g=c.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",E=r?hV(g,r,this.componentDef.encapsulation,a):WS(g,_,iU(_)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let A=null;E!==null&&(A=c_(E,a,!0));let M=g_(0,null,null,1,0,null,null,null,null,null,null),L=rh(null,M,null,R,null,null,f,g,a,null,A);Qm(L);let $,G,ke=null;try{let Y=this.componentDef,T,v=null;Y.findHostDirectiveDefs?(T=[],v=new Map,Y.findHostDirectiveDefs(Y,T,v),T.push(Y)):T=[Y];let I=sU(L,E);ke=oU(I,E,Y,T,L,f,g),G=Gm(M,Tn),E&&uU(g,Y,E,r),n!==void 0&&lU(G,this.ngContentSelectors,n),$=cU(ke,Y,T,v,L,[dU]),__(M,L,null)}catch(Y){throw ke!==null&&_m(ke),_m(L),Y}finally{Ym()}return new Rm(this.componentType,$,i_(G,L),L,G)}finally{ye(s)}}},Rm=class extends Dm{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new bo(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;m_(s[pe],s,i,e,n),this.previousInputValues.set(e,n);let o=wi(this._tNode.index,s);y_(o,1)}}get injector(){return new Xi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function sU(t,e){let n=t[pe],r=Tn;return t[r]=e,ih(n,r,2,"#host",null)}function oU(t,e,n,r,i,s,o){let a=i[pe];aU(r,t,e,o);let c=null;e!==null&&(c=c_(e,i[Eo]));let l=s.rendererFactory.createRenderer(e,n),d=16;n.signals?d=4096:n.onPush&&(d=64);let f=rh(i,c0(n),null,d,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&wm(a,t,r.length-1),sh(i,f),i[t.index]=f}function aU(t,e,n,r){for(let i of t)e.mergedAttrs=Bm(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Am(e,e.mergedAttrs,!0),n!==null&&e0(r,n,e))}function cU(t,e,n,r,i,s){let o=$n(),a=i[pe],c=Bn(o,i);l0(a,i,o,n,null,r);for(let d=0;d<n.length;d++){let f=o.directiveStart+d,g=Pc(i,a,f,o);os(g,i)}d0(a,i,o),c&&os(c,i);let l=Pc(i,a,o.directiveStart+o.componentOffset,o);if(t[En]=i[En]=l,s!==null)for(let d of s)d(l,e);return s0(a,o,i),l}function uU(t,e,n,r){if(r)tm(t,n,["ng-version","18.2.13"]);else{let{attrs:i,classes:s}=vF(e.selectors[0]);i&&tm(t,n,i),s&&s.length>0&&XS(t,n,s.join(" "))}}function lU(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function dU(){let t=$n();Xm(We()[pe],t)}var ch=(()=>{class t{static{this.__NG_ELEMENT_ID__=hU}}return t})();function hU(){let t=$n();return pU(t,We())}var fU=ch,C0=class extends fU{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return i_(this._hostTNode,this._hostLView)}get injector(){return new Xi(this._hostTNode,this._hostLView)}get parentInjector(){let e=e_(this._hostTNode,this._hostLView);if(bS(e)){let n=kd(e,this._hostLView),r=Md(e),i=n[pe].data[r+8];return new Xi(i,n)}else return new Xi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=_D(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-un}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=bm(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,Tm(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!kF(e),a;if(o)a=n;else{let E=n||{};a=E.index,r=E.injector,i=E.projectableNodes,s=E.environmentInjector||E.ngModuleRef}let c=o?e:new Mc(ns(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let R=(o?l:this.parentInjector).get(wn,null);R&&(s=R)}let d=ns(c.componentType??{}),f=bm(this._lContainer,d?.id??null),g=f?.firstChild??null,_=c.create(l,i,g,s);return this.insertImpl(_.hostView,a,Tm(this._hostTNode,f)),_}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(BF(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[zt],l=new C0(c,c[jn],c[zt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return g0(o,i,s,r),e.attachToViewContainerRef(),FD(Kg(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=_D(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Vd(this._lContainer,n);r&&(bd(Kg(this._lContainer),n),h_(r[pe],r))}detach(e){let n=this._adjustIndex(e,-1),r=Vd(this._lContainer,n);return r&&bd(Kg(this._lContainer),n)!=null?new bo(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function _D(t){return t[Rd]}function Kg(t){return t[Rd]||(t[Rd]=[])}function pU(t,e){let n,r=e[t.index];return Fr(r)?n=r:(n=h0(r,e,null,t),e[t.index]=n,sh(e,n)),mU(n,e,t,r),new C0(n,t,e)}function gU(t,e){let n=t[xt],r=n.createComment(""),i=Bn(e,t),s=ZS(n,i);return Ud(n,s,r,eV(n,i),!1),r}var mU=vU,_U=()=>!1;function yU(t,e,n){return _U(t,e,n)}function vU(t,e,n,r){if(t[rs])return;let i;n.type&8?i=ur(r):i=gU(e,n),t[rs]=i}var yD=new Set;function ls(t){yD.has(t)||(yD.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function v_(t,e){ls("NgSignals");let n=fb(t),r=n[Rr];return e?.equal&&(r.equal=e.equal),n.set=i=>Cg(r,i),n.update=i=>pb(r,i),n.asReadonly=IU.bind(n),n}function IU(){let t=this[Rr];if(t.readonlyFn===void 0){let e=()=>this();e[Rr]=t,t.readonlyFn=e}return t.readonlyFn}var vi=class{},kc=class{};var Nm=class extends vi{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new $d(this);let s=zD(e);this._bootstrapComponents=GS(s.bootstrap),this._r3Injector=OS(e,n,[{provide:vi,useValue:this},{provide:yi,useValue:this.componentFactoryResolver},...r],en(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},xm=class extends kc{constructor(e){super(),this.moduleType=e}create(e){return new Nm(this.moduleType,e,[])}};var Hd=class extends vi{constructor(e){super(),this.componentFactoryResolver=new $d(this),this.instance=null;let n=new Rc([...e.providers,{provide:vi,useValue:this},{provide:yi,useValue:this.componentFactoryResolver}],e.parent||qm(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function I_(t,e,n=null){return new Hd({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function b0(t,e,n){return t[e]=n}function as(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function wU(t,e,n,r){let i=as(t,e,n);return as(t,e+1,r)||i}function EU(t){return(t.flags&32)===32}function TU(t,e,n,r,i,s,o,a,c){let l=e.consts,d=ih(e,t,4,o||null,a||null);u0(e,n,d,Pd(l,c)),Xm(e,d);let f=d.tView=g_(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function CU(t,e,n,r,i,s,o,a,c,l){let d=n+Tn,f=e.firstCreatePass?TU(d,e,t,r,i,s,o,a,c):e.data[d];Vc(f,!1);let g=bU(e,t,f,n);Zm()&&f_(e,t,g,f),os(g,t);let _=h0(g,t,g,f);return t[d]=_,sh(t,_),yU(_,f,t),zm(f)&&o0(e,t,f),c!=null&&a0(t,f,l),f}function bn(t,e,n,r,i,s,o,a){let c=We(),l=Lr(),d=Pd(l.consts,s);return CU(c,l,t,e,n,r,i,d,o,a),bn}var bU=DU;function DU(t,e,n,r){return Jm(!0),e[xt].createComment("")}var bc=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(bc||{}),SU=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}}return t})(),vD=class t{constructor(){this.ngZone=P(Z),this.scheduler=P(Do),this.errorHandler=P(lr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[bc.EarlyRead,bc.Write,bc.MixedReadWrite,bc.Read]}execute(){this.executing=!0;for(let e of t.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}};function AU(t,e,n,r){return as(t,Km(),n)?e+MD(n)+r:Ei}function gd(t,e){return t<<17|e<<2}function cs(t){return t>>17&32767}function RU(t){return(t&2)==2}function NU(t,e){return t&131071|e<<17}function Pm(t){return t|2}function Ao(t){return(t&131068)>>2}function Qg(t,e){return t&-131069|e<<2}function xU(t){return(t&1)===1}function Mm(t){return t|1}function PU(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=cs(o),c=Ao(o);t[r]=n;let l=!1,d;if(Array.isArray(n)){let f=n;d=f[1],(d===null||Fc(f,d)>0)&&(l=!0)}else d=n;if(i)if(c!==0){let g=cs(t[a+1]);t[r+1]=gd(g,a),g!==0&&(t[g+1]=Qg(t[g+1],r)),t[a+1]=NU(t[a+1],r)}else t[r+1]=gd(a,0),a!==0&&(t[a+1]=Qg(t[a+1],r)),a=r;else t[r+1]=gd(c,0),a===0?a=r:t[c+1]=Qg(t[c+1],r),c=r;l&&(t[r+1]=Pm(t[r+1])),ID(t,d,r,!0),ID(t,d,r,!1),MU(e,d,t,r,s),o=gd(a,c),s?e.classBindings=o:e.styleBindings=o}function MU(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Fc(s,e)>=0&&(n[r+1]=Mm(n[r+1]))}function ID(t,e,n,r){let i=t[n+1],s=e===null,o=r?cs(i):Ao(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];kU(c,e)&&(a=!0,t[o+1]=r?Mm(l):Pm(l)),o=r?cs(l):Ao(l)}a&&(t[n+1]=r?Pm(i):Mm(i))}function kU(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Fc(t,e)>=0:!1}function ln(t,e,n){let r=We(),i=Km();if(as(r,i,e)){let s=Lr(),o=oL();yV(s,o,r,t,e,r[xt],n,!1)}return ln}function wD(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";m_(t,n,s[o],o,r)}function uh(t,e,n){return OU(t,e,n,!1),uh}function OU(t,e,n,r){let i=We(),s=Lr(),o=XF(2);if(s.firstUpdatePass&&LU(s,t,o,r),e!==Ei&&as(i,o,e)){let a=s.data[xo()];$U(s,a,i,i[xt],t,i[o+1]=HU(e,n),r,o)}}function FU(t,e){return e>=t.expandoStartIndex}function LU(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[xo()],o=FU(t,n);qU(s,r)&&e===null&&!o&&(e=!1),e=VU(i,s,e,r),PU(i,s,e,n,o,r)}}function VU(t,e,n,r){let i=rL(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Yg(null,t,e,n,r),n=Oc(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Yg(i,t,e,n,r),s===null){let c=UU(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Yg(null,t,e,c[1],r),c=Oc(c,e.attrs,r),jU(t,e,r,c))}else s=BU(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function UU(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Ao(r)!==0)return t[cs(r)]}function jU(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[cs(i)]=r}function BU(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Oc(r,o,n)}return Oc(r,e.attrs,n)}function Yg(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Oc(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Oc(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),sF(t,o,n?!0:e[++s]))}return t===void 0?null:t}function $U(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],d=xU(l)?ED(c,e,n,i,Ao(l),o):void 0;if(!qd(d)){qd(s)||RU(l)&&(s=ED(c,null,n,i,a,o));let f=sS(xo(),n);aV(r,o,f,i,s)}}function ED(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,g=n[i+1];g===Ei&&(g=f?ts:void 0);let _=f?Bg(g,r):d===r?g:void 0;if(l&&!qd(_)&&(_=Bg(c,r)),qd(_)&&(a=_,o))return a;let E=t[i+1];i=o?cs(E):Ao(E)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Bg(c,r))}return a}function qd(t){return t!==void 0}function HU(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=en(u_(t)))),t}function qU(t,e){return(t.flags&(e?8:16))!==0}function Dn(t,e){ls("NgControlFlow");let n=We(),r=Km(),i=n[r]!==Ei?n[r]:-1,s=i!==-1?TD(n,Tn+i):void 0,o=0;if(as(n,r,t)){let a=ye(null);try{if(s!==void 0&&jV(s,o),t!==-1){let c=Tn+t,l=TD(n,c),d=zU(n[pe],c),f=bm(l,d.tView.ssrId),g=VV(n,d,e,{dehydratedView:f});g0(l,g,o,Tm(d,f))}}finally{ye(a)}}else if(s!==void 0){let a=UV(s,o);a!==void 0&&(a[En]=e)}}function TD(t,e){return t[e]}function zU(t,e){return Gm(t,e)}function GU(t,e,n,r,i,s){let o=e.consts,a=Pd(o,i),c=ih(e,t,2,r,a);return u0(e,n,c,Pd(o,s)),c.attrs!==null&&Am(c,c.attrs,!1),c.mergedAttrs!==null&&Am(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function ie(t,e,n,r){let i=We(),s=Lr(),o=Tn+t,a=i[xt],c=s.firstCreatePass?GU(o,s,i,e,n,r):s.data[o],l=WU(s,i,c,a,e,t);i[o]=l;let d=zm(c);return Vc(c,!0),e0(a,l,c),!EU(c)&&Zm()&&f_(s,i,l,c),qF()===0&&os(l,i),zF(),d&&(o0(s,i,c),s0(s,c,i)),r!==null&&a0(i,c),ie}function ne(){let t=$n();pS()?ZF():(t=t.parent,Vc(t,!1));let e=t;KF(e)&&QF(),GF();let n=Lr();return n.firstCreatePass&&(Xm(n,t),eS(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&dL(e)&&wD(n,e,We(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&hL(e)&&wD(n,e,We(),e.stylesWithoutHost,!1),ne}function qn(t,e,n,r){return ie(t,e,n,r),ne(),qn}var WU=(t,e,n,r,i,s)=>(Jm(!0),WS(r,i,aL()));function D0(){return We()}var Ji=void 0;function KU(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var QU=["en",[["a","p"],["AM","PM"],Ji],[["AM","PM"],Ji,Ji],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ji,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ji,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ji,"{1} 'at' {0}",Ji],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",KU],Zg={};function Sn(t){let e=YU(t),n=CD(e);if(n)return n;let r=e.split("-")[0];if(n=CD(r),n)return n;if(r==="en")return QU;throw new W(701,!1)}function CD(t){return t in Zg||(Zg[t]=Tc.ng&&Tc.ng.common&&Tc.ng.common.locales&&Tc.ng.common.locales[t]),Zg[t]}var ot=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(ot||{});function YU(t){return t.toLowerCase().replace(/_/g,"-")}var zd="en-US";var ZU=zd;function JU(t){typeof t=="string"&&(ZU=t.toLowerCase().replace(/_/g,"-"))}var XU=(t,e,n)=>{};function Ti(t,e,n,r){let i=We(),s=Lr(),o=$n();return tj(s,i,i[xt],o,t,e,r),Ti}function ej(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Ad],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function tj(t,e,n,r,i,s,o){let a=zm(r),l=t.firstCreatePass&&MV(t),d=e[En],f=PV(e),g=!0;if(r.type&3||o){let R=Bn(r,e),A=o?o(R):R,M=f.length,L=o?G=>o(ur(G[r.index])):r.index,$=null;if(!o&&a&&($=ej(t,e,i,r.index)),$!==null){let G=$.__ngLastListenerFn__||$;G.__ngNextListenerFn__=s,$.__ngLastListenerFn__=s,g=!1}else{s=DD(r,e,d,s),XU(R,i,s);let G=n.listen(A,i,s);f.push(s,G),l&&l.push(i,L,M,M+1)}}else s=DD(r,e,d,s);let _=r.outputs,E;if(g&&_!==null&&(E=_[i])){let R=E.length;if(R)for(let A=0;A<R;A+=2){let M=E[A],L=E[A+1],ke=e[M][L].subscribe(s),Y=f.length;f.push(s,ke),l&&l.push(i,r.index,Y,-(Y+1))}}}function bD(t,e,n,r){let i=ye(null);try{return sr(6,e,n),n(r)!==!1}catch(s){return p0(t,s),!1}finally{sr(7,e,n),ye(i)}}function DD(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?wi(t.index,e):e;y_(o,5);let a=bD(e,n,r,s),c=i.__ngNextListenerFn__;for(;c;)a=bD(e,n,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function dn(t=1){return sL(t)}function nj(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function ue(t,e=""){let n=We(),r=Lr(),i=t+Tn,s=r.firstCreatePass?ih(r,i,1,e,null):r.data[i],o=rj(r,n,s,e,t);n[i]=o,Zm()&&f_(r,n,o,s),Vc(s,!1)}var rj=(t,e,n,r,i)=>(Jm(!0),qL(e[xt],r));function w_(t){return Pt("",t,""),w_}function Pt(t,e,n){let r=We(),i=AU(r,t,e,n);return i!==Ei&&kV(r,xo(),i),Pt}var ij=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=KD(!1,n.type),i=r.length>0?I_([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=H({token:t,providedIn:"environment",factory:()=>new t(J(wn))})}}return t})();function An(t){ls("NgStandalone"),t.getStandaloneInjector=e=>e.get(ij).getOrCreateStandaloneInjector(t)}function Mo(t,e,n,r){return sj(We(),mS(),t,e,n,r)}function S0(t,e){let n=t[e];return n===Ei?void 0:n}function sj(t,e,n,r,i,s){let o=e+n;return as(t,o,i)?b0(t,o+1,s?r.call(s,i):r(i)):S0(t,o+1)}function oj(t,e,n,r,i,s,o){let a=e+n;return wU(t,a,i,s)?b0(t,a+2,o?r.call(o,i,s):r(i,s)):S0(t,a+2)}function ko(t,e){let n=Lr(),r,i=t+Tn;n.firstCreatePass?(r=aj(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=es(r.type,!0)),o,a=Xt(Vr);try{let c=Od(!1),l=s();return Od(c),nj(n,We(),i,l),l}finally{Xt(a)}}function aj(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Oo(t,e,n,r){let i=t+Tn,s=We(),o=jF(s,i);return cj(s,i)?oj(s,mS(),e,o.transform,n,r,o):o.transform(n,r)}function cj(t,e){return t[pe].data[e].pure}var Ii=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},A0=new Ii("18.2.13");var lh=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var R0=new U("");function jc(t){return!!t&&typeof t.then=="function"}function N0(t){return!!t&&typeof t.subscribe=="function"}var Ci=new U(""),x0=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=P(Ci,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if(jc(s))n.push(s);else if(N0(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),E_=new U("");function uj(){hb(()=>{throw new W(600,!1)})}function lj(t){return t.isBoundToModule}var dj=10;function hj(t,e,n){try{let r=n();return jc(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var ds=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=P(PL),this.afterRenderManager=P(SU),this.zonelessEnabled=P(oh),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new it,this.afterTick=new it,this.componentTypes=[],this.components=[],this.isStable=P(us).hasPendingTasks.pipe(Q(n=>!n)),this._injector=P(wn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof Bd;if(!this._injector.get(x0).done){let g=!i&&qD(n),_=!1;throw new W(405,_)}let o;i?o=n:o=this._injector.get(yi).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let a=lj(o)?void 0:this._injector.get(vi),c=r||o.selector,l=o.create(ve.NULL,[],c,a),d=l.location.nativeElement,f=l.injector.get(R0,null);return f?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),wd(this.components,l),f?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new W(101,!1);let n=ye(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,ye(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(So,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<dj;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)fj(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>eh(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;wd(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(E_,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>wd(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new W(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function wd(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function fj(t,e,n,r){if(!n&&!eh(t))return;y0(t,e,n&&!r?0:1)}var km=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},T_=(()=>{class t{compileModuleSync(n){return new xm(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=zD(n),s=GS(i.declarations).reduce((o,a)=>{let c=ns(a);return c&&o.push(new Mc(c)),o},[]);return new km(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var pj=(()=>{class t{constructor(){this.zone=P(Z),this.changeDetectionScheduler=P(Do),this.applicationRef=P(ds)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),gj=new U("",{factory:()=>!1});function P0({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Z(xe(V({},k0()),{scheduleInRootZone:n})),[{provide:Z,useFactory:t},{provide:wo,multi:!0,useFactory:()=>{let r=P(pj,{optional:!0});return()=>r.initialize()}},{provide:wo,multi:!0,useFactory:()=>{let r=P(mj);return()=>{r.initialize()}}},e===!0?{provide:E0,useValue:!0}:[],{provide:T0,useValue:n??FS}]}function M0(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=P0({ngZoneFactory:()=>{let i=k0(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&ls("NgZone_CoalesceEvent"),new Z(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Ue([{provide:gj,useValue:!0},{provide:oh,useValue:!1},r])}function k0(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var mj=(()=>{class t{constructor(){this.subscription=new Je,this.initialized=!1,this.zone=P(Z),this.pendingTasks=P(us)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Z.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Z.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var _j=(()=>{class t{constructor(){this.appRef=P(ds),this.taskService=P(us),this.ngZone=P(Z),this.zonelessEnabled=P(oh),this.disableScheduling=P(E0,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Je,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ld):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(T0,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof mm||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?cD:LS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ld+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,cD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function yj(){return typeof $localize<"u"&&$localize.locale||zd}var dh=new U("",{providedIn:"root",factory:()=>P(dh,fe.Optional|fe.SkipSelf)||yj()});var Om=new U("");function md(t){return!t.moduleRef}function vj(t){let e=md(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Z);return n.run(()=>{md(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(lr,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),md(t)){let s=()=>e.destroy(),o=t.platformInjector.get(Om);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>t.moduleRef.destroy(),o=t.platformInjector.get(Om);o.add(s),t.moduleRef.onDestroy(()=>{wd(t.allPlatformModules,t.moduleRef),i.unsubscribe(),o.delete(s)})}return hj(r,n,()=>{let s=e.get(x0);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(dh,zd);if(JU(o||zd),md(t)){let a=e.get(ds);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return Ij(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function Ij(t,e){let n=t.injector.get(ds);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new W(-403,!1);e.push(t)}var Ed=null;function wj(t=[],e){return ve.create({name:e,providers:[{provide:Yd,useValue:"platform"},{provide:Om,useValue:new Set([()=>Ed=null])},...t]})}function Ej(t=[]){if(Ed)return Ed;let e=wj(t);return Ed=e,uj(),Tj(e),e}function Tj(t){t.get(o_,null)?.forEach(n=>n())}var Fo=(()=>{class t{static{this.__NG_ELEMENT_ID__=Cj}}return t})();function Cj(t){return bj($n(),We(),(t&16)===16)}function bj(t,e,n){if(Xd(t)&&!n){let r=wi(t.index,e);return new bo(r,r)}else if(t.type&175){let r=e[cr];return new bo(r,e)}return null}function O0(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=Ej(r),s=[P0({}),{provide:Do,useExisting:_j},...n||[]],o=new Hd({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return vj({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function hh(t,e){ls("NgSignals");let n=ub(t);return e?.equal&&(n[Rr].equal=e.equal),n}function fh(t){let e=ye(null);try{return t()}finally{ye(e)}}var Dj=new U("",{providedIn:"root",factory:()=>P(Sj)}),Sj=(()=>{class t{static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>new Fm})}}return t})(),Fm=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=P(us),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let n=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(n),this.taskId=null})}}enqueue(e){let n=e.creationZone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}},Lm=class{constructor(e,n,r,i,s,o){this.scheduler=e,this.effectFn=n,this.creationZone=r,this.injector=s,this.watcher=mb(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(n){this.injector.get(lr,null,{optional:!0})?.handleError(n)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function C_(t,e){ls("NgSignals"),!e?.injector&&Zd(C_);let n=e?.injector??P(ve),r=e?.manualCleanup!==!0?n.get(Po):null,i=new Lm(n.get(Dj),t,typeof Zone>"u"?null:Zone.current,r,n,e?.allowSignalWrites??!1),s=n.get(Fo,null,{optional:!0});return!s||!(s._lView[ee]&8)?i.watcher.notify():(s._lView[yd]??=[]).push(i.watcher.notify),i}var j0=null;function Lo(){return j0}function B0(t){j0??=t}var Eh=class{};var Nn=new U(""),$0=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>P(xj),providedIn:"platform"})}}return t})();var xj=(()=>{class t extends $0{constructor(){super(),this._doc=P(Nn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Lo().getBaseHref(this._doc)}onPopState(n){let r=Lo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Lo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function H0(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function F0(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function hs(t){return t&&t[0]!=="?"?"?"+t:t}var bh=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>P(q0),providedIn:"root"})}}return t})(),Pj=new U(""),q0=(()=>{class t extends bh{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??P(Nn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return H0(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+hs(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+hs(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+hs(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(J($0),J(Pj,8))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Bc=(()=>{class t{constructor(n){this._subject=new qt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=Oj(F0(L0(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+hs(r))}normalize(n){return t.stripTrailingSlash(kj(this._basePath,L0(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+hs(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+hs(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=hs}static{this.joinWithSlash=H0}static{this.stripTrailingSlash=F0}static{this.\u0275fac=function(r){return new(r||t)(J(bh))}}static{this.\u0275prov=H({token:t,factory:()=>Mj(),providedIn:"root"})}}return t})();function Mj(){return new Bc(J(bh))}function kj(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function L0(t){return t.replace(/\/index.html$/,"")}function Oj(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Gt=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(Gt||{}),Le=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(Le||{}),hn=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(hn||{}),bi={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Fj(t){return Sn(t)[ot.LocaleId]}function Lj(t,e,n){let r=Sn(t),i=[r[ot.DayPeriodsFormat],r[ot.DayPeriodsStandalone]],s=Rn(i,e);return Rn(s,n)}function Vj(t,e,n){let r=Sn(t),i=[r[ot.DaysFormat],r[ot.DaysStandalone]],s=Rn(i,e);return Rn(s,n)}function Uj(t,e,n){let r=Sn(t),i=[r[ot.MonthsFormat],r[ot.MonthsStandalone]],s=Rn(i,e);return Rn(s,n)}function jj(t,e){let r=Sn(t)[ot.Eras];return Rn(r,e)}function ph(t,e){let n=Sn(t);return Rn(n[ot.DateFormat],e)}function gh(t,e){let n=Sn(t);return Rn(n[ot.TimeFormat],e)}function mh(t,e){let r=Sn(t)[ot.DateTimeFormat];return Rn(r,e)}function Dh(t,e){let n=Sn(t),r=n[ot.NumberSymbols][e];if(typeof r>"u"){if(e===bi.CurrencyDecimal)return n[ot.NumberSymbols][bi.Decimal];if(e===bi.CurrencyGroup)return n[ot.NumberSymbols][bi.Group]}return r}function z0(t){if(!t[ot.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[ot.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Bj(t){let e=Sn(t);return z0(e),(e[ot.ExtraData][2]||[]).map(r=>typeof r=="string"?b_(r):[b_(r[0]),b_(r[1])])}function $j(t,e,n){let r=Sn(t);z0(r);let i=[r[ot.ExtraData][0],r[ot.ExtraData][1]],s=Rn(i,e)||[];return Rn(s,n)||[]}function Rn(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function b_(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var Hj=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,_h={},qj=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,jr=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(jr||{}),Ae=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(Ae||{}),Se=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(Se||{});function zj(t,e,n,r){let i=e2(t);e=Ur(n,e)||e;let o=[],a;for(;e;)if(a=qj.exec(e),a){o=o.concat(a.slice(1));let d=o.pop();if(!d)break;e=d}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=W0(r,c),i=Xj(i,r,!0));let l="";return o.forEach(d=>{let f=Zj(d);l+=f?f(i,n,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Th(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Ur(t,e){let n=Fj(t);if(_h[n]??={},_h[n][e])return _h[n][e];let r="";switch(e){case"shortDate":r=ph(t,hn.Short);break;case"mediumDate":r=ph(t,hn.Medium);break;case"longDate":r=ph(t,hn.Long);break;case"fullDate":r=ph(t,hn.Full);break;case"shortTime":r=gh(t,hn.Short);break;case"mediumTime":r=gh(t,hn.Medium);break;case"longTime":r=gh(t,hn.Long);break;case"fullTime":r=gh(t,hn.Full);break;case"short":let i=Ur(t,"shortTime"),s=Ur(t,"shortDate");r=yh(mh(t,hn.Short),[i,s]);break;case"medium":let o=Ur(t,"mediumTime"),a=Ur(t,"mediumDate");r=yh(mh(t,hn.Medium),[o,a]);break;case"long":let c=Ur(t,"longTime"),l=Ur(t,"longDate");r=yh(mh(t,hn.Long),[c,l]);break;case"full":let d=Ur(t,"fullTime"),f=Ur(t,"fullDate");r=yh(mh(t,hn.Full),[d,f]);break}return r&&(_h[n][e]=r),r}function yh(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function zn(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function Gj(t,e){return zn(t,3).substring(0,e)}function dt(t,e,n=0,r=!1,i=!1){return function(s,o){let a=Wj(t,s);if((n>0||a>-n)&&(a+=n),t===Ae.Hours)a===0&&n===-12&&(a=12);else if(t===Ae.FractionalSeconds)return Gj(a,e);let c=Dh(o,bi.MinusSign);return zn(a,e,c,r,i)}}function Wj(t,e){switch(t){case Ae.FullYear:return e.getFullYear();case Ae.Month:return e.getMonth();case Ae.Date:return e.getDate();case Ae.Hours:return e.getHours();case Ae.Minutes:return e.getMinutes();case Ae.Seconds:return e.getSeconds();case Ae.FractionalSeconds:return e.getMilliseconds();case Ae.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function je(t,e,n=Gt.Format,r=!1){return function(i,s){return Kj(i,s,t,e,n,r)}}function Kj(t,e,n,r,i,s){switch(n){case Se.Months:return Uj(e,i,r)[t.getMonth()];case Se.Days:return Vj(e,i,r)[t.getDay()];case Se.DayPeriods:let o=t.getHours(),a=t.getMinutes();if(s){let l=Bj(e),d=$j(e,i,r),f=l.findIndex(g=>{if(Array.isArray(g)){let[_,E]=g,R=o>=_.hours&&a>=_.minutes,A=o<E.hours||o===E.hours&&a<E.minutes;if(_.hours<E.hours){if(R&&A)return!0}else if(R||A)return!0}else if(g.hours===o&&g.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return Lj(e,i,r)[o<12?0:1];case Se.Eras:return jj(e,r)[t.getFullYear()<=0?0:1];default:let c=n;throw new Error(`unexpected translation type ${c}`)}}function vh(t){return function(e,n,r){let i=-1*r,s=Dh(n,bi.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case jr.Short:return(i>=0?"+":"")+zn(o,2,s)+zn(Math.abs(i%60),2,s);case jr.ShortGMT:return"GMT"+(i>=0?"+":"")+zn(o,1,s);case jr.Long:return"GMT"+(i>=0?"+":"")+zn(o,2,s)+":"+zn(Math.abs(i%60),2,s);case jr.Extended:return r===0?"Z":(i>=0?"+":"")+zn(o,2,s)+":"+zn(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}var Qj=0,wh=4;function Yj(t){let e=Th(t,Qj,1).getDay();return Th(t,0,1+(e<=wh?wh:wh+7)-e)}function G0(t){let e=t.getDay(),n=e===0?-3:wh-e;return Th(t.getFullYear(),t.getMonth(),t.getDate()+n)}function D_(t,e=!1){return function(n,r){let i;if(e){let s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+s)/7)}else{let s=G0(n),o=Yj(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return zn(i,t,Dh(r,bi.MinusSign))}}function Ih(t,e=!1){return function(n,r){let s=G0(n).getFullYear();return zn(s,t,Dh(r,bi.MinusSign),e)}}var S_={};function Zj(t){if(S_[t])return S_[t];let e;switch(t){case"G":case"GG":case"GGG":e=je(Se.Eras,Le.Abbreviated);break;case"GGGG":e=je(Se.Eras,Le.Wide);break;case"GGGGG":e=je(Se.Eras,Le.Narrow);break;case"y":e=dt(Ae.FullYear,1,0,!1,!0);break;case"yy":e=dt(Ae.FullYear,2,0,!0,!0);break;case"yyy":e=dt(Ae.FullYear,3,0,!1,!0);break;case"yyyy":e=dt(Ae.FullYear,4,0,!1,!0);break;case"Y":e=Ih(1);break;case"YY":e=Ih(2,!0);break;case"YYY":e=Ih(3);break;case"YYYY":e=Ih(4);break;case"M":case"L":e=dt(Ae.Month,1,1);break;case"MM":case"LL":e=dt(Ae.Month,2,1);break;case"MMM":e=je(Se.Months,Le.Abbreviated);break;case"MMMM":e=je(Se.Months,Le.Wide);break;case"MMMMM":e=je(Se.Months,Le.Narrow);break;case"LLL":e=je(Se.Months,Le.Abbreviated,Gt.Standalone);break;case"LLLL":e=je(Se.Months,Le.Wide,Gt.Standalone);break;case"LLLLL":e=je(Se.Months,Le.Narrow,Gt.Standalone);break;case"w":e=D_(1);break;case"ww":e=D_(2);break;case"W":e=D_(1,!0);break;case"d":e=dt(Ae.Date,1);break;case"dd":e=dt(Ae.Date,2);break;case"c":case"cc":e=dt(Ae.Day,1);break;case"ccc":e=je(Se.Days,Le.Abbreviated,Gt.Standalone);break;case"cccc":e=je(Se.Days,Le.Wide,Gt.Standalone);break;case"ccccc":e=je(Se.Days,Le.Narrow,Gt.Standalone);break;case"cccccc":e=je(Se.Days,Le.Short,Gt.Standalone);break;case"E":case"EE":case"EEE":e=je(Se.Days,Le.Abbreviated);break;case"EEEE":e=je(Se.Days,Le.Wide);break;case"EEEEE":e=je(Se.Days,Le.Narrow);break;case"EEEEEE":e=je(Se.Days,Le.Short);break;case"a":case"aa":case"aaa":e=je(Se.DayPeriods,Le.Abbreviated);break;case"aaaa":e=je(Se.DayPeriods,Le.Wide);break;case"aaaaa":e=je(Se.DayPeriods,Le.Narrow);break;case"b":case"bb":case"bbb":e=je(Se.DayPeriods,Le.Abbreviated,Gt.Standalone,!0);break;case"bbbb":e=je(Se.DayPeriods,Le.Wide,Gt.Standalone,!0);break;case"bbbbb":e=je(Se.DayPeriods,Le.Narrow,Gt.Standalone,!0);break;case"B":case"BB":case"BBB":e=je(Se.DayPeriods,Le.Abbreviated,Gt.Format,!0);break;case"BBBB":e=je(Se.DayPeriods,Le.Wide,Gt.Format,!0);break;case"BBBBB":e=je(Se.DayPeriods,Le.Narrow,Gt.Format,!0);break;case"h":e=dt(Ae.Hours,1,-12);break;case"hh":e=dt(Ae.Hours,2,-12);break;case"H":e=dt(Ae.Hours,1);break;case"HH":e=dt(Ae.Hours,2);break;case"m":e=dt(Ae.Minutes,1);break;case"mm":e=dt(Ae.Minutes,2);break;case"s":e=dt(Ae.Seconds,1);break;case"ss":e=dt(Ae.Seconds,2);break;case"S":e=dt(Ae.FractionalSeconds,1);break;case"SS":e=dt(Ae.FractionalSeconds,2);break;case"SSS":e=dt(Ae.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=vh(jr.Short);break;case"ZZZZZ":e=vh(jr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=vh(jr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=vh(jr.Long);break;default:return null}return S_[t]=e,e}function W0(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function Jj(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function Xj(t,e,n){let r=n?-1:1,i=t.getTimezoneOffset(),s=W0(e,i);return Jj(t,r*(s-i))}function e2(t){if(V0(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,s=1,o=1]=t.split("-").map(a=>+a);return Th(i,s-1,o)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(Hj))return t2(r)}let e=new Date(t);if(!V0(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function t2(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return s.call(e,o,a,c,l),e}function V0(t){return t instanceof Date&&!isNaN(t.valueOf())}function K0(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var A_=/\s+/,U0=[],Vo=(()=>{class t{constructor(n,r){this._ngEl=n,this._renderer=r,this.initialClasses=U0,this.stateMap=new Map}set klass(n){this.initialClasses=n!=null?n.trim().split(A_):U0}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(A_):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(A_).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||t)(Vr(Uc),Vr(ah))}}static{this.\u0275dir=Qd({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return t})();function n2(t,e){return new W(2100,!1)}var r2="mediumDate",i2=new U(""),s2=new U(""),Sh=(()=>{class t{constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,s){if(n==null||n===""||n!==n)return null;try{let o=r??this.defaultOptions?.dateFormat??r2,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return zj(n,o,s||this.locale,a)}catch(o){throw n2(t,o.message)}}static{this.\u0275fac=function(r){return new(r||t)(Vr(dh,16),Vr(i2,24),Vr(s2,24))}}static{this.\u0275pipe=BD({name:"date",type:t,pure:!0,standalone:!0})}}return t})();var x_="browser",o2="server";function P_(t){return t===x_}function M_(t){return t===o2}var Ch=class{};var F_=class extends Eh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},L_=class t extends F_{static makeCurrent(){B0(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=a2();return n==null?null:c2(n)}resetBaseElement(){$c=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return K0(document.cookie,e)}},$c=null;function a2(){return $c=$c||document.querySelector("base"),$c?$c.getAttribute("href"):null}function c2(t){return new URL(t,document.baseURI).pathname}var u2=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),V_=new U(""),J0=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new W(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(J(V_),J(Z))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),Ah=class{constructor(e){this._doc=e}},k_="ng-app-id",X0=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=M_(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${k_}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(k_),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(k_,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(J(Nn),J(s_),J(a_,8),J(Hn))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),O_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},j_=/%COMP%/g,eA="%COMP%",l2=`_nghost-${eA}`,d2=`_ngcontent-${eA}`,h2=!0,f2=new U("",{providedIn:"root",factory:()=>h2});function p2(t){return d2.replace(j_,t)}function g2(t){return l2.replace(j_,t)}function tA(t,e){return e.map(n=>n.replace(j_,t))}var Q0=(()=>{class t{constructor(n,r,i,s,o,a,c,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=M_(a),this.defaultRenderer=new Hc(n,o,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ar.ShadowDom&&(r=xe(V({},r),{encapsulation:ar.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof Rh?i.applyToHost(n):i instanceof qc&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case ar.Emulated:s=new Rh(c,l,r,this.appId,d,o,a,f);break;case ar.ShadowDom:return new U_(c,l,n,r,o,a,this.nonce,f);default:s=new qc(c,l,r,d,o,a,f);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(J(J0),J(X0),J(s_),J(f2),J(Nn),J(Hn),J(Z),J(a_))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),Hc=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(O_[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Y0(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Y0(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new W(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=O_[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=O_[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Mr.DashCase|Mr.Important)?e.style.setProperty(n,r,i&Mr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Mr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Lo().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Y0(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var U_=class extends Hc{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=tA(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},qc=class extends Hc{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?tA(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Rh=class extends qc{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=p2(l),this.hostAttr=g2(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},m2=(()=>{class t extends Ah{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(J(Nn))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),Z0=["alt","control","meta","shift"],_2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},y2={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},v2=(()=>{class t extends Ah{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Lo().onAndCancel(n,s.domEventName,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),Z0.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(n,r){let i=_2[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Z0.forEach(o=>{if(o!==i){let a=y2[o];a(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(J(Nn))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})();function nA(t,e){return O0(V({rootComponent:t},I2(e)))}function I2(t){return{appProviders:[...b2,...t?.providers??[]],platformProviders:C2}}function w2(){L_.makeCurrent()}function E2(){return new lr}function T2(){return qS(document),document}var C2=[{provide:Hn,useValue:x_},{provide:o_,useValue:w2,multi:!0},{provide:Nn,useFactory:T2,deps:[]}];var b2=[{provide:Yd,useValue:"root"},{provide:lr,useFactory:E2,deps:[]},{provide:V_,useClass:m2,multi:!0,deps:[Nn,Z,Hn]},{provide:V_,useClass:v2,multi:!0,deps:[Nn]},Q0,X0,J0,{provide:So,useExisting:Q0},{provide:Ch,useClass:u2,deps:[]},[]];var Nh=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(J(Nn))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var le="primary",cu=Symbol("RouteTitle"),z_=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function qo(t){return new z_(t)}function D2(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function S2(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!dr(t[n],e[n]))return!1;return!0}function dr(t,e){let n=t?G_(t):void 0,r=e?G_(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!dA(t[i],e[i]))return!1;return!0}function G_(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function dA(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function hA(t){return t.length>0?t[t.length-1]:null}function Di(t){return Og(t)?t:jc(t)?Xe(Promise.resolve(t)):K(t)}var A2={exact:pA,subset:gA},fA={exact:R2,subset:N2,ignored:()=>!0};function iA(t,e,n){return A2[n.paths](t.root,e.root,n.matrixParams)&&fA[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function R2(t,e){return dr(t,e)}function pA(t,e,n){if(!ps(t.segments,e.segments)||!Mh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!pA(t.children[r],e.children[r],n))return!1;return!0}function N2(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>dA(t[n],e[n]))}function gA(t,e,n){return mA(t,e,e.segments,n)}function mA(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!ps(i,n)||e.hasChildren()||!Mh(i,n,r))}else if(t.segments.length===n.length){if(!ps(t.segments,n)||!Mh(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!gA(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!ps(t.segments,i)||!Mh(t.segments,i,r)||!t.children[le]?!1:mA(t.children[le],e,s,r)}}function Mh(t,e,n){return e.every((r,i)=>fA[n](t[i].parameters,r.parameters))}var $r=class{constructor(e=new Re([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=qo(this.queryParams),this._queryParamMap}toString(){return M2.serialize(this)}},Re=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kh(this)}},fs=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=qo(this.parameters),this._parameterMap}toString(){return yA(this)}};function x2(t,e){return ps(t,e)&&t.every((n,r)=>dr(n.parameters,e[r].parameters))}function ps(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function P2(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===le&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==le&&(n=n.concat(e(i,r)))}),n}var _y=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>new Zc,providedIn:"root"})}}return t})(),Zc=class{parse(e){let n=new K_(e);return new $r(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${zc(e.root,!0)}`,r=F2(e.queryParams),i=typeof e.fragment=="string"?`#${k2(e.fragment)}`:"";return`${n}${r}${i}`}},M2=new Zc;function kh(t){return t.segments.map(e=>yA(e)).join("/")}function zc(t,e){if(!t.hasChildren())return kh(t);if(e){let n=t.children[le]?zc(t.children[le],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==le&&r.push(`${i}:${zc(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=P2(t,(r,i)=>i===le?[zc(t.children[le],!1)]:[`${i}:${zc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[le]!=null?`${kh(t)}/${n[0]}`:`${kh(t)}/(${n.join("//")})`}}function _A(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xh(t){return _A(t).replace(/%3B/gi,";")}function k2(t){return encodeURI(t)}function W_(t){return _A(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Oh(t){return decodeURIComponent(t)}function sA(t){return Oh(t.replace(/\+/g,"%20"))}function yA(t){return`${W_(t.path)}${O2(t.parameters)}`}function O2(t){return Object.entries(t).map(([e,n])=>`;${W_(e)}=${W_(n)}`).join("")}function F2(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${xh(n)}=${xh(i)}`).join("&"):`${xh(n)}=${xh(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var L2=/^[^\/()?;#]+/;function B_(t){let e=t.match(L2);return e?e[0]:""}var V2=/^[^\/()?;=#]+/;function U2(t){let e=t.match(V2);return e?e[0]:""}var j2=/^[^=?&#]+/;function B2(t){let e=t.match(j2);return e?e[0]:""}var $2=/^[^&#]+/;function H2(t){let e=t.match($2);return e?e[0]:""}var K_=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Re([],{}):new Re([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[le]=new Re(e,n)),r}parseSegment(){let e=B_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new W(4009,!1);return this.capture(e),new fs(Oh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=U2(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=B_(this.remaining);i&&(r=i,this.capture(r))}e[Oh(n)]=Oh(r)}parseQueryParam(e){let n=B2(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=H2(this.remaining);o&&(r=o,this.capture(r))}let i=sA(n),s=sA(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=B_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new W(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=le);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[le]:new Re([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new W(4011,!1)}};function vA(t){return t.segments.length>0?new Re([],{[le]:t}):t}function IA(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=IA(i);if(r===le&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Re(t.segments,e);return q2(n)}function q2(t){if(t.numberOfChildren===1&&t.children[le]){let e=t.children[le];return new Re(t.segments.concat(e.segments),e.children)}return t}function Jc(t){return t instanceof $r}function z2(t,e,n=null,r=null){let i=wA(t);return EA(i,e,n,r)}function wA(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new Re(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=vA(r);return e??i}function EA(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return $_(i,i,i,n,r);let s=G2(e);if(s.toRoot())return $_(i,i,new Re([],{}),n,r);let o=W2(s,i,t),a=o.processChildren?Kc(o.segmentGroup,o.index,s.commands):CA(o.segmentGroup,o.index,s.commands);return $_(i,o.segmentGroup,a,n,r)}function Fh(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Xc(t){return typeof t=="object"&&t!=null&&t.outlets}function $_(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;t===e?o=n:o=TA(t,e,n);let a=vA(IA(o));return new $r(a,s,i)}function TA(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=TA(s,e,n)}),new Re(t.segments,r)}var Lh=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Fh(r[0]))throw new W(4003,!1);let i=r.find(Xc);if(i&&i!==hA(r))throw new W(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function G2(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Lh(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Lh(n,e,r)}var Bo=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function W2(t,e,n){if(t.isAbsolute)return new Bo(e,!0,0);if(!n)return new Bo(e,!1,NaN);if(n.parent===null)return new Bo(n,!0,0);let r=Fh(t.commands[0])?0:1,i=n.segments.length-1+r;return K2(n,i,t.numberOfDoubleDots)}function K2(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new W(4005,!1);i=r.segments.length}return new Bo(r,!1,i-s)}function Q2(t){return Xc(t[0])?t[0].outlets:{[le]:t}}function CA(t,e,n){if(t??=new Re([],{}),t.segments.length===0&&t.hasChildren())return Kc(t,e,n);let r=Y2(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Re(t.segments.slice(0,r.pathIndex),{});return s.children[le]=new Re(t.segments.slice(r.pathIndex),t.children),Kc(s,0,i)}else return r.match&&i.length===0?new Re(t.segments,{}):r.match&&!t.hasChildren()?Q_(t,e,n):r.match?Kc(t,0,i):Q_(t,e,n)}function Kc(t,e,n){if(n.length===0)return new Re(t.segments,{});{let r=Q2(n),i={};if(Object.keys(r).some(s=>s!==le)&&t.children[le]&&t.numberOfChildren===1&&t.children[le].segments.length===0){let s=Kc(t.children[le],e,n);return new Re(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=CA(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Re(t.segments,i)}}function Y2(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Xc(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!aA(c,l,o))return s;r+=2}else{if(!aA(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Q_(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Xc(s)){let c=Z2(s.outlets);return new Re(r,c)}if(i===0&&Fh(n[0])){let c=t.segments[e];r.push(new fs(c.path,oA(n[0]))),i++;continue}let o=Xc(s)?s.outlets[le]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Fh(a)?(r.push(new fs(o,oA(a))),i+=2):(r.push(new fs(o,{})),i++)}return new Re(r,{})}function Z2(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Q_(new Re([],{}),0,r))}),e}function oA(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function aA(t,e,n){return t==n.path&&dr(e,n.parameters)}var Qc="imperative",Ct=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Ct||{}),xn=class{constructor(e,n){this.id=e,this.url=n}},eu=class extends xn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Ct.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},gs=class extends xn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Ct.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},pn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(pn||{}),Y_=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Y_||{}),Br=class extends xn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ct.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ms=class extends xn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ct.NavigationSkipped}},tu=class extends xn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Ct.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Vh=class extends xn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ct.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Z_=class extends xn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ct.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},J_=class extends xn{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Ct.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},X_=class extends xn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ct.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ey=class extends xn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ct.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ty=class{constructor(e){this.route=e,this.type=Ct.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ny=class{constructor(e){this.route=e,this.type=Ct.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ry=class{constructor(e){this.snapshot=e,this.type=Ct.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},iy=class{constructor(e){this.snapshot=e,this.type=Ct.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sy=class{constructor(e){this.snapshot=e,this.type=Ct.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nu=class{constructor(e){this.snapshot=e,this.type=Ct.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ru=class{},zo=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function J2(t,e){return t.providers&&!t._injector&&(t._injector=I_(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Gn(t){return t.outlet||le}function X2(t,e){let n=t.filter(r=>Gn(r)===e);return n.push(...t.filter(r=>Gn(r)!==e)),n}function uu(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var oy=class{get injector(){return uu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new zh(this.rootInjector),this.attachRef=null}},zh=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new oy(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)(J(wn))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Uh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=ay(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=ay(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=cy(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return cy(e,this._root).map(n=>n.value)}};function ay(t,e){if(t===e.value)return e;for(let n of e.children){let r=ay(t,n);if(r)return r}return null}function cy(t,e){if(t===e.value)return[e];for(let n of e.children){let r=cy(t,n);if(r.length)return r.unshift(e),r}return[]}var fn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function jo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var jh=class extends Uh{constructor(e,n){super(e),this.snapshot=n,yy(this,e)}toString(){return this.snapshot.toString()}};function bA(t){let e=eB(t),n=new Tt([new fs("",{})]),r=new Tt({}),i=new Tt({}),s=new Tt({}),o=new Tt(""),a=new Go(n,r,s,o,i,le,t,e.root);return a.snapshot=e.root,new jh(new fn(a,[]),e)}function eB(t){let e={},n={},r={},i="",s=new $o([],e,r,i,n,le,t,null,{});return new $h("",new fn(s,[]))}var Go=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Q(l=>l[cu]))??K(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Q(e=>qo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Q(e=>qo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Bh(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),t.params),data:V(V({},e.data),t.data),resolve:V(V(V(V({},t.data),e.data),i?.data),t._resolvedData)}:r={params:V({},t.params),data:V({},t.data),resolve:V(V({},t.data),t._resolvedData??{})},i&&SA(i)&&(r.resolve[cu]=i.title),r}var $o=class{get title(){return this.data?.[cu]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=qo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=qo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},$h=class extends Uh{constructor(e,n){super(n),this.url=e,yy(this,n)}toString(){return DA(this._root)}};function yy(t,e){e.value._routerState=t,e.children.forEach(n=>yy(t,n))}function DA(t){let e=t.children.length>0?` { ${t.children.map(DA).join(", ")} } `:"";return`${t.value}${e}`}function H_(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,dr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),dr(e.params,n.params)||t.paramsSubject.next(n.params),S2(e.url,n.url)||t.urlSubject.next(n.url),dr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function uy(t,e){let n=dr(t.params,e.params)&&x2(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||uy(t.parent,e.parent))}function SA(t){return typeof t.title=="string"||t.title===null}var vy=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=le,this.activateEvents=new qt,this.deactivateEvents=new qt,this.attachEvents=new qt,this.detachEvents=new qt,this.parentContexts=P(zh),this.location=P(ch),this.changeDetector=P(Fo),this.inputBinder=P(Iy,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new W(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new W(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new W(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new W(4013,!1);this._activatedRoute=n;let i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new ly(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=Qd({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[No]})}}return t})(),ly=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Go?this.route:e===zh?this.childContexts:this.parent.get(e,n)}},Iy=new U("");function tB(t,e,n){let r=iu(t,e._root,n?n._root:void 0);return new jh(r,e)}function iu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=nB(t,e,n);return new fn(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>iu(t,a)),o}}let r=rB(e.value),i=e.children.map(s=>iu(t,s));return new fn(r,i)}}function nB(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return iu(t,r,i);return iu(t,r)})}function rB(t){return new Go(new Tt(t.url),new Tt(t.params),new Tt(t.queryParams),new Tt(t.fragment),new Tt(t.data),t.outlet,t.component,t)}var su=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},AA="ngNavigationCancelingError";function Hh(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Jc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=RA(!1,pn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function RA(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[AA]=!0,n.cancellationCode=e,n}function iB(t){return NA(t)&&Jc(t.url)}function NA(t){return!!t&&t[AA]}var sB=(t,e,n,r)=>Q(i=>(new dy(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),dy=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),H_(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=jo(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=jo(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=jo(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=jo(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new nu(s.value.snapshot))}),e.children.length&&this.forwardEvent(new iy(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(H_(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),H_(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},qh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ho=class{constructor(e,n){this.component=e,this.route=n}};function oB(t,e,n){let r=t._root,i=e?e._root:null;return Gc(r,i,n,[r.value])}function aB(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ko(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!RD(t)?t:e.get(t):r}function Gc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=jo(e);return t.children.forEach(o=>{cB(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Yc(a,n.getContext(o),i)),i}function cB(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=uB(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new qh(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Gc(t,e,a?a.children:null,r,i):Gc(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ho(a.outlet.component,o))}else o&&Yc(e,a,i),i.canActivateChecks.push(new qh(r)),s.component?Gc(t,null,a?a.children:null,r,i):Gc(t,null,n,r,i);return i}function uB(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!ps(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ps(t.url,e.url)||!dr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!uy(t,e)||!dr(t.queryParams,e.queryParams);case"paramsChange":default:return!uy(t,e)}}function Yc(t,e,n){let r=jo(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Yc(o,e.children.getContext(s),n):Yc(o,null,n):Yc(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ho(e.outlet.component,i)):n.canDeactivateChecks.push(new Ho(null,i)):n.canDeactivateChecks.push(new Ho(null,i))}function lu(t){return typeof t=="function"}function lB(t){return typeof t=="boolean"}function dB(t){return t&&lu(t.canLoad)}function hB(t){return t&&lu(t.canActivate)}function fB(t){return t&&lu(t.canActivateChild)}function pB(t){return t&&lu(t.canDeactivate)}function gB(t){return t&&lu(t.canMatch)}function xA(t){return t instanceof Nr||t?.name==="EmptyError"}var Ph=Symbol("INITIAL_VALUE");function Wo(){return Jt(t=>di(t.map(e=>e.pipe(xr(1),go(Ph)))).pipe(Q(e=>{for(let n of e)if(n!==!0){if(n===Ph)return Ph;if(n===!1||mB(n))return n}return!0}),Ht(e=>e!==Ph),xr(1)))}function mB(t){return Jc(t)||t instanceof su}function _B(t,e){return st(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?K(xe(V({},n),{guardsResult:!0})):yB(o,r,i,t).pipe(st(a=>a&&lB(a)?vB(r,s,t,e):K(a)),Q(a=>xe(V({},n),{guardsResult:a})))})}function yB(t,e,n,r){return Xe(t).pipe(st(i=>CB(i.component,i.route,n,e,r)),ir(i=>i!==!0,!0))}function vB(t,e,n,r){return Xe(e).pipe(Zi(i=>fo(wB(i.route.parent,r),IB(i.route,r),TB(t,i.path,n),EB(t,i.route,n))),ir(i=>i!==!0,!0))}function IB(t,e){return t!==null&&e&&e(new sy(t)),K(!0)}function wB(t,e){return t!==null&&e&&e(new ry(t)),K(!0)}function EB(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return K(!0);let i=r.map(s=>ud(()=>{let o=uu(e)??n,a=Ko(s,o),c=hB(a)?a.canActivate(e,t):kr(o,()=>a(e,t));return Di(c).pipe(ir())}));return K(i).pipe(Wo())}function TB(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>aB(o)).filter(o=>o!==null).map(o=>ud(()=>{let a=o.guards.map(c=>{let l=uu(o.node)??n,d=Ko(c,l),f=fB(d)?d.canActivateChild(r,t):kr(l,()=>d(r,t));return Di(f).pipe(ir())});return K(a).pipe(Wo())}));return K(s).pipe(Wo())}function CB(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return K(!0);let o=s.map(a=>{let c=uu(e)??i,l=Ko(a,c),d=pB(l)?l.canDeactivate(t,e,n,r):kr(c,()=>l(t,e,n,r));return Di(d).pipe(ir())});return K(o).pipe(Wo())}function bB(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return K(!0);let s=i.map(o=>{let a=Ko(o,t),c=dB(a)?a.canLoad(e,n):kr(t,()=>a(e,n));return Di(c)});return K(s).pipe(Wo(),PA(r))}function PA(t){return Wl(_t(e=>{if(typeof e!="boolean")throw Hh(t,e)}),Q(e=>e===!0))}function DB(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return K(!0);let s=i.map(o=>{let a=Ko(o,t),c=gB(a)?a.canMatch(e,n):kr(t,()=>a(e,n));return Di(c)});return K(s).pipe(Wo(),PA(r))}var ou=class{constructor(e){this.segmentGroup=e||null}},au=class extends Error{constructor(e){super(),this.urlTree=e}};function Uo(t){return ho(new ou(t))}function SB(t){return ho(new W(4e3,!1))}function AB(t){return ho(RA(!1,pn.GuardRejected))}var hy=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return K(r);if(i.numberOfChildren>1||!i.children[le])return SB(`${e.redirectTo}`);i=i.children[le]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,params:_,data:E,title:R}=i,A=kr(s,()=>a({params:_,data:E,queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,title:R}));if(A instanceof $r)throw new au(A);n=A}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new au(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new $r(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Re(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new W(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},fy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function RB(t,e,n,r,i){let s=MA(t,e,n);return s.matched?(r=J2(e,r),DB(r,e,n,i).pipe(Q(o=>o===!0?s:V({},fy)))):K(s)}function MA(t,e,n){if(e.path==="**")return NB(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?V({},fy):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||D2)(n,t,e);if(!i)return V({},fy);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?V(V({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function NB(t){return{matched:!0,parameters:t.length>0?hA(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function cA(t,e,n,r){return n.length>0&&MB(t,n,r)?{segmentGroup:new Re(e,PB(r,new Re(n,t.children))),slicedSegments:[]}:n.length===0&&kB(t,n,r)?{segmentGroup:new Re(t.segments,xB(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Re(t.segments,t.children),slicedSegments:n}}function xB(t,e,n,r){let i={};for(let s of n)if(Gh(t,e,s)&&!r[Gn(s)]){let o=new Re([],{});i[Gn(s)]=o}return V(V({},r),i)}function PB(t,e){let n={};n[le]=e;for(let r of t)if(r.path===""&&Gn(r)!==le){let i=new Re([],{});n[Gn(r)]=i}return n}function MB(t,e,n){return n.some(r=>Gh(t,e,r)&&Gn(r)!==le)}function kB(t,e,n){return n.some(r=>Gh(t,e,r))}function Gh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function OB(t,e,n){return e.length===0&&!t.children[n]}var py=class{};function FB(t,e,n,r,i,s,o="emptyOnly"){return new gy(t,e,n,r,i,o,s).recognize()}var LB=31,gy=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new hy(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new W(4002,`'${e.segmentGroup}'`)}recognize(){let e=cA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Q(({children:n,rootSnapshot:r})=>{let i=new fn(r,n),s=new $h("",i),o=z2(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new $o([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),le,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,le,n).pipe(Q(r=>({children:r,rootSnapshot:n})),hi(r=>{if(r instanceof au)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ou?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(Q(o=>o instanceof fn?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Xe(s).pipe(Zi(o=>{let a=r.children[o],c=X2(n,o);return this.processSegmentGroup(e,c,a,o,i)}),fd((o,a)=>(o.push(...a),o)),fi(null),jg(),st(o=>{if(o===null)return Uo(r);let a=kA(o);return VB(a),K(a)}))}processSegment(e,n,r,i,s,o,a){return Xe(n).pipe(Zi(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,s,o,a).pipe(hi(l=>{if(l instanceof ou)return K(null);throw l}))),ir(c=>!!c),hi(c=>{if(xA(c))return OB(r,i,s)?K(new py):Uo(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,c){return Gn(r)!==o&&(o===le||!Gh(i,s,r))?Uo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,c):Uo(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=MA(n,i,s);if(!c)return Uo(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>LB&&(this.allowRedirects=!1));let _=new $o(s,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,uA(i),Gn(i),i.component??i._loadedComponent??null,i,lA(i)),E=Bh(_,a,this.paramsInheritanceStrategy);_.params=Object.freeze(E.params),_.data=Object.freeze(E.data);let R=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,_,e);return this.applyRedirects.lineralizeSegments(i,R).pipe(st(A=>this.processSegment(e,r,n,A.concat(g),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=RB(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Jt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Jt(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:_}=c,E=new $o(g,f,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,uA(r),Gn(r),r.component??r._loadedComponent??null,r,lA(r)),R=Bh(E,o,this.paramsInheritanceStrategy);E.params=Object.freeze(R.params),E.data=Object.freeze(R.data);let{segmentGroup:A,slicedSegments:M}=cA(n,g,_,l);if(M.length===0&&A.hasChildren())return this.processChildren(d,l,A,E).pipe(Q($=>new fn(E,$)));if(l.length===0&&M.length===0)return K(new fn(E,[]));let L=Gn(r)===s;return this.processSegment(d,l,A,M,L?le:s,!0,E).pipe(Q($=>new fn(E,$ instanceof fn?[$]:[])))}))):Uo(n)))}getChildConfig(e,n,r){return n.children?K({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?K({routes:n._loadedRoutes,injector:n._loadedInjector}):bB(e,n,r,this.urlSerializer).pipe(st(i=>i?this.configLoader.loadChildren(e,n).pipe(_t(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):AB(n))):K({routes:[],injector:e})}};function VB(t){t.sort((e,n)=>e.value.outlet===le?-1:n.value.outlet===le?1:e.value.outlet.localeCompare(n.value.outlet))}function UB(t){let e=t.value.routeConfig;return e&&e.path===""}function kA(t){let e=[],n=new Set;for(let r of t){if(!UB(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=kA(r.children);e.push(new fn(r.value,i))}return e.filter(r=>!n.has(r))}function uA(t){return t.data||{}}function lA(t){return t.resolve||{}}function jB(t,e,n,r,i,s){return st(o=>FB(t,e,n,r,o.extractedUrl,i,s).pipe(Q(({state:a,tree:c})=>xe(V({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function BB(t,e){return st(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return K(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of OA(c))o.add(l);let a=0;return Xe(o).pipe(Zi(c=>s.has(c)?$B(c,r,t,e):(c.data=Bh(c,c.parent,t).resolve,K(void 0))),_t(()=>a++),po(1),st(c=>a===o.size?K(n):cn))})}function OA(t){let e=t.children.map(n=>OA(n)).flat();return[t,...e]}function $B(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!SA(i)&&(s[cu]=i.title),HB(s,t,e,r).pipe(Q(o=>(t._resolvedData=o,t.data=Bh(t,t.parent,n).resolve,null)))}function HB(t,e,n,r){let i=G_(t);if(i.length===0)return K({});let s={};return Xe(i).pipe(st(o=>qB(t[o],e,n,r).pipe(ir(),_t(a=>{if(a instanceof su)throw Hh(new Zc,a);s[o]=a}))),po(1),Vg(s),hi(o=>xA(o)?cn:ho(o)))}function qB(t,e,n,r){let i=uu(e)??r,s=Ko(t,i),o=s.resolve?s.resolve(e,n):kr(i,()=>s(e,n));return Di(o)}function q_(t){return Jt(e=>{let n=t(e);return n?Xe(n).pipe(Q(()=>e)):K(e)})}var FA=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===le);return r}getResolvedTitleForRoute(n){return n.data[cu]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>P(zB),providedIn:"root"})}}return t})(),zB=(()=>{class t extends FA{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(J(Nh))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),wy=new U("",{providedIn:"root",factory:()=>({})}),Ey=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Cn({type:t,selectors:[["ng-component"]],standalone:!0,features:[An],decls:1,vars:0,template:function(r,i){r&1&&qn(0,"router-outlet")},dependencies:[vy],encapsulation:2})}}return t})();function Ty(t){let e=t.children&&t.children.map(Ty),n=e?xe(V({},t),{children:e}):V({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==le&&(n.component=Ey),n}var Cy=new U(""),GB=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=P(T_)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return K(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=Di(n.loadComponent()).pipe(Q(LA),_t(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),Ec(()=>{this.componentLoaders.delete(n)})),i=new oo(r,()=>new it).pipe(so());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return K({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=WB(r,this.compiler,n,this.onLoadEndListener).pipe(Ec(()=>{this.childrenLoaders.delete(r)})),o=new oo(s,()=>new it).pipe(so());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function WB(t,e,n,r){return Di(t.loadChildren()).pipe(Q(LA),st(i=>i instanceof kc||Array.isArray(i)?K(i):Xe(e.compileModuleAsync(i))),Q(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Cy,[],{optional:!0,self:!0}).flat()),{routes:o.map(Ty),injector:s}}))}function KB(t){return t&&typeof t=="object"&&"default"in t}function LA(t){return KB(t)?t.default:t}var by=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>P(QB),providedIn:"root"})}}return t})(),QB=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),YB=new U("");var ZB=new U(""),JB=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new it,this.transitionAbortSubject=new it,this.configLoader=P(GB),this.environmentInjector=P(wn),this.urlSerializer=P(_y),this.rootContexts=P(zh),this.location=P(Bc),this.inputBindingEnabled=P(Iy,{optional:!0})!==null,this.titleStrategy=P(FA),this.options=P(wy,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=P(by),this.createViewTransition=P(YB,{optional:!0}),this.navigationErrorHandler=P(ZB,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>K(void 0),this.rootComponentType=null;let n=i=>this.events.next(new ty(i)),r=i=>this.events.next(new ny(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(xe(V(V({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new Tt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Qc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ht(s=>s.id!==0),Q(s=>xe(V({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Jt(s=>{let o=!1,a=!1;return K(s).pipe(Jt(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",pn.SupersededByNewNavigation),cn;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?xe(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&d!=="reload"){let f="";return this.events.next(new ms(c.id,this.urlSerializer.serialize(c.rawUrl),f,Y_.IgnoredSameUrlNavigation)),c.resolve(!1),cn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return K(c).pipe(Jt(f=>{let g=this.transitions?.getValue();return this.events.next(new eu(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?cn:Promise.resolve(f)}),jB(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),_t(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=xe(V({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new Vh(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:g,source:_,restoredState:E,extras:R}=c,A=new eu(f,this.urlSerializer.serialize(g),_,E);this.events.next(A);let M=bA(this.rootComponentType).snapshot;return this.currentTransition=s=xe(V({},c),{targetSnapshot:M,urlAfterRedirects:g,extras:xe(V({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,K(s)}else{let f="";return this.events.next(new ms(c.id,this.urlSerializer.serialize(c.extractedUrl),f,Y_.IgnoredByUrlHandlingStrategy)),c.resolve(!1),cn}}),_t(c=>{let l=new Z_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Q(c=>(this.currentTransition=s=xe(V({},c),{guards:oB(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),_B(this.environmentInjector,c=>this.events.next(c)),_t(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Hh(this.urlSerializer,c.guardsResult);let l=new J_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Ht(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",pn.GuardRejected),!1)),q_(c=>{if(c.guards.canActivateChecks.length)return K(c).pipe(_t(l=>{let d=new X_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Jt(l=>{let d=!1;return K(l).pipe(BB(this.paramsInheritanceStrategy,this.environmentInjector),_t({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",pn.NoDataFromResolver)}}))}),_t(l=>{let d=new ey(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),q_(c=>{let l=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(_t(g=>{d.component=g}),Q(()=>{})));for(let g of d.children)f.push(...l(g));return f};return di(l(c.targetSnapshot.root)).pipe(fi(null),xr(1))}),q_(()=>this.afterPreactivation()),Jt(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?Xe(d).pipe(Q(()=>s)):K(s)}),Q(c=>{let l=tB(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=xe(V({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),_t(()=>{this.events.next(new ru)}),sB(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),xr(1),_t({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new gs(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),Ln(this.transitionAbortSubject.pipe(_t(c=>{throw c}))),Ec(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",pn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),hi(c=>{if(a=!0,NA(c))this.events.next(new Br(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),iB(c)?this.events.next(new zo(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new tu(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let d=kr(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof su){let{message:f,cancellationCode:g}=Hh(this.urlSerializer,d);this.events.next(new Br(s.id,this.urlSerializer.serialize(s.extractedUrl),f,g)),this.events.next(new zo(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let f=n.errorHandler(c);s.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return cn}))}))}cancelNavigationTransition(n,r,i){let s=new Br(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function XB(t){return t!==Qc}var e$=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>P(t$),providedIn:"root"})}}return t})(),my=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},t$=(()=>{class t extends my{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=t_(t)))(i||t)}})()}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),VA=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>P(n$),providedIn:"root"})}}return t})(),n$=(()=>{class t extends VA{constructor(){super(...arguments),this.location=P(Bc),this.urlSerializer=P(_y),this.options=P(wy,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=P(by),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new $r,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=bA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof eu)this.stateMemento=this.createStateMemento();else if(n instanceof ms)this.rawUrlTree=r.initialUrl;else if(n instanceof Vh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof ru?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof Br&&(n.code===pn.GuardRejected||n.code===pn.NoDataFromResolver)?this.restoreHistory(r):n instanceof tu?this.restoreHistory(r,!0):n instanceof gs&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof $r?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=V(V({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=t_(t)))(i||t)}})()}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Wc=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Wc||{});function r$(t,e){t.events.pipe(Ht(n=>n instanceof gs||n instanceof Br||n instanceof tu||n instanceof ms),Q(n=>n instanceof gs||n instanceof ms?Wc.COMPLETE:(n instanceof Br?n.code===pn.Redirect||n.code===pn.SupersededByNewNavigation:!1)?Wc.REDIRECTING:Wc.FAILED),Ht(n=>n!==Wc.REDIRECTING),xr(1)).subscribe(()=>{e()})}function i$(t){throw t}var s$={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},o$={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Wh=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=P(lh),this.stateManager=P(VA),this.options=P(wy,{optional:!0})||{},this.pendingTasks=P(us),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=P(JB),this.urlSerializer=P(_y),this.location=P(Bc),this.urlHandlingStrategy=P(by),this._events=new it,this.errorHandler=this.options.errorHandler||i$,this.navigated=!1,this.routeReuseStrategy=P(e$),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=P(Cy,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!P(Iy,{optional:!0}),this.eventsSubscription=new Je,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Br&&r.code!==pn.Redirect&&r.code!==pn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof gs)this.navigated=!0;else if(r instanceof zo){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||XB(i.source)},o);this.scheduleNavigation(a,Qc,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}c$(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Qc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=V({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Ty),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=V(V({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=wA(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),f=this.currentUrlTree.root}return EA(f,n,d,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Jc(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Qc,null,r)}navigate(n,r={skipLocationChange:!1}){return a$(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=V({},s$):r===!1?i=V({},o$):i=r,Jc(n))return iA(this.currentUrlTree,n,i);let s=this.parseUrl(n);return iA(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((f,g)=>{a=f,c=g});let d=this.pendingTasks.add();return r$(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function a$(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new W(4008,!1)}function c$(t){return!(t instanceof ru)&&!(t instanceof zo)}var u$=new U("");function UA(t,...e){return Ue([{provide:Cy,multi:!0,useValue:t},[],{provide:Go,useFactory:l$,deps:[Wh]},{provide:E_,multi:!0,useFactory:d$},e.map(n=>n.\u0275providers)])}function l$(t){return t.routerState.root}function d$(){let t=P(ve);return e=>{let n=t.get(ds);if(e!==n.components[0])return;let r=t.get(Wh),i=t.get(h$);t.get(f$)===1&&r.initialNavigation(),t.get(p$,null,fe.Optional)?.setUpPreloading(),t.get(u$,null,fe.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var h$=new U("",{factory:()=>new it}),f$=new U("",{providedIn:"root",factory:()=>1});var p$=new U("");var jA=[];var m$="firebase",_$="10.14.1";q(m$,_$,"app");var He=new Ii("ANGULARFIRE2_VERSION"),Yo=t=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${t} in the constructor, first ensure that ${t} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${t})\`.`;function ht(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var at=(t,e)=>{let n=e?[e]:Ol(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},nn=class{constructor(){return at(y$)}},y$="app-check";function Qo(){}var Kh=class{zone;delegate;constructor(e,n=Mg){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Dy=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Qo,{},Qo,Qo)),n.pipe(_t({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},et=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Kh(Zone.current)),this.insideAngular=n.run(()=>new Kh(Zone.current,lo)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(J(Z))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Qh(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function v$(t){return Qh().ngZone.runOutsideAngular(()=>t())}function _s(t){return Qh().ngZone.run(()=>t())}function I$(t){return w$(Qh())(t)}function w$(t){return function(n){return n=n.lift(new Dy(t.ngZone)),n.pipe(li(t.outsideAngular),ui(t.insideAngular))}}var E$=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),_s(()=>t.apply(void 0,r))},Ce=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=_s(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Qo,{},Qo,Qo))),r[s]=E$(r[s],n));let i=v$(()=>t.apply(this,r));if(!e)if(i instanceof ae){let s=Qh();return i.pipe(li(s.outsideAngular),ui(s.insideAngular))}else return _s(()=>i);return i instanceof ae?i.pipe(I$):i instanceof Promise?_s(()=>new Promise((s,o)=>i.then(a=>_s(()=>s(a)),a=>_s(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:_s(()=>i)};var qe=class{constructor(e){return e}},Ke=class{constructor(){return Ol()}};function T$(t){return t&&t.length===1?t[0]:new qe(ut())}var Sy=new U("angularfire2._apps"),C$={provide:qe,useFactory:T$,deps:[[new te,Sy]]},b$={provide:Ke,deps:[[new te,Sy]]};function D$(t){return(e,n)=>{let r=n.get(Hn);q("angularfire",He.full,"core"),q("angularfire",He.full,"app"),q("angular",A0.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new qe(i)}}function BA(t,...e){return Ue([C$,b$,{provide:Sy,useFactory:D$(t),multi:!0,deps:[Z,ve,et,...e]}])}var $A=Ce(JC,!0);function rR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var iR=rR,sR=new tr("auth","Firebase",rR());var tf=new rr("@firebase/auth");function S$(t,...e){tf.logLevel<=Nt.WARN&&tf.warn(`Auth (${Yt}): ${t}`,...e)}function Zh(t,...e){tf.logLevel<=Nt.ERROR&&tf.error(`Auth (${Yt}): ${t}`,...e)}function Ai(t,...e){throw Wy(t,...e)}function vs(t,...e){return Wy(t,...e)}function oR(t,e,n){let r=Object.assign(Object.assign({},iR()),{[e]:n});return new tr("auth","Firebase",r).create(e,{appName:t.name})}function ys(t){return oR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Wy(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return sR.create(t,...e)}function re(t,e,...n){if(!t)throw Wy(e,...n)}function Hr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Zh(e),new Error(e)}function Ri(t,e){t||Hr(e)}function xy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function A$(){return HA()==="http:"||HA()==="https:"}function HA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function R$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(A$()||ac()||"connection"in navigator)?navigator.onLine:!0}function N$(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Is=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ri(n>e,"Short delay should be less than long delay!"),this.isMobile=oc()||Pl()}get(){return R$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Ky(t,e){Ri(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var nf=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var x$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var P$=new Is(3e4,6e4);function Qy(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Jo(s,o,a,c){return y(this,arguments,function*(t,e,n,r,i={}){return aR(t,i,()=>y(this,null,function*(){let l={},d={};r&&(e==="GET"?d=r:l={body:JSON.stringify(r)});let f=zi(Object.assign({key:t.config.apiKey},d)).slice(1),g=yield t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);let _=Object.assign({method:e,headers:g},l);return HC()||(_.referrerPolicy="no-referrer"),nf.fetch()(cR(t,t.config.apiHost,n,f),_)}))})}function aR(t,e,n){return y(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},x$),e);try{let i=new Py(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Yh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yh(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Yh(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Yh(t,"user-disabled",o);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw oR(t,d,l);Ai(t,d)}}catch(i){if(i instanceof Qt)throw i;Ai(t,"network-request-failed",{message:String(i)})}})}function M$(s,o,a,c){return y(this,arguments,function*(t,e,n,r,i={}){let l=yield Jo(t,e,n,r,i);return"mfaPendingCredential"in l&&Ai(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function cR(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?Ky(t.config,i):`${t.config.apiScheme}://${i}`}var Py=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(vs(this.auth,"network-request-failed")),P$.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Yh(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=vs(t,e,r);return i.customData._tokenResponse=n,i}function k$(t,e){return y(this,null,function*(){return Jo(t,"POST","/v1/accounts:delete",e)})}function uR(t,e){return y(this,null,function*(){return Jo(t,"POST","/v1/accounts:lookup",e)})}function du(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Yy(t,e=!1){return y(this,null,function*(){let n=_e(t),r=yield n.getIdToken(e),i=Zy(r);re(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:du(Ay(i.auth_time)),issuedAtTime:du(Ay(i.iat)),expirationTime:du(Ay(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Ay(t){return Number(t)*1e3}function Zy(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Zh("JWT malformed, contained fewer than 3 sections"),null;try{let i=jC(n);return i?JSON.parse(i):(Zh("Failed to decode base64 JWT payload"),null)}catch(i){return Zh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function qA(t){let e=Zy(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function fu(t,e,n=!1){return y(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Qt&&O$(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function O$({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var My=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>y(this,null,function*(){yield this.iteration()}),n)}iteration(){return y(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var pu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=du(this.lastLoginAt),this.creationTime=du(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function rf(t){return y(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield fu(t,uR(n,{idToken:r}));re(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?lR(s.providerUserInfo):[],a=F$(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,d=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new pu(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)})}function Jy(t){return y(this,null,function*(){let e=_e(t);yield rf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function F$(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function lR(t){return t.map(e=>{var{providerId:n}=e,r=kg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function L$(t,e){return y(this,null,function*(){let n=yield aR(t,{},()=>y(this,null,function*(){let r=zi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=cR(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",nf.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function V$(t,e){return y(this,null,function*(){return Jo(t,"POST","/v2/accounts:revokeToken",Qy(t,e))})}var hu=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){re(e.length!==0,"internal-error");let n=qA(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return y(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return y(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield L$(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(re(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(re(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(re(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Hr("not implemented")}};function Si(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Zo=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=kg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new My(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new pu(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return y(this,null,function*(){let n=yield fu(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Yy(this,e)}reload(){return Jy(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return y(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield rf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return y(this,null,function*(){if(Ar(this.auth.app))return Promise.reject(ys(this.auth));let e=yield this.getIdToken();return yield fu(this,k$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,d;let f=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(a=n.tenantId)!==null&&a!==void 0?a:void 0,A=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,M=(l=n.createdAt)!==null&&l!==void 0?l:void 0,L=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:$,emailVerified:G,isAnonymous:ke,providerData:Y,stsTokenManager:T}=n;re($&&T,e,"internal-error");let v=hu.fromJSON(this.name,T);re(typeof $=="string",e,"internal-error"),Si(f,e.name),Si(g,e.name),re(typeof G=="boolean",e,"internal-error"),re(typeof ke=="boolean",e,"internal-error"),Si(_,e.name),Si(E,e.name),Si(R,e.name),Si(A,e.name),Si(M,e.name),Si(L,e.name);let I=new t({uid:$,auth:e,email:g,emailVerified:G,displayName:f,isAnonymous:ke,photoURL:E,phoneNumber:_,tenantId:R,stsTokenManager:v,createdAt:M,lastLoginAt:L});return Y&&Array.isArray(Y)&&(I.providerData=Y.map(C=>Object.assign({},C))),A&&(I._redirectEventId=A),I}static _fromIdTokenResponse(e,n,r=!1){return y(this,null,function*(){let i=new hu;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield rf(s),s})}static _fromGetAccountInfoResponse(e,n,r){return y(this,null,function*(){let i=n.users[0];re(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?lR(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new hu;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new pu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var zA=new Map;function qr(t){Ri(t instanceof Function,"Expected a class definition");let e=zA.get(t);return e?(Ri(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,zA.set(t,e),e)}var U$=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return y(this,null,function*(){return!0})}_set(n,r){return y(this,null,function*(){this.storage[n]=r})}_get(n){return y(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return y(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),ky=U$;function Jh(t,e,n){return`firebase:${t}:${e}:${n}`}var sf=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Jh(this.userKey,i.apiKey,s),this.fullPersistenceKey=Jh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return y(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Zo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return y(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return y(this,null,function*(){if(!n.length)return new t(qr(ky),e,r);let i=(yield Promise.all(n.map(l=>y(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||qr(ky),o=Jh(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let d=yield l._get(o);if(d){let f=Zo._fromJSON(e,d);l!==s&&(a=f),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>y(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function GA(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mR(e))return"Blackberry";if(_R(e))return"Webos";if(hR(e))return"Safari";if((e.includes("chrome/")||fR(e))&&!e.includes("edge/"))return"Chrome";if(gR(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function dR(t=Rt()){return/firefox\//i.test(t)}function hR(t=Rt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fR(t=Rt()){return/crios\//i.test(t)}function pR(t=Rt()){return/iemobile/i.test(t)}function gR(t=Rt()){return/android/i.test(t)}function mR(t=Rt()){return/blackberry/i.test(t)}function _R(t=Rt()){return/webos/i.test(t)}function Xy(t=Rt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function j$(t=Rt()){var e;return Xy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function B$(){return qC()&&document.documentMode===10}function yR(t=Rt()){return Xy(t)||gR(t)||_R(t)||mR(t)||/windows phone/i.test(t)||pR(t)}function vR(t,e=[]){let n;switch(t){case"Browser":n=GA(Rt());break;case"Worker":n=`${GA(Rt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Yt}/${r}`}var Oy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return y(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function $$(n){return y(this,arguments,function*(t,e={}){return Jo(t,"GET","/v2/passwordPolicy",Qy(t,e))})}var H$=6,Fy=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:H$,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Ly=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new of(this),this.idTokenSubscription=new of(this),this.beforeStateQueue=new Oy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qr(n)),this._initializationPromise=this.queue(()=>y(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield sf.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return y(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return y(this,null,function*(){try{let n=yield uR(this,{idToken:e}),r=yield Zo._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return y(this,null,function*(){var n;if(Ar(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return y(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return y(this,null,function*(){try{yield rf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=N$()}_delete(){return y(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return y(this,null,function*(){if(Ar(this.app))return Promise.reject(ys(this));let n=e?_e(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return y(this,null,function*(){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>y(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return y(this,null,function*(){return Ar(this.app)?Promise.reject(ys(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Ar(this.app)?Promise.reject(ys(this)):this.queue(()=>y(this,null,function*(){yield this.assertedPersistence.setPersistence(qr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return y(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return y(this,null,function*(){let e=yield $$(this),n=new Fy(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new tr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return y(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield V$(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return y(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return y(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&qr(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=yield sf.create(this,[qr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return y(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>y(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return y(this,null,function*(){if(e===this.currentUser)return this.queue(()=>y(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return y(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return y(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return y(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&S$(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function ev(t){return _e(t)}var of=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=QC(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var tv={loadJS(){return y(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function q$(t){tv=t}function z$(t){return tv.loadJS(t)}function G$(){return tv.gapiScript}function IR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function nv(t,e){let n=ct(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(dc(s,e??{}))return i;Ai(i,"already-initialized")}return n.initialize({options:e})}function W$(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(qr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function rv(t,e,n){let r=ev(t);re(r._canInitEmulator,r,"emulator-config-failed"),re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=wR(e),{host:o,port:a}=K$(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||Q$()}function wR(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function K$(t){let e=wR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:WA(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:WA(o)}}}function WA(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function Q$(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var af=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Hr("not implemented")}_getIdTokenResponse(e){return Hr("not implemented")}_linkToIdToken(e,n){return Hr("not implemented")}_getReauthenticationResolver(e){return Hr("not implemented")}};function Ry(t,e){return y(this,null,function*(){return M$(t,"POST","/v1/accounts:signInWithIdp",Qy(t,e))})}var cf=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Vy=class extends cf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var gu=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return y(this,null,function*(){let s=yield Zo._fromIdTokenResponse(e,r,i),o=KA(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return y(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=KA(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function KA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Uy=class t extends Qt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function ER(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Uy._fromErrorAndOperation(t,s,e,r):s})}function Y$(t,e,n=!1){return y(this,null,function*(){let r=yield fu(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return gu._forOperation(t,"link",r)})}function Z$(t,e,n=!1){return y(this,null,function*(){let{auth:r}=t;if(Ar(r.app))return Promise.reject(ys(r));let i="reauthenticate";try{let s=yield fu(t,ER(r,i,e,t),n);re(s.idToken,r,"internal-error");let o=Zy(s.idToken);re(o,r,"internal-error");let{sub:a}=o;return re(t.uid===a,r,"user-mismatch"),gu._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Ai(r,"user-mismatch"),s}})}function J$(t,e,n=!1){return y(this,null,function*(){if(Ar(t.app))return Promise.reject(ys(t));let r="signIn",i=yield ER(t,r,e),s=yield gu._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function ff(t,e,n,r){return _e(t).onIdTokenChanged(e,n,r)}function iv(t,e,n){return _e(t).beforeAuthStateChanged(e,n)}function pf(t,e,n,r){return _e(t).onAuthStateChanged(e,n,r)}var uf="__sak";var lf=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(uf,"1"),this.storage.removeItem(uf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var X$=1e3,eH=10,tH=(()=>{class t extends lf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yR(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);B$()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,eH):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},X$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return y(this,null,function*(){yield oi(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return y(this,null,function*(){let r=yield oi(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return y(this,null,function*(){yield oi(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),TR=tH;var nH=(()=>{class t extends lf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),sv=nH;function rH(t){return Promise.all(t.map(e=>y(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var iH=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return y(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(d=>y(this,null,function*(){return d(r.origin,o)})),l=yield rH(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function CR(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var jy=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return y(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=CR("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){let g=f;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function hr(){return window}function sH(t){hr().location.href=t}function bR(){return typeof hr().WorkerGlobalScope<"u"&&typeof hr().importScripts=="function"}function oH(){return y(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function aH(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function cH(){return bR()?self:null}var DR="firebaseLocalStorageDb",uH=1,df="firebaseLocalStorage",SR="fbase_key",ws=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function gf(t,e){return t.transaction([df],e?"readwrite":"readonly").objectStore(df)}function lH(){let t=indexedDB.deleteDatabase(DR);return new ws(t).toPromise()}function By(){let t=indexedDB.open(DR,uH);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(df,{keyPath:SR})}catch(i){n(i)}}),t.addEventListener("success",()=>y(this,null,function*(){let r=t.result;r.objectStoreNames.contains(df)?e(r):(r.close(),yield lH(),e(yield By()))}))})}function QA(t,e,n){return y(this,null,function*(){let r=gf(t,!0).put({[SR]:e,value:n});return new ws(r).toPromise()})}function dH(t,e){return y(this,null,function*(){let n=gf(t,!1).get(e),r=yield new ws(n).toPromise();return r===void 0?null:r.value})}function YA(t,e){let n=gf(t,!0).delete(e);return new ws(n).toPromise()}var hH=800,fH=3,pH=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return y(this,null,function*(){return this.db?this.db:(this.db=yield By(),this.db)})}_withRetries(n){return y(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>fH)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return y(this,null,function*(){return bR()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return y(this,null,function*(){this.receiver=iH._getInstance(cH()),this.receiver._subscribe("keyChanged",(n,r)=>y(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>y(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return y(this,null,function*(){var n,r;if(this.activeServiceWorker=yield oH(),!this.activeServiceWorker)return;this.sender=new jy(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return y(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||aH()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return y(this,null,function*(){try{if(!indexedDB)return!1;let n=yield By();return yield QA(n,uf,"1"),yield YA(n,uf),!0}catch{}return!1})}_withPendingWrite(n){return y(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(i=>QA(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return y(this,null,function*(){let r=yield this._withRetries(i=>dH(i,n));return this.localCache[n]=r,r})}_remove(n){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(r=>YA(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return y(this,null,function*(){let n=yield this._withRetries(s=>{let o=gf(s,!1).getAll();return new ws(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>y(this,null,function*(){return this._poll()}),hH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),AR=pH;var Tee=IR("rcb"),Cee=new Is(3e4,6e4);function gH(t,e){return e?qr(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var mu=class extends af{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ry(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ry(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ry(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function mH(t){return J$(t.auth,new mu(t),t.bypassAuthState)}function _H(t){let{auth:e,user:n}=t;return re(n,e,"internal-error"),Z$(n,new mu(t),t.bypassAuthState)}function yH(t){return y(this,null,function*(){let{auth:e,user:n}=t;return re(n,e,"internal-error"),Y$(n,new mu(t),t.bypassAuthState)})}var $y=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>y(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return y(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mH;case"linkViaPopup":case"linkViaRedirect":return yH;case"reauthViaPopup":case"reauthViaRedirect":return _H;default:Ai(this.auth,"internal-error")}}resolve(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var bee=new Is(2e3,1e4);var vH="pendingRedirect",Xh=new Map,Hy=class t extends $y{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return y(this,null,function*(){let e=Xh.get(this.auth._key());if(!e){try{let r=(yield IH(this.resolver,this.auth))?yield oi(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Xh.set(this.auth._key(),e)}return this.bypassAuthState||Xh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return y(this,null,function*(){if(e.type==="signInViaRedirect")return oi(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,oi(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return y(this,null,function*(){})}cleanUp(){}};function IH(t,e){return y(this,null,function*(){let n=TH(e),r=EH(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function wH(t,e){Xh.set(t._key(),e)}function EH(t){return qr(t._redirectPersistence)}function TH(t){return Jh(vH,t.config.apiKey,t.name)}function CH(t,e,n=!1){return y(this,null,function*(){if(Ar(t.app))return Promise.reject(ys(t));let r=ev(t),i=gH(r,e),o=yield new Hy(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var bH=10*60*1e3,qy=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!DH(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!RR(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(vs(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bH&&this.cachedEventUids.clear(),this.cachedEventUids.has(ZA(e))}saveEventToCache(e){this.cachedEventUids.add(ZA(e)),this.lastProcessedEventTime=Date.now()}};function ZA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function RR({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function DH(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RR(t);default:return!1}}function SH(n){return y(this,arguments,function*(t,e={}){return Jo(t,"GET","/v1/projects",e)})}var AH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RH=/^https?/;function NH(t){return y(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield SH(t);for(let n of e)try{if(xH(n))return}catch{}Ai(t,"unauthorized-domain")})}function xH(t){let e=xy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!RH.test(n))return!1;if(AH.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var PH=new Is(3e4,6e4);function JA(){let t=hr().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function MH(t){return new Promise((e,n)=>{var r,i,s;function o(){JA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{JA(),n(vs(t,"network-request-failed"))},timeout:PH.get()})}if(!((i=(r=hr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=hr().gapi)===null||s===void 0)&&s.load)o();else{let a=IR("iframefcb");return hr()[a]=()=>{gapi.load?o():n(vs(t,"network-request-failed"))},z$(`${G$()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw ef=null,e})}var ef=null;function kH(t){return ef=ef||MH(t),ef}var OH=new Is(5e3,15e3),FH="__/auth/iframe",LH="emulator/auth/iframe",VH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jH(t){let e=t.config;re(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Ky(e,LH):`https://${t.config.authDomain}/${FH}`,r={apiKey:e.apiKey,appName:t.name,v:Yt},i=UH.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${zi(r).slice(1)}`}function BH(t){return y(this,null,function*(){let e=yield kH(t),n=hr().gapi;return re(n,t,"internal-error"),e.open({where:document.body,url:jH(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VH,dontclear:!0},r=>new Promise((i,s)=>y(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=vs(t,"network-request-failed"),a=hr().setTimeout(()=>{s(o)},OH.get());function c(){hr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var $H={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HH=500,qH=600,zH="_blank",GH="http://localhost",hf=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function WH(t,e,n,r=HH,i=qH){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},$H),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Rt().toLowerCase();n&&(a=fR(l)?zH:n),dR(l)&&(e=e||GH,c.scrollbars="yes");let d=Object.entries(c).reduce((g,[_,E])=>`${g}${_}=${E},`,"");if(j$(l)&&a!=="_self")return KH(e||"",a),new hf(null);let f=window.open(e||"",a,d);re(f,t,"popup-blocked");try{f.focus()}catch{}return new hf(f)}function KH(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var QH="__/auth/handler",YH="emulator/auth/handler",ZH=encodeURIComponent("fac");function XA(t,e,n,r,i,s){return y(this,null,function*(){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Yt,eventId:i};if(e instanceof cf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",uc(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(s||{}))o[d]=f}if(e instanceof Vy){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield t._getAppCheckToken(),l=c?`#${ZH}=${encodeURIComponent(c)}`:"";return`${JH(t)}?${zi(a).slice(1)}${l}`})}function JH({config:t}){return t.emulator?Ky(t,YH):`https://${t.authDomain}/${QH}`}var Ny="webStorageSupport",zy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sv,this._completeRedirectFn=CH,this._overrideRedirectResult=wH}_openPopup(e,n,r,i){return y(this,null,function*(){var s;Ri((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield XA(e,n,r,xy(),i);return WH(e,o,CR())})}_openRedirect(e,n,r,i){return y(this,null,function*(){yield this._originValidation(e);let s=yield XA(e,n,r,xy(),i);return sH(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ri(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return y(this,null,function*(){let n=yield BH(e),r=new qy(e);return n.register("authEvent",i=>(re(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ny,{type:Ny},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Ny];o!==void 0&&n(!!o),Ai(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=NH(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return yR()||hR()||Xy()}},NR=zy;var eR="@firebase/auth",tR="1.7.9";var Gy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return y(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function XH(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eq(t){rt(new nt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;re(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vR(t)},l=new Ly(r,i,s,c);return W$(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),rt(new nt("auth-internal",e=>{let n=ev(e.getProvider("auth").getImmediate());return(r=>new Gy(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),q(eR,tR,XH(t)),q(eR,tR,"esm2017")}var tq=5*60,nq=_g("authIdTokenMaxAge")||tq,nR=null,rq=t=>e=>y(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>nq)return;let i=n?.token;nR!==i&&(nR=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function ov(t=ut()){let e=ct(t,"auth");if(e.isInitialized())return e.getImmediate();let n=nv(t,{popupRedirectResolver:NR,persistence:[AR,TR,sv]}),r=_g("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=rq(s.toString());iv(n,o,()=>o(n.currentUser)),ff(n,a=>o(a))}}let i=$C("auth");return i&&rv(n,`http://${i}`),n}function iq(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}q$({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=vs("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",iq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eq("Browser");function PR(t){return new ae(function(e){var n=pf(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var MR="auth",Es=class{constructor(e){return e}},Wn=class{constructor(){return at(MR)}};var av=new U("angularfire2.auth-instances");function Yq(t,e){let n=ht(MR,t,e);return n&&new Es(n)}function Zq(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Es(r)}}var Jq={provide:Wn,deps:[[new te,av]]},Xq={provide:Es,useFactory:Yq,deps:[[new te,av],qe]};function kR(t,...e){return q("angularfire",He.full,"auth"),Ue([Xq,Jq,{provide:av,useFactory:Zq(t),multi:!0,deps:[Z,ve,et,Ke,[new te,nn],...e]}])}var OR=Ce(PR,!0);var FR=Ce(ov,!0);var mf="analytics",tz="firebase_id",nz="origin",rz=60*1e3,iz="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",pv="https://www.googletagmanager.com/gtag/js";var Wt=new rr("@firebase/analytics");var sz={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},gn=new tr("analytics","Analytics",sz);function oz(t){if(!t.startsWith(pv)){let e=gn.create("invalid-gtag-resource",{gtagURL:t});return Wt.warn(e.message),""}return t}function HR(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function az(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function cz(t,e){let n=az("firebase-js-sdk-policy",{createScriptURL:oz}),r=document.createElement("script"),i=`${pv}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function uz(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function lz(t,e,n,r,i,s){return y(this,null,function*(){let o=r[i];try{if(o)yield e[o];else{let c=(yield HR(n)).find(l=>l.measurementId===i);c&&(yield e[c.appId])}}catch(a){Wt.error(a)}t("config",i,s)})}function dz(t,e,n,r,i){return y(this,null,function*(){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);let a=yield HR(n);for(let c of o){let l=a.find(f=>f.measurementId===c),d=l&&e[l.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),yield Promise.all(s),t("event",r,i||{})}catch(s){Wt.error(s)}})}function hz(t,e,n,r){function i(s,...o){return y(this,null,function*(){try{if(s==="event"){let[a,c]=o;yield dz(t,e,n,a,c)}else if(s==="config"){let[a,c]=o;yield lz(t,e,n,r,a,c)}else if(s==="consent"){let[a,c]=o;t("consent",a,c)}else if(s==="get"){let[a,c,l]=o;t("get",a,c,l)}else if(s==="set"){let[a]=o;t("set",a)}else t(s,...o)}catch(a){Wt.error(a)}})}return i}function fz(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=hz(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function pz(t){let e=window.document.getElementsByTagName("script");for(let n of Object.values(e))if(n.src&&n.src.includes(pv)&&n.src.includes(t))return n;return null}var gz=30,mz=1e3,uv=class{constructor(e={},n=mz){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},qR=new uv;function _z(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function yz(t){return y(this,null,function*(){var e;let{appId:n,apiKey:r}=t,i={method:"GET",headers:_z(r)},s=iz.replace("{app-id}",n),o=yield fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{let c=yield o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw gn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})}function vz(r){return y(this,arguments,function*(t,e=qR,n){let{appId:i,apiKey:s,measurementId:o}=t.options;if(!i)throw gn.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw gn.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new lv;return setTimeout(()=>y(this,null,function*(){c.abort()}),n!==void 0?n:rz),zR({appId:i,apiKey:s,measurementId:o},a,c,e)})}function zR(s,o,a){return y(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=qR){var c;let{appId:l,measurementId:d}=t;try{yield Iz(r,e)}catch(f){if(d)return Wt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:l,measurementId:d};throw f}try{let f=yield yz(t);return i.deleteThrottleMetadata(l),f}catch(f){let g=f;if(!wz(g)){if(i.deleteThrottleMetadata(l),d)return Wt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:l,measurementId:d};throw f}let _=Number((c=g?.customData)===null||c===void 0?void 0:c.httpStatus)===503?fc(n,i.intervalMillis,gz):fc(n,i.intervalMillis),E={throttleEndTimeMillis:Date.now()+_,backoffCount:n+1};return i.setThrottleMetadata(l,E),Wt.debug(`Calling attemptFetch again in ${_} millis`),zR(t,E,r,i)}})}function Iz(t,e){return new Promise((n,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(gn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function wz(t){if(!(t instanceof Qt)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var lv=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var dv;function Ez(t,e,n,r,i){return y(this,null,function*(){if(i&&i.global){t("event",n,r);return}else{let s=yield e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}})}function Tz(t,e,n,r){return y(this,null,function*(){if(r&&r.global)return t("set",{user_id:n}),Promise.resolve();{let i=yield e;t("config",i,{update:!0,user_id:n})}})}var hv;function Cz(t){hv=t}function bz(t){dv=t}function Dz(){return y(this,null,function*(){if(Sr())try{yield Hi()}catch(t){return Wt.warn(gn.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return Wt.warn(gn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function Sz(t,e,n,r,i,s,o){return y(this,null,function*(){var a;let c=vz(t);c.then(_=>{n[_.measurementId]=_.appId,t.options.measurementId&&_.measurementId!==t.options.measurementId&&Wt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>Wt.error(_)),e.push(c);let l=Dz().then(_=>{if(_)return r.getId()}),[d,f]=yield Promise.all([c,l]);pz(s)||cz(s,d.measurementId),hv&&(i("consent","default",hv),Cz(void 0)),i("js",new Date);let g=(a=o?.config)!==null&&a!==void 0?a:{};return g[nz]="firebase",g.update=!0,f!=null&&(g[tz]=f),i("config",d.measurementId,g),dv&&(i("set",dv),bz(void 0)),d.measurementId})}var fv=class{constructor(e){this.app=e}_delete(){return delete Xo[this.app.options.appId],Promise.resolve()}},Xo={},LR=[],VR={},cv="dataLayer",Az="gtag",UR,gv,jR=!1;function Rz(){let t=[];if(ac()&&t.push("This is a browser extension environment."),cc()||t.push("Cookies are not available."),t.length>0){let e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=gn.create("invalid-analytics-context",{errorInfo:e});Wt.warn(n.message)}}function Nz(t,e,n){Rz();let r=t.options.appId;if(!r)throw gn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Wt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw gn.create("no-api-key");if(Xo[r]!=null)throw gn.create("already-exists",{id:r});if(!jR){uz(cv);let{wrappedGtag:s,gtagCore:o}=fz(Xo,LR,VR,cv,Az);gv=s,UR=o,jR=!0}return Xo[r]=Sz(t,LR,VR,e,UR,cv,n),new fv(t)}function GR(t=ut()){t=_e(t);let e=ct(t,mf);return e.isInitialized()?e.getImmediate():WR(t)}function WR(t,e={}){let n=ct(t,mf);if(n.isInitialized()){let i=n.getImmediate();if(dc(e,n.getOptions()))return i;throw gn.create("already-initialized")}return n.initialize({options:e})}function KR(){return y(this,null,function*(){if(ac()||!cc()||!Sr())return!1;try{return yield Hi()}catch{return!1}})}function QR(t,e,n){t=_e(t),Tz(gv,Xo[t.app.options.appId],e,n).catch(r=>Wt.error(r))}function mv(t,e,n,r){t=_e(t),Ez(gv,Xo[t.app.options.appId],e,n,r).catch(i=>Wt.error(i))}var BR="@firebase/analytics",$R="0.10.8";function xz(){rt(new nt(mf,(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return Nz(r,i,n)},"PUBLIC")),rt(new nt("analytics-internal",t,"PRIVATE")),q(BR,$R),q(BR,$R,"esm2017");function t(e){try{let n=e.getProvider(mf).getImmediate();return{logEvent:(r,i,s)=>mv(n,r,i,s)}}catch(n){throw gn.create("interop-component-reg-failed",{reason:n})}}}xz();var Ts=class{constructor(e){return e}},JR="analytics",yv=class{constructor(){return at(JR)}};var vv="__angularfire_symbol__analyticsIsSupportedValue",XR="__angularfire_symbol__analyticsIsSupported";globalThis[XR]||=KR().then(t=>globalThis[vv]=t).catch(()=>globalThis[vv]=!1);var _f={async:()=>globalThis[XR],sync:()=>{let t=globalThis[vv];if(t===void 0)throw new Error(Yo("Analytics"));return t}},eN=_f.async,tN=Ce(GR,!0);var Pz=Ce(mv,!0);var Mz=Ce(QR,!0);var wv=(()=>{class t{initialized;disposables=[];constructor(n,r,i){q("angularfire",He.full,"user-tracking");let s;this.initialized=r.runOutsideAngular(()=>new Promise(o=>{s=o})),eN().then(()=>{let o=i.get(Ts);o?this.disposables=[OR(n).subscribe(a=>{Mz(o,a?.uid),s()})]:s()})}ngOnDestroy(){this.disposables.forEach(n=>n.unsubscribe())}static \u0275fac=function(r){return new(r||t)(J(Es),J(Z),J(ve))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),kz="firebase_event_origin",Oz="firebase_previous_class",Fz="firebase_previous_id",Lz="firebase_previous_screen",Vz="firebase_screen_class",YR="firebase_screen_id",Uz="firebase_screen",Iv="outlet",jz="page_path",Bz="page_title",_u="screen_class",ZR="screen_name",$z="screen_view",Hz="auto",qz="#",zz=Math.floor(Math.random()*(2**32-1))-2**31,_v={},Gz=t=>{let e=[t[_u],t[Iv]].join(qz);if(_v.hasOwnProperty(e))return _v[e];{let n=zz++;return _v[e]=n,n}},Wz=(t,e,n)=>t.events.pipe(Ht(i=>i instanceof nu)).pipe(Jt(i=>{let o=t.parseUrl(t.url.replace(/(?:\().+(?:\))/g,g=>g.replace("://",":///"))).root.children[i.snapshot.outlet]?.toString()||"",a=t.routerState.root.children.map(g=>g).find(g=>g.outlet===i.snapshot.outlet);if(!a)return K(null);let c=a;for(;c.firstChild;)c=c.firstChild;let l=c.pathFromRoot.map(g=>g.routeConfig?.path).filter(g=>g).join("/")||"/",d={[ZR]:l,[jz]:`/${o}`,[kz]:Hz,[Uz]:l,[Iv]:i.snapshot.outlet};e&&(d[Bz]=e.getTitle());let f=a.component;if(f){if(f===Ey){let g=i.snapshot;for(;g.firstChild;)g=g.firstChild;f=g.component}}else f=i.snapshot.component;if(typeof f=="string")return K(xe(V({},d),{[_u]:f}));if(f){let g=n.resolveComponentFactory(f);return K(xe(V({},d),{[_u]:g.selector}))}return K(null)}),Ht(i=>!!i),Q(i=>V({[Vz]:i[_u],[YR]:Gz(i)},i)),Ug(i=>i[Iv]),st(i=>i.pipe(ld((s,o)=>JSON.stringify(s)===JSON.stringify(o)),go(void 0),hd(),Q(([s,o])=>s?V({[Oz]:s[_u],[Lz]:s[ZR],[Fz]:s[YR]},o):o)))),nN=(()=>{class t{disposable;constructor(n,r,i,s,o,a){q("angularfire",He.full,"screen-tracking"),eN().then(()=>{let c=a.get(Ts);!n||!c||s.runOutsideAngular(()=>{this.disposable=Wz(n,r,i).pipe(Jt(l=>y(this,null,function*(){return o&&(yield o.initialized),Pz(c,$z,l)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(r){return new(r||t)(J(Wh,8),J(Nh,8),J(yi),J(Z),J(wv,8),J(ve))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),Ev=new U("angularfire2.analytics-instances");function Kz(t,e){if(!_f.sync())return null;let n=ht(JR,t,e);return n&&new Ts(n)}function Qz(t){return(e,n)=>{if(!_f.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new Ts(r)}}var Yz={provide:yv,deps:[[new te,Ev]]},Zz={provide:Ts,useFactory:Kz,deps:[[new te,Ev],qe]};function rN(t,...e){return q("angularfire",He.full,"analytics"),Ue([Zz,Yz,{provide:Ci,useValue:_f.async,multi:!0},{provide:Ev,useFactory:Qz(t),multi:!0,deps:[Z,ve,et,Ke,...e]}])}var iN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sN={};var Ni,Tv;(function(){var t;function e(T,v){function I(){}I.prototype=v.prototype,T.D=v.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(C,b,S){for(var w=Array(arguments.length-2),Cr=2;Cr<arguments.length;Cr++)w[Cr-2]=arguments[Cr];return v.prototype[b].apply(C,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,I){I||(I=0);var C=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)C[b]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(b=0;16>b;++b)C[b]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=T.g[0],I=T.g[1],b=T.g[2];var S=T.g[3],w=v+(S^I&(b^S))+C[0]+3614090360&4294967295;v=I+(w<<7&4294967295|w>>>25),w=S+(b^v&(I^b))+C[1]+3905402710&4294967295,S=v+(w<<12&4294967295|w>>>20),w=b+(I^S&(v^I))+C[2]+606105819&4294967295,b=S+(w<<17&4294967295|w>>>15),w=I+(v^b&(S^v))+C[3]+3250441966&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(S^I&(b^S))+C[4]+4118548399&4294967295,v=I+(w<<7&4294967295|w>>>25),w=S+(b^v&(I^b))+C[5]+1200080426&4294967295,S=v+(w<<12&4294967295|w>>>20),w=b+(I^S&(v^I))+C[6]+2821735955&4294967295,b=S+(w<<17&4294967295|w>>>15),w=I+(v^b&(S^v))+C[7]+4249261313&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(S^I&(b^S))+C[8]+1770035416&4294967295,v=I+(w<<7&4294967295|w>>>25),w=S+(b^v&(I^b))+C[9]+2336552879&4294967295,S=v+(w<<12&4294967295|w>>>20),w=b+(I^S&(v^I))+C[10]+4294925233&4294967295,b=S+(w<<17&4294967295|w>>>15),w=I+(v^b&(S^v))+C[11]+2304563134&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(S^I&(b^S))+C[12]+1804603682&4294967295,v=I+(w<<7&4294967295|w>>>25),w=S+(b^v&(I^b))+C[13]+4254626195&4294967295,S=v+(w<<12&4294967295|w>>>20),w=b+(I^S&(v^I))+C[14]+2792965006&4294967295,b=S+(w<<17&4294967295|w>>>15),w=I+(v^b&(S^v))+C[15]+1236535329&4294967295,I=b+(w<<22&4294967295|w>>>10),w=v+(b^S&(I^b))+C[1]+4129170786&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^b&(v^I))+C[6]+3225465664&4294967295,S=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(S^v))+C[11]+643717713&4294967295,b=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(b^S))+C[0]+3921069994&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^S&(I^b))+C[5]+3593408605&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^b&(v^I))+C[10]+38016083&4294967295,S=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(S^v))+C[15]+3634488961&4294967295,b=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(b^S))+C[4]+3889429448&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^S&(I^b))+C[9]+568446438&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^b&(v^I))+C[14]+3275163606&4294967295,S=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(S^v))+C[3]+4107603335&4294967295,b=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(b^S))+C[8]+1163531501&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(b^S&(I^b))+C[13]+2850285829&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^b&(v^I))+C[2]+4243563512&4294967295,S=v+(w<<9&4294967295|w>>>23),w=b+(v^I&(S^v))+C[7]+1735328473&4294967295,b=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(b^S))+C[12]+2368359562&4294967295,I=b+(w<<20&4294967295|w>>>12),w=v+(I^b^S)+C[5]+4294588738&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^b)+C[8]+2272392833&4294967295,S=v+(w<<11&4294967295|w>>>21),w=b+(S^v^I)+C[11]+1839030562&4294967295,b=S+(w<<16&4294967295|w>>>16),w=I+(b^S^v)+C[14]+4259657740&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^S)+C[1]+2763975236&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^b)+C[4]+1272893353&4294967295,S=v+(w<<11&4294967295|w>>>21),w=b+(S^v^I)+C[7]+4139469664&4294967295,b=S+(w<<16&4294967295|w>>>16),w=I+(b^S^v)+C[10]+3200236656&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^S)+C[13]+681279174&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^b)+C[0]+3936430074&4294967295,S=v+(w<<11&4294967295|w>>>21),w=b+(S^v^I)+C[3]+3572445317&4294967295,b=S+(w<<16&4294967295|w>>>16),w=I+(b^S^v)+C[6]+76029189&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(I^b^S)+C[9]+3654602809&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^b)+C[12]+3873151461&4294967295,S=v+(w<<11&4294967295|w>>>21),w=b+(S^v^I)+C[15]+530742520&4294967295,b=S+(w<<16&4294967295|w>>>16),w=I+(b^S^v)+C[2]+3299628645&4294967295,I=b+(w<<23&4294967295|w>>>9),w=v+(b^(I|~S))+C[0]+4096336452&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~b))+C[7]+1126891415&4294967295,S=v+(w<<10&4294967295|w>>>22),w=b+(v^(S|~I))+C[14]+2878612391&4294967295,b=S+(w<<15&4294967295|w>>>17),w=I+(S^(b|~v))+C[5]+4237533241&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~S))+C[12]+1700485571&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~b))+C[3]+2399980690&4294967295,S=v+(w<<10&4294967295|w>>>22),w=b+(v^(S|~I))+C[10]+4293915773&4294967295,b=S+(w<<15&4294967295|w>>>17),w=I+(S^(b|~v))+C[1]+2240044497&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~S))+C[8]+1873313359&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~b))+C[15]+4264355552&4294967295,S=v+(w<<10&4294967295|w>>>22),w=b+(v^(S|~I))+C[6]+2734768916&4294967295,b=S+(w<<15&4294967295|w>>>17),w=I+(S^(b|~v))+C[13]+1309151649&4294967295,I=b+(w<<21&4294967295|w>>>11),w=v+(b^(I|~S))+C[4]+4149444226&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~b))+C[11]+3174756917&4294967295,S=v+(w<<10&4294967295|w>>>22),w=b+(v^(S|~I))+C[2]+718787259&4294967295,b=S+(w<<15&4294967295|w>>>17),w=I+(S^(b|~v))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(b+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+S&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var I=v-this.blockSize,C=this.B,b=this.h,S=0;S<v;){if(b==0)for(;S<=I;)i(this,T,S),S+=this.blockSize;if(typeof T=="string"){for(;S<v;)if(C[b++]=T.charCodeAt(S++),b==this.blockSize){i(this,C),b=0;break}}else for(;S<v;)if(C[b++]=T[S++],b==this.blockSize){i(this,C),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var I=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=I&255,I/=256;for(this.u(T),T=Array(16),v=I=0;4>v;++v)for(var C=0;32>C;C+=8)T[I++]=this.g[v]>>>C&255;return T};function s(T,v){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=v(T)}function o(T,v){this.h=v;for(var I=[],C=!0,b=T.length-1;0<=b;b--){var S=T[b]|0;C&&S==v||(I[b]=S,C=!1)}this.g=I}var a={};function c(T){return-128<=T&&128>T?s(T,function(v){return new o([v|0],0>v?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return A(l(-T));for(var v=[],I=1,C=0;T>=I;C++)v[C]=T/I|0,I*=4294967296;return new o(v,0)}function d(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return A(d(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),C=f,b=0;b<T.length;b+=8){var S=Math.min(8,T.length-b),w=parseInt(T.substring(b,b+S),v);8>S?(S=l(Math.pow(v,S)),C=C.j(S).add(l(w))):(C=C.j(I),C=C.add(l(w)))}return C}var f=c(0),g=c(1),_=c(16777216);t=o.prototype,t.m=function(){if(R(this))return-A(this).m();for(var T=0,v=1,I=0;I<this.g.length;I++){var C=this.i(I);T+=(0<=C?C:4294967296+C)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(E(this))return"0";if(R(this))return"-"+A(this).toString(T);for(var v=l(Math.pow(T,6)),I=this,C="";;){var b=G(I,v).g;I=M(I,b.j(v));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=b,E(I))return S+C;for(;6>S.length;)S="0"+S;C=S+C}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function E(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function R(T){return T.h==-1}t.l=function(T){return T=M(this,T),R(T)?-1:E(T)?0:1};function A(T){for(var v=T.g.length,I=[],C=0;C<v;C++)I[C]=~T.g[C];return new o(I,~T.h).add(g)}t.abs=function(){return R(this)?A(this):this},t.add=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],C=0,b=0;b<=v;b++){var S=C+(this.i(b)&65535)+(T.i(b)&65535),w=(S>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);C=w>>>16,S&=65535,w&=65535,I[b]=w<<16|S}return new o(I,I[I.length-1]&-2147483648?-1:0)};function M(T,v){return T.add(A(v))}t.j=function(T){if(E(this)||E(T))return f;if(R(this))return R(T)?A(this).j(A(T)):A(A(this).j(T));if(R(T))return A(this.j(A(T)));if(0>this.l(_)&&0>T.l(_))return l(this.m()*T.m());for(var v=this.g.length+T.g.length,I=[],C=0;C<2*v;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(var b=0;b<T.g.length;b++){var S=this.i(C)>>>16,w=this.i(C)&65535,Cr=T.i(b)>>>16,Ba=T.i(b)&65535;I[2*C+2*b]+=w*Ba,L(I,2*C+2*b),I[2*C+2*b+1]+=S*Ba,L(I,2*C+2*b+1),I[2*C+2*b+1]+=w*Cr,L(I,2*C+2*b+1),I[2*C+2*b+2]+=S*Cr,L(I,2*C+2*b+2)}for(C=0;C<v;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=v;C<2*v;C++)I[C]=0;return new o(I,0)};function L(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function $(T,v){this.g=T,this.h=v}function G(T,v){if(E(v))throw Error("division by zero");if(E(T))return new $(f,f);if(R(T))return v=G(A(T),v),new $(A(v.g),A(v.h));if(R(v))return v=G(T,A(v)),new $(A(v.g),v.h);if(30<T.g.length){if(R(T)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,C=v;0>=C.l(T);)I=ke(I),C=ke(C);var b=Y(I,1),S=Y(C,1);for(C=Y(C,2),I=Y(I,2);!E(C);){var w=S.add(C);0>=w.l(T)&&(b=b.add(I),S=w),C=Y(C,1),I=Y(I,1)}return v=M(T,b.j(v)),new $(b,v)}for(b=f;0<=T.l(v);){for(I=Math.max(1,Math.floor(T.m()/v.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),S=l(I),w=S.j(v);R(w)||0<w.l(T);)I-=C,S=l(I),w=S.j(v);E(S)&&(S=g),b=b.add(S),T=M(T,w)}return new $(b,T)}t.A=function(T){return G(this,T).h},t.and=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],C=0;C<v;C++)I[C]=this.i(C)&T.i(C);return new o(I,this.h&T.h)},t.or=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],C=0;C<v;C++)I[C]=this.i(C)|T.i(C);return new o(I,this.h|T.h)},t.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],C=0;C<v;C++)I[C]=this.i(C)^T.i(C);return new o(I,this.h^T.h)};function ke(T){for(var v=T.g.length+1,I=[],C=0;C<v;C++)I[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(I,T.h)}function Y(T,v){var I=v>>5;v%=32;for(var C=T.g.length-I,b=[],S=0;S<C;S++)b[S]=0<v?T.i(S+I)>>>v|T.i(S+I+1)<<32-v:T.i(S+I);return new o(b,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Tv=sN.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,Ni=sN.Integer=o}).apply(typeof iN<"u"?iN:typeof self<"u"?self:typeof window<"u"?window:{});var yf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zr={};var Cv,Jz,ea,bv,yu,vf,Dv,Sv,Av;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof yf=="object"&&yf];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var m=0;m<u.length-1;m++){var D=u[m];if(!(D in p))break e;p=p[D]}u=u[u.length-1],m=p[u],h=h(m),h!=m&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function s(u,h){u instanceof String&&(u+="");var p=0,m=!1,D={next:function(){if(!m&&p<u.length){var N=p++;return{value:h(N,u[N]),done:!1}}return m=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(u){return u||function(){return s(this,function(h,p){return p})}});var o=o||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,m),u.apply(h,D)}}return function(){return u.apply(h,arguments)}}function g(u,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function _(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),u.apply(this,m)}}function E(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(m,D,N){for(var O=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)O[Oe-2]=arguments[Oe];return h.prototype[D].apply(m,O)}}function R(u){let h=u.length;if(0<h){let p=Array(h);for(let m=0;m<h;m++)p[m]=u[m];return p}return[]}function A(u,h){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(c(m)){let D=u.length||0,N=m.length||0;u.length=D+N;for(let O=0;O<N;O++)u[D+O]=m[O]}else u.push(m)}}class M{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function L(u){return/^[\s\xa0]*$/.test(u)}function $(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function G(u){return G[" "](u),u}G[" "]=function(){};var ke=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function Y(u,h,p){for(let m in u)h.call(p,u[m],m,u)}function T(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function v(u){let h={};for(let p in u)h[p]=u[p];return h}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,h){let p,m;for(let D=1;D<arguments.length;D++){m=arguments[D];for(p in m)u[p]=m[p];for(let N=0;N<I.length;N++)p=I[N],Object.prototype.hasOwnProperty.call(m,p)&&(u[p]=m[p])}}function b(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function S(u){a.setTimeout(()=>{throw u},0)}function w(){var u=Gp;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class Cr{constructor(){this.h=this.g=null}add(h,p){let m=Ba.get();m.set(h,p),this.h?this.h.next=m:this.g=m,this.h=m}}var Ba=new M(()=>new SO,u=>u.reset());class SO{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let $a,Ha=!1,Gp=new Cr,LT=()=>{let u=a.Promise.resolve(void 0);$a=()=>{u.then(AO)}};var AO=()=>{for(var u;u=w();){try{u.h.call(u.g)}catch(p){S(p)}var h=Ba;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}Ha=!1};function ni(){this.s=this.s,this.C=this.C}ni.prototype.s=!1,ni.prototype.ma=function(){this.s||(this.s=!0,this.N())},ni.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function bt(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}bt.prototype.h=function(){this.defaultPrevented=!0};var RO=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function qa(u,h){if(bt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,m=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(ke){e:{try{G(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:NO[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&qa.aa.h.call(this)}}E(qa,bt);var NO={2:"touch",3:"pen",4:"mouse"};qa.prototype.h=function(){qa.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var za="closure_listenable_"+(1e6*Math.random()|0),xO=0;function PO(u,h,p,m,D){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!m,this.ha=D,this.key=++xO,this.da=this.fa=!1}function gl(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ml(u){this.src=u,this.g={},this.h=0}ml.prototype.add=function(u,h,p,m,D){var N=u.toString();u=this.g[N],u||(u=this.g[N]=[],this.h++);var O=Kp(u,h,m,D);return-1<O?(h=u[O],p||(h.fa=!1)):(h=new PO(h,this.src,N,!!m,D),h.fa=p,u.push(h)),h};function Wp(u,h){var p=h.type;if(p in u.g){var m=u.g[p],D=Array.prototype.indexOf.call(m,h,void 0),N;(N=0<=D)&&Array.prototype.splice.call(m,D,1),N&&(gl(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function Kp(u,h,p,m){for(var D=0;D<u.length;++D){var N=u[D];if(!N.da&&N.listener==h&&N.capture==!!p&&N.ha==m)return D}return-1}var Qp="closure_lm_"+(1e6*Math.random()|0),Yp={};function VT(u,h,p,m,D){if(m&&m.once)return jT(u,h,p,m,D);if(Array.isArray(h)){for(var N=0;N<h.length;N++)VT(u,h[N],p,m,D);return null}return p=eg(p),u&&u[za]?u.K(h,p,l(m)?!!m.capture:!!m,D):UT(u,h,p,!1,m,D)}function UT(u,h,p,m,D,N){if(!h)throw Error("Invalid event type");var O=l(D)?!!D.capture:!!D,Oe=Jp(u);if(Oe||(u[Qp]=Oe=new ml(u)),p=Oe.add(h,p,m,O,N),p.proxy)return p;if(m=MO(),p.proxy=m,m.src=u,m.listener=p,u.addEventListener)RO||(D=O),D===void 0&&(D=!1),u.addEventListener(h.toString(),m,D);else if(u.attachEvent)u.attachEvent($T(h.toString()),m);else if(u.addListener&&u.removeListener)u.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function MO(){function u(p){return h.call(u.src,u.listener,p)}let h=kO;return u}function jT(u,h,p,m,D){if(Array.isArray(h)){for(var N=0;N<h.length;N++)jT(u,h[N],p,m,D);return null}return p=eg(p),u&&u[za]?u.L(h,p,l(m)?!!m.capture:!!m,D):UT(u,h,p,!0,m,D)}function BT(u,h,p,m,D){if(Array.isArray(h))for(var N=0;N<h.length;N++)BT(u,h[N],p,m,D);else m=l(m)?!!m.capture:!!m,p=eg(p),u&&u[za]?(u=u.i,h=String(h).toString(),h in u.g&&(N=u.g[h],p=Kp(N,p,m,D),-1<p&&(gl(N[p]),Array.prototype.splice.call(N,p,1),N.length==0&&(delete u.g[h],u.h--)))):u&&(u=Jp(u))&&(h=u.g[h.toString()],u=-1,h&&(u=Kp(h,p,m,D)),(p=-1<u?h[u]:null)&&Zp(p))}function Zp(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[za])Wp(h.i,u);else{var p=u.type,m=u.proxy;h.removeEventListener?h.removeEventListener(p,m,u.capture):h.detachEvent?h.detachEvent($T(p),m):h.addListener&&h.removeListener&&h.removeListener(m),(p=Jp(h))?(Wp(p,u),p.h==0&&(p.src=null,h[Qp]=null)):gl(u)}}}function $T(u){return u in Yp?Yp[u]:Yp[u]="on"+u}function kO(u,h){if(u.da)u=!0;else{h=new qa(h,this);var p=u.listener,m=u.ha||u.src;u.fa&&Zp(u),u=p.call(m,h)}return u}function Jp(u){return u=u[Qp],u instanceof ml?u:null}var Xp="__closure_events_fn_"+(1e9*Math.random()>>>0);function eg(u){return typeof u=="function"?u:(u[Xp]||(u[Xp]=function(h){return u.handleEvent(h)}),u[Xp])}function Dt(){ni.call(this),this.i=new ml(this),this.M=this,this.F=null}E(Dt,ni),Dt.prototype[za]=!0,Dt.prototype.removeEventListener=function(u,h,p,m){BT(this,u,h,p,m)};function jt(u,h){var p,m=u.F;if(m)for(p=[];m;m=m.F)p.push(m);if(u=u.M,m=h.type||h,typeof h=="string")h=new bt(h,u);else if(h instanceof bt)h.target=h.target||u;else{var D=h;h=new bt(m,u),C(h,D)}if(D=!0,p)for(var N=p.length-1;0<=N;N--){var O=h.g=p[N];D=_l(O,m,!0,h)&&D}if(O=h.g=u,D=_l(O,m,!0,h)&&D,D=_l(O,m,!1,h)&&D,p)for(N=0;N<p.length;N++)O=h.g=p[N],D=_l(O,m,!1,h)&&D}Dt.prototype.N=function(){if(Dt.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],m=0;m<p.length;m++)gl(p[m]);delete u.g[h],u.h--}}this.F=null},Dt.prototype.K=function(u,h,p,m){return this.i.add(String(u),h,!1,p,m)},Dt.prototype.L=function(u,h,p,m){return this.i.add(String(u),h,!0,p,m)};function _l(u,h,p,m){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,N=0;N<h.length;++N){var O=h[N];if(O&&!O.da&&O.capture==p){var Oe=O.listener,Et=O.ha||O.src;O.fa&&Wp(u.i,O),D=Oe.call(Et,m)!==!1&&D}}return D&&!m.defaultPrevented}function HT(u,h,p){if(typeof u=="function")p&&(u=g(u,p));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function qT(u){u.g=HT(()=>{u.g=null,u.i&&(u.i=!1,qT(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class OO extends ni{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:qT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ga(u){ni.call(this),this.h=u,this.g={}}E(Ga,ni);var zT=[];function GT(u){Y(u.g,function(h,p){this.g.hasOwnProperty(p)&&Zp(h)},u),u.g={}}Ga.prototype.N=function(){Ga.aa.N.call(this),GT(this)},Ga.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tg=a.JSON.stringify,FO=a.JSON.parse,LO=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function ng(){}ng.prototype.h=null;function WT(u){return u.h||(u.h=u.i())}function KT(){}var Wa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rg(){bt.call(this,"d")}E(rg,bt);function ig(){bt.call(this,"c")}E(ig,bt);var Ui={},QT=null;function yl(){return QT=QT||new Dt}Ui.La="serverreachability";function YT(u){bt.call(this,Ui.La,u)}E(YT,bt);function Ka(u){let h=yl();jt(h,new YT(h))}Ui.STAT_EVENT="statevent";function ZT(u,h){bt.call(this,Ui.STAT_EVENT,u),this.stat=h}E(ZT,bt);function Bt(u){let h=yl();jt(h,new ZT(h,u))}Ui.Ma="timingevent";function JT(u,h){bt.call(this,Ui.Ma,u),this.size=h}E(JT,bt);function Qa(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function Ya(){this.g=!0}Ya.prototype.xa=function(){this.g=!1};function VO(u,h,p,m,D,N){u.info(function(){if(u.g)if(N)for(var O="",Oe=N.split("&"),Et=0;Et<Oe.length;Et++){var be=Oe[Et].split("=");if(1<be.length){var St=be[0];be=be[1];var At=St.split("_");O=2<=At.length&&At[1]=="type"?O+(St+"="+be+"&"):O+(St+"=redacted&")}}else O=null;else O=N;return"XMLHTTP REQ ("+m+") [attempt "+D+"]: "+h+`
`+p+`
`+O})}function UO(u,h,p,m,D,N,O){u.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+D+"]: "+h+`
`+p+`
`+N+" "+O})}function Ws(u,h,p,m){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+BO(u,p)+(m?" "+m:"")})}function jO(u,h){u.info(function(){return"TIMEOUT: "+h})}Ya.prototype.info=function(){};function BO(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var m=p[u];if(!(2>m.length)){var D=m[1];if(Array.isArray(D)&&!(1>D.length)){var N=D[0];if(N!="noop"&&N!="stop"&&N!="close")for(var O=1;O<D.length;O++)D[O]=""}}}}return tg(p)}catch{return h}}var vl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},XT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},sg;function Il(){}E(Il,ng),Il.prototype.g=function(){return new XMLHttpRequest},Il.prototype.i=function(){return{}},sg=new Il;function ri(u,h,p,m){this.j=u,this.i=h,this.l=p,this.R=m||1,this.U=new Ga(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new eC}function eC(){this.i=null,this.g="",this.h=!1}var tC={},og={};function ag(u,h,p){u.L=1,u.v=Cl(br(h)),u.m=p,u.P=!0,nC(u,null)}function nC(u,h){u.F=Date.now(),wl(u),u.A=br(u.v);var p=u.A,m=u.R;Array.isArray(m)||(m=[String(m)]),mC(p.i,"t",m),u.C=0,p=u.j.J,u.h=new eC,u.g=kC(u.j,p?h:null,!u.m),0<u.O&&(u.M=new OO(g(u.Y,u,u.g),u.O)),h=u.U,p=u.g,m=u.ca;var D="readystatechange";Array.isArray(D)||(D&&(zT[0]=D.toString()),D=zT);for(var N=0;N<D.length;N++){var O=VT(p,D[N],m||h.handleEvent,!1,h.h||h);if(!O)break;h.g[O.key]=O}h=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),Ka(),VO(u.i,u.u,u.A,u.l,u.R,u.m)}ri.prototype.ca=function(u){u=u.target;let h=this.M;h&&Dr(u)==3?h.j():this.Y(u)},ri.prototype.Y=function(u){try{if(u==this.g)e:{let At=Dr(this.g);var h=this.g.Ba();let Ys=this.g.Z();if(!(3>At)&&(At!=3||this.g&&(this.h.h||this.g.oa()||TC(this.g)))){this.J||At!=4||h==7||(h==8||0>=Ys?Ka(3):Ka(2)),cg(this);var p=this.g.Z();this.X=p;t:if(rC(this)){var m=TC(this.g);u="";var D=m.length,N=Dr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ji(this),Za(this);var O="";break t}this.h.i=new a.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,u+=this.h.i.decode(m[h],{stream:!(N&&h==D-1)});m.length=0,this.h.g+=u,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=p==200,UO(this.i,this.u,this.A,this.l,this.R,At,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,Et=this.g;if((Oe=Et.g?Et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(Oe)){var be=Oe;break t}}be=null}if(p=be)Ws(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ug(this,p);else{this.o=!1,this.s=3,Bt(12),ji(this),Za(this);break e}}if(this.P){p=!0;let On;for(;!this.J&&this.C<O.length;)if(On=$O(this,O),On==og){At==4&&(this.s=4,Bt(14),p=!1),Ws(this.i,this.l,null,"[Incomplete Response]");break}else if(On==tC){this.s=4,Bt(15),Ws(this.i,this.l,O,"[Invalid Chunk]"),p=!1;break}else Ws(this.i,this.l,On,null),ug(this,On);if(rC(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),At!=4||O.length!=0||this.h.h||(this.s=1,Bt(16),p=!1),this.o=this.o&&p,!p)Ws(this.i,this.l,O,"[Invalid Chunked Response]"),ji(this),Za(this);else if(0<O.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),gg(St),St.M=!0,Bt(11))}}else Ws(this.i,this.l,O,null),ug(this,O);At==4&&ji(this),this.o&&!this.J&&(At==4?NC(this.j,this):(this.o=!1,wl(this)))}else s1(this.g),p==400&&0<O.indexOf("Unknown SID")?(this.s=3,Bt(12)):(this.s=0,Bt(13)),ji(this),Za(this)}}}catch{}finally{}};function rC(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function $O(u,h){var p=u.C,m=h.indexOf(`
`,p);return m==-1?og:(p=Number(h.substring(p,m)),isNaN(p)?tC:(m+=1,m+p>h.length?og:(h=h.slice(m,m+p),u.C=m+p,h)))}ri.prototype.cancel=function(){this.J=!0,ji(this)};function wl(u){u.S=Date.now()+u.I,iC(u,u.I)}function iC(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Qa(g(u.ba,u),h)}function cg(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ri.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(jO(this.i,this.A),this.L!=2&&(Ka(),Bt(17)),ji(this),this.s=2,Za(this)):iC(this,this.S-u)};function Za(u){u.j.G==0||u.J||NC(u.j,u)}function ji(u){cg(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,GT(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function ug(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||lg(p.h,u))){if(!u.K&&lg(p.h,u)&&p.G==3){try{var m=p.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var D=m;if(D[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)Rl(p),Sl(p);else break e;pg(p),Bt(18)}}else p.za=D[1],0<p.za-p.T&&37500>D[2]&&p.F&&p.v==0&&!p.C&&(p.C=Qa(g(p.Za,p),6e3));if(1>=aC(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else $i(p,11)}else if((u.K||p.g==u)&&Rl(p),!L(h))for(D=p.Da.g.parse(h),h=0;h<D.length;h++){let be=D[h];if(p.T=be[0],be=be[1],p.G==2)if(be[0]=="c"){p.K=be[1],p.ia=be[2];let St=be[3];St!=null&&(p.la=St,p.j.info("VER="+p.la));let At=be[4];At!=null&&(p.Aa=At,p.j.info("SVER="+p.Aa));let Ys=be[5];Ys!=null&&typeof Ys=="number"&&0<Ys&&(m=1.5*Ys,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let On=u.g;if(On){let xl=On.g?On.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xl){var N=m.h;N.g||xl.indexOf("spdy")==-1&&xl.indexOf("quic")==-1&&xl.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(dg(N,N.h),N.h=null))}if(m.D){let mg=On.g?On.g.getResponseHeader("X-HTTP-Session-Id"):null;mg&&(m.ya=mg,$e(m.I,m.D,mg))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var O=u;if(m.qa=MC(m,m.J?m.ia:null,m.W),O.K){cC(m.h,O);var Oe=O,Et=m.L;Et&&(Oe.I=Et),Oe.B&&(cg(Oe),wl(Oe)),m.g=O}else AC(m);0<p.i.length&&Al(p)}else be[0]!="stop"&&be[0]!="close"||$i(p,7);else p.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?$i(p,7):fg(p):be[0]!="noop"&&p.l&&p.l.ta(be),p.v=0)}}Ka(4)}catch{}}var HO=class{constructor(u,h){this.g=u,this.map=h}};function sC(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function oC(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function aC(u){return u.h?1:u.g?u.g.size:0}function lg(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function dg(u,h){u.g?u.g.add(h):u.h=h}function cC(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}sC.prototype.cancel=function(){if(this.i=uC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function uC(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return R(u.i)}function qO(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,m=0;m<p;m++)h.push(u[m]);return h}h=[],p=0;for(m in u)h[p++]=u[m];return h}function zO(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let m in u)h[p++]=m;return h}}}function lC(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=zO(u),m=qO(u),D=m.length,N=0;N<D;N++)h.call(void 0,m[N],p&&p[N],u)}var dC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function GO(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var m=u[p].indexOf("="),D=null;if(0<=m){var N=u[p].substring(0,m);D=u[p].substring(m+1)}else N=u[p];h(N,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Bi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Bi){this.h=u.h,El(this,u.j),this.o=u.o,this.g=u.g,Tl(this,u.s),this.l=u.l;var h=u.i,p=new ec;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),hC(this,p),this.m=u.m}else u&&(h=String(u).match(dC))?(this.h=!1,El(this,h[1]||"",!0),this.o=Ja(h[2]||""),this.g=Ja(h[3]||"",!0),Tl(this,h[4]),this.l=Ja(h[5]||"",!0),hC(this,h[6]||"",!0),this.m=Ja(h[7]||"")):(this.h=!1,this.i=new ec(null,this.h))}Bi.prototype.toString=function(){var u=[],h=this.j;h&&u.push(Xa(h,fC,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(Xa(h,fC,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(Xa(p,p.charAt(0)=="/"?QO:KO,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",Xa(p,ZO)),u.join("")};function br(u){return new Bi(u)}function El(u,h,p){u.j=p?Ja(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function Tl(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function hC(u,h,p){h instanceof ec?(u.i=h,JO(u.i,u.h)):(p||(h=Xa(h,YO)),u.i=new ec(h,u.h))}function $e(u,h,p){u.i.set(h,p)}function Cl(u){return $e(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ja(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Xa(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,WO),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function WO(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var fC=/[#\/\?@]/g,KO=/[#\?:]/g,QO=/[#\?]/g,YO=/[#\?@]/g,ZO=/#/g;function ec(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function ii(u){u.g||(u.g=new Map,u.h=0,u.i&&GO(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=ec.prototype,t.add=function(u,h){ii(this),this.i=null,u=Ks(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function pC(u,h){ii(u),h=Ks(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function gC(u,h){return ii(u),h=Ks(u,h),u.g.has(h)}t.forEach=function(u,h){ii(this),this.g.forEach(function(p,m){p.forEach(function(D){u.call(h,D,m,this)},this)},this)},t.na=function(){ii(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let m=0;m<h.length;m++){let D=u[m];for(let N=0;N<D.length;N++)p.push(h[m])}return p},t.V=function(u){ii(this);let h=[];if(typeof u=="string")gC(this,u)&&(h=h.concat(this.g.get(Ks(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},t.set=function(u,h){return ii(this),this.i=null,u=Ks(this,u),gC(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},t.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function mC(u,h,p){pC(u,h),0<p.length&&(u.i=null,u.g.set(Ks(u,h),R(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var m=h[p];let N=encodeURIComponent(String(m)),O=this.V(m);for(m=0;m<O.length;m++){var D=N;O[m]!==""&&(D+="="+encodeURIComponent(String(O[m]))),u.push(D)}}return this.i=u.join("&")};function Ks(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function JO(u,h){h&&!u.j&&(ii(u),u.i=null,u.g.forEach(function(p,m){var D=m.toLowerCase();m!=D&&(pC(this,m),mC(this,D,p))},u)),u.j=h}function XO(u,h){let p=new Ya;if(a.Image){let m=new Image;m.onload=_(si,p,"TestLoadImage: loaded",!0,h,m),m.onerror=_(si,p,"TestLoadImage: error",!1,h,m),m.onabort=_(si,p,"TestLoadImage: abort",!1,h,m),m.ontimeout=_(si,p,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=u}else h(!1)}function e1(u,h){let p=new Ya,m=new AbortController,D=setTimeout(()=>{m.abort(),si(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:m.signal}).then(N=>{clearTimeout(D),N.ok?si(p,"TestPingServer: ok",!0,h):si(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),si(p,"TestPingServer: error",!1,h)})}function si(u,h,p,m,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),m(p)}catch{}}function t1(){this.g=new LO}function n1(u,h,p){let m=p||"";try{lC(u,function(D,N){let O=D;l(D)&&(O=tg(D)),h.push(m+N+"="+encodeURIComponent(O))})}catch(D){throw h.push(m+"type="+encodeURIComponent("_badmap")),D}}function tc(u){this.l=u.Ub||null,this.j=u.eb||!1}E(tc,ng),tc.prototype.g=function(){return new bl(this.l,this.j)},tc.prototype.i=function(u){return function(){return u}}({});function bl(u,h){Dt.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(bl,Dt),t=bl.prototype,t.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,rc(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,nc(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,rc(this)),this.g&&(this.readyState=3,rc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_C(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function _C(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?nc(this):rc(this),this.readyState==3&&_C(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,nc(this))},t.Qa=function(u){this.g&&(this.response=u,nc(this))},t.ga=function(){this.g&&nc(this)};function nc(u){u.readyState=4,u.l=null,u.j=null,u.v=null,rc(u)}t.setRequestHeader=function(u,h){this.u.append(u,h)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function rc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(bl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function yC(u){let h="";return Y(u,function(p,m){h+=m,h+=":",h+=p,h+=`\r
`}),h}function hg(u,h,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=yC(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):$e(u,h,p))}function Ze(u){Dt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Ze,Dt);var r1=/^https?$/i,i1=["POST","PUT"];t=Ze.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,h,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():sg.g(),this.v=this.o?WT(this.o):WT(sg),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(N){vC(this,N);return}if(u=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var D in m)p.set(D,m[D]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let N of m.keys())p.set(N,m.get(N));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(N=>N.toLowerCase()=="content-type"),D=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(i1,h,void 0))||m||D||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,O]of p)this.g.setRequestHeader(N,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{EC(this),this.u=!0,this.g.send(u),this.u=!1}catch(N){vC(this,N)}};function vC(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,IC(u),Dl(u)}function IC(u){u.A||(u.A=!0,jt(u,"complete"),jt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,jt(this,"complete"),jt(this,"abort"),Dl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dl(this,!0)),Ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?wC(this):this.bb())},t.bb=function(){wC(this)};function wC(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Dr(u)!=4||u.Z()!=2)){if(u.u&&Dr(u)==4)HT(u.Ea,0,u);else if(jt(u,"readystatechange"),Dr(u)==4){u.h=!1;try{let O=u.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var m;if(m=O===0){var D=String(u.D).match(dC)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),m=!r1.test(D?D.toLowerCase():"")}p=m}if(p)jt(u,"complete"),jt(u,"success");else{u.m=6;try{var N=2<Dr(u)?u.g.statusText:""}catch{N=""}u.l=N+" ["+u.Z()+"]",IC(u)}}finally{Dl(u)}}}}function Dl(u,h){if(u.g){EC(u);let p=u.g,m=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||jt(u,"ready");try{p.onreadystatechange=m}catch{}}}function EC(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Dr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Dr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),FO(h)}};function TC(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function s1(u){let h={};u=(u.g&&2<=Dr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<u.length;m++){if(L(u[m]))continue;var p=b(u[m]);let D=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let N=h[D]||[];h[D]=N,N.push(p)}T(h,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ic(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function CC(u){this.Aa=0,this.i=[],this.j=new Ya,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ic("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ic("baseRetryDelayMs",5e3,u),this.cb=ic("retryDelaySeedMs",1e4,u),this.Wa=ic("forwardChannelMaxRetries",2,u),this.wa=ic("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new sC(u&&u.concurrentRequestLimit),this.Da=new t1,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=CC.prototype,t.la=8,t.G=1,t.connect=function(u,h,p,m){Bt(0),this.W=u,this.H=h||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=MC(this,null,this.W),Al(this)};function fg(u){if(bC(u),u.G==3){var h=u.U++,p=br(u.I);if($e(p,"SID",u.K),$e(p,"RID",h),$e(p,"TYPE","terminate"),sc(u,p),h=new ri(u,u.j,h),h.L=2,h.v=Cl(br(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=kC(h.j,null),h.g.ea(h.v)),h.F=Date.now(),wl(h)}PC(u)}function Sl(u){u.g&&(gg(u),u.g.cancel(),u.g=null)}function bC(u){Sl(u),u.u&&(a.clearTimeout(u.u),u.u=null),Rl(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Al(u){if(!oC(u.h)&&!u.s){u.s=!0;var h=u.Ga;$a||LT(),Ha||($a(),Ha=!0),Gp.add(h,u),u.B=0}}function o1(u,h){return aC(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Qa(g(u.Ga,u,h),xC(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let D=new ri(this,this.j,u),N=this.o;if(this.S&&(N?(N=v(N),C(N,this.S)):N=this.S),this.m!==null||this.O||(D.H=N,N=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=SC(this,D,h),p=br(this.I),$e(p,"RID",u),$e(p,"CVER",22),this.D&&$e(p,"X-HTTP-Session-Id",this.D),sc(this,p),N&&(this.O?h="headers="+encodeURIComponent(String(yC(N)))+"&"+h:this.m&&hg(p,this.m,N)),dg(this.h,D),this.Ua&&$e(p,"TYPE","init"),this.P?($e(p,"$req",h),$e(p,"SID","null"),D.T=!0,ag(D,p,null)):ag(D,p,h),this.G=2}}else this.G==3&&(u?DC(this,u):this.i.length==0||oC(this.h)||DC(this))};function DC(u,h){var p;h?p=h.l:p=u.U++;let m=br(u.I);$e(m,"SID",u.K),$e(m,"RID",p),$e(m,"AID",u.T),sc(u,m),u.m&&u.o&&hg(m,u.m,u.o),p=new ri(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=SC(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),dg(u.h,p),ag(p,m,h)}function sc(u,h){u.H&&Y(u.H,function(p,m){$e(h,m,p)}),u.l&&lC({},function(p,m){$e(h,m,p)})}function SC(u,h,p){p=Math.min(u.i.length,p);var m=u.l?g(u.l.Na,u.l,u):null;e:{var D=u.i;let N=-1;for(;;){let O=["count="+p];N==-1?0<p?(N=D[0].g,O.push("ofs="+N)):N=0:O.push("ofs="+N);let Oe=!0;for(let Et=0;Et<p;Et++){let be=D[Et].g,St=D[Et].map;if(be-=N,0>be)N=Math.max(0,D[Et].g-100),Oe=!1;else try{n1(St,O,"req"+be+"_")}catch{m&&m(St)}}if(Oe){m=O.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,m}function AC(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;$a||LT(),Ha||($a(),Ha=!0),Gp.add(h,u),u.v=0}}function pg(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Qa(g(u.Fa,u),xC(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,RC(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Qa(g(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Bt(10),Sl(this),RC(this))};function gg(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function RC(u){u.g=new ri(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=br(u.qa);$e(h,"RID","rpc"),$e(h,"SID",u.K),$e(h,"AID",u.T),$e(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&$e(h,"TO",u.ja),$e(h,"TYPE","xmlhttp"),sc(u,h),u.m&&u.o&&hg(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=Cl(br(h)),p.m=null,p.P=!0,nC(p,u)}t.Za=function(){this.C!=null&&(this.C=null,Sl(this),pg(this),Bt(19))};function Rl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function NC(u,h){var p=null;if(u.g==h){Rl(u),gg(u),u.g=null;var m=2}else if(lg(u.h,h))p=h.D,cC(u.h,h),m=1;else return;if(u.G!=0){if(h.o)if(m==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var D=u.B;m=yl(),jt(m,new JT(m,p)),Al(u)}else AC(u);else if(D=h.s,D==3||D==0&&0<h.X||!(m==1&&o1(u,h)||m==2&&pg(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),D){case 1:$i(u,5);break;case 4:$i(u,10);break;case 3:$i(u,6);break;default:$i(u,2)}}}function xC(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function $i(u,h){if(u.j.info("Error code "+h),h==2){var p=g(u.fb,u),m=u.Xa;let D=!m;m=new Bi(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||El(m,"https"),Cl(m),D?XO(m.toString(),p):e1(m.toString(),p)}else Bt(2);u.G=0,u.l&&u.l.sa(h),PC(u),bC(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function PC(u){if(u.G=0,u.ka=[],u.l){let h=uC(u.h);(h.length!=0||u.i.length!=0)&&(A(u.ka,h),A(u.ka,u.i),u.h.i.length=0,R(u.i),u.i.length=0),u.l.ra()}}function MC(u,h,p){var m=p instanceof Bi?br(p):new Bi(p);if(m.g!="")h&&(m.g=h+"."+m.g),Tl(m,m.s);else{var D=a.location;m=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var N=new Bi(null);m&&El(N,m),h&&(N.g=h),D&&Tl(N,D),p&&(N.l=p),m=N}return p=u.D,h=u.ya,p&&h&&$e(m,p,h),$e(m,"VER",u.la),sc(u,m),m}function kC(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new Ze(new tc({eb:p})):new Ze(u.pa),h.Ha(u.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function OC(){}t=OC.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Nl(){}Nl.prototype.g=function(u,h){return new an(u,h)};function an(u,h){Dt.call(this),this.g=new CC(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!L(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!L(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new Qs(this)}E(an,Dt),an.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){fg(this.g)},an.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=tg(u),u=p);h.i.push(new HO(h.Ya++,u)),h.G==3&&Al(h)},an.prototype.N=function(){this.g.l=null,delete this.j,fg(this.g),delete this.g,an.aa.N.call(this)};function FC(u){rg.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}E(FC,rg);function LC(){ig.call(this),this.status=1}E(LC,ig);function Qs(u){this.g=u}E(Qs,OC),Qs.prototype.ua=function(){jt(this.g,"a")},Qs.prototype.ta=function(u){jt(this.g,new FC(u))},Qs.prototype.sa=function(u){jt(this.g,new LC)},Qs.prototype.ra=function(){jt(this.g,"b")},Nl.prototype.createWebChannel=Nl.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,Av=zr.createWebChannelTransport=function(){return new Nl},Sv=zr.getStatEventTarget=function(){return yl()},Dv=zr.Event=Ui,vf=zr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vl.NO_ERROR=0,vl.TIMEOUT=8,vl.HTTP_ERROR=6,yu=zr.ErrorCode=vl,XT.COMPLETE="complete",bv=zr.EventType=XT,KT.EventType=Wa,Wa.OPEN="a",Wa.CLOSE="b",Wa.ERROR="c",Wa.MESSAGE="d",Dt.prototype.listen=Dt.prototype.K,ea=zr.WebChannel=KT,Jz=zr.FetchXmlHttpFactory=tc,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,Cv=zr.XhrIo=Ze}).apply(typeof yf<"u"?yf:typeof self<"u"?self:typeof window<"u"?window:{});var oN="@firebase/firestore";var It=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};It.UNAUTHENTICATED=new It(null),It.GOOGLE_CREDENTIALS=new It("google-credentials-uid"),It.FIRST_PARTY=new It("first-party-uid"),It.MOCK_USER=new It("mock-user");var va="10.14.0";var Ss=new rr("@firebase/firestore");function vu(){return Ss.logLevel}function B(t,...e){if(Ss.logLevel<=Nt.DEBUG){let n=e.map(lw);Ss.debug(`Firestore (${va}): ${t}`,...n)}}function Wr(t,...e){if(Ss.logLevel<=Nt.ERROR){let n=e.map(lw);Ss.error(`Firestore (${va}): ${t}`,...n)}}function aa(t,...e){if(Ss.logLevel<=Nt.WARN){let n=e.map(lw);Ss.warn(`Firestore (${va}): ${t}`,...n)}}function lw(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function X(t="Unexpected state"){let e=`FIRESTORE (${va}) INTERNAL ASSERTION FAILED: `+t;throw Wr(e),new Error(e)}function Ne(t,e){t||X()}function se(t,e){return t}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},j=class extends Qt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var gr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Cf=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Mv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(It.UNAUTHENTICATED))}shutdown(){}},kv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Ov=class{constructor(e){this.t=e,this.currentUser=It.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ne(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new gr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new gr,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>y(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new gr)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ne(typeof r.accessToken=="string"),new Cf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ne(e===null||typeof e=="string"),new It(e)}},Fv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=It.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Lv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Fv(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(It.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Vv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Uv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ne(this.o===void 0);let r=s=>{s.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,B("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ne(typeof n.token=="string"),this.R=n.token,new Vv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Xz(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var bf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Xz(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function De(t,e){return t<e?-1:t>e?1:0}function ca(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var yt=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new j(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new j(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new j(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ce=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new yt(0,0))}static max(){return new t(new yt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Df=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(),r===void 0?r=e.length-n:r>e.length-n&&X(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Qe=class t extends Df{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new j(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},eG=/^[_a-zA-Z][_a-zA-Z0-9]*$/,mn=class t extends Df{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return eG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new j(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new j(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new j(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new j(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var z=class t{constructor(e){this.path=e}static fromPath(e){return new t(Qe.fromString(e))}static fromName(e){return new t(Qe.fromString(e).popFirst(5))}static empty(){return new t(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Qe(e.slice()))}};var jv=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};jv.UNKNOWN_ID=-1;function tG(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ce.fromTimestamp(r===1e9?new yt(n+1,0):new yt(n,r));return new As(i,z.empty(),e)}function nG(t){return new As(t.readTime,t.key,-1)}var As=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ce.min(),z.empty(),-1)}static max(){return new t(ce.max(),z.empty(),-1)}};function rG(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=z.comparator(t.documentKey,e.documentKey),n!==0?n:De(t.largestBatchId,e.largestBatchId))}var iG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Bv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Uu(t){return y(this,null,function*(){if(t.code!==x.FAILED_PRECONDITION||t.message!==iG)throw t;B("LocalStore","Unexpectedly lost primary lease")})}var k=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(e[l]).next(d=>{o[l]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function sG(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ju(t){return t.name==="IndexedDbTransactionError"}var BN=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function np(t){return t==null}function bu(t){return t===0&&1/t==-1/0}function oG(t){return typeof t=="number"&&Number.isInteger(t)&&!bu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var aG=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],one=[...aG,"documentOverlays"],cG=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],uG=cG,lG=[...uG,"indexConfiguration","indexState","indexEntries"];var ane=[...lG,"globals"];function aN(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ia(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $N(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var tt=class t{constructor(e,n){this.comparator=e,this.root=n||mr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ia(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ia(this.root,e,this.comparator,!1)}getReverseIterator(){return new ia(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ia(this.root,e,this.comparator,!0)}},ia=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},mr=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();let e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}};mr.EMPTY=null,mr.RED=!0,mr.BLACK=!1;mr.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,r,i,s){return this}insert(e,n,r){return new mr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var kt=class t{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Sf(this.data.getIterator())}getIteratorFrom(e){return new Sf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Sf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var pr=class t{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new t([])}unionWith(e){let n=new kt(mn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ca(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Af=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ot=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Af("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ot.EMPTY_BYTE_STRING=new Ot("");var dG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kr(t){if(Ne(!!t),typeof t=="string"){let e=0,n=dG.exec(t);if(Ne(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ge(t.seconds),nanos:Ge(t.nanos)}}function Ge(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Mi(t){return typeof t=="string"?Ot.fromBase64String(t):Ot.fromUint8Array(t)}function dw(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function hw(t){let e=t.mapValue.fields.__previous_value__;return dw(e)?hw(e):e}function Du(t){let e=Kr(t.mapValue.fields.__local_write_time__.timestampValue);return new yt(e.seconds,e.nanos)}var $v=class{constructor(e,n,r,i,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Rf=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var If={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Rs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?dw(t)?4:qN(t)?9007199254740991:HN(t)?10:11:X()}function vr(t,e){if(t===e)return!0;let n=Rs(t);if(n!==Rs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Du(t).isEqual(Du(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Kr(i.timestampValue),a=Kr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Mi(i.bytesValue).isEqual(Mi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ge(i.geoPointValue.latitude)===Ge(s.geoPointValue.latitude)&&Ge(i.geoPointValue.longitude)===Ge(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ge(i.integerValue)===Ge(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ge(i.doubleValue),a=Ge(s.doubleValue);return o===a?bu(o)===bu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ca(t.arrayValue.values||[],e.arrayValue.values||[],vr);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(aN(o)!==aN(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!vr(o[c],a[c])))return!1;return!0}(t,e);default:return X()}}function Su(t,e){return(t.values||[]).find(n=>vr(n,e))!==void 0}function ua(t,e){if(t===e)return 0;let n=Rs(t),r=Rs(e);if(n!==r)return De(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return De(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ge(s.integerValue||s.doubleValue),c=Ge(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return cN(t.timestampValue,e.timestampValue);case 4:return cN(Du(t),Du(e));case 5:return De(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Mi(s),c=Mi(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=De(a[l],c[l]);if(d!==0)return d}return De(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=De(Ge(s.latitude),Ge(o.latitude));return a!==0?a:De(Ge(s.longitude),Ge(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return uN(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,d;let f=s.fields||{},g=o.fields||{},_=(a=f.value)===null||a===void 0?void 0:a.arrayValue,E=(c=g.value)===null||c===void 0?void 0:c.arrayValue,R=De(((l=_?.values)===null||l===void 0?void 0:l.length)||0,((d=E?.values)===null||d===void 0?void 0:d.length)||0);return R!==0?R:uN(_,E)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===If.mapValue&&o===If.mapValue)return 0;if(s===If.mapValue)return 1;if(o===If.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=De(c[f],d[f]);if(g!==0)return g;let _=ua(a[c[f]],l[d[f]]);if(_!==0)return _}return De(c.length,d.length)}(t.mapValue,e.mapValue);default:throw X()}}function cN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return De(t,e);let n=Kr(t),r=Kr(e),i=De(n.seconds,r.seconds);return i!==0?i:De(n.nanos,r.nanos)}function uN(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=ua(n[i],r[i]);if(s)return s}return De(n.length,r.length)}function la(t){return Hv(t)}function Hv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Kr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Mi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Hv(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Hv(n.fields[o])}`;return i+"}"}(t.mapValue):X()}function lN(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function qv(t){return!!t&&"integerValue"in t}function fw(t){return!!t&&"arrayValue"in t}function dN(t){return!!t&&"nullValue"in t}function hN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ef(t){return!!t&&"mapValue"in t}function HN(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function wu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ia(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=wu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function qN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Kn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ef(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wu(n)}setAll(e){let n=mn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=wu(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Ef(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ef(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ia(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(wu(this.value))}};function zN(t){let e=[];return Ia(t.fields,(n,r)=>{let i=new mn([n]);if(Ef(r)){let s=zN(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new pr(e)}var Qn=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ce.min(),ce.min(),ce.min(),Kn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ce.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ce.min(),ce.min(),Kn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ce.min(),ce.min(),Kn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var da=class{constructor(e,n){this.position=e,this.inclusive=n}};function fN(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=z.comparator(z.fromName(o.referenceValue),n.key):r=ua(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function pN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vr(t.position[n],e.position[n]))return!1;return!0}var ha=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function hG(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Nf=class{},gt=class t extends Nf{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Gv(e,n,r):n==="array-contains"?new Qv(e,r):n==="in"?new Yv(e,r):n==="not-in"?new Zv(e,r):n==="array-contains-any"?new Jv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Wv(e,r):new Kv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ua(n,this.value)):n!==null&&Rs(this.value)===Rs(n)&&this.matchesComparison(ua(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Yn=class t extends Nf{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return GN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function GN(t){return t.op==="and"}function WN(t){return fG(t)&&GN(t)}function fG(t){for(let e of t.filters)if(e instanceof Yn)return!1;return!0}function zv(t){if(t instanceof gt)return t.field.canonicalString()+t.op.toString()+la(t.value);if(WN(t))return t.filters.map(e=>zv(e)).join(",");{let e=t.filters.map(n=>zv(n)).join(",");return`${t.op}(${e})`}}function KN(t,e){return t instanceof gt?function(r,i){return i instanceof gt&&r.op===i.op&&r.field.isEqual(i.field)&&vr(r.value,i.value)}(t,e):t instanceof Yn?function(r,i){return i instanceof Yn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&KN(o,i.filters[a]),!0):!1}(t,e):void X()}function QN(t){return t instanceof gt?function(n){return`${n.field.canonicalString()} ${n.op} ${la(n.value)}`}(t):t instanceof Yn?function(n){return n.op.toString()+" {"+n.getFilters().map(QN).join(" ,")+"}"}(t):"Filter"}var Gv=class extends gt{constructor(e,n,r){super(e,n,r),this.key=z.fromName(r.referenceValue)}matches(e){let n=z.comparator(e.key,this.key);return this.matchesComparison(n)}},Wv=class extends gt{constructor(e,n){super(e,"in",n),this.keys=YN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Kv=class extends gt{constructor(e,n){super(e,"not-in",n),this.keys=YN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function YN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>z.fromName(r.referenceValue))}var Qv=class extends gt{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return fw(n)&&Su(n.arrayValue,this.value)}},Yv=class extends gt{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Su(this.value.arrayValue,n)}},Zv=class extends gt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Su(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Su(this.value.arrayValue,n)}},Jv=class extends gt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!fw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Su(this.value.arrayValue,r))}};var Xv=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function gN(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Xv(t,e,n,r,i,s,o)}function pw(t){let e=se(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>zv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),np(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>la(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>la(r)).join(",")),e.ue=n}return e.ue}function gw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!hG(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!KN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!pN(t.startAt,e.startAt)&&pN(t.endAt,e.endAt)}function eI(t){return z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Ns=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function pG(t,e,n,r,i,s,o,a){return new Ns(t,e,n,r,i,s,o,a)}function mw(t){return new Ns(t)}function mN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ZN(t){return t.collectionGroup!==null}function Eu(t){let e=se(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new kt(mn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ha(s,r))}),n.has(mn.keyField().canonicalString())||e.ce.push(new ha(mn.keyField(),r))}return e.ce}function _r(t){let e=se(t);return e.le||(e.le=gG(e,Eu(t))),e.le}function gG(t,e){if(t.limitType==="F")return gN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new ha(i.field,s)});let n=t.endAt?new da(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new da(t.startAt.position,t.startAt.inclusive):null;return gN(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function tI(t,e){let n=t.filters.concat([e]);return new Ns(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function nI(t,e,n){return new Ns(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rp(t,e){return gw(_r(t),_r(e))&&t.limitType===e.limitType}function JN(t){return`${pw(_r(t))}|lt:${t.limitType}`}function ta(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>QN(i)).join(", ")}]`),np(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>la(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>la(i)).join(",")),`Target(${r})`}(_r(t))}; limitType=${t.limitType})`}function ip(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):z.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Eu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=fN(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Eu(r),i)||r.endAt&&!function(o,a,c){let l=fN(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Eu(r),i))}(t,e)}function mG(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function XN(t){return(e,n)=>{let r=!1;for(let i of Eu(t)){let s=_G(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function _G(t,e,n){let r=t.field.isKeyField()?z.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?ua(c,l):X()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}var ki=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ia(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return $N(this.inner)}size(){return this.innerSize}};var yG=new tt(z.comparator);function Qr(){return yG}var ex=new tt(z.comparator);function Iu(...t){let e=ex;for(let n of t)e=e.insert(n.key,n);return e}function tx(t){let e=ex;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Cs(){return Tu()}function nx(){return Tu()}function Tu(){return new ki(t=>t.toString(),(t,e)=>t.isEqual(e))}var vG=new tt(z.comparator),IG=new kt(z.comparator);function me(...t){let e=IG;for(let n of t)e=e.add(n);return e}var wG=new kt(De);function EG(){return wG}function _w(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bu(e)?"-0":e}}function rx(t){return{integerValue:""+t}}function TG(t,e){return oG(e)?rx(e):_w(t,e)}var fa=class{constructor(){this._=void 0}};function CG(t,e,n){return t instanceof pa?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&dw(s)&&(s=hw(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof xs?sx(t,e):t instanceof Ps?ox(t,e):function(i,s){let o=ix(i,s),a=_N(o)+_N(i.Pe);return qv(o)&&qv(i.Pe)?rx(a):_w(i.serializer,a)}(t,e)}function bG(t,e,n){return t instanceof xs?sx(t,e):t instanceof Ps?ox(t,e):n}function ix(t,e){return t instanceof ga?function(r){return qv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var pa=class extends fa{},xs=class extends fa{constructor(e){super(),this.elements=e}};function sx(t,e){let n=ax(e);for(let r of t.elements)n.some(i=>vr(i,r))||n.push(r);return{arrayValue:{values:n}}}var Ps=class extends fa{constructor(e){super(),this.elements=e}};function ox(t,e){let n=ax(e);for(let r of t.elements)n=n.filter(i=>!vr(i,r));return{arrayValue:{values:n}}}var ga=class extends fa{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function _N(t){return Ge(t.integerValue||t.doubleValue)}function ax(t){return fw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function DG(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof xs&&i instanceof xs||r instanceof Ps&&i instanceof Ps?ca(r.elements,i.elements,vr):r instanceof ga&&i instanceof ga?vr(r.Pe,i.Pe):r instanceof pa&&i instanceof pa}(t.transform,e.transform)}var rI=class{constructor(e,n){this.version=e,this.transformResults=n}},xi=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Tf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ma=class{};function cx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Au(t.key,xi.none()):new Ms(t.key,t.data,xi.none());{let n=t.data,r=Kn.empty(),i=new kt(mn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Yr(t.key,r,new pr(i.toArray()),xi.none())}}function SG(t,e,n){t instanceof Ms?function(i,s,o){let a=i.value.clone(),c=vN(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Yr?function(i,s,o){if(!Tf(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=vN(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(ux(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Cu(t,e,n,r){return t instanceof Ms?function(s,o,a,c){if(!Tf(s.precondition,o))return a;let l=s.value.clone(),d=IN(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Yr?function(s,o,a,c){if(!Tf(s.precondition,o))return a;let l=IN(s.fieldTransforms,c,o),d=o.data;return d.setAll(ux(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Tf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function AG(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=ix(r.transform,i||null);s!=null&&(n===null&&(n=Kn.empty()),n.set(r.field,s))}return n||null}function yN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ca(r,i,(s,o)=>DG(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ms=class extends ma{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Yr=class extends ma{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function ux(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function vN(t,e,n){let r=new Map;Ne(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,bG(o,a,n[i]))}return r}function IN(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,CG(s,o,e))}return r}var Au=class extends ma{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},iI=class extends ma{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var sI=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&SG(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Cu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Cu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=nx();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=cx(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&ca(this.mutations,e.mutations,(n,r)=>yN(n,r))&&ca(this.baseMutations,e.baseMutations,(n,r)=>yN(n,r))}},oI=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ne(e.mutations.length===r.length);let i=function(){return vG}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var aI=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var cI=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ft,we;function RG(t){switch(t){default:return X();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function lx(t){if(t===void 0)return Wr("GRPC error has no .code"),x.UNKNOWN;switch(t){case ft.OK:return x.OK;case ft.CANCELLED:return x.CANCELLED;case ft.UNKNOWN:return x.UNKNOWN;case ft.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case ft.INTERNAL:return x.INTERNAL;case ft.UNAVAILABLE:return x.UNAVAILABLE;case ft.UNAUTHENTICATED:return x.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case ft.NOT_FOUND:return x.NOT_FOUND;case ft.ALREADY_EXISTS:return x.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return x.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case ft.ABORTED:return x.ABORTED;case ft.OUT_OF_RANGE:return x.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return x.UNIMPLEMENTED;case ft.DATA_LOSS:return x.DATA_LOSS;default:return X()}}(we=ft||(ft={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";var wN=null;function NG(){return new TextEncoder}var xG=new Ni([4294967295,4294967295],0);function EN(t){let e=NG().encode(t),n=new Tv;return n.update(e),new Uint8Array(n.digest())}function TN(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ni([n,r],0),new Ni([i,s],0)]}var uI=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new bs(`Invalid padding: ${n}`);if(r<0)throw new bs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new bs(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ni.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ni.fromNumber(r)));return i.compare(xG)===1&&(i=new Ni([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=EN(e),[r,i]=TN(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=EN(e),[r,i]=TN(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},bs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var xf=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Ru.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ce.min(),i,new tt(De),Qr(),me())}},Ru=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,me(),me(),me())}};var sa=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},Pf=class{constructor(e,n){this.targetId=e,this.me=n}},Mf=class{constructor(e,n,r=Ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},kf=class{constructor(){this.fe=0,this.ge=bN(),this.pe=Ot.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=me(),n=me(),r=me();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:X()}}),new Ru(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=bN()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ne(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},lI=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Qr(),this.qe=CN(),this.Qe=new tt(De)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(eI(s))if(r===0){let o=new z(s.path);this.Ue(n,o,Qn.newNoDocument(o,ce.min()))}else Ne(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}wN?.et(function(d,f,g,_,E){var R,A,M,L,$,G;let ke={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},Y=f.unchangedNames;return Y&&(ke.bloomFilter={applied:E===0,hashCount:(R=Y?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(L=(M=(A=Y?.bits)===null||A===void 0?void 0:A.bitmap)===null||M===void 0?void 0:M.length)!==null&&L!==void 0?L:0,padding:(G=($=Y?.bits)===null||$===void 0?void 0:$.padding)!==null&&G!==void 0?G:0,mightContain:T=>{var v;return(v=_?.mightContain(T))!==null&&v!==void 0&&v}}),ke}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Mi(r).toUint8Array()}catch(c){if(c instanceof Af)return aa("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new uI(o,i,s)}catch(c){return aa(c instanceof bs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&eI(a.target)){let c=new z(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Qn.newNoDocument(c,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=me();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new xf(e,n,this.Qe,this.ke,r);return this.ke=Qr(),this.qe=CN(),this.Qe=new tt(De),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new kf,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new kt(De),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||B("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new kf),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function CN(){return new tt(z.comparator)}function bN(){return new tt(z.comparator)}var PG={asc:"ASCENDING",desc:"DESCENDING"},MG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kG={and:"AND",or:"OR"},dI=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function hI(t,e){return t.useProto3Json||np(e)?e:{value:e}}function Of(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function OG(t,e){return Of(t,e.toTimestamp())}function yr(t){return Ne(!!t),ce.fromTimestamp(function(n){let r=Kr(n);return new yt(r.seconds,r.nanos)}(t))}function yw(t,e){return fI(t,e).canonicalString()}function fI(t,e){let n=function(i){return new Qe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function hx(t){let e=Qe.fromString(t);return Ne(_x(e)),e}function pI(t,e){return yw(t.databaseId,e.path)}function Rv(t,e){let n=hx(e);if(n.get(1)!==t.databaseId.projectId)throw new j(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new j(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new z(px(n))}function fx(t,e){return yw(t.databaseId,e)}function FG(t){let e=hx(t);return e.length===4?Qe.emptyPath():px(e)}function gI(t){return new Qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function px(t){return Ne(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function DN(t,e,n){return{name:pI(t,e),fields:n.value.mapValue.fields}}function LG(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(Ne(d===void 0||typeof d=="string"),Ot.fromBase64String(d||"")):(Ne(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Ot.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let d=l.code===void 0?x.UNKNOWN:lx(l.code);return new j(d,l.message||"")}(o);n=new Mf(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Rv(t,r.document.name),s=yr(r.document.updateTime),o=r.document.createTime?yr(r.document.createTime):ce.min(),a=new Kn({mapValue:{fields:r.document.fields}}),c=Qn.newFoundDocument(i,s,o,a),l=r.targetIds||[],d=r.removedTargetIds||[];n=new sa(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Rv(t,r.document),s=r.readTime?yr(r.readTime):ce.min(),o=Qn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new sa([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Rv(t,r.document),s=r.removedTargetIds||[];n=new sa([],s,i,null)}else{if(!("filter"in e))return X();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new cI(i,s),a=r.targetId;n=new Pf(a,o)}}return n}function VG(t,e){let n;if(e instanceof Ms)n={update:DN(t,e.key,e.value)};else if(e instanceof Au)n={delete:pI(t,e.key)};else if(e instanceof Yr)n={update:DN(t,e.key,e.data),updateMask:WG(e.fieldMask)};else{if(!(e instanceof iI))return X();n={verify:pI(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof pa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof xs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ps)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ga)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw X()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:OG(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X()}(t,e.precondition)),n}function UG(t,e){return t&&t.length>0?(Ne(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?yr(i.updateTime):yr(s);return o.isEqual(ce.min())&&(o=yr(s)),new rI(o,i.transformResults||[])}(n,e))):[]}function jG(t,e){return{documents:[fx(t,e.path)]}}function BG(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fx(t,i);let s=function(l){if(l.length!==0)return mx(Yn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:na(g.field),direction:qG(g.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=hI(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function $G(t){let e=FG(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ne(r===1);let d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){let g=gx(f);return g instanceof Yn&&WN(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(g=>function(E){return new ha(ra(E.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,np(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(f){let g=!!f.before,_=f.values||[];return new da(_,g)}(n.startAt));let l=null;return n.endAt&&(l=function(f){let g=!f.before,_=f.values||[];return new da(_,g)}(n.endAt)),pG(e,i,o,s,a,"F",c,l)}function HG(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function gx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=ra(n.unaryFilter.field);return gt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ra(n.unaryFilter.field);return gt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=ra(n.unaryFilter.field);return gt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=ra(n.unaryFilter.field);return gt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return gt.create(ra(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Yn.create(n.compositeFilter.filters.map(r=>gx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function qG(t){return PG[t]}function zG(t){return MG[t]}function GG(t){return kG[t]}function na(t){return{fieldPath:t.canonicalString()}}function ra(t){return mn.fromServerFormat(t.fieldPath)}function mx(t){return t instanceof gt?function(n){if(n.op==="=="){if(hN(n.value))return{unaryFilter:{field:na(n.field),op:"IS_NAN"}};if(dN(n.value))return{unaryFilter:{field:na(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hN(n.value))return{unaryFilter:{field:na(n.field),op:"IS_NOT_NAN"}};if(dN(n.value))return{unaryFilter:{field:na(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:na(n.field),op:zG(n.op),value:n.value}}}(t):t instanceof Yn?function(n){let r=n.getFilters().map(i=>mx(i));return r.length===1?r[0]:{compositeFilter:{op:GG(n.op),filters:r}}}(t):X()}function WG(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function _x(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Nu=class t{constructor(e,n,r,i,s=ce.min(),o=ce.min(),a=Ot.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var mI=class{constructor(e){this.ct=e}};function KG(t){let e=$G({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?nI(e,e.limit,"L"):e}var Ff=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Ge(e.integerValue));else if("doubleValue"in e){let r=Ge(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),bu(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Kr(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Mi(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?qN(e)?this.dt(n,Number.MAX_SAFE_INTEGER):HN(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):X()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Ge(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),z.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};Ff.vt=new Ff;var _I=class{constructor(){this.un=new yI}addToCollectionParentIndex(e,n){return this.un.add(n),k.resolve()}getCollectionParents(e,n){return k.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return k.resolve()}deleteFieldIndex(e,n){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,n){return k.resolve()}getDocumentsMatchingTarget(e,n){return k.resolve(null)}getIndexType(e,n){return k.resolve(0)}getFieldIndexes(e,n){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,n){return k.resolve(As.min())}getMinOffsetFromCollectionGroup(e,n){return k.resolve(As.min())}updateCollectionGroup(e,n,r){return k.resolve()}updateIndexEntries(e,n){return k.resolve()}},yI=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new kt(Qe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new kt(Qe.comparator)).toArray()}};var une=new Uint8Array(0);var fr=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};fr.DEFAULT_COLLECTION_PERCENTILE=10,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fr.DEFAULT=new fr(41943040,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fr.DISABLED=new fr(-1,0,0);var xu=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var vI=class{constructor(){this.changes=new ki(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?k.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var II=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var wI=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Cu(r.mutation,i,pr.empty(),yt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=me()){let i=Cs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Iu();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Cs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,me()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Qr(),o=Tu(),a=function(){return Tu()}();return n.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Yr)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),Cu(d.mutation,l,d.mutation.getFieldMask(),yt.now())):o.set(l.key,pr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),n.forEach((l,d)=>{var f;return a.set(l,new II(d,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Tu(),i=new tt((o,a)=>o-a),s=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let d=r.get(c)||pr.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||me()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=nx();d.forEach(g=>{if(!s.has(g)){let _=cx(n.get(g),r.get(g));_!==null&&f.set(g,_),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return k.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ZN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):k.resolve(Cs()),a=-1,c=s;return o.next(l=>k.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?k.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,me())).next(d=>({batchId:a,changes:tx(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new z(n)).next(r=>{let i=Iu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Iu();return this.indexManager.getCollectionParents(e,s).next(a=>k.forEach(a,c=>{let l=function(f,g){return new Ns(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,Qn.newInvalidDocument(d)))});let a=Iu();return o.forEach((c,l)=>{let d=s.get(c);d!==void 0&&Cu(d.mutation,l,pr.empty(),yt.now()),ip(n,l)&&(a=a.insert(c,l))}),a})}};var EI=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return k.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:yr(i.createTime)}}(n)),k.resolve()}getNamedQuery(e,n){return k.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:KG(i.bundledQuery),readTime:yr(i.readTime)}}(n)),k.resolve()}};var TI=class{constructor(){this.overlays=new tt(z.comparator),this.Ir=new Map}getOverlay(e,n){return k.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Cs();return k.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),k.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),k.resolve()}getOverlaysForCollection(e,n,r){let i=Cs(),s=n.length+1,o=new z(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return k.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new tt((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let d=s.get(l.largestBatchId);d===null&&(d=Cs(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Cs(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return k.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new aI(n,r));let s=this.Ir.get(n);s===void 0&&(s=me(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var CI=class{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,k.resolve()}};var Pu=class{constructor(){this.Tr=new kt(pt.Er),this.dr=new kt(pt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new pt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new pt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new z(new Qe([])),r=new pt(n,e),i=new pt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new z(new Qe([])),r=new pt(n,e),i=new pt(n,e+1),s=me();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new pt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},pt=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return z.comparator(e.key,n.key)||De(e.wr,n.wr)}static Ar(e,n){return De(e.wr,n.wr)||z.comparator(e.key,n.key)}};var bI=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new kt(pt.Er)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new sI(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new pt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(o)}lookupMutationBatch(e,n){return k.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return k.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new pt(n,0),i=new pt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),k.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new kt(De);return n.forEach(i=>{let s=new pt(i,0),o=new pt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),k.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;z.isDocumentKey(s)||(s=s.child(""));let o=new pt(new z(s),0),a=new kt(De);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),k.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ne(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return k.forEach(n.mutations,i=>{let s=new pt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new pt(n,0),i=this.br.firstAfterOrEqual(r);return k.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var DI=class{constructor(e){this.Mr=e,this.docs=function(){return new tt(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return k.resolve(r?r.document.mutableCopy():Qn.newInvalidDocument(n))}getEntries(e,n){let r=Qr();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Qn.newInvalidDocument(i))}),k.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Qr(),o=n.path,a=new z(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||rG(nG(d),r)<=0||(i.has(d.key)||ip(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return k.resolve(s)}getAllFromCollectionGroup(e,n,r,i){X()}Or(e,n){return k.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new SI(this)}getSize(e){return k.resolve(this.size)}},SI=class extends vI{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),k.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var AI=class{constructor(e){this.persistence=e,this.Nr=new ki(n=>pw(n),gw),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Pu,this.targetCount=0,this.kr=xu.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),k.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new xu(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,k.resolve()}updateTargetData(e,n){return this.Kn(n),k.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),k.waitFor(s).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return k.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),k.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),k.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),k.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return k.resolve(r)}containsKey(e,n){return k.resolve(this.Br.containsKey(n))}};var RI=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new BN(0),this.Kr=!1,this.Kr=!0,this.$r=new CI,this.referenceDelegate=e(this),this.Ur=new AI(this),this.indexManager=new _I,this.remoteDocumentCache=function(i){return new DI(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new mI(n),this.Gr=new EI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new TI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new bI(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){B("MemoryPersistence","Starting transaction:",e);let i=new NI(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return k.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},NI=class extends Bv{constructor(e){super(),this.currentSequenceNumber=e}},xI=class t{constructor(e){this.persistence=e,this.Jr=new Pu,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),k.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),k.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Xr,r=>{let i=z.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ce.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return k.or([()=>k.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var PI=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=me(),i=me();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var MI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var kI=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return zC()?8:sG(Rt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new MI;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(vu()<=Nt.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",ta(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),k.resolve()):(vu()<=Nt.DEBUG&&B("QueryEngine","Query:",ta(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(vu()<=Nt.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",ta(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_r(n))):k.resolve())}Yi(e,n){if(mN(n))return k.resolve(null);let r=_r(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=nI(n,null,"F"),r=_r(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=me(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(n,a);return this.ns(n,l,o,c.readTime)?this.Yi(e,nI(n,null,"F")):this.rs(e,l,n,c)}))})))}Zi(e,n,r,i){return mN(n)||i.isEqual(ce.min())?k.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?k.resolve(null):(vu()<=Nt.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ta(n)),this.rs(e,o,n,tG(i,-1)).next(a=>a))})}ts(e,n){let r=new kt(XN(e));return n.forEach((i,s)=>{ip(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return vu()<=Nt.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",ta(n)),this.Ji.getDocumentsMatchingQuery(e,n,As.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var OI=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new tt(De),this._s=new ki(s=>pw(s),gw),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function QG(t,e,n,r){return new OI(t,e,n,r)}function yx(t,e){return y(this,null,function*(){let n=se(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=me();for(let l of i){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function YG(t,e){let n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,g=f.keys(),_=k.resolve();return g.forEach(E=>{_=_.next(()=>d.getEntry(c,E)).next(R=>{let A=l.docVersions.get(E);Ne(A!==null),R.version.compareTo(A)<0&&(f.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),d.addEntry(R)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=me();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function vx(t){let e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function ZG(t,e){let n=se(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,f)));let _=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?_=_.withResumeToken(Ot.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,r)),i=i.insert(f,_),function(R,A,M){return R.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0}(g,_,d)&&a.push(n.Ur.updateTargetData(s,_))});let c=Qr(),l=me();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(JG(s,o,e.documentUpdates).next(d=>{c=d.Ps,l=d.Is})),!r.isEqual(ce.min())){let d=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return k.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.os=i,s))}function JG(t,e,n){let r=me(),i=me();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Qr();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ce.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):B("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function XG(t,e){let n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function eW(t,e){let n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,k.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Nu(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function FI(t,e,n){return y(this,null,function*(){let r=se(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ju(o))throw o;B("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function SN(t,e,n){let r=se(t),i=ce.min(),s=me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){let f=se(c),g=f._s.get(d);return g!==void 0?k.resolve(f.os.get(g)):f.Ur.getTargetData(l,d)}(r,o,_r(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ce.min(),n?s:me())).next(a=>(tW(r,mG(e),a),{documents:a,Ts:s})))}function tW(t,e,n){let r=t.us.get(e)||ce.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var Lf=class{constructor(){this.activeTargetIds=EG()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var LI=class{constructor(){this.so=new Lf,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Lf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var VI=class{_o(e){}shutdown(){}};var Vf=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){B("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){B("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var wf=null;function Nv(){return wf===null?wf=function(){return 268435456+Math.round(2147483648*Math.random())}():wf++,"0x"+wf.toString(16)}var nW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var UI=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Mt="WebChannelConnection",jI=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let a=Nv(),c=this.xo(n,r.toUriEncodedString());B("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,c,l,i).then(d=>(B("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw aa("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+va}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=nW[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=Nv();return new Promise((o,a)=>{let c=new Cv;c.setWithCredentials(!0),c.listenOnce(bv.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case yu.NO_ERROR:let d=c.getResponseJson();B(Mt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case yu.TIMEOUT:B(Mt,`RPC '${e}' ${s} timed out`),a(new j(x.DEADLINE_EXCEEDED,"Request time out"));break;case yu.HTTP_ERROR:let f=c.getStatus();if(B(Mt,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let _=g?.error;if(_&&_.status&&_.message){let E=function(A){let M=A.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(M)>=0?M:x.UNKNOWN}(_.status);a(new j(E,_.message))}else a(new j(x.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new j(x.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{B(Mt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);B(Mt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=Nv(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Av(),a=Sv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let d=s.join("");B(Mt,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=o.createWebChannel(d,c),g=!1,_=!1,E=new UI({Io:A=>{_?B(Mt,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(g||(B(Mt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),B(Mt,`RPC '${e}' stream ${i} sending:`,A),f.send(A))},To:()=>f.close()}),R=(A,M,L)=>{A.listen(M,$=>{try{L($)}catch(G){setTimeout(()=>{throw G},0)}})};return R(f,ea.EventType.OPEN,()=>{_||(B(Mt,`RPC '${e}' stream ${i} transport opened.`),E.yo())}),R(f,ea.EventType.CLOSE,()=>{_||(_=!0,B(Mt,`RPC '${e}' stream ${i} transport closed`),E.So())}),R(f,ea.EventType.ERROR,A=>{_||(_=!0,aa(Mt,`RPC '${e}' stream ${i} transport errored:`,A),E.So(new j(x.UNAVAILABLE,"The operation could not be completed")))}),R(f,ea.EventType.MESSAGE,A=>{var M;if(!_){let L=A.data[0];Ne(!!L);let $=L,G=$.error||((M=$[0])===null||M===void 0?void 0:M.error);if(G){B(Mt,`RPC '${e}' stream ${i} received error:`,G);let ke=G.status,Y=function(I){let C=ft[I];if(C!==void 0)return lx(C)}(ke),T=G.message;Y===void 0&&(Y=x.INTERNAL,T="Unknown error status: "+ke+" with message "+G.message),_=!0,E.So(new j(Y,T)),f.close()}else B(Mt,`RPC '${e}' stream ${i} received:`,L),E.bo(L)}}),R(a,Dv.STAT_EVENT,A=>{A.stat===vf.PROXY?B(Mt,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===vf.NOPROXY&&B(Mt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}};function xv(){return typeof document<"u"?document:null}function sp(t){return new dI(t,!0)}var Uf=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var jf=class{constructor(e,n,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Uf(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return y(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return y(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return y(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(Wr(n.toString()),Wr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new j(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>y(this,null,function*(){this.state=0,this.start()}))}I_(e){return B("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(B("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},BI=class extends jf{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=LG(this.serializer,e),r=function(s){if(!("targetChange"in s))return ce.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?yr(o.readTime):ce.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=gI(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=eI(c)?{documents:jG(s,c)}:{query:BG(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=dx(s,o.resumeToken);let l=hI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=Of(s,o.snapshotVersion.toTimestamp());let l=hI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=HG(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=gI(this.serializer),n.removeTarget=e,this.a_(n)}},$I=class extends jf{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ne(!!e.streamToken),this.lastStreamToken=e.streamToken,Ne(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=UG(e.writeResults,e.commitTime),r=yr(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=gI(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>VG(this.serializer,r))};this.a_(n)}};var HI=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new j(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,fI(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(x.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,fI(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(x.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},qI=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Wr(n),this.D_=!1):B("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var zI=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>y(this,null,function*(){Os(this)&&(B("RemoteStore","Restarting streams for network reachability change."),yield function(c){return y(this,null,function*(){let l=se(c);l.L_.add(4),yield Bu(l),l.q_.set("Unknown"),l.L_.delete(4),yield op(l)})}(this))}))}),this.q_=new qI(r,i)}};function op(t){return y(this,null,function*(){if(Os(t))for(let e of t.B_)yield e(!0)})}function Bu(t){return y(this,null,function*(){for(let e of t.B_)yield e(!1)})}function Ix(t,e){let n=se(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Ew(n)?ww(n):wa(n).r_()&&Iw(n,e))}function vw(t,e){let n=se(t),r=wa(n);n.N_.delete(e),r.r_()&&wx(n,e),n.N_.size===0&&(r.r_()?r.o_():Os(n)&&n.q_.set("Unknown"))}function Iw(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}wa(t).A_(e)}function wx(t,e){t.Q_.xe(e),wa(t).R_(e)}function ww(t){t.Q_=new lI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),wa(t).start(),t.q_.v_()}function Ew(t){return Os(t)&&!wa(t).n_()&&t.N_.size>0}function Os(t){return se(t).L_.size===0}function Ex(t){t.Q_=void 0}function rW(t){return y(this,null,function*(){t.q_.set("Online")})}function iW(t){return y(this,null,function*(){t.N_.forEach((e,n)=>{Iw(t,e)})})}function sW(t,e){return y(this,null,function*(){Ex(t),Ew(t)?(t.q_.M_(e),ww(t)):t.q_.set("Unknown")})}function oW(t,e,n){return y(this,null,function*(){if(t.q_.set("Online"),e instanceof Mf&&e.state===2&&e.cause)try{yield function(i,s){return y(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){B("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Bf(t,r)}else if(e instanceof sa?t.Q_.Ke(e):e instanceof Pf?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ce.min()))try{let r=yield vx(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.N_.get(l);d&&s.N_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(Ot.EMPTY_BYTE_STRING,d.snapshotVersion)),wx(s,c);let f=new Nu(d.target,c,l,d.sequenceNumber);Iw(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){B("RemoteStore","Failed to raise snapshot:",r),yield Bf(t,r)}})}function Bf(t,e,n){return y(this,null,function*(){if(!ju(e))throw e;t.L_.add(1),yield Bu(t),t.q_.set("Offline"),n||(n=()=>vx(t.localStore)),t.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){B("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield op(t)}))})}function Tx(t,e){return e().catch(n=>Bf(t,n,e))}function ap(t){return y(this,null,function*(){let e=se(t),n=Oi(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;aW(e);)try{let i=yield XG(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,cW(e,i)}catch(i){yield Bf(e,i)}Cx(e)&&bx(e)})}function aW(t){return Os(t)&&t.O_.length<10}function cW(t,e){t.O_.push(e);let n=Oi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Cx(t){return Os(t)&&!Oi(t).n_()&&t.O_.length>0}function bx(t){Oi(t).start()}function uW(t){return y(this,null,function*(){Oi(t).p_()})}function lW(t){return y(this,null,function*(){let e=Oi(t);for(let n of t.O_)e.m_(n.mutations)})}function dW(t,e,n){return y(this,null,function*(){let r=t.O_.shift(),i=oI.from(r,e,n);yield Tx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield ap(t)})}function hW(t,e){return y(this,null,function*(){e&&Oi(t).V_&&(yield function(r,i){return y(this,null,function*(){if(function(o){return RG(o)&&o!==x.ABORTED}(i.code)){let s=r.O_.shift();Oi(r).s_(),yield Tx(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield ap(r)}})}(t,e)),Cx(t)&&bx(t)})}function AN(t,e){return y(this,null,function*(){let n=se(t);n.asyncQueue.verifyOperationInProgress(),B("RemoteStore","RemoteStore received new credentials");let r=Os(n);n.L_.add(3),yield Bu(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield op(n)})}function fW(t,e){return y(this,null,function*(){let n=se(t);e?(n.L_.delete(2),yield op(n)):e||(n.L_.add(2),yield Bu(n),n.q_.set("Unknown"))})}function wa(t){return t.K_||(t.K_=function(n,r,i){let s=se(n);return s.w_(),new BI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:rW.bind(null,t),Ro:iW.bind(null,t),mo:sW.bind(null,t),d_:oW.bind(null,t)}),t.B_.push(e=>y(this,null,function*(){e?(t.K_.s_(),Ew(t)?ww(t):t.q_.set("Unknown")):(yield t.K_.stop(),Ex(t))}))),t.K_}function Oi(t){return t.U_||(t.U_=function(n,r,i){let s=se(n);return s.w_(),new $I(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:uW.bind(null,t),mo:hW.bind(null,t),f_:lW.bind(null,t),g_:dW.bind(null,t)}),t.B_.push(e=>y(this,null,function*(){e?(t.U_.s_(),yield ap(t)):(yield t.U_.stop(),t.O_.length>0&&(B("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var GI=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Tw(t,e){if(Wr("AsyncQueue",`${e}: ${t}`),ju(t))return new j(x.UNAVAILABLE,`${e}: ${t}`);throw t}var $f=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||z.comparator(n.key,r.key):(n,r)=>z.comparator(n.key,r.key),this.keyedMap=Iu(),this.sortedSet=new tt(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Hf=class{constructor(){this.W_=new tt(z.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},_a=class t{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,$f.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var WI=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},KI=class{constructor(){this.queries=RN(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=se(n),s=i.queries;i.queries=RN(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new j(x.ABORTED,"Firestore shutting down"))}};function RN(){return new ki(t=>JN(t),rp)}function Dx(t,e){return y(this,null,function*(){let n=se(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new WI,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=Tw(o,`Initialization of query '${ta(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Cw(n)})}function Sx(t,e){return y(this,null,function*(){let n=se(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function pW(t,e){let n=se(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Cw(n)}function gW(t,e,n){let r=se(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function Cw(t){t.Y_.forEach(e=>{e.next()})}var QI,NN;(NN=QI||(QI={})).ea="default",NN.Cache="cache";var qf=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new _a(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=_a.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==QI.Cache}};var zf=class{constructor(e){this.key=e}},Gf=class{constructor(e){this.key=e}},YI=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=me(),this.mutatedKeys=me(),this.Aa=XN(e),this.Ra=new $f(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new Hf,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),_=ip(this.query,f)?f:null,E=!!g&&this.mutatedKeys.has(g.key),R=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),A=!1;g&&_?g.data.isEqual(_.data)?E!==R&&(r.track({type:3,doc:_}),A=!0):this.ga(g,_)||(r.track({type:2,doc:_}),A=!0,(c&&this.Aa(_,c)>0||l&&this.Aa(_,l)<0)&&(a=!0)):!g&&_?(r.track({type:0,doc:_}),A=!0):g&&!_&&(r.track({type:1,doc:g}),A=!0,(c||l)&&(a=!0)),A&&(_?(o=o.add(_),s=R?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,f)=>function(_,E){let R=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return R(_)-R(E)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new _a(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Hf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=me(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Gf(r))}),this.da.forEach(r=>{e.has(r)||n.push(new zf(r))}),n}ba(e){this.Ta=e.Ts,this.da=me();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return _a.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},ZI=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},JI=class{constructor(e){this.key=e,this.va=!1}},XI=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ki(a=>JN(a),rp),this.Ma=new Map,this.xa=new Set,this.Oa=new tt(z.comparator),this.Na=new Map,this.La=new Pu,this.Ba={},this.ka=new Map,this.qa=xu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function mW(t,e,n=!0){return y(this,null,function*(){let r=Mx(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield Ax(r,e,n,!0),i})}function _W(t,e){return y(this,null,function*(){let n=Mx(t);yield Ax(n,e,!0,!1)})}function Ax(t,e,n,r){return y(this,null,function*(){let i=yield eW(t.localStore,_r(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n),a;return r&&(a=yield yW(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Ix(t.remoteStore,i),a})}function yW(t,e,n,r,i){return y(this,null,function*(){t.Ka=(f,g,_)=>function(R,A,M,L){return y(this,null,function*(){let $=A.view.ma(M);$.ns&&($=yield SN(R.localStore,A.query,!1).then(({documents:T})=>A.view.ma(T,$)));let G=L&&L.targetChanges.get(A.targetId),ke=L&&L.targetMismatches.get(A.targetId)!=null,Y=A.view.applyChanges($,R.isPrimaryClient,G,ke);return PN(R,A.targetId,Y.wa),Y.snapshot})}(t,f,g,_);let s=yield SN(t.localStore,e,!0),o=new YI(e,s.Ts),a=o.ma(s.documents),c=Ru.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);PN(t,n,l.wa);let d=new ZI(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function vW(t,e,n){return y(this,null,function*(){let r=se(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!rp(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield FI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&vw(r.remoteStore,i.targetId),ew(r,i.targetId)}).catch(Uu))):(ew(r,i.targetId),yield FI(r.localStore,i.targetId,!0))})}function IW(t,e){return y(this,null,function*(){let n=se(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),vw(n.remoteStore,r.targetId))})}function wW(t,e,n){return y(this,null,function*(){let r=AW(t);try{let i=yield function(o,a){let c=se(o),l=yt.now(),d=a.reduce((_,E)=>_.add(E.key),me()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let E=Qr(),R=me();return c.cs.getEntries(_,d).next(A=>{E=A,E.forEach((M,L)=>{L.isValidDocument()||(R=R.add(M))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,E)).next(A=>{f=A;let M=[];for(let L of a){let $=AG(L,f.get(L.key).overlayedDocument);$!=null&&M.push(new Yr(L.key,$,zN($.value.mapValue),xi.exists(!0)))}return c.mutationQueue.addMutationBatch(_,l,M,a)}).next(A=>{g=A;let M=A.applyToLocalDocumentSet(f,R);return c.documentOverlayCache.saveOverlays(_,A.batchId,M)})}).then(()=>({batchId:g.batchId,changes:tx(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new tt(De)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield $u(r,i.changes),yield ap(r.remoteStore)}catch(i){let s=Tw(i,"Failed to persist write");n.reject(s)}})}function Rx(t,e){return y(this,null,function*(){let n=se(t);try{let r=yield ZG(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(Ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ne(o.va):i.removedDocuments.size>0&&(Ne(o.va),o.va=!1))}),yield $u(n,r,e)}catch(r){yield Uu(r)}})}function xN(t,e,n){let r=se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=se(o);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&Cw(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function EW(t,e,n){return y(this,null,function*(){let r=se(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new tt(z.comparator);o=o.insert(s,Qn.newNoDocument(s,ce.min()));let a=me().add(s),c=new xf(ce.min(),new Map,new tt(De),o,a);yield Rx(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),bw(r)}else yield FI(r.localStore,e,!1).then(()=>ew(r,e,n)).catch(Uu)})}function TW(t,e){return y(this,null,function*(){let n=se(t),r=e.batch.batchId;try{let i=yield YG(n.localStore,e);xx(n,r,null),Nx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield $u(n,i)}catch(i){yield Uu(i)}})}function CW(t,e,n){return y(this,null,function*(){let r=se(t);try{let i=yield function(o,a){let c=se(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(Ne(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);xx(r,e,n),Nx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield $u(r,i)}catch(i){yield Uu(i)}})}function Nx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function xx(t,e,n){let r=se(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function ew(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Px(t,r)})}function Px(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(vw(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),bw(t))}function PN(t,e,n){for(let r of n)r instanceof zf?(t.La.addReference(r.key,e),bW(t,r)):r instanceof Gf?(B("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Px(t,r.key)):X()}function bW(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(B("SyncEngine","New document in limbo: "+n),t.xa.add(r),bw(t))}function bw(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new z(Qe.fromString(e)),r=t.qa.next();t.Na.set(r,new JI(n)),t.Oa=t.Oa.insert(n,r),Ix(t.remoteStore,new Nu(_r(mw(n.path)),r,"TargetPurposeLimboResolution",BN.oe))}}function $u(t,e,n){return y(this,null,function*(){let r=se(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,n).then(l=>{var d;if((l||n)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=n?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(l){i.push(l);let f=PI.Wi(c.targetId,l);s.push(f)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return y(this,null,function*(){let d=se(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>k.forEach(l,g=>k.forEach(g.$i,_=>d.persistence.referenceDelegate.addReference(f,g.targetId,_)).next(()=>k.forEach(g.Ui,_=>d.persistence.referenceDelegate.removeReference(f,g.targetId,_)))))}catch(f){if(!ju(f))throw f;B("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let _=d.os.get(g),E=_.snapshotVersion,R=_.withLastLimboFreeSnapshotVersion(E);d.os=d.os.insert(g,R)}}})}(r.localStore,s))})}function DW(t,e){return y(this,null,function*(){let n=se(t);if(!n.currentUser.isEqual(e)){B("SyncEngine","User change. New user:",e.toKey());let r=yield yx(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new j(x.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield $u(n,r.hs)}})}function SW(t,e){let n=se(t),r=n.Na.get(e);if(r&&r.va)return me().add(r.key);{let i=me(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function Mx(t){let e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Rx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EW.bind(null,e),e.Ca.d_=pW.bind(null,e.eventManager),e.Ca.$a=gW.bind(null,e.eventManager),e}function AW(t){let e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CW.bind(null,e),e}var MN=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return y(this,null,function*(){this.serializer=sp(n.databaseInfo.databaseId),this.sharedClientState=this.Wa(n),this.persistence=this.Ga(n),yield this.persistence.start(),this.localStore=this.za(n),this.gcScheduler=this.ja(n,this.localStore),this.indexBackfillerScheduler=this.Ha(n,this.localStore)})}ja(n,r){return null}Ha(n,r){return null}za(n){return QG(this.persistence,new kI,n.initialUser,this.serializer)}Ga(n){return new RI(xI.Zr,this.serializer)}Wa(n){return new LI}terminate(){return y(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})();var RW=(()=>{class t{initialize(n,r){return y(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>xN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=DW.bind(null,this.syncEngine),yield fW(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new KI}()}createDatastore(n){let r=sp(n.databaseInfo.databaseId),i=function(o){return new jI(o)}(n.databaseInfo);return function(o,a,c,l){return new HI(o,a,c,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,s,o,a,c){return new zI(i,s,o,a,c)}(this.localStore,this.datastore,n.asyncQueue,r=>xN(this.syncEngine,r,0),function(){return Vf.D()?new Vf:new VI}())}createSyncEngine(n,r){return function(s,o,a,c,l,d,f){let g=new XI(s,o,a,c,l,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return y(this,null,function*(){var n,r;yield function(s){return y(this,null,function*(){let o=se(s);B("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Bu(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var Wf=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Wr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var tw=class{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=It.UNAUTHENTICATED,this.clientId=bf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>y(this,null,function*(){B("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(B("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Tw(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Pv(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),B("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield yx(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function kN(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield NW(t);B("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>AN(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>AN(e.remoteStore,i)),t._onlineComponents=e})}function NW(t){return y(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){B("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Pv(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;aa("Error using user provided cache. Falling back to memory cache: "+n),yield Pv(t,new MN)}}else B("FirestoreClient","Using default OfflineComponentProvider"),yield Pv(t,new MN);return t._offlineComponents})}function kx(t){return y(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(B("FirestoreClient","Using user provided OnlineComponentProvider"),yield kN(t,t._uninitializedComponentsProvider._online)):(B("FirestoreClient","Using default OnlineComponentProvider"),yield kN(t,new RW))),t._onlineComponents})}function xW(t){return kx(t).then(e=>e.syncEngine)}function nw(t){return y(this,null,function*(){let e=yield kx(t),n=e.eventManager;return n.onListen=mW.bind(null,e.syncEngine),n.onUnlisten=vW.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=_W.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=IW.bind(null,e.syncEngine),n})}function PW(t,e,n={}){let r=new gr;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(s,o,a,c,l){let d=new Wf({next:g=>{d.Za(),o.enqueueAndForget(()=>Sx(s,f)),g.fromCache&&c.source==="server"?l.reject(new j(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new qf(a,d,{includeMetadataChanges:!0,_a:!0});return Dx(s,f)}(yield nw(t),t.asyncQueue,e,n,r)})),r.promise}function Ox(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var ON=new Map;function Fx(t,e,n){if(!n)throw new j(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function MW(t,e,n,r){if(e===!0&&r===!0)throw new j(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function FN(t){if(!z.isDocumentKey(t))throw new j(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function LN(t){if(z.isDocumentKey(t))throw new j(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function cp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function Gr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new j(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=cp(t);throw new j(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Kf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new j(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new j(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ox((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new j(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new j(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new j(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ya=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kf({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new j(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Mv;switch(r.type){case"firstParty":return new Lv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return y(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=ON.get(n);r&&(B("ComponentProvider","Removing Datastore"),ON.delete(n),r.terminate())}(this),Promise.resolve()}};function Lx(t,e,n,r={}){var i;let s=(t=Gr(t,ya))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&aa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=It.MOCK_USER;else{a=Js(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new j(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new It(l)}t._authCredentials=new kv(new Cf(a,c))}}var ks=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},rn=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Pi=class t extends ks{constructor(e,n,r){super(e,n,mw(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new rn(this.firestore,null,new z(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Vx(t,e,...n){if(t=_e(t),Fx("collection","path",e),t instanceof ya){let r=Qe.fromString(e,...n);return LN(r),new Pi(t,null,r)}{if(!(t instanceof rn||t instanceof Pi))throw new j(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Qe.fromString(e,...n));return LN(r),new Pi(t.firestore,null,r)}}function Ux(t,e,...n){if(t=_e(t),arguments.length===1&&(e=bf.newId()),Fx("doc","path",e),t instanceof ya){let r=Qe.fromString(e,...n);return FN(r),new rn(t,null,new z(r))}{if(!(t instanceof rn||t instanceof Pi))throw new j(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Qe.fromString(e,...n));return FN(r),new rn(t.firestore,t instanceof Pi?t.converter:null,new z(r))}}var Qf=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Uf(this,"async_queue_retry"),this.Vu=()=>{let r=xv();r&&B("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=xv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=xv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new gr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return y(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ju(e))throw e;B("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Wr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=GI.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&X()}verifyOperationInProgress(){}wu(){return y(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};function VN(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Fi=class extends ya{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Qf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return y(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Qf(e),this._firestoreClient=void 0,yield e}})}};function jx(t,e){let n=typeof t=="object"?t:ut(),r=typeof t=="string"?t:e||"(default)",i=ct(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=ai("firestore");s&&Lx(i,...s)}return i}function Dw(t){if(t._terminated)throw new j(x.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||kW(t),t._firestoreClient}function kW(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,l,d){return new $v(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Ox(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new tw(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(t._componentsProvider))}var Mu=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Ot.fromBase64String(e))}catch(n){throw new j(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ku=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new j(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Yf=class{constructor(e){this._methodName=e}};var Ou=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new j(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new j(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}};var Fu=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var OW=/^__.*__$/,rw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Yr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ms(e,this.data,n,this.fieldTransforms)}};function Bx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}var iw=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Zf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Bx(this.Cu)&&OW.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},sw=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||sp(e)}Qu(e,n,r,i=!1){return new iw({Cu:e,methodName:n,qu:r,path:mn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function $x(t){let e=t._freezeSettings(),n=sp(t._databaseId);return new sw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function FW(t,e,n,r,i,s={}){let o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);zx("Data must be an object, but it was:",o,r);let a=Hx(r,o),c,l;if(s.merge)c=new pr(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let f of s.mergeFields){let g=VW(e,f,n);if(!o.contains(g))throw new j(x.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);jW(d,g)||d.push(g)}c=new pr(d),l=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=o.fieldTransforms;return new rw(new Kn(a),c,l)}function LW(t,e,n,r=!1){return Sw(n,t.Qu(r?4:3,e))}function Sw(t,e){if(qx(t=_e(t)))return zx("Unsupported field value:",e,t),Hx(t,e);if(t instanceof Yf)return function(r,i){if(!Bx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=Sw(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=_e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TG(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=yt.fromDate(r);return{timestampValue:Of(i.serializer,s)}}if(r instanceof yt){let s=new yt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Of(i.serializer,s)}}if(r instanceof Ou)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Mu)return{bytesValue:dx(i.serializer,r._byteString)};if(r instanceof rn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:yw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Fu)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return _w(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${cp(r)}`)}(t,e)}function Hx(t,e){let n={};return $N(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ia(t,(r,i)=>{let s=Sw(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function qx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof yt||t instanceof Ou||t instanceof Mu||t instanceof rn||t instanceof Yf||t instanceof Fu)}function zx(t,e,n){if(!qx(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=cp(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function VW(t,e,n){if((e=_e(e))instanceof ku)return e._internalPath;if(typeof e=="string")return Gx(t,e);throw Zf("Field path arguments must be of type string or ",t,!1,void 0,n)}var UW=new RegExp("[~\\*/\\[\\]]");function Gx(t,e,n){if(e.search(UW)>=0)throw Zf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ku(...e.split("."))._internalPath}catch{throw Zf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zf(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new j(x.INVALID_ARGUMENT,a+t+c)}function jW(t,e){return t.some(n=>n.isEqual(e))}var Jf=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new ow(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Aw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},ow=class extends Jf{data(){return super.data()}};function Aw(t,e){return typeof e=="string"?Gx(t,e):e instanceof ku?e._internalPath:e._delegate._internalPath}function Wx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new j(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Lu=class{},aw=class extends Lu{};function Kx(t,e,...n){let r=[];e instanceof Lu&&r.push(e),r=r.concat(n),function(s){let o=s.filter(c=>c instanceof cw).length,a=s.filter(c=>c instanceof Xf).length;if(o>1||o>0&&a>0)throw new j(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Xf=class t extends aw{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return Yx(e._query,n),new ks(e.firestore,e.converter,tI(e._query,n))}_parse(e){let n=$x(e.firestore);return function(s,o,a,c,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new j(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){jN(f,d);let _=[];for(let E of f)_.push(UN(c,s,E));g={arrayValue:{values:_}}}else g=UN(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||jN(f,d),g=LW(a,o,f,d==="in"||d==="not-in");return gt.create(l,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function Qx(t,e,n){let r=e,i=Aw("where",t);return Xf._create(i,r,n)}var cw=class t extends Lu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Yn.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)Yx(o,c),o=tI(o,c)}(e._query,n),new ks(e.firestore,e.converter,tI(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function UN(t,e,n){if(typeof(n=_e(n))=="string"){if(n==="")throw new j(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZN(e)&&n.indexOf("/")!==-1)throw new j(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Qe.fromString(n));if(!z.isDocumentKey(r))throw new j(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return lN(t,new z(r))}if(n instanceof rn)return lN(t,n._key);throw new j(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cp(n)}.`)}function jN(t,e){if(!Array.isArray(t)||t.length===0)throw new j(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Yx(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new j(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new j(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var uw=class{convertValue(e,n="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Mi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Ia(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ge(o.doubleValue));return new Fu(s)}convertGeoPoint(e){return new Ou(Ge(e.latitude),Ge(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=hw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Du(e));default:return null}}convertTimestamp(e){let n=Kr(e);return new yt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Qe.fromString(e);Ne(_x(r));let i=new Rf(r.get(1),r.get(3)),s=new z(r.popFirst(5));return i.isEqual(n)||Wr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function BW(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Ds=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ep=class extends Jf{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new oa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Aw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},oa=class extends ep{data(e={}){return super.data(e)}},tp=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ds(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new oa(this._firestore,this._userDataWriter,r.key,r,new Ds(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new j(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new oa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ds(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new oa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ds(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:$W(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function $W(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}var Vu=class extends uw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mu(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new rn(this.firestore,null,n)}};function Zx(t){t=Gr(t,ks);let e=Gr(t.firestore,Fi),n=Dw(e),r=new Vu(e);return Wx(t._query),PW(n,t._query).then(i=>new tp(e,r,t,i))}function Jx(t,e,n){t=Gr(t,rn);let r=Gr(t.firestore,Fi),i=BW(t.converter,e,n);return eP(r,[FW($x(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,xi.none())])}function Xx(t){return eP(Gr(t.firestore,Fi),[new Au(t._key,xi.none())])}function Rw(t,...e){var n,r,i;t=_e(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||VN(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(VN(e[o])){let f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,l,d;if(t instanceof rn)l=Gr(t.firestore,Fi),d=mw(t._key.path),c={next:f=>{e[o]&&e[o](HW(l,t,f))},error:e[o+1],complete:e[o+2]};else{let f=Gr(t,ks);l=Gr(f.firestore,Fi),d=f._query;let g=new Vu(l);c={next:_=>{e[o]&&e[o](new tp(l,g,f,_))},error:e[o+1],complete:e[o+2]},Wx(t._query)}return function(g,_,E,R){let A=new Wf(R),M=new qf(_,A,E);return g.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return Dx(yield nw(g),M)})),()=>{A.Za(),g.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return Sx(yield nw(g),M)}))}}(Dw(l),d,a,c)}function eP(t,e){return function(r,i){let s=new gr;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return wW(yield xW(r),i,s)})),s.promise}(Dw(t),e)}function HW(t,e,n){let r=n.docs.get(e._key),i=new Vu(t);return new ep(t,i,e._key,r,new Ds(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){va=i})(Yt),rt(new nt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Fi(new Ov(r.getProvider("auth-internal")),new Uv(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new j(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rf(l.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),q(oN,"4.7.3",e),q(oN,"4.7.3","esm2017")})();var up=function(){return up=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},up.apply(this,arguments)};var GW={includeMetadataChanges:!1};function tP(t,e){return e===void 0&&(e=GW),new ae(function(n){var r=Rw(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function nP(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:up(up({},r),(n={},n[e.idField]=t.id,n))}function rP(t){return tP(t,{includeMetadataChanges:!0}).pipe(Q(function(e){return e.docs}))}function iP(t,e){return e===void 0&&(e={}),rP(t).pipe(Q(function(n){return n.map(function(r){return nP(r,e)})}))}var Fs=class{constructor(e){return e}},sP="firestore",Nw=class{constructor(){return at(sP)}};var xw=new U("angularfire2.firestore-instances");function WW(t,e){let n=ht(sP,t,e);return n&&new Fs(n)}function KW(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Fs(r)}}var QW={provide:Nw,deps:[[new te,xw]]},YW={provide:Fs,useFactory:WW,deps:[[new te,xw],qe]};function oP(t,...e){return q("angularfire",He.full,"fst"),Ue([YW,QW,{provide:xw,useFactory:KW(t),multi:!0,deps:[Z,ve,et,Ke,[new te,Wn],[new te,nn],...e]}])}var lp=Ce(iP,!0);var dp=Ce(Vx,!0);var aP=Ce(Xx,!0);var hp=Ce(Ux,!0);var Pw=Ce(Zx,!0);var cP=Ce(jx,!0);var uP=Ce(Kx,!0);var Mw=Ce(Jx,!0);var lP=Ce(Qx,!0);var dP="@firebase/database",hP="1.0.8";var xE="";function ZW(t){xE=t}var Bw=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),vt(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ml(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var $w=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return nr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var qP=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Bw(e)}}catch{}return new $w},Vs=qP("localStorage"),Hw=qP("sessionStorage");var ba=new rr("@firebase/database"),JW=function(){let t=1;return function(){return t++}}(),zP=function(t){let e=ZC(t),n=new KC;n.update(e);let r=n.digest();return VC.encodeByteArray(r)},tl=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=tl.apply(null,r):typeof r=="object"?e+=vt(r):e+=r,e+=" "}return e},Us=null,fP=!0,XW=function(t,e){F(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(ba.logLevel=Nt.VERBOSE,Us=ba.log.bind(ba),e&&Hw.set("logging_enabled",!0)):typeof t=="function"?Us=t:(Us=null,Hw.remove("logging_enabled"))},Ft=function(...t){if(fP===!0&&(fP=!1,Us===null&&Hw.get("logging_enabled")===!0&&XW(!0)),Us){let e=tl.apply(null,t);Us(e)}},nl=function(t){return function(...e){Ft(t,...e)}},qw=function(...t){let e="FIREBASE INTERNAL ERROR: "+tl(...t);ba.error(e)},Jr=function(...t){let e=`FIREBASE FATAL ERROR: ${tl(...t)}`;throw ba.error(e),new Error(e)},_n=function(...t){let e="FIREBASE WARNING: "+tl(...t);ba.warn(e)},e4=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&_n("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},GP=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},t4=function(t){if(er()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Sa="[MIN_NAME]",js="[MAX_NAME]",ka=function(t,e){if(t===e)return 0;if(t===Sa||e===js)return-1;if(e===Sa||t===js)return 1;{let n=pP(t),r=pP(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},n4=function(t,e){return t===e?0:t<e?-1:1},Hu=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+vt(e))},PE=function(t){if(typeof t!="object"||t===null)return vt(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=vt(e[r]),n+=":",n+=PE(t[e[r]]);return n+="}",n},WP=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function kn(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var KP=function(t){F(!GP(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let d=l.join(""),f="";for(c=0;c<64;c+=8){let g=parseInt(d.substr(c,8),2).toString(16);g.length===1&&(g="0"+g),f=f+g}return f.toLowerCase()},r4=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},i4=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var s4=new RegExp("^-?(0*)\\d{1,10}$"),o4=-2147483648,a4=2147483647,pP=function(t){if(s4.test(t)){let e=Number(t);if(e>=o4&&e<=a4)return e}return null},rl=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw _n("Exception was thrown by user callback.",n),e},Math.floor(0))}},c4=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ku=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var zw=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){_n(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Gw=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ft("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',_n(e)}},Qu=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),pp="5",QP="v",YP="s",ZP="r",JP="f",XP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,eM="ls",tM="p",Ww="ac",nM="websocket",rM="long_polling";var gp=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Vs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Vs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function u4(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function iM(t,e,n){F(typeof e=="string","typeof type must == string"),F(typeof n=="object","typeof params must == object");let r;if(e===nM)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===rM)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);u4(t)&&(n.ns=t.namespace);let i=[];return kn(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var Kw=class{constructor(){this.counters_={}}incrementCounter(e,n=1){nr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return BC(this.counters_)}};var kw={},Ow={};function ME(t){let e=t.toString();return kw[e]||(kw[e]=new Kw),kw[e]}function l4(t,e){let n=t.toString();return Ow[n]||(Ow[n]=e()),Ow[n]}var Qw=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&rl(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var gP="start",d4="close",h4="pLPCommand",f4="pRTLPCB",sM="id",oM="pw",aM="ser",p4="cb",g4="seg",m4="ts",_4="d",y4="dframe",cM=1870,uM=30,v4=cM-uM,I4=25e3,w4=3e4,Yw=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=nl(e),this.stats_=ME(n),this.urlFn=c=>(this.appCheckToken&&(c[Ww]=this.appCheckToken),iM(n,rM,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Qw(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(w4)),t4(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Zw((...s)=>{let[o,a,c,l,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===gP)this.id=a,this.password=c;else if(o===d4)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[gP]="t",r[aM]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[p4]=this.scriptTagHolder.uniqueCallbackIdentifier),r[QP]=pp,this.transportSessionId&&(r[YP]=this.transportSessionId),this.lastSessionId&&(r[eM]=this.lastSessionId),this.applicationId&&(r[tM]=this.applicationId),this.appCheckToken&&(r[Ww]=this.appCheckToken),typeof location<"u"&&location.hostname&&XP.test(location.hostname)&&(r[ZP]=JP);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return er()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!r4()&&!i4()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=vt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=UC(n),i=WP(r,v4);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(er())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[y4]="t",r[sM]=e,r[oM]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=vt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Zw=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,er())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=JW(),window[h4+this.uniqueCallbackIdentifier]=e,window[f4+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ft("frame writing exception"),a.stack&&Ft(a.stack),Ft(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ft("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[sM]=this.myID,e[oM]=this.myPW,e[aM]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+uM+r.length<=cM;){let o=this.pendingSegs.shift();r=r+"&"+g4+i+"="+o.seg+"&"+m4+i+"="+o.ts+"&"+_4+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(I4)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){er()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ft("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var E4=16384,T4=45e3,mp=null;typeof MozWebSocket<"u"?mp=MozWebSocket:typeof WebSocket<"u"&&(mp=WebSocket);var qu=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=nl(this.connId),this.stats_=ME(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[QP]=pp,!er()&&typeof location<"u"&&location.hostname&&XP.test(location.hostname)&&(a[ZP]=JP),r&&(a[YP]=r),i&&(a[eM]=i),s&&(a[Ww]=s),o&&(a[tM]=o),iM(n,nM,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Vs.set("previous_websocket_failure",!0);try{let i;if(er()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${pp}/${xE}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new mp(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&mp!==null&&!t.forceDisallow_}static previouslyFailed(){return Vs.isInMemoryStorage||Vs.get("previous_websocket_failure")===!0}markConnectionHealthy(){Vs.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Ml(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(F(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=vt(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=WP(r,E4);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(T4))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),C4=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Yw,qu]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=qu&&qu.isAvailable(),i=r&&!qu.previouslyFailed();if(n.webSocketOnly&&(r||_n("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[qu];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),b4=6e4,D4=5e3,S4=10*1024,A4=100*1024,Fw="t",mP="d",R4="s",_P="r",N4="e",yP="o",vP="a",IP="n",wP="p",x4="h",Jw=class{constructor(e,n,r,i,s,o,a,c,l,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=nl("c:"+this.id+":"),this.transportManager_=new C4(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ku(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>A4?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>S4?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Fw in e){let n=e[Fw];n===vP?this.upgradeIfSecondaryHealthy_():n===_P?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===yP&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Hu("t",e),r=Hu("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:wP,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:vP,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:IP,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Hu("t",e),r=Hu("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Hu(Fw,e);if(mP in e){let r=e[mP];if(n===x4){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===IP){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===R4?this.onConnectionShutdown_(r):n===_P?this.onReset_(r):n===N4?qw("Server Error: "+r):n===yP?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qw("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),pp!==r&&_n("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ku(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(b4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ku(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(D4))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:wP,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Vs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var _p=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var yp=class{constructor(e){this.allowedEvents_=e,this.listeners_={},F(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){F(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var vp=class t extends yp{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!oc()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return F(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var EP=32,TP=768,Ve=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Me(){return new Ve("")}function Ee(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Vi(t){return t.pieces_.length-t.pieceNum_}function ze(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ve(t.pieces_,e)}function lM(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function P4(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function dM(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function hM(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ve(e,0)}function wt(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Ve)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Ve(n,0)}function Ie(t){return t.pieceNum_>=t.pieces_.length}function Pn(t,e){let n=Ee(t),r=Ee(e);if(n===null)return e;if(n===r)return Pn(ze(t),ze(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function fM(t,e){if(Vi(t)!==Vi(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Jn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Vi(t)>Vi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Xw=class{constructor(e,n){this.errorPrefix_=n,this.parts_=dM(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=hc(this.parts_[r]);pM(this)}};function M4(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=hc(e),pM(t)}function k4(t){let e=t.parts_.pop();t.byteLength_-=hc(e),t.parts_.length>0&&(t.byteLength_-=1)}function pM(t){if(t.byteLength_>TP)throw new Error(t.errorPrefix_+"has a key path longer than "+TP+" bytes ("+t.byteLength_+").");if(t.parts_.length>EP)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+EP+") or object contains a cycle "+Ls(t))}function Ls(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var eE=class t extends yp{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return F(e==="visible","Unknown event type: "+e),[this.visible_]}};var zu=1e3,O4=60*5*1e3,CP=30*1e3,F4=1.3,L4=3e4,V4="server_kill",bP=3,kE=(()=>{class t extends _p{constructor(n,r,i,s,o,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=nl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=zu,this.maxReconnectDelay_=O4,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!er())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");eE.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&vp.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(vt(o)),F(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new yg,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),F(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),F(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,d=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(d,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&nr(n,"w")){let i=qi(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();_n(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||WC(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=CP)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=GC(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),F(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+vt(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):qw("Unrecognized action received from server: "+vt(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){F(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=zu,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=zu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>L4&&(this.reconnectDelay_=zu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*F4)}this.onConnectStatus_(!1)}establishConnection_(){return y(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},d=function(g){F(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(g)};this.realtime_={close:l,sendRequest:d};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[g,_]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?Ft("getToken() completed but was canceled"):(Ft("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=_&&_.token,c=new Jw(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,E=>{_n(E+" ("+this.repoInfo_.toString()+")"),this.interrupt(V4)},o))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&_n(g),l())}}})}interrupt(n){Ft("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Ft("Resuming connection for reason: "+n),delete this.interruptReasons_[n],uc(this.interruptReasons_)&&(this.reconnectDelay_=zu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>PE(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new Ve(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){Ft("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=bP&&(this.reconnectDelay_=CP,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Ft("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=bP&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";er()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+xE.replace(/\./g,"-")]=1,oc()?n["framework.cordova"]=1:Pl()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=vp.getInstance().currentlyOnline();return uc(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),Te=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Aa=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new Te(Sa,e),i=new Te(Sa,n);return this.compare(r,i)!==0}minPost(){return Te.MIN}};var fp,Ip=class extends Aa{static get __EMPTY_NODE(){return fp}static set __EMPTY_NODE(e){fp=e}compare(e,n){return ka(e.name,n.name)}isDefinedOn(e){throw Zs("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Te.MIN}maxPost(){return new Te(js,fp)}makePost(e,n){return F(typeof e=="string","KeyIndex indexValue must always be a string."),new Te(e,fp)}toString(){return".key"}},Da=new Ip;var Ta=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Zn=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??Mn.EMPTY_NODE,this.right=o??Mn.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Mn.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Mn.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),tE=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new Zn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Mn=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Zn.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Zn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ta(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ta(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ta(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ta(this.root_,null,this.comparator_,!0,e)}};Mn.EMPTY_NODE=new tE;function U4(t,e){return ka(t.name,e.name)}function OE(t,e){return ka(t,e)}var nE;function j4(t){nE=t}var gM=function(t){return typeof t=="number"?"number:"+KP(t):"string:"+t},mM=function(t){if(t.isLeafNode()){let e=t.val();F(typeof e=="string"||typeof e=="number"||typeof e=="object"&&nr(e,".sv"),"Priority must be a string or number.")}else F(t===nE||t.isEmpty(),"priority of unexpected type.");F(t===nE||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var DP,Ra=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,F(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),mM(this.priorityNode_)}static set __childrenNodeConstructor(n){DP=n}static get __childrenNodeConstructor(){return DP}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return Ie(n)?this:Ee(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=Ee(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(F(i!==".priority"||Vi(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(ze(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+gM(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=KP(this.value_):n+=this.value_,this.lazyHash_=zP(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(F(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return F(s>=0,"Unknown leaf type: "+r),F(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),_M,yM;function B4(t){_M=t}function $4(t){yM=t}var rE=class extends Aa{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?ka(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Te.MIN}maxPost(){return new Te(js,new Ra("[PRIORITY-POST]",yM))}makePost(e,n){let r=_M(e);return new Te(n,new Ra("[PRIORITY-POST]",r))}toString(){return".priority"}},Vt=new rE;var H4=Math.log(2),iE=class{constructor(e){let n=s=>parseInt(Math.log(s)/H4,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},wp=function(t,e,n,r){t.sort(e);let i=function(c,l){let d=l-c,f,g;if(d===0)return null;if(d===1)return f=t[c],g=n?n(f):f,new Zn(g,f.node,Zn.BLACK,null,null);{let _=parseInt(d/2,10)+c,E=i(c,_),R=i(_+1,l);return f=t[_],g=n?n(f):f,new Zn(g,f.node,Zn.BLACK,E,R)}},s=function(c){let l=null,d=null,f=t.length,g=function(E,R){let A=f-E,M=f;f-=E;let L=i(A+1,M),$=t[A],G=n?n($):$;_(new Zn(G,$.node,R,null,L))},_=function(E){l?(l.left=E,l=E):(d=E,l=E)};for(let E=0;E<c.count;++E){let R=c.nextBitIsOne(),A=Math.pow(2,c.count-(E+1));R?g(A,Zn.BLACK):(g(A,Zn.BLACK),g(A,Zn.RED))}return d},o=new iE(t.length),a=s(o);return new Mn(r||e,a)};var Lw,Ea={},Na=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return F(Ea&&Vt,"ChildrenNode.ts has not been loaded"),Lw=Lw||new t({".priority":Ea},{".priority":Vt}),Lw}get(e){let n=qi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Mn?n:null}hasIndex(e){return nr(this.indexSet_,e.toString())}addIndex(e,n){F(e!==Da,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(Te.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=wp(r,e.getCompare()):a=Ea;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new t(d,l)}addToIndexes(e,n){let r=lc(this.indexes_,(i,s)=>{let o=qi(this.indexSet_,s);if(F(o,"Missing index implementation for "+s),i===Ea)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(Te.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),wp(a,o.getCompare())}else return Ea;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new Te(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=lc(this.indexes_,i=>{if(i===Ea)return i;{let s=n.get(e.name);return s?i.remove(new Te(e.name,s)):i}});return new t(r,this.indexSet_)}};var Gu,Ye=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&mM(this.priorityNode_),this.children_.isEmpty()&&F(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Gu||(Gu=new t(new Mn(OE),null,Na.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Gu}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Gu:r}}getChild(n){let r=Ee(n);return r===null?this:this.getImmediateChild(r).getChild(ze(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(F(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new Te(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Gu:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=Ee(n);if(i===null)return r;{F(Ee(n)!==".priority"||Vi(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(ze(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(Vt,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+gM(this.getPriority().val())+":"),this.forEachChild(Vt,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":zP(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new Te(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new Te(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new Te(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,Te.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,Te.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===il?-1:0}withIndex(n){if(n===Da||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Da||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Vt),s=r.getIterator(Vt),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Da?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),sE=class extends Ye{constructor(){super(new Mn(OE),Ye.EMPTY_NODE,Na.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ye.EMPTY_NODE}isEmpty(){return!1}},il=new sE;Object.defineProperties(Te,{MIN:{value:new Te(Sa,Ye.EMPTY_NODE)},MAX:{value:new Te(js,il)}});Ip.__EMPTY_NODE=Ye.EMPTY_NODE;Ra.__childrenNodeConstructor=Ye;j4(il);$4(il);var q4=!0;function Lt(t,e=null){if(t===null)return Ye.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),F(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Ra(n,Lt(e))}if(!(t instanceof Array)&&q4){let n=[],r=!1;if(kn(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=Lt(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Te(o,c)))}}),n.length===0)return Ye.EMPTY_NODE;let s=wp(n,U4,o=>o.name,OE);if(r){let o=wp(n,Vt.getCompare());return new Ye(s,Lt(e),new Na({".priority":o},{".priority":Vt}))}else return new Ye(s,Lt(e),Na.Default)}else{let n=Ye.EMPTY_NODE;return kn(t,(r,i)=>{if(nr(t,r)&&r.substring(0,1)!=="."){let s=Lt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Lt(e))}}B4(Lt);var oE=class extends Aa{constructor(e){super(),this.indexPath_=e,F(!Ie(e)&&Ee(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?ka(e.name,n.name):s}makePost(e,n){let r=Lt(e),i=Ye.EMPTY_NODE.updateChild(this.indexPath_,r);return new Te(n,i)}maxPost(){let e=Ye.EMPTY_NODE.updateChild(this.indexPath_,il);return new Te(js,e)}toString(){return dM(this.indexPath_,0).join("/")}};var aE=class extends Aa{compare(e,n){let r=e.node.compareTo(n.node);return r===0?ka(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Te.MIN}maxPost(){return Te.MAX}makePost(e,n){let r=Lt(e);return new Te(n,r)}toString(){return".value"}},z4=new aE;function G4(t){return{type:"value",snapshotNode:t}}function W4(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function K4(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function SP(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Q4(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var cE=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Vt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return F(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return F(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Sa}hasEnd(){return this.endSet_}getIndexEndValue(){return F(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return F(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:js}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return F(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Vt}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function AP(t){let e={};if(t.isDefault())return e;let n;if(t.index_===Vt?n="$priority":t.index_===z4?n="$value":t.index_===Da?n="$key":(F(t.index_ instanceof oE,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=vt(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=vt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+vt(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=vt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+vt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function RP(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Vt&&(e.i=t.index_.toString()),e}var uE=class t extends _p{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=nl("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(F(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=AP(e._queryParams);this.restRequest_(s+".json",c,(l,d)=>{let f=d;if(l===404&&(f=null,l=null),l===null&&this.onDataUpdate_(s,f,!1,r),qi(this.listens_,o)===a){let g;l?l===401?g="permission_denied":g="rest_error:"+l:g="ok",i(g,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=AP(e._queryParams),r=e._path.toString(),i=new yg;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+zi(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Ml(a.responseText)}catch{_n("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&_n("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var lE=class{constructor(){this.rootNode_=Ye.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function Ep(){return{value:null,children:new Map}}function vM(t,e,n){if(Ie(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=Ee(e);t.children.has(r)||t.children.set(r,Ep());let i=t.children.get(r);e=ze(e),vM(i,e,n)}}function dE(t,e,n){t.value!==null?n(e,t.value):Y4(t,(r,i)=>{let s=new Ve(e.toString()+"/"+r);dE(i,s,n)})}function Y4(t,e){t.children.forEach((n,r)=>{e(r,n)})}var hE=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&kn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var NP=10*1e3,Z4=30*1e3,J4=5*60*1e3,fE=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new hE(e);let r=NP+(Z4-NP)*Math.random();Ku(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;kn(e,(i,s)=>{s>0&&nr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Ku(this.reportStats_.bind(this),Math.floor(Math.random()*2*J4))}};var Zr=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Zr||{});function IM(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function wM(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function EM(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var pE=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Zr.ACK_USER_WRITE,this.source=IM()}operationForChild(e){if(Ie(this.path)){if(this.affectedTree.value!=null)return F(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Ve(e));return new t(Me(),n,this.revert)}}else return F(Ee(this.path)===e,"operationForChild called for unrelated child."),new t(ze(this.path),this.affectedTree,this.revert)}};var xa=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Zr.OVERWRITE}operationForChild(e){return Ie(this.path)?new t(this.source,Me(),this.snap.getImmediateChild(e)):new t(this.source,ze(this.path),this.snap)}};var Tp=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Zr.MERGE}operationForChild(e){if(Ie(this.path)){let n=this.children.subtree(new Ve(e));return n.isEmpty()?null:n.value?new xa(this.source,Me(),n.value):new t(this.source,Me(),n)}else return F(Ee(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,ze(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Ju=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ie(e))return this.isFullyInitialized()&&!this.filtered_;let n=Ee(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function X4(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(Q4(o.childName,o.snapshotNode))}),Wu(t,i,"child_removed",e,r,n),Wu(t,i,"child_added",e,r,n),Wu(t,i,"child_moved",s,r,n),Wu(t,i,"child_changed",e,r,n),Wu(t,i,"value",e,r,n),i}function Wu(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>t9(t,a,c)),o.forEach(a=>{let c=e9(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function e9(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function t9(t,e,n){if(e.childName==null||n.childName==null)throw Zs("Should only compare child_ events.");let r=new Te(e.childName,e.snapshotNode),i=new Te(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function TM(t,e){return{eventCache:t,serverCache:e}}function Yu(t,e,n,r){return TM(new Ju(e,n,r),t.serverCache)}function CM(t,e,n,r){return TM(t.eventCache,new Ju(e,n,r))}function gE(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Bs(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Vw,n9=()=>(Vw||(Vw=new Mn(n4)),Vw),sn=class t{constructor(e,n=n9()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return kn(e,(r,i)=>{n=n.set(new Ve(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Me(),value:this.value};if(Ie(e))return null;{let r=Ee(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(ze(e),n);return s!=null?{path:wt(new Ve(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ie(e))return this;{let n=Ee(e),r=this.children.get(n);return r!==null?r.subtree(ze(e)):new t(null)}}set(e,n){if(Ie(e))return new t(n,this.children);{let r=Ee(e),s=(this.children.get(r)||new t(null)).set(ze(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(Ie(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=Ee(e),r=this.children.get(n);if(r){let i=r.remove(ze(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(Ie(e))return this.value;{let n=Ee(e),r=this.children.get(n);return r?r.get(ze(e)):null}}setTree(e,n){if(Ie(e))return n;{let r=Ee(e),s=(this.children.get(r)||new t(null)).setTree(ze(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(Me(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(wt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Me(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(Ie(e))return null;{let s=Ee(e),o=this.children.get(s);return o?o.findOnPath_(ze(e),wt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Me(),n)}foreachOnPath_(e,n,r){if(Ie(e))return this;{this.value&&r(n,this.value);let i=Ee(e),s=this.children.get(i);return s?s.foreachOnPath_(ze(e),wt(n,i),r):new t(null)}}foreach(e){this.foreach_(Me(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(wt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var Xn=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new sn(null))}};function Zu(t,e,n){if(Ie(e))return new Xn(new sn(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=Pn(i,e);return s=s.updateChild(o,n),new Xn(t.writeTree_.set(i,s))}else{let i=new sn(n),s=t.writeTree_.setTree(e,i);return new Xn(s)}}}function xP(t,e,n){let r=t;return kn(n,(i,s)=>{r=Zu(r,wt(e,i),s)}),r}function PP(t,e){if(Ie(e))return Xn.empty();{let n=t.writeTree_.setTree(e,new sn(null));return new Xn(n)}}function mE(t,e){return $s(t,e)!=null}function $s(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Pn(n.path,e)):null}function MP(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Vt,(r,i)=>{e.push(new Te(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Te(r,i.value))}),e}function Li(t,e){if(Ie(e))return t;{let n=$s(t,e);return n!=null?new Xn(new sn(n)):new Xn(t.writeTree_.subtree(e))}}function _E(t){return t.writeTree_.isEmpty()}function Pa(t,e){return bM(Me(),t.writeTree_,e)}function bM(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(F(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=bM(wt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(wt(t,".priority"),r)),n}}function DM(t,e){return xM(e,t)}function r9(t,e,n,r,i){F(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Zu(t.visibleWrites,e,n)),t.lastWriteId=r}function i9(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function s9(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);F(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&o9(a,r.path)?i=!1:Jn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return a9(t),!0;if(r.snap)t.visibleWrites=PP(t.visibleWrites,r.path);else{let a=r.children;kn(a,c=>{t.visibleWrites=PP(t.visibleWrites,wt(r.path,c))})}return!0}else return!1}function o9(t,e){if(t.snap)return Jn(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Jn(wt(t.path,n),e))return!0;return!1}function a9(t){t.visibleWrites=SM(t.allWrites,c9,Me()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function c9(t){return t.visible}function SM(t,e,n){let r=Xn.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)Jn(n,o)?(a=Pn(n,o),r=Zu(r,a,s.snap)):Jn(o,n)&&(a=Pn(o,n),r=Zu(r,Me(),s.snap.getChild(a)));else if(s.children){if(Jn(n,o))a=Pn(n,o),r=xP(r,a,s.children);else if(Jn(o,n))if(a=Pn(o,n),Ie(a))r=xP(r,Me(),s.children);else{let c=qi(s.children,Ee(a));if(c){let l=c.getChild(ze(a));r=Zu(r,Me(),l)}}}else throw Zs("WriteRecord should have .snap or .children")}}return r}function AM(t,e,n,r,i){if(!r&&!i){let s=$s(t.visibleWrites,e);if(s!=null)return s;{let o=Li(t.visibleWrites,e);if(_E(o))return n;if(n==null&&!mE(o,Me()))return null;{let a=n||Ye.EMPTY_NODE;return Pa(o,a)}}}else{let s=Li(t.visibleWrites,e);if(!i&&_E(s))return n;if(!i&&n==null&&!mE(s,Me()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Jn(l.path,e)||Jn(e,l.path))},a=SM(t.allWrites,o,e),c=n||Ye.EMPTY_NODE;return Pa(a,c)}}}function u9(t,e,n){let r=Ye.EMPTY_NODE,i=$s(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Vt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=Li(t.visibleWrites,e);return n.forEachChild(Vt,(o,a)=>{let c=Pa(Li(s,new Ve(o)),a);r=r.updateImmediateChild(o,c)}),MP(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=Li(t.visibleWrites,e);return MP(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function l9(t,e,n,r,i){F(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=wt(e,n);if(mE(t.visibleWrites,s))return null;{let o=Li(t.visibleWrites,s);return _E(o)?i.getChild(n):Pa(o,i.getChild(n))}}function d9(t,e,n,r){let i=wt(e,n),s=$s(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=Li(t.visibleWrites,i);return Pa(o,r.getNode().getImmediateChild(n))}else return null}function h9(t,e){return $s(t.visibleWrites,e)}function f9(t,e,n,r,i,s,o){let a,c=Li(t.visibleWrites,e),l=$s(c,Me());if(l!=null)a=l;else if(n!=null)a=Pa(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let d=[],f=o.getCompare(),g=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),_=g.getNext();for(;_&&d.length<i;)f(_,r)!==0&&d.push(_),_=g.getNext();return d}else return[]}function p9(){return{visibleWrites:Xn.empty(),allWrites:[],lastWriteId:-1}}function yE(t,e,n,r){return AM(t.writeTree,t.treePath,e,n,r)}function RM(t,e){return u9(t.writeTree,t.treePath,e)}function kP(t,e,n,r){return l9(t.writeTree,t.treePath,e,n,r)}function Cp(t,e){return h9(t.writeTree,wt(t.treePath,e))}function g9(t,e,n,r,i,s){return f9(t.writeTree,t.treePath,e,n,r,i,s)}function FE(t,e,n){return d9(t.writeTree,t.treePath,e,n)}function NM(t,e){return xM(wt(t.treePath,e),t.writeTree)}function xM(t,e){return{treePath:t,writeTree:e}}var vE=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;F(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),F(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,SP(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,K4(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,W4(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,SP(r,e.snapshotNode,i.oldSnap));else throw Zs("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var IE=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},PM=new IE,Xu=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Ju(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return FE(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Bs(this.viewCache_),s=g9(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function m9(t,e){F(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),F(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function _9(t,e,n,r,i){let s=new vE,o,a;if(n.type===Zr.OVERWRITE){let l=n;l.source.fromUser?o=wE(t,e,l.path,l.snap,r,i,s):(F(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Ie(l.path),o=bp(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===Zr.MERGE){let l=n;l.source.fromUser?o=v9(t,e,l.path,l.children,r,i,s):(F(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=EE(t,e,l.path,l.children,r,i,a,s))}else if(n.type===Zr.ACK_USER_WRITE){let l=n;l.revert?o=E9(t,e,l.path,r,i,s):o=I9(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===Zr.LISTEN_COMPLETE)o=w9(t,e,n.path,r,s);else throw Zs("Unknown operation type: "+n.type);let c=s.getChanges();return y9(e,o,c),{viewCache:o,changes:c}}function y9(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=gE(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(G4(gE(e)))}}function MM(t,e,n,r,i,s){let o=e.eventCache;if(Cp(r,n)!=null)return e;{let a,c;if(Ie(n))if(F(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=Bs(e),d=l instanceof Ye?l:Ye.EMPTY_NODE,f=RM(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{let l=yE(r,Bs(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=Ee(n);if(l===".priority"){F(Vi(n)===1,"Can't have a priority with additional path components");let d=o.getNode();c=e.serverCache.getNode();let f=kP(r,n,d,c);f!=null?a=t.filter.updatePriority(d,f):a=o.getNode()}else{let d=ze(n),f;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let g=kP(r,n,o.getNode(),c);g!=null?f=o.getNode().getImmediateChild(l).updateChild(d,g):f=o.getNode().getImmediateChild(l)}else f=FE(r,l,e.serverCache);f!=null?a=t.filter.updateChild(o.getNode(),l,f,d,i,s):a=o.getNode()}}return Yu(e,a,o.isFullyInitialized()||Ie(n),t.filter.filtersNodes())}}function bp(t,e,n,r,i,s,o,a){let c=e.serverCache,l,d=o?t.filter:t.filter.getIndexedFilter();if(Ie(n))l=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){let _=c.getNode().updateChild(n,r);l=d.updateFullNode(c.getNode(),_,null)}else{let _=Ee(n);if(!c.isCompleteForPath(n)&&Vi(n)>1)return e;let E=ze(n),A=c.getNode().getImmediateChild(_).updateChild(E,r);_===".priority"?l=d.updatePriority(c.getNode(),A):l=d.updateChild(c.getNode(),_,A,E,PM,null)}let f=CM(e,l,c.isFullyInitialized()||Ie(n),d.filtersNodes()),g=new Xu(i,f,s);return MM(t,f,n,i,g,a)}function wE(t,e,n,r,i,s,o){let a=e.eventCache,c,l,d=new Xu(i,e,s);if(Ie(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Yu(e,l,!0,t.filter.filtersNodes());else{let f=Ee(n);if(f===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Yu(e,l,a.isFullyInitialized(),a.isFiltered());else{let g=ze(n),_=a.getNode().getImmediateChild(f),E;if(Ie(g))E=r;else{let R=d.getCompleteChild(f);R!=null?lM(g)===".priority"&&R.getChild(hM(g)).isEmpty()?E=R:E=R.updateChild(g,r):E=Ye.EMPTY_NODE}if(_.equals(E))c=e;else{let R=t.filter.updateChild(a.getNode(),f,E,g,d,o);c=Yu(e,R,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function OP(t,e){return t.eventCache.isCompleteForChild(e)}function v9(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{let d=wt(n,c);OP(e,Ee(d))&&(a=wE(t,a,d,l,i,s,o))}),r.foreach((c,l)=>{let d=wt(n,c);OP(e,Ee(d))||(a=wE(t,a,d,l,i,s,o))}),a}function FP(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function EE(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Ie(n)?l=r:l=new sn(null).setTree(n,r);let d=e.serverCache.getNode();return l.children.inorderTraversal((f,g)=>{if(d.hasChild(f)){let _=e.serverCache.getNode().getImmediateChild(f),E=FP(t,_,g);c=bp(t,c,new Ve(f),E,i,s,o,a)}}),l.children.inorderTraversal((f,g)=>{let _=!e.serverCache.isCompleteForChild(f)&&g.value===null;if(!d.hasChild(f)&&!_){let E=e.serverCache.getNode().getImmediateChild(f),R=FP(t,E,g);c=bp(t,c,new Ve(f),R,i,s,o,a)}}),c}function I9(t,e,n,r,i,s,o){if(Cp(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Ie(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return bp(t,e,n,c.getNode().getChild(n),i,s,a,o);if(Ie(n)){let l=new sn(null);return c.getNode().forEachChild(Da,(d,f)=>{l=l.set(new Ve(d),f)}),EE(t,e,n,l,i,s,a,o)}else return e}else{let l=new sn(null);return r.foreach((d,f)=>{let g=wt(n,d);c.isCompleteForPath(g)&&(l=l.set(d,c.getNode().getChild(g)))}),EE(t,e,n,l,i,s,a,o)}}function w9(t,e,n,r,i){let s=e.serverCache,o=CM(e,s.getNode(),s.isFullyInitialized()||Ie(n),s.isFiltered());return MM(t,o,n,r,PM,i)}function E9(t,e,n,r,i,s){let o;if(Cp(r,n)!=null)return e;{let a=new Xu(r,e,i),c=e.eventCache.getNode(),l;if(Ie(n)||Ee(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=yE(r,Bs(e));else{let f=e.serverCache.getNode();F(f instanceof Ye,"serverChildren would be complete if leaf node"),d=RM(r,f)}d=d,l=t.filter.updateFullNode(c,d,s)}else{let d=Ee(n),f=FE(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?l=t.filter.updateChild(c,d,f,ze(n),a,s):e.eventCache.getNode().hasChild(d)?l=t.filter.updateChild(c,d,Ye.EMPTY_NODE,ze(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=yE(r,Bs(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||Cp(r,Me())!=null,Yu(e,l,o,t.filter.filtersNodes())}}function T9(t,e){let n=Bs(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ie(e)&&!n.getImmediateChild(Ee(e)).isEmpty())?n.getChild(e):null}function LP(t,e,n,r){e.type===Zr.MERGE&&e.source.queryId!==null&&(F(Bs(t.viewCache_),"We should always have a full cache before handling merges"),F(gE(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=_9(t.processor_,i,e,n,r);return m9(t.processor_,s.viewCache),F(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,C9(t,s.changes,s.viewCache.eventCache.getNode(),null)}function C9(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return X4(t.eventGenerator_,e,n,i)}var VP;function b9(t){F(!VP,"__referenceConstructor has already been defined"),VP=t}function LE(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return F(s!=null,"SyncTree gave us an op for an invalid query."),LP(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(LP(o,e,n,r));return s}}function VE(t,e){let n=null;for(let r of t.views.values())n=n||T9(r,e);return n}var UP;function D9(t){F(!UP,"__referenceConstructor has already been defined"),UP=t}var Dp=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new sn(null),this.pendingWriteTree_=p9(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function S9(t,e,n,r,i){return r9(t.pendingWriteTree_,e,n,r,i),i?Ap(t,new xa(IM(),e,n)):[]}function Ca(t,e,n=!1){let r=i9(t.pendingWriteTree_,e);if(s9(t.pendingWriteTree_,e)){let s=new sn(null);return r.snap!=null?s=s.set(Me(),!0):kn(r.children,o=>{s=s.set(new Ve(o),!0)}),Ap(t,new pE(r.path,s,n))}else return[]}function Sp(t,e,n){return Ap(t,new xa(wM(),e,n))}function A9(t,e,n){let r=sn.fromObject(n);return Ap(t,new Tp(wM(),e,r))}function R9(t,e,n,r){let i=LM(t,r);if(i!=null){let s=VM(i),o=s.path,a=s.queryId,c=Pn(o,e),l=new xa(EM(a),c,n);return UM(t,o,l)}else return[]}function N9(t,e,n,r){let i=LM(t,r);if(i){let s=VM(i),o=s.path,a=s.queryId,c=Pn(o,e),l=sn.fromObject(n),d=new Tp(EM(a),c,l);return UM(t,o,d)}else return[]}function kM(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=Pn(o,e),l=VE(a,c);if(l)return l});return AM(i,e,s,n,!0)}function Ap(t,e){return OM(e,t.syncPointTree_,null,DM(t.pendingWriteTree_,Me()))}function OM(t,e,n,r){if(Ie(t.path))return FM(t,e,n,r);{let i=e.get(Me());n==null&&i!=null&&(n=VE(i,Me()));let s=[],o=Ee(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let l=n?n.getImmediateChild(o):null,d=NM(r,o);s=s.concat(OM(a,c,l,d))}return i&&(s=s.concat(LE(i,t,r,n))),s}}function FM(t,e,n,r){let i=e.get(Me());n==null&&i!=null&&(n=VE(i,Me()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,l=NM(r,o),d=t.operationForChild(o);d&&(s=s.concat(FM(d,a,c,l)))}),i&&(s=s.concat(LE(i,t,r,n))),s}function LM(t,e){return t.tagToQueryMap.get(e)}function VM(t){let e=t.indexOf("$");return F(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ve(t.substr(0,e))}}function UM(t,e,n){let r=t.syncPointTree_.get(e);F(r,"Missing sync point for query tag that we're tracking");let i=DM(t.pendingWriteTree_,e);return LE(r,n,i,null)}var TE=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},CE=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=wt(this.path_,e);return new t(this.syncTree_,n)}node(){return kM(this.syncTree_,this.path_)}},x9=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},jP=function(t,e,n){if(!t||typeof t!="object")return t;if(F(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return P9(t[".sv"],e,n);if(typeof t[".sv"]=="object")return M9(t[".sv"],e);F(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},P9=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:F(!1,"Unexpected server value: "+t)}},M9=function(t,e,n){t.hasOwnProperty("increment")||F(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&F(!1,"Unexpected increment value: "+r);let i=e.node();if(F(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},k9=function(t,e,n,r){return UE(e,new CE(n,t),r)},O9=function(t,e,n){return UE(t,new TE(e),n)};function UE(t,e,n){let r=t.getPriority().val(),i=jP(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=jP(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Ra(a,Lt(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Ra(i))),o.forEachChild(Vt,(a,c)=>{let l=UE(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var el=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function jE(t,e){let n=e instanceof Ve?e:new Ve(e),r=t,i=Ee(n);for(;i!==null;){let s=qi(r.node.children,i)||{children:{},childCount:0};r=new el(i,r,s),n=ze(n),i=Ee(n)}return r}function Oa(t){return t.node.value}function jM(t,e){t.node.value=e,bE(t)}function BM(t){return t.node.childCount>0}function F9(t){return Oa(t)===void 0&&!BM(t)}function Rp(t,e){kn(t.node.children,(n,r)=>{e(new el(n,t,r))})}function $M(t,e,n,r){n&&!r&&e(t),Rp(t,i=>{$M(i,e,!0,r)}),n&&r&&e(t)}function L9(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function sl(t){return new Ve(t.parent===null?t.name:sl(t.parent)+"/"+t.name)}function bE(t){t.parent!==null&&V9(t.parent,t.name,t)}function V9(t,e,n){let r=F9(n),i=nr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,bE(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,bE(t))}var U9=/[\[\].#$\/\u0000-\u001F\u007F]/,j9=/[\[\].#$\u0000-\u001F\u007F]/,Uw=10*1024*1024,HM=function(t){return typeof t=="string"&&t.length!==0&&!U9.test(t)},B9=function(t){return typeof t=="string"&&t.length!==0&&!j9.test(t)},$9=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),B9(t)};var qM=function(t,e,n){let r=n instanceof Ve?new Xw(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ls(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ls(r)+" with contents = "+e.toString());if(GP(e))throw new Error(t+"contains "+e.toString()+" "+Ls(r));if(typeof e=="string"&&e.length>Uw/3&&hc(e)>Uw)throw new Error(t+"contains a string greater than "+Uw+" utf8 bytes "+Ls(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(kn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!HM(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ls(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);M4(r,o),qM(t,a,r),k4(r)}),i&&s)throw new Error(t+' contains ".value" child '+Ls(r)+" in addition to actual children.")}};var H9=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!HM(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!$9(n))throw new Error(YC(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var DE=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function q9(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!fM(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Hs(t,e,n){q9(t,n),z9(t,r=>Jn(r,e)||Jn(e,r))}function z9(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(G9(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function G9(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();Us&&Ft("event: "+n.toString()),rl(r)}}}var W9="repo_interrupt",K9=25,SE=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new DE,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ep(),this.transactionQueueTree_=new el,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function Q9(t,e,n){if(t.stats_=ME(t.repoInfo_),t.forceRestClient_||c4())t.server_=new uE(t.repoInfo_,(r,i,s,o)=>{BP(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>$P(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{vt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new kE(t.repoInfo_,e,(r,i,s,o)=>{BP(t,r,i,s,o)},r=>{$P(t,r)},r=>{Z9(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=l4(t.repoInfo_,()=>new fE(t.stats_,t.server_)),t.infoData_=new lE,t.infoSyncTree_=new Dp({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Sp(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),BE(t,"connected",!1),t.serverSyncTree_=new Dp({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);Hs(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function Y9(t){let n=t.infoData_.getNode(new Ve(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function zM(t){return x9({timestamp:Y9(t)})}function BP(t,e,n,r,i){t.dataUpdateCount++;let s=new Ve(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=lc(n,l=>Lt(l));o=N9(t.serverSyncTree_,s,c,i)}else{let c=Lt(n);o=R9(t.serverSyncTree_,s,c,i)}else if(r){let c=lc(n,l=>Lt(l));o=A9(t.serverSyncTree_,s,c)}else{let c=Lt(n);o=Sp(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=HE(t,s)),Hs(t.eventQueue_,a,o)}function $P(t,e){BE(t,"connected",e),e===!1&&X9(t)}function Z9(t,e){kn(e,(n,r)=>{BE(t,n,r)})}function BE(t,e,n){let r=new Ve("/.info/"+e),i=Lt(n);t.infoData_.updateSnapshot(r,i);let s=Sp(t.infoSyncTree_,r,i);Hs(t.eventQueue_,r,s)}function J9(t){return t.nextWriteId_++}function X9(t){GM(t,"onDisconnectEvents");let e=zM(t),n=Ep();dE(t.onDisconnect_,Me(),(i,s)=>{let o=k9(i,s,t.serverSyncTree_,e);vM(n,i,o)});let r=[];dE(n,Me(),(i,s)=>{r=r.concat(Sp(t.serverSyncTree_,i,s));let o=r3(t,i);HE(t,o)}),t.onDisconnect_=Ep(),Hs(t.eventQueue_,Me(),r)}function e3(t){t.persistentConnection_&&t.persistentConnection_.interrupt(W9)}function GM(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ft(n,...e)}function WM(t,e,n){return kM(t.serverSyncTree_,e,n)||Ye.EMPTY_NODE}function $E(t,e=t.transactionQueueTree_){if(e||Np(t,e),Oa(e)){let n=QM(t,e);F(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&t3(t,sl(e),n)}else BM(e)&&Rp(e,n=>{$E(t,n)})}function t3(t,e,n){let r=n.map(l=>l.currentWriteId),i=WM(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let d=n[l];F(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let f=Pn(e,d.path);s=s.updateChild(f,d.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{GM(t,"transaction put response",{path:c.toString(),status:l});let d=[];if(l==="ok"){let f=[];for(let g=0;g<n.length;g++)n[g].status=2,d=d.concat(Ca(t.serverSyncTree_,n[g].currentWriteId)),n[g].onComplete&&f.push(()=>n[g].onComplete(null,!0,n[g].currentOutputSnapshotResolved)),n[g].unwatcher();Np(t,jE(t.transactionQueueTree_,e)),$E(t,t.transactionQueueTree_),Hs(t.eventQueue_,e,d);for(let g=0;g<f.length;g++)rl(f[g])}else{if(l==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{_n("transaction at "+c.toString()+" failed: "+l);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=l}HE(t,e)}},o)}function HE(t,e){let n=KM(t,e),r=sl(n),i=QM(t,n);return n3(t,i,r),r}function n3(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Pn(n,c.path),d=!1,f;if(F(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,i=i.concat(Ca(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=K9)d=!0,f="maxretry",i=i.concat(Ca(t.serverSyncTree_,c.currentWriteId,!0));else{let g=WM(t,c.path,o);c.currentInputSnapshot=g;let _=e[a].update(g.val());if(_!==void 0){qM("transaction failed: Data returned ",_,c.path);let E=Lt(_);typeof _=="object"&&_!=null&&nr(_,".priority")||(E=E.updatePriority(g.getPriority()));let A=c.currentWriteId,M=zM(t),L=O9(E,g,M);c.currentOutputSnapshotRaw=E,c.currentOutputSnapshotResolved=L,c.currentWriteId=J9(t),o.splice(o.indexOf(A),1),i=i.concat(S9(t.serverSyncTree_,c.path,L,c.currentWriteId,c.applyLocally)),i=i.concat(Ca(t.serverSyncTree_,A,!0))}else d=!0,f="nodata",i=i.concat(Ca(t.serverSyncTree_,c.currentWriteId,!0))}Hs(t.eventQueue_,n,i),i=[],d&&(e[a].status=2,function(g){setTimeout(g,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}Np(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)rl(r[a]);$E(t,t.transactionQueueTree_)}function KM(t,e){let n,r=t.transactionQueueTree_;for(n=Ee(e);n!==null&&Oa(r)===void 0;)r=jE(r,n),e=ze(e),n=Ee(e);return r}function QM(t,e){let n=[];return YM(t,e,n),n.sort((r,i)=>r.order-i.order),n}function YM(t,e,n){let r=Oa(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Rp(e,i=>{YM(t,i,n)})}function Np(t,e){let n=Oa(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,jM(e,n.length>0?n:void 0)}Rp(e,r=>{Np(t,r)})}function r3(t,e){let n=sl(KM(t,e)),r=jE(t.transactionQueueTree_,e);return L9(r,i=>{jw(t,i)}),jw(t,r),$M(r,i=>{jw(t,i)}),n}function jw(t,e){let n=Oa(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(F(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(F(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Ca(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?jM(e,void 0):n.length=s+1,Hs(t.eventQueue_,sl(e),i);for(let o=0;o<r.length;o++)rl(r[o])}}function i3(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function s3(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):_n(`Invalid query segment '${n}' in query '${t}'`)}return e}var HP=function(t,e){let n=o3(t),r=n.namespace;n.domain==="firebase.com"&&Jr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Jr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||e4();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new gp(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Ve(n.pathString)}},o3=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let d=t.indexOf("/");d===-1&&(d=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(d,f)),d<f&&(i=i3(t.substring(d,f)));let g=s3(t.substring(Math.min(t.length,f)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let _=e.slice(0,l);if(_.toLowerCase()==="localhost")n="localhost";else if(_.split(".").length<=2)n=_;else{let E=e.indexOf(".");r=e.substring(0,E).toLowerCase(),n=e.substring(E+1),s=r}"ns"in g&&(s=g.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var AE=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Ie(this._path)?null:lM(this._path)}get ref(){return new Ma(this._repo,this._path)}get _queryIdentifier(){let e=RP(this._queryParams),n=PE(e);return n==="{}"?"default":n}get _queryObject(){return RP(this._queryParams)}isEqual(e){if(e=_e(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=fM(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+P4(this._path)}};var Ma=class t extends AE{constructor(e,n){super(e,n,new cE,!1)}get parent(){let e=hM(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};b9(Ma);D9(Ma);var a3="FIREBASE_DATABASE_EMULATOR_HOST",RE={},c3=!1;function u3(t,e,n,r){t.repoInfo_=new gp(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function l3(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Jr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ft("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=HP(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[a3]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=HP(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let d=i&&c?new Qu(Qu.OWNER):new Gw(t.name,t.options,e);H9("Invalid Firebase Database URL",o),Ie(o.path)||Jr("Database URL must point to the root of a Firebase Database (not including a child path).");let f=h3(a,t,d,new zw(t.name,n));return new NE(f,t)}function d3(t,e){let n=RE[e];(!n||n[t.key]!==t)&&Jr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),e3(t),delete n[t.key]}function h3(t,e,n,r){let i=RE[e.name];i||(i={},RE[e.name]=i);let s=i[t.toURLString()];return s&&Jr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new SE(t,c3,n,r),i[t.toURLString()]=s,s}var NE=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Q9(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ma(this._repo,Me())),this._rootInternal}_delete(){return this._rootInternal!==null&&(d3(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Jr("Cannot call "+e+" on a deleted database.")}};function ZM(t=ut(),e){let n=ct(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=ai("database");r&&JM(n,...r)}return n}function JM(t,e,n,r={}){t=_e(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Jr("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Jr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Qu(Qu.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:Js(r.mockUserToken,t.app.options.projectId);s=new Qu(o)}u3(i,e,n,s)}function f3(t){ZW(Yt),rt(new nt("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return l3(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),q(dP,hP,t),q(dP,hP,"esm2017")}kE.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};kE.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};f3();var ol=class{constructor(e){return e}},XM="database",qE=class{constructor(){return at(XM)}};var zE=new U("angularfire2.database-instances");function p3(t,e){let n=ht(XM,t,e);return n&&new ol(n)}function g3(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ol(r)}}var m3={provide:qE,deps:[[new te,zE]]},_3={provide:ol,useFactory:p3,deps:[[new te,zE],qe]};function ek(t,...e){return q("angularfire",He.full,"rtdb"),Ue([_3,m3,{provide:zE,useFactory:g3(t),multi:!0,deps:[Z,ve,et,Ke,[new te,Wn],[new te,nn],...e]}])}var tk=Ce(ZM,!0);var ik="functions";var GE=class{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){return y(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return y(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return y(this,null,function*(){if(this.appCheck){let n=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return n.error?null:n.token}return null})}getContext(e){return y(this,null,function*(){let n=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}})}};var WE="us-central1";var KE=class{constructor(e,n,r,i,s=WE,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new GE(n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(s);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=WE}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){let n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}};function y3(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}var nk="@firebase/functions",rk="0.11.8";var v3="auth-internal",I3="app-check-internal",w3="messaging-internal";function E3(t,e){let n=(r,{instanceIdentifier:i})=>{let s=r.getProvider("app").getImmediate(),o=r.getProvider(v3),a=r.getProvider(w3),c=r.getProvider(I3);return new KE(s,o,a,c,i,t)};rt(new nt(ik,n,"PUBLIC").setMultipleInstances(!0)),q(nk,rk,e),q(nk,rk,"esm2017")}function sk(t=ut(),e=WE){let r=ct(_e(t),ik).getImmediate({identifier:e}),i=ai("functions");return i&&ok(r,...i),r}function ok(t,e,n){y3(_e(t),e,n)}E3(fetch.bind(self));var al=class{constructor(e){return e}},ak="functions",QE=class{constructor(){return at(ak)}};var YE=new U("angularfire2.functions-instances");function T3(t,e){let n=ht(ak,t,e);return n&&new al(n)}function C3(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new al(r)}}var b3={provide:QE,deps:[[new te,YE]]},D3={provide:al,useFactory:T3,deps:[[new te,YE],qe]};function ck(t,...e){return q("angularfire",He.full,"fn"),Ue([D3,b3,{provide:YE,useFactory:C3(t),multi:!0,deps:[Z,ve,et,Ke,[new te,Wn],[new te,nn],...e]}])}var uk=Ce(sk,!0);var S3="/firebase-messaging-sw.js",A3="/firebase-cloud-messaging-push-scope",gk="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",R3="https://fcmregistrations.googleapis.com/v1",mk="google.c.a.c_id",N3="google.c.a.c_l",x3="google.c.a.ts",P3="google.c.a.e";var xp=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(xp||{});function Xr(t){let e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function M3(t){let e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}var ZE="fcm_token_details_db",k3=5,lk="fcm_token_object_Store";function O3(t){return y(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(ZE))return null;let e=null;return(yield vg(ZE,k3,{upgrade:(r,i,s,o)=>y(this,null,function*(){var a;if(i<2||!r.objectStoreNames.contains(lk))return;let c=o.objectStore(lk),l=yield c.index("fcmSenderId").get(t);if(yield c.clear(),!!l){if(i===2){let d=l;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(a=d.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:Xr(d.vapidKey)}}}else if(i===3){let d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Xr(d.auth),p256dh:Xr(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Xr(d.vapidKey)}}}else if(i===4){let d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Xr(d.auth),p256dh:Xr(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Xr(d.vapidKey)}}}}})})).close(),yield kl(ZE),yield kl("fcm_vapid_details_db"),yield kl("undefined"),F3(e)?e:null})}function F3(t){if(!t||!t.subscriptionOptions)return!1;let{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var L3="firebase-messaging-database",V3=1,cl="firebase-messaging-store",JE=null;function _k(){return JE||(JE=vg(L3,V3,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(cl)}}})),JE}function U3(t){return y(this,null,function*(){let e=yk(t),r=yield(yield _k()).transaction(cl).objectStore(cl).get(e);if(r)return r;{let i=yield O3(t.appConfig.senderId);if(i)return yield tT(t,i),i}})}function tT(t,e){return y(this,null,function*(){let n=yk(t),i=(yield _k()).transaction(cl,"readwrite");return yield i.objectStore(cl).put(e,n),yield i.done,e})}function yk({appConfig:t}){return t.appId}var j3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Kt=new tr("messaging","Messaging",j3);function B3(t,e){return y(this,null,function*(){let n=yield rT(t),r=vk(e),i={method:"POST",headers:n,body:JSON.stringify(r)},s;try{s=yield(yield fetch(nT(t.appConfig),i)).json()}catch(o){throw Kt.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw Kt.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw Kt.create("token-subscribe-no-token");return s.token})}function $3(t,e){return y(this,null,function*(){let n=yield rT(t),r=vk(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},s;try{s=yield(yield fetch(`${nT(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw Kt.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw Kt.create("token-update-failed",{errorInfo:o})}if(!s.token)throw Kt.create("token-update-no-token");return s.token})}function H3(t,e){return y(this,null,function*(){let r={method:"DELETE",headers:yield rT(t)};try{let s=yield(yield fetch(`${nT(t.appConfig)}/${e}`,r)).json();if(s.error){let o=s.error.message;throw Kt.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw Kt.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})}function nT({projectId:t}){return`${R3}/projects/${t}/registrations`}function rT(n){return y(this,arguments,function*({appConfig:t,installations:e}){let r=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})})}function vk({p256dh:t,auth:e,endpoint:n,vapidKey:r}){let i={web:{endpoint:n,auth:e,p256dh:t}};return r!==gk&&(i.web.applicationPubKey=r),i}var q3=7*24*60*60*1e3;function z3(t){return y(this,null,function*(){let e=yield W3(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Xr(e.getKey("auth")),p256dh:Xr(e.getKey("p256dh"))},r=yield U3(t.firebaseDependencies);if(r){if(K3(r.subscriptionOptions,n))return Date.now()>=r.createTime+q3?G3(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield H3(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return dk(t.firebaseDependencies,n)}else return dk(t.firebaseDependencies,n)})}function G3(t,e){return y(this,null,function*(){try{let n=yield $3(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield tT(t.firebaseDependencies,r),n}catch(n){throw n}})}function dk(t,e){return y(this,null,function*(){let r={token:yield B3(t,e),createTime:Date.now(),subscriptionOptions:e};return yield tT(t,r),r.token})}function W3(t,e){return y(this,null,function*(){let n=yield t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:M3(e)})})}function K3(t,e){let n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}function hk(t){let e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return Q3(e,t),Y3(e,t),Z3(e,t),e}function Q3(t,e){if(!e.notification)return;t.notification={};let n=e.notification.title;n&&(t.notification.title=n);let r=e.notification.body;r&&(t.notification.body=r);let i=e.notification.image;i&&(t.notification.image=i);let s=e.notification.icon;s&&(t.notification.icon=s)}function Y3(t,e){e.data&&(t.data=e.data)}function Z3(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};let a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);let c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(t.fcmOptions.analyticsLabel=c)}function J3(t){return typeof t=="object"&&!!t&&mk in t}X3("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function X3(t,e){let n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function e6(t){if(!t||!t.options)throw XE("App Configuration Object");if(!t.name)throw XE("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(let r of e)if(!n[r])throw XE(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function XE(t){return Kt.create("missing-app-config-values",{valueName:t})}var eT=class{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=e6(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}};function t6(t){return y(this,null,function*(){try{t.swRegistration=yield navigator.serviceWorker.register(S3,{scope:A3}),t.swRegistration.update().catch(()=>{})}catch(e){throw Kt.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function n6(t,e){return y(this,null,function*(){if(!e&&!t.swRegistration&&(yield t6(t)),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Kt.create("invalid-sw-registration");t.swRegistration=e}})}function r6(t,e){return y(this,null,function*(){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=gk)})}function i6(t,e){return y(this,null,function*(){if(!navigator)throw Kt.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw Kt.create("permission-blocked");return yield r6(t,e?.vapidKey),yield n6(t,e?.serviceWorkerRegistration),z3(t)})}function s6(t,e,n){return y(this,null,function*(){let r=o6(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[mk],message_name:n[N3],message_time:n[x3],message_device_time:Math.floor(Date.now()/1e3)})})}function o6(t){switch(t){case xp.NOTIFICATION_CLICKED:return"notification_open";case xp.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function a6(t,e){return y(this,null,function*(){let n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===xp.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(hk(n)):t.onMessageHandler.next(hk(n)));let r=n.data;J3(r)&&r[P3]==="1"&&(yield s6(t,n.messageType,r))})}var fk="@firebase/messaging",pk="0.12.12";var c6=t=>{let e=new eT(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>a6(e,n)),e},u6=t=>{let e=t.getProvider("messaging").getImmediate();return{getToken:r=>i6(e,r)}};function l6(){rt(new nt("messaging",c6,"PUBLIC")),rt(new nt("messaging-internal",u6,"PRIVATE")),q(fk,pk),q(fk,pk,"esm2017")}function iT(){return y(this,null,function*(){try{yield Hi()}catch{return!1}return typeof window<"u"&&Sr()&&cc()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function Ik(t=ut()){return iT().then(e=>{if(!e)throw Kt.create("unsupported-browser")},e=>{throw Kt.create("indexed-db-unsupported")}),ct(_e(t),"messaging").getImmediate()}l6();var ul=class{constructor(e){return e}},wk="messaging",sT=class{constructor(){return at(wk)}};var Ek="__angularfire_symbol__messagingIsSupported",oT="__angularfire_symbol__messagingIsSupportedValue";globalThis[Ek]||=iT().then(t=>globalThis[oT]=t).catch(()=>globalThis[oT]=!1);var Pp={async:()=>globalThis[Ek],sync:()=>{let t=globalThis[oT];if(t===void 0)throw new Error(Yo("Messaging"));return t}},aT=new U("angularfire2.messaging-instances");function d6(t,e){if(!Pp.sync())return null;let n=ht(wk,t,e);return n&&new ul(n)}function h6(t){return(e,n)=>{if(!Pp.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new ul(r)}}var f6={provide:sT,deps:[[new te,aT]]},p6={provide:ul,useFactory:d6,deps:[[new te,aT],qe]};function Tk(t,...e){return q("angularfire",He.full,"fcm"),Ue([p6,f6,{provide:Ci,useValue:Pp.async,multi:!0},{provide:aT,useFactory:h6(t),multi:!0,deps:[Z,ve,et,Ke,...e]}])}var Tse=Pp.async;var Ck=Ce(Ik,!0);var ll=class{constructor(e){return e}},bk="performance",cT=class{constructor(){return at(bk)}};var uT=new U("angularfire2.performance-instances");function g6(t,e,n){if(!P_(n))return null;let r=ht(bk,t,e);return r&&new ll(r)}function m6(t){return(e,n,r)=>{if(!P_(n))return null;let i=e.runOutsideAngular(()=>t(r));return new ll(i)}}var _6={provide:cT,deps:[[new te,uT]]},y6={provide:ll,useFactory:g6,deps:[[new te,uT],qe,Hn]};function Dk(t,...e){return q("angularfire",He.full,"perf"),Ue([y6,_6,{provide:uT,useFactory:m6(t),multi:!0,deps:[Z,Hn,ve,et,Ke,...e]}])}var Sk=Ce(XC,!0);var Mk="firebasestorage.googleapis.com",v6="storageBucket",I6=2*60*1e3,w6=10*60*1e3;var Ir=class t extends Qt{constructor(e,n,r=0){super(lT(e),`Firebase Storage: ${n} (${lT(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return lT(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},ti=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(ti||{});function lT(t){return"storage/"+t}function E6(){let t="An unknown error occurred, please check the error payload for server response.";return new Ir(ti.UNKNOWN,t)}function T6(){return new Ir(ti.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function C6(){return new Ir(ti.CANCELED,"User canceled the upload/download.")}function b6(t){return new Ir(ti.INVALID_URL,"Invalid URL '"+t+"'.")}function D6(t){return new Ir(ti.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Ak(t){return new Ir(ti.INVALID_ARGUMENT,t)}function kk(){return new Ir(ti.APP_DELETED,"The Firebase app was deleted.")}function S6(t){return new Ir(ti.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var ei=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw D6(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(G){G.path.charAt(G.path.length-1)==="/"&&(G.path_=G.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(G){G.path_=decodeURIComponent(G.path)}let d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",_=new RegExp(`^https?://${f}/${d}/b/${i}/o${g}`,"i"),E={bucket:1,path:3},R=n===Mk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",M=new RegExp(`^https?://${R}/${i}/${A}`,"i"),$=[{regex:a,indices:c,postModify:s},{regex:_,indices:E,postModify:l},{regex:M,indices:{bucket:1,path:2},postModify:l}];for(let G=0;G<$.length;G++){let ke=$[G],Y=ke.regex.exec(e);if(Y){let T=Y[ke.indices.bucket],v=Y[ke.indices.path];v||(v=""),r=new t(T,v),ke.postModify(r);break}}if(r==null)throw b6(e);return r}},dT=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function A6(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function d(...A){l||(l=!0,e.apply(null,A))}function f(A){i=setTimeout(()=>{i=null,t(_,c())},A)}function g(){s&&clearTimeout(s)}function _(A,...M){if(l){g();return}if(A){g(),d.call(null,A,...M);return}if(c()||o){g(),d.call(null,A,...M);return}r<64&&(r*=2);let $;a===1?(a=2,$=0):$=(r+Math.random())*1e3,f($)}let E=!1;function R(A){E||(E=!0,g(),!l&&(i!==null?(A||(a=2),clearTimeout(i),f(0)):A||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,R(!0)},n),R}function R6(t){t(!1)}function N6(t){return t!==void 0}function Rk(t,e,n,r){if(r<e)throw Ak(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ak(`Invalid value for '${t}'. Expected ${n} or less.`)}function x6(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var hT=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(hT||{});function P6(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var fT=class{constructor(e,n,r,i,s,o,a,c,l,d,f,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=d,this.connectionFactory_=f,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,E)=>{this.resolve_=_,this.reject_=E,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Fa(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===hT.NO_ERROR,c=s.getStatus();if(!a||P6(c,this.additionalRetryCodes_)&&this.retry){let d=s.getErrorCode()===hT.ABORT;r(!1,new Fa(!1,null,d));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new Fa(l,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());N6(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=E6();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?kk():C6();o(c)}else{let c=T6();o(c)}};this.canceled_?n(!1,new Fa(!1,null,!0)):this.backoffId_=A6(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&R6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Fa=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function M6(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function k6(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function O6(t,e){e&&(t["X-Firebase-GMPID"]=e)}function F6(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function L6(t,e,n,r,i,s,o=!0){let a=x6(t.urlParams),c=t.url+a,l=Object.assign({},t.headers);return O6(l,e),M6(l,n),k6(l,s),F6(l,r),new fT(c,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}function V6(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function U6(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}var jse=256*1024;var pT=class t{constructor(e,n){this._service=e,n instanceof ei?this._location=n:this._location=ei.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new ei(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return U6(this._location.path)}get storage(){return this._service}get parent(){let e=V6(this._location.path);if(e===null)return null;let n=new ei(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw S6(e)}};function Nk(t,e){let n=e?.[v6];return n==null?null:ei.makeFromBucketSpec(n,t)}function j6(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Js(i,t.app.options.projectId))}var gT=class{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Mk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=I6,this._maxUploadRetryTime=w6,this._requests=new Set,i!=null?this._bucket=ei.makeFromBucketSpec(i,this._host):this._bucket=Nk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ei.makeFromBucketSpec(this._url,e):this._bucket=Nk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Rk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Rk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return y(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return y(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new pT(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new dT(kk());{let o=L6(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return y(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},xk="@firebase/storage",Pk="0.13.2";var Ok="storage";function Fk(t=ut(),e){t=_e(t);let r=ct(t,Ok).getImmediate({identifier:e}),i=ai("storage");return i&&Lk(r,...i),r}function Lk(t,e,n,r={}){j6(t,e,n,r)}function B6(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new gT(n,r,i,e,Yt)}function $6(){rt(new nt(Ok,B6,"PUBLIC").setMultipleInstances(!0)),q(xk,Pk,""),q(xk,Pk,"esm2017")}$6();var dl=class{constructor(e){return e}},Vk="storage",mT=class{constructor(){return at(Vk)}};var _T=new U("angularfire2.storage-instances");function H6(t,e){let n=ht(Vk,t,e);return n&&new dl(n)}function q6(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new dl(r)}}var z6={provide:mT,deps:[[new te,_T]]},G6={provide:dl,useFactory:H6,deps:[[new te,_T],qe]};function Uk(t,...e){return q("angularfire",He.full,"gcs"),Ue([G6,z6,{provide:_T,useFactory:q6(t),multi:!0,deps:[Z,ve,et,Ke,[new te,Wn],[new te,nn],...e]}])}var jk=Ce(Fk,!0);var yT="@firebase/remote-config",Bk="0.4.9";var $k="remote-config";var W6={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},on=new tr("remoteconfig","Remote Config",W6);function Hk(t=ut()){return t=_e(t),ct(t,$k).getImmediate()}function qk(t){let e=_e(t);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}var vT=class{constructor(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let r=Date.now()-n,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){return y(this,null,function*(){let[n,r]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n))return r;e.eTag=r&&r.eTag;let i=yield this.client.fetch(e),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return i.status===200&&s.push(this.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(s),i})}};function K6(t=navigator){return t.languages&&t.languages[0]||t.language}var IT=class{constructor(e,n,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){return y(this,null,function*(){let[n,r]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,o={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:K6()},c={method:"POST",headers:o,body:JSON.stringify(a)},l=fetch(s,c),d=new Promise((A,M)=>{e.signal.addEventListener(()=>{let L=new Error("The operation was aborted.");L.name="AbortError",M(L)})}),f;try{yield Promise.race([l,d]),f=yield l}catch(A){let M="fetch-client-network";throw A?.name==="AbortError"&&(M="fetch-timeout"),on.create(M,{originalErrorMessage:A?.message})}let g=f.status,_=f.headers.get("ETag")||void 0,E,R;if(f.status===200){let A;try{A=yield f.json()}catch(M){throw on.create("fetch-client-parse",{originalErrorMessage:M?.message})}E=A.entries,R=A.state}if(R==="INSTANCE_STATE_UNSPECIFIED"?g=500:R==="NO_CHANGE"?g=304:(R==="NO_TEMPLATE"||R==="EMPTY_CONFIG")&&(E={}),g!==304&&g!==200)throw on.create("fetch-status",{httpStatus:g});return{status:g,eTag:_,config:E}})}};function Q6(t,e){return new Promise((n,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(on.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Y6(t){if(!(t instanceof Qt)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var wT=class{constructor(e,n){this.client=e,this.storage=n}fetch(e){return y(this,null,function*(){let n=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,n)})}attemptFetch(i,s){return y(this,arguments,function*(e,{throttleEndTimeMillis:n,backoffCount:r}){yield Q6(e.signal,n);try{let o=yield this.client.fetch(e);return yield this.storage.deleteThrottleMetadata(),o}catch(o){if(!Y6(o))throw o;let a={throttleEndTimeMillis:Date.now()+fc(r),backoffCount:r+1};return yield this.storage.setThrottleMetadata(a),this.attemptFetch(e,a)}})}};var Z6=60*1e3,J6=12*60*60*1e3,ET=class{constructor(e,n,r,i,s){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:Z6,minimumFetchIntervalMillis:J6},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}};function Mp(t,e){let n=t.target.error||void 0;return on.create(e,{originalErrorMessage:n&&n?.message})}var qs="app_namespace_store",X6="firebase_remote_config",e5=1;function t5(){return new Promise((t,e)=>{try{let n=indexedDB.open(X6,e5);n.onerror=r=>{e(Mp(r,"storage-open"))},n.onsuccess=r=>{t(r.target.result)},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(qs,{keyPath:"compositeKey"})}}}catch(n){e(on.create("storage-open",{originalErrorMessage:n?.message}))}})}var TT=class{constructor(e,n,r,i=t5()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){return y(this,null,function*(){let n=yield this.openDbPromise;return new Promise((r,i)=>{let o=n.transaction([qs],"readonly").objectStore(qs),a=this.createCompositeKey(e);try{let c=o.get(a);c.onerror=l=>{i(Mp(l,"storage-get"))},c.onsuccess=l=>{let d=l.target.result;r(d?d.value:void 0)}}catch(c){i(on.create("storage-get",{originalErrorMessage:c?.message}))}})})}set(e,n){return y(this,null,function*(){let r=yield this.openDbPromise;return new Promise((i,s)=>{let a=r.transaction([qs],"readwrite").objectStore(qs),c=this.createCompositeKey(e);try{let l=a.put({compositeKey:c,value:n});l.onerror=d=>{s(Mp(d,"storage-set"))},l.onsuccess=()=>{i()}}catch(l){s(on.create("storage-set",{originalErrorMessage:l?.message}))}})})}delete(e){return y(this,null,function*(){let n=yield this.openDbPromise;return new Promise((r,i)=>{let o=n.transaction([qs],"readwrite").objectStore(qs),a=this.createCompositeKey(e);try{let c=o.delete(a);c.onerror=l=>{i(Mp(l,"storage-delete"))},c.onsuccess=()=>{r()}}catch(c){i(on.create("storage-delete",{originalErrorMessage:c?.message}))}})})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}};var CT=class{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){return y(this,null,function*(){let e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),i=yield e;i&&(this.lastFetchStatus=i);let s=yield n;s&&(this.lastSuccessfulFetchTimestampMillis=s);let o=yield r;o&&(this.activeConfig=o)})}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}};function n5(){rt(new nt($k,t,"PUBLIC").setMultipleInstances(!0)),q(yT,Bk),q(yT,Bk,"esm2017");function t(e,{instanceIdentifier:n}){let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw on.create("registration-window");if(!Sr())throw on.create("indexed-db-unavailable");let{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw on.create("registration-project-id");if(!o)throw on.create("registration-api-key");if(!a)throw on.create("registration-app-id");n=n||"firebase";let c=new TT(a,r.name,n),l=new CT(c),d=new rr(yT);d.logLevel=Nt.ERROR;let f=new IT(i,Yt,n,s,o,a),g=new wT(f,c),_=new vT(g,c,l,d),E=new ET(r,_,l,c,d);return qk(E),E}}function zk(){return y(this,null,function*(){if(!Sr())return!1;try{return yield Hi()}catch{return!1}})}n5();var hl=class{constructor(e){return e}},Gk="remote-config",bT=class{constructor(){return at(Gk)}};var DT="__angularfire_symbol__remoteConfigIsSupportedValue",Wk="__angularfire_symbol__remoteConfigIsSupported";globalThis[Wk]||=zk().then(t=>globalThis[DT]=t).catch(()=>globalThis[DT]=!1);var kp={async:()=>globalThis[Wk],sync:()=>{let t=globalThis[DT];if(t===void 0)throw new Error(Yo("RemoteConfig"));return t}},ST=new U("angularfire2.remote-config-instances");function r5(t,e){if(!kp.sync())return null;let n=ht(Gk,t,e);return n&&new hl(n)}function i5(t){return(e,n)=>{if(!kp.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new hl(r)}}var s5={provide:bT,deps:[[new te,ST]]},o5={provide:hl,useFactory:r5,deps:[[new te,ST],qe]};function Kk(t,...e){return q("angularfire",He.full,"rc"),Ue([o5,s5,{provide:Ci,useValue:kp.async,multi:!0},{provide:ST,useFactory:i5(t),multi:!0,deps:[Z,ve,et,Ke,...e]}])}var Loe=kp.async;var Qk=Ce(Hk,!0);var Yk="@firebase/vertexai-preview",Zk="0.0.4";var Jk="vertexAI",Xk="us-central1";var AT=class{constructor(e,n,r,i){var s;this.app=e,this.options=i;let o=r?.getImmediate({optional:!0}),a=n?.getImmediate({optional:!0});this.auth=a||null,this.appCheck=o||null,this.location=((s=this.options)===null||s===void 0?void 0:s.location)||Xk}_delete(){return Promise.resolve()}};var RT=function(t){return t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.OTHER="OTHER",t}(RT||{});var Hoe=[RT.RECITATION,RT.SAFETY];function eO(t=ut(),e){return t=_e(t),ct(t,Jk).getImmediate({identifier:e?.location||Xk})}function a5(){rt(new nt(Jk,(t,{instanceIdentifier:e})=>{let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new AT(n,r,i,{location:e})},"PUBLIC").setMultipleInstances(!0)),q(Yk,Zk),q(Yk,Zk,"esm2017")}a5();var fl=class{constructor(e){return e}},tO="vertexai",NT=class{constructor(){return at(tO)}};var xT=new U("angularfire2.vertexai-instances");function c5(t,e){let n=ht(tO,t,e);return n&&new fl(n)}function u5(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new fl(r)}}var l5={provide:NT,deps:[[new te,xT]]},d5={provide:fl,useFactory:c5,deps:[[new te,xT],qe]};function nO(t,...e){return q("angularfire",He.full,"vertexai"),Ue([d5,l5,{provide:xT,useFactory:u5(t),multi:!0,deps:[Z,ve,et,Ke,[new te,nn],...e]}])}var rO=Ce(eO,!0);var iO={firebaseConfig:{apiKey:"AIzaSyBggO56pZ3V5jgNnv_4i_CpUbgU_iGvcsk",authDomain:"dash-boar-7ee0d.firebaseapp.com",projectId:"dash-boar-7ee0d",storageBucket:"dash-boar-7ee0d.firebasestorage.app",messagingSenderId:"325394396819",appId:"1:325394396819:web:e9673769b33be96849bf66",measurementId:"G-V0X3V5XKL2"},production:!0};var sO={providers:[M0({eventCoalescing:!0}),UA(jA),BA(()=>$A(iO.firebaseConfig)),kR(()=>FR()),rN(()=>tN()),nN,wv,oP(()=>cP()),ek(()=>tk()),ck(()=>uk()),Tk(()=>Ck()),Dk(()=>Sk()),Uk(()=>jk()),Kk(()=>Qk()),nO(()=>rO())]};var wr=class t{constructor(){}get(){return{durationHour:24,endTyreChangeWindowHour:14,fuelDurationMinute:120,minDriverChange:30,minStintMinute:5,minTyreChange:1,startTyreChangeWindowHour:10}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};var La=class t{firestore=P(Fs);destroy$=new it;constructor(){}delete(e){return aP(hp(this.collectionRef,e))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}generateNextId(){return y(this,null,function*(){let e=yield Pw(this.collectionRef),n=0;return e.forEach(r=>{let i=r.data(),s=parseInt(i.id,10);!isNaN(s)&&s>n&&(n=s)}),(n+1).toString()})}createData(e,n){let r=hp(this.collectionRef,e);return Mw(r,n)}updateData(e,n){return Mw(hp(this.collectionRef,e),n,{merge:!0})}getDataById(e){return y(this,null,function*(){let n=uP(this.collectionRef,lP("id","==",e)),r=yield Pw(n);if(!r.empty)return r.docs[0].data()})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};var h5=Math.pow(10,8)*24*60*60*1e3,Rae=-h5;var oO=864e5,Op=6e4,Fp=36e5;var f5=3600;var aO=f5*24,Nae=aO*7,p5=aO*365.2425,g5=p5/12,xae=g5*3,PT=Symbol.for("constructDateFrom");function yn(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&PT in t?t[PT](e):t instanceof Date?new t.constructor(e):new Date(e)}function Be(t,e){return yn(e||t,t)}function cO(t,e,n){let r=Be(t,n?.in);return isNaN(e)?yn(n?.in||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function uO(t,e,n){let r=Be(t,n?.in);if(isNaN(e))return yn(n?.in||t,NaN);if(!e)return r;let i=r.getDate(),s=yn(n?.in||t,r.getTime());s.setMonth(r.getMonth()+e+1,0);let o=s.getDate();return i>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function Va(t,e,n){let{years:r=0,months:i=0,weeks:s=0,days:o=0,hours:a=0,minutes:c=0,seconds:l=0}=e,d=Be(t,n?.in),f=i||r?uO(d,i+r*12):d,g=o||s?cO(f,o+s*7):f,_=c+a*60,R=(l+_*60)*1e3;return yn(n?.in||t,+g+R)}function lO(t,e,n){return yn(n?.in||t,+Be(t)+e)}function Lp(t,e,n){return lO(t,e*Fp,n)}function MT(t){let e=Be(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Ut(t,...e){let n=yn.bind(null,t||e.find(r=>typeof r=="object"));return e.map(n)}function kT(t,e){let n=Be(t,e?.in);return n.setHours(0,0,0,0),n}function dO(t,e,n){let[r,i]=Ut(n?.in,t,e),s=kT(r),o=kT(i),a=+s-MT(s),c=+o-MT(o);return Math.round((a-c)/oO)}function hO(t,e,n){let r=Be(t,n?.in);return r.setTime(r.getTime()+e*Op),r}function zs(t,e){let n=+Be(t)-+Be(e);return n<0?-1:n>0?1:n}function fO(t,e,n){let[r,i]=Ut(n?.in,t,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function pO(t,e,n){let[r,i]=Ut(n?.in,t,e);return r.getFullYear()-i.getFullYear()}function mO(t,e,n){let[r,i]=Ut(n?.in,t,e),s=gO(r,i),o=Math.abs(dO(r,i));r.setDate(r.getDate()-s*o);let a=+(gO(r,i)===-s),c=s*(o-a);return c===0?0:c}function gO(t,e){let n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function Ua(t){return e=>{let r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function _O(t,e,n){let[r,i]=Ut(n?.in,t,e),s=(+r-+i)/Fp;return Ua(n?.roundingMethod)(s)}function Vp(t,e){return+Be(t)-+Be(e)}function Up(t,e,n){let r=Vp(t,e)/Op;return Ua(n?.roundingMethod)(r)}function yO(t,e){let n=Be(t,e?.in);return n.setHours(23,59,59,999),n}function vO(t,e){let n=Be(t,e?.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function IO(t,e){let n=Be(t,e?.in);return+yO(n,e)==+vO(n,e)}function wO(t,e,n){let[r,i,s]=Ut(n?.in,t,t,e),o=zs(i,s),a=Math.abs(fO(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let c=zs(i,s)===-o;IO(r)&&a===1&&zs(r,s)===1&&(c=!1);let l=o*(a-+c);return l===0?0:l}function EO(t,e,n){let r=Vp(t,e)/1e3;return Ua(n?.roundingMethod)(r)}function TO(t,e,n){let[r,i]=Ut(n?.in,t,e),s=zs(r,i),o=Math.abs(pO(r,i));r.setFullYear(1584),i.setFullYear(1584);let a=zs(r,i)===-s,c=s*(o-+a);return c===0?0:c}function CO(t,e){let[n,r]=Ut(t,e.start,e.end);return{start:n,end:r}}function OT(t,e){let{start:n,end:r}=CO(e?.in,t),i={},s=TO(r,n);s&&(i.years=s);let o=Va(n,{years:i.years}),a=wO(r,o);a&&(i.months=a);let c=Va(o,{months:i.months}),l=mO(r,c);l&&(i.days=l);let d=Va(c,{days:i.days}),f=_O(r,d);f&&(i.hours=f);let g=Va(d,{hours:i.hours}),_=Up(r,g);_&&(i.minutes=_);let E=Va(g,{minutes:i.minutes}),R=EO(r,E);return R&&(i.seconds=R),i}var Er=class t extends La{collectionPath="/races";collectionRef=dp(this.firestore,this.collectionPath);raceConfigService=P(wr);activeRace=v_(void 0);constructor(){super(),this.getAll().pipe(Ln(this.destroy$)).subscribe(e=>{let n=this.getActiveRace(e);this.activeRace.set(n)})}getAll(){return lp(this.collectionRef).pipe(Ln(this.destroy$),Q(e=>e.filter(n=>!n.deleted)))}create(e){return y(this,null,function*(){return this.activeRace()!==void 0?(console.warn("Race already active -> "+this.activeRace()),Promise.resolve()):(e.id=yield this.generateNextId(),this.createData(e.id,e))})}updateRace(e){return this.updateData(e.id,e)}getById(e){return this.getDataById(e)}getActiveRace(e){let n=new Date;for(let r of e)if(Lp(r.start.toDate(),this.raceConfigService.get().durationHour)>n)return r}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};function bO(t,e){let n=OT({end:e,start:t});return DO(n)}function Gs(t){let e=OT({end:t,start:new Date});return DO(e)}function DO(t){return t.hours&&t.hours<0||t.minutes&&t.minutes<0||t.seconds&&t.seconds<0?"00:00:00":[FT(t.hours),FT(t.minutes),FT(t.seconds)].join(":")}function FT(t){return t?t<10?`0${t}`:`${t}`:"00"}function Tr(t){t||(Zd(Tr),t=P(Po));let e=new ae(n=>t.onDestroy(n.next.bind(n)));return n=>n.pipe(Ln(e))}function pl(t,e){!e?.injector&&Zd(pl);let n=e?.injector??P(ve),r=new Ic(1),i=C_(()=>{let s;try{s=t()}catch(o){fh(()=>r.error(o));return}fh(()=>r.next(s))},{injector:n,manualCleanup:!0});return n.get(Po).onDestroy(()=>{i.destroy(),r.complete()}),r.asObservable()}function m5(t,e){if(t&1){let n=D0();ie(0,"button",2),Ti("click",function(){dS(n);let i=dn();return hS(i.startRace())}),ue(1," Start race "),ne()}}function _5(t,e){if(t&1&&(ie(0,"div",1),ue(1),ne()),t&2){let n=dn();Pe(),Pt(" ",n.countdown," ")}}var jp=class t{raceService=P(Er);raceConfigService=P(wr);durationHour=this.raceConfigService.get().durationHour;activeRace=this.raceService.activeRace;countdown="--:--:--";constructor(){Yi(1e3).pipe(Tr()).subscribe(()=>{let e=this.activeRace();if(e){let n=Lp(e.start.toDate(),this.durationHour);this.countdown=Gs(n)}})}startRace(){this.raceService.create({id:"1",start:yt.now(),deleted:!1})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Cn({type:t,selectors:[["app-race"]],standalone:!0,features:[An],decls:2,vars:1,consts:[[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded"],[1,"text-2xl","md:text-4xl","font-bold","font-mono","dark:text-white"],[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded",3,"click"]],template:function(n,r){n&1&&bn(0,m5,2,0,"button",0)(1,_5,2,1,"div",1),n&2&&Dn(r.activeRace()?1:0)}})};var ja=class t extends La{raceService=P(Er);collectionPath="/pits";collectionRef=dp(this.firestore,this.collectionPath);activeRace;constructor(){super(),this.activeRace=this.raceService.activeRace}getRacePits(){return di({pits:lp(this.collectionRef),activeRace:pl(this.activeRace)}).pipe(Ln(this.destroy$),Q(({pits:e,activeRace:n})=>n?e.filter(r=>!r.deleted&&r.raceId===n.id):[]))}create(e){return y(this,null,function*(){return e.id=yield this.generateNextId(),this.createData(e.id,e)})}update(e){return this.updateData(e.id,e)}getById(e){return this.getDataById(e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};var y5=t=>({"mb-2":t}),v5=t=>({"animate-bounce":t});function I5(t,e){if(t&1&&(ie(0,"div",4),ue(1),ne()),t&2){let n=dn();Pe(),Pt(" Remaining: ",n.remainingTyreChange," ")}}function w5(t,e){t&1&&(ie(0,"div",5),ue(1," Completed! "),ne())}function E5(t,e){if(t&1&&(ie(0,"div",6),ue(1," Window open "),ne()),t&2){let n=dn();ln("ngClass",Mo(1,v5,n.remainingTyreChange>0))}}function T5(t,e){t&1&&(ie(0,"div",7),ue(1," Window close "),ne())}function C5(t,e){if(t&1&&(ue(0),ko(1,"date")),t&2){let n=dn(2);Pt(" ",Oo(1,1,n.openingTime(),"HH:mm:ss")," ")}}function b5(t,e){t&1&&ue(0," --:--:-- ")}function D5(t,e){if(t&1&&(ue(0),ko(1,"date")),t&2){let n=dn(2);Pt(" ",Oo(1,1,n.closingTime(),"HH:mm:ss")," ")}}function S5(t,e){t&1&&ue(0," --:--:-- ")}function A5(t,e){if(t&1&&(ie(0,"div",8)(1,"div")(2,"div",9),ue(3,"Opening time"),ne(),ie(4,"div",10),bn(5,C5,2,4)(6,b5,1,0),ne()(),ie(7,"div")(8,"div",11),ue(9,"Closing time"),ne(),ie(10,"div",12),bn(11,D5,2,4)(12,S5,1,0),ne()()(),ie(13,"div",13)(14,"div")(15,"div",9),ue(16,"Opening in"),ne(),ie(17,"div",10),ue(18),ne()(),ie(19,"div")(20,"div",11),ue(21,"Closing in"),ne(),ie(22,"div",12),ue(23),ne()()()),t&2){let n=dn();Pe(5),Dn(n.openingTime()?5:6),Pe(6),Dn(n.closingTime()?11:12),Pe(7),Pt(" ",n.countdownOpeningTime," "),Pe(5),Pt(" ",n.countdownClosingTime," ")}}var $p=class t{raceService=P(Er);raceConfigService=P(wr);pitService=P(ja);startTyreChangeWindowHour=this.raceConfigService.get().startTyreChangeWindowHour;endTyreChangeWindowHour=this.raceConfigService.get().endTyreChangeWindowHour;minTyreChange=this.raceConfigService.get().minTyreChange;activeRace=this.raceService.activeRace;isOpen=!0;isTyreChangeWindowOpen=!1;remainingTyreChange=this.raceConfigService.get().minTyreChange;openingTime=hh(()=>{let e=this.activeRace();if(e){let n=e.start.toDate().getTime()+this.startTyreChangeWindowHour*60*60*1e3;return new Date(n)}});closingTime=hh(()=>{let e=this.activeRace();if(e){let n=e.start.toDate().getTime()+this.endTyreChangeWindowHour*60*60*1e3;return new Date(n)}});countdownOpeningTime="--:--:--";countdownClosingTime="--:--:--";constructor(){Yi(1e3).pipe(Tr()).subscribe(()=>{let e=this.openingTime(),n=this.closingTime();this.updateCountdownOpeningTime(e),this.updateCountdownClosingTime(n),this.updateTyreChangeWindowOpen(e,n)}),this.pitService.getRacePits().pipe(Tr()).subscribe(e=>{let n=e.filter(r=>r.tyreChange).length;this.remainingTyreChange=this.minTyreChange-n})}updateCountdownOpeningTime(e){e?this.countdownOpeningTime=Gs(e):this.countdownOpeningTime="--:--:--"}updateCountdownClosingTime(e){e?this.countdownClosingTime=Gs(e):this.countdownClosingTime="--:--:--"}updateTyreChangeWindowOpen(e,n){if(e&&n){let r=new Date;this.isTyreChangeWindowOpen=r>=e&&r<=n}else this.isTyreChangeWindowOpen=!1}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Cn({type:t,selectors:[["app-tyre-change-window"]],standalone:!0,features:[An],decls:10,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl","hover:cursor-pointer",3,"click"],[1,"flex","justify-between","items-center",3,"ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[1,"bg-red-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"flex","justify-between"]],template:function(n,r){n&1&&(ie(0,"div",0),Ti("click",function(){return r.isOpen=!r.isOpen}),ie(1,"div",1)(2,"div",2),ue(3,"\u{1F6DE} Tyre change"),ne(),ie(4,"div",3),bn(5,I5,2,1,"div",4)(6,w5,2,0,"div",5)(7,E5,2,3,"div",6)(8,T5,2,0,"div",7),ne()(),bn(9,A5,24,4),ne()),n&2&&(Pe(),ln("ngClass",Mo(4,y5,r.isOpen)),Pe(4),Dn(r.remainingTyreChange>0?5:6),Pe(2),Dn(r.isTyreChangeWindowOpen?7:8),Pe(2),Dn(r.isOpen?9:-1))},dependencies:[Sh,Vo]})};var Hp=class t{charge=100;batteryColor="bg-green-500";batteryBorderColor="border-gray-200";ngOnChanges(e){this.batteryColor=this.getBackgroundColor(this.charge),this.batteryBorderColor=this.getBorderColor(this.charge)}getBackgroundColor(e){return this.charge<=10?"bg-red-500":this.charge<=25?"bg-orange-500":this.charge<=50?"bg-yellow-500":"bg-green-500"}getBorderColor(e){return this.charge<=10?"border-red-500":this.charge<=25?"border-orange-500":"border-gray-200"}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Cn({type:t,selectors:[["app-battery"]],inputs:{charge:"charge"},standalone:!0,features:[No,An],decls:6,vars:6,consts:[[1,"w-16","lg:w-24","h-8","grid","grid-cols-6","items-center"],[1,"shadow","col-span-5","rounded","border-2","flex","relative",3,"ngClass"],[1,"cursor-default","leading-none","rounded-sm","flex","items-center","m-0.5","py-3",3,"ngClass"],[1,"absolute","right-2","text-black","font-semibold","font-mono"],[1,"ml-0.5","border-r-8","w-1","h-4","rounded-r",3,"ngClass"]],template:function(n,r){n&1&&(ie(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),ue(4),ne()()(),qn(5,"div",4),ne()),n&2&&(Pe(),ln("ngClass",r.batteryBorderColor),Pe(),uh("width",r.charge,"%"),ln("ngClass",r.batteryColor),Pe(2),w_(r.charge),Pe(),ln("ngClass",r.batteryBorderColor))},dependencies:[Vo],changeDetection:0})};var R5=t=>({"mb-2":t}),N5=t=>({"animate-bounce":t});function x5(t,e){if(t&1&&(ue(0),ko(1,"date")),t&2){let n=dn(2);Pt(" ",Oo(1,1,n.lastRefuelTime,"HH:mm:ss")," ")}}function P5(t,e){t&1&&ue(0," --:--:-- ")}function M5(t,e){if(t&1&&(ue(0),ko(1,"date")),t&2){let n=dn(2);Pt(" ",Oo(1,1,n.emptyTime,"HH:mm:ss")," ")}}function k5(t,e){t&1&&ue(0," --:--:-- ")}function O5(t,e){if(t&1&&(ie(0,"div",6)(1,"div")(2,"div",7),ue(3,"Last refuel time"),ne(),ie(4,"div",8),bn(5,x5,2,4)(6,P5,1,0),ne()(),ie(7,"div")(8,"div",9),ue(9,"Empty time"),ne(),ie(10,"div",10),bn(11,M5,2,4)(12,k5,1,0),ne()()(),ie(13,"div",6)(14,"div")(15,"div",7),ue(16,"Since last refuel"),ne(),ie(17,"div",8),ue(18),ne()(),ie(19,"div")(20,"div",9),ue(21,"Empty in"),ne(),ie(22,"div",10),ue(23),ne()()(),ie(24,"div",11),ue(25," FORM PER CAMBIO DURATA SERBATOIO IN MINUTI "),ne()),t&2){let n=dn();Pe(5),Dn(n.lastRefuelTime?5:6),Pe(6),Dn(n.emptyTime?11:12),Pe(7),Pt(" ",n.sinceLastRefuel," "),Pe(5),Pt(" ",n.emptyCountdown," ")}}var qp=class t{raceService=P(Er);pitService=P(ja);raceConfigService=P(wr);fuelDurationMinute=this.raceConfigService.get().fuelDurationMinute;isOpen=!0;warning=!1;remainingColor="bg-green-500";fuelPercentage=100;emptyTime;emptyCountdown="--:--:--";lastRefuelTime;sinceLastRefuel="--:--:--";activeRace=this.raceService.activeRace;constructor(){let e=this.pitService.getRacePits().pipe(Tr()),n=Yi(1e3).pipe(Tr());di([pl(this.activeRace),e,n]).pipe(Tr(),Q(([r,i])=>{let s=this.getRecentRefuelPit(i);return{activeRace:r,recentRefuelPit:s}})).subscribe(({activeRace:r,recentRefuelPit:i})=>{let s;i?s=i.exitTime.toDate():r&&(s=r.start.toDate()),this.updateInfoFromDate(s)})}updateInfoFromDate(e){e?(this.lastRefuelTime=e,this.sinceLastRefuel=bO(e,new Date),this.emptyTime=hO(e,this.fuelDurationMinute),this.emptyCountdown=Gs(this.emptyTime),this.fuelPercentage=this.calculateFuelPercentage(this.emptyTime,this.fuelDurationMinute),this.warning=this.fuelPercentage<=20,this.remainingColor=this.getRemainingColor(this.fuelPercentage)):(this.lastRefuelTime=void 0,this.sinceLastRefuel="--:--:--",this.emptyTime=void 0,this.emptyCountdown="--:--:--",this.fuelPercentage=100,this.warning=!1,this.remainingColor="bg-green-500")}getRecentRefuelPit(e){let n=e.filter(r=>r.refuel).sort((r,i)=>i.exitTime.toDate().getTime()-r.exitTime.toDate().getTime());if(n.length>0)return n[0]}calculateFuelPercentage(e,n){let i=Up(e,new Date)/n*100,s=Math.max(0,Math.min(i,100));return parseFloat(s.toFixed(2))}getRemainingColor(e){return this.fuelPercentage<=10?"bg-red-500":this.fuelPercentage<=25?"bg-orange-500":this.fuelPercentage<=50?"bg-yellow-500":"bg-green-500"}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Cn({type:t,selectors:[["app-fuel"]],standalone:!0,features:[An],decls:9,vars:10,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl","hover:cursor-pointer",3,"click"],[1,"flex","justify-between","items-center",3,"ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center",3,"ngClass"],[1,"px-2","py-1","w-40","rounded-lg","text-left","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[3,"charge"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"flex","justify-center"]],template:function(n,r){n&1&&(ie(0,"div",0),Ti("click",function(){return r.isOpen=!r.isOpen}),ie(1,"div",1)(2,"div",2),ue(3,"\u26FD\uFE0F Fuel"),ne(),ie(4,"div",3)(5,"div",4),ue(6),ne(),qn(7,"app-battery",5),ne()(),bn(8,O5,26,4),ne()),n&2&&(Pe(),ln("ngClass",Mo(6,R5,r.isOpen)),Pe(3),ln("ngClass",Mo(8,N5,r.warning)),Pe(),ln("ngClass",r.remainingColor),Pe(),Pt(" Empty in: ",r.emptyCountdown," "),Pe(),ln("charge",r.fuelPercentage),Pe(),Dn(r.isOpen?8:-1))},dependencies:[Vo,Sh,Hp]})};var zp=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Cn({type:t,selectors:[["app-root"]],standalone:!0,features:[An],decls:19,vars:0,consts:[[1,"w-full","h-screen","dark:bg-black"],[1,"p-4","grid","grid-cols-2","lg:grid-cols-3","gap-3"],[1,"flex","items-center"],[1,"text-xl","md:text-3xl","dark:text-white","font-semibold"],[1,"text-right","lg:text-center"],[1,"mx-4","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-3"]],template:function(n,r){n&1&&(ie(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),ue(4,"\u{1F3CE}\uFE0F dash-boar \u{1F417}"),ne()(),ie(5,"div",4),qn(6,"app-race"),ne()(),ie(7,"div",5),qn(8,"app-tyre-change-window")(9,"app-fuel"),ie(10,"div"),ue(11,"Placeholder"),ne(),ie(12,"div"),ue(13,"Placeholder"),ne(),ie(14,"div"),ue(15,"Placeholder"),ne(),ie(16,"div"),ue(17,"Placeholder"),ne()()(),qn(18,"router-outlet"))},dependencies:[vy,jp,$p,qp]})};nA(zp,sO).catch(t=>console.error(t));
