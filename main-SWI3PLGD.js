import{$ as Pn,A as Gn,B as rr,C as Eh,D as zt,E as qD,F as zD,G as Gr,H as Xo,I as Ul,J as jl,K as Bl,L as es,M as GD,N as KD,O as YD,P as QD,Q as $l,R as ga,S as Le,T as Et,U as en,V as ir,W as Gv,X as Ih,Y as It,Z as $t,_ as mi,a as U,aa as ZD,b as fe,ba as Ht,c as no,ca as Th,d as y,da as te,e as $,ea as JD,f as ha,g as _h,h as VD,i as UD,j as jD,k as BD,l as ro,m as zv,n as fa,o as pa,p as un,q as Fl,r as $D,s as Ll,t as wh,u as HD,v as qr,w as WD,x as zr,y as ma,z as Vl}from"./chunk-TSZ4SNPW.js";function Jv(n,e){return Object.is(n,e)}var Wt=null,Hl=!1,Xv=1,kn=Symbol("SIGNAL");function Ae(n){let e=Wt;return Wt=n,e}function XD(){return Wt}function l2(){return Hl}var ts={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function bh(n){if(Hl)throw new Error("");if(Wt===null)return;Wt.consumerOnSignalRead(n);let e=Wt.nextProducerIndex++;if(Sh(Wt),e<Wt.producerNode.length&&Wt.producerNode[e]!==n&&Wl(Wt)){let t=Wt.producerNode[e];Dh(t,Wt.producerIndexOfThis[e])}Wt.producerNode[e]!==n&&(Wt.producerNode[e]=n,Wt.producerIndexOfThis[e]=Wl(Wt)?rS(n,Wt,e):0),Wt.producerLastReadVersion[e]=n.version}function u2(){Xv++}function ey(n){if(!(Wl(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Xv)){if(!n.producerMustRecompute(n)&&!zl(n)){Qv(n);return}n.producerRecomputeValue(n),Qv(n)}}function eS(n){if(n.liveConsumerNode===void 0)return;let e=Hl;Hl=!0;try{for(let t of n.liveConsumerNode)t.dirty||nS(t)}finally{Hl=e}}function tS(){return Wt?.consumerAllowSignalWrites!==!1}function nS(n){n.dirty=!0,eS(n),n.consumerMarkedDirty?.(n)}function Qv(n){n.dirty=!1,n.lastCleanEpoch=Xv}function va(n){return n&&(n.nextProducerIndex=0),Ae(n)}function ql(n,e){if(Ae(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Wl(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Dh(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function zl(n){Sh(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(ey(t),r!==t.version))return!0}return!1}function ya(n){if(Sh(n),Wl(n))for(let e=0;e<n.producerNode.length;e++)Dh(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function rS(n,e,t){if(iS(n),n.liveConsumerNode.length===0&&oS(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=rS(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Dh(n,e){if(iS(n),n.liveConsumerNode.length===1&&oS(n))for(let r=0;r<n.producerNode.length;r++)Dh(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Sh(i),i.producerIndexOfThis[r]=e}}function Wl(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Sh(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function iS(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function oS(n){return n.producerNode!==void 0}function sS(n){let e=Object.create(d2);e.computation=n;let t=()=>{if(ey(e),bh(e),e.value===Ch)throw e.error;return e.value};return t[kn]=e,t}var Kv=Symbol("UNSET"),Yv=Symbol("COMPUTING"),Ch=Symbol("ERRORED"),d2=fe(U({},ts),{value:Kv,dirty:!0,error:null,equal:Jv,kind:"computed",producerMustRecompute(n){return n.value===Kv||n.value===Yv},producerRecomputeValue(n){if(n.value===Yv)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Yv;let t=va(n),r,i=!1;try{r=n.computation(),Ae(null),i=e!==Kv&&e!==Ch&&r!==Ch&&n.equal(e,r)}catch(o){r=Ch,n.error=o}finally{ql(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function h2(){throw new Error}var aS=h2;function cS(){aS()}function lS(n){aS=n}var f2=null;function uS(n){let e=Object.create(ty);e.value=n;let t=()=>(bh(e),e.value);return t[kn]=e,t}function Ah(n,e){tS()||cS(),n.equal(n.value,e)||(n.value=e,p2(n))}function dS(n,e){tS()||cS(),Ah(n,e(n.value))}var ty=fe(U({},ts),{equal:Jv,value:void 0,kind:"signal"});function p2(n){n.version++,u2(),eS(n),f2?.()}function hS(n,e,t){let r=Object.create(m2);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;let i=c=>{r.cleanupFn=c};function o(c){return c.fn===null&&c.schedule===null}function s(c){o(c)||(ya(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=Zv)}let a=()=>{if(r.fn===null)return;if(l2())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!zl(r))return;r.hasRun=!0;let c=va(r);try{r.cleanupFn(),r.cleanupFn=Zv,r.fn(i)}finally{ql(r,c)}};return r.ref={notify:()=>nS(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>s(r),[kn]:r},r.ref}var Zv=()=>{},m2=fe(U({},ts),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule!==null&&n.schedule(n.ref)},hasRun:!1,cleanupFn:Zv});function ye(n){return typeof n=="function"}function _a(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Rh=_a(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ns(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Tt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ye(r))try{r()}catch(o){e=o instanceof Rh?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{fS(o)}catch(s){e=e??[],s instanceof Rh?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Rh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)fS(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ns(t,e)}remove(e){let{_finalizers:t}=this;t&&ns(t,e),e instanceof n&&e._removeParent(this)}};Tt.EMPTY=(()=>{let n=new Tt;return n.closed=!0,n})();var ny=Tt.EMPTY;function xh(n){return n instanceof Tt||n&&"closed"in n&&ye(n.remove)&&ye(n.add)&&ye(n.unsubscribe)}function fS(n){ye(n)?n():n.unsubscribe()}var Cr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var wa={setTimeout(n,e,...t){let{delegate:r}=wa;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=wa;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Nh(n){wa.setTimeout(()=>{let{onUnhandledError:e}=Cr;if(e)e(n);else throw n})}function Gl(){}var pS=ry("C",void 0,void 0);function mS(n){return ry("E",void 0,n)}function gS(n){return ry("N",n,void 0)}function ry(n,e,t){return{kind:n,value:e,error:t}}var rs=null;function Ea(n){if(Cr.useDeprecatedSynchronousErrorHandling){let e=!rs;if(e&&(rs={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=rs;if(rs=null,t)throw r}}else n()}function vS(n){Cr.useDeprecatedSynchronousErrorHandling&&rs&&(rs.errorThrown=!0,rs.error=n)}var is=class extends Tt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,xh(e)&&e.add(this)):this.destination=y2}static create(e,t,r){return new Ia(e,t,r)}next(e){this.isStopped?oy(gS(e),this):this._next(e)}error(e){this.isStopped?oy(mS(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?oy(pS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},g2=Function.prototype.bind;function iy(n,e){return g2.call(n,e)}var sy=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Mh(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Mh(r)}else Mh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Mh(t)}}},Ia=class extends is{constructor(e,t,r){super();let i;if(ye(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Cr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&iy(e.next,o),error:e.error&&iy(e.error,o),complete:e.complete&&iy(e.complete,o)}):i=e}this.destination=new sy(i)}};function Mh(n){Cr.useDeprecatedSynchronousErrorHandling?vS(n):Nh(n)}function v2(n){throw n}function oy(n,e){let{onStoppedNotification:t}=Cr;t&&wa.setTimeout(()=>t(n,e))}var y2={closed:!0,next:Gl,error:v2,complete:Gl};var Ta=typeof Symbol=="function"&&Symbol.observable||"@@observable";function En(n){return n}function Ph(...n){return ay(n)}function ay(n){return n.length===0?En:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var pe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=w2(t)?t:new Ia(t,r,i);return Ea(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=yS(r),new r((i,o)=>{let s=new Ia({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ta](){return this}pipe(...t){return ay(t)(this)}toPromise(t){return t=yS(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function yS(n){var e;return(e=n??Cr.Promise)!==null&&e!==void 0?e:Promise}function _2(n){return n&&ye(n.next)&&ye(n.error)&&ye(n.complete)}function w2(n){return n&&n instanceof is||_2(n)&&xh(n)}function cy(n){return ye(n?.lift)}function Ce(n){return e=>{if(cy(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ee(n,e,t,r,i){return new Kl(n,e,t,r,i)}var Kl=class extends is{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ca(){return Ce((n,e)=>{let t=null;n._refCount++;let r=Ee(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ba=class extends pe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,cy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Tt;let t=this.getSubject();e.add(this.source.subscribe(Ee(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Tt.EMPTY)}return e}refCount(){return Ca()(this)}};var _S=_a(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var st=(()=>{class n extends pe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new kh(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new _S}next(t){Ea(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ea(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ea(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?ny:(this.currentObservers=null,o.push(t),new Tt(()=>{this.currentObservers=null,ns(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new pe;return t.source=this,t}}return n.create=(e,t)=>new kh(e,t),n})(),kh=class extends st{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:ny}};var tn=class extends st{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Yl={now(){return(Yl.delegate||Date).now()},delegate:void 0};var Ql=class extends st{constructor(e=1/0,t=1/0,r=Yl){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Oh=class extends Tt{constructor(e,t){super()}schedule(e,t=0){return this}};var Zl={setInterval(n,e,...t){let{delegate:r}=Zl;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Zl;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Da=class extends Oh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Zl.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Zl.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ns(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Sa=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Sa.now=Yl.now;var Aa=class extends Sa{constructor(e,t=Sa.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Ra=new Aa(Da),ly=Ra;var Fh=class extends Da{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Lh=class extends Aa{};var uy=new Lh(Fh);var Kn=new pe(n=>n.complete());function Vh(n){return n&&ye(n.schedule)}function wS(n){return n[n.length-1]}function Uh(n){return ye(wS(n))?n.pop():void 0}function io(n){return Vh(wS(n))?n.pop():void 0}function dy(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function IS(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(r.next(d))}catch(f){s(f)}}function c(d){try{u(r.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):i(d.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function ES(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function os(n){return this instanceof os?(this.v=n,this):new os(n)}function TS(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(v){return function(w){return Promise.resolve(w).then(v,f)}}function a(v,w){r[v]&&(i[v]=function(P){return new Promise(function(N,L){o.push([v,P,N,L])>1||c(v,P)})},w&&(i[v]=w(i[v])))}function c(v,w){try{u(r[v](w))}catch(P){m(o[0][3],P)}}function u(v){v.value instanceof os?Promise.resolve(v.value.v).then(d,f):m(o[0][2],v)}function d(v){c("next",v)}function f(v){c("throw",v)}function m(v,w){v(w),o.shift(),o.length&&c(o[0][0],o[0][1])}}function CS(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof ES=="function"?ES(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var jh=n=>n&&typeof n.length=="number"&&typeof n!="function";function Bh(n){return ye(n?.then)}function $h(n){return ye(n[Ta])}function Hh(n){return Symbol.asyncIterator&&ye(n?.[Symbol.asyncIterator])}function Wh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function E2(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var qh=E2();function zh(n){return ye(n?.[qh])}function Gh(n){return TS(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield os(t.read());if(i)return yield os(void 0);yield yield os(r)}}finally{t.releaseLock()}})}function Kh(n){return ye(n?.getReader)}function Ct(n){if(n instanceof pe)return n;if(n!=null){if($h(n))return I2(n);if(jh(n))return T2(n);if(Bh(n))return C2(n);if(Hh(n))return bS(n);if(zh(n))return b2(n);if(Kh(n))return D2(n)}throw Wh(n)}function I2(n){return new pe(e=>{let t=n[Ta]();if(ye(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function T2(n){return new pe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function C2(n){return new pe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Nh)})}function b2(n){return new pe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function bS(n){return new pe(e=>{S2(n,e).catch(t=>e.error(t))})}function D2(n){return bS(Gh(n))}function S2(n,e){var t,r,i,o;return IS(this,void 0,void 0,function*(){try{for(t=CS(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function On(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function oo(n,e=0){return Ce((t,r)=>{t.subscribe(Ee(r,i=>On(r,n,()=>r.next(i),e),()=>On(r,n,()=>r.complete(),e),i=>On(r,n,()=>r.error(i),e)))})}function so(n,e=0){return Ce((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function DS(n,e){return Ct(n).pipe(so(e),oo(e))}function SS(n,e){return Ct(n).pipe(so(e),oo(e))}function AS(n,e){return new pe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function RS(n,e){return new pe(t=>{let r;return On(t,e,()=>{r=n[qh](),On(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ye(r?.return)&&r.return()})}function Yh(n,e){if(!n)throw new Error("Iterable cannot be null");return new pe(t=>{On(t,e,()=>{let r=n[Symbol.asyncIterator]();On(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function xS(n,e){return Yh(Gh(n),e)}function NS(n,e){if(n!=null){if($h(n))return DS(n,e);if(jh(n))return AS(n,e);if(Bh(n))return SS(n,e);if(Hh(n))return Yh(n,e);if(zh(n))return RS(n,e);if(Kh(n))return xS(n,e)}throw Wh(n)}function lt(n,e){return e?NS(n,e):Ct(n)}function se(...n){let e=io(n);return lt(n,e)}function xa(n,e){let t=ye(n)?n:()=>n,r=i=>i.error(t());return new pe(e?i=>e.schedule(r,0,i):r)}function hy(n){return!!n&&(n instanceof pe||ye(n.lift)&&ye(n.subscribe))}var gi=_a(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function MS(n){return n instanceof Date&&!isNaN(n)}function ee(n,e){return Ce((t,r)=>{let i=0;t.subscribe(Ee(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:A2}=Array;function R2(n,e){return A2(e)?n(...e):n(e)}function Qh(n){return ee(e=>R2(n,e))}var{isArray:x2}=Array,{getPrototypeOf:N2,prototype:M2,keys:P2}=Object;function Zh(n){if(n.length===1){let e=n[0];if(x2(e))return{args:e,keys:null};if(k2(e)){let t=P2(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function k2(n){return n&&typeof n=="object"&&N2(n)===M2}function Jh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function We(...n){let e=io(n),t=Uh(n),{args:r,keys:i}=Zh(n);if(r.length===0)return lt([],e);let o=new pe(O2(r,e,i?s=>Jh(i,s):En));return t?o.pipe(Qh(t)):o}function O2(n,e,t=En){return r=>{PS(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)PS(e,()=>{let u=lt(n[c],e),d=!1;u.subscribe(Ee(r,f=>{o[c]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function PS(n,e,t){n?On(t,n,e):e()}function kS(n,e,t,r,i,o,s,a){let c=[],u=0,d=0,f=!1,m=()=>{f&&!c.length&&!u&&e.complete()},v=P=>u<r?w(P):c.push(P),w=P=>{o&&e.next(P),u++;let N=!1;Ct(t(P,d++)).subscribe(Ee(e,L=>{i?.(L),o?v(L):e.next(L)},()=>{N=!0},void 0,()=>{if(N)try{for(u--;c.length&&u<r;){let L=c.shift();s?On(e,s,()=>w(L)):w(L)}m()}catch(L){e.error(L)}}))};return n.subscribe(Ee(e,v,()=>{f=!0,m()})),()=>{a?.()}}function St(n,e,t=1/0){return ye(e)?St((r,i)=>ee((o,s)=>e(r,o,i,s))(Ct(n(r,i))),t):(typeof e=="number"&&(t=e),Ce((r,i)=>kS(r,i,n,t)))}function fy(n=1/0){return St(En,n)}function OS(){return fy(1)}function Na(...n){return OS()(lt(n,io(n)))}function Xh(n){return new pe(e=>{Ct(n()).subscribe(e)})}function py(...n){let e=Uh(n),{args:t,keys:r}=Zh(n),i=new pe(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let d=0;d<s;d++){let f=!1;Ct(t[d]).subscribe(Ee(o,m=>{f||(f=!0,u--),a[d]=m},()=>c--,void 0,()=>{(!c||!f)&&(u||o.next(r?Jh(r,a):a),o.complete())}))}});return e?i.pipe(Qh(e)):i}function my(n=0,e,t=ly){let r=-1;return e!=null&&(Vh(e)?t=e:r=e),new pe(i=>{let o=MS(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function At(n=0,e=Ra){return n<0&&(n=0),my(n,n,e)}function In(n,e){return Ce((t,r)=>{let i=0;t.subscribe(Ee(r,o=>n.call(e,o,i++)&&r.next(o)))})}function ao(n){return Ce((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Ee(t,void 0,void 0,s=>{o=Ct(n(s,ao(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function FS(n,e,t,r,i){return(o,s)=>{let a=t,c=e,u=0;o.subscribe(Ee(s,d=>{let f=u++;c=a?n(c,d,f):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function ss(n,e){return ye(e)?St(n,e,1):St(n,1)}function co(n){return Ce((e,t)=>{let r=!1;e.subscribe(Ee(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Kr(n){return n<=0?()=>Kn:Ce((e,t)=>{let r=0;e.subscribe(Ee(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ef(n,e=En){return n=n??F2,Ce((t,r)=>{let i,o=!0;t.subscribe(Ee(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function F2(n,e){return n===e}function tf(n=L2){return Ce((e,t)=>{let r=!1;e.subscribe(Ee(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function L2(){return new gi}function Jl(n){return Ce((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function vi(n,e){let t=arguments.length>=2;return r=>r.pipe(n?In((i,o)=>n(i,o,r)):En,Kr(1),t?co(e):tf(()=>new gi))}function gy(n,e,t,r){return Ce((i,o)=>{let s;!e||typeof e=="function"?s=e:{duration:t,element:s,connector:r}=e;let a=new Map,c=w=>{a.forEach(w),w(o)},u=w=>c(P=>P.error(w)),d=0,f=!1,m=new Kl(o,w=>{try{let P=n(w),N=a.get(P);if(!N){a.set(P,N=r?r():new st);let L=v(P,N);if(o.next(L),t){let W=Ee(N,()=>{N.complete(),W?.unsubscribe()},void 0,void 0,()=>a.delete(P));m.add(Ct(t(L)).subscribe(W))}}N.next(s?s(w):w)}catch(P){u(P)}},()=>c(w=>w.complete()),u,()=>a.clear(),()=>(f=!0,d===0));i.subscribe(m);function v(w,P){let N=new pe(L=>{d++;let W=P.subscribe(L);return()=>{W.unsubscribe(),--d===0&&f&&m.unsubscribe()}});return N.key=w,N}})}function Ma(n){return n<=0?()=>Kn:Ce((e,t)=>{let r=[];e.subscribe(Ee(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function vy(n,e){let t=arguments.length>=2;return r=>r.pipe(n?In((i,o)=>n(i,o,r)):En,Ma(1),t?co(e):tf(()=>new gi))}function nf(){return Ce((n,e)=>{let t,r=!1;n.subscribe(Ee(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function rf(n,e){return Ce(FS(n,e,arguments.length>=2,!0))}function Pa(...n){let e=io(n);return Ce((t,r)=>{(e?Na(n,t,e):Na(n,t)).subscribe(r)})}function Fn(n,e){return Ce((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Ee(r,c=>{i?.unsubscribe();let u=0,d=o++;Ct(n(c,d)).subscribe(i=Ee(r,f=>r.next(e?e(c,f,d,u++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Gt(n){return Ce((e,t)=>{Ct(n).subscribe(Ee(t,()=>t.complete(),Gl)),!t.closed&&e.subscribe(t)})}function nn(n,e,t){let r=ye(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ce((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Ee(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):En}var V2="https://g.co/ng/security#xss",Z=class extends Error{code;constructor(e,t){super(S_(e,t)),this.code=e}};function S_(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}var EA=Symbol("InputSignalNode#UNSET"),U2=fe(U({},ty),{transformFn:void 0,applyValueToInputSignal(n,e){Ah(n,e)}});function IA(n,e){let t=Object.create(U2);t.value=n,t.transformFn=e?.transform;function r(){if(bh(t),t.value===EA)throw new Z(-950,!1);return t.value}return r[kn]=t,r}function mu(n){return{toString:n}.toString()}var of="__parameters__";function j2(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function TA(n,e,t){return mu(()=>{let r=j2(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,d){let f=c.hasOwnProperty(of)?c[of]:Object.defineProperty(c,of,{value:[]})[of];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var eu=globalThis;function Je(n){for(let e in n)if(n[e]===Je)return e;throw Error("Could not find renamed property on target object.")}function B2(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Vn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Vn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function LS(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var $2=Je({__forward_ref__:Je});function ar(n){return n.__forward_ref__=ar,n.toString=function(){return Vn(this())},n}function Tn(n){return CA(n)?n():n}function CA(n){return typeof n=="function"&&n.hasOwnProperty($2)&&n.__forward_ref__===ar}function j(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Eo(n){return{providers:n.providers||[],imports:n.imports||[]}}function jf(n){return VS(n,DA)||VS(n,SA)}function bA(n){return jf(n)!==null}function VS(n,e){return n.hasOwnProperty(e)?n[e]:null}function H2(n){let e=n&&(n[DA]||n[SA]);return e||null}function US(n){return n&&(n.hasOwnProperty(jS)||n.hasOwnProperty(W2))?n[jS]:null}var DA=Je({\u0275prov:Je}),jS=Je({\u0275inj:Je}),SA=Je({ngInjectableDef:Je}),W2=Je({ngInjectorDef:Je}),q=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=j({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function AA(n){return n&&!!n.\u0275providers}var q2=Je({\u0275cmp:Je}),z2=Je({\u0275dir:Je}),G2=Je({\u0275pipe:Je}),K2=Je({\u0275mod:Je}),pf=Je({\u0275fac:Je}),ru=Je({__NG_ELEMENT_ID__:Je}),BS=Je({__NG_ENV_ID__:Je});function A_(n){return typeof n=="string"?n:n==null?"":String(n)}function Y2(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():A_(n)}function Q2(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Z(-200,n)}function R_(n,e){throw new Z(-201,!1)}var De=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(De||{}),Ny;function RA(){return Ny}function Ln(n){let e=Ny;return Ny=n,e}function xA(n,e,t){let r=jf(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&De.Optional)return null;if(e!==void 0)return e;R_(n,"Injector")}var Z2={},iu=Z2,My="__NG_DI_FLAG__",mf="ngTempTokenPath",J2="ngTokenPath",X2=/\n/gm,eU="\u0275",$S="__source",La;function tU(){return La}function lo(n){let e=La;return La=n,e}function nU(n,e=De.Default){if(La===void 0)throw new Z(-203,!1);return La===null?xA(n,void 0,e):La.get(n,e&De.Optional?null:void 0,e)}function he(n,e=De.Default){return(RA()||nU)(Tn(n),e)}function S(n,e=De.Default){return he(n,Bf(e))}function Bf(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Py(n){let e=[];for(let t=0;t<n.length;t++){let r=Tn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Z(900,!1);let i,o=De.Default;for(let s=0;s<r.length;s++){let a=r[s],c=rU(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(he(i,o))}else e.push(he(r))}return e}function NA(n,e){return n[My]=e,n.prototype[My]=e,n}function rU(n){return n[My]}function iU(n,e,t,r){let i=n[mf];throw e[$S]&&i.unshift(e[$S]),n.message=oU(`
`+n.message,i,t,r),n[J2]=i,n[mf]=null,n}function oU(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==eU?n.slice(2):n;let i=Vn(e);if(Array.isArray(e))i=e.map(Vn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Vn(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(X2,`
  `)}`}var Ie=NA(TA("Optional"),8);var sU=NA(TA("SkipSelf"),4);function ls(n,e){let t=n.hasOwnProperty(pf);return t?n[pf]:null}function x_(n,e){n.forEach(t=>Array.isArray(t)?x_(t,e):e(t))}function MA(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function gf(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function aU(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function cU(n,e,t){let r=gu(n,e);return r>=0?n[r|1]=t:(r=~r,aU(n,r,e,t)),r}function yy(n,e){let t=gu(n,e);if(t>=0)return n[t|1]}function gu(n,e){return lU(n,e,1)}function lU(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Ua={},or=[],ja=new q(""),PA=new q("",-1),kA=new q(""),vf=class{get(e,t=iu){if(t===iu){let r=new Error(`NullInjectorError: No provider for ${Vn(e)}!`);throw r.name="NullInjectorError",r}return t}};function OA(n,e){let t=n[K2]||null;if(!t&&e===!0)throw new Error(`Type ${Vn(n)} does not have '\u0275mod' property.`);return t}function us(n){return n[q2]||null}function FA(n){return n[z2]||null}function LA(n){return n[G2]||null}function VA(n){let e=us(n)||FA(n)||LA(n);return e!==null&&e.standalone}function ut(n){return{\u0275providers:n}}function uU(...n){return{\u0275providers:UA(!0,n),\u0275fromNgModule:!0}}function UA(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return x_(e,s=>{let a=s;ky(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&jA(i,o),t}function jA(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];N_(i,o=>{e(o,r)})}}function ky(n,e,t,r){if(n=Tn(n),!n)return!1;let i=null,o=US(n),s=!o&&us(n);if(!o&&!s){let c=n.ngModule;if(o=US(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)ky(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{x_(o.imports,d=>{ky(d,e,t,r)&&(u||=[],u.push(d))})}finally{}u!==void 0&&jA(u,e)}if(!a){let u=ls(i)||(()=>new i);e({provide:i,useFactory:u,deps:or},i),e({provide:kA,useValue:i,multi:!0},i),e({provide:ja,useValue:()=>he(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=n;N_(c,d=>{e(d,u)})}}else return!1;return i!==n&&n.providers!==void 0}function N_(n,e){for(let t of n)AA(t)&&(t=t.\u0275providers),Array.isArray(t)?N_(t,e):e(t)}var dU=Je({provide:String,useValue:Je});function BA(n){return n!==null&&typeof n=="object"&&dU in n}function hU(n){return!!(n&&n.useExisting)}function fU(n){return!!(n&&n.useFactory)}function Ba(n){return typeof n=="function"}function pU(n){return!!n.useClass}var $f=new q(""),cf={},mU={},_y;function M_(){return _y===void 0&&(_y=new vf),_y}var Un=class{},ou=class extends Un{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Fy(e,s=>this.processProvider(s)),this.records.set(PA,ka(void 0,this)),i.has("environment")&&this.records.set(Un,ka(void 0,this));let o=this.records.get($f);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(kA,or,De.Self))}destroy(){tu(this),this._destroyed=!0;let e=Ae(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ae(e)}}onDestroy(e){return tu(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){tu(this);let t=lo(this),r=Ln(void 0),i;try{return e()}finally{lo(t),Ln(r)}}get(e,t=iu,r=De.Default){if(tu(this),e.hasOwnProperty(BS))return e[BS](this);r=Bf(r);let i,o=lo(this),s=Ln(void 0);try{if(!(r&De.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=wU(e)&&jf(e);u&&this.injectableDefInScope(u)?c=ka(Oy(e),cf):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&De.Self?M_():this.parent;return t=r&De.Optional&&t===iu?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[mf]=a[mf]||[]).unshift(Vn(e)),o)throw a;return iU(a,e,"R3InjectorError",this.source)}else throw a}finally{Ln(s),lo(o)}}resolveInjectorInitializers(){let e=Ae(null),t=lo(this),r=Ln(void 0),i;try{let o=this.get(ja,or,De.Self);for(let s of o)s()}finally{lo(t),Ln(r),Ae(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Vn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Tn(e);let t=Ba(e)?e:Tn(e&&e.provide),r=vU(e);if(!Ba(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ka(void 0,cf,!0),i.factory=()=>Py(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ae(null);try{return t.value===cf&&(t.value=mU,t.value=t.factory()),typeof t.value=="object"&&t.value&&_U(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ae(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Tn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Oy(n){let e=jf(n),t=e!==null?e.factory:ls(n);if(t!==null)return t;if(n instanceof q)throw new Z(204,!1);if(n instanceof Function)return gU(n);throw new Z(204,!1)}function gU(n){if(n.length>0)throw new Z(204,!1);let t=H2(n);return t!==null?()=>t.factory(n):()=>new n}function vU(n){if(BA(n))return ka(void 0,n.useValue);{let e=$A(n);return ka(e,cf)}}function $A(n,e,t){let r;if(Ba(n)){let i=Tn(n);return ls(i)||Oy(i)}else if(BA(n))r=()=>Tn(n.useValue);else if(fU(n))r=()=>n.useFactory(...Py(n.deps||[]));else if(hU(n))r=()=>he(Tn(n.useExisting));else{let i=Tn(n&&(n.useClass||n.provide));if(yU(n))r=()=>new i(...Py(n.deps));else return ls(i)||Oy(i)}return r}function tu(n){if(n.destroyed)throw new Z(205,!1)}function ka(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function yU(n){return!!n.deps}function _U(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function wU(n){return typeof n=="function"||typeof n=="object"&&n instanceof q}function Fy(n,e){for(let t of n)Array.isArray(t)?Fy(t,e):t&&AA(t)?Fy(t.\u0275providers,e):e(t)}function Sn(n,e){n instanceof ou&&tu(n);let t,r=lo(n),i=Ln(void 0);try{return e()}finally{lo(r),Ln(i)}}function HA(){return RA()!==void 0||tU()!=null}function Ya(n){if(!HA())throw new Z(-203,!1)}function EU(n){return typeof n=="function"}var Ei=0,be=1,de=2,Dn=3,Dr=4,Ar=5,su=6,yf=7,dn=8,$a=9,fo=10,Mt=11,au=12,HS=13,Qa=14,Sr=15,Ha=16,Oa=17,Wa=18,Hf=19,WA=20,uo=21,lf=22,ds=23,Yn=24,Cn=25,qA=1;var hs=7,_f=8,wf=9,bn=10;function ho(n){return Array.isArray(n)&&typeof n[qA]=="object"}function Ii(n){return Array.isArray(n)&&n[qA]===!0}function P_(n){return(n.flags&4)!==0}function Wf(n){return n.componentOffset>-1}function qf(n){return(n.flags&1)===1}function po(n){return!!n.template}function Ly(n){return(n[de]&512)!==0}function vu(n){return(n[de]&256)===256}var Vy=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function zA(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Io=(()=>{let n=()=>GA;return n.ngInherit=!0,n})();function GA(n){return n.type.prototype.ngOnChanges&&(n.setInput=TU),IU}function IU(){let n=YA(this),e=n?.current;if(e){let t=n.previous;if(t===Ua)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function TU(n,e,t,r,i){let o=this.declaredInputs[r],s=YA(n)||CU(n,{previous:Ua,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new Vy(u&&u.currentValue,t,c===Ua),zA(n,e,i,t)}var KA="__ngSimpleChanges__";function YA(n){return n[KA]||null}function CU(n,e){return n[KA]=e}var WS=null;var sr=function(n,e,t){WS?.(n,e,t)},bU="svg",DU="math";function Qr(n){for(;Array.isArray(n);)n=n[Ei];return n}function QA(n,e){return Qr(e[n])}function cr(n,e){return Qr(e[n.index])}function k_(n,e){return n.data[e]}function SU(n,e){return n[e]}function To(n,e){let t=e[n];return ho(t)?t:t[Ei]}function O_(n){return(n[de]&128)===128}function AU(n){return Ii(n[Dn])}function mo(n,e){return e==null?null:n[e]}function ZA(n){n[Oa]=0}function F_(n){n[de]&1024||(n[de]|=1024,O_(n)&&yu(n))}function RU(n,e){for(;n>0;)e=e[Qa],n--;return e}function zf(n){return!!(n[de]&9216||n[Yn]?.dirty)}function Uy(n){n[fo].changeDetectionScheduler?.notify(9),n[de]&64&&(n[de]|=1024),zf(n)&&yu(n)}function yu(n){n[fo].changeDetectionScheduler?.notify(0);let e=fs(n);for(;e!==null&&!(e[de]&8192||(e[de]|=8192,!O_(e)));)e=fs(e)}function JA(n,e){if(vu(n))throw new Z(911,!1);n[uo]===null&&(n[uo]=[]),n[uo].push(e)}function xU(n,e){if(n[uo]===null)return;let t=n[uo].indexOf(e);t!==-1&&n[uo].splice(t,1)}function fs(n){let e=n[Dn];return Ii(e)?e[Dn]:e}function NU(n){return n[yf]??=[]}function MU(n){return n.cleanup??=[]}var Ne={lFrame:sR(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var jy=!1;function PU(){return Ne.lFrame.elementDepthCount}function kU(){Ne.lFrame.elementDepthCount++}function OU(){Ne.lFrame.elementDepthCount--}function XA(){return Ne.bindingsEnabled}function FU(){return Ne.skipHydrationRootTNode!==null}function LU(n){return Ne.skipHydrationRootTNode===n}function VU(){Ne.skipHydrationRootTNode=null}function ke(){return Ne.lFrame.lView}function rn(){return Ne.lFrame.tView}function pt(n){return Ne.lFrame.contextLView=n,n[dn]}function mt(n){return Ne.lFrame.contextLView=null,n}function hn(){let n=eR();for(;n!==null&&n.type===64;)n=n.parent;return n}function eR(){return Ne.lFrame.currentTNode}function UU(){let n=Ne.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function _s(n,e){let t=Ne.lFrame;t.currentTNode=n,t.isParent=e}function L_(){return Ne.lFrame.isParent}function tR(){Ne.lFrame.isParent=!1}function nR(){return jy}function Ef(n){let e=jy;return jy=n,e}function Gf(){let n=Ne.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function jU(n){return Ne.lFrame.bindingIndex=n}function Za(){return Ne.lFrame.bindingIndex++}function BU(n){let e=Ne.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function $U(){return Ne.lFrame.inI18n}function HU(n,e){let t=Ne.lFrame;t.bindingIndex=t.bindingRootIndex=n,By(e)}function WU(){return Ne.lFrame.currentDirectiveIndex}function By(n){Ne.lFrame.currentDirectiveIndex=n}function qU(n){let e=Ne.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function rR(n){Ne.lFrame.currentQueryIndex=n}function zU(n){let e=n[be];return e.type===2?e.declTNode:e.type===1?n[Ar]:null}function iR(n,e,t){if(t&De.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&De.Host);)if(i=zU(o),i===null||(o=o[Qa],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Ne.lFrame=oR();return r.currentTNode=e,r.lView=n,!0}function V_(n){let e=oR(),t=n[be];Ne.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function oR(){let n=Ne.lFrame,e=n===null?null:n.child;return e===null?sR(n):e}function sR(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function aR(){let n=Ne.lFrame;return Ne.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var cR=aR;function U_(){let n=aR();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function GU(n){return(Ne.lFrame.contextLView=RU(n,Ne.lFrame.contextLView))[dn]}function ws(){return Ne.lFrame.selectedIndex}function ps(n){Ne.lFrame.selectedIndex=n}function j_(){let n=Ne.lFrame;return k_(n.tView,n.selectedIndex)}function KU(){return Ne.lFrame.currentNamespace}var lR=!0;function Kf(){return lR}function Yf(n){lR=n}function YU(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=GA(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Qf(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function uf(n,e,t){uR(n,e,3,t)}function df(n,e,t,r){(n[de]&3)===t&&uR(n,e,t,r)}function wy(n,e){let t=n[de];(t&3)===e&&(t&=16383,t+=1,n[de]=t)}function uR(n,e,t,r){let i=r!==void 0?n[Oa]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Oa]+=65536),(a<o||o==-1)&&(QU(n,t,e,c),n[Oa]=(n[Oa]&4294901760)+c+2),c++}function qS(n,e){sr(4,n,e);let t=Ae(null);try{e.call(n)}finally{Ae(t),sr(5,n,e)}}function QU(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[de]>>14<n[Oa]>>16&&(n[de]&3)===e&&(n[de]+=16384,qS(a,o)):qS(a,o)}var Va=-1,ms=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function ZU(n){return n instanceof ms}function JU(n){return(n.flags&8)!==0}function XU(n){return(n.flags&16)!==0}function ej(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];nj(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function tj(n){return n===3||n===4||n===6}function nj(n){return n.charCodeAt(0)===64}function qa(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?zS(n,t,i,null,e[++r]):zS(n,t,i,null,null))}}return n}function zS(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var Ey={},$y=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Bf(r);let i=this.injector.get(e,Ey,r);return i!==Ey||t===Ey?i:this.parentInjector.get(e,t,r)}};function dR(n){return n!==Va}function If(n){return n&32767}function rj(n){return n>>16}function Tf(n,e){let t=rj(n),r=e;for(;t>0;)r=r[Qa],t--;return r}var Hy=!0;function Cf(n){let e=Hy;return Hy=n,e}var ij=256,hR=ij-1,fR=5,oj=0,Yr={};function sj(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ru)&&(r=t[ru]),r==null&&(r=t[ru]=oj++);let i=r&hR,o=1<<i;e.data[n+(i>>fR)]|=o}function bf(n,e){let t=pR(n,e);if(t!==-1)return t;let r=e[be];r.firstCreatePass&&(n.injectorIndex=e.length,Iy(r.data,n),Iy(e,null),Iy(r.blueprint,null));let i=B_(n,e),o=n.injectorIndex;if(dR(i)){let s=If(i),a=Tf(i,e),c=a[be].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function Iy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function pR(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function B_(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=_R(i),r===null)return Va;if(t++,i=i[Qa],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Va}function Wy(n,e,t){sj(n,e,t)}function mR(n,e,t){if(t&De.Optional||n!==void 0)return n;R_(e,"NodeInjector")}function gR(n,e,t,r){if(t&De.Optional&&r===void 0&&(r=null),!(t&(De.Self|De.Host))){let i=n[$a],o=Ln(void 0);try{return i?i.get(e,r,t&De.Optional):xA(e,r,t&De.Optional)}finally{Ln(o)}}return mR(r,e,t)}function vR(n,e,t,r=De.Default,i){if(n!==null){if(e[de]&2048&&!(r&De.Self)){let s=dj(n,e,t,r,Yr);if(s!==Yr)return s}let o=yR(n,e,t,r,Yr);if(o!==Yr)return o}return gR(e,t,r,i)}function yR(n,e,t,r,i){let o=lj(t);if(typeof o=="function"){if(!iR(e,n,r))return r&De.Host?mR(i,t,r):gR(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&De.Optional))R_(t);else return s}finally{cR()}}else if(typeof o=="number"){let s=null,a=pR(n,e),c=Va,u=r&De.Host?e[Sr][Ar]:null;for((a===-1||r&De.SkipSelf)&&(c=a===-1?B_(n,e):e[a+8],c===Va||!KS(r,!1)?a=-1:(s=e[be],a=If(c),e=Tf(c,e)));a!==-1;){let d=e[be];if(GS(o,a,d.data)){let f=aj(a,e,t,s,r,u);if(f!==Yr)return f}c=e[a+8],c!==Va&&KS(r,e[be].data[a+8]===u)&&GS(o,a,e)?(s=d,a=If(c),e=Tf(c,e)):a=-1}}return i}function aj(n,e,t,r,i,o){let s=e[be],a=s.data[n+8],c=r==null?Wf(a)&&Hy:r!=s&&(a.type&3)!==0,u=i&De.Host&&o===a,d=cj(a,s,t,c,u);return d!==null?za(e,s,d,a):Yr}function cj(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,u=n.directiveEnd,d=o>>20,f=r?a:a+d,m=i?a+d:u;for(let v=f;v<m;v++){let w=s[v];if(v<c&&t===w||v>=c&&w.type===t)return v}if(i){let v=s[c];if(v&&po(v)&&v.type===t)return c}return null}function za(n,e,t,r){let i=n[t],o=e.data;if(ZU(i)){let s=i;s.resolving&&Q2(Y2(o[t]));let a=Cf(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?Ln(s.injectImpl):null,d=iR(n,r,De.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&YU(t,o[t],e)}finally{u!==null&&Ln(u),Cf(a),s.resolving=!1,cR()}}return i}function lj(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ru)?n[ru]:void 0;return typeof e=="number"?e>=0?e&hR:uj:e}function GS(n,e,t){let r=1<<n;return!!(t[e+(n>>fR)]&r)}function KS(n,e){return!(n&De.Self)&&!(n&De.Host&&e)}var cs=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return vR(this._tNode,this._lView,e,Bf(r),t)}};function uj(){return new cs(hn(),ke())}function Rr(n){return mu(()=>{let e=n.prototype.constructor,t=e[pf]||qy(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[pf]||qy(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function qy(n){return CA(n)?()=>{let e=qy(Tn(n));return e&&e()}:ls(n)}function dj(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[de]&2048&&!(s[de]&512);){let a=yR(o,s,t,r|De.Self,Yr);if(a!==Yr)return a;let c=o.parent;if(!c){let u=s[WA];if(u){let d=u.get(t,Yr,r);if(d!==Yr)return d}c=_R(s),s=s[Qa]}o=c}return i}function _R(n){let e=n[be],t=e.type;return t===2?e.declTNode:t===1?n[Ar]:null}function YS(n,e=null,t=null,r){let i=wR(n,e,t,r);return i.resolveInjectorInitializers(),i}function wR(n,e=null,t=null,r,i=new Set){let o=[t||or,uU(n)];return r=r||(typeof n=="object"?void 0:Vn(n)),new ou(o,e||M_(),r||null,i)}var Se=class n{static THROW_IF_NOT_FOUND=iu;static NULL=new vf;static create(e,t){if(Array.isArray(e))return YS({name:""},t,e,"");{let r=e.name??"";return YS({name:r},e.parent,e.providers,r)}}static \u0275prov=j({token:n,providedIn:"any",factory:()=>he(PA)});static __NG_ELEMENT_ID__=-1};var hj=new q("");hj.__NG_ELEMENT_ID__=n=>{let e=hn();if(e===null)throw new Z(204,!1);if(e.type&2)return e.value;if(n&De.Optional)return null;throw new Z(204,!1)};var ER=!1,Ti=(()=>{class n{static __NG_ELEMENT_ID__=fj;static __NG_ENV_ID__=t=>t}return n})(),Df=class extends Ti{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return JA(this._lView,e),()=>xU(this._lView,e)}};function fj(){return new Df(ke())}var gs=class{},Zf=new q("",{providedIn:"root",factory:()=>!1});var IR=new q(""),TR=new q(""),Co=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new tn(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}return n})(),Jf=(()=>{class n{internalPendingTasks=S(Co);scheduler=S(gs);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(12),this.internalPendingTasks.remove(t))}}run(t){return y(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}return n})(),zy=class extends st{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,HA()&&(this.destroyRef=S(Ti,{optional:!0})??void 0,this.pendingTasks=S(Co,{optional:!0})??void 0)}emit(e){let t=Ae(null);try{super.next(e)}finally{Ae(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Tt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Kt=zy;function cu(...n){}function CR(n){let e,t;function r(){n=cu;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function QS(n){return queueMicrotask(()=>n()),()=>{n=cu}}var $_="isAngularZone",Sf=$_+"_ID",pj=0,me=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Kt(!1);onMicrotaskEmpty=new Kt(!1);onStable=new Kt(!1);onError=new Kt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=ER}=e;if(typeof Zone>"u")throw new Z(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,vj(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get($_)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Z(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Z(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,mj,cu,cu);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},mj={};function H_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function gj(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){CR(()=>{n.callbackScheduled=!1,Gy(n),n.isCheckStableRunning=!0,H_(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Gy(n)}function vj(n){let e=()=>{gj(n)},t=pj++;n._inner=n._inner.fork({name:"angular",properties:{[$_]:!0,[Sf]:t,[Sf+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(yj(c))return r.invokeTask(o,s,a,c);try{return ZS(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),JS(n)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return ZS(n),r.invoke(o,s,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!_j(c)&&e(),JS(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Gy(n),H_(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Gy(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function ZS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function JS(n){n._nesting--,H_(n)}var Ky=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Kt;onMicrotaskEmpty=new Kt;onStable=new Kt;onError=new Kt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function yj(n){return bR(n,"__ignore_ng_zone__")}function _j(n){return bR(n,"__scheduler_tick__")}function bR(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var yi=class{_console=console;handleError(e){this._console.error("ERROR",e)}},wj=new q("",{providedIn:"root",factory:()=>{let n=S(me),e=S(yi);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function XS(n,e){return IA(n,e)}function Ej(n){return IA(EA,n)}var DR=(XS.required=Ej,XS);function Ij(){return Xf(hn(),ke())}function Xf(n,e){return new lr(cr(n,e))}var lr=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=Ij}return n})();var eA=new Set;function Ci(n){eA.has(n)||(eA.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Tj(n){return typeof n=="function"&&n[kn]!==void 0}function J(n,e){Ci("NgSignals");let t=uS(n),r=t[kn];return e?.equal&&(r.equal=e.equal),t.set=i=>Ah(r,i),t.update=i=>dS(r,i),t.asReadonly=Cj.bind(t),t}function Cj(){let n=this[kn];if(n.readonlyFn===void 0){let e=()=>this();e[kn]=n,n.readonlyFn=e}return n.readonlyFn}function SR(n){return Tj(n)&&typeof n.set=="function"}function AR(n){return(n.flags&128)===128}var RR=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(RR||{}),xR=new Map,bj=0;function Dj(){return bj++}function Sj(n){xR.set(n[Hf],n)}function Yy(n){xR.delete(n[Hf])}var tA="__ngContext__";function go(n,e){ho(e)?(n[tA]=e[Hf],Sj(e)):n[tA]=e}function NR(n){return PR(n[au])}function MR(n){return PR(n[Dr])}function PR(n){for(;n!==null&&!Ii(n);)n=n[Dr];return n}var Qy;function kR(n){Qy=n}function Aj(){if(Qy!==void 0)return Qy;if(typeof document<"u")return document;throw new Z(210,!1)}var W_=new q("",{providedIn:"root",factory:()=>Rj}),Rj="ng",q_=new q(""),Pt=new q("",{providedIn:"platform",factory:()=>"unknown"});var z_=new q("",{providedIn:"root",factory:()=>Aj().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var xj="h",Nj="b";var OR=!1,Mj=new q("",{providedIn:"root",factory:()=>OR});var FR=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(FR||{}),ep=new q("");var Pj=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}return n})();var kj=()=>null;function G_(n,e,t=!1){return kj(n,e,t)}function LR(n,e){let t=n.contentQueries;if(t!==null){let r=Ae(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];rR(o),a.contentQueries(2,e[s],s)}}}finally{Ae(r)}}}function Zy(n,e,t){rR(0);let r=Ae(null);try{e(n,t)}finally{Ae(r)}}function K_(n,e,t){if(P_(e)){let r=Ae(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Ae(r)}}}var Zr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Zr||{});var Jy=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${V2})`}};function Y_(n){return n instanceof Jy?n.changingThisBreaksApplicationSecurity:n}var Oj=/^>|^->|<!--|-->|--!>|<!-$/g,Fj=/(<|>)/g,Lj="\u200B$1\u200B";function Vj(n){return n.replace(Oj,e=>e.replace(Fj,Lj))}function VR(n){return n instanceof Function?n():n}var vo=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(vo||{});function Uj(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var UR="ng-template";function jj(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Uj(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Q_(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Q_(n){return n.type===4&&n.value!==UR}function Bj(n,e,t){let r=n.type===4&&!t?UR:n.value;return e===r}function $j(n,e,t){let r=4,i=n.attrs,o=i!==null?qj(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!br(r)&&!br(c))return!1;if(s&&br(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!Bj(n,c,t)||c===""&&e.length===1){if(br(r))return!1;s=!0}}else if(r&8){if(i===null||!jj(n,i,c,t)){if(br(r))return!1;s=!0}}else{let u=e[++a],d=Hj(c,i,Q_(n),t);if(d===-1){if(br(r))return!1;s=!0;continue}if(u!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&u!==f){if(br(r))return!1;s=!0}}}}return br(r)||s}function br(n){return(n&1)===0}function Hj(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return zj(e,n)}function Wj(n,e,t=!1){for(let r=0;r<e.length;r++)if($j(n,e[r],t))return!0;return!1}function qj(n){for(let e=0;e<n.length;e++){let t=n[e];if(tj(t))return e}return n.length}function zj(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function nA(n,e){return n?":not("+e.trim()+")":e}function Gj(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!br(s)&&(e+=nA(o,i),i=""),r=s,o=o||!br(r);t++}return i!==""&&(e+=nA(o,i)),e}function Kj(n){return n.map(Gj).join(",")}function Yj(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!br(i))break;i=o}r++}return{attrs:e,classes:t}}var bo={};function k(n=1){jR(rn(),ke(),ws()+n,!1)}function jR(n,e,t,r){if(!r)if((e[de]&3)===3){let o=n.preOrderCheckHooks;o!==null&&uf(e,o,t)}else{let o=n.preOrderHooks;o!==null&&df(e,o,0,t)}ps(t)}function Me(n,e=De.Default){let t=ke();if(t===null)return he(n,e);let r=hn();return vR(r,t,Tn(n),e)}function BR(n,e,t,r,i,o){let s=Ae(null);try{let a=null;i&vo.SignalBased&&(a=e[r][kn]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&vo.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):zA(e,a,r,o)}finally{Ae(s)}}function Qj(n,e){return n.createText(e)}function Zj(n,e,t){n.setValue(e,t)}function Jj(n,e){return n.createComment(Vj(e))}function $R(n,e,t){return n.createElement(e,t)}function Af(n,e,t,r,i){n.insertBefore(e,t,r,i)}function HR(n,e,t){n.appendChild(e,t)}function rA(n,e,t,r,i){r!==null?Af(n,e,t,r,i):HR(n,e,t)}function Xj(n,e,t){n.removeChild(null,e,t)}function eB(n,e,t){n.setAttribute(e,"style",t)}function tB(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function WR(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&ej(n,e,r),i!==null&&tB(n,e,i),o!==null&&eB(n,e,o)}function tp(n,e,t,r,i,o,s,a,c,u,d){let f=e.blueprint.slice();return f[Ei]=i,f[de]=r|4|128|8|64|1024,(u!==null||n&&n[de]&2048)&&(f[de]|=2048),ZA(f),f[Dn]=f[Qa]=n,f[dn]=t,f[fo]=s||n&&n[fo],f[Mt]=a||n&&n[Mt],f[$a]=c||n&&n[$a]||null,f[Ar]=o,f[Hf]=Dj(),f[su]=d,f[WA]=u,f[Sr]=e.type==2?n[Sr]:f,f}function qR(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function zR(n,e,t,r,i){let o=ws(),s=r&2;try{ps(-1),s&&e.length>Cn&&jR(n,e,Cn,!1),sr(s?2:0,i),t(r,i)}finally{ps(o),sr(s?3:1,i)}}function Z_(n,e,t){XA()&&(dB(n,e,t,cr(t,e)),(t.flags&64)===64&&QR(n,e,t))}function J_(n,e,t=cr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function GR(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=X_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function X_(n,e,t,r,i,o,s,a,c,u,d){let f=Cn+r,m=f+i,v=nB(f,m),w=typeof u=="function"?u():u;return v[be]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:d}}function nB(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:bo);return t}function rB(n,e,t,r){let o=r.get(Mj,OR)||t===Zr.ShadowDom,s=n.selectRootElement(e,o);return iB(s),s}function iB(n){oB(n)}var oB=()=>null;function iA(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=vo.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let u=o;if(i!==null){if(!i.hasOwnProperty(o))continue;u=i[o]}n===0?oA(r,t,u,a,c):oA(r,t,u,a)}return r}function oA(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function sB(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,u=null;for(let d=r;d<i;d++){let f=o[d],m=t?t.get(f):null,v=m?m.inputs:null,w=m?m.outputs:null;c=iA(0,f.inputs,d,c,v),u=iA(1,f.outputs,d,u,w);let P=c!==null&&s!==null&&!Q_(e)?IB(c,d,s):null;a.push(P)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function aB(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function KR(n,e,t,r,i,o,s,a){let c=cr(e,t),u=e.inputs,d;!a&&u!=null&&(d=u[r])?(tw(n,t,d,r,i),Wf(e)&&cB(t,e.index)):e.type&3?(r=aB(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function cB(n,e){let t=To(e,n);t[de]&16||(t[de]|=64)}function ew(n,e,t,r){if(XA()){let i=r===null?null:{"":-1},o=fB(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&YR(n,e,t,s,i,a),i&&pB(t,r,i)}t.mergedAttrs=qa(t.mergedAttrs,t.attrs)}function YR(n,e,t,r,i,o){for(let u=0;u<r.length;u++)Wy(bf(t,e),n,r[u].type);gB(t,n.data.length,r.length);for(let u=0;u<r.length;u++){let d=r[u];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=qR(n,e,r.length,null);for(let u=0;u<r.length;u++){let d=r[u];t.mergedAttrs=qa(t.mergedAttrs,d.hostAttrs),vB(n,t,e,c,d),mB(c,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}sB(n,t,o)}function lB(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;uB(s)!=a&&s.push(a),s.push(t,r,o)}}function uB(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function dB(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Wf(t)&&yB(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||bf(t,e),go(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],u=za(e,n,a,t);if(go(u,e),s!==null&&EB(e,a-i,u,c,t,s),po(c)){let d=To(t.index,e);d[dn]=za(e,n,a,t)}}}function QR(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=WU();try{ps(o);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];By(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&hB(c,u)}}finally{ps(-1),By(s)}}function hB(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function fB(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(Wj(e,s.selectors,!1))if(r||(r=[]),po(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Xy(n,e,c)}else r.unshift(s),Xy(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Xy(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function pB(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Z(-301,!1);r.push(e[i],o)}}}function mB(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;po(e)&&(t[""]=n)}}function gB(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function vB(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ls(i.type,!0)),s=new ms(o,po(i),Me);n.blueprint[r]=s,t[r]=s,lB(n,e,r,qR(n,t,i.hostVars,bo),i)}function ZR(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function yB(n,e,t){let r=cr(e,n),i=GR(t),o=n[fo].rendererFactory,s=np(n,tp(n,i,null,ZR(t),r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=s}function _B(n,e,t,r,i,o){let s=cr(n,e);wB(e[Mt],s,o,n.value,t,r,i)}function wB(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?A_(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function EB(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],d=s[a++],f=s[a++];BR(r,t,c,u,d,f)}}function IB(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function JR(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function np(n,e){return n[au]?n[HS][Dr]=e:n[au]=e,n[HS]=e,e}function XR(n,e){let t=n[$a],r=t?t.get(yi,null):null;r&&r.handleError(e)}function tw(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],u=e[s],d=n.data[s];BR(d,u,r,a,c,i)}}function TB(n,e){let t=To(e,n),r=t[be];CB(r,t);let i=t[Ei];i!==null&&t[su]===null&&(t[su]=G_(i,t[$a])),nw(r,t,t[dn])}function CB(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function nw(n,e,t){V_(e);try{let r=n.viewQuery;r!==null&&Zy(1,r,t);let i=n.template;i!==null&&zR(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Wa]?.finishViewCreation(n),n.staticContentQueries&&LR(n,e),n.staticViewQueries&&Zy(2,n.viewQuery,t);let o=n.components;o!==null&&bB(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[de]&=-5,U_()}}function bB(n,e){for(let t=0;t<e.length;t++)TB(n,e[t])}var _i=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(_i||{}),DB;function rw(n,e){return DB(n,e)}function Fa(n,e,t,r,i){if(r!=null){let o,s=!1;Ii(r)?o=r:ho(r)&&(s=!0,r=r[Ei]);let a=Qr(r);n===0&&t!==null?i==null?HR(e,t,a):Af(e,t,a,i||null,!0):n===1&&t!==null?Af(e,t,a,i||null,!0):n===2?Xj(e,a,s):n===3&&e.destroyNode(a),o!=null&&UB(e,n,o,t,i)}}function SB(n,e){ex(n,e),e[Ei]=null,e[Ar]=null}function AB(n,e,t,r,i,o){r[Ei]=i,r[Ar]=e,op(n,r,t,1,i,o)}function ex(n,e){e[fo].changeDetectionScheduler?.notify(10),op(n,e,e[Mt],2,null,null)}function RB(n){let e=n[au];if(!e)return Ty(n[be],n);for(;e;){let t=null;if(ho(e))t=e[au];else{let r=e[bn];r&&(t=r)}if(!t){for(;e&&!e[Dr]&&e!==n;)ho(e)&&Ty(e[be],e),e=e[Dn];e===null&&(e=n),ho(e)&&Ty(e[be],e),t=e&&e[Dr]}e=t}}function xB(n,e,t,r){let i=bn+r,o=t.length;r>0&&(t[i-1][Dr]=e),r<o-bn?(e[Dr]=t[i],MA(t,bn+r,e)):(t.push(e),e[Dr]=null),e[Dn]=t;let s=e[Ha];s!==null&&t!==s&&tx(s,e);let a=e[Wa];a!==null&&a.insertView(n),Uy(e),e[de]|=128}function tx(n,e){let t=n[wf],r=e[Dn];if(ho(r))n[de]|=2;else{let i=r[Dn][Sr];e[Sr]!==i&&(n[de]|=2)}t===null?n[wf]=[e]:t.push(e)}function iw(n,e){let t=n[wf],r=t.indexOf(e);t.splice(r,1)}function lu(n,e){if(n.length<=bn)return;let t=bn+e,r=n[t];if(r){let i=r[Ha];i!==null&&i!==n&&iw(i,r),e>0&&(n[t-1][Dr]=r[Dr]);let o=gf(n,bn+e);SB(r[be],r);let s=o[Wa];s!==null&&s.detachView(o[be]),r[Dn]=null,r[Dr]=null,r[de]&=-129}return r}function rp(n,e){if(vu(e))return;let t=e[Mt];t.destroyNode&&op(n,e,t,3,null,null),RB(e)}function Ty(n,e){if(vu(e))return;let t=Ae(null);try{e[de]&=-129,e[de]|=256,e[Yn]&&ya(e[Yn]),MB(n,e),NB(n,e),e[be].type===1&&e[Mt].destroy();let r=e[Ha];if(r!==null&&Ii(e[Dn])){r!==e[Dn]&&iw(r,e);let i=e[Wa];i!==null&&i.detachView(n)}Yy(e)}finally{Ae(t)}}function NB(n,e){let t=n.cleanup,r=e[yf];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[yf]=null);let i=e[uo];if(i!==null){e[uo]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[ds];if(o!==null){e[ds]=null;for(let s of o)s.destroy()}}function MB(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ms)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];sr(4,a,c);try{c.call(a)}finally{sr(5,a,c)}}else{sr(4,i,o);try{o.call(i)}finally{sr(5,i,o)}}}}}function PB(n,e,t){return kB(n,e.parent,t)}function kB(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Ei];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Zr.None||o===Zr.Emulated)return null}return cr(r,t)}}function OB(n,e,t){return LB(n,e,t)}function FB(n,e,t){return n.type&40?cr(n,t):null}var LB=FB,sA;function ip(n,e,t,r){let i=PB(n,r,e),o=e[Mt],s=r.parent||e[Ar],a=OB(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)rA(o,i,t[c],a,!1);else rA(o,i,t,a,!1);sA!==void 0&&sA(o,r,e,t,i)}function nu(n,e){if(e!==null){let t=e.type;if(t&3)return cr(e,n);if(t&4)return e_(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return nu(n,r);{let i=n[e.index];return Ii(i)?e_(-1,i):Qr(i)}}else{if(t&128)return nu(n,e.next);if(t&32)return rw(e,n)()||Qr(n[e.index]);{let r=nx(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=fs(n[Sr]);return nu(i,r)}else return nu(n,e.next)}}}return null}function nx(n,e){if(e!==null){let r=n[Sr][Ar],i=e.projection;return r.projection[i]}return null}function e_(n,e){let t=bn+n+1;if(t<e.length){let r=e[t],i=r[be].firstChild;if(i!==null)return nu(r,i)}return e[hs]}function ow(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&go(Qr(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)ow(n,e,t.child,r,i,o,!1),Fa(e,n,i,a,o);else if(c&32){let u=rw(t,r),d;for(;d=u();)Fa(e,n,i,d,o);Fa(e,n,i,a,o)}else c&16?VB(n,e,r,t,i,o):Fa(e,n,i,a,o);t=s?t.projectionNext:t.next}}function op(n,e,t,r,i,o){ow(t,r,n.firstChild,e,i,o,!1)}function VB(n,e,t,r,i,o){let s=t[Sr],c=s[Ar].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];Fa(e,n,i,d,o)}else{let u=c,d=s[Dn];AR(r)&&(u.flags|=128),ow(n,e,u,d,i,o,!0)}}function UB(n,e,t,r,i){let o=t[hs],s=Qr(t);o!==s&&Fa(e,n,r,o,i);for(let a=bn;a<t.length;a++){let c=t[a];op(c[be],c,n,e,r,o)}}function jB(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:_i.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=_i.Important),n.setStyle(t,r,i,o))}}function sp(n,e,t,r){let i=Ae(null);try{let o=e.tView,a=n[de]&4096?4096:16,c=tp(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[Ha]=u;let d=n[Wa];return d!==null&&(c[Wa]=d.createEmbeddedView(o)),nw(o,c,t),c}finally{Ae(i)}}function rx(n,e){let t=bn+e;if(t<n.length)return n[t]}function uu(n,e){return!e||e.firstChild===null||AR(n)}function ap(n,e,t,r=!0){let i=e[be];if(xB(i,e,n,t),r){let s=e_(t,n),a=e[Mt],c=a.parentNode(n[hs]);c!==null&&AB(i,n[Ar],a,e,c,s)}let o=e[su];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function ix(n,e){let t=lu(n,e);return t!==void 0&&rp(t[be],t),t}function Rf(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Qr(o)),Ii(o)&&BB(o,r);let s=t.type;if(s&8)Rf(n,e,t.child,r);else if(s&32){let a=rw(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=nx(e,t);if(Array.isArray(a))r.push(...a);else{let c=fs(e[Sr]);Rf(c[be],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function BB(n,e){for(let t=bn;t<n.length;t++){let r=n[t],i=r[be].firstChild;i!==null&&Rf(r[be],r,i,e)}n[hs]!==n[Ei]&&e.push(n[hs])}var ox=[];function $B(n){return n[Yn]??HB(n)}function HB(n){let e=ox.pop()??Object.create(qB);return e.lView=n,e}function WB(n){n.lView[Yn]!==n&&(n.lView=null,ox.push(n))}var qB=fe(U({},ts),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{yu(n.lView)},consumerOnSignalRead(){this.lView[Yn]=this}});function zB(n){let e=n[Yn]??Object.create(GB);return e.lView=n,e}var GB=fe(U({},ts),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=fs(n.lView);for(;e&&!sx(e[be]);)e=fs(e);e&&F_(e)},consumerOnSignalRead(){this.lView[Yn]=this}});function sx(n){return n.type!==2}function ax(n){if(n[ds]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[ds])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[de]&8192)}}var KB=100;function cx(n,e=!0,t=0){let i=n[fo].rendererFactory,o=!1;o||i.begin?.();try{YB(n,t)}catch(s){throw e&&XR(n,s),s}finally{o||i.end?.()}}function YB(n,e){let t=nR();try{Ef(!0),t_(n,e);let r=0;for(;zf(n);){if(r===KB)throw new Z(103,!1);r++,t_(n,1)}}finally{Ef(t)}}function QB(n,e,t,r){if(vu(e))return;let i=e[de],o=!1,s=!1;V_(e);let a=!0,c=null,u=null;o||(sx(n)?(u=$B(e),c=va(u)):XD()===null?(a=!1,u=zB(e),c=va(u)):e[Yn]&&(ya(e[Yn]),e[Yn]=null));try{ZA(e),jU(n.bindingStartIndex),t!==null&&zR(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let v=n.preOrderCheckHooks;v!==null&&uf(e,v,null)}else{let v=n.preOrderHooks;v!==null&&df(e,v,0,null),wy(e,0)}if(s||ZB(e),ax(e),lx(e,0),n.contentQueries!==null&&LR(n,e),!o)if(d){let v=n.contentCheckHooks;v!==null&&uf(e,v)}else{let v=n.contentHooks;v!==null&&df(e,v,1),wy(e,1)}XB(n,e);let f=n.components;f!==null&&dx(e,f,0);let m=n.viewQuery;if(m!==null&&Zy(2,m,r),!o)if(d){let v=n.viewCheckHooks;v!==null&&uf(e,v)}else{let v=n.viewHooks;v!==null&&df(e,v,2),wy(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[lf]){for(let v of e[lf])v();e[lf]=null}o||(e[de]&=-73)}catch(d){throw o||yu(e),d}finally{u!==null&&(ql(u,c),a&&WB(u)),U_()}}function lx(n,e){for(let t=NR(n);t!==null;t=MR(t))for(let r=bn;r<t.length;r++){let i=t[r];ux(i,e)}}function ZB(n){for(let e=NR(n);e!==null;e=MR(e)){if(!(e[de]&2))continue;let t=e[wf];for(let r=0;r<t.length;r++){let i=t[r];F_(i)}}}function JB(n,e,t){let r=To(e,n);ux(r,t)}function ux(n,e){O_(n)&&t_(n,e)}function t_(n,e){let r=n[be],i=n[de],o=n[Yn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&zl(o)),s||=!1,o&&(o.dirty=!1),n[de]&=-9217,s)QB(r,n,r.template,n[dn]);else if(i&8192){ax(n),lx(n,1);let a=r.components;a!==null&&dx(n,a,1)}}function dx(n,e,t){for(let r=0;r<e.length;r++)JB(n,e[r],t)}function XB(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ps(~i);else{let o=i,s=t[++r],a=t[++r];HU(s,o);let c=e[o];sr(24,c),a(2,c),sr(25,c)}}}finally{ps(-1)}}function sw(n,e){let t=nR()?64:1088;for(n[fo].changeDetectionScheduler?.notify(e);n;){n[de]|=t;let r=fs(n);if(Ly(n)&&!r)return n;n=r}return null}var vs=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[be];return Rf(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[dn]}get dirty(){return!!(this._lView[de]&9280)||!!this._lView[Yn]?.dirty}set context(e){this._lView[dn]=e}get destroyed(){return vu(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Dn];if(Ii(e)){let t=e[_f],r=t?t.indexOf(this):-1;r>-1&&(lu(e,r),gf(t,r))}this._attachedToViewContainer=!1}rp(this._lView[be],this._lView)}onDestroy(e){JA(this._lView,e)}markForCheck(){sw(this._cdRefInjectingView||this._lView,4)}markForRefresh(){F_(this._cdRefInjectingView||this._lView)}detach(){this._lView[de]&=-129}reattach(){Uy(this._lView),this._lView[de]|=128}detectChanges(){this._lView[de]|=1024,cx(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ly(this._lView),t=this._lView[Ha];t!==null&&!e&&iw(t,this._lView),ex(this._lView[be],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Z(902,!1);this._appRef=e;let t=Ly(this._lView),r=this._lView[Ha];r!==null&&!t&&tx(r,this._lView),Uy(this._lView)}},aw=(()=>{class n{static __NG_ELEMENT_ID__=n$}return n})(),e$=aw,t$=class extends e${_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=sp(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new vs(i)}};function n$(){return r$(hn(),ke())}function r$(n,e){return n.type&4?new t$(e,n,Xf(n,e)):null}function _u(n,e,t,r,i){let o=n.data[e];if(o===null)o=i$(n,e,t,r,i),$U()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=UU();o.injectorIndex=s===null?-1:s.injectorIndex}return _s(o,!0),o}function i$(n,e,t,r,i){let o=eR(),s=L_(),a=s?o:o&&o.parent,c=n.data[e]=s$(n,a,t,e,r,i);return o$(n,c,o,s),c}function o$(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function s$(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return FU()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var nse=new RegExp(`^(\\d+)*(${Nj}|${xj})*(.*)`);var a$=()=>null;function du(n,e){return a$(n,e)}var n_=class{},xf=class{},r_=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Vn(e)}.`)}},yo=class{static NULL=new r_},Ga=class{},bi=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>c$()}return n})();function c$(){let n=ke(),e=hn(),t=To(e.index,n);return(ho(t)?t:n)[Mt]}var l$=(()=>{class n{static \u0275prov=j({token:n,providedIn:"root",factory:()=>null})}return n})();function Nf(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=LS(i,a);else if(o==2){let c=a,u=e[++s];r=LS(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Mf=class extends yo{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=us(e);return new hu(t,this.ngModule)}};function aA(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:vo.None;e?t.push({propName:s,templateName:r,isSignal:(a&vo.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function u$(n){let e=n.toLowerCase();return e==="svg"?bU:e==="math"?DU:null}function d$(n){let{attrs:e,classes:t}=Yj(n),r=e;return t.length&&r.push(1,...t),r}var hu=class extends xf{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){let e=this.componentDef,t=e.inputTransforms,r=aA(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return aA(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=Kj(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Ae(null);try{i=i||this.ngModule;let s=i instanceof Un?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new $y(e,s):e,c=a.get(Ga,null);if(c===null)throw new Z(407,!1);let u=a.get(l$,null),d=a.get(gs,null),f={rendererFactory:c,sanitizer:u,changeDetectionScheduler:d},m=c.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",w=r?rB(m,r,this.componentDef.encapsulation,a):$R(m,v,u$(v)),P=512;this.componentDef.signals?P|=4096:this.componentDef.onPush||(P|=16);let N=null;w!==null&&(N=G_(w,a,!0));let L=X_(0,null,null,1,0,null,null,null,null,null,null),W=tp(null,L,null,P,null,null,f,m,a,null,N);W[Cn]=w,V_(W);let Y,re=null;try{let ue=this.componentDef,D,_=null;ue.findHostDirectiveDefs?(D=[],_=new Map,ue.findHostDirectiveDefs(ue,D,_),D.push(ue)):D=[ue];let E=r?["ng-version","19.1.3"]:d$(this.componentDef.selectors[0]),b=_u(L,Cn,2,"#host",E);for(let A of D)b.mergedAttrs=qa(b.mergedAttrs,A.hostAttrs);b.mergedAttrs=qa(b.mergedAttrs,E),Nf(b,b.mergedAttrs,!0),w&&WR(m,w,b),re=h$(b,w,ue,D,W,f),t!==void 0&&p$(b,this.ngContentSelectors,t),Y=f$(re,ue,D,_,W,[m$]),nw(L,W,null)}catch(ue){throw re!==null&&Yy(re),Yy(W),ue}finally{U_()}let it=k_(L,Cn);return new i_(this.componentType,Y,Xf(it,W),W,it)}finally{Ae(o)}}},i_=class extends n_{location;_rootLView;_tNode;instance;hostView;changeDetectorRef;componentType;previousInputValues=null;constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new vs(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;tw(o[be],o,i,e,t),this.previousInputValues.set(e,t);let s=To(this._tNode.index,o);sw(s,1)}}get injector(){return new cs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function h$(n,e,t,r,i,o){let s=i[be],a=null;e!==null&&(a=G_(e,i[$a]));let c=o.rendererFactory.createRenderer(e,t),u=tp(i,GR(t),null,ZR(t),i[n.index],n,o,c,null,null,a);return s.firstCreatePass&&Xy(s,n,r.length-1),np(i,u),i[n.index]=u}function f$(n,e,t,r,i,o){let s=hn(),a=i[be],c=cr(s,i);YR(a,i,s,t,null,r);for(let d=0;d<t.length;d++){let f=s.directiveStart+d,m=za(i,a,f,s);go(m,i)}QR(a,i,s),c&&go(c,i);let u=za(i,a,s.directiveStart+s.componentOffset,s);if(n[dn]=i[dn]=u,o!==null)for(let d of o)d(u,e);return K_(a,s,i),u}function p$(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}function m$(){let n=hn();Qf(ke()[be],n)}var Es=(()=>{class n{static __NG_ELEMENT_ID__=g$}return n})();function g$(){let n=hn();return y$(n,ke())}var v$=Es,hx=class extends v${_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Xf(this._hostTNode,this._hostLView)}get injector(){return new cs(this._hostTNode,this._hostLView)}get parentInjector(){let e=B_(this._hostTNode,this._hostLView);if(dR(e)){let t=Tf(e,this._hostLView),r=If(e),i=t[be].data[r+8];return new cs(i,t)}else return new cs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=cA(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-bn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=du(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,uu(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!EU(e),a;if(s)a=t;else{let w=t||{};a=w.index,r=w.injector,i=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef}let c=s?e:new hu(us(e)),u=r||this.parentInjector;if(!o&&c.ngModule==null){let P=(s?u:this.parentInjector).get(Un,null);P&&(o=P)}let d=us(c.componentType??{}),f=du(this._lContainer,d?.id??null),m=f?.firstChild??null,v=c.create(u,i,m,o);return this.insertImpl(v.hostView,a,uu(this._hostTNode,f)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(AU(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Dn],u=new hx(c,c[Ar],c[Dn]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return ap(s,i,o,r),e.attachToViewContainerRef(),MA(Cy(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=cA(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=lu(this._lContainer,t);r&&(gf(Cy(this._lContainer),t),rp(r[be],r))}detach(e){let t=this._adjustIndex(e,-1),r=lu(this._lContainer,t);return r&&gf(Cy(this._lContainer),t)!=null?new vs(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function cA(n){return n[_f]}function Cy(n){return n[_f]||(n[_f]=[])}function y$(n,e){let t,r=e[n.index];return Ii(r)?t=r:(t=JR(r,e,null,n),e[n.index]=t,np(e,t)),w$(t,e,n,r),new hx(t,n,e)}function _$(n,e){let t=n[Mt],r=t.createComment(""),i=cr(e,n),o=t.parentNode(i);return Af(t,o,r,t.nextSibling(i),!1),r}var w$=T$,E$=()=>!1;function I$(n,e,t){return E$(n,e,t)}function T$(n,e,t,r){if(n[hs])return;let i;t.type&8?i=Qr(r):i=_$(e,t),n[hs]=i}var _o=class{},fu=class{};var o_=class extends _o{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Mf(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=OA(e);this._bootstrapComponents=VR(o.bootstrap),this._r3Injector=wR(e,t,[{provide:_o,useValue:this},{provide:yo,useValue:this.componentFactoryResolver},...r],Vn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},s_=class extends fu{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new o_(this.moduleType,e,[])}};var Pf=class extends _o{injector;componentFactoryResolver=new Mf(this);instance=null;constructor(e){super();let t=new ou([...e.providers,{provide:_o,useValue:this},{provide:yo,useValue:this.componentFactoryResolver}],e.parent||M_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function cw(n,e,t=null){return new Pf({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var C$=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=UA(!1,t.type),i=r.length>0?cw([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=j({token:n,providedIn:"environment",factory:()=>new n(he(Un))})}return n})();function Ve(n){return mu(()=>{let e=px(n),t=fe(U({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===RR.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(C$).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Zr.Emulated,styles:n.styles||or,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ci("NgStandalone"),mx(t);let r=n.dependencies;return t.directiveDefs=uA(r,!1),t.pipeDefs=uA(r,!0),t.id=S$(t),t})}function b$(n){return us(n)||FA(n)}function D$(n){return n!==null}function Do(n){return mu(()=>({type:n.type,bootstrap:n.bootstrap||or,declarations:n.declarations||or,imports:n.imports||or,exports:n.exports||or,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function lA(n,e){if(n==null)return Ua;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=vo.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==vo.None?[r,a]:r,e[o]=s):t[o]=r}return t}function at(n){return mu(()=>{let e=px(n);return mx(e),e})}function fx(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function px(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ua,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||or,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:lA(n.inputs,e),outputs:lA(n.outputs),debugInfo:null}}function mx(n){n.features?.forEach(e=>e(n))}function uA(n,e){if(!n)return null;let t=e?LA:b$;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(D$)}function S$(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function A$(n){return Object.getPrototypeOf(n.prototype).constructor}function jn(n){let e=A$(n.type),t=!0,r=[n];for(;e;){let i;if(po(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Z(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=sf(n.inputs),s.inputTransforms=sf(n.inputTransforms),s.declaredInputs=sf(n.declaredInputs),s.outputs=sf(n.outputs);let a=i.hostBindings;a&&P$(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&N$(n,c),u&&M$(n,u),R$(n,i),B2(n.outputs,i.outputs),po(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===jn&&(t=!1)}}e=Object.getPrototypeOf(e)}x$(r)}function R$(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function x$(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=qa(i.hostAttrs,t=qa(t,i.hostAttrs))}}function sf(n){return n===Ua?{}:n===or?[]:n}function N$(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function M$(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function P$(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function gx(n){return O$(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function k$(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function O$(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function lw(n,e,t){return n[e]=t}function Jr(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function a_(n,e,t,r){let i=Jr(n,e,t);return Jr(n,e+1,r)||i}function F$(n,e,t,r,i,o){let s=a_(n,e,t,r);return a_(n,e+2,i,o)||s}function L$(n){return(n.flags&32)===32}function V$(n,e,t,r,i,o,s,a,c){let u=e.consts,d=_u(e,n,4,s||null,a||null);ew(e,t,d,mo(u,c)),Qf(e,d);let f=d.tView=X_(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function c_(n,e,t,r,i,o,s,a,c,u){let d=t+Cn,f=e.firstCreatePass?V$(d,e,n,r,i,o,s,a,c):e.data[d];_s(f,!1);let m=U$(e,n,f,t);Kf()&&ip(e,n,m,f),go(m,n);let v=JR(m,n,m,f);return n[d]=v,np(n,v),I$(v,f,n),qf(f)&&Z_(e,n,f),c!=null&&J_(n,f,u),f}function X(n,e,t,r,i,o,s,a){let c=ke(),u=rn(),d=mo(u.consts,o);return c_(c,u,n,e,t,r,i,d,s,a),X}var U$=j$;function j$(n,e,t,r){return Yf(!0),e[Mt].createComment("")}var uw=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var vx=new q("");function Is(n){return!!n&&typeof n.then=="function"}function yx(n){return!!n&&typeof n.subscribe=="function"}var _x=new q("");var wx=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=S(_x,{optional:!0})??[];injector=S(Se);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Sn(this.injector,i);if(Is(o))t.push(o);else if(yx(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ex=(()=>{class n{static \u0275prov=j({token:n,providedIn:"root",factory:()=>new kf})}return n})(),kf=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}},dw=new q("");function B$(){lS(()=>{throw new Z(600,!1)})}function $$(n){return n.isBoundToModule}var H$=10;function W$(n,e,t){try{let r=t();return Is(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var wo=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=S(wj);afterRenderManager=S(Pj);zonelessEnabled=S(Zf);rootEffectScheduler=S(Ex);dirtyFlags=0;deferredDirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new st;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=S(Co).hasPendingTasks.pipe(ee(t=>!t));constructor(){S(ep,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=S(Un);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){let i=t instanceof xf;if(!this._injector.get(wx).done){let m=!i&&VA(t),v=!1;throw new Z(405,v)}let s;i?s=t:s=this._injector.get(yo).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=$$(s)?void 0:this._injector.get(_o),c=r||s.selector,u=s.create(Se.NULL,[],c,a),d=u.location.nativeElement,f=u.injector.get(vx,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),hf(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick=()=>{if(this.tracingSnapshot!==null){let r=this.tracingSnapshot;this.tracingSnapshot=null,r.run(FR.CHANGE_DETECTION,this._tick),r.dispose();return}if(this._runningTick)throw new Z(101,!1);let t=Ae(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ae(t),this.afterTick.next()}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ga,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let t=0;for(;this.dirtyFlags!==0&&t++<H$;)this.synchronizeOnce()}synchronizeOnce(){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)q$(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>zf(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;hf(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(dw,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>hf(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Z(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hf(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function q$(n,e,t,r){if(!t&&!zf(n))return;cx(n,e,t&&!r?0:1)}function wu(n,e,t,r){let i=ke(),o=Za();if(Jr(i,o,e)){let s=rn(),a=j_();_B(a,i,n,e,t,r)}return wu}function z$(n,e,t,r){return Jr(n,Za(),t)?e+A_(t)+r:bo}function af(n,e){return n<<17|e<<2}function ys(n){return n>>17&32767}function G$(n){return(n&2)==2}function K$(n,e){return n&131071|e<<17}function l_(n){return n|2}function Ka(n){return(n&131068)>>2}function by(n,e){return n&-131069|e<<2}function Y$(n){return(n&1)===1}function u_(n){return n|1}function Q$(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ys(s),c=Ka(s);n[r]=t;let u=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||gu(f,d)>0)&&(u=!0)}else d=t;if(i)if(c!==0){let m=ys(n[a+1]);n[r+1]=af(m,a),m!==0&&(n[m+1]=by(n[m+1],r)),n[a+1]=K$(n[a+1],r)}else n[r+1]=af(a,0),a!==0&&(n[a+1]=by(n[a+1],r)),a=r;else n[r+1]=af(c,0),a===0?a=r:n[c+1]=by(n[c+1],r),c=r;u&&(n[r+1]=l_(n[r+1])),dA(n,d,r,!0),dA(n,d,r,!1),Z$(e,d,n,r,o),s=af(a,c),o?e.classBindings=s:e.styleBindings=s}function Z$(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&gu(o,e)>=0&&(t[r+1]=u_(t[r+1]))}function dA(n,e,t,r){let i=n[t+1],o=e===null,s=r?ys(i):Ka(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],u=n[s+1];J$(c,e)&&(a=!0,n[s+1]=r?u_(u):l_(u)),s=r?ys(u):Ka(u)}a&&(n[t+1]=r?l_(i):u_(i))}function J$(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?gu(n,e)>=0:!1}function Q(n,e,t){let r=ke(),i=Za();if(Jr(r,i,e)){let o=rn(),s=j_();KR(o,s,r,n,e,r[Mt],t,!1)}return Q}function hA(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";tw(n,t,o[s],s,r)}function Ja(n,e,t){return Ix(n,e,t,!1),Ja}function cp(n,e){return Ix(n,e,null,!0),cp}function Ix(n,e,t,r){let i=ke(),o=rn(),s=BU(2);if(o.firstUpdatePass&&eH(o,n,s,r),e!==bo&&Jr(i,s,e)){let a=o.data[ws()];oH(o,a,i,i[Mt],n,i[s+1]=sH(e,t),r,s)}}function X$(n,e){return e>=n.expandoStartIndex}function eH(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[ws()],s=X$(n,t);aH(o,r)&&e===null&&!s&&(e=!1),e=tH(i,o,e,r),Q$(i,o,e,t,s,r)}}function tH(n,e,t,r){let i=qU(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Dy(null,n,e,t,r),t=pu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Dy(i,n,e,t,r),o===null){let c=nH(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Dy(null,n,e,c[1],r),c=pu(c,e.attrs,r),rH(n,e,r,c))}else o=iH(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function nH(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ka(r)!==0)return n[ys(r)]}function rH(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ys(i)]=r}function iH(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=pu(r,s,t)}return pu(r,e.attrs,t)}function Dy(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=pu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function pu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),cU(n,s,t?!0:e[++o]))}return n===void 0?null:n}function oH(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],d=Y$(u)?fA(c,e,t,i,Ka(u),s):void 0;if(!Of(d)){Of(o)||G$(u)&&(o=fA(c,null,t,i,a,s));let f=QA(ws(),t);jB(r,s,f,i,o)}}function fA(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),d=u?c[1]:c,f=d===null,m=t[i+1];m===bo&&(m=f?or:void 0);let v=f?yy(m,r):d===r?m:void 0;if(u&&!Of(v)&&(v=yy(c,r)),Of(v)&&(a=v,s))return a;let w=n[i+1];i=s?ys(w):Ka(w)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=yy(c,r))}return a}function Of(n){return n!==void 0}function sH(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Vn(Y_(n)))),n}function aH(n,e){return(n.flags&(e?8:16))!==0}var d_=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function Sy(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function cH(n,e,t){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){let u=n.at(o),d=e[o],f=Sy(o,u,o,d,t);if(f!==0){f<0&&n.updateValue(o,d),o++;continue}let m=n.at(s),v=e[c],w=Sy(s,m,c,v,t);if(w!==0){w<0&&n.updateValue(s,v),s--,c--;continue}let P=t(o,u),N=t(s,m),L=t(o,d);if(Object.is(L,N)){let W=t(c,v);Object.is(W,P)?(n.swap(o,s),n.updateValue(s,v),c--,s--):n.move(s,o),n.updateValue(o,d),o++;continue}if(r??=new Ff,i??=mA(n,o,s,t),h_(n,r,o,L))n.updateValue(o,d),o++,s++;else if(i.has(L))r.set(P,n.detach(o)),s--;else{let W=n.create(o,e[o]);n.attach(o,W),o++,s++}}for(;o<=c;)pA(n,r,t,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),u=c.next();for(;!u.done&&o<=s;){let d=n.at(o),f=u.value,m=Sy(o,d,o,f,t);if(m!==0)m<0&&n.updateValue(o,f),o++,u=c.next();else{r??=new Ff,i??=mA(n,o,s,t);let v=t(o,f);if(h_(n,r,o,v))n.updateValue(o,f),o++,s++,u=c.next();else if(!i.has(v))n.attach(o,n.create(o,f)),o++,s++,u=c.next();else{let w=t(o,d);r.set(w,n.detach(o)),s--}}}for(;!u.done;)pA(n,r,t,n.length,u.value),u=c.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(c=>{n.destroy(c)})}function h_(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function pA(n,e,t,r,i){if(h_(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function mA(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var Ff=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function ie(n,e){Ci("NgControlFlow");let t=ke(),r=Za(),i=t[r]!==bo?t[r]:-1,o=i!==-1?Lf(t,Cn+i):void 0,s=0;if(Jr(t,r,n)){let a=Ae(null);try{if(o!==void 0&&ix(o,s),n!==-1){let c=Cn+n,u=Lf(t,c),d=g_(t[be],c),f=du(u,d.tView.ssrId),m=sp(t,d,e,{dehydratedView:f});ap(u,m,s,uu(d,f))}}finally{Ae(a)}}else if(o!==void 0){let a=rx(o,s);a!==void 0&&(a[dn]=e)}}var f_=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-bn}};function Tx(n,e){return e}var p_=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Cx(n,e,t,r,i,o,s,a,c,u,d,f,m){Ci("NgControlFlow");let v=ke(),w=rn(),P=c!==void 0,N=ke(),L=a?s.bind(N[Sr][dn]):s,W=new p_(P,L);N[Cn+n]=W,c_(v,w,n+1,e,t,r,i,mo(w.consts,o)),P&&c_(v,w,n+2,c,u,d,f,mo(w.consts,m))}var m_=class extends d_{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-bn}at(e){return this.getLView(e)[dn].$implicit}attach(e,t){let r=t[su];this.needsIndexUpdate||=e!==this.length,ap(this.lContainer,t,e,uu(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,lH(this.lContainer,e)}create(e,t){let r=du(this.lContainer,this.templateTNode.tView.ssrId),i=sp(this.hostLView,this.templateTNode,new f_(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){rp(e[be],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[dn].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[dn].$index=e}getLView(e){return uH(this.lContainer,e)}};function bx(n){let e=Ae(null),t=ws();try{let r=ke(),i=r[be],o=r[t],s=t+1,a=Lf(r,s);if(o.liveCollection===void 0){let u=g_(i,s);o.liveCollection=new m_(a,r,u)}else o.liveCollection.reset();let c=o.liveCollection;if(cH(c,n,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let u=Za(),d=c.length===0;if(Jr(r,u,d)){let f=t+2,m=Lf(r,f);if(d){let v=g_(i,f),w=du(m,v.tView.ssrId),P=sp(r,v,void 0,{dehydratedView:w});ap(m,P,0,uu(v,w))}else ix(m,0)}}}finally{Ae(e)}}function Lf(n,e){return n[e]}function lH(n,e){return lu(n,e)}function uH(n,e){return rx(n,e)}function g_(n,e){return k_(n,e)}function dH(n,e,t,r,i,o){let s=e.consts,a=mo(s,i),c=_u(e,n,2,r,a);return ew(e,t,c,mo(s,o)),c.attrs!==null&&Nf(c,c.attrs,!1),c.mergedAttrs!==null&&Nf(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function T(n,e,t,r){let i=ke(),o=rn(),s=Cn+n,a=i[Mt],c=o.firstCreatePass?dH(s,o,i,e,t,r):o.data[s],u=hH(o,i,c,a,e,n);i[s]=u;let d=qf(c);return _s(c,!0),WR(a,u,c),!L$(c)&&Kf()&&ip(o,i,u,c),PU()===0&&go(u,i),kU(),d&&(Z_(o,i,c),K_(o,c,i)),r!==null&&J_(i,c),T}function C(){let n=hn();L_()?tR():(n=n.parent,_s(n,!1));let e=n;LU(e)&&VU(),OU();let t=rn();return t.firstCreatePass&&(Qf(t,n),P_(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&JU(e)&&hA(t,e,ke(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&XU(e)&&hA(t,e,ke(),e.stylesWithoutHost,!1),C}function _e(n,e,t,r){return T(n,e,t,r),C(),_e}var hH=(n,e,t,r,i,o)=>(Yf(!0),$R(r,i,KU()));function fH(n,e,t,r,i){let o=e.consts,s=mo(o,r),a=_u(e,n,8,"ng-container",s);s!==null&&Nf(a,s,!0);let c=mo(o,i);return ew(e,t,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function hw(n,e,t){let r=ke(),i=rn(),o=n+Cn,s=i.firstCreatePass?fH(o,i,r,e,t):i.data[o];_s(s,!0);let a=pH(i,r,s,n);return r[o]=a,Kf()&&ip(i,r,a,s),go(a,r),qf(s)&&(Z_(i,r,s),K_(i,s,r)),t!=null&&J_(r,s),hw}function fw(){let n=hn(),e=rn();return L_()?tR():(n=n.parent,_s(n,!1)),e.firstCreatePass&&(Qf(e,n),P_(n)&&e.queries.elementEnd(n)),fw}var pH=(n,e,t,r)=>(Yf(!0),Jj(e[Mt],""));function Di(){return ke()}var as=void 0;function mH(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var gH=["en",[["a","p"],["AM","PM"],as],[["AM","PM"],as,as],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],as,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],as,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",as,"{1} 'at' {0}",as],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",mH],Ay={};function ur(n){let e=vH(n),t=gA(e);if(t)return t;let r=e.split("-")[0];if(t=gA(r),t)return t;if(r==="en")return gH;throw new Z(701,!1)}function gA(n){return n in Ay||(Ay[n]=eu.ng&&eu.ng.common&&eu.ng.common.locales&&eu.ng.common.locales[n]),Ay[n]}var Rt=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Rt||{});function vH(n){return n.toLowerCase().replace(/_/g,"-")}var Vf="en-US";var yH=Vf;function _H(n){typeof n=="string"&&(yH=n.toLowerCase().replace(/_/g,"-"))}var wH=(n,e,t)=>{};function ce(n,e,t,r){let i=ke(),o=rn(),s=hn();return Dx(o,i,i[Mt],s,n,e,r),ce}function EH(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[yf],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function Dx(n,e,t,r,i,o,s){let a=qf(r),u=n.firstCreatePass&&MU(n),d=e[dn],f=NU(e),m=!0;if(r.type&3||s){let P=cr(r,e),N=s?s(P):P,L=f.length,W=s?re=>s(Qr(re[r.index])):r.index,Y=null;if(!s&&a&&(Y=EH(n,e,i,r.index)),Y!==null){let re=Y.__ngLastListenerFn__||Y;re.__ngNextListenerFn__=o,Y.__ngLastListenerFn__=o,m=!1}else{o=yA(r,e,d,o),wH(P,i,o);let re=t.listen(N,i,o);f.push(o,re),u&&u.push(i,W,L,L+1)}}else o=yA(r,e,d,o);let v=r.outputs,w;if(m&&v!==null&&(w=v[i])){let P=w.length;if(P)for(let N=0;N<P;N+=2){let L=w[N],W=w[N+1],it=e[L][W].subscribe(o),ue=f.length;f.push(o,it),u&&u.push(i,r.index,ue,-(ue+1))}}}function vA(n,e,t,r){let i=Ae(null);try{return sr(6,e,t),t(r)!==!1}catch(o){return XR(n,o),!1}finally{sr(7,e,t),Ae(i)}}function yA(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?To(n.index,e):e;sw(s,5);let a=vA(e,t,r,o),c=i.__ngNextListenerFn__;for(;c;)a=vA(e,t,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function H(n=1){return GU(n)}function IH(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function R(n,e=""){let t=ke(),r=rn(),i=n+Cn,o=r.firstCreatePass?_u(r,i,1,e,null):r.data[i],s=TH(r,t,o,e,n);t[i]=s,Kf()&&ip(r,t,s,o),_s(o,!1)}var TH=(n,e,t,r,i)=>(Yf(!0),Qj(e[Mt],r));function kt(n){return z("",n,""),kt}function z(n,e,t){let r=ke(),i=z$(r,n,e,t);return i!==bo&&CH(r,ws(),i),z}function CH(n,e,t){let r=QA(e,n);Zj(n[Mt],r,t)}function xr(n,e,t){SR(e)&&(e=e());let r=ke(),i=Za();if(Jr(r,i,e)){let o=rn(),s=j_();KR(o,s,r,n,e,r[Mt],t,!1)}return xr}function Xr(n,e){let t=SR(n);return t&&n.set(e),t}function Nr(n,e){let t=ke(),r=rn(),i=hn();return Dx(r,t,t[Mt],i,n,e),Nr}function bH(n,e,t){let r=rn();if(r.firstCreatePass){let i=po(n);v_(t,r.data,r.blueprint,i,!0),v_(e,r.data,r.blueprint,i,!1)}}function v_(n,e,t,r,i){if(n=Tn(n),Array.isArray(n))for(let o=0;o<n.length;o++)v_(n[o],e,t,r,i);else{let o=rn(),s=ke(),a=hn(),c=Ba(n)?n:Tn(n.provide),u=$A(n),d=a.providerIndexes&1048575,f=a.directiveStart,m=a.providerIndexes>>20;if(Ba(n)||!n.multi){let v=new ms(u,i,Me),w=xy(c,e,i?d:d+m,f);w===-1?(Wy(bf(a,s),o,c),Ry(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(v),s.push(v)):(t[w]=v,s[w]=v)}else{let v=xy(c,e,d+m,f),w=xy(c,e,d,d+m),P=v>=0&&t[v],N=w>=0&&t[w];if(i&&!N||!i&&!P){Wy(bf(a,s),o,c);let L=AH(i?SH:DH,t.length,i,r,u);!i&&N&&(t[w].providerFactory=L),Ry(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(L),s.push(L)}else{let L=Sx(t[i?w:v],u,!i&&r);Ry(o,n,v>-1?v:w,L)}!i&&r&&N&&t[w].componentProviders++}}}function Ry(n,e,t,r){let i=Ba(e),o=pU(e);if(i||o){let c=(o?Tn(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=u.indexOf(t);d===-1?u.push(t,[r,c]):u[d+1].push(r,c)}else u.push(t,c)}}}function Sx(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function xy(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function DH(n,e,t,r){return y_(this.multi,[])}function SH(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=za(t,t[be],this.providerFactory.index,r);o=a.slice(0,s),y_(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],y_(i,o);return o}function y_(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function AH(n,e,t,r,i){let o=new ms(n,t,Me);return o.multi=[],o.index=e,o.componentProviders=0,Sx(o,i,r&&!t),o}function ei(n,e=[]){return t=>{t.providersResolver=(r,i)=>bH(r,i?i(n):n,e)}}function nt(n,e,t,r){return RH(ke(),Gf(),n,e,t,r)}function Mr(n,e,t,r,i){return Rx(ke(),Gf(),n,e,t,r,i)}function Ax(n,e,t,r,i,o,s){return xH(ke(),Gf(),n,e,t,r,i,o,s)}function pw(n,e){let t=n[e];return t===bo?void 0:t}function RH(n,e,t,r,i,o){let s=e+t;return Jr(n,s,i)?lw(n,s+1,o?r.call(o,i):r(i)):pw(n,s+1)}function Rx(n,e,t,r,i,o,s){let a=e+t;return a_(n,a,i,o)?lw(n,a+2,s?r.call(s,i,o):r(i,o)):pw(n,a+2)}function xH(n,e,t,r,i,o,s,a,c){let u=e+t;return F$(n,u,i,o,s,a)?lw(n,u+4,c?r.call(c,i,o,s,a):r(i,o,s,a)):pw(n,u+4)}function So(n,e){let t=rn(),r,i=n+Cn;t.firstCreatePass?(r=NH(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=ls(r.type,!0)),s,a=Ln(Me);try{let c=Cf(!1),u=o();return Cf(c),IH(t,ke(),i,u),u}finally{Ln(a)}}function NH(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Ao(n,e,t,r){let i=n+Cn,o=ke(),s=SU(o,i);return MH(o,i)?Rx(o,Gf(),e,s.transform,t,r,s):s.transform(t,r)}function MH(n,e){return n[be].data[e].pure}var wi=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},xx=new wi("19.1.3"),__=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},mw=(()=>{class n{compileModuleSync(t){return new s_(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=OA(t),o=VR(i.declarations).reduce((s,a)=>{let c=us(a);return c&&s.push(new hu(c)),s},[]);return new __(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var PH=(()=>{class n{zone=S(me);changeDetectionScheduler=S(gs);applicationRef=S(wo);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kH=new q("",{factory:()=>!1});function Nx({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new me(fe(U({},Px()),{scheduleInRootZone:t})),[{provide:me,useFactory:n},{provide:ja,multi:!0,useFactory:()=>{let r=S(PH,{optional:!0});return()=>r.initialize()}},{provide:ja,multi:!0,useFactory:()=>{let r=S(OH);return()=>{r.initialize()}}},e===!0?{provide:IR,useValue:!0}:[],{provide:TR,useValue:t??ER}]}function Mx(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=Nx({ngZoneFactory:()=>{let i=Px(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Ci("NgZone_CoalesceEvent"),new me(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return ut([{provide:kH,useValue:!0},{provide:Zf,useValue:!1},r])}function Px(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var OH=(()=>{class n{subscription=new Tt;initialized=!1;zone=S(me);pendingTasks=S(Co);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{me.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{me.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var FH=(()=>{class n{appRef=S(wo);taskService=S(Co);ngZone=S(me);zonelessEnabled=S(Zf);tracing=S(ep,{optional:!0});disableScheduling=S(IR,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Tt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Sf):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(S(TR,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ky||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 13:{this.appRef.dirtyFlags|=16,r=!0;break}case 14:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{r=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?QS:CR;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Sf+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,QS(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function LH(){return typeof $localize<"u"&&$localize.locale||Vf}var lp=new q("",{providedIn:"root",factory:()=>S(lp,De.Optional|De.SkipSelf)||LH()});var w_=new q(""),VH=new q("");function Xl(n){return!n.moduleRef}function UH(n){let e=Xl(n)?n.r3Injector:n.moduleRef.injector,t=e.get(me);return t.run(()=>{Xl(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(yi,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Xl(n)){let o=()=>e.destroy(),s=n.platformInjector.get(w_);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(w_);s.add(o),n.moduleRef.onDestroy(()=>{hf(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return W$(r,t,()=>{let o=e.get(wx);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(lp,Vf);if(_H(s||Vf),!e.get(VH,!0))return Xl(n)?e.get(wo):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Xl(n)){let c=e.get(wo);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return jH(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function jH(n,e){let t=n.injector.get(wo);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Z(-403,!1);e.push(n)}var ff=null;function BH(n=[],e){return Se.create({name:e,providers:[{provide:$f,useValue:"platform"},{provide:w_,useValue:new Set([()=>ff=null])},...n]})}function $H(n=[]){if(ff)return ff;let e=BH(n);return ff=e,B$(),HH(e),e}function HH(n){let e=n.get(q_,null);Sn(n,()=>{e?.forEach(t=>t())})}function gw(){return!1}var Ro=(()=>{class n{static __NG_ELEMENT_ID__=WH}return n})();function WH(n){return qH(hn(),ke(),(n&16)===16)}function qH(n,e,t){if(Wf(n)&&!t){let r=To(n.index,e);return new vs(r,r)}else if(n.type&175){let r=e[Sr];return new vs(r,e)}return null}var E_=class{constructor(){}supports(e){return gx(e)}create(e){return new I_(e)}},zH=(n,e)=>e,I_=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||zH}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<_A(r,i,o)?t:r,a=_A(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,d=c-i;if(u!=d){for(let m=0;m<u;m++){let v=m<o.length?o[m]:o[m]=0,w=v+m;d<=w&&w<u&&(o[m]=v+1)}let f=s.previousIndex;o[f]=d-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!gx(e))throw new Z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,k$(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new T_(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Uf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Uf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},T_=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},C_=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Uf=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new C_,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function _A(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function wA(){return new vw([new E_])}var vw=(()=>{class n{factories;static \u0275prov=j({token:n,providedIn:"root",factory:wA});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||wA()),deps:[[n,new sU,new Ie]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Z(901,!1)}}return n})();function kx(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=$H(r),o=[Nx({}),{provide:gs,useExisting:FH},...t||[]],s=new Pf({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return UH({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function Eu(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Re(n,e){Ci("NgSignals");let t=sS(n);return e?.equal&&(t[kn].equal=e.equal),t}function dr(n){let e=Ae(null);try{return n()}finally{Ae(e)}}var Ox=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=GH}return n})();function GH(){return new Ox(ke(),hn())}var KH=!1,YH=(()=>{class n extends kf{pendingTasks=S(Co);taskId=null;schedule(t){super.schedule(t),this.taskId===null&&(this.taskId=this.pendingTasks.add(),queueMicrotask(()=>this.flush()))}flush(){try{super.flush()}finally{this.taskId!==null&&(this.pendingTasks.remove(this.taskId),this.taskId=null)}}static \u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}return n})(),b_=class{scheduler;effectFn;zone;injector;unregisterOnDestroy;watcher;constructor(e,t,r,i,o,s){this.scheduler=e,this.effectFn=t,this.zone=r,this.injector=o,this.watcher=hS(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(t){this.injector.get(yi,null,{optional:!0})?.handleError(t)}}run(){this.watcher.run()}schedule(){this.scheduler.schedule(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function QH(){}function Fx(n,e){Ci("NgSignals"),!e?.injector&&Ya(QH);let t=e?.injector??S(Se),r=e?.manualCleanup!==!0?t.get(Ti):null,i=new b_(t.get(YH),n,typeof Zone>"u"?null:Zone.current,r,t,e?.allowSignalWrites??!1),o=t.get(Ro,null,{optional:!0});return!o||!(o._lView[de]&8)?i.watcher.notify():(o._lView[lf]??=[]).push(i.watcher.notify),i}var ZH=KH;var D_=class{[kn];constructor(e){this[kn]=e}destroy(){this[kn].destroy()}};function Pr(n,e){if(ZH)return Fx(n,e);Ci("NgSignals"),!e?.injector&&Ya(Pr);let t=e?.injector??S(Se),r=e?.manualCleanup!==!0?t.get(Ti):null,i,o=t.get(Ox,null,{optional:!0}),s=t.get(gs);return o!==null&&!e?.forceRoot?(i=eW(o.view,s,n),r instanceof Df&&r._lView===o.view&&(r=null)):i=tW(n,t.get(Ex),s),i.injector=t,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new D_(i)}var Lx=fe(U({},ts),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:cu,run(){if(this.dirty=!1,this.hasRun&&!zl(this))return;this.hasRun=!0;let n=r=>(this.cleanupFns??=[]).push(r),e=va(this),t=Ef(!1);try{this.maybeCleanup(),this.fn(n)}finally{Ef(t),ql(this,e)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),JH=fe(U({},Lx),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(13)},destroy(){ya(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),XH=fe(U({},Lx),{consumerMarkedDirty(){this.view[de]|=8192,yu(this.view),this.notifier.notify(14)},destroy(){ya(this),this.onDestroyFn(),this.maybeCleanup(),this.view[ds]?.delete(this)}});function eW(n,e,t){let r=Object.create(XH);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=t,n[ds]??=new Set,n[ds].add(r),r.consumerMarkedDirty(r),r}function tW(n,e,t){let r=Object.create(JH);return r.fn=n,r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.schedule(r),r.notifier.notify(13),r}var Hx=null;function Ai(){return Hx}function Wx(n){Hx??=n}var yp=class{};var Bn=new q(""),qx=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>S(iW),providedIn:"platform"})}return n})();var iW=(()=>{class n extends qx{_location;_history;_doc=S(Bn);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ai().getBaseHref(this._doc)}onPopState(t){let r=Ai().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Ai().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function zx(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function Vx(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Ts(n){return n&&n[0]!=="?"?"?"+n:n}var Ep=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>S(Gx),providedIn:"root"})}return n})(),oW=new q(""),Gx=(()=>{class n extends Ep{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??S(Bn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return zx(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Ts(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Ts(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Ts(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(he(qx),he(oW,8))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Iu=(()=>{class n{_subject=new st;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=cW(Vx(Ux(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ts(r))}normalize(t){return n.stripTrailingSlash(aW(this._basePath,Ux(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ts(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ts(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Ts;static joinWithSlash=zx;static stripTrailingSlash=Vx;static \u0275fac=function(r){return new(r||n)(he(Ep))};static \u0275prov=j({token:n,factory:()=>sW(),providedIn:"root"})}return n})();function sW(){return new Iu(he(Ep))}function aW(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Ux(n){return n.replace(/\/index.html$/,"")}function cW(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var An=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(An||{}),Xe=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Xe||{}),Qn=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Qn||{}),xo={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function lW(n){return ur(n)[Rt.LocaleId]}function uW(n,e,t){let r=ur(n),i=[r[Rt.DayPeriodsFormat],r[Rt.DayPeriodsStandalone]],o=hr(i,e);return hr(o,t)}function dW(n,e,t){let r=ur(n),i=[r[Rt.DaysFormat],r[Rt.DaysStandalone]],o=hr(i,e);return hr(o,t)}function hW(n,e,t){let r=ur(n),i=[r[Rt.MonthsFormat],r[Rt.MonthsStandalone]],o=hr(i,e);return hr(o,t)}function fW(n,e){let r=ur(n)[Rt.Eras];return hr(r,e)}function up(n,e){let t=ur(n);return hr(t[Rt.DateFormat],e)}function dp(n,e){let t=ur(n);return hr(t[Rt.TimeFormat],e)}function hp(n,e){let r=ur(n)[Rt.DateTimeFormat];return hr(r,e)}function Ip(n,e){let t=ur(n),r=t[Rt.NumberSymbols][e];if(typeof r>"u"){if(e===xo.CurrencyDecimal)return t[Rt.NumberSymbols][xo.Decimal];if(e===xo.CurrencyGroup)return t[Rt.NumberSymbols][xo.Group]}return r}function Kx(n){if(!n[Rt.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Rt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function pW(n){let e=ur(n);return Kx(e),(e[Rt.ExtraData][2]||[]).map(r=>typeof r=="string"?yw(r):[yw(r[0]),yw(r[1])])}function mW(n,e,t){let r=ur(n);Kx(r);let i=[r[Rt.ExtraData][0],r[Rt.ExtraData][1]],o=hr(i,e)||[];return hr(o,t)||[]}function hr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function yw(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var gW=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,fp={},vW=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function yW(n,e,t,r){let i=SW(n);e=Si(t,e)||e;let s=[],a;for(;e;)if(a=vW.exec(e),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;e=d}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=Qx(r,c),i=DW(i,r,!0));let u="";return s.forEach(d=>{let f=CW(d);u+=f?f(i,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function _p(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Si(n,e){let t=lW(n);if(fp[t]??={},fp[t][e])return fp[t][e];let r="";switch(e){case"shortDate":r=up(n,Qn.Short);break;case"mediumDate":r=up(n,Qn.Medium);break;case"longDate":r=up(n,Qn.Long);break;case"fullDate":r=up(n,Qn.Full);break;case"shortTime":r=dp(n,Qn.Short);break;case"mediumTime":r=dp(n,Qn.Medium);break;case"longTime":r=dp(n,Qn.Long);break;case"fullTime":r=dp(n,Qn.Full);break;case"short":let i=Si(n,"shortTime"),o=Si(n,"shortDate");r=pp(hp(n,Qn.Short),[i,o]);break;case"medium":let s=Si(n,"mediumTime"),a=Si(n,"mediumDate");r=pp(hp(n,Qn.Medium),[s,a]);break;case"long":let c=Si(n,"longTime"),u=Si(n,"longDate");r=pp(hp(n,Qn.Long),[c,u]);break;case"full":let d=Si(n,"fullTime"),f=Si(n,"fullDate");r=pp(hp(n,Qn.Full),[d,f]);break}return r&&(fp[t][e]=r),r}function pp(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function kr(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function _W(n,e){return kr(n,3).substring(0,e)}function Ot(n,e,t=0,r=!1,i=!1){return function(o,s){let a=wW(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return _W(a,e);let c=Ip(s,xo.MinusSign);return kr(a,e,c,r,i)}}function wW(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function rt(n,e,t=An.Format,r=!1){return function(i,o){return EW(i,o,n,e,t,r)}}function EW(n,e,t,r,i,o){switch(t){case 2:return hW(e,i,r)[n.getMonth()];case 1:return dW(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let u=pW(e),d=mW(e,i,r),f=u.findIndex(m=>{if(Array.isArray(m)){let[v,w]=m,P=s>=v.hours&&a>=v.minutes,N=s<w.hours||s===w.hours&&a<w.minutes;if(v.hours<w.hours){if(P&&N)return!0}else if(P||N)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return uW(e,i,r)[s<12?0:1];case 3:return fW(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new Error(`unexpected translation type ${c}`)}}function mp(n){return function(e,t,r){let i=-1*r,o=Ip(t,xo.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+kr(s,2,o)+kr(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+kr(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+kr(s,2,o)+":"+kr(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+kr(s,2,o)+":"+kr(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var IW=0,vp=4;function TW(n){let e=_p(n,IW,1).getDay();return _p(n,0,1+(e<=vp?vp:vp+7)-e)}function Yx(n){let e=n.getDay(),t=e===0?-3:vp-e;return _p(n.getFullYear(),n.getMonth(),n.getDate()+t)}function _w(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=Yx(t),s=TW(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return kr(i,n,Ip(r,xo.MinusSign))}}function gp(n,e=!1){return function(t,r){let o=Yx(t).getFullYear();return kr(o,n,Ip(r,xo.MinusSign),e)}}var ww={};function CW(n){if(ww[n])return ww[n];let e;switch(n){case"G":case"GG":case"GGG":e=rt(3,Xe.Abbreviated);break;case"GGGG":e=rt(3,Xe.Wide);break;case"GGGGG":e=rt(3,Xe.Narrow);break;case"y":e=Ot(0,1,0,!1,!0);break;case"yy":e=Ot(0,2,0,!0,!0);break;case"yyy":e=Ot(0,3,0,!1,!0);break;case"yyyy":e=Ot(0,4,0,!1,!0);break;case"Y":e=gp(1);break;case"YY":e=gp(2,!0);break;case"YYY":e=gp(3);break;case"YYYY":e=gp(4);break;case"M":case"L":e=Ot(1,1,1);break;case"MM":case"LL":e=Ot(1,2,1);break;case"MMM":e=rt(2,Xe.Abbreviated);break;case"MMMM":e=rt(2,Xe.Wide);break;case"MMMMM":e=rt(2,Xe.Narrow);break;case"LLL":e=rt(2,Xe.Abbreviated,An.Standalone);break;case"LLLL":e=rt(2,Xe.Wide,An.Standalone);break;case"LLLLL":e=rt(2,Xe.Narrow,An.Standalone);break;case"w":e=_w(1);break;case"ww":e=_w(2);break;case"W":e=_w(1,!0);break;case"d":e=Ot(2,1);break;case"dd":e=Ot(2,2);break;case"c":case"cc":e=Ot(7,1);break;case"ccc":e=rt(1,Xe.Abbreviated,An.Standalone);break;case"cccc":e=rt(1,Xe.Wide,An.Standalone);break;case"ccccc":e=rt(1,Xe.Narrow,An.Standalone);break;case"cccccc":e=rt(1,Xe.Short,An.Standalone);break;case"E":case"EE":case"EEE":e=rt(1,Xe.Abbreviated);break;case"EEEE":e=rt(1,Xe.Wide);break;case"EEEEE":e=rt(1,Xe.Narrow);break;case"EEEEEE":e=rt(1,Xe.Short);break;case"a":case"aa":case"aaa":e=rt(0,Xe.Abbreviated);break;case"aaaa":e=rt(0,Xe.Wide);break;case"aaaaa":e=rt(0,Xe.Narrow);break;case"b":case"bb":case"bbb":e=rt(0,Xe.Abbreviated,An.Standalone,!0);break;case"bbbb":e=rt(0,Xe.Wide,An.Standalone,!0);break;case"bbbbb":e=rt(0,Xe.Narrow,An.Standalone,!0);break;case"B":case"BB":case"BBB":e=rt(0,Xe.Abbreviated,An.Format,!0);break;case"BBBB":e=rt(0,Xe.Wide,An.Format,!0);break;case"BBBBB":e=rt(0,Xe.Narrow,An.Format,!0);break;case"h":e=Ot(3,1,-12);break;case"hh":e=Ot(3,2,-12);break;case"H":e=Ot(3,1);break;case"HH":e=Ot(3,2);break;case"m":e=Ot(4,1);break;case"mm":e=Ot(4,2);break;case"s":e=Ot(5,1);break;case"ss":e=Ot(5,2);break;case"S":e=Ot(6,1);break;case"SS":e=Ot(6,2);break;case"SSS":e=Ot(6,3);break;case"Z":case"ZZ":case"ZZZ":e=mp(0);break;case"ZZZZZ":e=mp(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=mp(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=mp(2);break;default:return null}return ww[n]=e,e}function Qx(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function bW(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function DW(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),o=Qx(e,i);return bW(n,r*(o-i))}function SW(n){if(jx(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return _p(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(gW))return AW(r)}let e=new Date(n);if(!jx(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function AW(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,u),e}function jx(n){return n instanceof Date&&!isNaN(n.valueOf())}function Zx(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Ew=/\s+/,Bx=[],Ke=(()=>{class n{_ngEl;_renderer;initialClasses=Bx;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(Ew):Bx}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Ew):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Ew).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(Me(lr),Me(bi))};static \u0275dir=at({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Iw=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},$n=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Iw(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),$x(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);$x(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Me(Es),Me(aw),Me(vw))};static \u0275dir=at({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function $x(n,e){n.context.$implicit=e.item}function RW(n,e){return new Z(2100,!1)}var xW="mediumDate",NW=new q(""),MW=new q(""),Xa=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??xW,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return yW(t,s,o||this.locale,a)}catch(s){throw RW(n,s.message)}}static \u0275fac=function(r){return new(r||n)(Me(lp,16),Me(NW,24),Me(MW,24))};static \u0275pipe=fx({name:"date",type:n,pure:!0})}return n})();var Tw="browser",PW="server";function ec(n){return n===Tw}function Ri(n){return n===PW}var wp=class{};var bw=class extends yp{supportsDOMEvents=!0},Dw=class n extends bw{static makeCurrent(){Wx(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=kW();return t==null?null:OW(t)}resetBaseElement(){Tu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Zx(document.cookie,e)}},Tu=null;function kW(){return Tu=Tu||document.querySelector("base"),Tu?Tu.getAttribute("href"):null}function OW(n){return new URL(n,document.baseURI).pathname}var FW=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),Sw=new q(""),rN=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Z(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(he(Sw),he(me))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),Cp=class{_doc;constructor(e){this._doc=e}manager},Tp="ng-app-id";function Jx(n){for(let e of n)e.remove()}function Xx(n,e){let t=e.createElement("style");return t.textContent=n,t}function LW(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Tp}="${e}"],link[${Tp}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Tp),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Aw(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var iN=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Ri(o),LW(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,Xx);r?.forEach(i=>this.addUsage(i,this.external,Aw))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(Jx(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Jx(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,Xx(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Aw(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Tp,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(he(Bn),he(W_),he(z_,8),he(Pt))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),Cw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},xw=/%COMP%/g,oN="%COMP%",VW=`_nghost-${oN}`,UW=`_ngcontent-${oN}`,jW=!0,BW=new q("",{providedIn:"root",factory:()=>jW});function $W(n){return UW.replace(xw,n)}function HW(n){return VW.replace(xw,n)}function sN(n,e){return e.map(t=>t.replace(xw,n))}var eN=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c,u=null,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.tracingService=d,this.platformIsServer=Ri(a),this.defaultRenderer=new Cu(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Zr.ShadowDom&&(r=fe(U({},r),{encapsulation:Zr.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof bp?i.applyToHost(t):i instanceof bu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case Zr.Emulated:o=new bp(c,u,r,this.appId,d,s,a,f,this.tracingService);break;case Zr.ShadowDom:return new Rw(c,u,t,r,s,a,this.nonce,f,this.tracingService);default:o=new bu(c,u,r,d,s,a,f,this.tracingService);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(he(rN),he(iN),he(W_),he(BW),he(Bn),he(Pt),he(me),he(z_),he(ep,8))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),Cu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Cw[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(tN(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(tN(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Z(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Cw[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Cw[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(_i.DashCase|_i.Important)?e.style.setProperty(t,r,i&_i.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_i.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Ai().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);let o=this.decoratePreventDefault(r);return this.tracingService!==null&&this.tracingService.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function tN(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Rw=class extends Cu{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=sN(i.id,i.styles);for(let m of d){let v=document.createElement("style");a&&v.setAttribute("nonce",a),v.textContent=m,this.shadowRoot.appendChild(v)}let f=i.getExternalStyles?.();if(f)for(let m of f){let v=Aw(m,o);a&&v.setAttribute("nonce",a),this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},bu=class extends Cu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?sN(u,r.styles):r.styles,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},bp=class extends bu{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,u){let d=i+"-"+r.id;super(e,t,r,o,s,a,c,u,d),this.contentAttr=$W(d),this.hostAttr=HW(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},WW=(()=>{class n extends Cp{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(he(Bn))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),nN=["alt","control","meta","shift"],qW={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zW={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},GW=(()=>{class n extends Cp{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ai().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),nN.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=qW[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),nN.forEach(s=>{if(s!==i){let a=zW[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(he(Bn))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})();function aN(n,e){return kx(U({rootComponent:n},KW(e)))}function KW(n){return{appProviders:[...XW,...n?.providers??[]],platformProviders:JW}}function YW(){Dw.makeCurrent()}function QW(){return new yi}function ZW(){return kR(document),document}var JW=[{provide:Pt,useValue:Tw},{provide:q_,useValue:YW,multi:!0},{provide:Bn,useFactory:ZW,deps:[]}];var XW=[{provide:$f,useValue:"root"},{provide:yi,useFactory:QW,deps:[]},{provide:Sw,useClass:WW,multi:!0,deps:[Bn,me,Pt]},{provide:Sw,useClass:GW,multi:!0,deps:[Bn]},eN,iN,rN,{provide:Ga,useExisting:eN},{provide:wp,useClass:FW,deps:[]},[]];var Dp=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(he(Bn))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Te="primary",$u=Symbol("RouteTitle"),Ow=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function sc(n){return new Ow(n)}function eq(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function tq(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ti(n[t],e[t]))return!1;return!0}function ti(n,e){let t=n?Fw(n):void 0,r=e?Fw(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!gN(n[i],e[i]))return!1;return!0}function Fw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function gN(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function vN(n){return n.length>0?n[n.length-1]:null}function No(n){return hy(n)?n:Is(n)?lt(Promise.resolve(n)):se(n)}var nq={exact:_N,subset:wN},yN={exact:rq,subset:iq,ignored:()=>!0};function lN(n,e,t){return nq[t.paths](n.root,e.root,t.matrixParams)&&yN[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function rq(n,e){return ti(n,e)}function _N(n,e,t){if(!bs(n.segments,e.segments)||!Rp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!_N(n.children[r],e.children[r],t))return!1;return!0}function iq(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>gN(n[t],e[t]))}function wN(n,e,t){return EN(n,e,e.segments,t)}function EN(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!bs(i,t)||e.hasChildren()||!Rp(i,t,r))}else if(n.segments.length===t.length){if(!bs(n.segments,t)||!Rp(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!wN(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!bs(n.segments,i)||!Rp(n.segments,i,r)||!n.children[Te]?!1:EN(n.children[Te],e,o,r)}}function Rp(n,e,t){return e.every((r,i)=>yN[t](n[i].parameters,r.parameters))}var Ni=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ze([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=sc(this.queryParams),this._queryParamMap}toString(){return aq.serialize(this)}},ze=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xp(this)}},Cs=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=sc(this.parameters),this._parameterMap}toString(){return TN(this)}};function oq(n,e){return bs(n,e)&&n.every((t,r)=>ti(t.parameters,e[r].parameters))}function bs(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function sq(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Te&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Te&&(t=t.concat(e(i,r)))}),t}var aE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>new Nu,providedIn:"root"})}return n})(),Nu=class{parse(e){let t=new Vw(e);return new Ni(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Du(e.root,!0)}`,r=uq(e.queryParams),i=typeof e.fragment=="string"?`#${cq(e.fragment)}`:"";return`${t}${r}${i}`}},aq=new Nu;function xp(n){return n.segments.map(e=>TN(e)).join("/")}function Du(n,e){if(!n.hasChildren())return xp(n);if(e){let t=n.children[Te]?Du(n.children[Te],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Te&&r.push(`${i}:${Du(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=sq(n,(r,i)=>i===Te?[Du(n.children[Te],!1)]:[`${i}:${Du(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Te]!=null?`${xp(n)}/${t[0]}`:`${xp(n)}/(${t.join("//")})`}}function IN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sp(n){return IN(n).replace(/%3B/gi,";")}function cq(n){return encodeURI(n)}function Lw(n){return IN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Np(n){return decodeURIComponent(n)}function uN(n){return Np(n.replace(/\+/g,"%20"))}function TN(n){return`${Lw(n.path)}${lq(n.parameters)}`}function lq(n){return Object.entries(n).map(([e,t])=>`;${Lw(e)}=${Lw(t)}`).join("")}function uq(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Sp(t)}=${Sp(i)}`).join("&"):`${Sp(t)}=${Sp(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var dq=/^[^\/()?;#]+/;function Nw(n){let e=n.match(dq);return e?e[0]:""}var hq=/^[^\/()?;=#]+/;function fq(n){let e=n.match(hq);return e?e[0]:""}var pq=/^[^=?&#]+/;function mq(n){let e=n.match(pq);return e?e[0]:""}var gq=/^[^&#]+/;function vq(n){let e=n.match(gq);return e?e[0]:""}var Vw=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ze([],{}):new ze([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Te]=new ze(e,t)),r}parseSegment(){let e=Nw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Z(4009,!1);return this.capture(e),new Cs(Np(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=fq(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Nw(this.remaining);i&&(r=i,this.capture(r))}e[Np(t)]=Np(r)}parseQueryParam(e){let t=mq(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=vq(this.remaining);s&&(r=s,this.capture(r))}let i=uN(t),o=uN(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Nw(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Z(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Te);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[Te]:new ze([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Z(4011,!1)}};function CN(n){return n.segments.length>0?new ze([],{[Te]:n}):n}function bN(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=bN(i);if(r===Te&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new ze(n.segments,e);return yq(t)}function yq(n){if(n.numberOfChildren===1&&n.children[Te]){let e=n.children[Te];return new ze(n.segments.concat(e.segments),e.children)}return n}function Mu(n){return n instanceof Ni}function _q(n,e,t=null,r=null){let i=DN(n);return SN(i,e,t,r)}function DN(n){let e;function t(o){let s={};for(let c of o.children){let u=t(c);s[c.outlet]=u}let a=new ze(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=CN(r);return e??i}function SN(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Mw(i,i,i,t,r);let o=wq(e);if(o.toRoot())return Mw(i,i,new ze([],{}),t,r);let s=Eq(o,i,n),a=s.processChildren?Au(s.segmentGroup,s.index,o.commands):RN(s.segmentGroup,s.index,o.commands);return Mw(i,s.segmentGroup,a,t,r)}function Mp(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Pu(n){return typeof n=="object"&&n!=null&&n.outlets}function Mw(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let s;n===e?s=t:s=AN(n,e,t);let a=CN(bN(s));return new Ni(a,o,i)}function AN(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=AN(o,e,t)}),new ze(n.segments,r)}var Pp=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Mp(r[0]))throw new Z(4003,!1);let i=r.find(Pu);if(i&&i!==vN(r))throw new Z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function wq(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Pp(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Pp(t,e,r)}var rc=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Eq(n,e,t){if(n.isAbsolute)return new rc(e,!0,0);if(!t)return new rc(e,!1,NaN);if(t.parent===null)return new rc(t,!0,0);let r=Mp(n.commands[0])?0:1,i=t.segments.length-1+r;return Iq(t,i,n.numberOfDoubleDots)}function Iq(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Z(4005,!1);i=r.segments.length}return new rc(r,!1,i-o)}function Tq(n){return Pu(n[0])?n[0].outlets:{[Te]:n}}function RN(n,e,t){if(n??=new ze([],{}),n.segments.length===0&&n.hasChildren())return Au(n,e,t);let r=Cq(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new ze(n.segments.slice(0,r.pathIndex),{});return o.children[Te]=new ze(n.segments.slice(r.pathIndex),n.children),Au(o,0,i)}else return r.match&&i.length===0?new ze(n.segments,{}):r.match&&!n.hasChildren()?Uw(n,e,t):r.match?Au(n,0,i):Uw(n,e,t)}function Au(n,e,t){if(t.length===0)return new ze(n.segments,{});{let r=Tq(t),i={};if(Object.keys(r).some(o=>o!==Te)&&n.children[Te]&&n.numberOfChildren===1&&n.children[Te].segments.length===0){let o=Au(n.children[Te],e,t);return new ze(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=RN(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ze(n.segments,i)}}function Cq(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Pu(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!hN(c,u,s))return o;r+=2}else{if(!hN(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Uw(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Pu(o)){let c=bq(o.outlets);return new ze(r,c)}if(i===0&&Mp(t[0])){let c=n.segments[e];r.push(new Cs(c.path,dN(t[0]))),i++;continue}let s=Pu(o)?o.outlets[Te]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Mp(a)?(r.push(new Cs(s,dN(a))),i+=2):(r.push(new Cs(s,{})),i++)}return new ze(r,{})}function bq(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Uw(new ze([],{}),0,r))}),e}function dN(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function hN(n,e,t){return n==t.path&&ti(e,t.parameters)}var Ru="imperative",on=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(on||{}),fr=class{id;url;constructor(e,t){this.id=e,this.url=t}},ku=class extends fr{type=on.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ds=class extends fr{urlAfterRedirects;type=on.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Jn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Jn||{}),jw=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(jw||{}),xi=class extends fr{reason;code;type=on.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ss=class extends fr{reason;code;type=on.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Ou=class extends fr{error;target;type=on.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},kp=class extends fr{urlAfterRedirects;state;type=on.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bw=class extends fr{urlAfterRedirects;state;type=on.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$w=class extends fr{urlAfterRedirects;state;shouldActivate;type=on.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Hw=class extends fr{urlAfterRedirects;state;type=on.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ww=class extends fr{urlAfterRedirects;state;type=on.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qw=class{route;type=on.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},zw=class{route;type=on.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Gw=class{snapshot;type=on.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Kw=class{snapshot;type=on.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yw=class{snapshot;type=on.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fu=class{snapshot;type=on.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Lu=class{},ac=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Dq(n,e){return n.providers&&!n._injector&&(n._injector=cw(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Or(n){return n.outlet||Te}function Sq(n,e){let t=n.filter(r=>Or(r)===e);return t.push(...n.filter(r=>Or(r)!==e)),t}function Hu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Qw=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Hu(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Bp(this.rootInjector)}},Bp=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Qw(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(he(Un))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Op=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Zw(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Zw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Jw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Jw(e,this._root).map(t=>t.value)}};function Zw(n,e){if(n===e.value)return e;for(let t of e.children){let r=Zw(n,t);if(r)return r}return null}function Jw(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Jw(n,t);if(r.length)return r.unshift(e),r}return[]}var Zn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function nc(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Fp=class extends Op{snapshot;constructor(e,t){super(e),this.snapshot=t,cE(this,e)}toString(){return this.snapshot.toString()}};function xN(n){let e=Aq(n),t=new tn([new Cs("",{})]),r=new tn({}),i=new tn({}),o=new tn({}),s=new tn(""),a=new cc(t,r,o,s,i,Te,n,e.root);return a.snapshot=e.root,new Fp(new Zn(a,[]),e)}function Aq(n){let e={},t={},r={},i="",o=new ic([],e,r,i,t,Te,n,null,{});return new Vp("",new Zn(o,[]))}var cc=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ee(u=>u[$u]))??se(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ee(e=>sc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ee(e=>sc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Lp(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:U(U({},e.params),n.params),data:U(U({},e.data),n.data),resolve:U(U(U(U({},n.data),e.data),i?.data),n._resolvedData)}:r={params:U({},n.params),data:U({},n.data),resolve:U(U({},n.data),n._resolvedData??{})},i&&MN(i)&&(r.resolve[$u]=i.title),r}var ic=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[$u]}constructor(e,t,r,i,o,s,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=sc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=sc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Vp=class extends Op{url;constructor(e,t){super(t),this.url=e,cE(this,t)}toString(){return NN(this._root)}};function cE(n,e){e.value._routerState=n,e.children.forEach(t=>cE(n,t))}function NN(n){let e=n.children.length>0?` { ${n.children.map(NN).join(", ")} } `:"";return`${n.value}${e}`}function Pw(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ti(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ti(e.params,t.params)||n.paramsSubject.next(t.params),tq(e.url,t.url)||n.urlSubject.next(t.url),ti(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Xw(n,e){let t=ti(n.params,e.params)&&oq(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Xw(n.parent,e.parent))}function MN(n){return typeof n.title=="string"||n.title===null}var Rq=new q(""),lE=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Te;activateEvents=new Kt;deactivateEvents=new Kt;attachEvents=new Kt;detachEvents=new Kt;routerOutletData=DR(void 0);parentContexts=S(Bp);location=S(Es);changeDetector=S(Ro);inputBinder=S(uE,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Z(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Z(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new eE(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=at({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Io]})}return n})(),eE=class n{route;childContexts;parent;outletData;__ngOutletInjector(e){return new n(this.route,this.childContexts,e,this.outletData)}constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===cc?this.route:e===Bp?this.childContexts:e===Rq?this.outletData:this.parent.get(e,t)}},uE=new q("");function xq(n,e,t){let r=Vu(n,e._root,t?t._root:void 0);return new Fp(r,e)}function Vu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Nq(n,e,t);return new Zn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Vu(n,a)),s}}let r=Mq(e.value),i=e.children.map(o=>Vu(n,o));return new Zn(r,i)}}function Nq(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Vu(n,r,i);return Vu(n,r)})}function Mq(n){return new cc(new tn(n.url),new tn(n.params),new tn(n.queryParams),new tn(n.fragment),new tn(n.data),n.outlet,n.component,n)}var Uu=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},PN="ngNavigationCancelingError";function Up(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Mu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=kN(!1,Jn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function kN(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[PN]=!0,t.cancellationCode=e,t}function Pq(n){return ON(n)&&Mu(n.url)}function ON(n){return!!n&&n[PN]}var kq=(n,e,t,r)=>ee(i=>(new tE(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),tE=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Pw(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=nc(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=nc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=nc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=nc(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Fu(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Kw(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Pw(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Pw(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},jp=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},oc=class{component;route;constructor(e,t){this.component=e,this.route=t}};function Oq(n,e,t){let r=n._root,i=e?e._root:null;return Su(r,i,t,[r.value])}function Fq(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function uc(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!bA(n)?n:e.get(n):r}function Su(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=nc(e);return n.children.forEach(s=>{Lq(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>xu(a,t.getContext(s),i)),i}function Lq(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=Vq(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new jp(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Su(n,e,a?a.children:null,r,i):Su(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new oc(a.outlet.component,s))}else s&&xu(e,a,i),i.canActivateChecks.push(new jp(r)),o.component?Su(n,null,a?a.children:null,r,i):Su(n,null,t,r,i);return i}function Vq(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!bs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!bs(n.url,e.url)||!ti(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xw(n,e)||!ti(n.queryParams,e.queryParams);case"paramsChange":default:return!Xw(n,e)}}function xu(n,e,t){let r=nc(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?xu(s,e.children.getContext(o),t):xu(s,null,t):xu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new oc(e.outlet.component,i)):t.canDeactivateChecks.push(new oc(null,i)):t.canDeactivateChecks.push(new oc(null,i))}function Wu(n){return typeof n=="function"}function Uq(n){return typeof n=="boolean"}function jq(n){return n&&Wu(n.canLoad)}function Bq(n){return n&&Wu(n.canActivate)}function $q(n){return n&&Wu(n.canActivateChild)}function Hq(n){return n&&Wu(n.canDeactivate)}function Wq(n){return n&&Wu(n.canMatch)}function FN(n){return n instanceof gi||n?.name==="EmptyError"}var Ap=Symbol("INITIAL_VALUE");function lc(){return Fn(n=>We(n.map(e=>e.pipe(Kr(1),Pa(Ap)))).pipe(ee(e=>{for(let t of e)if(t!==!0){if(t===Ap)return Ap;if(t===!1||qq(t))return t}return!0}),In(e=>e!==Ap),Kr(1)))}function qq(n){return Mu(n)||n instanceof Uu}function zq(n,e){return St(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?se(fe(U({},t),{guardsResult:!0})):Gq(s,r,i,n).pipe(St(a=>a&&Uq(a)?Kq(r,o,n,e):se(a)),ee(a=>fe(U({},t),{guardsResult:a})))})}function Gq(n,e,t,r){return lt(n).pipe(St(i=>Xq(i.component,i.route,t,e,r)),vi(i=>i!==!0,!0))}function Kq(n,e,t,r){return lt(e).pipe(ss(i=>Na(Qq(i.route.parent,r),Yq(i.route,r),Jq(n,i.path,t),Zq(n,i.route,t))),vi(i=>i!==!0,!0))}function Yq(n,e){return n!==null&&e&&e(new Yw(n)),se(!0)}function Qq(n,e){return n!==null&&e&&e(new Gw(n)),se(!0)}function Zq(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return se(!0);let i=r.map(o=>Xh(()=>{let s=Hu(e)??t,a=uc(o,s),c=Bq(a)?a.canActivate(e,n):Sn(s,()=>a(e,n));return No(c).pipe(vi())}));return se(i).pipe(lc())}function Jq(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Fq(s)).filter(s=>s!==null).map(s=>Xh(()=>{let a=s.guards.map(c=>{let u=Hu(s.node)??t,d=uc(c,u),f=$q(d)?d.canActivateChild(r,n):Sn(u,()=>d(r,n));return No(f).pipe(vi())});return se(a).pipe(lc())}));return se(o).pipe(lc())}function Xq(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return se(!0);let s=o.map(a=>{let c=Hu(e)??i,u=uc(a,c),d=Hq(u)?u.canDeactivate(n,e,t,r):Sn(c,()=>u(n,e,t,r));return No(d).pipe(vi())});return se(s).pipe(lc())}function ez(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return se(!0);let o=i.map(s=>{let a=uc(s,n),c=jq(a)?a.canLoad(e,t):Sn(n,()=>a(e,t));return No(c)});return se(o).pipe(lc(),LN(r))}function LN(n){return Ph(nn(e=>{if(typeof e!="boolean")throw Up(n,e)}),ee(e=>e===!0))}function tz(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return se(!0);let o=i.map(s=>{let a=uc(s,n),c=Wq(a)?a.canMatch(e,t):Sn(n,()=>a(e,t));return No(c)});return se(o).pipe(lc(),LN(r))}var ju=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Bu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function tc(n){return xa(new ju(n))}function nz(n){return xa(new Z(4e3,!1))}function rz(n){return xa(kN(!1,Jn.GuardRejected))}var nE=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return se(r);if(i.numberOfChildren>1||!i.children[Te])return nz(`${e.redirectTo}`);i=i.children[Te]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:u,routeConfig:d,url:f,outlet:m,params:v,data:w,title:P}=i,N=Sn(o,()=>a({params:v,data:w,queryParams:c,fragment:u,routeConfig:d,url:f,outlet:m,title:P}));if(N instanceof Ni)throw new Bu(N);t=N}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Bu(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Ni(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new ze(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Z(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},rE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function iz(n,e,t,r,i){let o=VN(n,e,t);return o.matched?(r=Dq(e,r),tz(r,e,t,i).pipe(ee(s=>s===!0?o:U({},rE)))):se(o)}function VN(n,e,t){if(e.path==="**")return oz(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?U({},rE):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||eq)(t,n,e);if(!i)return U({},rE);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?U(U({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function oz(n){return{matched:!0,parameters:n.length>0?vN(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function fN(n,e,t,r){return t.length>0&&cz(n,t,r)?{segmentGroup:new ze(e,az(r,new ze(t,n.children))),slicedSegments:[]}:t.length===0&&lz(n,t,r)?{segmentGroup:new ze(n.segments,sz(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ze(n.segments,n.children),slicedSegments:t}}function sz(n,e,t,r){let i={};for(let o of t)if($p(n,e,o)&&!r[Or(o)]){let s=new ze([],{});i[Or(o)]=s}return U(U({},r),i)}function az(n,e){let t={};t[Te]=e;for(let r of n)if(r.path===""&&Or(r)!==Te){let i=new ze([],{});t[Or(r)]=i}return t}function cz(n,e,t){return t.some(r=>$p(n,e,r)&&Or(r)!==Te)}function lz(n,e,t){return t.some(r=>$p(n,e,r))}function $p(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function uz(n,e,t){return e.length===0&&!n.children[t]}var iE=class{};function dz(n,e,t,r,i,o,s="emptyOnly"){return new oE(n,e,t,r,i,s,o).recognize()}var hz=31,oE=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new nE(this.urlSerializer,this.urlTree)}noMatchError(e){return new Z(4002,`'${e.segmentGroup}'`)}recognize(){let e=fN(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ee(({children:t,rootSnapshot:r})=>{let i=new Zn(r,t),o=new Vp("",i),s=_q(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new ic([],Object.freeze({}),Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Te,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Te,t).pipe(ee(r=>({children:r,rootSnapshot:t})),ao(r=>{if(r instanceof Bu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ju?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ee(s=>s instanceof Zn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return lt(o).pipe(ss(s=>{let a=r.children[s],c=Sq(t,s);return this.processSegmentGroup(e,c,a,s,i)}),rf((s,a)=>(s.push(...a),s)),co(null),vy(),St(s=>{if(s===null)return tc(r);let a=UN(s);return fz(a),se(a)}))}processSegment(e,t,r,i,o,s,a){return lt(t).pipe(ss(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(ao(u=>{if(u instanceof ju)return se(null);throw u}))),vi(c=>!!c),ao(c=>{if(FN(c))return uz(r,i,o)?se(new iE):tc(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return Or(r)!==s&&(s===Te||!$p(i,o,r))?tc(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):tc(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:f,remainingSegments:m}=VN(t,i,o);if(!c)return tc(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>hz&&(this.allowRedirects=!1));let v=new ic(o,u,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,pN(i),Or(i),i.component??i._loadedComponent??null,i,mN(i)),w=Lp(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(w.params),v.data=Object.freeze(w.data);let P=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,v,e);return this.applyRedirects.lineralizeSegments(i,P).pipe(St(N=>this.processSegment(e,r,t,N.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=iz(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Fn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Fn(({routes:u})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:m,remainingSegments:v}=c,w=new ic(m,f,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,pN(r),Or(r),r.component??r._loadedComponent??null,r,mN(r)),P=Lp(w,s,this.paramsInheritanceStrategy);w.params=Object.freeze(P.params),w.data=Object.freeze(P.data);let{segmentGroup:N,slicedSegments:L}=fN(t,m,v,u);if(L.length===0&&N.hasChildren())return this.processChildren(d,u,N,w).pipe(ee(Y=>new Zn(w,Y)));if(u.length===0&&L.length===0)return se(new Zn(w,[]));let W=Or(r)===o;return this.processSegment(d,u,N,L,W?Te:o,!0,w).pipe(ee(Y=>new Zn(w,Y instanceof Zn?[Y]:[])))}))):tc(t)))}getChildConfig(e,t,r){return t.children?se({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?se({routes:t._loadedRoutes,injector:t._loadedInjector}):ez(e,t,r,this.urlSerializer).pipe(St(i=>i?this.configLoader.loadChildren(e,t).pipe(nn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):rz(t))):se({routes:[],injector:e})}};function fz(n){n.sort((e,t)=>e.value.outlet===Te?-1:t.value.outlet===Te?1:e.value.outlet.localeCompare(t.value.outlet))}function pz(n){let e=n.value.routeConfig;return e&&e.path===""}function UN(n){let e=[],t=new Set;for(let r of n){if(!pz(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=UN(r.children);e.push(new Zn(r.value,i))}return e.filter(r=>!t.has(r))}function pN(n){return n.data||{}}function mN(n){return n.resolve||{}}function mz(n,e,t,r,i,o){return St(s=>dz(n,e,t,r,s.extractedUrl,i,o).pipe(ee(({state:a,tree:c})=>fe(U({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function gz(n,e){return St(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return se(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of jN(c))s.add(u);let a=0;return lt(s).pipe(ss(c=>o.has(c)?vz(c,r,n,e):(c.data=Lp(c,c.parent,n).resolve,se(void 0))),nn(()=>a++),Ma(1),St(c=>a===s.size?se(t):Kn))})}function jN(n){let e=n.children.map(t=>jN(t)).flat();return[n,...e]}function vz(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!MN(i)&&(o[$u]=i.title),yz(o,n,e,r).pipe(ee(s=>(n._resolvedData=s,n.data=Lp(n,n.parent,t).resolve,null)))}function yz(n,e,t,r){let i=Fw(n);if(i.length===0)return se({});let o={};return lt(i).pipe(St(s=>_z(n[s],e,t,r).pipe(vi(),nn(a=>{if(a instanceof Uu)throw Up(new Nu,a);o[s]=a}))),Ma(1),ee(()=>o),ao(s=>FN(s)?Kn:xa(s)))}function _z(n,e,t,r){let i=Hu(e)??r,o=uc(n,i),s=o.resolve?o.resolve(e,t):Sn(i,()=>o(e,t));return No(s)}function kw(n){return Fn(e=>{let t=n(e);return t?lt(t).pipe(ee(()=>e)):se(e)})}var BN=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Te);return r}getResolvedTitleForRoute(t){return t.data[$u]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>S(wz),providedIn:"root"})}return n})(),wz=(()=>{class n extends BN{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(he(Dp))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dE=new q("",{providedIn:"root",factory:()=>({})}),hE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ve({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&_e(0,"router-outlet")},dependencies:[lE],encapsulation:2})}return n})();function fE(n){let e=n.children&&n.children.map(fE),t=e?fe(U({},n),{children:e}):U({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Te&&(t.component=hE),t}var pE=new q(""),Ez=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=S(mw);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return se(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=No(t.loadComponent()).pipe(ee($N),nn(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Jl(()=>{this.componentLoaders.delete(t)})),i=new ba(r,()=>new st).pipe(Ca());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return se({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=Iz(r,this.compiler,t,this.onLoadEndListener).pipe(Jl(()=>{this.childrenLoaders.delete(r)})),s=new ba(o,()=>new st).pipe(Ca());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Iz(n,e,t,r){return No(n.loadChildren()).pipe(ee($N),St(i=>i instanceof fu||Array.isArray(i)?se(i):lt(e.compileModuleAsync(i))),ee(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(pE,[],{optional:!0,self:!0}).flat()),{routes:s.map(fE),injector:o}}))}function Tz(n){return n&&typeof n=="object"&&"default"in n}function $N(n){return Tz(n)?n.default:n}var mE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>S(Cz),providedIn:"root"})}return n})(),Cz=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bz=new q("");var Dz=new q(""),Sz=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new st;transitionAbortSubject=new st;configLoader=S(Ez);environmentInjector=S(Un);urlSerializer=S(aE);rootContexts=S(Bp);location=S(Iu);inputBindingEnabled=S(uE,{optional:!0})!==null;titleStrategy=S(BN);options=S(dE,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=S(mE);createViewTransition=S(bz,{optional:!0});navigationErrorHandler=S(Dz,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>se(void 0);rootComponentType=null;constructor(){let t=i=>this.events.next(new qw(i)),r=i=>this.events.next(new zw(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(fe(U(U({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new tn({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ru,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(In(o=>o.id!==0),ee(o=>fe(U({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Fn(o=>{let s=!1,a=!1;return se(o).pipe(Fn(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Jn.SupersededByNewNavigation),Kn;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?fe(U({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!u&&d!=="reload"){let f="";return this.events.next(new Ss(c.id,this.urlSerializer.serialize(c.rawUrl),f,jw.IgnoredSameUrlNavigation)),c.resolve(!1),Kn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return se(c).pipe(Fn(f=>{let m=this.transitions?.getValue();return this.events.next(new ku(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),m!==this.transitions?.getValue()?Kn:Promise.resolve(f)}),mz(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),nn(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=fe(U({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let m=new kp(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:m,source:v,restoredState:w,extras:P}=c,N=new ku(f,this.urlSerializer.serialize(m),v,w);this.events.next(N);let L=xN(this.rootComponentType).snapshot;return this.currentTransition=o=fe(U({},c),{targetSnapshot:L,urlAfterRedirects:m,extras:fe(U({},P),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,se(o)}else{let f="";return this.events.next(new Ss(c.id,this.urlSerializer.serialize(c.extractedUrl),f,jw.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Kn}}),nn(c=>{let u=new Bw(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),ee(c=>(this.currentTransition=o=fe(U({},c),{guards:Oq(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),zq(this.environmentInjector,c=>this.events.next(c)),nn(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Up(this.urlSerializer,c.guardsResult);let u=new $w(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),In(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Jn.GuardRejected),!1)),kw(c=>{if(c.guards.canActivateChecks.length)return se(c).pipe(nn(u=>{let d=new Hw(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Fn(u=>{let d=!1;return se(u).pipe(gz(this.paramsInheritanceStrategy,this.environmentInjector),nn({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",Jn.NoDataFromResolver)}}))}),nn(u=>{let d=new Ww(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),kw(c=>{let u=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(nn(m=>{d.component=m}),ee(()=>{})));for(let m of d.children)f.push(...u(m));return f};return We(u(c.targetSnapshot.root)).pipe(co(null),Kr(1))}),kw(()=>this.afterPreactivation()),Fn(()=>{let{currentSnapshot:c,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return d?lt(d).pipe(ee(()=>o)):se(o)}),ee(c=>{let u=xq(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=fe(U({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),nn(()=>{this.events.next(new Lu)}),kq(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Kr(1),nn({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ds(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Gt(this.transitionAbortSubject.pipe(nn(c=>{throw c}))),Jl(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Jn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),ao(c=>{if(a=!0,ON(c))this.events.next(new xi(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),Pq(c)?this.events.next(new ac(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let u=new Ou(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let d=Sn(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(d instanceof Uu){let{message:f,cancellationCode:m}=Up(this.urlSerializer,d);this.events.next(new xi(o.id,this.urlSerializer.serialize(o.extractedUrl),f,m)),this.events.next(new ac(d.redirectTo,d.navigationBehaviorOptions))}else throw this.events.next(u),c}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return Kn}))}))}cancelNavigationTransition(t,r,i){let o=new xi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Az(n){return n!==Ru}var Rz=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>S(xz),providedIn:"root"})}return n})(),sE=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},xz=(()=>{class n extends sE{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rr(n)))(i||n)}})();static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),HN=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>S(Nz),providedIn:"root"})}return n})(),Nz=(()=>{class n extends HN{location=S(Iu);urlSerializer=S(aE);options=S(dE,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=S(mE);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ni;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=xN(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof ku)this.stateMemento=this.createStateMemento();else if(t instanceof Ss)this.rawUrlTree=r.initialUrl;else if(t instanceof kp){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Lu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof xi&&(t.code===Jn.GuardRejected||t.code===Jn.NoDataFromResolver)?this.restoreHistory(r):t instanceof Ou?this.restoreHistory(r,!0):t instanceof Ds&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Ni?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=U(U({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=U(U({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rr(n)))(i||n)}})();static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Mz(n,e){n.events.pipe(In(t=>t instanceof Ds||t instanceof xi||t instanceof Ou||t instanceof Ss),ee(t=>t instanceof Ds||t instanceof Ss?0:(t instanceof xi?t.code===Jn.Redirect||t.code===Jn.SupersededByNewNavigation:!1)?2:1),In(t=>t!==2),Kr(1)).subscribe(()=>{e()})}var Pz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Hp=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=S(uw);stateManager=S(HN);options=S(dE,{optional:!0})||{};pendingTasks=S(Co);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=S(Sz);urlSerializer=S(aE);location=S(Iu);urlHandlingStrategy=S(mE);_events=new st;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=S(Rz);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=S(pE,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!S(uE,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Tt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof xi&&r.code!==Jn.Redirect&&r.code!==Jn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ds)this.navigated=!0;else if(r instanceof ac){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=U({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Az(i.source)},s);this.scheduleNavigation(a,Ru,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Fz(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ru,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=U({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(fE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=U(U({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let m=i?i.snapshot:this.routerState.snapshot.root;f=DN(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return SN(f,t,d,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Mu(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ru,null,r)}navigate(t,r={skipLocationChange:!1}){return Oz(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=U({},Pz):r===!1?i=U({},kz):i=r,Mu(t))return lN(this.currentUrlTree,t,i);let o=this.parseUrl(t);return lN(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((f,m)=>{a=f,c=m});let d=this.pendingTasks.add();return Mz(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Oz(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Z(4008,!1)}function Fz(n){return!(n instanceof Lu)&&!(n instanceof ac)}var Lz=new q("");function WN(n,...e){return ut([{provide:pE,multi:!0,useValue:n},[],{provide:cc,useFactory:Vz,deps:[Hp]},{provide:dw,multi:!0,useFactory:Uz},e.map(t=>t.\u0275providers)])}function Vz(n){return n.routerState.root}function Uz(){let n=S(Se);return e=>{let t=n.get(wo);if(e!==t.components[0])return;let r=n.get(Hp),i=n.get(jz);n.get(Bz)===1&&r.initialNavigation(),n.get($z,null,De.Optional)?.setUpPreloading(),n.get(Lz,null,De.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var jz=new q("",{factory:()=>new st}),Bz=new q("",{providedIn:"root",factory:()=>1});var $z=new q("");var qN=[];var Wz="firebase",qz="11.2.0";te(Wz,qz,"app");function et(n){n||(Ya(et),n=S(Ti));let e=new pe(t=>n.onDestroy(t.next.bind(t)));return t=>t.pipe(Gt(e))}function le(n,e){!e?.injector&&Ya(le);let t=e?.injector??S(Se),r=new Ql(1),i=Pr(()=>{let o;try{o=n()}catch(s){dr(()=>r.error(s));return}dr(()=>r.next(o))},{injector:t,manualCleanup:!0});return t.get(Ti).onDestroy(()=>{i.destroy(),r.complete()}),r.asObservable()}function gE(n){n===void 0&&(Ya(gE),n=S(Se));let e=n.get(Jf);return t=>new pe(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var dt=new wi("ANGULARFIRE2_VERSION");function qt(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ft=(n,e)=>{let t=e?[e]:Th(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},dc=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(dc||{}),zN=gw()&&typeof Zone<"u"?dc.WARN:dc.SILENT;var Wp=class{zone;delegate;constructor(e,t=uy){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},bt=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=S(me);this.outsideAngular=t.runOutsideAngular(()=>new Wp(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Wp(typeof Zone>"u"?void 0:Zone.current,Ra))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),GN=!1;function zz(n,e){!GN&&(zN>dc.SILENT||gw())&&(GN=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),zN>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function Gz(n){let e=S(me,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function As(n){let e=S(me,{optional:!0});return e?e.run(()=>n()):n()}var Kz=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Sn(t,()=>As(()=>n.apply(void 0,r)))),He=(n,e,t)=>(t||=e?dc.WARN:dc.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=S(bt),s=S(Jf),a=S(Un)}catch{return zz(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=As(()=>s.add())),i[u]=Kz(i[u],r,a));let c=Gz(()=>n.apply(this,i));return e?c instanceof pe?c.pipe(so(o.outsideAngular),oo(o.insideAngular),gE(a)):c instanceof Promise?As(()=>new Promise((u,d)=>{s.run(()=>c).then(f=>Sn(a,()=>As(()=>u(f))),f=>Sn(a,()=>As(()=>d(f))))})):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:As(()=>c):c instanceof pe?c.pipe(so(o.outsideAngular),oo(o.insideAngular)):As(()=>c)});var gt=class{constructor(e){return e}},xt=class{constructor(){return Th()}};function Yz(n){return n&&n.length===1?n[0]:new gt(Ht())}var vE=new q("angularfire2._apps"),Qz={provide:gt,useFactory:Yz,deps:[[new Ie,vE]]},Zz={provide:xt,deps:[[new Ie,vE]]};function Jz(n){return(e,t)=>{let r=t.get(Pt);te("angularfire",dt.full,"core"),te("angularfire",dt.full,"app"),te("angular",xx.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new gt(i)}}function KN(n,...e){return ut([Qz,Zz,{provide:vE,useFactory:Jz(n),multi:!0,deps:[me,Se,bt,...e]}])}var YN=He(ZD,!0);var Xz=new Map,eG={activated:!1,tokenObservers:[]},tG={initialized:!1,enabled:!1};function Fr(n){return Xz.get(n)||Object.assign({},eG)}function eM(){return tG}var nG="https://content-firebaseappcheck.googleapis.com/v1";var rG="exchangeDebugToken",QN={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},mce=24*60*60*1e3;var _E=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return y(this,null,function*(){this.stop();try{this.pending=new fa,this.pending.promise.catch(t=>{}),yield iG(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new fa,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function iG(n){return new Promise(e=>{setTimeout(e,n)})}var oG={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Mo=new rr("appCheck","AppCheck",oG);function tM(n){if(!Fr(n).activated)throw Mo.create("use-before-activation",{appName:n.name})}function nM(r,i){return y(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let v=yield s.getHeartbeatsHeader();v&&(o["X-Firebase-Client"]=v)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(v){throw Mo.create("fetch-network-error",{originalErrorMessage:v?.message})}if(c.status!==200)throw Mo.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(v){throw Mo.create("fetch-parse-error",{originalErrorMessage:v?.message})}let d=u.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Mo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let f=Number(d[1])*1e3,m=Date.now();return{token:u.token,expireTimeMillis:m+f,issuedAtTimeMillis:m}})}function rM(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${nG}/projects/${t}/apps/${r}:${rG}?key=${i}`,body:{debug_token:e}}}var sG="firebase-app-check-database",aG=1,wE="firebase-app-check-store";var qp=null;function cG(){return qp||(qp=new Promise((n,e)=>{try{let t=indexedDB.open(sG,aG);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Mo.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(wE,{keyPath:"compositeKey"})}}}catch(t){e(Mo.create("storage-open",{originalErrorMessage:t?.message}))}}),qp)}function lG(n,e){return uG(dG(n),e)}function uG(n,e){return y(this,null,function*(){let r=(yield cG()).transaction(wE,"readwrite"),o=r.objectStore(wE).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(Mo.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function dG(n){return`${n.options.appId}-${n.name}`}var EE=new ir("@firebase/app-check");function yE(n,e){return zr()?lG(n,e).catch(t=>{EE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function iM(){return eM().enabled}function oM(){return y(this,null,function*(){let n=eM();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var hG={error:"UNKNOWN_ERROR"};function fG(n){return _h.encodeString(JSON.stringify(n),!1)}function IE(n,e=!1){return y(this,null,function*(){let t=n.app;tM(t);let r=Fr(t),i=r.token,o;if(i&&!qu(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(qu(c)?i=c:yield yE(t,void 0))}if(!e&&i&&qu(i))return{token:i.token};let s=!1;if(iM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=nM(rM(t,yield oM()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield yE(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Fr(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?EE.warn(c.message):EE.error(c),o=c}let a;return i?o?qu(i)?a={token:i.token,internalError:o}:a=JN(o):(a={token:i.token},r.token=i,yield yE(t,i)):a=JN(o),s&&vG(t,a),a})}function pG(n){return y(this,null,function*(){let e=n.app;tM(e);let{provider:t}=Fr(e);if(iM()){let r=yield oM(),{token:i}=yield nM(rM(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function mG(n,e,t,r){let{app:i}=n,o=Fr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&qu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),ZN(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>ZN(n))}function sM(n,e){let t=Fr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function ZN(n){let{app:e}=n,t=Fr(e),r=t.tokenRefresher;r||(r=gG(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function gG(n){let{app:e}=n;return new _E(()=>y(this,null,function*(){let t=Fr(e),r;if(t.token?r=yield IE(n,!0):r=yield IE(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Fr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},QN.RETRIAL_MIN_WAIT,QN.RETRIAL_MAX_WAIT)}function vG(n,e){let t=Fr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function qu(n){return n.expireTimeMillis-Date.now()>0}function JN(n){return{token:fG(hG),error:n}}var TE=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Fr(this.app);for(let t of e)sM(this.app,t.next);return Promise.resolve()}};function yG(n,e){return new TE(n,e)}function _G(n){return{getToken:e=>IE(n,e),getLimitedUseToken:()=>pG(n),addTokenListener:e=>mG(n,"INTERNAL",e),removeTokenListener:e=>sM(n.app,e)}}var wG="@firebase/app-check",EG="0.8.11";var IG="app-check",XN="app-check-internal";function TG(){It(new Et(IG,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return yG(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(XN).initialize()})),It(new Et(XN,n=>{let e=n.getProvider("app-check").getImmediate();return _G(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),te(wG,EG)}TG();var CG="app-check";var pr=class{constructor(){return Ft(CG)}};var bG=["localhost","0.0.0.0","127.0.0.1"],Ace=typeof window<"u"&&bG.includes(window.location.hostname);function EM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var IM=EM,TM=new rr("auth","Firebase",EM());var Zp=new ir("@firebase/auth");function DG(n,...e){Zp.logLevel<=en.WARN&&Zp.warn(`Auth (${Pn}): ${n}`,...e)}function Gp(n,...e){Zp.logLevel<=en.ERROR&&Zp.error(`Auth (${Pn}): ${n}`,...e)}function ko(n,...e){throw HE(n,...e)}function xs(n,...e){return HE(n,...e)}function CM(n,e,t){let r=Object.assign(Object.assign({},IM()),{[e]:t});return new rr("auth","Firebase",r).create(e,{appName:n.name})}function Rs(n){return CM(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function HE(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return TM.create(n,...e)}function ge(n,e,...t){if(!n)throw HE(e,...t)}function Mi(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Gp(e),new Error(e)}function Oo(n,e){n||Mi(e)}function SE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function SG(){return aM()==="http:"||aM()==="https:"}function aM(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function AG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SG()||Ll()||"connection"in navigator)?navigator.onLine:!0}function RG(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ns=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Oo(t>e,"Short delay should be less than long delay!"),this.isMobile=Fl()||wh()}get(){return AG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function WE(n,e){Oo(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Jp=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var xG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var NG=new Ns(3e4,6e4);function qE(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function fc(o,s,a,c){return y(this,arguments,function*(n,e,t,r,i={}){return bM(n,i,()=>y(this,null,function*(){let u={},d={};r&&(e==="GET"?d=r:u={body:JSON.stringify(r)});let f=es(Object.assign({key:n.config.apiKey},d)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let v=Object.assign({method:e,headers:m},u);return $D()||(v.referrerPolicy="no-referrer"),Jp.fetch()(DM(n,n.config.apiHost,t,f),v)}))})}function bM(n,e,t){return y(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},xG),e);try{let i=new AE(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw zp(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw zp(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw zp(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw zp(n,"user-disabled",s);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw CM(n,d,u);ko(n,d)}}catch(i){if(i instanceof Gn)throw i;ko(n,"network-request-failed",{message:String(i)})}})}function MG(o,s,a,c){return y(this,arguments,function*(n,e,t,r,i={}){let u=yield fc(n,e,t,r,i);return"mfaPendingCredential"in u&&ko(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function DM(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?WE(n.config,i):`${n.config.apiScheme}://${i}`}var AE=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(xs(this.auth,"network-request-failed")),NG.get())})}};function zp(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=xs(n,e,r);return i.customData._tokenResponse=t,i}function PG(n,e){return y(this,null,function*(){return fc(n,"POST","/v1/accounts:delete",e)})}function SM(n,e){return y(this,null,function*(){return fc(n,"POST","/v1/accounts:lookup",e)})}function zu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function zE(n,e=!1){return y(this,null,function*(){let t=Le(n),r=yield t.getIdToken(e),i=GE(r);ge(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:zu(CE(i.auth_time)),issuedAtTime:zu(CE(i.iat)),expirationTime:zu(CE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function CE(n){return Number(n)*1e3}function GE(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Gp("JWT malformed, contained fewer than 3 sections"),null;try{let i=UD(t);return i?JSON.parse(i):(Gp("Failed to decode base64 JWT payload"),null)}catch(i){return Gp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function cM(n){let e=GE(n);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ku(n,e,t=!1){return y(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Gn&&kG(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function kG({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var RE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>y(this,null,function*(){yield this.iteration()}),t)}iteration(){return y(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Yu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=zu(this.lastLoginAt),this.creationTime=zu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Xp(n){return y(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Ku(n,SM(t,{idToken:r}));ge(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?AM(o.providerUserInfo):[],a=OG(n.providerData,s),c=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!a?.length,d=c?u:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Yu(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(n,f)})}function KE(n){return y(this,null,function*(){let e=Le(n);yield Xp(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function OG(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function AM(n){return n.map(e=>{var{providerId:t}=e,r=dy(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function FG(n,e){return y(this,null,function*(){let t=yield bM(n,{},()=>y(this,null,function*(){let r=es({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=DM(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Jp.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function LG(n,e){return y(this,null,function*(){return fc(n,"POST","/v2/accounts:revokeToken",qE(n,e))})}var Gu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ge(e.length!==0,"internal-error");let t=cM(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return y(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return y(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield FG(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(ge(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ge(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ge(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Mi("not implemented")}};function Po(n,e){ge(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var hc=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=dy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new RE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Yu(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return y(this,null,function*(){let t=yield Ku(this,this.stsTokenManager.getToken(this.auth,e));return ge(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return zE(this,e)}reload(){return KE(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return y(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Xp(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return y(this,null,function*(){if(mi(this.auth.app))return Promise.reject(Rs(this.auth));let e=yield this.getIdToken();return yield Ku(this,PG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,u,d;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,v=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,w=(s=t.photoURL)!==null&&s!==void 0?s:void 0,P=(a=t.tenantId)!==null&&a!==void 0?a:void 0,N=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,L=(u=t.createdAt)!==null&&u!==void 0?u:void 0,W=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:Y,emailVerified:re,isAnonymous:it,providerData:ue,stsTokenManager:D}=t;ge(Y&&D,e,"internal-error");let _=Gu.fromJSON(this.name,D);ge(typeof Y=="string",e,"internal-error"),Po(f,e.name),Po(m,e.name),ge(typeof re=="boolean",e,"internal-error"),ge(typeof it=="boolean",e,"internal-error"),Po(v,e.name),Po(w,e.name),Po(P,e.name),Po(N,e.name),Po(L,e.name),Po(W,e.name);let E=new n({uid:Y,auth:e,email:m,emailVerified:re,displayName:f,isAnonymous:it,photoURL:w,phoneNumber:v,tenantId:P,stsTokenManager:_,createdAt:L,lastLoginAt:W});return ue&&Array.isArray(ue)&&(E.providerData=ue.map(b=>Object.assign({},b))),N&&(E._redirectEventId=N),E}static _fromIdTokenResponse(e,t,r=!1){return y(this,null,function*(){let i=new Gu;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Xp(o),o})}static _fromGetAccountInfoResponse(e,t,r){return y(this,null,function*(){let i=t.users[0];ge(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?AM(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Gu;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Yu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c})}};var lM=new Map;function Pi(n){Oo(n instanceof Function,"Expected a class definition");let e=lM.get(n);return e?(Oo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,lM.set(n,e),e)}var VG=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return y(this,null,function*(){return!0})}_set(t,r){return y(this,null,function*(){this.storage[t]=r})}_get(t){return y(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return y(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),xE=VG;function Kp(n,e,t){return`firebase:${n}:${e}:${t}`}var em=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Kp(this.userKey,i.apiKey,o),this.fullPersistenceKey=Kp("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return y(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?hc._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return y(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return y(this,null,function*(){if(!t.length)return new n(Pi(xE),e,r);let i=(yield Promise.all(t.map(u=>y(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||Pi(xE),s=Kp(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let d=yield u._get(s);if(d){let f=hc._fromJSON(e,d);u!==o&&(a=f),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(u=>y(this,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new n(o,e,r))})}};function uM(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(MM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kM(e))return"Blackberry";if(OM(e))return"Webos";if(xM(e))return"Safari";if((e.includes("chrome/")||NM(e))&&!e.includes("edge/"))return"Chrome";if(PM(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function RM(n=un()){return/firefox\//i.test(n)}function xM(n=un()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NM(n=un()){return/crios\//i.test(n)}function MM(n=un()){return/iemobile/i.test(n)}function PM(n=un()){return/android/i.test(n)}function kM(n=un()){return/blackberry/i.test(n)}function OM(n=un()){return/webos/i.test(n)}function YE(n=un()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function UG(n=un()){var e;return YE(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function jG(){return HD()&&document.documentMode===10}function FM(n=un()){return YE(n)||PM(n)||OM(n)||kM(n)||/windows phone/i.test(n)||MM(n)}function LM(n,e=[]){let t;switch(n){case"Browser":t=uM(un());break;case"Worker":t=`${uM(un())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Pn}/${r}`}var NE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return y(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function BG(t){return y(this,arguments,function*(n,e={}){return fc(n,"GET","/v2/passwordPolicy",qE(n,e))})}var $G=6,ME=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:$G,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var PE=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tm(this),this.idTokenSubscription=new tm(this),this.beforeStateQueue=new NE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Pi(t)),this._initializationPromise=this.queue(()=>y(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield em.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return y(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return y(this,null,function*(){try{let t=yield SM(this,{idToken:e}),r=yield hc._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return y(this,null,function*(){var t;if(mi(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return y(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return y(this,null,function*(){try{yield Xp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=RG()}_delete(){return y(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return y(this,null,function*(){if(mi(this.app))return Promise.reject(Rs(this));let t=e?Le(e):null;return t&&ge(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return y(this,null,function*(){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>y(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return y(this,null,function*(){return mi(this.app)?Promise.reject(Rs(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return mi(this.app)?Promise.reject(Rs(this)):this.queue(()=>y(this,null,function*(){yield this.assertedPersistence.setPersistence(Pi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return y(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return y(this,null,function*(){let e=yield BG(this),t=new ME(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new rr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return y(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield LG(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return y(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return y(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Pi(e)||this._popupRedirectResolver;ge(t,this,"argument-error"),this.redirectPersistenceManager=yield em.create(this,[Pi(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return y(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>y(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return y(this,null,function*(){if(e===this.currentUser)return this.queue(()=>y(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return y(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return y(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return y(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&DG(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function QE(n){return Le(n)}var tm=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=KD(t=>this.observer=t)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ZE={loadJS(){return y(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HG(n){ZE=n}function WG(n){return ZE.loadJS(n)}function qG(){return ZE.gapiScript}function VM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function JE(n,e){let t=$t(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Bl(o,e??{}))return i;ko(i,"already-initialized")}return t.initialize({options:e})}function zG(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Pi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function XE(n,e,t){let r=QE(n);ge(r._canInitEmulator,r,"emulator-config-failed"),ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=UM(e),{host:s,port:a}=GG(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||KG()}function UM(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function GG(n){let e=UM(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:dM(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:dM(s)}}}function dM(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function KG(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var nm=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Mi("not implemented")}_getIdTokenResponse(e){return Mi("not implemented")}_linkToIdToken(e,t){return Mi("not implemented")}_getReauthenticationResolver(e){return Mi("not implemented")}};function bE(n,e){return y(this,null,function*(){return MG(n,"POST","/v1/accounts:signInWithIdp",qE(n,e))})}var rm=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var kE=class extends rm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Qu=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return y(this,null,function*(){let o=yield hc._fromIdTokenResponse(e,r,i),s=hM(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return y(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=hM(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function hM(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var OE=class n extends Gn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function jM(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?OE._fromErrorAndOperation(n,o,e,r):o})}function YG(n,e,t=!1){return y(this,null,function*(){let r=yield Ku(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Qu._forOperation(n,"link",r)})}function QG(n,e,t=!1){return y(this,null,function*(){let{auth:r}=n;if(mi(r.app))return Promise.reject(Rs(r));let i="reauthenticate";try{let o=yield Ku(n,jM(r,i,e,n),t);ge(o.idToken,r,"internal-error");let s=GE(o.idToken);ge(s,r,"internal-error");let{sub:a}=s;return ge(n.uid===a,r,"user-mismatch"),Qu._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&ko(r,"user-mismatch"),o}})}function ZG(n,e,t=!1){return y(this,null,function*(){if(mi(n.app))return Promise.reject(Rs(n));let r="signIn",i=yield jM(n,r,e),o=yield Qu._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function cm(n,e,t,r){return Le(n).onIdTokenChanged(e,t,r)}function eI(n,e,t){return Le(n).beforeAuthStateChanged(e,t)}function lm(n,e,t,r){return Le(n).onAuthStateChanged(e,t,r)}var im="__sak";var om=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(im,"1"),this.storage.removeItem(im),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var JG=1e3,XG=10,e4=(()=>{class n extends om{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=FM(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);jG()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,XG):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},JG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return y(this,null,function*(){yield no(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return y(this,null,function*(){let r=yield no(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return y(this,null,function*(){yield no(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),BM=e4;var t4=(()=>{class n extends om{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),tI=t4;function n4(n){return Promise.all(n.map(e=>y(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var r4=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return y(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(d=>y(this,null,function*(){return d(r.origin,s)})),u=yield n4(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function $M(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var FE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return y(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let u=$M("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(f){let m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function ni(){return window}function i4(n){ni().location.href=n}function HM(){return typeof ni().WorkerGlobalScope<"u"&&typeof ni().importScripts=="function"}function o4(){return y(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function s4(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function a4(){return HM()?self:null}var WM="firebaseLocalStorageDb",c4=1,sm="firebaseLocalStorage",qM="fbase_key",Ms=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function um(n,e){return n.transaction([sm],e?"readwrite":"readonly").objectStore(sm)}function l4(){let n=indexedDB.deleteDatabase(WM);return new Ms(n).toPromise()}function LE(){let n=indexedDB.open(WM,c4);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(sm,{keyPath:qM})}catch(i){t(i)}}),n.addEventListener("success",()=>y(this,null,function*(){let r=n.result;r.objectStoreNames.contains(sm)?e(r):(r.close(),yield l4(),e(yield LE()))}))})}function fM(n,e,t){return y(this,null,function*(){let r=um(n,!0).put({[qM]:e,value:t});return new Ms(r).toPromise()})}function u4(n,e){return y(this,null,function*(){let t=um(n,!1).get(e),r=yield new Ms(t).toPromise();return r===void 0?null:r.value})}function pM(n,e){let t=um(n,!0).delete(e);return new Ms(t).toPromise()}var d4=800,h4=3,f4=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return y(this,null,function*(){return this.db?this.db:(this.db=yield LE(),this.db)})}_withRetries(t){return y(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>h4)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return y(this,null,function*(){return HM()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return y(this,null,function*(){this.receiver=r4._getInstance(a4()),this.receiver._subscribe("keyChanged",(t,r)=>y(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>y(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return y(this,null,function*(){var t,r;if(this.activeServiceWorker=yield o4(),!this.activeServiceWorker)return;this.sender=new FE(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return y(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||s4()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return y(this,null,function*(){try{if(!indexedDB)return!1;let t=yield LE();return yield fM(t,im,"1"),yield pM(t,im),!0}catch{}return!1})}_withPendingWrite(t){return y(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(i=>fM(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return y(this,null,function*(){let r=yield this._withRetries(i=>u4(i,t));return this.localCache[t]=r,r})}_remove(t){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(r=>pM(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return y(this,null,function*(){let t=yield this._withRetries(o=>{let s=um(o,!1).getAll();return new Ms(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>y(this,null,function*(){return this._poll()}),d4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),zM=f4;var Vce=VM("rcb"),Uce=new Ns(3e4,6e4);function p4(n,e){return e?Pi(e):(ge(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Zu=class extends nm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bE(e,this._buildIdpRequest())}_linkToIdToken(e,t){return bE(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return bE(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function m4(n){return ZG(n.auth,new Zu(n),n.bypassAuthState)}function g4(n){let{auth:e,user:t}=n;return ge(t,e,"internal-error"),QG(t,new Zu(n),n.bypassAuthState)}function v4(n){return y(this,null,function*(){let{auth:e,user:t}=n;return ge(t,e,"internal-error"),YG(t,new Zu(n),n.bypassAuthState)})}var VE=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>y(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return y(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return m4;case"linkViaPopup":case"linkViaRedirect":return v4;case"reauthViaPopup":case"reauthViaRedirect":return g4;default:ko(this.auth,"internal-error")}}resolve(e){Oo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Oo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var jce=new Ns(2e3,1e4);var y4="pendingRedirect",Yp=new Map,UE=class n extends VE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return y(this,null,function*(){let e=Yp.get(this.auth._key());if(!e){try{let r=(yield _4(this.resolver,this.auth))?yield no(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Yp.set(this.auth._key(),e)}return this.bypassAuthState||Yp.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return y(this,null,function*(){if(e.type==="signInViaRedirect")return no(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,no(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return y(this,null,function*(){})}cleanUp(){}};function _4(n,e){return y(this,null,function*(){let t=I4(e),r=E4(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function w4(n,e){Yp.set(n._key(),e)}function E4(n){return Pi(n._redirectPersistence)}function I4(n){return Kp(y4,n.config.apiKey,n.name)}function T4(n,e,t=!1){return y(this,null,function*(){if(mi(n.app))return Promise.reject(Rs(n));let r=QE(n),i=p4(r,e),s=yield new UE(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var C4=10*60*1e3,jE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!b4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!GM(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(xs(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=C4&&this.cachedEventUids.clear(),this.cachedEventUids.has(mM(e))}saveEventToCache(e){this.cachedEventUids.add(mM(e)),this.lastProcessedEventTime=Date.now()}};function mM(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function GM({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function b4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return GM(n);default:return!1}}function D4(t){return y(this,arguments,function*(n,e={}){return fc(n,"GET","/v1/projects",e)})}var S4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,A4=/^https?/;function R4(n){return y(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield D4(n);for(let t of e)try{if(x4(t))return}catch{}ko(n,"unauthorized-domain")})}function x4(n){let e=SE(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!A4.test(t))return!1;if(S4.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var N4=new Ns(3e4,6e4);function gM(){let n=ni().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function M4(n){return new Promise((e,t)=>{var r,i,o;function s(){gM(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gM(),t(xs(n,"network-request-failed"))},timeout:N4.get()})}if(!((i=(r=ni().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=ni().gapi)===null||o===void 0)&&o.load)s();else{let a=VM("iframefcb");return ni()[a]=()=>{gapi.load?s():t(xs(n,"network-request-failed"))},WG(`${qG()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw Qp=null,e})}var Qp=null;function P4(n){return Qp=Qp||M4(n),Qp}var k4=new Ns(5e3,15e3),O4="__/auth/iframe",F4="emulator/auth/iframe",L4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},V4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function U4(n){let e=n.config;ge(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?WE(e,F4):`https://${n.config.authDomain}/${O4}`,r={apiKey:e.apiKey,appName:n.name,v:Pn},i=V4.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${es(r).slice(1)}`}function j4(n){return y(this,null,function*(){let e=yield P4(n),t=ni().gapi;return ge(t,n,"internal-error"),e.open({where:document.body,url:U4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:L4,dontclear:!0},r=>new Promise((i,o)=>y(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=xs(n,"network-request-failed"),a=ni().setTimeout(()=>{o(s)},k4.get());function c(){ni().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var B4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$4=500,H4=600,W4="_blank",q4="http://localhost",am=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function z4(n,e,t,r=$4,i=H4){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},B4),{width:r.toString(),height:i.toString(),top:o,left:s}),u=un().toLowerCase();t&&(a=NM(u)?W4:t),RM(u)&&(e=e||q4,c.scrollbars="yes");let d=Object.entries(c).reduce((m,[v,w])=>`${m}${v}=${w},`,"");if(UG(u)&&a!=="_self")return G4(e||"",a),new am(null);let f=window.open(e||"",a,d);ge(f,n,"popup-blocked");try{f.focus()}catch{}return new am(f)}function G4(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var K4="__/auth/handler",Y4="emulator/auth/handler",Q4=encodeURIComponent("fac");function vM(n,e,t,r,i,o){return y(this,null,function*(){ge(n.config.authDomain,n,"auth-domain-config-required"),ge(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Pn,eventId:i};if(e instanceof rm){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",Ul(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(o||{}))s[d]=f}if(e instanceof kE){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(s.scopes=d.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield n._getAppCheckToken(),u=c?`#${Q4}=${encodeURIComponent(c)}`:"";return`${Z4(n)}?${es(a).slice(1)}${u}`})}function Z4({config:n}){return n.emulator?WE(n,Y4):`https://${n.authDomain}/${K4}`}var DE="webStorageSupport",BE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tI,this._completeRedirectFn=T4,this._overrideRedirectResult=w4}_openPopup(e,t,r,i){return y(this,null,function*(){var o;Oo((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield vM(e,t,r,SE(),i);return z4(e,s,$M())})}_openRedirect(e,t,r,i){return y(this,null,function*(){yield this._originValidation(e);let o=yield vM(e,t,r,SE(),i);return i4(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Oo(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return y(this,null,function*(){let t=yield j4(e),r=new jE(e);return t.register("authEvent",i=>(ge(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(DE,{type:DE},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[DE];s!==void 0&&t(!!s),ko(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=R4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return FM()||xM()||YE()}},KM=BE;var yM="@firebase/auth",_M="1.8.2";var $E=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return y(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function J4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function X4(n){It(new Et("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ge(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LM(n)},u=new PE(r,i,o,c);return zG(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),It(new Et("auth-internal",e=>{let t=QE(e.getProvider("auth").getImmediate());return(r=>new $E(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),te(yM,_M,J4(n)),te(yM,_M,"esm2017")}var e3=5*60,t3=zv("authIdTokenMaxAge")||e3,wM=null,n3=n=>e=>y(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>t3)return;let i=t?.token;wM!==i&&(wM=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function nI(n=Ht()){let e=$t(n,"auth");if(e.isInitialized())return e.getImmediate();let t=JE(n,{popupRedirectResolver:KM,persistence:[zM,BM,tI]}),r=zv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=n3(o.toString());eI(t,s,()=>s(t.currentUser)),cm(t,a=>s(a))}}let i=BD("auth");return i&&XE(t,`http://${i}`),t}function r3(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}HG({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=xs("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",r3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});X4("Browser");function QM(n){return new pe(function(e){var t=lm(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var ZM="auth",Ps=class{constructor(e){return e}},Lr=class{constructor(){return Ft(ZM)}};var rI=new q("angularfire2.auth-instances");function K3(n,e){let t=qt(ZM,n,e);return t&&new Ps(t)}function Y3(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ps(r)}}var Q3={provide:Lr,deps:[[new Ie,rI]]},Z3={provide:Ps,useFactory:K3,deps:[[new Ie,rI],gt]};function JM(n,...e){return te("angularfire",dt.full,"auth"),ut([Z3,Q3,{provide:rI,useFactory:Y3(n),multi:!0,deps:[me,Se,bt,xt,[new Ie,pr],...e]}])}var XM=He(QM,!0);var eP=He(nI,!0);var dm="analytics",X3="firebase_id",e6="origin",t6=60*1e3,n6="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",uI="https://www.googletagmanager.com/gtag/js";var Rn=new ir("@firebase/analytics");var r6={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Xn=new rr("analytics","Analytics",r6);function i6(n){if(!n.startsWith(uI)){let e=Xn.create("invalid-gtag-resource",{gtagURL:n});return Rn.warn(e.message),""}return n}function aP(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function o6(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function s6(n,e){let t=o6("firebase-js-sdk-policy",{createScriptURL:i6}),r=document.createElement("script"),i=`${uI}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function a6(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function c6(n,e,t,r,i,o){return y(this,null,function*(){let s=r[i];try{if(s)yield e[s];else{let c=(yield aP(t)).find(u=>u.measurementId===i);c&&(yield e[c.appId])}}catch(a){Rn.error(a)}n("config",i,o)})}function l6(n,e,t,r,i){return y(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield aP(t);for(let c of s){let u=a.find(f=>f.measurementId===c),d=u&&e[u.appId];if(d)o.push(d);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),n("event",r,i||{})}catch(o){Rn.error(o)}})}function u6(n,e,t,r){function i(o,...s){return y(this,null,function*(){try{if(o==="event"){let[a,c]=s;yield l6(n,e,t,a,c)}else if(o==="config"){let[a,c]=s;yield c6(n,e,t,r,a,c)}else if(o==="consent"){let[a,c]=s;n("consent",a,c)}else if(o==="get"){let[a,c,u]=s;n("get",a,c,u)}else if(o==="set"){let[a]=s;n("set",a)}else n(o,...s)}catch(a){Rn.error(a)}})}return i}function d6(n,e,t,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=u6(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}function h6(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(uI)&&t.src.includes(n))return t;return null}var f6=30,p6=1e3,oI=class{constructor(e={},t=p6){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},cP=new oI;function m6(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function g6(n){return y(this,null,function*(){var e;let{appId:t,apiKey:r}=n,i={method:"GET",headers:m6(r)},o=n6.replace("{app-id}",t),s=yield fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{let c=yield s.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw Xn.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})}function v6(r){return y(this,arguments,function*(n,e=cP,t){let{appId:i,apiKey:o,measurementId:s}=n.options;if(!i)throw Xn.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw Xn.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new sI;return setTimeout(()=>y(this,null,function*(){c.abort()}),t!==void 0?t:t6),lP({appId:i,apiKey:o,measurementId:s},a,c,e)})}function lP(o,s,a){return y(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=cP){var c;let{appId:u,measurementId:d}=n;try{yield y6(r,e)}catch(f){if(d)return Rn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:u,measurementId:d};throw f}try{let f=yield g6(n);return i.deleteThrottleMetadata(u),f}catch(f){let m=f;if(!_6(m)){if(i.deleteThrottleMetadata(u),d)return Rn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:u,measurementId:d};throw f}let v=Number((c=m?.customData)===null||c===void 0?void 0:c.httpStatus)===503?ga(t,i.intervalMillis,f6):ga(t,i.intervalMillis),w={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return i.setThrottleMetadata(u,w),Rn.debug(`Calling attemptFetch again in ${v} millis`),lP(n,w,r,i)}})}function y6(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(Xn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function _6(n){if(!(n instanceof Gn)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var sI=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var aI;function w6(n,e,t,r,i){return y(this,null,function*(){if(i&&i.global){n("event",t,r);return}else{let o=yield e,s=Object.assign(Object.assign({},r),{send_to:o});n("event",t,s)}})}function E6(n,e,t,r){return y(this,null,function*(){if(r&&r.global)return n("set",{user_id:t}),Promise.resolve();{let i=yield e;n("config",i,{update:!0,user_id:t})}})}var cI;function I6(n){cI=n}function T6(n){aI=n}function C6(){return y(this,null,function*(){if(zr())try{yield ma()}catch(n){return Rn.warn(Xn.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Rn.warn(Xn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function b6(n,e,t,r,i,o,s){return y(this,null,function*(){var a;let c=v6(n);c.then(v=>{t[v.measurementId]=v.appId,n.options.measurementId&&v.measurementId!==n.options.measurementId&&Rn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>Rn.error(v)),e.push(c);let u=C6().then(v=>{if(v)return r.getId()}),[d,f]=yield Promise.all([c,u]);h6(o)||s6(o,d.measurementId),cI&&(i("consent","default",cI),I6(void 0)),i("js",new Date);let m=(a=s?.config)!==null&&a!==void 0?a:{};return m[e6]="firebase",m.update=!0,f!=null&&(m[X3]=f),i("config",d.measurementId,m),aI&&(i("set",aI),T6(void 0)),d.measurementId})}var lI=class{constructor(e){this.app=e}_delete(){return delete pc[this.app.options.appId],Promise.resolve()}},pc={},tP=[],nP={},iI="dataLayer",D6="gtag",rP,dI,iP=!1;function S6(){let n=[];if(Ll()&&n.push("This is a browser extension environment."),Vl()||n.push("Cookies are not available."),n.length>0){let e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Xn.create("invalid-analytics-context",{errorInfo:e});Rn.warn(t.message)}}function A6(n,e,t){S6();let r=n.options.appId;if(!r)throw Xn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Rn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Xn.create("no-api-key");if(pc[r]!=null)throw Xn.create("already-exists",{id:r});if(!iP){a6(iI);let{wrappedGtag:o,gtagCore:s}=d6(pc,tP,nP,iI,D6);dI=o,rP=s,iP=!0}return pc[r]=b6(n,tP,nP,e,rP,iI,t),new lI(n)}function uP(n=Ht()){n=Le(n);let e=$t(n,dm);return e.isInitialized()?e.getImmediate():dP(n)}function dP(n,e={}){let t=$t(n,dm);if(t.isInitialized()){let i=t.getImmediate();if(Bl(e,t.getOptions()))return i;throw Xn.create("already-initialized")}return t.initialize({options:e})}function hP(){return y(this,null,function*(){if(Ll()||!Vl()||!zr())return!1;try{return yield ma()}catch{return!1}})}function fP(n,e,t){n=Le(n),E6(dI,pc[n.app.options.appId],e,t).catch(r=>Rn.error(r))}function hI(n,e,t,r){n=Le(n),w6(dI,pc[n.app.options.appId],e,t,r).catch(i=>Rn.error(i))}var oP="@firebase/analytics",sP="0.10.11";function R6(){It(new Et(dm,(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return A6(r,i,t)},"PUBLIC")),It(new Et("analytics-internal",n,"PRIVATE")),te(oP,sP),te(oP,sP,"esm2017");function n(e){try{let t=e.getProvider(dm).getImmediate();return{logEvent:(r,i,o)=>hI(t,r,i,o)}}catch(t){throw Xn.create("interop-component-reg-failed",{reason:t})}}}R6();var ks=class{constructor(e){return e}},gP="analytics",pI=class{constructor(){return Ft(gP)}};var vP=He(uP,!0);var yP=He(hP,!1),x6=He(hI,!1,2);var N6=He(fP,!0,2);var gI=(()=>{class n{initialized;disposables=[];constructor(t,r,i){te("angularfire",dt.full,"user-tracking");let o;this.initialized=r.runOutsideAngular(()=>new Promise(s=>{o=s})),yP().then(()=>{let s=i.get(ks);s?this.disposables=[XM(t).subscribe(a=>{N6(s,a?.uid),o()})]:o()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}static \u0275fac=function(r){return new(r||n)(he(Ps),he(me),he(Se))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),M6="firebase_event_origin",P6="firebase_previous_class",k6="firebase_previous_id",O6="firebase_previous_screen",F6="firebase_screen_class",pP="firebase_screen_id",L6="firebase_screen",mI="outlet",V6="page_path",U6="page_title",Ju="screen_class",mP="screen_name",j6="screen_view",B6="auto",$6="#",H6=Math.floor(Math.random()*(2**32-1))-2**31,fI={},W6=n=>{let e=[n[Ju],n[mI]].join($6);if(fI.hasOwnProperty(e))return fI[e];{let t=H6++;return fI[e]=t,t}},q6=(n,e,t)=>n.events.pipe(In(i=>i instanceof Fu)).pipe(Fn(i=>{let s=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,m=>m.replace("://",":///"))).root.children[i.snapshot.outlet]?.toString()||"",a=n.routerState.root.children.map(m=>m).find(m=>m.outlet===i.snapshot.outlet);if(!a)return se(null);let c=a;for(;c.firstChild;)c=c.firstChild;let u=c.pathFromRoot.map(m=>m.routeConfig?.path).filter(m=>m).join("/")||"/",d={[mP]:u,[V6]:`/${s}`,[M6]:B6,[L6]:u,[mI]:i.snapshot.outlet};e&&(d[U6]=e.getTitle());let f=a.component;if(f){if(f===hE){let m=i.snapshot;for(;m.firstChild;)m=m.firstChild;f=m.component}}else f=i.snapshot.component;if(typeof f=="string")return se(fe(U({},d),{[Ju]:f}));if(f){let m=t.resolveComponentFactory(f);return se(fe(U({},d),{[Ju]:m.selector}))}return se(null)}),In(i=>!!i),ee(i=>U({[F6]:i[Ju],[pP]:W6(i)},i)),gy(i=>i[mI]),St(i=>i.pipe(ef((o,s)=>JSON.stringify(o)===JSON.stringify(s)),Pa(void 0),nf(),ee(([o,s])=>o?U({[P6]:o[Ju],[O6]:o[mP],[k6]:o[pP]},s):s)))),_P=(()=>{class n{disposable;constructor(t,r,i,o,s,a){te("angularfire",dt.full,"screen-tracking"),yP().then(()=>{let c=a.get(ks);!t||!c||o.runOutsideAngular(()=>{this.disposable=q6(t,r,i).pipe(Fn(u=>y(this,null,function*(){return s&&(yield s.initialized),x6(c,j6,u)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(r){return new(r||n)(he(Hp,8),he(Dp,8),he(yo),he(me),he(gI,8),he(Se))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),vI=new q("angularfire2.analytics-instances");function z6(n,e,t){if(!ec(t))return null;let r=qt(gP,n,e);return r&&new ks(r)}function G6(n){return(e,t,r)=>{if(!ec(r))return null;let i=e.runOutsideAngular(()=>n(t));return new ks(i)}}var K6={provide:pI,deps:[[new Ie,vI]]},Y6={provide:ks,useFactory:z6,deps:[[new Ie,vI],gt,Pt]};function wP(n,...e){return te("angularfire",dt.full,"analytics"),ut([Y6,K6,{provide:vI,useFactory:G6(n),multi:!0,deps:[me,Se,Pt,bt,xt,...e]}])}var EP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},IP={};var ki,yI;(function(){var n;function e(D,_){function E(){}E.prototype=_.prototype,D.D=_.prototype,D.prototype=new E,D.prototype.constructor=D,D.C=function(b,A,M){for(var I=Array(arguments.length-2),hi=2;hi<arguments.length;hi++)I[hi-2]=arguments[hi];return _.prototype[A].apply(b,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,_,E){E||(E=0);var b=Array(16);if(typeof _=="string")for(var A=0;16>A;++A)b[A]=_.charCodeAt(E++)|_.charCodeAt(E++)<<8|_.charCodeAt(E++)<<16|_.charCodeAt(E++)<<24;else for(A=0;16>A;++A)b[A]=_[E++]|_[E++]<<8|_[E++]<<16|_[E++]<<24;_=D.g[0],E=D.g[1],A=D.g[2];var M=D.g[3],I=_+(M^E&(A^M))+b[0]+3614090360&4294967295;_=E+(I<<7&4294967295|I>>>25),I=M+(A^_&(E^A))+b[1]+3905402710&4294967295,M=_+(I<<12&4294967295|I>>>20),I=A+(E^M&(_^E))+b[2]+606105819&4294967295,A=M+(I<<17&4294967295|I>>>15),I=E+(_^A&(M^_))+b[3]+3250441966&4294967295,E=A+(I<<22&4294967295|I>>>10),I=_+(M^E&(A^M))+b[4]+4118548399&4294967295,_=E+(I<<7&4294967295|I>>>25),I=M+(A^_&(E^A))+b[5]+1200080426&4294967295,M=_+(I<<12&4294967295|I>>>20),I=A+(E^M&(_^E))+b[6]+2821735955&4294967295,A=M+(I<<17&4294967295|I>>>15),I=E+(_^A&(M^_))+b[7]+4249261313&4294967295,E=A+(I<<22&4294967295|I>>>10),I=_+(M^E&(A^M))+b[8]+1770035416&4294967295,_=E+(I<<7&4294967295|I>>>25),I=M+(A^_&(E^A))+b[9]+2336552879&4294967295,M=_+(I<<12&4294967295|I>>>20),I=A+(E^M&(_^E))+b[10]+4294925233&4294967295,A=M+(I<<17&4294967295|I>>>15),I=E+(_^A&(M^_))+b[11]+2304563134&4294967295,E=A+(I<<22&4294967295|I>>>10),I=_+(M^E&(A^M))+b[12]+1804603682&4294967295,_=E+(I<<7&4294967295|I>>>25),I=M+(A^_&(E^A))+b[13]+4254626195&4294967295,M=_+(I<<12&4294967295|I>>>20),I=A+(E^M&(_^E))+b[14]+2792965006&4294967295,A=M+(I<<17&4294967295|I>>>15),I=E+(_^A&(M^_))+b[15]+1236535329&4294967295,E=A+(I<<22&4294967295|I>>>10),I=_+(A^M&(E^A))+b[1]+4129170786&4294967295,_=E+(I<<5&4294967295|I>>>27),I=M+(E^A&(_^E))+b[6]+3225465664&4294967295,M=_+(I<<9&4294967295|I>>>23),I=A+(_^E&(M^_))+b[11]+643717713&4294967295,A=M+(I<<14&4294967295|I>>>18),I=E+(M^_&(A^M))+b[0]+3921069994&4294967295,E=A+(I<<20&4294967295|I>>>12),I=_+(A^M&(E^A))+b[5]+3593408605&4294967295,_=E+(I<<5&4294967295|I>>>27),I=M+(E^A&(_^E))+b[10]+38016083&4294967295,M=_+(I<<9&4294967295|I>>>23),I=A+(_^E&(M^_))+b[15]+3634488961&4294967295,A=M+(I<<14&4294967295|I>>>18),I=E+(M^_&(A^M))+b[4]+3889429448&4294967295,E=A+(I<<20&4294967295|I>>>12),I=_+(A^M&(E^A))+b[9]+568446438&4294967295,_=E+(I<<5&4294967295|I>>>27),I=M+(E^A&(_^E))+b[14]+3275163606&4294967295,M=_+(I<<9&4294967295|I>>>23),I=A+(_^E&(M^_))+b[3]+4107603335&4294967295,A=M+(I<<14&4294967295|I>>>18),I=E+(M^_&(A^M))+b[8]+1163531501&4294967295,E=A+(I<<20&4294967295|I>>>12),I=_+(A^M&(E^A))+b[13]+2850285829&4294967295,_=E+(I<<5&4294967295|I>>>27),I=M+(E^A&(_^E))+b[2]+4243563512&4294967295,M=_+(I<<9&4294967295|I>>>23),I=A+(_^E&(M^_))+b[7]+1735328473&4294967295,A=M+(I<<14&4294967295|I>>>18),I=E+(M^_&(A^M))+b[12]+2368359562&4294967295,E=A+(I<<20&4294967295|I>>>12),I=_+(E^A^M)+b[5]+4294588738&4294967295,_=E+(I<<4&4294967295|I>>>28),I=M+(_^E^A)+b[8]+2272392833&4294967295,M=_+(I<<11&4294967295|I>>>21),I=A+(M^_^E)+b[11]+1839030562&4294967295,A=M+(I<<16&4294967295|I>>>16),I=E+(A^M^_)+b[14]+4259657740&4294967295,E=A+(I<<23&4294967295|I>>>9),I=_+(E^A^M)+b[1]+2763975236&4294967295,_=E+(I<<4&4294967295|I>>>28),I=M+(_^E^A)+b[4]+1272893353&4294967295,M=_+(I<<11&4294967295|I>>>21),I=A+(M^_^E)+b[7]+4139469664&4294967295,A=M+(I<<16&4294967295|I>>>16),I=E+(A^M^_)+b[10]+3200236656&4294967295,E=A+(I<<23&4294967295|I>>>9),I=_+(E^A^M)+b[13]+681279174&4294967295,_=E+(I<<4&4294967295|I>>>28),I=M+(_^E^A)+b[0]+3936430074&4294967295,M=_+(I<<11&4294967295|I>>>21),I=A+(M^_^E)+b[3]+3572445317&4294967295,A=M+(I<<16&4294967295|I>>>16),I=E+(A^M^_)+b[6]+76029189&4294967295,E=A+(I<<23&4294967295|I>>>9),I=_+(E^A^M)+b[9]+3654602809&4294967295,_=E+(I<<4&4294967295|I>>>28),I=M+(_^E^A)+b[12]+3873151461&4294967295,M=_+(I<<11&4294967295|I>>>21),I=A+(M^_^E)+b[15]+530742520&4294967295,A=M+(I<<16&4294967295|I>>>16),I=E+(A^M^_)+b[2]+3299628645&4294967295,E=A+(I<<23&4294967295|I>>>9),I=_+(A^(E|~M))+b[0]+4096336452&4294967295,_=E+(I<<6&4294967295|I>>>26),I=M+(E^(_|~A))+b[7]+1126891415&4294967295,M=_+(I<<10&4294967295|I>>>22),I=A+(_^(M|~E))+b[14]+2878612391&4294967295,A=M+(I<<15&4294967295|I>>>17),I=E+(M^(A|~_))+b[5]+4237533241&4294967295,E=A+(I<<21&4294967295|I>>>11),I=_+(A^(E|~M))+b[12]+1700485571&4294967295,_=E+(I<<6&4294967295|I>>>26),I=M+(E^(_|~A))+b[3]+2399980690&4294967295,M=_+(I<<10&4294967295|I>>>22),I=A+(_^(M|~E))+b[10]+4293915773&4294967295,A=M+(I<<15&4294967295|I>>>17),I=E+(M^(A|~_))+b[1]+2240044497&4294967295,E=A+(I<<21&4294967295|I>>>11),I=_+(A^(E|~M))+b[8]+1873313359&4294967295,_=E+(I<<6&4294967295|I>>>26),I=M+(E^(_|~A))+b[15]+4264355552&4294967295,M=_+(I<<10&4294967295|I>>>22),I=A+(_^(M|~E))+b[6]+2734768916&4294967295,A=M+(I<<15&4294967295|I>>>17),I=E+(M^(A|~_))+b[13]+1309151649&4294967295,E=A+(I<<21&4294967295|I>>>11),I=_+(A^(E|~M))+b[4]+4149444226&4294967295,_=E+(I<<6&4294967295|I>>>26),I=M+(E^(_|~A))+b[11]+3174756917&4294967295,M=_+(I<<10&4294967295|I>>>22),I=A+(_^(M|~E))+b[2]+718787259&4294967295,A=M+(I<<15&4294967295|I>>>17),I=E+(M^(A|~_))+b[9]+3951481745&4294967295,D.g[0]=D.g[0]+_&4294967295,D.g[1]=D.g[1]+(A+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+A&4294967295,D.g[3]=D.g[3]+M&4294967295}r.prototype.u=function(D,_){_===void 0&&(_=D.length);for(var E=_-this.blockSize,b=this.B,A=this.h,M=0;M<_;){if(A==0)for(;M<=E;)i(this,D,M),M+=this.blockSize;if(typeof D=="string"){for(;M<_;)if(b[A++]=D.charCodeAt(M++),A==this.blockSize){i(this,b),A=0;break}}else for(;M<_;)if(b[A++]=D[M++],A==this.blockSize){i(this,b),A=0;break}}this.h=A,this.o+=_},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var _=1;_<D.length-8;++_)D[_]=0;var E=8*this.o;for(_=D.length-8;_<D.length;++_)D[_]=E&255,E/=256;for(this.u(D),D=Array(16),_=E=0;4>_;++_)for(var b=0;32>b;b+=8)D[E++]=this.g[_]>>>b&255;return D};function o(D,_){var E=a;return Object.prototype.hasOwnProperty.call(E,D)?E[D]:E[D]=_(D)}function s(D,_){this.h=_;for(var E=[],b=!0,A=D.length-1;0<=A;A--){var M=D[A]|0;b&&M==_||(E[A]=M,b=!1)}this.g=E}var a={};function c(D){return-128<=D&&128>D?o(D,function(_){return new s([_|0],0>_?-1:0)}):new s([D|0],0>D?-1:0)}function u(D){if(isNaN(D)||!isFinite(D))return f;if(0>D)return N(u(-D));for(var _=[],E=1,b=0;D>=E;b++)_[b]=D/E|0,E*=4294967296;return new s(_,0)}function d(D,_){if(D.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(D.charAt(0)=="-")return N(d(D.substring(1),_));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=u(Math.pow(_,8)),b=f,A=0;A<D.length;A+=8){var M=Math.min(8,D.length-A),I=parseInt(D.substring(A,A+M),_);8>M?(M=u(Math.pow(_,M)),b=b.j(M).add(u(I))):(b=b.j(E),b=b.add(u(I)))}return b}var f=c(0),m=c(1),v=c(16777216);n=s.prototype,n.m=function(){if(P(this))return-N(this).m();for(var D=0,_=1,E=0;E<this.g.length;E++){var b=this.i(E);D+=(0<=b?b:4294967296+b)*_,_*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(w(this))return"0";if(P(this))return"-"+N(this).toString(D);for(var _=u(Math.pow(D,6)),E=this,b="";;){var A=re(E,_).g;E=L(E,A.j(_));var M=((0<E.g.length?E.g[0]:E.h)>>>0).toString(D);if(E=A,w(E))return M+b;for(;6>M.length;)M="0"+M;b=M+b}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function w(D){if(D.h!=0)return!1;for(var _=0;_<D.g.length;_++)if(D.g[_]!=0)return!1;return!0}function P(D){return D.h==-1}n.l=function(D){return D=L(this,D),P(D)?-1:w(D)?0:1};function N(D){for(var _=D.g.length,E=[],b=0;b<_;b++)E[b]=~D.g[b];return new s(E,~D.h).add(m)}n.abs=function(){return P(this)?N(this):this},n.add=function(D){for(var _=Math.max(this.g.length,D.g.length),E=[],b=0,A=0;A<=_;A++){var M=b+(this.i(A)&65535)+(D.i(A)&65535),I=(M>>>16)+(this.i(A)>>>16)+(D.i(A)>>>16);b=I>>>16,M&=65535,I&=65535,E[A]=I<<16|M}return new s(E,E[E.length-1]&-2147483648?-1:0)};function L(D,_){return D.add(N(_))}n.j=function(D){if(w(this)||w(D))return f;if(P(this))return P(D)?N(this).j(N(D)):N(N(this).j(D));if(P(D))return N(this.j(N(D)));if(0>this.l(v)&&0>D.l(v))return u(this.m()*D.m());for(var _=this.g.length+D.g.length,E=[],b=0;b<2*_;b++)E[b]=0;for(b=0;b<this.g.length;b++)for(var A=0;A<D.g.length;A++){var M=this.i(b)>>>16,I=this.i(b)&65535,hi=D.i(A)>>>16,vl=D.i(A)&65535;E[2*b+2*A]+=I*vl,W(E,2*b+2*A),E[2*b+2*A+1]+=M*vl,W(E,2*b+2*A+1),E[2*b+2*A+1]+=I*hi,W(E,2*b+2*A+1),E[2*b+2*A+2]+=M*hi,W(E,2*b+2*A+2)}for(b=0;b<_;b++)E[b]=E[2*b+1]<<16|E[2*b];for(b=_;b<2*_;b++)E[b]=0;return new s(E,0)};function W(D,_){for(;(D[_]&65535)!=D[_];)D[_+1]+=D[_]>>>16,D[_]&=65535,_++}function Y(D,_){this.g=D,this.h=_}function re(D,_){if(w(_))throw Error("division by zero");if(w(D))return new Y(f,f);if(P(D))return _=re(N(D),_),new Y(N(_.g),N(_.h));if(P(_))return _=re(D,N(_)),new Y(N(_.g),_.h);if(30<D.g.length){if(P(D)||P(_))throw Error("slowDivide_ only works with positive integers.");for(var E=m,b=_;0>=b.l(D);)E=it(E),b=it(b);var A=ue(E,1),M=ue(b,1);for(b=ue(b,2),E=ue(E,2);!w(b);){var I=M.add(b);0>=I.l(D)&&(A=A.add(E),M=I),b=ue(b,1),E=ue(E,1)}return _=L(D,A.j(_)),new Y(A,_)}for(A=f;0<=D.l(_);){for(E=Math.max(1,Math.floor(D.m()/_.m())),b=Math.ceil(Math.log(E)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),M=u(E),I=M.j(_);P(I)||0<I.l(D);)E-=b,M=u(E),I=M.j(_);w(M)&&(M=m),A=A.add(M),D=L(D,I)}return new Y(A,D)}n.A=function(D){return re(this,D).h},n.and=function(D){for(var _=Math.max(this.g.length,D.g.length),E=[],b=0;b<_;b++)E[b]=this.i(b)&D.i(b);return new s(E,this.h&D.h)},n.or=function(D){for(var _=Math.max(this.g.length,D.g.length),E=[],b=0;b<_;b++)E[b]=this.i(b)|D.i(b);return new s(E,this.h|D.h)},n.xor=function(D){for(var _=Math.max(this.g.length,D.g.length),E=[],b=0;b<_;b++)E[b]=this.i(b)^D.i(b);return new s(E,this.h^D.h)};function it(D){for(var _=D.g.length+1,E=[],b=0;b<_;b++)E[b]=D.i(b)<<1|D.i(b-1)>>>31;return new s(E,D.h)}function ue(D,_){var E=_>>5;_%=32;for(var b=D.g.length-E,A=[],M=0;M<b;M++)A[M]=0<_?D.i(M+E)>>>_|D.i(M+E+1)<<32-_:D.i(M+E);return new s(A,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,yI=IP.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,ki=IP.Integer=s}).apply(typeof EP<"u"?EP:typeof self<"u"?self:typeof window<"u"?window:{});var hm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Oi={};var _I,Q6,mc,wI,Xu,fm,EI,II,TI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof hm=="object"&&hm];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(l,h){if(h)e:{var p=r;l=l.split(".");for(var g=0;g<l.length-1;g++){var x=l[g];if(!(x in p))break e;p=p[x]}l=l[l.length-1],g=p[l],h=h(g),h!=g&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function o(l,h){l instanceof String&&(l+="");var p=0,g=!1,x={next:function(){if(!g&&p<l.length){var O=p++;return{value:h(O,l[O]),done:!1}}return g=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x}i("Array.prototype.values",function(l){return l||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function u(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,p){return l.call.apply(l.bind,arguments)}function f(l,h,p){if(!l)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,g),l.apply(h,x)}}return function(){return l.apply(h,arguments)}}function m(l,h,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function v(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),l.apply(this,g)}}function w(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(g,x,O){for(var B=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)B[Ze-2]=arguments[Ze];return h.prototype[x].apply(g,B)}}function P(l){let h=l.length;if(0<h){let p=Array(h);for(let g=0;g<h;g++)p[g]=l[g];return p}return[]}function N(l,h){for(let p=1;p<arguments.length;p++){let g=arguments[p];if(c(g)){let x=l.length||0,O=g.length||0;l.length=x+O;for(let B=0;B<O;B++)l[x+B]=g[B]}else l.push(g)}}class L{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function W(l){return/^[\s\xa0]*$/.test(l)}function Y(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function re(l){return re[" "](l),l}re[" "]=function(){};var it=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function ue(l,h,p){for(let g in l)h.call(p,l[g],g,l)}function D(l,h){for(let p in l)h.call(void 0,l[p],p,l)}function _(l){let h={};for(let p in l)h[p]=l[p];return h}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(l,h){let p,g;for(let x=1;x<arguments.length;x++){g=arguments[x];for(p in g)l[p]=g[p];for(let O=0;O<E.length;O++)p=E[O],Object.prototype.hasOwnProperty.call(g,p)&&(l[p]=g[p])}}function A(l){var h=1;l=l.split(":");let p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function M(l){a.setTimeout(()=>{throw l},0)}function I(){var l=Ev;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class hi{constructor(){this.h=this.g=null}add(h,p){let g=vl.get();g.set(h,p),this.h?this.h.next=g:this.g=g,this.h=g}}var vl=new L(()=>new RV,l=>l.reset());class RV{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let yl,_l=!1,Ev=new hi,Lb=()=>{let l=a.Promise.resolve(void 0);yl=()=>{l.then(xV)}};var xV=()=>{for(var l;l=I();){try{l.h.call(l.g)}catch(p){M(p)}var h=vl;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}_l=!1};function Ji(){this.s=this.s,this.C=this.C}Ji.prototype.s=!1,Ji.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ji.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function sn(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}sn.prototype.h=function(){this.defaultPrevented=!0};var NV=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return l}();function wl(l,h){if(sn.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,g=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(it){e:{try{re(h.nodeName);var x=!0;break e}catch{}x=!1}x||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:MV[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&wl.aa.h.call(this)}}w(wl,sn);var MV={2:"touch",3:"pen",4:"mouse"};wl.prototype.h=function(){wl.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var El="closure_listenable_"+(1e6*Math.random()|0),PV=0;function kV(l,h,p,g,x){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!g,this.ha=x,this.key=++PV,this.da=this.fa=!1}function nh(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function rh(l){this.src=l,this.g={},this.h=0}rh.prototype.add=function(l,h,p,g,x){var O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);var B=Tv(l,h,g,x);return-1<B?(h=l[B],p||(h.fa=!1)):(h=new kV(h,this.src,O,!!g,x),h.fa=p,l.push(h)),h};function Iv(l,h){var p=h.type;if(p in l.g){var g=l.g[p],x=Array.prototype.indexOf.call(g,h,void 0),O;(O=0<=x)&&Array.prototype.splice.call(g,x,1),O&&(nh(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function Tv(l,h,p,g){for(var x=0;x<l.length;++x){var O=l[x];if(!O.da&&O.listener==h&&O.capture==!!p&&O.ha==g)return x}return-1}var Cv="closure_lm_"+(1e6*Math.random()|0),bv={};function Vb(l,h,p,g,x){if(g&&g.once)return jb(l,h,p,g,x);if(Array.isArray(h)){for(var O=0;O<h.length;O++)Vb(l,h[O],p,g,x);return null}return p=Rv(p),l&&l[El]?l.K(h,p,u(g)?!!g.capture:!!g,x):Ub(l,h,p,!1,g,x)}function Ub(l,h,p,g,x,O){if(!h)throw Error("Invalid event type");var B=u(x)?!!x.capture:!!x,Ze=Sv(l);if(Ze||(l[Cv]=Ze=new rh(l)),p=Ze.add(h,p,g,B,O),p.proxy)return p;if(g=OV(),p.proxy=g,g.src=l,g.listener=p,l.addEventListener)NV||(x=B),x===void 0&&(x=!1),l.addEventListener(h.toString(),g,x);else if(l.attachEvent)l.attachEvent($b(h.toString()),g);else if(l.addListener&&l.removeListener)l.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function OV(){function l(p){return h.call(l.src,l.listener,p)}let h=FV;return l}function jb(l,h,p,g,x){if(Array.isArray(h)){for(var O=0;O<h.length;O++)jb(l,h[O],p,g,x);return null}return p=Rv(p),l&&l[El]?l.L(h,p,u(g)?!!g.capture:!!g,x):Ub(l,h,p,!0,g,x)}function Bb(l,h,p,g,x){if(Array.isArray(h))for(var O=0;O<h.length;O++)Bb(l,h[O],p,g,x);else g=u(g)?!!g.capture:!!g,p=Rv(p),l&&l[El]?(l=l.i,h=String(h).toString(),h in l.g&&(O=l.g[h],p=Tv(O,p,g,x),-1<p&&(nh(O[p]),Array.prototype.splice.call(O,p,1),O.length==0&&(delete l.g[h],l.h--)))):l&&(l=Sv(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Tv(h,p,g,x)),(p=-1<l?h[l]:null)&&Dv(p))}function Dv(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[El])Iv(h.i,l);else{var p=l.type,g=l.proxy;h.removeEventListener?h.removeEventListener(p,g,l.capture):h.detachEvent?h.detachEvent($b(p),g):h.addListener&&h.removeListener&&h.removeListener(g),(p=Sv(h))?(Iv(p,l),p.h==0&&(p.src=null,h[Cv]=null)):nh(l)}}}function $b(l){return l in bv?bv[l]:bv[l]="on"+l}function FV(l,h){if(l.da)l=!0;else{h=new wl(h,this);var p=l.listener,g=l.ha||l.src;l.fa&&Dv(l),l=p.call(g,h)}return l}function Sv(l){return l=l[Cv],l instanceof rh?l:null}var Av="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rv(l){return typeof l=="function"?l:(l[Av]||(l[Av]=function(h){return l.handleEvent(h)}),l[Av])}function an(){Ji.call(this),this.i=new rh(this),this.M=this,this.F=null}w(an,Ji),an.prototype[El]=!0,an.prototype.removeEventListener=function(l,h,p,g){Bb(this,l,h,p,g)};function _n(l,h){var p,g=l.F;if(g)for(p=[];g;g=g.F)p.push(g);if(l=l.M,g=h.type||h,typeof h=="string")h=new sn(h,l);else if(h instanceof sn)h.target=h.target||l;else{var x=h;h=new sn(g,l),b(h,x)}if(x=!0,p)for(var O=p.length-1;0<=O;O--){var B=h.g=p[O];x=ih(B,g,!0,h)&&x}if(B=h.g=l,x=ih(B,g,!0,h)&&x,x=ih(B,g,!1,h)&&x,p)for(O=0;O<p.length;O++)B=h.g=p[O],x=ih(B,g,!1,h)&&x}an.prototype.N=function(){if(an.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],g=0;g<p.length;g++)nh(p[g]);delete l.g[h],l.h--}}this.F=null},an.prototype.K=function(l,h,p,g){return this.i.add(String(l),h,!1,p,g)},an.prototype.L=function(l,h,p,g){return this.i.add(String(l),h,!0,p,g)};function ih(l,h,p,g){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var x=!0,O=0;O<h.length;++O){var B=h[O];if(B&&!B.da&&B.capture==p){var Ze=B.listener,Xt=B.ha||B.src;B.fa&&Iv(l.i,B),x=Ze.call(Xt,g)!==!1&&x}}return x&&!g.defaultPrevented}function Hb(l,h,p){if(typeof l=="function")p&&(l=m(l,p));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function Wb(l){l.g=Hb(()=>{l.g=null,l.i&&(l.i=!1,Wb(l))},l.l);let h=l.h;l.h=null,l.m.apply(null,h)}class LV extends Ji{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Wb(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Il(l){Ji.call(this),this.h=l,this.g={}}w(Il,Ji);var qb=[];function zb(l){ue(l.g,function(h,p){this.g.hasOwnProperty(p)&&Dv(h)},l),l.g={}}Il.prototype.N=function(){Il.aa.N.call(this),zb(this)},Il.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xv=a.JSON.stringify,VV=a.JSON.parse,UV=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Nv(){}Nv.prototype.h=null;function Gb(l){return l.h||(l.h=l.i())}function Kb(){}var Tl={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mv(){sn.call(this,"d")}w(Mv,sn);function Pv(){sn.call(this,"c")}w(Pv,sn);var Yo={},Yb=null;function oh(){return Yb=Yb||new an}Yo.La="serverreachability";function Qb(l){sn.call(this,Yo.La,l)}w(Qb,sn);function Cl(l){let h=oh();_n(h,new Qb(h))}Yo.STAT_EVENT="statevent";function Zb(l,h){sn.call(this,Yo.STAT_EVENT,l),this.stat=h}w(Zb,sn);function wn(l){let h=oh();_n(h,new Zb(h,l))}Yo.Ma="timingevent";function Jb(l,h){sn.call(this,Yo.Ma,l),this.size=h}w(Jb,sn);function bl(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function Dl(){this.g=!0}Dl.prototype.xa=function(){this.g=!1};function jV(l,h,p,g,x,O){l.info(function(){if(l.g)if(O)for(var B="",Ze=O.split("&"),Xt=0;Xt<Ze.length;Xt++){var $e=Ze[Xt].split("=");if(1<$e.length){var cn=$e[0];$e=$e[1];var ln=cn.split("_");B=2<=ln.length&&ln[1]=="type"?B+(cn+"="+$e+"&"):B+(cn+"=redacted&")}}else B=null;else B=O;return"XMLHTTP REQ ("+g+") [attempt "+x+"]: "+h+`
`+p+`
`+B})}function BV(l,h,p,g,x,O,B){l.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+x+"]: "+h+`
`+p+`
`+O+" "+B})}function ca(l,h,p,g){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+HV(l,p)+(g?" "+g:"")})}function $V(l,h){l.info(function(){return"TIMEOUT: "+h})}Dl.prototype.info=function(){};function HV(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var g=p[l];if(!(2>g.length)){var x=g[1];if(Array.isArray(x)&&!(1>x.length)){var O=x[0];if(O!="noop"&&O!="stop"&&O!="close")for(var B=1;B<x.length;B++)x[B]=""}}}}return xv(p)}catch{return h}}var sh={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Xb={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},kv;function ah(){}w(ah,Nv),ah.prototype.g=function(){return new XMLHttpRequest},ah.prototype.i=function(){return{}},kv=new ah;function Xi(l,h,p,g){this.j=l,this.i=h,this.l=p,this.R=g||1,this.U=new Il(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new eD}function eD(){this.i=null,this.g="",this.h=!1}var tD={},Ov={};function Fv(l,h,p){l.L=1,l.v=dh(fi(h)),l.m=p,l.P=!0,nD(l,null)}function nD(l,h){l.F=Date.now(),ch(l),l.A=fi(l.v);var p=l.A,g=l.R;Array.isArray(g)||(g=[String(g)]),gD(p.i,"t",g),l.C=0,p=l.j.J,l.h=new eD,l.g=kD(l.j,p?h:null,!l.m),0<l.O&&(l.M=new LV(m(l.Y,l,l.g),l.O)),h=l.U,p=l.g,g=l.ca;var x="readystatechange";Array.isArray(x)||(x&&(qb[0]=x.toString()),x=qb);for(var O=0;O<x.length;O++){var B=Vb(p,x[O],g||h.handleEvent,!1,h.h||h);if(!B)break;h.g[B.key]=B}h=l.H?_(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Cl(),jV(l.i,l.u,l.A,l.l,l.R,l.m)}Xi.prototype.ca=function(l){l=l.target;let h=this.M;h&&pi(l)==3?h.j():this.Y(l)},Xi.prototype.Y=function(l){try{if(l==this.g)e:{let ln=pi(this.g);var h=this.g.Ba();let da=this.g.Z();if(!(3>ln)&&(ln!=3||this.g&&(this.h.h||this.g.oa()||TD(this.g)))){this.J||ln!=4||h==7||(h==8||0>=da?Cl(3):Cl(2)),Lv(this);var p=this.g.Z();this.X=p;t:if(rD(this)){var g=TD(this.g);l="";var x=g.length,O=pi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qo(this),Sl(this);var B="";break t}this.h.i=new a.TextDecoder}for(h=0;h<x;h++)this.h.h=!0,l+=this.h.i.decode(g[h],{stream:!(O&&h==x-1)});g.length=0,this.h.g+=l,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=p==200,BV(this.i,this.u,this.A,this.l,this.R,ln,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,Xt=this.g;if((Ze=Xt.g?Xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(Ze)){var $e=Ze;break t}}$e=null}if(p=$e)ca(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vv(this,p);else{this.o=!1,this.s=3,wn(12),Qo(this),Sl(this);break e}}if(this.P){p=!0;let Tr;for(;!this.J&&this.C<B.length;)if(Tr=WV(this,B),Tr==Ov){ln==4&&(this.s=4,wn(14),p=!1),ca(this.i,this.l,null,"[Incomplete Response]");break}else if(Tr==tD){this.s=4,wn(15),ca(this.i,this.l,B,"[Invalid Chunk]"),p=!1;break}else ca(this.i,this.l,Tr,null),Vv(this,Tr);if(rD(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ln!=4||B.length!=0||this.h.h||(this.s=1,wn(16),p=!1),this.o=this.o&&p,!p)ca(this.i,this.l,B,"[Invalid Chunked Response]"),Qo(this),Sl(this);else if(0<B.length&&!this.W){this.W=!0;var cn=this.j;cn.g==this&&cn.ba&&!cn.M&&(cn.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Wv(cn),cn.M=!0,wn(11))}}else ca(this.i,this.l,B,null),Vv(this,B);ln==4&&Qo(this),this.o&&!this.J&&(ln==4?xD(this.j,this):(this.o=!1,ch(this)))}else a2(this.g),p==400&&0<B.indexOf("Unknown SID")?(this.s=3,wn(12)):(this.s=0,wn(13)),Qo(this),Sl(this)}}}catch{}finally{}};function rD(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function WV(l,h){var p=l.C,g=h.indexOf(`
`,p);return g==-1?Ov:(p=Number(h.substring(p,g)),isNaN(p)?tD:(g+=1,g+p>h.length?Ov:(h=h.slice(g,g+p),l.C=g+p,h)))}Xi.prototype.cancel=function(){this.J=!0,Qo(this)};function ch(l){l.S=Date.now()+l.I,iD(l,l.I)}function iD(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=bl(m(l.ba,l),h)}function Lv(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Xi.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?($V(this.i,this.A),this.L!=2&&(Cl(),wn(17)),Qo(this),this.s=2,Sl(this)):iD(this,this.S-l)};function Sl(l){l.j.G==0||l.J||xD(l.j,l)}function Qo(l){Lv(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,zb(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Vv(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Uv(p.h,l))){if(!l.K&&Uv(p.h,l)&&p.G==3){try{var g=p.Da.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var x=g;if(x[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)gh(p),ph(p);else break e;Hv(p),wn(18)}}else p.za=x[1],0<p.za-p.T&&37500>x[2]&&p.F&&p.v==0&&!p.C&&(p.C=bl(m(p.Za,p),6e3));if(1>=aD(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Jo(p,11)}else if((l.K||p.g==l)&&gh(p),!W(h))for(x=p.Da.g.parse(h),h=0;h<x.length;h++){let $e=x[h];if(p.T=$e[0],$e=$e[1],p.G==2)if($e[0]=="c"){p.K=$e[1],p.ia=$e[2];let cn=$e[3];cn!=null&&(p.la=cn,p.j.info("VER="+p.la));let ln=$e[4];ln!=null&&(p.Aa=ln,p.j.info("SVER="+p.Aa));let da=$e[5];da!=null&&typeof da=="number"&&0<da&&(g=1.5*da,p.L=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;let Tr=l.g;if(Tr){let yh=Tr.g?Tr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yh){var O=g.h;O.g||yh.indexOf("spdy")==-1&&yh.indexOf("quic")==-1&&yh.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(jv(O,O.h),O.h=null))}if(g.D){let qv=Tr.g?Tr.g.getResponseHeader("X-HTTP-Session-Id"):null;qv&&(g.ya=qv,ot(g.I,g.D,qv))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),g=p;var B=l;if(g.qa=PD(g,g.J?g.ia:null,g.W),B.K){cD(g.h,B);var Ze=B,Xt=g.L;Xt&&(Ze.I=Xt),Ze.B&&(Lv(Ze),ch(Ze)),g.g=B}else AD(g);0<p.i.length&&mh(p)}else $e[0]!="stop"&&$e[0]!="close"||Jo(p,7);else p.G==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?Jo(p,7):$v(p):$e[0]!="noop"&&p.l&&p.l.ta($e),p.v=0)}}Cl(4)}catch{}}var qV=class{constructor(l,h){this.g=l,this.map=h}};function oD(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sD(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function aD(l){return l.h?1:l.g?l.g.size:0}function Uv(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function jv(l,h){l.g?l.g.add(h):l.h=h}function cD(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}oD.prototype.cancel=function(){if(this.i=lD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function lD(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(let p of l.g.values())h=h.concat(p.D);return h}return P(l.i)}function zV(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],p=l.length,g=0;g<p;g++)h.push(l[g]);return h}h=[],p=0;for(g in l)h[p++]=l[g];return h}function GV(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(let g in l)h[p++]=g;return h}}}function uD(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=GV(l),g=zV(l),x=g.length,O=0;O<x;O++)h.call(void 0,g[O],p&&p[O],l)}var dD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function KV(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var g=l[p].indexOf("="),x=null;if(0<=g){var O=l[p].substring(0,g);x=l[p].substring(g+1)}else O=l[p];h(O,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function Zo(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Zo){this.h=l.h,lh(this,l.j),this.o=l.o,this.g=l.g,uh(this,l.s),this.l=l.l;var h=l.i,p=new xl;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),hD(this,p),this.m=l.m}else l&&(h=String(l).match(dD))?(this.h=!1,lh(this,h[1]||"",!0),this.o=Al(h[2]||""),this.g=Al(h[3]||"",!0),uh(this,h[4]),this.l=Al(h[5]||"",!0),hD(this,h[6]||"",!0),this.m=Al(h[7]||"")):(this.h=!1,this.i=new xl(null,this.h))}Zo.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Rl(h,fD,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Rl(h,fD,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Rl(p,p.charAt(0)=="/"?ZV:QV,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Rl(p,XV)),l.join("")};function fi(l){return new Zo(l)}function lh(l,h,p){l.j=p?Al(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function uh(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function hD(l,h,p){h instanceof xl?(l.i=h,e2(l.i,l.h)):(p||(h=Rl(h,JV)),l.i=new xl(h,l.h))}function ot(l,h,p){l.i.set(h,p)}function dh(l){return ot(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Al(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Rl(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,YV),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function YV(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var fD=/[#\/\?@]/g,QV=/[#\?:]/g,ZV=/[#\?]/g,JV=/[#\?@]/g,XV=/#/g;function xl(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function eo(l){l.g||(l.g=new Map,l.h=0,l.i&&KV(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=xl.prototype,n.add=function(l,h){eo(this),this.i=null,l=la(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function pD(l,h){eo(l),h=la(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function mD(l,h){return eo(l),h=la(l,h),l.g.has(h)}n.forEach=function(l,h){eo(this),this.g.forEach(function(p,g){p.forEach(function(x){l.call(h,x,g,this)},this)},this)},n.na=function(){eo(this);let l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let g=0;g<h.length;g++){let x=l[g];for(let O=0;O<x.length;O++)p.push(h[g])}return p},n.V=function(l){eo(this);let h=[];if(typeof l=="string")mD(this,l)&&(h=h.concat(this.g.get(la(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},n.set=function(l,h){return eo(this),this.i=null,l=la(this,l),mD(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},n.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function gD(l,h,p){pD(l,h),0<p.length&&(l.i=null,l.g.set(la(l,h),P(p)),l.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var g=h[p];let O=encodeURIComponent(String(g)),B=this.V(g);for(g=0;g<B.length;g++){var x=O;B[g]!==""&&(x+="="+encodeURIComponent(String(B[g]))),l.push(x)}}return this.i=l.join("&")};function la(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function e2(l,h){h&&!l.j&&(eo(l),l.i=null,l.g.forEach(function(p,g){var x=g.toLowerCase();g!=x&&(pD(this,g),gD(this,x,p))},l)),l.j=h}function t2(l,h){let p=new Dl;if(a.Image){let g=new Image;g.onload=v(to,p,"TestLoadImage: loaded",!0,h,g),g.onerror=v(to,p,"TestLoadImage: error",!1,h,g),g.onabort=v(to,p,"TestLoadImage: abort",!1,h,g),g.ontimeout=v(to,p,"TestLoadImage: timeout",!1,h,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=l}else h(!1)}function n2(l,h){let p=new Dl,g=new AbortController,x=setTimeout(()=>{g.abort(),to(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:g.signal}).then(O=>{clearTimeout(x),O.ok?to(p,"TestPingServer: ok",!0,h):to(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(x),to(p,"TestPingServer: error",!1,h)})}function to(l,h,p,g,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),g(p)}catch{}}function r2(){this.g=new UV}function i2(l,h,p){let g=p||"";try{uD(l,function(x,O){let B=x;u(x)&&(B=xv(x)),h.push(g+O+"="+encodeURIComponent(B))})}catch(x){throw h.push(g+"type="+encodeURIComponent("_badmap")),x}}function Nl(l){this.l=l.Ub||null,this.j=l.eb||!1}w(Nl,Nv),Nl.prototype.g=function(){return new hh(this.l,this.j)},Nl.prototype.i=function(l){return function(){return l}}({});function hh(l,h){an.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(hh,an),n=hh.prototype,n.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Pl(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ml(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Pl(this)),this.g&&(this.readyState=3,Pl(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vD(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function vD(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Ml(this):Pl(this),this.readyState==3&&vD(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,Ml(this))},n.Qa=function(l){this.g&&(this.response=l,Ml(this))},n.ga=function(){this.g&&Ml(this)};function Ml(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Pl(l)}n.setRequestHeader=function(l,h){this.u.append(l,h)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function Pl(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(hh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function yD(l){let h="";return ue(l,function(p,g){h+=g,h+=":",h+=p,h+=`\r
`}),h}function Bv(l,h,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=yD(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):ot(l,h,p))}function wt(l){an.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(wt,an);var o2=/^https?$/i,s2=["POST","PUT"];n=wt.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,h,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():kv.g(),this.v=this.o?Gb(this.o):Gb(kv),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(O){_D(this,O);return}if(l=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var x in g)p.set(x,g[x]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let O of g.keys())p.set(O,g.get(O));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),x=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(s2,h,void 0))||g||x||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[O,B]of p)this.g.setRequestHeader(O,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ID(this),this.u=!0,this.g.send(l),this.u=!1}catch(O){_D(this,O)}};function _D(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,wD(l),fh(l)}function wD(l){l.A||(l.A=!0,_n(l,"complete"),_n(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,_n(this,"complete"),_n(this,"abort"),fh(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fh(this,!0)),wt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ED(this):this.bb())},n.bb=function(){ED(this)};function ED(l){if(l.h&&typeof s<"u"&&(!l.v[1]||pi(l)!=4||l.Z()!=2)){if(l.u&&pi(l)==4)Hb(l.Ea,0,l);else if(_n(l,"readystatechange"),pi(l)==4){l.h=!1;try{let B=l.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var g;if(g=B===0){var x=String(l.D).match(dD)[1]||null;!x&&a.self&&a.self.location&&(x=a.self.location.protocol.slice(0,-1)),g=!o2.test(x?x.toLowerCase():"")}p=g}if(p)_n(l,"complete"),_n(l,"success");else{l.m=6;try{var O=2<pi(l)?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.Z()+"]",wD(l)}}finally{fh(l)}}}}function fh(l,h){if(l.g){ID(l);let p=l.g,g=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||_n(l,"ready");try{p.onreadystatechange=g}catch{}}}function ID(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function pi(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<pi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),VV(h)}};function TD(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function a2(l){let h={};l=(l.g&&2<=pi(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<l.length;g++){if(W(l[g]))continue;var p=A(l[g]);let x=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let O=h[x]||[];h[x]=O,O.push(p)}D(h,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function kl(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function CD(l){this.Aa=0,this.i=[],this.j=new Dl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=kl("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=kl("baseRetryDelayMs",5e3,l),this.cb=kl("retryDelaySeedMs",1e4,l),this.Wa=kl("forwardChannelMaxRetries",2,l),this.wa=kl("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new oD(l&&l.concurrentRequestLimit),this.Da=new r2,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=CD.prototype,n.la=8,n.G=1,n.connect=function(l,h,p,g){wn(0),this.W=l,this.H=h||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.I=PD(this,null,this.W),mh(this)};function $v(l){if(bD(l),l.G==3){var h=l.U++,p=fi(l.I);if(ot(p,"SID",l.K),ot(p,"RID",h),ot(p,"TYPE","terminate"),Ol(l,p),h=new Xi(l,l.j,h),h.L=2,h.v=dh(fi(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=kD(h.j,null),h.g.ea(h.v)),h.F=Date.now(),ch(h)}MD(l)}function ph(l){l.g&&(Wv(l),l.g.cancel(),l.g=null)}function bD(l){ph(l),l.u&&(a.clearTimeout(l.u),l.u=null),gh(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function mh(l){if(!sD(l.h)&&!l.s){l.s=!0;var h=l.Ga;yl||Lb(),_l||(yl(),_l=!0),Ev.add(h,l),l.B=0}}function c2(l,h){return aD(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=bl(m(l.Ga,l,h),ND(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let x=new Xi(this,this.j,l),O=this.o;if(this.S&&(O?(O=_(O),b(O,this.S)):O=this.S),this.m!==null||this.O||(x.H=O,O=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=SD(this,x,h),p=fi(this.I),ot(p,"RID",l),ot(p,"CVER",22),this.D&&ot(p,"X-HTTP-Session-Id",this.D),Ol(this,p),O&&(this.O?h="headers="+encodeURIComponent(String(yD(O)))+"&"+h:this.m&&Bv(p,this.m,O)),jv(this.h,x),this.Ua&&ot(p,"TYPE","init"),this.P?(ot(p,"$req",h),ot(p,"SID","null"),x.T=!0,Fv(x,p,null)):Fv(x,p,h),this.G=2}}else this.G==3&&(l?DD(this,l):this.i.length==0||sD(this.h)||DD(this))};function DD(l,h){var p;h?p=h.l:p=l.U++;let g=fi(l.I);ot(g,"SID",l.K),ot(g,"RID",p),ot(g,"AID",l.T),Ol(l,g),l.m&&l.o&&Bv(g,l.m,l.o),p=new Xi(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=SD(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),jv(l.h,p),Fv(p,g,h)}function Ol(l,h){l.H&&ue(l.H,function(p,g){ot(h,g,p)}),l.l&&uD({},function(p,g){ot(h,g,p)})}function SD(l,h,p){p=Math.min(l.i.length,p);var g=l.l?m(l.l.Na,l.l,l):null;e:{var x=l.i;let O=-1;for(;;){let B=["count="+p];O==-1?0<p?(O=x[0].g,B.push("ofs="+O)):O=0:B.push("ofs="+O);let Ze=!0;for(let Xt=0;Xt<p;Xt++){let $e=x[Xt].g,cn=x[Xt].map;if($e-=O,0>$e)O=Math.max(0,x[Xt].g-100),Ze=!1;else try{i2(cn,B,"req"+$e+"_")}catch{g&&g(cn)}}if(Ze){g=B.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,g}function AD(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;yl||Lb(),_l||(yl(),_l=!0),Ev.add(h,l),l.v=0}}function Hv(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=bl(m(l.Fa,l),ND(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,RD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=bl(m(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wn(10),ph(this),RD(this))};function Wv(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function RD(l){l.g=new Xi(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=fi(l.qa);ot(h,"RID","rpc"),ot(h,"SID",l.K),ot(h,"AID",l.T),ot(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&ot(h,"TO",l.ja),ot(h,"TYPE","xmlhttp"),Ol(l,h),l.m&&l.o&&Bv(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=dh(fi(h)),p.m=null,p.P=!0,nD(p,l)}n.Za=function(){this.C!=null&&(this.C=null,ph(this),Hv(this),wn(19))};function gh(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function xD(l,h){var p=null;if(l.g==h){gh(l),Wv(l),l.g=null;var g=2}else if(Uv(l.h,h))p=h.D,cD(l.h,h),g=1;else return;if(l.G!=0){if(h.o)if(g==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var x=l.B;g=oh(),_n(g,new Jb(g,p)),mh(l)}else AD(l);else if(x=h.s,x==3||x==0&&0<h.X||!(g==1&&c2(l,h)||g==2&&Hv(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),x){case 1:Jo(l,5);break;case 4:Jo(l,10);break;case 3:Jo(l,6);break;default:Jo(l,2)}}}function ND(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function Jo(l,h){if(l.j.info("Error code "+h),h==2){var p=m(l.fb,l),g=l.Xa;let x=!g;g=new Zo(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||lh(g,"https"),dh(g),x?t2(g.toString(),p):n2(g.toString(),p)}else wn(2);l.G=0,l.l&&l.l.sa(h),MD(l),bD(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),wn(2)):(this.j.info("Failed to ping google.com"),wn(1))};function MD(l){if(l.G=0,l.ka=[],l.l){let h=lD(l.h);(h.length!=0||l.i.length!=0)&&(N(l.ka,h),N(l.ka,l.i),l.h.i.length=0,P(l.i),l.i.length=0),l.l.ra()}}function PD(l,h,p){var g=p instanceof Zo?fi(p):new Zo(p);if(g.g!="")h&&(g.g=h+"."+g.g),uh(g,g.s);else{var x=a.location;g=x.protocol,h=h?h+"."+x.hostname:x.hostname,x=+x.port;var O=new Zo(null);g&&lh(O,g),h&&(O.g=h),x&&uh(O,x),p&&(O.l=p),g=O}return p=l.D,h=l.ya,p&&h&&ot(g,p,h),ot(g,"VER",l.la),Ol(l,g),g}function kD(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new wt(new Nl({eb:p})):new wt(l.pa),h.Ha(l.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function OD(){}n=OD.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function vh(){}vh.prototype.g=function(l,h){return new zn(l,h)};function zn(l,h){an.call(this),this.g=new CD(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!W(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!W(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new ua(this)}w(zn,an),zn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zn.prototype.close=function(){$v(this.g)},zn.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=xv(l),l=p);h.i.push(new qV(h.Ya++,l)),h.G==3&&mh(h)},zn.prototype.N=function(){this.g.l=null,delete this.j,$v(this.g),delete this.g,zn.aa.N.call(this)};function FD(l){Mv.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(let p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}w(FD,Mv);function LD(){Pv.call(this),this.status=1}w(LD,Pv);function ua(l){this.g=l}w(ua,OD),ua.prototype.ua=function(){_n(this.g,"a")},ua.prototype.ta=function(l){_n(this.g,new FD(l))},ua.prototype.sa=function(l){_n(this.g,new LD)},ua.prototype.ra=function(){_n(this.g,"b")},vh.prototype.createWebChannel=vh.prototype.g,zn.prototype.send=zn.prototype.o,zn.prototype.open=zn.prototype.m,zn.prototype.close=zn.prototype.close,TI=Oi.createWebChannelTransport=function(){return new vh},II=Oi.getStatEventTarget=function(){return oh()},EI=Oi.Event=Yo,fm=Oi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},sh.NO_ERROR=0,sh.TIMEOUT=8,sh.HTTP_ERROR=6,Xu=Oi.ErrorCode=sh,Xb.COMPLETE="complete",wI=Oi.EventType=Xb,Kb.EventType=Tl,Tl.OPEN="a",Tl.CLOSE="b",Tl.ERROR="c",Tl.MESSAGE="d",an.prototype.listen=an.prototype.K,mc=Oi.WebChannel=Kb,Q6=Oi.FetchXmlHttpFactory=Nl,wt.prototype.listenOnce=wt.prototype.L,wt.prototype.getLastError=wt.prototype.Ka,wt.prototype.getLastErrorCode=wt.prototype.Ba,wt.prototype.getStatus=wt.prototype.Z,wt.prototype.getResponseJson=wt.prototype.Oa,wt.prototype.getResponseText=wt.prototype.oa,wt.prototype.send=wt.prototype.ea,wt.prototype.setWithCredentials=wt.prototype.Ha,_I=Oi.XhrIo=wt}).apply(typeof hm<"u"?hm:typeof self<"u"?self:typeof window<"u"?window:{});var TP="@firebase/firestore";var Yt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");var Oc="11.2.0";var Us=new ir("@firebase/firestore");function gc(){return Us.logLevel}function G(n,...e){if(Us.logLevel<=en.DEBUG){let t=e.map(c0);Us.debug(`Firestore (${Oc}): ${n}`,...t)}}function Fi(n,...e){if(Us.logLevel<=en.ERROR){let t=e.map(c0);Us.error(`Firestore (${Oc}): ${n}`,...t)}}function Tc(n,...e){if(Us.logLevel<=en.WARN){let t=e.map(c0);Us.warn(`Firestore (${Oc}): ${n}`,...t)}}function c0(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ae(n="Unexpected state"){let e=`FIRESTORE (${Oc}) INTERNAL ASSERTION FAILED: `+n;throw Fi(e),new Error(e)}function Ge(n,e){n||ae()}function ve(n,e){return n}var F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},K=class extends Gn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ii=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var wm=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},AI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Yt.UNAUTHENTICATED))}shutdown(){}},RI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},xI=class{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ge(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new ii;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ii,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>y(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ii)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ge(typeof r.accessToken=="string"),new wm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string"),new Yt(e)}},NI=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}},MI=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new NI(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},PI=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},kI=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ge(this.o===void 0);let r=o=>{o.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,G("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ge(typeof t.token=="string"),this.R=t.token,new PI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Z6(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Em=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Z6(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function Oe(n,e){return n<e?-1:n>e?1:0}function Cc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Nt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var we=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Nt(0,0))}static max(){return new n(new Nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Im=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ae(),r===void 0?r=e.length-t:r>e.length-t&&ae(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Math.sign(e.length-t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ki.fromString(e.substring(4,e.length-2))}},vt=class n extends Im{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new K(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},J6=/^[_a-zA-Z][_a-zA-Z0-9]*$/,er=class n extends Im{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return J6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new K(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new K(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new K(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new K(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ne=class n{constructor(e){this.path=e}static fromPath(e){return new n(vt.fromString(e))}static fromName(e){return new n(vt.fromString(e).popFirst(5))}static empty(){return new n(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return vt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new vt(e.slice()))}};var OI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};OI.UNKNOWN_ID=-1;function X6(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=we.fromTimestamp(r===1e9?new Nt(t+1,0):new Nt(t,r));return new js(i,ne.empty(),e)}function e5(n){return new js(n.readTime,n.key,-1)}var js=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(we.min(),ne.empty(),-1)}static max(){return new n(we.max(),ne.empty(),-1)}};function t5(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ne.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}var n5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",FI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Fc(n){return y(this,null,function*(){if(n.code!==F.FAILED_PRECONDITION||n.message!==n5)throw n;G("LocalStore","Unexpectedly lost primary lease")})}var V=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;t(e[u]).next(d=>{s[u]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function r5(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Lc(n){return n.name==="IndexedDbTransactionError"}var l0=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function tg(n){return n==null}function od(n){return n===0&&1/n==-1/0}function i5(n){return typeof n=="number"&&Number.isInteger(n)&&!od(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function o5(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=CP(e)),e=s5(n.get(t),e);return CP(e)}function s5(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function CP(n){return n+""}var a5=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Cue=[...a5,"documentOverlays"],c5=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],l5=c5,u5=[...l5,"indexConfiguration","indexState","indexEntries"];var bue=[...u5,"globals"];function bP(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gs(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ok(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Dt=class n{constructor(e,t){this.comparator=e,this.root=t||oi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,oi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,oi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wc(this.root,e,this.comparator,!1)}getReverseIterator(){return new wc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wc(this.root,e,this.comparator,!0)}},wc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},oi=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();let e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}};oi.EMPTY=null,oi.RED=!0,oi.BLACK=!1;oi.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,t,r,i,o){return this}insert(e,t,r){return new oi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Qt=class n{constructor(e){this.comparator=e,this.data=new Dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Tm(this.data.getIterator())}getIteratorFrom(e){return new Tm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Tm=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var ri=class n{constructor(e){this.fields=e,e.sort(er.comparator)}static empty(){return new n([])}unionWith(e){let t=new Qt(er.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Cc(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Cm=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var pn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Cm("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};pn.EMPTY_BYTE_STRING=new pn("");var d5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Li(n){if(Ge(!!n),typeof n=="string"){let e=0,t=d5.exec(n);if(Ge(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ht(n.seconds),nanos:ht(n.nanos)}}function ht(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Vi(n){return typeof n=="string"?pn.fromBase64String(n):pn.fromUint8Array(n)}function u0(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function ng(n){let e=n.mapValue.fields.__previous_value__;return u0(e)?ng(e):e}function sd(n){let e=Li(n.mapValue.fields.__local_write_time__.timestampValue);return new Nt(e.seconds,e.nanos)}var LI=class{constructor(e,t,r,i,o,s,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},bm=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var pm={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Vo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?u0(n)?4:ak(n)?9007199254740991:sk(n)?10:11:ae()}function ci(n,e){if(n===e)return!0;let t=Vo(n);if(t!==Vo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return sd(n).isEqual(sd(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Li(i.timestampValue),a=Li(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Vi(i.bytesValue).isEqual(Vi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return ht(i.geoPointValue.latitude)===ht(o.geoPointValue.latitude)&&ht(i.geoPointValue.longitude)===ht(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ht(i.integerValue)===ht(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ht(i.doubleValue),a=ht(o.doubleValue);return s===a?od(s)===od(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Cc(n.arrayValue.values||[],e.arrayValue.values||[],ci);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(bP(s)!==bP(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!ci(s[c],a[c])))return!1;return!0}(n,e);default:return ae()}}function ad(n,e){return(n.values||[]).find(t=>ci(t,e))!==void 0}function bc(n,e){if(n===e)return 0;let t=Vo(n),r=Vo(e);if(t!==r)return Oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=ht(o.integerValue||o.doubleValue),c=ht(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return DP(n.timestampValue,e.timestampValue);case 4:return DP(sd(n),sd(e));case 5:return Oe(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Vi(o),c=Vi(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let d=Oe(a[u],c[u]);if(d!==0)return d}return Oe(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Oe(ht(o.latitude),ht(s.latitude));return a!==0?a:Oe(ht(o.longitude),ht(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return SP(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,d;let f=o.fields||{},m=s.fields||{},v=(a=f.value)===null||a===void 0?void 0:a.arrayValue,w=(c=m.value)===null||c===void 0?void 0:c.arrayValue,P=Oe(((u=v?.values)===null||u===void 0?void 0:u.length)||0,((d=w?.values)===null||d===void 0?void 0:d.length)||0);return P!==0?P:SP(v,w)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===pm.mapValue&&s===pm.mapValue)return 0;if(o===pm.mapValue)return 1;if(s===pm.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let m=Oe(c[f],d[f]);if(m!==0)return m;let v=bc(a[c[f]],u[d[f]]);if(v!==0)return v}return Oe(c.length,d.length)}(n.mapValue,e.mapValue);default:throw ae()}}function DP(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);let t=Li(n),r=Li(e),i=Oe(t.seconds,r.seconds);return i!==0?i:Oe(t.nanos,r.nanos)}function SP(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=bc(t[i],r[i]);if(o)return o}return Oe(t.length,r.length)}function Dc(n){return VI(n)}function VI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Li(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Vi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ne.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=VI(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${VI(t.fields[s])}`;return i+"}"}(n.mapValue):ae()}function vm(n){switch(Vo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=ng(n);return e?16+vm(e):16;case 5:return 2*n.stringValue.length;case 6:return Vi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+vm(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Gs(r.fields,(o,s)=>{i+=o.length+vm(s)}),i}(n.mapValue);default:throw ae()}}function AP(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function UI(n){return!!n&&"integerValue"in n}function d0(n){return!!n&&"arrayValue"in n}function RP(n){return!!n&&"nullValue"in n}function xP(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ym(n){return!!n&&"mapValue"in n}function sk(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function td(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Gs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=td(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=td(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ak(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Vr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ym(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=td(t)}setAll(e){let t=er.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=td(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());ym(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ci(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ym(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Gs(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(td(this.value))}};function ck(n){let e=[];return Gs(n.fields,(t,r)=>{let i=new er([t]);if(ym(r)){let o=ck(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new ri(e)}var Ur=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,we.min(),we.min(),we.min(),Vr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,we.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,we.min(),we.min(),Vr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,we.min(),we.min(),Vr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Sc=class{constructor(e,t){this.position=e,this.inclusive=t}};function NP(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=ne.comparator(ne.fromName(s.referenceValue),t.key):r=bc(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function MP(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ci(n.position[t],e.position[t]))return!1;return!0}var Ac=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function h5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Dm=class{},Ut=class n extends Dm{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new BI(e,t,r):t==="array-contains"?new WI(e,r):t==="in"?new qI(e,r):t==="not-in"?new zI(e,r):t==="array-contains-any"?new GI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new $I(e,r):new HI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(bc(t,this.value)):t!==null&&Vo(this.value)===Vo(t)&&this.matchesComparison(bc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},jr=class n extends Dm{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return lk(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function lk(n){return n.op==="and"}function uk(n){return f5(n)&&lk(n)}function f5(n){for(let e of n.filters)if(e instanceof jr)return!1;return!0}function jI(n){if(n instanceof Ut)return n.field.canonicalString()+n.op.toString()+Dc(n.value);if(uk(n))return n.filters.map(e=>jI(e)).join(",");{let e=n.filters.map(t=>jI(t)).join(",");return`${n.op}(${e})`}}function dk(n,e){return n instanceof Ut?function(r,i){return i instanceof Ut&&r.op===i.op&&r.field.isEqual(i.field)&&ci(r.value,i.value)}(n,e):n instanceof jr?function(r,i){return i instanceof jr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&dk(s,i.filters[a]),!0):!1}(n,e):void ae()}function hk(n){return n instanceof Ut?function(t){return`${t.field.canonicalString()} ${t.op} ${Dc(t.value)}`}(n):n instanceof jr?function(t){return t.op.toString()+" {"+t.getFilters().map(hk).join(" ,")+"}"}(n):"Filter"}var BI=class extends Ut{constructor(e,t,r){super(e,t,r),this.key=ne.fromName(r.referenceValue)}matches(e){let t=ne.comparator(e.key,this.key);return this.matchesComparison(t)}},$I=class extends Ut{constructor(e,t){super(e,"in",t),this.keys=fk("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},HI=class extends Ut{constructor(e,t){super(e,"not-in",t),this.keys=fk("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function fk(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ne.fromName(r.referenceValue))}var WI=class extends Ut{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return d0(t)&&ad(t.arrayValue,this.value)}},qI=class extends Ut{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ad(this.value.arrayValue,t)}},zI=class extends Ut{constructor(e,t){super(e,"not-in",t)}matches(e){if(ad(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!ad(this.value.arrayValue,t)}},GI=class extends Ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!d0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ad(this.value.arrayValue,r))}};var KI=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function PP(n,e=null,t=[],r=[],i=null,o=null,s=null){return new KI(n,e,t,r,i,o,s)}function h0(n){let e=ve(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>jI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),tg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Dc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Dc(r)).join(",")),e.ue=t}return e.ue}function f0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!h5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!dk(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!MP(n.startAt,e.startAt)&&MP(n.endAt,e.endAt)}function YI(n){return ne.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Bs=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function p5(n,e,t,r,i,o,s,a){return new Bs(n,e,t,r,i,o,s,a)}function p0(n){return new Bs(n)}function kP(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function pk(n){return n.collectionGroup!==null}function nd(n){let e=ve(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Qt(er.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Ac(o,r))}),t.has(er.keyField().canonicalString())||e.ce.push(new Ac(er.keyField(),r))}return e.ce}function si(n){let e=ve(n);return e.le||(e.le=m5(e,nd(n))),e.le}function m5(n,e){if(n.limitType==="F")return PP(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ac(i.field,o)});let t=n.endAt?new Sc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Sc(n.startAt.position,n.startAt.inclusive):null;return PP(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function QI(n,e){let t=n.filters.concat([e]);return new Bs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ZI(n,e,t){return new Bs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rg(n,e){return f0(si(n),si(e))&&n.limitType===e.limitType}function mk(n){return`${h0(si(n))}|lt:${n.limitType}`}function vc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>hk(i)).join(", ")}]`),tg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Dc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Dc(i)).join(",")),`Target(${r})`}(si(n))}; limitType=${n.limitType})`}function ig(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ne.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of nd(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=NP(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,nd(r),i)||r.endAt&&!function(s,a,c){let u=NP(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,nd(r),i))}(n,e)}function g5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gk(n){return(e,t)=>{let r=!1;for(let i of nd(n)){let o=v5(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function v5(n,e,t){let r=n.field.isKeyField()?ne.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?bc(c,u):ae()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}var Ui=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gs(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return ok(this.inner)}size(){return this.innerSize}};var y5=new Dt(ne.comparator);function ji(){return y5}var vk=new Dt(ne.comparator);function ed(...n){let e=vk;for(let t of n)e=e.insert(t.key,t);return e}function yk(n){let e=vk;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Os(){return rd()}function _k(){return rd()}function rd(){return new Ui(n=>n.toString(),(n,e)=>n.isEqual(e))}var _5=new Dt(ne.comparator),w5=new Qt(ne.comparator);function Pe(...n){let e=w5;for(let t of n)e=e.add(t);return e}var E5=new Qt(Oe);function I5(){return E5}function m0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:od(e)?"-0":e}}function wk(n){return{integerValue:""+n}}function T5(n,e){return i5(e)?wk(e):m0(n,e)}var Rc=class{constructor(){this._=void 0}};function C5(n,e,t){return n instanceof xc?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&u0(o)&&(o=ng(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof $s?Ik(n,e):n instanceof Hs?Tk(n,e):function(i,o){let s=Ek(i,o),a=OP(s)+OP(i.Pe);return UI(s)&&UI(i.Pe)?wk(a):m0(i.serializer,a)}(n,e)}function b5(n,e,t){return n instanceof $s?Ik(n,e):n instanceof Hs?Tk(n,e):t}function Ek(n,e){return n instanceof Nc?function(r){return UI(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var xc=class extends Rc{},$s=class extends Rc{constructor(e){super(),this.elements=e}};function Ik(n,e){let t=Ck(e);for(let r of n.elements)t.some(i=>ci(i,r))||t.push(r);return{arrayValue:{values:t}}}var Hs=class extends Rc{constructor(e){super(),this.elements=e}};function Tk(n,e){let t=Ck(e);for(let r of n.elements)t=t.filter(i=>!ci(i,r));return{arrayValue:{values:t}}}var Nc=class extends Rc{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function OP(n){return ht(n.integerValue||n.doubleValue)}function Ck(n){return d0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function D5(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof $s&&i instanceof $s||r instanceof Hs&&i instanceof Hs?Cc(r.elements,i.elements,ci):r instanceof Nc&&i instanceof Nc?ci(r.Pe,i.Pe):r instanceof xc&&i instanceof xc}(n.transform,e.transform)}var JI=class{constructor(e,t){this.version=e,this.transformResults=t}},Vs=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function _m(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Mc=class{};function bk(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Sm(n.key,Vs.none()):new Ws(n.key,n.data,Vs.none());{let t=n.data,r=Vr.empty(),i=new Qt(er.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Bi(n.key,r,new ri(i.toArray()),Vs.none())}}function S5(n,e,t){n instanceof Ws?function(i,o,s){let a=i.value.clone(),c=LP(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Bi?function(i,o,s){if(!_m(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=LP(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(Dk(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function id(n,e,t,r){return n instanceof Ws?function(o,s,a,c){if(!_m(o.precondition,s))return a;let u=o.value.clone(),d=VP(o.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Bi?function(o,s,a,c){if(!_m(o.precondition,s))return a;let u=VP(o.fieldTransforms,c,s),d=s.data;return d.setAll(Dk(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return _m(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function A5(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Ek(r.transform,i||null);o!=null&&(t===null&&(t=Vr.empty()),t.set(r.field,o))}return t||null}function FP(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Cc(r,i,(o,s)=>D5(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ws=class extends Mc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Bi=class extends Mc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Dk(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function LP(n,e,t){let r=new Map;Ge(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,b5(s,a,t[i]))}return r}function VP(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,C5(o,s,e))}return r}var Sm=class extends Mc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},XI=class extends Mc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var eT=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&S5(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=id(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=id(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=_k();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=bk(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(we.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pe())}isEqual(e){return this.batchId===e.batchId&&Cc(this.mutations,e.mutations,(t,r)=>FP(t,r))&&Cc(this.baseMutations,e.baseMutations,(t,r)=>FP(t,r))}},tT=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ge(e.mutations.length===r.length);let i=function(){return _5}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var nT=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var rT=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Lt,Ue;function R5(n){switch(n){default:return ae();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function Sk(n){if(n===void 0)return Fi("GRPC error has no .code"),F.UNKNOWN;switch(n){case Lt.OK:return F.OK;case Lt.CANCELLED:return F.CANCELLED;case Lt.UNKNOWN:return F.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return F.INTERNAL;case Lt.UNAVAILABLE:return F.UNAVAILABLE;case Lt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Lt.NOT_FOUND:return F.NOT_FOUND;case Lt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Lt.ABORTED:return F.ABORTED;case Lt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Lt.DATA_LOSS:return F.DATA_LOSS;default:return ae()}}(Ue=Lt||(Lt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";var UP=null;function x5(){return new TextEncoder}var N5=new ki([4294967295,4294967295],0);function jP(n){let e=x5().encode(n),t=new yI;return t.update(e),new Uint8Array(t.digest())}function BP(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ki([t,r],0),new ki([i,o],0)]}var iT=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Fs(`Invalid padding: ${t}`);if(r<0)throw new Fs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fs(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Fs(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=ki.fromNumber(this.Te)}de(e,t,r){let i=e.add(t.multiply(ki.fromNumber(r)));return i.compare(N5)===1&&(i=new ki([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let t=jP(e),[r,i]=BP(t);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);if(!this.Ee(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;let t=jP(e),[r,i]=BP(t);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Fs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Am=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,cd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(we.min(),i,new Dt(Oe),ji(),Pe())}},cd=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Pe(),Pe(),Pe())}};var Ec=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Rm=class{constructor(e,t){this.targetId=e,this.me=t}},xm=class{constructor(e,t,r=pn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Nm=class{constructor(){this.fe=0,this.ge=$P(),this.pe=pn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Pe(),t=Pe(),r=Pe();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ae()}}),new cd(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=$P()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ge(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},oT=class{constructor(e){this.Be=e,this.Le=new Map,this.ke=ji(),this.qe=mm(),this.Qe=mm(),this.Ke=new Dt(Oe)}$e(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{let r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Le.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){let t=e.targetId,r=e.me.count,i=this.Ye(t);if(i){let o=i.target;if(YI(o))if(r===0){let s=new ne(o.path);this.We(t,s,Ur.newNoDocument(s,we.min()))}else Ge(r===1);else{let s=this.Ze(t);if(s!==r){let a=this.Xe(e),c=a?this.et(a,e,s):1;if(c!==0){this.He(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,u)}UP?.tt(function(d,f,m,v,w){var P,N,L,W,Y,re;let it={localCacheCount:d,existenceFilterCount:f.count,databaseId:m.database,projectId:m.projectId},ue=f.unchangedNames;return ue&&(it.bloomFilter={applied:w===0,hashCount:(P=ue?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(W=(L=(N=ue?.bits)===null||N===void 0?void 0:N.bitmap)===null||L===void 0?void 0:L.length)!==null&&W!==void 0?W:0,padding:(re=(Y=ue?.bits)===null||Y===void 0?void 0:Y.padding)!==null&&re!==void 0?re:0,mightContain:D=>{var _;return(_=v?.mightContain(D))!==null&&_!==void 0&&_}}),it}(s,e.me,this.Be.nt(),a,c))}}}}Xe(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Vi(r).toUint8Array()}catch(c){if(c instanceof Cm)return Tc("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new iT(s,i,o)}catch(c){return Tc(c instanceof Fs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){let r=this.Be.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Be.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(t,o,null),i++)}),i}it(e){let t=new Map;this.Le.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&YI(a.target)){let c=new ne(a.target.path);this.st(c).has(s)||this.ot(s,c)||this.We(s,c,Ur.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=Pe();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.Ye(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Am(e,t,this.Ke,this.ke,r);return this.ke=ji(),this.qe=mm(),this.Qe=mm(),this.Ke=new Dt(Oe),i}Ue(e,t){if(!this.je(e))return;let r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;let i=this.ze(e);this.ot(e,t)?i.Fe(t,1):i.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Le.delete(e)}Ze(e){let t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Le.get(e);return t||(t=new Nm,this.Le.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new Qt(Oe),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Qt(Oe),this.qe=this.qe.insert(e,t)),t}je(e){let t=this.Ye(e)!==null;return t||G("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){let t=this.Le.get(e);return t&&t.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new Nm),this.Be.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}};function mm(){return new Dt(ne.comparator)}function $P(){return new Dt(ne.comparator)}var M5={asc:"ASCENDING",desc:"DESCENDING"},P5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},k5={and:"AND",or:"OR"},sT=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function aT(n,e){return n.useProto3Json||tg(e)?e:{value:e}}function Mm(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ak(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function O5(n,e){return Mm(n,e.toTimestamp())}function ai(n){return Ge(!!n),we.fromTimestamp(function(t){let r=Li(t);return new Nt(r.seconds,r.nanos)}(n))}function g0(n,e){return cT(n,e).canonicalString()}function cT(n,e){let t=function(i){return new vt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Rk(n){let e=vt.fromString(n);return Ge(kk(e)),e}function lT(n,e){return g0(n.databaseId,e.path)}function CI(n,e){let t=Rk(e);if(t.get(1)!==n.databaseId.projectId)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ne(Nk(t))}function xk(n,e){return g0(n.databaseId,e)}function F5(n){let e=Rk(n);return e.length===4?vt.emptyPath():Nk(e)}function uT(n){return new vt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Nk(n){return Ge(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function HP(n,e,t){return{name:lT(n,e),fields:t.value.mapValue.fields}}function L5(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(Ge(d===void 0||typeof d=="string"),pn.fromBase64String(d||"")):(Ge(d===void 0||d instanceof Buffer||d instanceof Uint8Array),pn.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let d=u.code===void 0?F.UNKNOWN:Sk(u.code);return new K(d,u.message||"")}(s);t=new xm(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=CI(n,r.document.name),o=ai(r.document.updateTime),s=r.document.createTime?ai(r.document.createTime):we.min(),a=new Vr({mapValue:{fields:r.document.fields}}),c=Ur.newFoundDocument(i,o,s,a),u=r.targetIds||[],d=r.removedTargetIds||[];t=new Ec(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=CI(n,r.document),o=r.readTime?ai(r.readTime):we.min(),s=Ur.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Ec([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=CI(n,r.document),o=r.removedTargetIds||[];t=new Ec([],o,i,null)}else{if(!("filter"in e))return ae();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new rT(i,o),a=r.targetId;t=new Rm(a,s)}}return t}function V5(n,e){let t;if(e instanceof Ws)t={update:HP(n,e.key,e.value)};else if(e instanceof Sm)t={delete:lT(n,e.key)};else if(e instanceof Bi)t={update:HP(n,e.key,e.data),updateMask:G5(e.fieldMask)};else{if(!(e instanceof XI))return ae();t={verify:lT(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof xc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof $s)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Hs)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Nc)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw ae()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:O5(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ae()}(n,e.precondition)),t}function U5(n,e){return n&&n.length>0?(Ge(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?ai(i.updateTime):ai(o);return s.isEqual(we.min())&&(s=ai(o)),new JI(s,i.transformResults||[])}(t,e))):[]}function j5(n,e){return{documents:[xk(n,e.path)]}}function B5(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=xk(n,i);let o=function(u){if(u.length!==0)return Pk(jr.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:yc(m.field),direction:W5(m.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=aT(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ct:t,parent:i}}function $5(n){let e=F5(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ge(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(f){let m=Mk(f);return m instanceof jr&&uk(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(m=>function(w){return new Ac(_c(w.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,tg(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(f){let m=!!f.before,v=f.values||[];return new Sc(v,m)}(t.startAt));let u=null;return t.endAt&&(u=function(f){let m=!f.before,v=f.values||[];return new Sc(v,m)}(t.endAt)),p5(e,i,s,o,a,"F",c,u)}function H5(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Mk(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=_c(t.unaryFilter.field);return Ut.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=_c(t.unaryFilter.field);return Ut.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=_c(t.unaryFilter.field);return Ut.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=_c(t.unaryFilter.field);return Ut.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(n):n.fieldFilter!==void 0?function(t){return Ut.create(_c(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return jr.create(t.compositeFilter.filters.map(r=>Mk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae()}}(t.compositeFilter.op))}(n):ae()}function W5(n){return M5[n]}function q5(n){return P5[n]}function z5(n){return k5[n]}function yc(n){return{fieldPath:n.canonicalString()}}function _c(n){return er.fromServerFormat(n.fieldPath)}function Pk(n){return n instanceof Ut?function(t){if(t.op==="=="){if(xP(t.value))return{unaryFilter:{field:yc(t.field),op:"IS_NAN"}};if(RP(t.value))return{unaryFilter:{field:yc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(xP(t.value))return{unaryFilter:{field:yc(t.field),op:"IS_NOT_NAN"}};if(RP(t.value))return{unaryFilter:{field:yc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yc(t.field),op:q5(t.op),value:t.value}}}(n):n instanceof jr?function(t){let r=t.getFilters().map(i=>Pk(i));return r.length===1?r[0]:{compositeFilter:{op:z5(t.op),filters:r}}}(n):ae()}function G5(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function kk(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ld=class n{constructor(e,t,r,i,o=we.min(),s=we.min(),a=pn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var dT=class{constructor(e){this.ht=e}};function K5(n){let e=$5({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ZI(e,e.limit,"L"):e}var Pm=class{constructor(){}dt(e,t){this.Et(e,t),t.At()}Et(e,t){if("nullValue"in e)this.Rt(t,5);else if("booleanValue"in e)this.Rt(t,10),t.Vt(e.booleanValue?1:0);else if("integerValue"in e)this.Rt(t,15),t.Vt(ht(e.integerValue));else if("doubleValue"in e){let r=ht(e.doubleValue);isNaN(r)?this.Rt(t,13):(this.Rt(t,15),od(r)?t.Vt(0):t.Vt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Rt(t,20),typeof r=="string"&&(r=Li(r)),t.ft(`${r.seconds||""}`),t.Vt(r.nanos||0)}else if("stringValue"in e)this.gt(e.stringValue,t),this.yt(t);else if("bytesValue"in e)this.Rt(t,30),t.wt(Vi(e.bytesValue)),this.yt(t);else if("referenceValue"in e)this.St(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Rt(t,45),t.Vt(r.latitude||0),t.Vt(r.longitude||0)}else"mapValue"in e?ak(e)?this.Rt(t,Number.MAX_SAFE_INTEGER):sk(e)?this.bt(e.mapValue,t):(this.Dt(e.mapValue,t),this.yt(t)):"arrayValue"in e?(this.vt(e.arrayValue,t),this.yt(t)):ae()}gt(e,t){this.Rt(t,25),this.Ct(e,t)}Ct(e,t){t.ft(e)}Dt(e,t){let r=e.fields||{};this.Rt(t,55);for(let i of Object.keys(r))this.gt(i,t),this.Et(r[i],t)}bt(e,t){var r,i;let o=e.fields||{};this.Rt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Rt(t,15),t.Vt(ht(a)),this.gt(s,t),this.Et(o[s],t)}vt(e,t){let r=e.values||[];this.Rt(t,50);for(let i of r)this.Et(i,t)}St(e,t){this.Rt(t,37),ne.fromName(e).path.forEach(r=>{this.Rt(t,60),this.Ct(r,t)})}Rt(e,t){e.Vt(t)}yt(e){e.Vt(2)}};Pm.Ft=new Pm;var hT=class{constructor(){this.ln=new fT}addToCollectionParentIndex(e,t){return this.ln.add(t),V.resolve()}getCollectionParents(e,t){return V.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return V.resolve()}deleteFieldIndex(e,t){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,t){return V.resolve()}getDocumentsMatchingTarget(e,t){return V.resolve(null)}getIndexType(e,t){return V.resolve(0)}getFieldIndexes(e,t){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,t){return V.resolve(js.min())}getMinOffsetFromCollectionGroup(e,t){return V.resolve(js.min())}updateCollectionGroup(e,t,r){return V.resolve()}updateIndexEntries(e,t){return V.resolve()}},fT=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Qt(vt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Qt(vt.comparator)).toArray()}};var Sue=new Uint8Array(0);var WP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};mr.DEFAULT_COLLECTION_PERCENTILE=10,mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mr.DEFAULT=new mr(41943040,mr.DEFAULT_COLLECTION_PERCENTILE,mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mr.DISABLED=new mr(-1,0,0);var ud=class n{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new n(0)}static Qn(){return new n(-1)}};function qP([n,e],[t,r]){let i=Oe(n,t);return i===0?Oe(e,r):i}var pT=class{constructor(e){this.Gn=e,this.buffer=new Qt(qP),this.zn=0}jn(){return++this.zn}Hn(e){let t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();qP(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},mT=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){G("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>y(this,null,function*(){this.Jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Lc(t)?G("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Fc(t)}yield this.Yn(3e5)}))}},gT=class{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return V.resolve(l0.oe);let r=new pT(t);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(WP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),WP):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,i,o,s,a,c,u,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),gc()<=en.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function Y5(n,e){return new gT(n,e)}var vT=class{constructor(){this.changes=new Ui(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ur.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?V.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var yT=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var _T=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&id(r.mutation,i,ri.empty(),Nt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Pe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Pe()){let i=Os();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=ed();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Os();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Pe()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=ji(),s=rd(),a=function(){return rd()}();return t.forEach((c,u)=>{let d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Bi)?o=o.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),id(d.mutation,u,d.mutation.getFieldMask(),Nt.now())):s.set(u.key,ri.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>s.set(u,d)),t.forEach((u,d)=>{var f;return a.set(u,new yT(d,(f=s.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=rd(),i=new Dt((s,a)=>s-a),o=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let d=r.get(c)||ri.empty();d=a.applyToLocalView(u,d),r.set(c,d);let f=(i.get(a.batchId)||Pe()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,d=c.value,f=_k();d.forEach(m=>{if(!o.has(m)){let v=bk(t.get(m),r.get(m));v!==null&&f.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,f))}return V.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return ne.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):V.resolve(Os()),a=-1,c=o;return s.next(u=>V.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,Pe())).next(d=>({batchId:a,changes:yk(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ne(t)).next(r=>{let i=ed();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=ed();return this.indexManager.getCollectionParents(e,o).next(a=>V.forEach(a,c=>{let u=function(f,m){return new Bs(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,m)=>{s=s.insert(f,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,u)=>{let d=u.getKey();s.get(d)===null&&(s=s.insert(d,Ur.newInvalidDocument(d)))});let a=ed();return s.forEach((c,u)=>{let d=o.get(c);d!==void 0&&id(d.mutation,u,ri.empty(),Nt.now()),ig(t,u)&&(a=a.insert(c,u))}),a})}};var wT=class{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return V.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ai(i.createTime)}}(t)),V.resolve()}getNamedQuery(e,t){return V.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(i){return{name:i.name,query:K5(i.bundledQuery),readTime:ai(i.readTime)}}(t)),V.resolve()}};var ET=class{constructor(){this.overlays=new Dt(ne.comparator),this.dr=new Map}getOverlay(e,t){return V.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Os();return V.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.Tt(e,t,o)}),V.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.dr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.dr.delete(r)),V.resolve()}getOverlaysForCollection(e,t,r){let i=Os(),o=t.length+1,s=new ne(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return V.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Dt((u,d)=>u-d),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let d=o.get(u.largestBatchId);d===null&&(d=Os(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=Os(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return V.resolve(a)}Tt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.dr.get(i.largestBatchId).delete(r.key);this.dr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new nT(t,r));let o=this.dr.get(t);o===void 0&&(o=Pe(),this.dr.set(t,o)),this.dr.set(t,o.add(r.key))}};var IT=class{constructor(){this.sessionToken=pn.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,V.resolve()}};var dd=class{constructor(){this.Er=new Qt(Vt.Ar),this.Rr=new Qt(Vt.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,t){let r=new Vt(e,t);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new Vt(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){let t=new ne(new vt([])),r=new Vt(t,e),i=new Vt(t,e+1),o=[];return this.Rr.forEachInRange([r,i],s=>{this.gr(s),o.push(s.key)}),o}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){let t=new ne(new vt([])),r=new Vt(t,e),i=new Vt(t,e+1),o=Pe();return this.Rr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Vt(e,0),r=this.Er.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Vt=class{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return ne.comparator(e.key,t.key)||Oe(e.br,t.br)}static Vr(e,t){return Oe(e.br,t.br)||ne.comparator(e.key,t.key)}};var TT=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new Qt(Vt.Ar)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new eT(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.vr=this.vr.add(new Vt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(s)}lookupMutationBatch(e,t){return V.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Fr(r),o=i<0?0:i;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Vt(t,0),i=new Vt(t,Number.POSITIVE_INFINITY),o=[];return this.vr.forEachInRange([r,i],s=>{let a=this.Cr(s.br);o.push(a)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Qt(Oe);return t.forEach(i=>{let o=new Vt(i,0),s=new Vt(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([o,s],a=>{r=r.add(a.br)})}),V.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;ne.isDocumentKey(o)||(o=o.child(""));let s=new Vt(new ne(o),0),a=new Qt(Oe);return this.vr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.br)),!0)},s),V.resolve(this.Mr(a))}Mr(e){let t=[];return e.forEach(r=>{let i=this.Cr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ge(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return V.forEach(t.mutations,i=>{let o=new Vt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Bn(e){}containsKey(e,t){let r=new Vt(t,0),i=this.vr.firstAfterOrEqual(r);return V.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){let t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var CT=class{constructor(e){this.Nr=e,this.docs=function(){return new Dt(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return V.resolve(r?r.document.mutableCopy():Ur.newInvalidDocument(t))}getEntries(e,t){let r=ji();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ur.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=ji(),s=t.path,a=new ne(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||t5(e5(d),r)<=0||(i.has(d.key)||ig(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ae()}Br(e,t){return V.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new bT(this)}getSize(e){return V.resolve(this.size)}},bT=class extends vT{constructor(e){super(),this.hr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),V.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}};var DT=class{constructor(e){this.persistence=e,this.Lr=new Ui(t=>h0(t),f0),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.kr=0,this.qr=new dd,this.targetCount=0,this.Qr=ud.qn()}forEachTarget(e,t){return this.Lr.forEach((r,i)=>t(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),V.resolve()}Un(e){this.Lr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Qr=new ud(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,V.resolve()}updateTargetData(e,t){return this.Un(t),V.resolve()}removeTargetData(e,t){return this.Lr.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Lr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Lr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(o).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,t){let r=this.Lr.get(t)||null;return V.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),V.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),V.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),V.resolve()}getMatchingKeysForTargetId(e,t){let r=this.qr.Sr(t);return V.resolve(r)}containsKey(e,t){return V.resolve(this.qr.containsKey(t))}};var km=class{constructor(e,t){this.Kr={},this.overlays={},this.$r=new l0(0),this.Ur=!1,this.Ur=!0,this.Wr=new IT,this.referenceDelegate=e(this),this.Gr=new DT(this),this.indexManager=new hT,this.remoteDocumentCache=function(i){return new CT(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new dT(t),this.jr=new wT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ET,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new TT(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){G("MemoryPersistence","Starting transaction:",e);let i=new ST(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(o=>this.referenceDelegate.Jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Yr(e,t){return V.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}},ST=class extends FI{constructor(e){super(),this.currentSequenceNumber=e}},AT=class n{constructor(e){this.persistence=e,this.Zr=new dd,this.Xr=null}static ei(e){return new n(e)}get ti(){if(this.Xr)return this.Xr;throw ae()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),V.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),V.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(i=>this.ti.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.ti.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.ti,r=>{let i=ne.fromPath(r);return this.ni(e,i).next(o=>{o||t.removeEntry(i,we.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return V.or([()=>V.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}},Om=class n{constructor(e,t){this.persistence=e,this.ri=new Ui(r=>o5(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Y5(this,t)}static ei(e,t){return new n(e,t)}Hr(){}Jr(e){return V.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){let t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return V.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(o=>o?V.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Br(e,s=>this.ir(e,s,t).next(a=>{a||(r++,o.removeEntry(s,we.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),V.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),V.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=vm(e.data.value)),t}ir(e,t,r){return V.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.ri.get(t);return V.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var RT=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=i}static zi(e,t){let r=Pe(),i=Pe();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var xT=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var NT=class{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return WD()?8:r5(un())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Xi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.es(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new xT;return this.ts(e,t,s).next(a=>{if(o.result=a,this.Hi)return this.ns(e,t,s,a.size)})}).next(()=>o.result)}ns(e,t,r,i){return r.documentReadCount<this.Ji?(gc()<=en.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",vc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),V.resolve()):(gc()<=en.DEBUG&&G("QueryEngine","Query:",vc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(gc()<=en.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",vc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,si(t))):V.resolve())}Xi(e,t){if(kP(t))return V.resolve(null);let r=si(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=ZI(t,null,"F"),r=si(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Pe(...o);return this.Zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.rs(t,a);return this.ss(t,u,s,c.readTime)?this.Xi(e,ZI(t,null,"F")):this.os(e,u,t,c)}))})))}es(e,t,r,i){return kP(t)||i.isEqual(we.min())?V.resolve(null):this.Zi.getDocuments(e,r).next(o=>{let s=this.rs(t,o);return this.ss(t,s,r,i)?V.resolve(null):(gc()<=en.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),vc(t)),this.os(e,s,t,X6(i,-1)).next(a=>a))})}rs(e,t){let r=new Qt(gk(e));return t.forEach((i,o)=>{ig(e,o)&&(r=r.add(o))}),r}ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ts(e,t,r){return gc()<=en.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",vc(t)),this.Zi.getDocumentsMatchingQuery(e,t,js.min(),r)}os(e,t,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var MT=class{constructor(e,t,r,i){this.persistence=e,this._s=t,this.serializer=i,this.us=new Dt(Oe),this.cs=new Ui(o=>h0(o),f0),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _T(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}};function Q5(n,e,t,r){return new MT(n,e,t,r)}function Ok(n,e){return y(this,null,function*(){let t=ve(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Pe();for(let u of i){s.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}for(let u of o){a.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Ts:u,removedBatchIds:s,addedBatchIds:a}))})})})}function Z5(n,e){let t=ve(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.hs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){let f=u.batch,m=f.keys(),v=V.resolve();return m.forEach(w=>{v=v.next(()=>d.getEntry(c,w)).next(P=>{let N=u.docVersions.get(w);Ge(N!==null),P.version.compareTo(N)<0&&(f.applyToRemoteDocument(P,u),P.isValidDocument()&&(P.setReadTime(u.commitVersion),d.addEntry(P)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Pe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Fk(n){let e=ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function J5(n,e){let t=ve(n),r=e.snapshotVersion,i=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.hs.newChangeBuffer({trackRemovals:!0});i=t.us;let a=[];e.targetChanges.forEach((d,f)=>{let m=i.get(f);if(!m)return;a.push(t.Gr.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.Gr.addMatchingKeys(o,d.addedDocuments,f)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(pn.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),i=i.insert(f,v),function(P,N,L){return P.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(m,v,d)&&a.push(t.Gr.updateTargetData(o,v))});let c=ji(),u=Pe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(X5(o,s,e.documentUpdates).next(d=>{c=d.Is,u=d.ds})),!r.isEqual(we.min())){let d=t.Gr.getLastRemoteSnapshotVersion(o).next(f=>t.Gr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return V.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.us=i,o))}function X5(n,e,t){let r=Pe(),i=Pe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=ji();return t.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(we.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):G("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Is:s,ds:i}})}function e9(n,e){let t=ve(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function t9(n,e){let t=ve(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Gr.getTargetData(r,e).next(o=>o?(i=o,V.resolve(i)):t.Gr.allocateTargetId(r).next(s=>(i=new ld(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}function PT(n,e,t){return y(this,null,function*(){let r=ve(n),i=r.us.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Lc(s))throw s;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.us=r.us.remove(e),r.cs.delete(i.target)})}function zP(n,e,t){let r=ve(n),i=we.min(),o=Pe();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,d){let f=ve(c),m=f.cs.get(d);return m!==void 0?V.resolve(f.us.get(m)):f.Gr.getTargetData(u,d)}(r,s,si(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r._s.getDocumentsMatchingQuery(s,e,t?i:we.min(),t?o:Pe())).next(a=>(n9(r,g5(e),a),{documents:a,Es:o})))}function n9(n,e,t){let r=n.ls.get(e)||we.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.ls.set(e,r)}var Fm=class{constructor(){this.activeTargetIds=I5()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var kT=class{constructor(){this._o=new Fm,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Fm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var OT=class{uo(e){}shutdown(){}};var Lm=class{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.To)e(0)}Po(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var gm=null;function bI(){return gm===null?gm=function(){return 268435456+Math.round(2147483648*Math.random())}():gm++,"0x"+gm.toString(16)}var r9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var FT=class{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}};var fn="WebChannelConnection",LT=class extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${i}/databases/${o}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Oo(t,r,i,o,s){let a=bI(),c=this.No(t,r.toUriEncodedString());G("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(u,o,s),this.Lo(t,c,u,i).then(d=>(G("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw Tc("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}ko(t,r,i,o,s,a){return this.Oo(t,r,i,o,s)}Bo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Oc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}No(t,r){let i=r9[t];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,t,r,i){let o=bI();return new Promise((s,a)=>{let c=new _I;c.setWithCredentials(!0),c.listenOnce(wI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Xu.NO_ERROR:let d=c.getResponseJson();G(fn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case Xu.TIMEOUT:G(fn,`RPC '${e}' ${o} timed out`),a(new K(F.DEADLINE_EXCEEDED,"Request time out"));break;case Xu.HTTP_ERROR:let f=c.getStatus();if(G(fn,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let w=function(N){let L=N.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(L)>=0?L:F.UNKNOWN}(v.status);a(new K(w,v.message))}else a(new K(F.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new K(F.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{G(fn,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(i);G(fn,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",u,r,15)})}qo(e,t,r){let i=bI(),o=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=TI(),a=II(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Bo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=o.join("");G(fn,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=s.createWebChannel(d,c),m=!1,v=!1,w=new FT({Eo:N=>{v?G(fn,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(G(fn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),G(fn,`RPC '${e}' stream ${i} sending:`,N),f.send(N))},Ao:()=>f.close()}),P=(N,L,W)=>{N.listen(L,Y=>{try{W(Y)}catch(re){setTimeout(()=>{throw re},0)}})};return P(f,mc.EventType.OPEN,()=>{v||(G(fn,`RPC '${e}' stream ${i} transport opened.`),w.So())}),P(f,mc.EventType.CLOSE,()=>{v||(v=!0,G(fn,`RPC '${e}' stream ${i} transport closed`),w.Do())}),P(f,mc.EventType.ERROR,N=>{v||(v=!0,Tc(fn,`RPC '${e}' stream ${i} transport errored:`,N),w.Do(new K(F.UNAVAILABLE,"The operation could not be completed")))}),P(f,mc.EventType.MESSAGE,N=>{var L;if(!v){let W=N.data[0];Ge(!!W);let Y=W,re=Y?.error||((L=Y[0])===null||L===void 0?void 0:L.error);if(re){G(fn,`RPC '${e}' stream ${i} received error:`,re);let it=re.status,ue=function(E){let b=Lt[E];if(b!==void 0)return Sk(b)}(it),D=re.message;ue===void 0&&(ue=F.INTERNAL,D="Unknown error status: "+it+" with message "+re.message),v=!0,w.Do(new K(ue,D)),f.close()}else G(fn,`RPC '${e}' stream ${i} received:`,W),w.vo(W)}}),P(a,EI.STAT_EVENT,N=>{N.stat===fm.PROXY?G(fn,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===fm.NOPROXY&&G(fn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.bo()},0),w}};function DI(){return typeof document<"u"?document:null}function og(n){return new sT(n,!0)}var Vm=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=i,this.$o=o,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();let t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,t-r);i>0&&G("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}};var Um=class{constructor(e,t,r,i,o,s,a,c){this.li=e,this.Yo=r,this.Zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new Vm(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}stop(){return y(this,null,function*(){this.i_()&&(yield this.close(0))})}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}u_(){return y(this,null,function*(){if(this.s_())return this.close(0)})}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}close(e,t){return y(this,null,function*(){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===F.RESOURCE_EXHAUSTED?(Fi(t.toString()),Fi("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.po(t)})}P_(){}auth(){this.state=1;let e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===t&&this.I_(r,i)},r=>{e(()=>{let i=new K(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(i)})})}I_(e,t){let r=this.T_(this.Xo);this.stream=this.E_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.d_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(()=>y(this,null,function*(){this.state=0,this.start()}))}d_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},VT=class extends Um{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}E_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();let t=L5(this.serializer,e),r=function(o){if(!("targetChange"in o))return we.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?we.min():s.readTime?ai(s.readTime):we.min()}(e);return this.listener.R_(t,r)}V_(e){let t={};t.database=uT(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=YI(c)?{documents:j5(o,c)}:{query:B5(o,c).ct},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Ak(o,s.resumeToken);let u=aT(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(we.min())>0){a.readTime=Mm(o,s.snapshotVersion.toTimestamp());let u=aT(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=H5(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){let t={};t.database=uT(this.serializer),t.removeTarget=e,this.c_(t)}},UT=class extends Um{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,t){return this.connection.qo("Write",e,t)}A_(e){return Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();let t=U5(e.writeResults,e.commitTime),r=ai(e.commitTime);return this.listener.y_(r,t)}w_(){let e={};e.database=uT(this.serializer),this.c_(e)}g_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>V5(this.serializer,r))};this.c_(t)}};var jT=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Oo(e,cT(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(F.UNKNOWN,o.toString())})}ko(e,t,r,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.ko(e,cT(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(F.UNKNOWN,s.toString())})}terminate(){this.S_=!0,this.connection.terminate()}},BT=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Fi(t),this.C_=!1):G("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}};var $T=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=o,this.Q_.uo(s=>{r.enqueueAndForget(()=>y(this,null,function*(){Ks(this)&&(G("RemoteStore","Restarting streams for network reachability change."),yield function(c){return y(this,null,function*(){let u=ve(c);u.k_.add(4),yield yd(u),u.K_.set("Unknown"),u.k_.delete(4),yield sg(u)})}(this))}))}),this.K_=new BT(r,i)}};function sg(n){return y(this,null,function*(){if(Ks(n))for(let e of n.q_)yield e(!0)})}function yd(n){return y(this,null,function*(){for(let e of n.q_)yield e(!1)})}function Lk(n,e){let t=ve(n);t.L_.has(e.targetId)||(t.L_.set(e.targetId,e),w0(t)?_0(t):Vc(t).s_()&&y0(t,e))}function v0(n,e){let t=ve(n),r=Vc(t);t.L_.delete(e),r.s_()&&Vk(t,e),t.L_.size===0&&(r.s_()?r.a_():Ks(t)&&t.K_.set("Unknown"))}function y0(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vc(n).V_(e)}function Vk(n,e){n.U_.xe(e),Vc(n).m_(e)}function _0(n){n.U_=new oT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.L_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Vc(n).start(),n.K_.F_()}function w0(n){return Ks(n)&&!Vc(n).i_()&&n.L_.size>0}function Ks(n){return ve(n).k_.size===0}function Uk(n){n.U_=void 0}function i9(n){return y(this,null,function*(){n.K_.set("Online")})}function o9(n){return y(this,null,function*(){n.L_.forEach((e,t)=>{y0(n,e)})})}function s9(n,e){return y(this,null,function*(){Uk(n),w0(n)?(n.K_.O_(e),_0(n)):n.K_.set("Unknown")})}function a9(n,e,t){return y(this,null,function*(){if(n.K_.set("Online"),e instanceof xm&&e.state===2&&e.cause)try{yield function(i,o){return y(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.L_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.L_.delete(a),i.U_.removeTarget(a))})}(n,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield jm(n,r)}else if(e instanceof Ec?n.U_.$e(e):e instanceof Rm?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(we.min()))try{let r=yield Fk(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.U_.it(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.L_.get(u);d&&o.L_.set(u,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let d=o.L_.get(c);if(!d)return;o.L_.set(c,d.withResumeToken(pn.EMPTY_BYTE_STRING,d.snapshotVersion)),Vk(o,c);let f=new ld(d.target,c,u,d.sequenceNumber);y0(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){G("RemoteStore","Failed to raise snapshot:",r),yield jm(n,r)}})}function jm(n,e,t){return y(this,null,function*(){if(!Lc(e))throw e;n.k_.add(1),yield yd(n),n.K_.set("Offline"),t||(t=()=>Fk(n.localStore)),n.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){G("RemoteStore","Retrying IndexedDB access"),yield t(),n.k_.delete(1),yield sg(n)}))})}function jk(n,e){return e().catch(t=>jm(n,t,e))}function ag(n){return y(this,null,function*(){let e=ve(n),t=Uo(e),r=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;c9(e);)try{let i=yield e9(e.localStore,r);if(i===null){e.B_.length===0&&t.a_();break}r=i.batchId,l9(e,i)}catch(i){yield jm(e,i)}Bk(e)&&$k(e)})}function c9(n){return Ks(n)&&n.B_.length<10}function l9(n,e){n.B_.push(e);let t=Uo(n);t.s_()&&t.f_&&t.g_(e.mutations)}function Bk(n){return Ks(n)&&!Uo(n).i_()&&n.B_.length>0}function $k(n){Uo(n).start()}function u9(n){return y(this,null,function*(){Uo(n).w_()})}function d9(n){return y(this,null,function*(){let e=Uo(n);for(let t of n.B_)e.g_(t.mutations)})}function h9(n,e,t){return y(this,null,function*(){let r=n.B_.shift(),i=tT.from(r,e,t);yield jk(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ag(n)})}function f9(n,e){return y(this,null,function*(){e&&Uo(n).f_&&(yield function(r,i){return y(this,null,function*(){if(function(s){return R5(s)&&s!==F.ABORTED}(i.code)){let o=r.B_.shift();Uo(r).__(),yield jk(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ag(r)}})}(n,e)),Bk(n)&&$k(n)})}function GP(n,e){return y(this,null,function*(){let t=ve(n);t.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");let r=Ks(t);t.k_.add(3),yield yd(t),r&&t.K_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),yield sg(t)})}function p9(n,e){return y(this,null,function*(){let t=ve(n);e?(t.k_.delete(2),yield sg(t)):e||(t.k_.add(2),yield yd(t),t.K_.set("Unknown"))})}function Vc(n){return n.W_||(n.W_=function(t,r,i){let o=ve(t);return o.b_(),new VT(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Ro:i9.bind(null,n),mo:o9.bind(null,n),po:s9.bind(null,n),R_:a9.bind(null,n)}),n.q_.push(e=>y(this,null,function*(){e?(n.W_.__(),w0(n)?_0(n):n.K_.set("Unknown")):(yield n.W_.stop(),Uk(n))}))),n.W_}function Uo(n){return n.G_||(n.G_=function(t,r,i){let o=ve(t);return o.b_(),new UT(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:u9.bind(null,n),po:f9.bind(null,n),p_:d9.bind(null,n),y_:h9.bind(null,n)}),n.q_.push(e=>y(this,null,function*(){e?(n.G_.__(),yield ag(n)):(yield n.G_.stop(),n.B_.length>0&&(G("RemoteStore",`Stopping write stream with ${n.B_.length} pending writes`),n.B_=[]))}))),n.G_}var HT=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function E0(n,e){if(Fi("AsyncQueue",`${e}: ${n}`),Lc(n))return new K(F.UNAVAILABLE,`${e}: ${n}`);throw n}var Bm=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ne.comparator(t.key,r.key):(t,r)=>ne.comparator(t.key,r.key),this.keyedMap=ed(),this.sortedSet=new Dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var $m=class{constructor(){this.z_=new Dt(ne.comparator)}track(e){let t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):ae():this.z_=this.z_.insert(t,e)}j_(){let e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}},Pc=class n{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Bm.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var WT=class{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}},qT=class{constructor(){this.queries=KP(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){let i=ve(t),o=i.queries;i.queries=KP(),o.forEach((s,a)=>{for(let c of a.J_)c.onError(r)})})(this,new K(F.ABORTED,"Firestore shutting down"))}};function KP(){return new Ui(n=>mk(n),rg)}function Hk(n,e){return y(this,null,function*(){let t=ve(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Y_()&&e.Z_()&&(r=2):(o=new WT,r=e.Z_()?0:1);try{switch(r){case 0:o.H_=yield t.onListen(i,!0);break;case 1:o.H_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=E0(s,`Initialization of query '${vc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.J_.push(e),e.ea(t.onlineState),o.H_&&e.ta(o.H_)&&I0(t)})}function Wk(n,e){return y(this,null,function*(){let t=ve(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.J_.indexOf(e);s>=0&&(o.J_.splice(s,1),o.J_.length===0?i=e.Z_()?0:1:!o.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function m9(n,e){let t=ve(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.J_)a.ta(i)&&(r=!0);s.H_=i}}r&&I0(t)}function g9(n,e,t){let r=ve(n),i=r.queries.get(e);if(i)for(let o of i.J_)o.onError(t);r.queries.delete(e)}function I0(n){n.X_.forEach(e=>{e.next()})}var zT,YP;(YP=zT||(zT={})).na="default",YP.Cache="cache";var Hm=class{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Pc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;let r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;let t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=Pc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==zT.Cache}};var Wm=class{constructor(e){this.key=e}},qm=class{constructor(e){this.key=e}},GT=class{constructor(e,t){this.query=e,this.Ea=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Pe(),this.mutatedKeys=Pe(),this.Va=gk(e),this.ma=new Bm(this.Va)}get fa(){return this.Ea}ga(e,t){let r=t?t.pa:new $m,i=t?t.ma:this.ma,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let m=i.get(d),v=ig(this.query,f)?f:null,w=!!m&&this.mutatedKeys.has(m.key),P=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),N=!1;m&&v?m.data.isEqual(v.data)?w!==P&&(r.track({type:3,doc:v}),N=!0):this.ya(m,v)||(r.track({type:2,doc:v}),N=!0,(c&&this.Va(v,c)>0||u&&this.Va(v,u)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),N=!0):m&&!v&&(r.track({type:1,doc:m}),N=!0,(c||u)&&(a=!0)),N&&(v?(s=s.add(v),o=P?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{ma:s,pa:r,ss:a,mutatedKeys:o}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;let s=e.pa.j_();s.sort((d,f)=>function(v,w){let P=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return P(v)-P(w)}(d.type,f.type)||this.Va(d.doc,f.doc)),this.wa(r),i=i!=null&&i;let a=t&&!i?this.Sa():[],c=this.Ra.size===0&&this.current&&!i?1:0,u=c!==this.Aa;return this.Aa=c,s.length!==0||u?{snapshot:new Pc(this.query,e.ma,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new $m,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.Ea=this.Ea.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ea=this.Ea.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];let e=this.Ra;this.Ra=Pe(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});let t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new qm(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new Wm(r))}),t}va(e){this.Ea=e.Es,this.Ra=Pe();let t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Pc.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}},KT=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},YT=class{constructor(e){this.key=e,this.Fa=!1}},QT=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ma={},this.xa=new Ui(a=>mk(a),rg),this.Oa=new Map,this.Na=new Set,this.Ba=new Dt(ne.comparator),this.La=new Map,this.ka=new dd,this.qa={},this.Qa=new Map,this.Ka=ud.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}};function v9(n,e,t=!0){return y(this,null,function*(){let r=Qk(n),i,o=r.xa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Ca()):i=yield qk(r,e,t,!0),i})}function y9(n,e){return y(this,null,function*(){let t=Qk(n);yield qk(t,e,!0,!1)})}function qk(n,e,t,r){return y(this,null,function*(){let i=yield t9(n.localStore,si(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield _9(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Lk(n.remoteStore,i),a})}function _9(n,e,t,r,i){return y(this,null,function*(){n.Ua=(f,m,v)=>function(P,N,L,W){return y(this,null,function*(){let Y=N.view.ga(L);Y.ss&&(Y=yield zP(P.localStore,N.query,!1).then(({documents:D})=>N.view.ga(D,Y)));let re=W&&W.targetChanges.get(N.targetId),it=W&&W.targetMismatches.get(N.targetId)!=null,ue=N.view.applyChanges(Y,P.isPrimaryClient,re,it);return ZP(P,N.targetId,ue.ba),ue.snapshot})}(n,f,m,v);let o=yield zP(n.localStore,e,!0),s=new GT(e,o.Es),a=s.ga(o.documents),c=cd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,c);ZP(n,t,u.ba);let d=new KT(e,t,s);return n.xa.set(e,d),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),u.snapshot})}function w9(n,e,t){return y(this,null,function*(){let r=ve(n),i=r.xa.get(e),o=r.Oa.get(i.targetId);if(o.length>1)return r.Oa.set(i.targetId,o.filter(s=>!rg(s,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield PT(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&v0(r.remoteStore,i.targetId),ZT(r,i.targetId)}).catch(Fc))):(ZT(r,i.targetId),yield PT(r.localStore,i.targetId,!0))})}function E9(n,e){return y(this,null,function*(){let t=ve(n),r=t.xa.get(e),i=t.Oa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),v0(t.remoteStore,r.targetId))})}function I9(n,e,t){return y(this,null,function*(){let r=R9(n);try{let i=yield function(s,a){let c=ve(s),u=Nt.now(),d=a.reduce((v,w)=>v.add(w.key),Pe()),f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let w=ji(),P=Pe();return c.hs.getEntries(v,d).next(N=>{w=N,w.forEach((L,W)=>{W.isValidDocument()||(P=P.add(L))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,w)).next(N=>{f=N;let L=[];for(let W of a){let Y=A5(W,f.get(W.key).overlayedDocument);Y!=null&&L.push(new Bi(W.key,Y,ck(Y.value.mapValue),Vs.exists(!0)))}return c.mutationQueue.addMutationBatch(v,u,L,a)}).next(N=>{m=N;let L=N.applyToLocalDocumentSet(f,P);return c.documentOverlayCache.saveOverlays(v,N.batchId,L)})}).then(()=>({batchId:m.batchId,changes:yk(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.qa[s.currentUser.toKey()];u||(u=new Dt(Oe)),u=u.insert(a,c),s.qa[s.currentUser.toKey()]=u}(r,i.batchId,t),yield _d(r,i.changes),yield ag(r.remoteStore)}catch(i){let o=E0(i,"Failed to persist write");t.reject(o)}})}function zk(n,e){return y(this,null,function*(){let t=ve(n);try{let r=yield J5(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.La.get(o);s&&(Ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Fa=!0:i.modifiedDocuments.size>0?Ge(s.Fa):i.removedDocuments.size>0&&(Ge(s.Fa),s.Fa=!1))}),yield _d(t,r,e)}catch(r){yield Fc(r)}})}function QP(n,e,t){let r=ve(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.xa.forEach((o,s)=>{let a=s.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=ve(s);c.onlineState=a;let u=!1;c.queries.forEach((d,f)=>{for(let m of f.J_)m.ea(a)&&(u=!0)}),u&&I0(c)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function T9(n,e,t){return y(this,null,function*(){let r=ve(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.La.get(e),o=i&&i.key;if(o){let s=new Dt(ne.comparator);s=s.insert(o,Ur.newNoDocument(o,we.min()));let a=Pe().add(o),c=new Am(we.min(),new Map,new Dt(Oe),s,a);yield zk(r,c),r.Ba=r.Ba.remove(o),r.La.delete(e),T0(r)}else yield PT(r.localStore,e,!1).then(()=>ZT(r,e,t)).catch(Fc)})}function C9(n,e){return y(this,null,function*(){let t=ve(n),r=e.batch.batchId;try{let i=yield Z5(t.localStore,e);Kk(t,r,null),Gk(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield _d(t,i)}catch(i){yield Fc(i)}})}function b9(n,e,t){return y(this,null,function*(){let r=ve(n);try{let i=yield function(s,a){let c=ve(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(Ge(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);Kk(r,e,t),Gk(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield _d(r,i)}catch(i){yield Fc(i)}})}function Gk(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function Kk(n,e,t){let r=ve(n),i=r.qa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function ZT(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||Yk(n,r)})}function Yk(n,e){n.Na.delete(e.path.canonicalString());let t=n.Ba.get(e);t!==null&&(v0(n.remoteStore,t),n.Ba=n.Ba.remove(e),n.La.delete(t),T0(n))}function ZP(n,e,t){for(let r of t)r instanceof Wm?(n.ka.addReference(r.key,e),D9(n,r)):r instanceof qm?(G("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||Yk(n,r.key)):ae()}function D9(n,e){let t=e.key,r=t.path.canonicalString();n.Ba.get(t)||n.Na.has(r)||(G("SyncEngine","New document in limbo: "+t),n.Na.add(r),T0(n))}function T0(n){for(;n.Na.size>0&&n.Ba.size<n.maxConcurrentLimboResolutions;){let e=n.Na.values().next().value;n.Na.delete(e);let t=new ne(vt.fromString(e)),r=n.Ka.next();n.La.set(r,new YT(t)),n.Ba=n.Ba.insert(t,r),Lk(n.remoteStore,new ld(si(p0(t.path)),r,"TargetPurposeLimboResolution",l0.oe))}}function _d(n,e,t){return y(this,null,function*(){let r=ve(n),i=[],o=[],s=[];r.xa.isEmpty()||(r.xa.forEach((a,c)=>{s.push(r.Ua(c,e,t).then(u=>{var d;if((u||t)&&r.isPrimaryClient){let f=u?!u.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);let f=RT.zi(c.targetId,u);o.push(f)}}))}),yield Promise.all(s),r.Ma.R_(i),yield function(c,u){return y(this,null,function*(){let d=ve(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>V.forEach(u,m=>V.forEach(m.Wi,v=>d.persistence.referenceDelegate.addReference(f,m.targetId,v)).next(()=>V.forEach(m.Gi,v=>d.persistence.referenceDelegate.removeReference(f,m.targetId,v)))))}catch(f){if(!Lc(f))throw f;G("LocalStore","Failed to update sequence numbers: "+f)}for(let f of u){let m=f.targetId;if(!f.fromCache){let v=d.us.get(m),w=v.snapshotVersion,P=v.withLastLimboFreeSnapshotVersion(w);d.us=d.us.insert(m,P)}}})}(r.localStore,o))})}function S9(n,e){return y(this,null,function*(){let t=ve(n);if(!t.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());let r=yield Ok(t.localStore,e);t.currentUser=e,function(o,s){o.Qa.forEach(a=>{a.forEach(c=>{c.reject(new K(F.CANCELLED,s))})}),o.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield _d(t,r.Ts)}})}function A9(n,e){let t=ve(n),r=t.La.get(e);if(r&&r.Fa)return Pe().add(r.key);{let i=Pe(),o=t.Oa.get(e);if(!o)return i;for(let s of o){let a=t.xa.get(s);i=i.unionWith(a.view.fa)}return i}}function Qk(n){let e=ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=zk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=A9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=T9.bind(null,e),e.Ma.R_=m9.bind(null,e.eventManager),e.Ma.Wa=g9.bind(null,e.eventManager),e}function R9(n){let e=ve(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=C9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=b9.bind(null,e),e}var Zk=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return y(this,null,function*(){this.serializer=og(t.databaseInfo.databaseId),this.sharedClientState=this.za(t),this.persistence=this.ja(t),yield this.persistence.start(),this.localStore=this.Ha(t),this.gcScheduler=this.Ja(t,this.localStore),this.indexBackfillerScheduler=this.Ya(t,this.localStore)})}Ja(t,r){return null}Ya(t,r){return null}Ha(t){return Q5(this.persistence,new NT,t.initialUser,this.serializer)}ja(t){return new km(AT.ei,this.serializer)}za(t){return new kT}terminate(){return y(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),JT=class extends Zk{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){Ge(this.persistence.referenceDelegate instanceof Om);let r=this.persistence.referenceDelegate.garbageCollector;return new mT(r,e.asyncQueue,t)}ja(e){let t=this.cacheSizeBytes!==void 0?mr.withCacheSize(this.cacheSizeBytes):mr.DEFAULT;return new km(r=>Om.ei(r,t),this.serializer)}};var x9=(()=>{class n{initialize(t,r){return y(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>QP(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=S9.bind(null,this.syncEngine),yield p9(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new qT}()}createDatastore(t){let r=og(t.databaseInfo.databaseId),i=function(s){return new LT(s)}(t.databaseInfo);return function(s,a,c,u){return new jT(s,a,c,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new $T(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>QP(this.syncEngine,r,0),function(){return Lm.p()?new Lm:new OT}())}createSyncEngine(t,r){return function(o,s,a,c,u,d,f){let m=new QT(o,s,a,c,u,d);return f&&(m.$a=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return y(this,null,function*(){var t,r;yield function(o){return y(this,null,function*(){let s=ve(o);G("RemoteStore","RemoteStore shutting down."),s.k_.add(5),yield yd(s),s.Q_.shutdown(),s.K_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var zm=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Fi("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var XT=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Yt.UNAUTHENTICATED,this.clientId=Em.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>y(this,null,function*(){G("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(G("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=E0(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function SI(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield Ok(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function JP(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield N9(n);G("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>GP(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>GP(e.remoteStore,i)),n._onlineComponents=e})}function N9(n){return y(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{yield SI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Tc("Error using user provided cache. Falling back to memory cache: "+t),yield SI(n,new Zk)}}else G("FirestoreClient","Using default OfflineComponentProvider"),yield SI(n,new JT(void 0));return n._offlineComponents})}function Jk(n){return y(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),yield JP(n,n._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),yield JP(n,new x9))),n._onlineComponents})}function M9(n){return Jk(n).then(e=>e.syncEngine)}function e0(n){return y(this,null,function*(){let e=yield Jk(n),t=e.eventManager;return t.onListen=v9.bind(null,e.syncEngine),t.onUnlisten=w9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=y9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=E9.bind(null,e.syncEngine),t})}function P9(n,e,t={}){let r=new ii;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(o,s,a,c,u){let d=new zm({next:m=>{d.eu(),s.enqueueAndForget(()=>Wk(o,f)),m.fromCache&&c.source==="server"?u.reject(new K(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new Hm(a,d,{includeMetadataChanges:!0,ua:!0});return Hk(o,f)}(yield e0(n),n.asyncQueue,e,t,r)})),r.promise}function Xk(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var XP=new Map;function eO(n,e,t){if(!t)throw new K(F.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function k9(n,e,t,r){if(e===!0&&r===!0)throw new K(F.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ek(n){if(!ne.isDocumentKey(n))throw new K(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function tk(n){if(ne.isDocumentKey(n))throw new K(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function cg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ae()}function Fo(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new K(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=cg(n);throw new K(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Gm=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}k9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xk((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},kc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gm(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new AI;switch(r.type){case"firstParty":return new MI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return y(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=XP.get(t);r&&(G("ComponentProvider","Removing Datastore"),XP.delete(t),r.terminate())}(this),Promise.resolve()}};function tO(n,e,t,r={}){var i;let o=(n=Fo(n,kc))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Tc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Yt.MOCK_USER;else{a=pa(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new K(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Yt(u)}n._authCredentials=new RI(new wm(a,c))}}var qs=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Hn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Lo=class n extends qs{constructor(e,t,r){super(e,t,p0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Hn(this.firestore,null,new ne(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function nO(n,e,...t){if(n=Le(n),eO("collection","path",e),n instanceof kc){let r=vt.fromString(e,...t);return tk(r),new Lo(n,null,r)}{if(!(n instanceof Hn||n instanceof Lo))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(vt.fromString(e,...t));return tk(r),new Lo(n.firestore,null,r)}}function rO(n,e,...t){if(n=Le(n),arguments.length===1&&(e=Em.newId()),eO("doc","path",e),n instanceof kc){let r=vt.fromString(e,...t);return ek(r),new Hn(n,null,new ne(r))}{if(!(n instanceof Hn||n instanceof Lo))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(vt.fromString(e,...t));return ek(r),new Hn(n.firestore,n instanceof Lo?n.converter:null,new ne(r))}}var Km=class{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new Vm(this,"async_queue_retry"),this.fu=()=>{let r=DI();r&&G("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;let t=DI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;let t=DI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});let t=new ii;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}wu(){return y(this,null,function*(){if(this.Iu.length!==0){try{yield this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Lc(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}})}yu(e){let t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Fi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);let i=HT.createAndSchedule(this,e,t,r,o=>this.Su(o));return this.Eu.push(i),i}pu(){this.Au&&ae()}verifyOperationInProgress(){}bu(){return y(this,null,function*(){let e;do e=this.gu,yield e;while(e!==this.gu)})}Du(e){for(let t of this.Eu)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Eu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){let t=this.Eu.indexOf(e);this.Eu.splice(t,1)}};function nk(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var zs=class extends kc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Km,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return y(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Km(e),this._firestoreClient=void 0,yield e}})}};function iO(n,e){let t=typeof n=="object"?n:Ht(),r=typeof n=="string"?n:e||"(default)",i=$t(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=ro("firestore");o&&tO(i,...o)}return i}function C0(n){if(n._terminated)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||O9(n),n._firestoreClient}function O9(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,u,d){return new LI(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Xk(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new XT(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var hd=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(pn.fromBase64String(e))}catch(t){throw new K(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var fd=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new K(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ym=class{constructor(e){this._methodName=e}};var pd=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new K(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new K(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}};var md=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var F9=/^__.*__$/,t0=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Bi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ws(e,this.data,t,this.fieldTransforms)}};function oO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}var n0=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Fu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Bu(e),i}Lu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Qm(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(oO(this.Mu)&&F9.test(e))throw this.qu('Document fields cannot begin and end with "__"')}},r0=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||og(e)}$u(e,t,r,i=!1){return new n0({Mu:e,methodName:t,Ku:r,path:er.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function sO(n){let e=n._freezeSettings(),t=og(n._databaseId);return new r0(n._databaseId,!!e.ignoreUndefinedProperties,t)}function L9(n,e,t,r,i,o={}){let s=n.$u(o.merge||o.mergeFields?2:0,e,t,i);lO("Data must be an object, but it was:",s,r);let a=aO(r,s),c,u;if(o.merge)c=new ri(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let m=U9(e,f,t);if(!s.contains(m))throw new K(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);B9(d,m)||d.push(m)}c=new ri(d),u=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=s.fieldTransforms;return new t0(new Vr(a),c,u)}function V9(n,e,t,r=!1){return b0(t,n.$u(r?4:3,e))}function b0(n,e){if(cO(n=Le(n)))return lO("Unsupported field value:",e,n),aO(n,e);if(n instanceof Ym)return function(r,i){if(!oO(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=b0(a,i.ku(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Le(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return T5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Nt.fromDate(r);return{timestampValue:Mm(i.serializer,o)}}if(r instanceof Nt){let o=new Nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Mm(i.serializer,o)}}if(r instanceof pd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof hd)return{bytesValue:Ak(i.serializer,r._byteString)};if(r instanceof Hn){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.qu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:g0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof md)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.qu("VectorValues must only contain numeric values.");return m0(a.serializer,c)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${cg(r)}`)}(n,e)}function aO(n,e){let t={};return ok(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gs(n,(r,i)=>{let o=b0(i,e.Ou(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function cO(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Nt||n instanceof pd||n instanceof hd||n instanceof Hn||n instanceof Ym||n instanceof md)}function lO(n,e,t){if(!cO(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=cg(t);throw r==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+r)}}function U9(n,e,t){if((e=Le(e))instanceof fd)return e._internalPath;if(typeof e=="string")return uO(n,e);throw Qm("Field path arguments must be of type string or ",n,!1,void 0,t)}var j9=new RegExp("[~\\*/\\[\\]]");function uO(n,e,t){if(e.search(j9)>=0)throw Qm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fd(...e.split("."))._internalPath}catch{throw Qm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Qm(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new K(F.INVALID_ARGUMENT,a+n+c)}function B9(n,e){return n.some(t=>t.isEqual(e))}var Zm=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new i0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(D0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},i0=class extends Zm{data(){return super.data()}};function D0(n,e){return typeof e=="string"?uO(n,e):e instanceof fd?e._internalPath:e._delegate._internalPath}function dO(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new K(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var gd=class{},o0=class extends gd{};function hO(n,e,...t){let r=[];e instanceof gd&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof s0).length,a=o.filter(c=>c instanceof Jm).length;if(s>1||s>0&&a>0)throw new K(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Jm=class n extends o0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return pO(e._query,t),new qs(e.firestore,e.converter,QI(e._query,t))}_parse(e){let t=sO(e.firestore);return function(o,s,a,c,u,d,f){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new K(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){ik(f,d);let v=[];for(let w of f)v.push(rk(c,o,w));m={arrayValue:{values:v}}}else m=rk(c,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||ik(f,d),m=V9(a,s,f,d==="in"||d==="not-in");return Ut.create(u,d,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function fO(n,e,t){let r=e,i=D0("where",n);return Jm._create(i,r,t)}var s0=class n extends gd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:jr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)pO(s,c),s=QI(s,c)}(e._query,t),new qs(e.firestore,e.converter,QI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function rk(n,e,t){if(typeof(t=Le(t))=="string"){if(t==="")throw new K(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pk(e)&&t.indexOf("/")!==-1)throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(vt.fromString(t));if(!ne.isDocumentKey(r))throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return AP(n,new ne(r))}if(t instanceof Hn)return AP(n,t._key);throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cg(t)}.`)}function ik(n,e){if(!Array.isArray(n)||n.length===0)throw new K(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function pO(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new K(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var a0=class{convertValue(e,t="none"){switch(Vo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ae()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Gs(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>ht(s.doubleValue));return new md(o)}convertGeoPoint(e){return new pd(ht(e.latitude),ht(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=ng(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(sd(e));default:return null}}convertTimestamp(e){let t=Li(e);return new Nt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=vt.fromString(e);Ge(kk(r));let i=new bm(r.get(1),r.get(3)),o=new ne(r.popFirst(5));return i.isEqual(t)||Fi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function $9(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Ls=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Xm=class extends Zm{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ic(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(D0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Ic=class extends Xm{data(e={}){return super.data(e)}},eg=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ls(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ic(this._firestore,this._userDataWriter,r.key,r,new Ls(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new K(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Ic(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ls(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Ic(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ls(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,d=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:H9(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function H9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}var vd=class extends a0{constructor(e){super(),this.firestore=e}convertBytes(e){return new hd(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hn(this.firestore,null,t)}};function mO(n){n=Fo(n,qs);let e=Fo(n.firestore,zs),t=C0(e),r=new vd(e);return dO(n._query),P9(t,n._query).then(i=>new eg(e,r,n,i))}function gO(n,e,t){n=Fo(n,Hn);let r=Fo(n.firestore,zs),i=$9(n.converter,e,t);return W9(r,[L9(sO(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Vs.none())])}function S0(n,...e){var t,r,i;n=Le(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||nk(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(nk(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,u,d;if(n instanceof Hn)u=Fo(n.firestore,zs),d=p0(n._key.path),c={next:f=>{e[s]&&e[s](q9(u,n,f))},error:e[s+1],complete:e[s+2]};else{let f=Fo(n,qs);u=Fo(f.firestore,zs),d=f._query;let m=new vd(u);c={next:v=>{e[s]&&e[s](new eg(u,m,f,v))},error:e[s+1],complete:e[s+2]},dO(n._query)}return function(m,v,w,P){let N=new zm(P),L=new Hm(v,N,w);return m.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return Hk(yield e0(m),L)})),()=>{N.eu(),m.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return Wk(yield e0(m),L)}))}}(C0(u),d,a,c)}function W9(n,e){return function(r,i){let o=new ii;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return I9(yield M9(r),i,o)})),o.promise}(C0(n),e)}function q9(n,e,t){let r=t.docs.get(e._key),i=new vd(n);return new Xm(n,i,e._key,r,new Ls(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Oc=i})(Pn),It(new Et("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new zs(new xI(r.getProvider("auth-internal")),new kI(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new K(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bm(u.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),te(TP,"4.7.6",e),te(TP,"4.7.6","esm2017")})();var lg=function(){return lg=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},lg.apply(this,arguments)};var K9={includeMetadataChanges:!1};function vO(n,e){return e===void 0&&(e=K9),new pe(function(t){var r=S0(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function yO(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:lg(lg({},r),(t={},t[e.idField]=n.id,t))}function _O(n){return vO(n,{includeMetadataChanges:!0}).pipe(ee(function(e){return e.docs}))}function wO(n,e){return e===void 0&&(e={}),_O(n).pipe(ee(function(t){return t.map(function(r){return yO(r,e)})}))}var Ys=class{constructor(e){return e}},EO="firestore",A0=class{constructor(){return Ft(EO)}};var R0=new q("angularfire2.firestore-instances");function Y9(n,e){let t=qt(EO,n,e);return t&&new Ys(t)}function Q9(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ys(r)}}var Z9={provide:A0,deps:[[new Ie,R0]]},J9={provide:Ys,useFactory:Y9,deps:[[new Ie,R0],gt]};function IO(n,...e){return te("angularfire",dt.full,"fst"),ut([J9,Z9,{provide:R0,useFactory:Q9(n),multi:!0,deps:[me,Se,bt,xt,[new Ie,Lr],[new Ie,pr],...e]}])}var gr=He(wO,!0);var vr=He(nO,!0,2);var x0=He(rO,!0,2);var N0=He(mO,!0);var TO=He(iO,!0);var CO=He(hO,!0,2);var M0=He(gO,!0,2);var bO=He(fO,!0,2);var DO="@firebase/database",SO="1.0.11";var xC="";function X9(n){xC=n}var j0=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),zt(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Eh(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var B0=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Gr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var o1=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new j0(e)}}catch{}return new B0},Zs=o1("localStorage"),$0=o1("sessionStorage");var $c=new ir("@firebase/database"),e8=function(){let n=1;return function(){return n++}}(),s1=function(n){let e=QD(n),t=new GD;t.update(e);let r=t.digest();return _h.encodeByteArray(r)},Md=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Md.apply(null,r):typeof r=="object"?e+=zt(r):e+=r,e+=" "}return e},Js=null,AO=!0,t8=function(n,e){$(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?($c.logLevel=en.VERBOSE,Js=$c.log.bind($c),e&&$0.set("logging_enabled",!0)):typeof n=="function"?Js=n:(Js=null,$0.remove("logging_enabled"))},mn=function(...n){if(AO===!0&&(AO=!1,Js===null&&$0.get("logging_enabled")===!0&&t8(!0)),Js){let e=Md.apply(null,n);Js(e)}},Pd=function(n){return function(...e){mn(n,...e)}},H0=function(...n){let e="FIREBASE INTERNAL ERROR: "+Md(...n);$c.error(e)},Hi=function(...n){let e=`FIREBASE FATAL ERROR: ${Md(...n)}`;throw $c.error(e),new Error(e)},tr=function(...n){let e="FIREBASE WARNING: "+Md(...n);$c.warn(e)},n8=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&tr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},a1=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},r8=function(n){if(qr()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Wc="[MIN_NAME]",Xs="[MAX_NAME]",Zc=function(n,e){if(n===e)return 0;if(n===Wc||e===Xs)return-1;if(e===Wc||n===Xs)return 1;{let t=RO(n),r=RO(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},i8=function(n,e){return n===e?0:n<e?-1:1},wd=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+zt(e))},NC=function(n){if(typeof n!="object"||n===null)return zt(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=zt(e[r]),t+=":",t+=NC(n[e[r]]);return t+="}",t},c1=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function wr(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var l1=function(n){$(!a1(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,o,s,a,c;n===0?(o=0,s=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=a+r,s=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(o=0,s=Math.round(n/Math.pow(2,1-r-t))));let u=[];for(c=t;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);for(c=e;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);u.push(i?1:0),u.reverse();let d=u.join(""),f="";for(c=0;c<64;c+=8){let m=parseInt(d.substr(c,8),2).toString(16);m.length===1&&(m="0"+m),f=f+m}return f.toLowerCase()},o8=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},s8=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var a8=new RegExp("^-?(0*)\\d{1,10}$"),c8=-2147483648,l8=2147483647,RO=function(n){if(a8.test(n)){let e=Number(n);if(e>=c8&&e<=l8)return e}return null},kd=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw tr("Exception was thrown by user callback.",t),e},Math.floor(0))}},u8=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},bd=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var W0=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){tr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var q0=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(mn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',tr(e)}},Dd=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),dg="5",u1="v",d1="s",h1="r",f1="f",p1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,m1="ls",g1="p",z0="ac",v1="websocket",y1="long_polling";var hg=class{constructor(e,t,r,i,o=!1,s="",a=!1,c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Zs.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Zs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function d8(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function _1(n,e,t){$(typeof e=="string","typeof type must == string"),$(typeof t=="object","typeof params must == object");let r;if(e===v1)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===y1)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);d8(n)&&(t.ns=n.namespace);let i=[];return wr(t,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var G0=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Gr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return jD(this.counters_)}};var P0={},k0={};function MC(n){let e=n.toString();return P0[e]||(P0[e]=new G0),P0[e]}function h8(n,e){let t=n.toString();return k0[t]||(k0[t]=e()),k0[t]}var K0=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&kd(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var xO="start",f8="close",p8="pLPCommand",m8="pRTLPCB",w1="id",E1="pw",I1="ser",g8="cb",v8="seg",y8="ts",_8="d",w8="dframe",T1=1870,C1=30,E8=T1-C1,I8=25e3,T8=3e4,Y0=class n{constructor(e,t,r,i,o,s,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Pd(e),this.stats_=MC(t),this.urlFn=c=>(this.appCheckToken&&(c[z0]=this.appCheckToken),_1(t,y1,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new K0(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(T8)),r8(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Q0((...o)=>{let[s,a,c,u,d]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===xO)this.id=a,this.password=c;else if(s===f8)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[xO]="t",r[I1]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[g8]=this.scriptTagHolder.uniqueCallbackIdentifier),r[u1]=dg,this.transportSessionId&&(r[d1]=this.transportSessionId),this.lastSessionId&&(r[m1]=this.lastSessionId),this.applicationId&&(r[g1]=this.applicationId),this.appCheckToken&&(r[z0]=this.appCheckToken),typeof location<"u"&&location.hostname&&p1.test(location.hostname)&&(r[h1]=f1);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return qr()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!o8()&&!s8()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=zt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=VD(t),i=c1(r,E8);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(qr())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[w8]="t",r[w1]=e,r[E1]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=zt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},Q0=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,qr())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=e8(),window[p8+this.uniqueCallbackIdentifier]=e,window[m8+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){mn("frame writing exception"),a.stack&&mn(a.stack),mn(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||mn("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[w1]=this.myID,e[E1]=this.myPW,e[I1]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+C1+r.length<=T1;){let s=this.pendingSegs.shift();r=r+"&"+v8+i+"="+s.seg+"&"+y8+i+"="+s.ts+"&"+_8+i+"="+s.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(I8)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,t){qr()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{mn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var C8=16384,b8=45e3,fg=null;typeof MozWebSocket<"u"?fg=MozWebSocket:typeof WebSocket<"u"&&(fg=WebSocket);var Ed=(()=>{class n{constructor(t,r,i,o,s,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Pd(this.connId),this.stats_=MC(r),this.connURL=n.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,s){let a={};return a[u1]=dg,!qr()&&typeof location<"u"&&location.hostname&&p1.test(location.hostname)&&(a[h1]=f1),r&&(a[d1]=r),i&&(a[m1]=i),o&&(a[z0]=o),s&&(a[g1]=s),_1(t,v1,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Zs.set("previous_websocket_failure",!0);try{let i;if(qr()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${dg}/${xC}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new fg(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&fg!==null&&!n.forceDisallow_}static previouslyFailed(){return Zs.isInMemoryStorage||Zs.get("previous_websocket_failure")===!0}markConnectionHealthy(){Zs.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Eh(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if($(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=zt(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=c1(r,C8);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(b8))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),D8=(()=>{class n{static get ALL_TRANSPORTS(){return[Y0,Ed]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){let r=Ed&&Ed.isAvailable(),i=r&&!Ed.previouslyFailed();if(t.webSocketOnly&&(r||tr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ed];else{let o=this.transports_=[];for(let s of n.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),S8=6e4,A8=5e3,R8=10*1024,x8=100*1024,O0="t",NO="d",N8="s",MO="r",M8="e",PO="o",kO="a",OO="n",FO="p",P8="h",Z0=class{constructor(e,t,r,i,o,s,a,c,u,d){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Pd("c:"+this.id+":"),this.transportManager_=new D8(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=bd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>x8?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>R8?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(O0 in e){let t=e[O0];t===kO?this.upgradeIfSecondaryHealthy_():t===MO?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===PO&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=wd("t",e),r=wd("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:FO,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:kO,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:OO,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=wd("t",e),r=wd("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=wd(O0,e);if(NO in e){let r=e[NO];if(t===P8){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===OO){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===N8?this.onConnectionShutdown_(r):t===MO?this.onReset_(r):t===M8?H0("Server Error: "+r):t===PO?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):H0("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),dg!==r&&tr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),bd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(S8))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):bd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(A8))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:FO,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Zs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var pg=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var mg=class{constructor(e){this.allowedEvents_=e,this.listeners_={},$(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){$(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var gg=class n extends mg{static getInstance(){return new n}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Fl()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return $(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var LO=32,VO=768,tt=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function Ye(){return new tt("")}function je(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Bo(n){return n.pieces_.length-n.pieceNum_}function ct(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new tt(n.pieces_,e)}function b1(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function k8(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function D1(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function S1(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new tt(e,0)}function Zt(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof tt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new tt(t,0)}function Fe(n){return n.pieceNum_>=n.pieces_.length}function yr(n,e){let t=je(n),r=je(e);if(t===null)return e;if(t===r)return yr(ct(n),ct(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function A1(n,e){if(Bo(n)!==Bo(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function $r(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Bo(n)>Bo(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var J0=class{constructor(e,t){this.errorPrefix_=t,this.parts_=D1(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=$l(this.parts_[r]);R1(this)}};function O8(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=$l(e),R1(n)}function F8(n){let e=n.parts_.pop();n.byteLength_-=$l(e),n.parts_.length>0&&(n.byteLength_-=1)}function R1(n){if(n.byteLength_>VO)throw new Error(n.errorPrefix_+"has a key path longer than "+VO+" bytes ("+n.byteLength_+").");if(n.parts_.length>LO)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+LO+") or object contains a cycle "+Qs(n))}function Qs(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var X0=class n extends mg{static getInstance(){return new n}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return $(e==="visible","Unknown event type: "+e),[this.visible_]}};var Id=1e3,L8=60*5*1e3,UO=30*1e3,V8=1.3,U8=3e4,j8="server_kill",jO=3,PC=(()=>{class n extends pg{constructor(t,r,i,o,s,a,c,u){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=n.nextPersistentConnectionId_++,this.log_=Pd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Id,this.maxReconnectDelay_=L8,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!qr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");X0.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&gg.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let o=++this.requestNumber_,s={r:o,a:t,b:r};this.log_(zt(s)),$(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();let r=new fa,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(t,r,i,o){this.initConnection_();let s=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),$(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),$(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest(a,s,c=>{let u=c.d,d=c.s;n.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,o),t.onComplete&&t.onComplete(d,u))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Gr(t,"w")){let i=Xo(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();tr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||zD(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=UO)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=qD(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===t&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),$(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);let s={p:t},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+t,s),this.sendRequest(t,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:t,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+zt(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):H0("Unrecognized action received from server: "+zt(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){$(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Id,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Id,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>U8&&(this.reconnectDelay_=Id),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*V8)}this.onConnectStatus_(!1)}establishConnection_(){return y(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+n.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,u=function(){c?c.close():(a=!0,i())},d=function(m){$(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(m)};this.realtime_={close:u,sendRequest:d};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[m,v]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?mn("getToken() completed but was canceled"):(mn("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=v&&v.token,c=new Z0(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,w=>{tr(w+" ("+this.repoInfo_.toString()+")"),this.interrupt(j8)},s))}catch(m){this.log_("Failed to get token: "+m),a||(this.repoInfo_.nodeAdmin&&tr(m),u())}}})}interrupt(t){mn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){mn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Ul(this.interruptReasons_)&&(this.reconnectDelay_=Id,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(s=>NC(s)).join("$"):i="default";let o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){let i=new tt(t).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){mn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=jO&&(this.reconnectDelay_=UO,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){mn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=jO&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";qr()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+xC.replace(/\./g,"-")]=1,Fl()?t["framework.cordova"]=1:wh()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=gg.getInstance().currentlyOnline();return Ul(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),Be=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var qc=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new Be(Wc,e),i=new Be(Wc,t);return this.compare(r,i)!==0}minPost(){return Be.MIN}};var ug,vg=class extends qc{static get __EMPTY_NODE(){return ug}static set __EMPTY_NODE(e){ug=e}compare(e,t){return Zc(e.name,t.name)}isDefinedOn(e){throw ha("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Be.MIN}maxPost(){return new Be(Xs,ug)}makePost(e,t){return $(typeof e=="string","KeyIndex indexValue must always be a string."),new Be(e,ug)}toString(){return".key"}},Hc=new vg;var jc=class{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=t?r(e.key,t):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Br=(()=>{class n{constructor(t,r,i,o,s){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??_r.EMPTY_NODE,this.right=s??_r.EMPTY_NODE}copy(t,r,i,o,s){return new n(t??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this,s=i(t,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(t,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return _r.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return _r.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),eC=class{copy(e,t,r,i,o){return this}insert(e,t,r){return new Br(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},_r=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Br.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Br.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new jc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new jc(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new jc(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new jc(this.root_,null,this.comparator_,!0,e)}};_r.EMPTY_NODE=new eC;function B8(n,e){return Zc(n.name,e.name)}function kC(n,e){return Zc(n,e)}var tC;function $8(n){tC=n}var x1=function(n){return typeof n=="number"?"number:"+l1(n):"string:"+n},N1=function(n){if(n.isLeafNode()){let e=n.val();$(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Gr(e,".sv"),"Priority must be a string or number.")}else $(n===tC||n.isEmpty(),"priority of unexpected type.");$(n===tC||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var BO,zc=(()=>{class n{static set __childrenNodeConstructor(t){BO=t}static get __childrenNodeConstructor(){return BO}constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,$(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),N1(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Fe(t)?this:je(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=je(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:($(i!==".priority"||Bo(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ct(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+x1(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=l1(this.value_):t+=this.value_,this.lazyHash_=s1(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:($(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),s=n.VALUE_TYPE_ORDER.indexOf(i);return $(o>=0,"Unknown leaf type: "+r),$(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),M1,P1;function H8(n){M1=n}function W8(n){P1=n}var nC=class extends qc{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return o===0?Zc(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Be.MIN}maxPost(){return new Be(Xs,new zc("[PRIORITY-POST]",P1))}makePost(e,t){let r=M1(e);return new Be(t,new zc("[PRIORITY-POST]",r))}toString(){return".priority"}},vn=new nC;var q8=Math.log(2),rC=class{constructor(e){let t=o=>parseInt(Math.log(o)/q8,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},yg=function(n,e,t,r){n.sort(e);let i=function(c,u){let d=u-c,f,m;if(d===0)return null;if(d===1)return f=n[c],m=t?t(f):f,new Br(m,f.node,Br.BLACK,null,null);{let v=parseInt(d/2,10)+c,w=i(c,v),P=i(v+1,u);return f=n[v],m=t?t(f):f,new Br(m,f.node,Br.BLACK,w,P)}},o=function(c){let u=null,d=null,f=n.length,m=function(w,P){let N=f-w,L=f;f-=w;let W=i(N+1,L),Y=n[N],re=t?t(Y):Y;v(new Br(re,Y.node,P,null,W))},v=function(w){u?(u.left=w,u=w):(d=w,u=w)};for(let w=0;w<c.count;++w){let P=c.nextBitIsOne(),N=Math.pow(2,c.count-(w+1));P?m(N,Br.BLACK):(m(N,Br.BLACK),m(N,Br.RED))}return d},s=new rC(n.length),a=o(s);return new _r(r||e,a)};var F0,Uc={},Gc=class n{static get Default(){return $(Uc&&vn,"ChildrenNode.ts has not been loaded"),F0=F0||new n({".priority":Uc},{".priority":vn}),F0}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){let t=Xo(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof _r?t:null}hasIndex(e){return Gr(this.indexSet_,e.toString())}addIndex(e,t){$(e!==Hc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=t.getIterator(Be.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=yg(r,e.getCompare()):a=Uc;let c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new n(d,u)}addToIndexes(e,t){let r=jl(this.indexes_,(i,o)=>{let s=Xo(this.indexSet_,o);if($(s,"Missing index implementation for "+o),i===Uc)if(s.isDefinedOn(e.node)){let a=[],c=t.getIterator(Be.Wrap),u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),yg(a,s.getCompare())}else return Uc;else{let a=t.get(e.name),c=i;return a&&(c=c.remove(new Be(e.name,a))),c.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=jl(this.indexes_,i=>{if(i===Uc)return i;{let o=t.get(e.name);return o?i.remove(new Be(e.name,o)):i}});return new n(r,this.indexSet_)}};var Td,yt=(()=>{class n{static get EMPTY_NODE(){return Td||(Td=new n(new _r(kC),null,Gc.Default))}constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&N1(this.priorityNode_),this.children_.isEmpty()&&$(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Td}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?Td:r}}getChild(t){let r=je(t);return r===null?this:this.getImmediateChild(r).getChild(ct(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if($(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new Be(t,r),o,s;r.isEmpty()?(o=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?Td:this.priorityNode_;return new n(o,a,s)}}updateChild(t,r){let i=je(t);if(i===null)return r;{$(je(t)!==".priority"||Bo(t)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(ct(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(vn,(a,c)=>{r[a]=c.val(t),i++,s&&n.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!t&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+x1(this.getPriority().val())+":"),this.forEachChild(vn,(r,i)=>{let o=i.hash();o!==""&&(t+=":"+r+":"+o)}),this.lazyHash_=t===""?"":s1(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new Be(t,r));return s?s.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new Be(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new Be(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{let o=this.children_.getIteratorFrom(t.name,Be.Wrap),s=o.peek();for(;s!=null&&r.compare(s,t)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{let o=this.children_.getReverseIteratorFrom(t.name,Be.Wrap),s=o.peek();for(;s!=null&&r.compare(s,t)>0;)o.getNext(),s=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Od?-1:0}withIndex(t){if(t===Hc||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Hc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(vn),o=r.getIterator(vn),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===Hc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),iC=class extends yt{constructor(){super(new _r(kC),yt.EMPTY_NODE,Gc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return yt.EMPTY_NODE}isEmpty(){return!1}},Od=new iC;Object.defineProperties(Be,{MIN:{value:new Be(Wc,yt.EMPTY_NODE)},MAX:{value:new Be(Xs,Od)}});vg.__EMPTY_NODE=yt.EMPTY_NODE;zc.__childrenNodeConstructor=yt;$8(Od);W8(Od);var z8=!0;function gn(n,e=null){if(n===null)return yt.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),$(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new zc(t,gn(e))}if(!(n instanceof Array)&&z8){let t=[],r=!1;if(wr(n,(s,a)=>{if(s.substring(0,1)!=="."){let c=gn(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new Be(s,c)))}}),t.length===0)return yt.EMPTY_NODE;let o=yg(t,B8,s=>s.name,kC);if(r){let s=yg(t,vn.getCompare());return new yt(o,gn(e),new Gc({".priority":s},{".priority":vn}))}else return new yt(o,gn(e),Gc.Default)}else{let t=yt.EMPTY_NODE;return wr(n,(r,i)=>{if(Gr(n,r)&&r.substring(0,1)!=="."){let o=gn(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(gn(e))}}H8(gn);var oC=class extends qc{constructor(e){super(),this.indexPath_=e,$(!Fe(e)&&je(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return o===0?Zc(e.name,t.name):o}makePost(e,t){let r=gn(e),i=yt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Be(t,i)}maxPost(){let e=yt.EMPTY_NODE.updateChild(this.indexPath_,Od);return new Be(Xs,e)}toString(){return D1(this.indexPath_,0).join("/")}};var sC=class extends qc{compare(e,t){let r=e.node.compareTo(t.node);return r===0?Zc(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Be.MIN}maxPost(){return Be.MAX}makePost(e,t){let r=gn(e);return new Be(t,r)}toString(){return".value"}},G8=new sC;function K8(n){return{type:"value",snapshotNode:n}}function Y8(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Q8(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function $O(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function Z8(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var aC=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=vn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return $(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return $(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wc}hasEnd(){return this.endSet_}getIndexEndValue(){return $(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return $(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Xs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return $(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===vn}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function HO(n){let e={};if(n.isDefault())return e;let t;if(n.index_===vn?t="$priority":n.index_===G8?t="$value":n.index_===Hc?t="$key":($(n.index_ instanceof oC,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=zt(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=zt(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+zt(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=zt(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+zt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function WO(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==vn&&(e.i=n.index_.toString()),e}var cC=class n extends pg{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:($(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Pd("p:rest:"),this.listens_={}}listen(e,t,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=n.getListenId_(e,r),a={};this.listens_[s]=a;let c=HO(e._queryParams);this.restRequest_(o+".json",c,(u,d)=>{let f=d;if(u===404&&(f=null,u=null),u===null&&this.onDataUpdate_(o,f,!1,r),Xo(this.listens_,s)===a){let m;u?u===401?m="permission_denied":m="rest_error:"+u:m="ok",i(m,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=HO(e._queryParams),r=e._path.toString(),i=new fa;return this.restRequest_(r+".json",t,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+es(t);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Eh(a.responseText)}catch{tr("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&tr("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var lC=class{constructor(){this.rootNode_=yt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function _g(){return{value:null,children:new Map}}function k1(n,e,t){if(Fe(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=je(e);n.children.has(r)||n.children.set(r,_g());let i=n.children.get(r);e=ct(e),k1(i,e,t)}}function uC(n,e,t){n.value!==null?t(e,n.value):J8(n,(r,i)=>{let o=new tt(e.toString()+"/"+r);uC(i,o,t)})}function J8(n,e){n.children.forEach((t,r)=>{e(r,t)})}var dC=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&wr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var qO=10*1e3,X8=30*1e3,eK=5*60*1e3,hC=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new dC(e);let r=qO+(X8-qO)*Math.random();bd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;wr(e,(i,o)=>{o>0&&Gr(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),bd(this.reportStats_.bind(this),Math.floor(Math.random()*2*eK))}};var $i=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}($i||{});function O1(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function F1(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function L1(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var fC=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=$i.ACK_USER_WRITE,this.source=O1()}operationForChild(e){if(Fe(this.path)){if(this.affectedTree.value!=null)return $(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new tt(e));return new n(Ye(),t,this.revert)}}else return $(je(this.path)===e,"operationForChild called for unrelated child."),new n(ct(this.path),this.affectedTree,this.revert)}};var Kc=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=$i.OVERWRITE}operationForChild(e){return Fe(this.path)?new n(this.source,Ye(),this.snap.getImmediateChild(e)):new n(this.source,ct(this.path),this.snap)}};var wg=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=$i.MERGE}operationForChild(e){if(Fe(this.path)){let t=this.children.subtree(new tt(e));return t.isEmpty()?null:t.value?new Kc(this.source,Ye(),t.value):new n(this.source,Ye(),t)}else return $(je(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,ct(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Rd=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Fe(e))return this.isFullyInitialized()&&!this.filtered_;let t=je(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function tK(n,e,t,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&n.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(Z8(s.childName,s.snapshotNode))}),Cd(n,i,"child_removed",e,r,t),Cd(n,i,"child_added",e,r,t),Cd(n,i,"child_moved",o,r,t),Cd(n,i,"child_changed",e,r,t),Cd(n,i,"value",e,r,t),i}function Cd(n,e,t,r,i,o){let s=r.filter(a=>a.type===t);s.sort((a,c)=>rK(n,a,c)),s.forEach(a=>{let c=nK(n,a,o);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,n.query_))})})}function nK(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function rK(n,e,t){if(e.childName==null||t.childName==null)throw ha("Should only compare child_ events.");let r=new Be(e.childName,e.snapshotNode),i=new Be(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function V1(n,e){return{eventCache:n,serverCache:e}}function Sd(n,e,t,r){return V1(new Rd(e,t,r),n.serverCache)}function U1(n,e,t,r){return V1(n.eventCache,new Rd(e,t,r))}function pC(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ea(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var L0,iK=()=>(L0||(L0=new _r(i8)),L0),Wn=class n{static fromObject(e){let t=new n(null);return wr(e,(r,i)=>{t=t.set(new tt(r),i)}),t}constructor(e,t=iK()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Ye(),value:this.value};if(Fe(e))return null;{let r=je(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(ct(e),t);return o!=null?{path:Zt(new tt(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Fe(e))return this;{let t=je(e),r=this.children.get(t);return r!==null?r.subtree(ct(e)):new n(null)}}set(e,t){if(Fe(e))return new n(t,this.children);{let r=je(e),o=(this.children.get(r)||new n(null)).set(ct(e),t),s=this.children.insert(r,o);return new n(this.value,s)}}remove(e){if(Fe(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=je(e),r=this.children.get(t);if(r){let i=r.remove(ct(e)),o;return i.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,i),this.value===null&&o.isEmpty()?new n(null):new n(this.value,o)}else return this}}get(e){if(Fe(e))return this.value;{let t=je(e),r=this.children.get(t);return r?r.get(ct(e)):null}}setTree(e,t){if(Fe(e))return t;{let r=je(e),o=(this.children.get(r)||new n(null)).setTree(ct(e),t),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new n(this.value,s)}}fold(e){return this.fold_(Ye(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Zt(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Ye(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(Fe(e))return null;{let o=je(e),s=this.children.get(o);return s?s.findOnPath_(ct(e),Zt(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Ye(),t)}foreachOnPath_(e,t,r){if(Fe(e))return this;{this.value&&r(t,this.value);let i=je(e),o=this.children.get(i);return o?o.foreachOnPath_(ct(e),Zt(t,i),r):new n(null)}}foreach(e){this.foreach_(Ye(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Zt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var Hr=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new Wn(null))}};function Ad(n,e,t){if(Fe(e))return new Hr(new Wn(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=yr(i,e);return o=o.updateChild(s,t),new Hr(n.writeTree_.set(i,o))}else{let i=new Wn(t),o=n.writeTree_.setTree(e,i);return new Hr(o)}}}function zO(n,e,t){let r=n;return wr(t,(i,o)=>{r=Ad(r,Zt(e,i),o)}),r}function GO(n,e){if(Fe(e))return Hr.empty();{let t=n.writeTree_.setTree(e,new Wn(null));return new Hr(t)}}function mC(n,e){return ta(n,e)!=null}function ta(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(yr(t.path,e)):null}function KO(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(vn,(r,i)=>{e.push(new Be(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Be(r,i.value))}),e}function jo(n,e){if(Fe(e))return n;{let t=ta(n,e);return t!=null?new Hr(new Wn(t)):new Hr(n.writeTree_.subtree(e))}}function gC(n){return n.writeTree_.isEmpty()}function Yc(n,e){return j1(Ye(),n.writeTree_,e)}function j1(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?($(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=j1(Zt(n,i),o,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Zt(n,".priority"),r)),t}}function B1(n,e){return z1(e,n)}function oK(n,e,t,r,i){$(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Ad(n.visibleWrites,e,t)),n.lastWriteId=r}function sK(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function aK(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);$(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,s=n.allWrites.length-1;for(;i&&s>=0;){let a=n.allWrites[s];a.visible&&(s>=t&&cK(a,r.path)?i=!1:$r(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return lK(n),!0;if(r.snap)n.visibleWrites=GO(n.visibleWrites,r.path);else{let a=r.children;wr(a,c=>{n.visibleWrites=GO(n.visibleWrites,Zt(r.path,c))})}return!0}else return!1}function cK(n,e){if(n.snap)return $r(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&$r(Zt(n.path,t),e))return!0;return!1}function lK(n){n.visibleWrites=$1(n.allWrites,uK,Ye()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function uK(n){return n.visible}function $1(n,e,t){let r=Hr.empty();for(let i=0;i<n.length;++i){let o=n[i];if(e(o)){let s=o.path,a;if(o.snap)$r(t,s)?(a=yr(t,s),r=Ad(r,a,o.snap)):$r(s,t)&&(a=yr(s,t),r=Ad(r,Ye(),o.snap.getChild(a)));else if(o.children){if($r(t,s))a=yr(t,s),r=zO(r,a,o.children);else if($r(s,t))if(a=yr(s,t),Fe(a))r=zO(r,Ye(),o.children);else{let c=Xo(o.children,je(a));if(c){let u=c.getChild(ct(a));r=Ad(r,Ye(),u)}}}else throw ha("WriteRecord should have .snap or .children")}}return r}function H1(n,e,t,r,i){if(!r&&!i){let o=ta(n.visibleWrites,e);if(o!=null)return o;{let s=jo(n.visibleWrites,e);if(gC(s))return t;if(t==null&&!mC(s,Ye()))return null;{let a=t||yt.EMPTY_NODE;return Yc(s,a)}}}else{let o=jo(n.visibleWrites,e);if(!i&&gC(o))return t;if(!i&&t==null&&!mC(o,Ye()))return null;{let s=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&($r(u.path,e)||$r(e,u.path))},a=$1(n.allWrites,s,e),c=t||yt.EMPTY_NODE;return Yc(a,c)}}}function dK(n,e,t){let r=yt.EMPTY_NODE,i=ta(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(vn,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(t){let o=jo(n.visibleWrites,e);return t.forEachChild(vn,(s,a)=>{let c=Yc(jo(o,new tt(s)),a);r=r.updateImmediateChild(s,c)}),KO(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=jo(n.visibleWrites,e);return KO(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function hK(n,e,t,r,i){$(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=Zt(e,t);if(mC(n.visibleWrites,o))return null;{let s=jo(n.visibleWrites,o);return gC(s)?i.getChild(t):Yc(s,i.getChild(t))}}function fK(n,e,t,r){let i=Zt(e,t),o=ta(n.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(t)){let s=jo(n.visibleWrites,i);return Yc(s,r.getNode().getImmediateChild(t))}else return null}function pK(n,e){return ta(n.visibleWrites,e)}function mK(n,e,t,r,i,o,s){let a,c=jo(n.visibleWrites,e),u=ta(c,Ye());if(u!=null)a=u;else if(t!=null)a=Yc(c,t);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let d=[],f=s.getCompare(),m=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),v=m.getNext();for(;v&&d.length<i;)f(v,r)!==0&&d.push(v),v=m.getNext();return d}else return[]}function gK(){return{visibleWrites:Hr.empty(),allWrites:[],lastWriteId:-1}}function vC(n,e,t,r){return H1(n.writeTree,n.treePath,e,t,r)}function W1(n,e){return dK(n.writeTree,n.treePath,e)}function YO(n,e,t,r){return hK(n.writeTree,n.treePath,e,t,r)}function Eg(n,e){return pK(n.writeTree,Zt(n.treePath,e))}function vK(n,e,t,r,i,o){return mK(n.writeTree,n.treePath,e,t,r,i,o)}function OC(n,e,t){return fK(n.writeTree,n.treePath,e,t)}function q1(n,e){return z1(Zt(n.treePath,e),n.writeTree)}function z1(n,e){return{treePath:n,writeTree:e}}var yC=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;$(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),$(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,$O(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,Q8(r,i.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,Y8(r,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,$O(r,e.snapshotNode,i.oldSnap));else throw ha("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var _C=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},G1=new _C,xd=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Rd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return OC(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ea(this.viewCache_),o=vK(this.writes_,i,t,1,r,e);return o.length===0?null:o[0]}};function yK(n,e){$(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),$(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function _K(n,e,t,r,i){let o=new yC,s,a;if(t.type===$i.OVERWRITE){let u=t;u.source.fromUser?s=wC(n,e,u.path,u.snap,r,i,o):($(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Fe(u.path),s=Ig(n,e,u.path,u.snap,r,i,a,o))}else if(t.type===$i.MERGE){let u=t;u.source.fromUser?s=EK(n,e,u.path,u.children,r,i,o):($(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),s=EC(n,e,u.path,u.children,r,i,a,o))}else if(t.type===$i.ACK_USER_WRITE){let u=t;u.revert?s=CK(n,e,u.path,r,i,o):s=IK(n,e,u.path,u.affectedTree,r,i,o)}else if(t.type===$i.LISTEN_COMPLETE)s=TK(n,e,t.path,r,o);else throw ha("Unknown operation type: "+t.type);let c=o.getChanges();return wK(e,s,c),{viewCache:s,changes:c}}function wK(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=pC(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(K8(pC(e)))}}function K1(n,e,t,r,i,o){let s=e.eventCache;if(Eg(r,t)!=null)return e;{let a,c;if(Fe(t))if($(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let u=ea(e),d=u instanceof yt?u:yt.EMPTY_NODE,f=W1(r,d);a=n.filter.updateFullNode(e.eventCache.getNode(),f,o)}else{let u=vC(r,ea(e));a=n.filter.updateFullNode(e.eventCache.getNode(),u,o)}else{let u=je(t);if(u===".priority"){$(Bo(t)===1,"Can't have a priority with additional path components");let d=s.getNode();c=e.serverCache.getNode();let f=YO(r,t,d,c);f!=null?a=n.filter.updatePriority(d,f):a=s.getNode()}else{let d=ct(t),f;if(s.isCompleteForChild(u)){c=e.serverCache.getNode();let m=YO(r,t,s.getNode(),c);m!=null?f=s.getNode().getImmediateChild(u).updateChild(d,m):f=s.getNode().getImmediateChild(u)}else f=OC(r,u,e.serverCache);f!=null?a=n.filter.updateChild(s.getNode(),u,f,d,i,o):a=s.getNode()}}return Sd(e,a,s.isFullyInitialized()||Fe(t),n.filter.filtersNodes())}}function Ig(n,e,t,r,i,o,s,a){let c=e.serverCache,u,d=s?n.filter:n.filter.getIndexedFilter();if(Fe(t))u=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){let v=c.getNode().updateChild(t,r);u=d.updateFullNode(c.getNode(),v,null)}else{let v=je(t);if(!c.isCompleteForPath(t)&&Bo(t)>1)return e;let w=ct(t),N=c.getNode().getImmediateChild(v).updateChild(w,r);v===".priority"?u=d.updatePriority(c.getNode(),N):u=d.updateChild(c.getNode(),v,N,w,G1,null)}let f=U1(e,u,c.isFullyInitialized()||Fe(t),d.filtersNodes()),m=new xd(i,f,o);return K1(n,f,t,i,m,a)}function wC(n,e,t,r,i,o,s){let a=e.eventCache,c,u,d=new xd(i,e,o);if(Fe(t))u=n.filter.updateFullNode(e.eventCache.getNode(),r,s),c=Sd(e,u,!0,n.filter.filtersNodes());else{let f=je(t);if(f===".priority")u=n.filter.updatePriority(e.eventCache.getNode(),r),c=Sd(e,u,a.isFullyInitialized(),a.isFiltered());else{let m=ct(t),v=a.getNode().getImmediateChild(f),w;if(Fe(m))w=r;else{let P=d.getCompleteChild(f);P!=null?b1(m)===".priority"&&P.getChild(S1(m)).isEmpty()?w=P:w=P.updateChild(m,r):w=yt.EMPTY_NODE}if(v.equals(w))c=e;else{let P=n.filter.updateChild(a.getNode(),f,w,m,d,s);c=Sd(e,P,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function QO(n,e){return n.eventCache.isCompleteForChild(e)}function EK(n,e,t,r,i,o,s){let a=e;return r.foreach((c,u)=>{let d=Zt(t,c);QO(e,je(d))&&(a=wC(n,a,d,u,i,o,s))}),r.foreach((c,u)=>{let d=Zt(t,c);QO(e,je(d))||(a=wC(n,a,d,u,i,o,s))}),a}function ZO(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function EC(n,e,t,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;Fe(t)?u=r:u=new Wn(null).setTree(t,r);let d=e.serverCache.getNode();return u.children.inorderTraversal((f,m)=>{if(d.hasChild(f)){let v=e.serverCache.getNode().getImmediateChild(f),w=ZO(n,v,m);c=Ig(n,c,new tt(f),w,i,o,s,a)}}),u.children.inorderTraversal((f,m)=>{let v=!e.serverCache.isCompleteForChild(f)&&m.value===null;if(!d.hasChild(f)&&!v){let w=e.serverCache.getNode().getImmediateChild(f),P=ZO(n,w,m);c=Ig(n,c,new tt(f),P,i,o,s,a)}}),c}function IK(n,e,t,r,i,o,s){if(Eg(i,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Fe(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return Ig(n,e,t,c.getNode().getChild(t),i,o,a,s);if(Fe(t)){let u=new Wn(null);return c.getNode().forEachChild(Hc,(d,f)=>{u=u.set(new tt(d),f)}),EC(n,e,t,u,i,o,a,s)}else return e}else{let u=new Wn(null);return r.foreach((d,f)=>{let m=Zt(t,d);c.isCompleteForPath(m)&&(u=u.set(d,c.getNode().getChild(m)))}),EC(n,e,t,u,i,o,a,s)}}function TK(n,e,t,r,i){let o=e.serverCache,s=U1(e,o.getNode(),o.isFullyInitialized()||Fe(t),o.isFiltered());return K1(n,s,t,r,G1,i)}function CK(n,e,t,r,i,o){let s;if(Eg(r,t)!=null)return e;{let a=new xd(r,e,i),c=e.eventCache.getNode(),u;if(Fe(t)||je(t)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=vC(r,ea(e));else{let f=e.serverCache.getNode();$(f instanceof yt,"serverChildren would be complete if leaf node"),d=W1(r,f)}d=d,u=n.filter.updateFullNode(c,d,o)}else{let d=je(t),f=OC(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?u=n.filter.updateChild(c,d,f,ct(t),a,o):e.eventCache.getNode().hasChild(d)?u=n.filter.updateChild(c,d,yt.EMPTY_NODE,ct(t),a,o):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=vC(r,ea(e)),s.isLeafNode()&&(u=n.filter.updateFullNode(u,s,o)))}return s=e.serverCache.isFullyInitialized()||Eg(r,Ye())!=null,Sd(e,u,s,n.filter.filtersNodes())}}function bK(n,e){let t=ea(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Fe(e)&&!t.getImmediateChild(je(e)).isEmpty())?t.getChild(e):null}function JO(n,e,t,r){e.type===$i.MERGE&&e.source.queryId!==null&&($(ea(n.viewCache_),"We should always have a full cache before handling merges"),$(pC(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,o=_K(n.processor_,i,e,t,r);return yK(n.processor_,o.viewCache),$(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,DK(n,o.changes,o.viewCache.eventCache.getNode(),null)}function DK(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return tK(n.eventGenerator_,e,t,i)}var XO;function SK(n){$(!XO,"__referenceConstructor has already been defined"),XO=n}function FC(n,e,t,r){let i=e.source.queryId;if(i!==null){let o=n.views.get(i);return $(o!=null,"SyncTree gave us an op for an invalid query."),JO(o,e,t,r)}else{let o=[];for(let s of n.views.values())o=o.concat(JO(s,e,t,r));return o}}function LC(n,e){let t=null;for(let r of n.views.values())t=t||bK(r,e);return t}var e1;function AK(n){$(!e1,"__referenceConstructor has already been defined"),e1=n}var Tg=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Wn(null),this.pendingWriteTree_=gK(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function RK(n,e,t,r,i){return oK(n.pendingWriteTree_,e,t,r,i),i?bg(n,new Kc(O1(),e,t)):[]}function Bc(n,e,t=!1){let r=sK(n.pendingWriteTree_,e);if(aK(n.pendingWriteTree_,e)){let o=new Wn(null);return r.snap!=null?o=o.set(Ye(),!0):wr(r.children,s=>{o=o.set(new tt(s),!0)}),bg(n,new fC(r.path,o,t))}else return[]}function Cg(n,e,t){return bg(n,new Kc(F1(),e,t))}function xK(n,e,t){let r=Wn.fromObject(t);return bg(n,new wg(F1(),e,r))}function NK(n,e,t,r){let i=J1(n,r);if(i!=null){let o=X1(i),s=o.path,a=o.queryId,c=yr(s,e),u=new Kc(L1(a),c,t);return eF(n,s,u)}else return[]}function MK(n,e,t,r){let i=J1(n,r);if(i){let o=X1(i),s=o.path,a=o.queryId,c=yr(s,e),u=Wn.fromObject(t),d=new wg(L1(a),c,u);return eF(n,s,d)}else return[]}function Y1(n,e,t){let i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(s,a)=>{let c=yr(s,e),u=LC(a,c);if(u)return u});return H1(i,e,o,t,!0)}function bg(n,e){return Q1(e,n.syncPointTree_,null,B1(n.pendingWriteTree_,Ye()))}function Q1(n,e,t,r){if(Fe(n.path))return Z1(n,e,t,r);{let i=e.get(Ye());t==null&&i!=null&&(t=LC(i,Ye()));let o=[],s=je(n.path),a=n.operationForChild(s),c=e.children.get(s);if(c&&a){let u=t?t.getImmediateChild(s):null,d=q1(r,s);o=o.concat(Q1(a,c,u,d))}return i&&(o=o.concat(FC(i,n,r,t))),o}}function Z1(n,e,t,r){let i=e.get(Ye());t==null&&i!=null&&(t=LC(i,Ye()));let o=[];return e.children.inorderTraversal((s,a)=>{let c=t?t.getImmediateChild(s):null,u=q1(r,s),d=n.operationForChild(s);d&&(o=o.concat(Z1(d,a,c,u)))}),i&&(o=o.concat(FC(i,n,r,t))),o}function J1(n,e){return n.tagToQueryMap.get(e)}function X1(n){let e=n.indexOf("$");return $(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new tt(n.substr(0,e))}}function eF(n,e,t){let r=n.syncPointTree_.get(e);$(r,"Missing sync point for query tag that we're tracking");let i=B1(n.pendingWriteTree_,e);return FC(r,t,i,null)}var IC=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},TC=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=Zt(this.path_,e);return new n(this.syncTree_,t)}node(){return Y1(this.syncTree_,this.path_)}},PK=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},t1=function(n,e,t){if(!n||typeof n!="object")return n;if($(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return kK(n[".sv"],e,t);if(typeof n[".sv"]=="object")return OK(n[".sv"],e);$(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},kK=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:$(!1,"Unexpected server value: "+n)}},OK=function(n,e,t){n.hasOwnProperty("increment")||$(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&$(!1,"Unexpected increment value: "+r);let i=e.node();if($(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},FK=function(n,e,t,r){return VC(e,new TC(t,n),r)},LK=function(n,e,t){return VC(n,new IC(e),t)};function VC(n,e,t){let r=n.getPriority().val(),i=t1(r,e.getImmediateChild(".priority"),t),o;if(n.isLeafNode()){let s=n,a=t1(s.getValue(),e,t);return a!==s.getValue()||i!==s.getPriority().val()?new zc(a,gn(i)):n}else{let s=n;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new zc(i))),s.forEachChild(vn,(a,c)=>{let u=VC(c,e.getImmediateChild(a),t);u!==c&&(o=o.updateImmediateChild(a,u))}),o}}var Nd=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function UC(n,e){let t=e instanceof tt?e:new tt(e),r=n,i=je(t);for(;i!==null;){let o=Xo(r.node.children,i)||{children:{},childCount:0};r=new Nd(i,r,o),t=ct(t),i=je(t)}return r}function Jc(n){return n.node.value}function tF(n,e){n.node.value=e,CC(n)}function nF(n){return n.node.childCount>0}function VK(n){return Jc(n)===void 0&&!nF(n)}function Dg(n,e){wr(n.node.children,(t,r)=>{e(new Nd(t,n,r))})}function rF(n,e,t,r){t&&!r&&e(n),Dg(n,i=>{rF(i,e,!0,r)}),t&&r&&e(n)}function UK(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Fd(n){return new tt(n.parent===null?n.name:Fd(n.parent)+"/"+n.name)}function CC(n){n.parent!==null&&jK(n.parent,n.name,n)}function jK(n,e,t){let r=VK(t),i=Gr(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,CC(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,CC(n))}var BK=/[\[\].#$\/\u0000-\u001F\u007F]/,$K=/[\[\].#$\u0000-\u001F\u007F]/,V0=10*1024*1024,iF=function(n){return typeof n=="string"&&n.length!==0&&!BK.test(n)},HK=function(n){return typeof n=="string"&&n.length!==0&&!$K.test(n)},WK=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),HK(n)};var oF=function(n,e,t){let r=t instanceof tt?new J0(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Qs(r));if(typeof e=="function")throw new Error(n+"contains a function "+Qs(r)+" with contents = "+e.toString());if(a1(e))throw new Error(n+"contains "+e.toString()+" "+Qs(r));if(typeof e=="string"&&e.length>V0/3&&$l(e)>V0)throw new Error(n+"contains a string greater than "+V0+" utf8 bytes "+Qs(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(wr(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!iF(s)))throw new Error(n+" contains an invalid key ("+s+") "+Qs(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);O8(r,s),oF(n,a,r),F8(r)}),i&&o)throw new Error(n+' contains ".value" child '+Qs(r)+" in addition to actual children.")}};var qK=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!iF(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!WK(t))throw new Error(YD(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var bC=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function zK(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();t!==null&&!A1(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function na(n,e,t){zK(n,t),GK(n,r=>$r(r,e)||$r(e,r))}function GK(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let o=i.path;e(o)?(KK(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function KK(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();Js&&mn("event: "+t.toString()),kd(r)}}}var YK="repo_interrupt",QK=25,DC=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new bC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=_g(),this.transactionQueueTree_=new Nd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function ZK(n,e,t){if(n.stats_=MC(n.repoInfo_),n.forceRestClient_||u8())n.server_=new cC(n.repoInfo_,(r,i,o,s)=>{n1(n,r,i,o,s)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>r1(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{zt(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new PC(n.repoInfo_,e,(r,i,o,s)=>{n1(n,r,i,o,s)},r=>{r1(n,r)},r=>{XK(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=h8(n.repoInfo_,()=>new hC(n.stats_,n.server_)),n.infoData_=new lC,n.infoSyncTree_=new Tg({startListening:(r,i,o,s)=>{let a=[],c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=Cg(n.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),jC(n,"connected",!1),n.serverSyncTree_=new Tg({startListening:(r,i,o,s)=>(n.server_.listen(r,o,i,(a,c)=>{let u=s(a,c);na(n.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function JK(n){let t=n.infoData_.getNode(new tt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function sF(n){return PK({timestamp:JK(n)})}function n1(n,e,t,r,i){n.dataUpdateCount++;let o=new tt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let s=[];if(i)if(r){let c=jl(t,u=>gn(u));s=MK(n.serverSyncTree_,o,c,i)}else{let c=gn(t);s=NK(n.serverSyncTree_,o,c,i)}else if(r){let c=jl(t,u=>gn(u));s=xK(n.serverSyncTree_,o,c)}else{let c=gn(t);s=Cg(n.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=$C(n,o)),na(n.eventQueue_,a,s)}function r1(n,e){jC(n,"connected",e),e===!1&&t7(n)}function XK(n,e){wr(e,(t,r)=>{jC(n,t,r)})}function jC(n,e,t){let r=new tt("/.info/"+e),i=gn(t);n.infoData_.updateSnapshot(r,i);let o=Cg(n.infoSyncTree_,r,i);na(n.eventQueue_,r,o)}function e7(n){return n.nextWriteId_++}function t7(n){aF(n,"onDisconnectEvents");let e=sF(n),t=_g();uC(n.onDisconnect_,Ye(),(i,o)=>{let s=FK(i,o,n.serverSyncTree_,e);k1(t,i,s)});let r=[];uC(t,Ye(),(i,o)=>{r=r.concat(Cg(n.serverSyncTree_,i,o));let s=o7(n,i);$C(n,s)}),n.onDisconnect_=_g(),na(n.eventQueue_,Ye(),r)}function n7(n){n.persistentConnection_&&n.persistentConnection_.interrupt(YK)}function aF(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),mn(t,...e)}function cF(n,e,t){return Y1(n.serverSyncTree_,e,t)||yt.EMPTY_NODE}function BC(n,e=n.transactionQueueTree_){if(e||Sg(n,e),Jc(e)){let t=uF(n,e);$(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&r7(n,Fd(e),t)}else nF(e)&&Dg(e,t=>{BC(n,t)})}function r7(n,e,t){let r=t.map(u=>u.currentWriteId),i=cF(n,e,r),o=i,s=i.hash();for(let u=0;u<t.length;u++){let d=t[u];$(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let f=yr(e,d.path);o=o.updateChild(f,d.currentOutputSnapshotRaw)}let a=o.val(!0),c=e;n.server_.put(c.toString(),a,u=>{aF(n,"transaction put response",{path:c.toString(),status:u});let d=[];if(u==="ok"){let f=[];for(let m=0;m<t.length;m++)t[m].status=2,d=d.concat(Bc(n.serverSyncTree_,t[m].currentWriteId)),t[m].onComplete&&f.push(()=>t[m].onComplete(null,!0,t[m].currentOutputSnapshotResolved)),t[m].unwatcher();Sg(n,UC(n.transactionQueueTree_,e)),BC(n,n.transactionQueueTree_),na(n.eventQueue_,e,d);for(let m=0;m<f.length;m++)kd(f[m])}else{if(u==="datastale")for(let f=0;f<t.length;f++)t[f].status===3?t[f].status=4:t[f].status=0;else{tr("transaction at "+c.toString()+" failed: "+u);for(let f=0;f<t.length;f++)t[f].status=4,t[f].abortReason=u}$C(n,e)}},s)}function $C(n,e){let t=lF(n,e),r=Fd(t),i=uF(n,t);return i7(n,i,r),r}function i7(n,e,t){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],u=yr(t,c.path),d=!1,f;if($(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,i=i.concat(Bc(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=QK)d=!0,f="maxretry",i=i.concat(Bc(n.serverSyncTree_,c.currentWriteId,!0));else{let m=cF(n,c.path,s);c.currentInputSnapshot=m;let v=e[a].update(m.val());if(v!==void 0){oF("transaction failed: Data returned ",v,c.path);let w=gn(v);typeof v=="object"&&v!=null&&Gr(v,".priority")||(w=w.updatePriority(m.getPriority()));let N=c.currentWriteId,L=sF(n),W=LK(w,m,L);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=W,c.currentWriteId=e7(n),s.splice(s.indexOf(N),1),i=i.concat(RK(n.serverSyncTree_,c.path,W,c.currentWriteId,c.applyLocally)),i=i.concat(Bc(n.serverSyncTree_,N,!0))}else d=!0,f="nodata",i=i.concat(Bc(n.serverSyncTree_,c.currentWriteId,!0))}na(n.eventQueue_,t,i),i=[],d&&(e[a].status=2,function(m){setTimeout(m,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}Sg(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)kd(r[a]);BC(n,n.transactionQueueTree_)}function lF(n,e){let t,r=n.transactionQueueTree_;for(t=je(e);t!==null&&Jc(r)===void 0;)r=UC(r,t),e=ct(e),t=je(e);return r}function uF(n,e){let t=[];return dF(n,e,t),t.sort((r,i)=>r.order-i.order),t}function dF(n,e,t){let r=Jc(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Dg(e,i=>{dF(n,i,t)})}function Sg(n,e){let t=Jc(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,tF(e,t.length>0?t:void 0)}Dg(e,r=>{Sg(n,r)})}function o7(n,e){let t=Fd(lF(n,e)),r=UC(n.transactionQueueTree_,e);return UK(r,i=>{U0(n,i)}),U0(n,r),rF(r,i=>{U0(n,i)}),t}function U0(n,e){let t=Jc(e);if(t){let r=[],i=[],o=-1;for(let s=0;s<t.length;s++)t[s].status===3||(t[s].status===1?($(o===s-1,"All SENT items should be at beginning of queue."),o=s,t[s].status=3,t[s].abortReason="set"):($(t[s].status===0,"Unexpected transaction status in abort"),t[s].unwatcher(),i=i.concat(Bc(n.serverSyncTree_,t[s].currentWriteId,!0)),t[s].onComplete&&r.push(t[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?tF(e,void 0):t.length=o+1,na(n.eventQueue_,Fd(e),i);for(let s=0;s<r.length;s++)kd(r[s])}}function s7(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function a7(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):tr(`Invalid query segment '${t}' in query '${n}'`)}return e}var i1=function(n,e){let t=c7(n),r=t.namespace;t.domain==="firebase.com"&&Hi(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Hi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||n8();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new hg(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new tt(t.pathString)}},c7=function(n){let e="",t="",r="",i="",o="",s=!0,a="https",c=443;if(typeof n=="string"){let u=n.indexOf("//");u>=0&&(a=n.substring(0,u-1),n=n.substring(u+2));let d=n.indexOf("/");d===-1&&(d=n.length);let f=n.indexOf("?");f===-1&&(f=n.length),e=n.substring(0,Math.min(d,f)),d<f&&(i=s7(n.substring(d,f)));let m=a7(n.substring(Math.min(n.length,f)));u=e.indexOf(":"),u>=0?(s=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;let v=e.slice(0,u);if(v.toLowerCase()==="localhost")t="localhost";else if(v.split(".").length<=2)t=v;else{let w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),t=e.substring(w+1),o=r}"ns"in m&&(o=m.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var SC=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Fe(this._path)?null:b1(this._path)}get ref(){return new Qc(this._repo,this._path)}get _queryIdentifier(){let e=WO(this._queryParams),t=NC(e);return t==="{}"?"default":t}get _queryObject(){return WO(this._queryParams)}isEqual(e){if(e=Le(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=A1(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+k8(this._path)}};var Qc=class n extends SC{constructor(e,t){super(e,t,new aC,!1)}get parent(){let e=S1(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};SK(Qc);AK(Qc);var l7="FIREBASE_DATABASE_EMULATOR_HOST",AC={},u7=!1;function d7(n,e,t,r){n.repoInfo_=new hg(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function h7(n,e,t,r,i){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||Hi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),mn("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let s=i1(o,i),a=s.repoInfo,c,u;typeof process<"u"&&process.env&&(u=process.env[l7]),u?(c=!0,o=`http://${u}?ns=${a.namespace}`,s=i1(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let d=i&&c?new Dd(Dd.OWNER):new q0(n.name,n.options,e);qK("Invalid Firebase Database URL",s),Fe(s.path)||Hi("Database URL must point to the root of a Firebase Database (not including a child path).");let f=p7(a,n,d,new W0(n.name,t));return new RC(f,n)}function f7(n,e){let t=AC[e];(!t||t[n.key]!==n)&&Hi(`Database ${e}(${n.repoInfo_}) has already been deleted.`),n7(n),delete t[n.key]}function p7(n,e,t,r){let i=AC[e.name];i||(i={},AC[e.name]=i);let o=i[n.toURLString()];return o&&Hi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new DC(n,u7,t,r),i[n.toURLString()]=o,o}var RC=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(ZK(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Qc(this._repo,Ye())),this._rootInternal}_delete(){return this._rootInternal!==null&&(f7(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Hi("Cannot call "+e+" on a deleted database.")}};function hF(n=Ht(),e){let t=$t(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let r=ro("database");r&&fF(t,...r)}return t}function fF(n,e,t,r={}){n=Le(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&Hi("Cannot call useEmulator() after instance has already been initialized.");let i=n._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Hi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Dd(Dd.OWNER);else if(r.mockUserToken){let s=typeof r.mockUserToken=="string"?r.mockUserToken:pa(r.mockUserToken,n.app.options.projectId);o=new Dd(s)}d7(i,e,t,o)}function m7(n){X9(Pn),It(new Et("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return h7(r,i,o,t)},"PUBLIC").setMultipleInstances(!0)),te(DO,SO,n),te(DO,SO,"esm2017")}PC.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};PC.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};m7();var Ld=class{constructor(e){return e}},pF="database",HC=class{constructor(){return Ft(pF)}};var WC=new q("angularfire2.database-instances");function g7(n,e){let t=qt(pF,n,e);return t&&new Ld(t)}function v7(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ld(r)}}var y7={provide:HC,deps:[[new Ie,WC]]},_7={provide:Ld,useFactory:g7,deps:[[new Ie,WC],gt]};function mF(n,...e){return te("angularfire",dt.full,"rtdb"),ut([_7,y7,{provide:WC,useFactory:v7(n),multi:!0,deps:[me,Se,bt,xt,[new Ie,Lr],[new Ie,pr],...e]}])}var gF=He(hF,!0);var _F="functions";var qC=class{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){return y(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return y(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return y(this,null,function*(){if(this.appCheck){let t=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return t.error?null:t.token}return null})}getContext(e){return y(this,null,function*(){let t=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}})}};var zC="us-central1";var GC=class{constructor(e,t,r,i,o=zC,s=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new qC(t,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(o);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=zC}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function w7(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}var vF="@firebase/functions",yF="0.12.1";var E7="auth-internal",I7="app-check-internal",T7="messaging-internal";function C7(n){let e=(t,{instanceIdentifier:r})=>{let i=t.getProvider("app").getImmediate(),o=t.getProvider(E7),s=t.getProvider(T7),a=t.getProvider(I7);return new GC(i,o,s,a,r)};It(new Et(_F,e,"PUBLIC").setMultipleInstances(!0)),te(vF,yF,n),te(vF,yF,"esm2017")}function wF(n=Ht(),e=zC){let r=$t(Le(n),_F).getImmediate({identifier:e}),i=ro("functions");return i&&EF(r,...i),r}function EF(n,e,t){w7(Le(n),e,t)}C7();var Vd=class{constructor(e){return e}},IF="functions",KC=class{constructor(){return Ft(IF)}};var YC=new q("angularfire2.functions-instances");function b7(n,e){let t=qt(IF,n,e);return t&&new Vd(t)}function D7(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Vd(r)}}var S7={provide:KC,deps:[[new Ie,YC]]},A7={provide:Vd,useFactory:b7,deps:[[new Ie,YC],gt]};function TF(n,...e){return te("angularfire",dt.full,"fn"),ut([A7,S7,{provide:YC,useFactory:D7(n),multi:!0,deps:[me,Se,bt,xt,[new Ie,Lr],[new Ie,pr],...e]}])}var CF=He(wF,!0);var R7="/firebase-messaging-sw.js",x7="/firebase-cloud-messaging-push-scope",NF="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",N7="https://fcmregistrations.googleapis.com/v1",MF="google.c.a.c_id",M7="google.c.a.c_l",P7="google.c.a.ts",k7="google.c.a.e",bF=1e4;var Ag=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(Ag||{});function Wi(n){let e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function O7(n){let e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}var QC="fcm_token_details_db",F7=5,DF="fcm_token_object_Store";function L7(n){return y(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(o=>o.name).includes(QC))return null;let e=null;return(yield Gv(QC,F7,{upgrade:(r,i,o,s)=>y(this,null,function*(){var a;if(i<2||!r.objectStoreNames.contains(DF))return;let c=s.objectStore(DF),u=yield c.index("fcmSenderId").get(n);if(yield c.clear(),!!u){if(i===2){let d=u;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(a=d.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:Wi(d.vapidKey)}}}else if(i===3){let d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Wi(d.auth),p256dh:Wi(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Wi(d.vapidKey)}}}else if(i===4){let d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Wi(d.auth),p256dh:Wi(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Wi(d.vapidKey)}}}}})})).close(),yield Ih(QC),yield Ih("fcm_vapid_details_db"),yield Ih("undefined"),V7(e)?e:null})}function V7(n){if(!n||!n.subscriptionOptions)return!1;let{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var U7="firebase-messaging-database",j7=1,Ud="firebase-messaging-store",ZC=null;function PF(){return ZC||(ZC=Gv(U7,j7,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Ud)}}})),ZC}function B7(n){return y(this,null,function*(){let e=kF(n),r=yield(yield PF()).transaction(Ud).objectStore(Ud).get(e);if(r)return r;{let i=yield L7(n.appConfig.senderId);if(i)return yield eb(n,i),i}})}function eb(n,e){return y(this,null,function*(){let t=kF(n),i=(yield PF()).transaction(Ud,"readwrite");return yield i.objectStore(Ud).put(e,t),yield i.done,e})}function kF({appConfig:n}){return n.appId}var $7={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},xn=new rr("messaging","Messaging",$7);function H7(n,e){return y(this,null,function*(){let t=yield nb(n),r=OF(e),i={method:"POST",headers:t,body:JSON.stringify(r)},o;try{o=yield(yield fetch(tb(n.appConfig),i)).json()}catch(s){throw xn.create("token-subscribe-failed",{errorInfo:s?.toString()})}if(o.error){let s=o.error.message;throw xn.create("token-subscribe-failed",{errorInfo:s})}if(!o.token)throw xn.create("token-subscribe-no-token");return o.token})}function W7(n,e){return y(this,null,function*(){let t=yield nb(n),r=OF(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)},o;try{o=yield(yield fetch(`${tb(n.appConfig)}/${e.token}`,i)).json()}catch(s){throw xn.create("token-update-failed",{errorInfo:s?.toString()})}if(o.error){let s=o.error.message;throw xn.create("token-update-failed",{errorInfo:s})}if(!o.token)throw xn.create("token-update-no-token");return o.token})}function q7(n,e){return y(this,null,function*(){let r={method:"DELETE",headers:yield nb(n)};try{let o=yield(yield fetch(`${tb(n.appConfig)}/${e}`,r)).json();if(o.error){let s=o.error.message;throw xn.create("token-unsubscribe-failed",{errorInfo:s})}}catch(i){throw xn.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})}function tb({projectId:n}){return`${N7}/projects/${n}/registrations`}function nb(t){return y(this,arguments,function*({appConfig:n,installations:e}){let r=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})})}function OF({p256dh:n,auth:e,endpoint:t,vapidKey:r}){let i={web:{endpoint:t,auth:e,p256dh:n}};return r!==NF&&(i.web.applicationPubKey=r),i}var z7=7*24*60*60*1e3;function G7(n){return y(this,null,function*(){let e=yield Y7(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Wi(e.getKey("auth")),p256dh:Wi(e.getKey("p256dh"))},r=yield B7(n.firebaseDependencies);if(r){if(Q7(r.subscriptionOptions,t))return Date.now()>=r.createTime+z7?K7(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield q7(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return SF(n.firebaseDependencies,t)}else return SF(n.firebaseDependencies,t)})}function K7(n,e){return y(this,null,function*(){try{let t=yield W7(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield eb(n.firebaseDependencies,r),t}catch(t){throw t}})}function SF(n,e){return y(this,null,function*(){let r={token:yield H7(n,e),createTime:Date.now(),subscriptionOptions:e};return yield eb(n,r),r.token})}function Y7(n,e){return y(this,null,function*(){let t=yield n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:O7(e)})})}function Q7(n,e){let t=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,i=e.auth===n.auth,o=e.p256dh===n.p256dh;return t&&r&&i&&o}function AF(n){let e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return Z7(e,n),J7(e,n),X7(e,n),e}function Z7(n,e){if(!e.notification)return;n.notification={};let t=e.notification.title;t&&(n.notification.title=t);let r=e.notification.body;r&&(n.notification.body=r);let i=e.notification.image;i&&(n.notification.image=i);let o=e.notification.icon;o&&(n.notification.icon=o)}function J7(n,e){e.data&&(n.data=e.data)}function X7(n,e){var t,r,i,o,s;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;n.fcmOptions={};let a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(o=e.notification)===null||o===void 0?void 0:o.click_action;a&&(n.fcmOptions.link=a);let c=(s=e.fcmOptions)===null||s===void 0?void 0:s.analytics_label;c&&(n.fcmOptions.analyticsLabel=c)}function eY(n){return typeof n=="object"&&!!n&&MF in n}tY("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function tY(n,e){let t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function nY(n){if(!n||!n.options)throw JC("App Configuration Object");if(!n.name)throw JC("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(let r of e)if(!t[r])throw JC(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function JC(n){return xn.create("missing-app-config-values",{valueName:n})}var XC=class{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=nY(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}};function rY(n){return y(this,null,function*(){try{n.swRegistration=yield navigator.serviceWorker.register(R7,{scope:x7}),n.swRegistration.update().catch(()=>{}),yield iY(n.swRegistration)}catch(e){throw xn.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function iY(n){return y(this,null,function*(){return new Promise((e,t)=>{let r=setTimeout(()=>t(new Error(`Service worker not registered after ${bF} ms`)),bF),i=n.installing||n.waiting;n.active?(clearTimeout(r),e()):i?i.onstatechange=o=>{var s;((s=o.target)===null||s===void 0?void 0:s.state)==="activated"&&(i.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),t(new Error("No incoming service worker found.")))})})}function oY(n,e){return y(this,null,function*(){if(!e&&!n.swRegistration&&(yield rY(n)),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw xn.create("invalid-sw-registration");n.swRegistration=e}})}function sY(n,e){return y(this,null,function*(){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=NF)})}function aY(n,e){return y(this,null,function*(){if(!navigator)throw xn.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw xn.create("permission-blocked");return yield sY(n,e?.vapidKey),yield oY(n,e?.serviceWorkerRegistration),G7(n)})}function cY(n,e,t){return y(this,null,function*(){let r=lY(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[MF],message_name:t[M7],message_time:t[P7],message_device_time:Math.floor(Date.now()/1e3)})})}function lY(n){switch(n){case Ag.NOTIFICATION_CLICKED:return"notification_open";case Ag.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function uY(n,e){return y(this,null,function*(){let t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Ag.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(AF(t)):n.onMessageHandler.next(AF(t)));let r=t.data;eY(r)&&r[k7]==="1"&&(yield cY(n,t.messageType,r))})}var RF="@firebase/messaging",xF="0.12.16";var dY=n=>{let e=new XC(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>uY(e,t)),e},hY=n=>{let e=n.getProvider("messaging").getImmediate();return{getToken:r=>aY(e,r)}};function fY(){It(new Et("messaging",dY,"PUBLIC")),It(new Et("messaging-internal",hY,"PRIVATE")),te(RF,xF),te(RF,xF,"esm2017")}function FF(){return y(this,null,function*(){try{yield ma()}catch{return!1}return typeof window<"u"&&zr()&&Vl()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function LF(n=Ht()){return FF().then(e=>{if(!e)throw xn.create("unsupported-browser")},e=>{throw xn.create("indexed-db-unsupported")}),$t(Le(n),"messaging").getImmediate()}fY();var jd=class{constructor(e){return e}},VF="messaging",rb=class{constructor(){return Ft(VF)}};var ib=new q("angularfire2.messaging-instances");function pY(n,e,t){if(Ri(t))return null;let r=qt(VF,n,e);return r&&new jd(r)}function mY(n){return(e,t,r)=>{if(Ri(r))return null;let i=e.runOutsideAngular(()=>n(t));return new jd(i)}}var gY={provide:rb,deps:[[new Ie,ib]]},vY={provide:jd,useFactory:pY,deps:[[new Ie,ib],gt,Pt]};function UF(n,...e){return te("angularfire",dt.full,"fcm"),ut([vY,gY,{provide:ib,useFactory:mY(n),multi:!0,deps:[me,Se,Pt,bt,xt,...e]}])}var jF=He(LF,!0);var Bd=class{constructor(e){return e}},BF="performance",ob=class{constructor(){return Ft(BF)}};var sb=new q("angularfire2.performance-instances");function yY(n,e,t){if(!ec(t))return null;let r=qt(BF,n,e);return r&&new Bd(r)}function _Y(n){return(e,t,r)=>{if(!ec(t))return null;let i=e.runOutsideAngular(()=>n(r));return new Bd(i)}}var wY={provide:ob,deps:[[new Ie,sb]]},EY={provide:Bd,useFactory:yY,deps:[[new Ie,sb],gt,Pt]};function $F(n,...e){return te("angularfire",dt.full,"perf"),ut([EY,wY,{provide:sb,useFactory:_Y(n),multi:!0,deps:[me,Pt,Se,bt,xt,...e]}])}var HF=He(JD,!0);var YF="firebasestorage.googleapis.com",IY="storageBucket",TY=2*60*1e3,CY=10*60*1e3;var li=class n extends Gn{constructor(e,t,r=0){super(ab(e),`Firebase Storage: ${t} (${ab(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ab(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},zi=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(zi||{});function ab(n){return"storage/"+n}function bY(){let n="An unknown error occurred, please check the error payload for server response.";return new li(zi.UNKNOWN,n)}function DY(){return new li(zi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function SY(){return new li(zi.CANCELED,"User canceled the upload/download.")}function AY(n){return new li(zi.INVALID_URL,"Invalid URL '"+n+"'.")}function RY(n){return new li(zi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function WF(n){return new li(zi.INVALID_ARGUMENT,n)}function QF(){return new li(zi.APP_DELETED,"The Firebase app was deleted.")}function xY(n){return new li(zi.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var qi=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw RY(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(re){re.path.charAt(re.path.length-1)==="/"&&(re.path_=re.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function u(re){re.path_=decodeURIComponent(re.path)}let d="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",v=new RegExp(`^https?://${f}/${d}/b/${i}/o${m}`,"i"),w={bucket:1,path:3},P=t===YF?"(?:storage.googleapis.com|storage.cloud.google.com)":t,N="([^?#]*)",L=new RegExp(`^https?://${P}/${i}/${N}`,"i"),Y=[{regex:a,indices:c,postModify:o},{regex:v,indices:w,postModify:u},{regex:L,indices:{bucket:1,path:2},postModify:u}];for(let re=0;re<Y.length;re++){let it=Y[re],ue=it.regex.exec(e);if(ue){let D=ue[it.indices.bucket],_=ue[it.indices.path];_||(_=""),r=new n(D,_),it.postModify(r);break}}if(r==null)throw AY(e);return r}},cb=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function NY(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function c(){return a===2}let u=!1;function d(...N){u||(u=!0,e.apply(null,N))}function f(N){i=setTimeout(()=>{i=null,n(v,c())},N)}function m(){o&&clearTimeout(o)}function v(N,...L){if(u){m();return}if(N){m(),d.call(null,N,...L);return}if(c()||s){m(),d.call(null,N,...L);return}r<64&&(r*=2);let Y;a===1?(a=2,Y=0):Y=(r+Math.random())*1e3,f(Y)}let w=!1;function P(N){w||(w=!0,m(),!u&&(i!==null?(N||(a=2),clearTimeout(i),f(0)):N||(a=1)))}return f(0),o=setTimeout(()=>{s=!0,P(!0)},t),P}function MY(n){n(!1)}function PY(n){return n!==void 0}function qF(n,e,t,r){if(r<e)throw WF(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw WF(`Invalid value for '${n}'. Expected ${t} or less.`)}function kY(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var lb=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(lb||{});function OY(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var ub=class{constructor(e,t,r,i,o,s,a,c,u,d,f,m=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,w)=>{this.resolve_=v,this.reject_=w,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Xc(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===lb.NO_ERROR,c=o.getStatus();if(!a||OY(c,this.additionalRetryCodes_)&&this.retry){let d=o.getErrorCode()===lb.ABORT;r(!1,new Xc(!1,null,d));return}let u=this.successCodes_.indexOf(c)!==-1;r(!0,new Xc(u,o))})},t=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());PY(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=bY();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(i.canceled){let c=this.appDelete_?QF():SY();s(c)}else{let c=DY();s(c)}};this.canceled_?t(!1,new Xc(!1,null,!0)):this.backoffId_=NY(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&MY(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Xc=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function FY(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function LY(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function VY(n,e){e&&(n["X-Firebase-GMPID"]=e)}function UY(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function jY(n,e,t,r,i,o,s=!0){let a=kY(n.urlParams),c=n.url+a,u=Object.assign({},n.headers);return VY(u,e),FY(u,t),LY(u,o),UY(u,r),new ub(c,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s)}function BY(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function $Y(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var Zfe=256*1024;var db=class n{constructor(e,t){this._service=e,t instanceof qi?this._location=t:this._location=qi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new qi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $Y(this._location.path)}get storage(){return this._service}get parent(){let e=BY(this._location.path);if(e===null)return null;let t=new qi(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw xY(e)}};function zF(n,e){let t=e?.[IY];return t==null?null:qi.makeFromBucketSpec(t,n)}function HY(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:pa(i,n.app.options.projectId))}var hb=class{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=YF,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=TY,this._maxUploadRetryTime=CY,this._requests=new Set,i!=null?this._bucket=qi.makeFromBucketSpec(i,this._host):this._bucket=zF(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qi.makeFromBucketSpec(this._url,e):this._bucket=zF(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){qF("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){qF("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return y(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return y(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new db(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new cb(QF());{let s=jY(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){return y(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},GF="@firebase/storage",KF="0.13.5";var ZF="storage";function JF(n=Ht(),e){n=Le(n);let r=$t(n,ZF).getImmediate({identifier:e}),i=ro("storage");return i&&XF(r,...i),r}function XF(n,e,t,r={}){HY(n,e,t,r)}function WY(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new hb(t,r,i,e,Pn)}function qY(){It(new Et(ZF,WY,"PUBLIC").setMultipleInstances(!0)),te(GF,KF,""),te(GF,KF,"esm2017")}qY();var $d=class{constructor(e){return e}},eL="storage",fb=class{constructor(){return Ft(eL)}};var pb=new q("angularfire2.storage-instances");function zY(n,e){let t=qt(eL,n,e);return t&&new $d(t)}function GY(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new $d(r)}}var KY={provide:fb,deps:[[new Ie,pb]]},YY={provide:$d,useFactory:zY,deps:[[new Ie,pb],gt]};function tL(n,...e){return te("angularfire",dt.full,"gcs"),ut([YY,KY,{provide:pb,useFactory:GY(n),multi:!0,deps:[me,Se,bt,xt,[new Ie,Lr],[new Ie,pr],...e]}])}var nL=He(JF,!0);var mb="@firebase/remote-config",rL="0.5.0";var oL="remote-config",iL=100;var QY={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser","custom-signal-max-allowed-signals":"Setting more than {$maxSignals} custom signals is not supported."},Nn=new rr("remoteconfig","Remote Config",QY);function sL(n=Ht()){return n=Le(n),$t(n,oL).getImmediate()}function aL(n){let e=Le(n);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}var gb=class{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){return y(this,null,function*(){let[t,r]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,t))return r;e.eTag=r&&r.eTag;let i=yield this.client.fetch(e),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return i.status===200&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(o),i})}};function ZY(n=navigator){return n.languages&&n.languages[0]||n.language}var vb=class{constructor(e,t,r,i,o,s){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=o,this.appId=s}fetch(e){return y(this,null,function*(){let[t,r]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:t,app_instance_id_token:r,app_id:this.appId,language_code:ZY(),custom_signals:e.customSignals},c={method:"POST",headers:s,body:JSON.stringify(a)},u=fetch(o,c),d=new Promise((N,L)=>{e.signal.addEventListener(()=>{let W=new Error("The operation was aborted.");W.name="AbortError",L(W)})}),f;try{yield Promise.race([u,d]),f=yield u}catch(N){let L="fetch-client-network";throw N?.name==="AbortError"&&(L="fetch-timeout"),Nn.create(L,{originalErrorMessage:N?.message})}let m=f.status,v=f.headers.get("ETag")||void 0,w,P;if(f.status===200){let N;try{N=yield f.json()}catch(L){throw Nn.create("fetch-client-parse",{originalErrorMessage:L?.message})}w=N.entries,P=N.state}if(P==="INSTANCE_STATE_UNSPECIFIED"?m=500:P==="NO_CHANGE"?m=304:(P==="NO_TEMPLATE"||P==="EMPTY_CONFIG")&&(w={}),m!==304&&m!==200)throw Nn.create("fetch-status",{httpStatus:m});return{status:m,eTag:v,config:w}})}};function JY(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(Nn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function XY(n){if(!(n instanceof Gn)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var yb=class{constructor(e,t){this.client=e,this.storage=t}fetch(e){return y(this,null,function*(){let t=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,t)})}attemptFetch(i,o){return y(this,arguments,function*(e,{throttleEndTimeMillis:t,backoffCount:r}){yield JY(e.signal,t);try{let s=yield this.client.fetch(e);return yield this.storage.deleteThrottleMetadata(),s}catch(s){if(!XY(s))throw s;let a={throttleEndTimeMillis:Date.now()+ga(r),backoffCount:r+1};return yield this.storage.setThrottleMetadata(a),this.attemptFetch(e,a)}})}};var eQ=60*1e3,tQ=12*60*60*1e3,_b=class{get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}constructor(e,t,r,i,o){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=o,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:eQ,minimumFetchIntervalMillis:tQ},this.defaultConfig={}}};function Rg(n,e){let t=n.target.error||void 0;return Nn.create(e,{originalErrorMessage:t&&t?.message})}var $o="app_namespace_store",nQ="firebase_remote_config",rQ=1;function iQ(){return new Promise((n,e)=>{try{let t=indexedDB.open(nQ,rQ);t.onerror=r=>{e(Rg(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore($o,{keyPath:"compositeKey"})}}}catch(t){e(Nn.create("storage-open",{originalErrorMessage:t?.message}))}})}var wb=class{constructor(e,t,r,i=iQ()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}getCustomSignals(){return this.get("custom_signals")}setCustomSignals(e){return y(this,null,function*(){let r=(yield this.openDbPromise).transaction([$o],"readwrite"),i=yield this.getWithTransaction("custom_signals",r),o=Object.assign(Object.assign({},i),e),s=Object.fromEntries(Object.entries(o).filter(([a,c])=>c!==null).map(([a,c])=>typeof c=="number"?[a,c.toString()]:[a,c]));if(Object.keys(s).length>iL)throw Nn.create("custom-signal-max-allowed-signals",{maxSignals:iL});return yield this.setWithTransaction("custom_signals",s,r),s})}getWithTransaction(e,t){return y(this,null,function*(){return new Promise((r,i)=>{let o=t.objectStore($o),s=this.createCompositeKey(e);try{let a=o.get(s);a.onerror=c=>{i(Rg(c,"storage-get"))},a.onsuccess=c=>{let u=c.target.result;r(u?u.value:void 0)}}catch(a){i(Nn.create("storage-get",{originalErrorMessage:a?.message}))}})})}setWithTransaction(e,t,r){return y(this,null,function*(){return new Promise((i,o)=>{let s=r.objectStore($o),a=this.createCompositeKey(e);try{let c=s.put({compositeKey:a,value:t});c.onerror=u=>{o(Rg(u,"storage-set"))},c.onsuccess=()=>{i()}}catch(c){o(Nn.create("storage-set",{originalErrorMessage:c?.message}))}})})}get(e){return y(this,null,function*(){let r=(yield this.openDbPromise).transaction([$o],"readonly");return this.getWithTransaction(e,r)})}set(e,t){return y(this,null,function*(){let i=(yield this.openDbPromise).transaction([$o],"readwrite");return this.setWithTransaction(e,t,i)})}delete(e){return y(this,null,function*(){let t=yield this.openDbPromise;return new Promise((r,i)=>{let s=t.transaction([$o],"readwrite").objectStore($o),a=this.createCompositeKey(e);try{let c=s.delete(a);c.onerror=u=>{i(Rg(u,"storage-delete"))},c.onsuccess=()=>{r()}}catch(c){i(Nn.create("storage-delete",{originalErrorMessage:c?.message}))}})})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}};var Eb=class{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}getCustomSignals(){return this.customSignals}loadFromStorage(){return y(this,null,function*(){let e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),i=this.storage.getCustomSignals(),o=yield e;o&&(this.lastFetchStatus=o);let s=yield t;s&&(this.lastSuccessfulFetchTimestampMillis=s);let a=yield r;a&&(this.activeConfig=a);let c=yield i;c&&(this.customSignals=c)})}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}setCustomSignals(e){return y(this,null,function*(){this.customSignals=yield this.storage.setCustomSignals(e)})}};function oQ(){It(new Et(oL,n,"PUBLIC").setMultipleInstances(!0)),te(mb,rL),te(mb,rL,"esm2017");function n(e,{instanceIdentifier:t}){let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Nn.create("registration-window");if(!zr())throw Nn.create("indexed-db-unavailable");let{projectId:o,apiKey:s,appId:a}=r.options;if(!o)throw Nn.create("registration-project-id");if(!s)throw Nn.create("registration-api-key");if(!a)throw Nn.create("registration-app-id");t=t||"firebase";let c=new wb(a,r.name,t),u=new Eb(c),d=new ir(mb);d.logLevel=en.ERROR;let f=new vb(i,Pn,t,o,s,a),m=new yb(f,c),v=new gb(m,c,u,d),w=new _b(r,v,u,c,d);return aL(w),w}}oQ();var Hd=class{constructor(e){return e}},cL="remote-config",Ib=class{constructor(){return Ft(cL)}};var Tb=new q("angularfire2.remote-config-instances");function sQ(n,e,t){if(Ri(t))return null;let r=qt(cL,n,e);return r&&new Hd(r)}function aQ(n){return(e,t,r)=>{if(Ri(r))return null;let i=e.runOutsideAngular(()=>n(t));return new Hd(i)}}var cQ={provide:Ib,deps:[[new Ie,Tb]]},lQ={provide:Hd,useFactory:sQ,deps:[[new Ie,Tb],gt,Pt]};function lL(n,...e){return te("angularfire",dt.full,"rc"),ut([lQ,cQ,{provide:Tb,useFactory:aQ(n),multi:!0,deps:[me,Se,Pt,bt,xt,...e]}])}var uL=He(sL,!0);var dL={firebaseConfig:{apiKey:"AIzaSyCaMopW6HWBwUEvvtDZUQ7UemvGdT7xGEA",authDomain:"dash-boar-7ee0d.firebaseapp.com",projectId:"dash-boar-7ee0d",storageBucket:"dash-boar-7ee0d.firebasestorage.app",messagingSenderId:"325394396819",appId:"1:325394396819:web:82c3741552a46bb149bf66",measurementId:"G-LXRMSZ5ZSH"},production:!0};var hL={providers:[Mx({eventCoalescing:!0}),WN(qN),KN(()=>YN(dL.firebaseConfig)),JM(()=>eP()),wP(()=>vP()),_P,gI,IO(()=>TO()),mF(()=>gF()),TF(()=>CF()),UF(()=>jF()),$F(()=>HF()),tL(()=>nL()),lL(()=>uL())]};var qn=class n{destroyRef=S(Ti);firestore=S(Ys);destroyed=new st;constructor(){this.destroyRef.onDestroy(()=>{this.destroyed.next(),this.destroyed.complete()})}generateNextId(){return y(this,null,function*(){let e=yield N0(this.collectionRef),t=0;return e.forEach(r=>{let i=r.data(),o=parseInt(i.id,10);!isNaN(o)&&o>t&&(t=o)}),(t+1).toString()})}createData(e,t){let r=x0(this.collectionRef,e);return M0(r,t)}updateData(e,t){return M0(x0(this.collectionRef,e),t,{merge:!0})}getDataById(e){return y(this,null,function*(){let t=CO(this.collectionRef,bO("id","==",e)),r=yield N0(t);if(!r.empty)return r.docs[0].data()})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var Qe=class n extends qn{collectionPath="/race-configs";collectionRef=vr(this.firestore,this.collectionPath);activeRaceConfig=J(void 0);constructor(){super(),this.getAll().pipe(et()).subscribe(e=>{e.length>0&&this.activeRaceConfig.set(e.at(0))})}updateFuelDurationMinute(e){let t=this.activeRaceConfig();return t?(t.fuelDurationMinute=e,this.updateData(t.id,t)):Promise.resolve()}updateStartRaceDriverId(e){let t=this.activeRaceConfig();return t?(t.startRaceDriverId=e,this.updateData(t.id,t)):Promise.resolve()}updateNextPitDriverId(e){let t=this.activeRaceConfig();return t?(t.nextPitDriverId=e,this.updateData(t.id,t)):Promise.resolve()}updateNextPitRefueling(e){let t=this.activeRaceConfig();return t?(t.nextPitRefueling=e,this.updateData(t.id,t)):Promise.resolve()}updateNextPitTyreChange(e){let t=this.activeRaceConfig();return t?(t.nextPitTyreChange=e,this.updateData(t.id,t)):Promise.resolve()}updateReferenceLapTime(e){let t=this.activeRaceConfig();return t?(t.referenceLapTimeMillisecond=e,this.updateData(t.id,t)):Promise.resolve()}getAll(){return gr(this.collectionRef).pipe(Gt(this.destroyed),ee(e=>e.map(t=>t).filter(t=>!t.deleted)))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var uQ=Math.pow(10,8)*24*60*60*1e3,Mme=-uQ,xg=6048e5,fL=864e5,el=6e4,tl=36e5,pL=1e3;var dQ=3600;var mL=dQ*24,Pme=mL*7,hQ=mL*365.2425,fQ=hQ/12,kme=fQ*3,Cb=Symbol.for("constructDateFrom");function _t(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&Cb in n?n[Cb](e):n instanceof Date?new n.constructor(e):new Date(e)}function oe(n,e){return _t(e||n,n)}function gL(n,e,t){let r=oe(n,t?.in);return isNaN(e)?_t(t?.in||n,NaN):(e&&r.setDate(r.getDate()+e),r)}function vL(n,e,t){let r=oe(n,t?.in);if(isNaN(e))return _t(t?.in||n,NaN);if(!e)return r;let i=r.getDate(),o=_t(t?.in||n,r.getTime());o.setMonth(r.getMonth()+e+1,0);let s=o.getDate();return i>=s?o:(r.setFullYear(o.getFullYear(),o.getMonth(),i),r)}function nl(n,e,t){let{years:r=0,months:i=0,weeks:o=0,days:s=0,hours:a=0,minutes:c=0,seconds:u=0}=e,d=oe(n,t?.in),f=i||r?vL(d,i+r*12):d,m=s||o?gL(f,s+o*7):f,v=c+a*60,P=(u+v*60)*1e3;return _t(t?.in||n,+m+P)}function nr(n,e,t){return _t(t?.in||n,+oe(n)+e)}function Ho(n,e,t){return nr(n,e*tl,t)}var pQ={};function Wo(){return pQ}function Gi(n,e){let t=Wo(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=oe(n,e?.in),o=i.getDay(),s=(o<r?7:0)+o-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function ra(n,e){return Gi(n,fe(U({},e),{weekStartsOn:1}))}function Ng(n,e){let t=oe(n,e?.in),r=t.getFullYear(),i=_t(t,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);let o=ra(i),s=_t(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);let a=ra(s);return t.getTime()>=o.getTime()?r+1:t.getTime()>=a.getTime()?r:r-1}function bb(n){let e=oe(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function yn(n,...e){let t=_t.bind(null,n||e.find(r=>typeof r=="object"));return e.map(t)}function Db(n,e){let t=oe(n,e?.in);return t.setHours(0,0,0,0),t}function Mg(n,e,t){let[r,i]=yn(t?.in,n,e),o=Db(r),s=Db(i),a=+o-bb(o),c=+s-bb(s);return Math.round((a-c)/fL)}function yL(n,e){let t=Ng(n,e),r=_t(e?.in||n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),ra(r)}function ia(n,e,t){let r=oe(n,t?.in);return r.setTime(r.getTime()+e*el),r}function rl(n,e,t){return nr(n,e*1e3,t)}function oa(n,e){let t=+oe(n)-+oe(e);return t<0?-1:t>0?1:t}function _L(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function wL(n){return!(!_L(n)&&typeof n!="number"||isNaN(+oe(n)))}function EL(n,e,t){let[r,i]=yn(t?.in,n,e),o=r.getFullYear()-i.getFullYear(),s=r.getMonth()-i.getMonth();return o*12+s}function IL(n,e,t){let[r,i]=yn(t?.in,n,e);return r.getFullYear()-i.getFullYear()}function CL(n,e,t){let[r,i]=yn(t?.in,n,e),o=TL(r,i),s=Math.abs(Mg(r,i));r.setDate(r.getDate()-o*s);let a=+(TL(r,i)===-o),c=o*(s-a);return c===0?0:c}function TL(n,e){let t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function il(n){return e=>{let r=(n?Math[n]:Math.trunc)(e);return r===0?0:r}}function bL(n,e,t){let[r,i]=yn(t?.in,n,e),o=(+r-+i)/tl;return il(t?.roundingMethod)(o)}function Ki(n,e){return+oe(n)-+oe(e)}function Pg(n,e,t){let r=Ki(n,e)/el;return il(t?.roundingMethod)(r)}function DL(n,e){let t=oe(n,e?.in);return t.setHours(23,59,59,999),t}function SL(n,e){let t=oe(n,e?.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function AL(n,e){let t=oe(n,e?.in);return+DL(t,e)==+SL(t,e)}function RL(n,e,t){let[r,i,o]=yn(t?.in,n,n,e),s=oa(i,o),a=Math.abs(EL(i,o));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-s*a);let c=oa(i,o)===-s;AL(r)&&a===1&&oa(r,o)===1&&(c=!1);let u=s*(a-+c);return u===0?0:u}function xL(n,e,t){let r=Ki(n,e)/1e3;return il(t?.roundingMethod)(r)}function NL(n,e,t){let[r,i]=yn(t?.in,n,e),o=oa(r,i),s=Math.abs(IL(r,i));r.setFullYear(1584),i.setFullYear(1584);let a=oa(r,i)===-o,c=o*(s-+a);return c===0?0:c}function ML(n,e){let[t,r]=yn(n,e.start,e.end);return{start:t,end:r}}function PL(n,e){let t=oe(n,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}var mQ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},kL=(n,e,t)=>{let r,i=mQ[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function kg(n){return(e={})=>{let t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}var gQ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},vQ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},yQ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},OL={date:kg({formats:gQ,defaultWidth:"full"}),time:kg({formats:vQ,defaultWidth:"full"}),dateTime:kg({formats:yQ,defaultWidth:"full"})};var _Q={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},FL=(n,e,t,r)=>_Q[n];function ol(n){return(e,t)=>{let r=t?.context?String(t.context):"standalone",i;if(r==="formatting"&&n.formattingValues){let s=n.defaultFormattingWidth||n.defaultWidth,a=t?.width?String(t.width):s;i=n.formattingValues[a]||n.formattingValues[s]}else{let s=n.defaultWidth,a=t?.width?String(t.width):n.defaultWidth;i=n.values[a]||n.values[s]}let o=n.argumentCallback?n.argumentCallback(e):e;return i[o]}}var wQ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},EQ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},IQ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},TQ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},CQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},bQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},DQ=(n,e)=>{let t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},LL={ordinalNumber:DQ,era:ol({values:wQ,defaultWidth:"wide"}),quarter:ol({values:EQ,defaultWidth:"wide",argumentCallback:n=>n-1}),month:ol({values:IQ,defaultWidth:"wide"}),day:ol({values:TQ,defaultWidth:"wide"}),dayPeriod:ol({values:CQ,defaultWidth:"wide",formattingValues:bQ,defaultFormattingWidth:"wide"})};function sl(n){return(e,t={})=>{let r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],o=e.match(i);if(!o)return null;let s=o[0],a=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(a)?AQ(a,f=>f.test(s)):SQ(a,f=>f.test(s)),u;u=n.valueCallback?n.valueCallback(c):c,u=t.valueCallback?t.valueCallback(u):u;let d=e.slice(s.length);return{value:u,rest:d}}}function SQ(n,e){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function AQ(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function VL(n){return(e,t={})=>{let r=e.match(n.matchPattern);if(!r)return null;let i=r[0],o=e.match(n.parsePattern);if(!o)return null;let s=n.valueCallback?n.valueCallback(o[0]):o[0];s=t.valueCallback?t.valueCallback(s):s;let a=e.slice(i.length);return{value:s,rest:a}}}var RQ=/^(\d+)(th|st|nd|rd)?/i,xQ=/\d+/i,NQ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},MQ={any:[/^b/i,/^(a|c)/i]},PQ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},kQ={any:[/1/i,/2/i,/3/i,/4/i]},OQ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},FQ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},LQ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},VQ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},UQ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},jQ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},UL={ordinalNumber:VL({matchPattern:RQ,parsePattern:xQ,valueCallback:n=>parseInt(n,10)}),era:sl({matchPatterns:NQ,defaultMatchWidth:"wide",parsePatterns:MQ,defaultParseWidth:"any"}),quarter:sl({matchPatterns:PQ,defaultMatchWidth:"wide",parsePatterns:kQ,defaultParseWidth:"any",valueCallback:n=>n+1}),month:sl({matchPatterns:OQ,defaultMatchWidth:"wide",parsePatterns:FQ,defaultParseWidth:"any"}),day:sl({matchPatterns:LQ,defaultMatchWidth:"wide",parsePatterns:VQ,defaultParseWidth:"any"}),dayPeriod:sl({matchPatterns:UQ,defaultMatchWidth:"any",parsePatterns:jQ,defaultParseWidth:"any"})};var Sb={code:"en-US",formatDistance:kL,formatLong:OL,formatRelative:FL,localize:LL,match:UL,options:{weekStartsOn:0,firstWeekContainsDate:1}};function jL(n,e){let t=oe(n,e?.in);return Mg(t,PL(t))+1}function BL(n,e){let t=oe(n,e?.in),r=+ra(t)-+yL(t);return Math.round(r/xg)+1}function Og(n,e){let t=oe(n,e?.in),r=t.getFullYear(),i=Wo(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,s=_t(e?.in||n,0);s.setFullYear(r+1,0,o),s.setHours(0,0,0,0);let a=Gi(s,e),c=_t(e?.in||n,0);c.setFullYear(r,0,o),c.setHours(0,0,0,0);let u=Gi(c,e);return+t>=+a?r+1:+t>=+u?r:r-1}function $L(n,e){let t=Wo(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,i=Og(n,e),o=_t(e?.in||n,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),Gi(o,e)}function HL(n,e){let t=oe(n,e?.in),r=+Gi(t,e)-+$L(t,e);return Math.round(r/xg)+1}function qe(n,e){let t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}var Yi={y(n,e){let t=n.getFullYear(),r=t>0?t:1-t;return qe(e==="yy"?r%100:r,e.length)},M(n,e){let t=n.getMonth();return e==="M"?String(t+1):qe(t+1,2)},d(n,e){return qe(n.getDate(),e.length)},a(n,e){let t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return qe(n.getHours()%12||12,e.length)},H(n,e){return qe(n.getHours(),e.length)},m(n,e){return qe(n.getMinutes(),e.length)},s(n,e){return qe(n.getSeconds(),e.length)},S(n,e){let t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return qe(i,e.length)}};var al={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ab={G:function(n,e,t){let r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){let r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return Yi.y(n,e)},Y:function(n,e,t,r){let i=Og(n,r),o=i>0?i:1-i;if(e==="YY"){let s=o%100;return qe(s,2)}return e==="Yo"?t.ordinalNumber(o,{unit:"year"}):qe(o,e.length)},R:function(n,e){let t=Ng(n);return qe(t,e.length)},u:function(n,e){let t=n.getFullYear();return qe(t,e.length)},Q:function(n,e,t){let r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return qe(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){let r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return qe(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){let r=n.getMonth();switch(e){case"M":case"MM":return Yi.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){let r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return qe(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){let i=HL(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):qe(i,e.length)},I:function(n,e,t){let r=BL(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):qe(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):Yi.d(n,e)},D:function(n,e,t){let r=jL(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):qe(r,e.length)},E:function(n,e,t){let r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){let i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return qe(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){let i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return qe(o,e.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){let r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return qe(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){let i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){let r=n.getHours(),i;switch(r===12?i=al.noon:r===0?i=al.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){let r=n.getHours(),i;switch(r>=17?i=al.evening:r>=12?i=al.afternoon:r>=4?i=al.morning:i=al.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return Yi.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):Yi.H(n,e)},K:function(n,e,t){let r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):qe(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):qe(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):Yi.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):Yi.s(n,e)},S:function(n,e){return Yi.S(n,e)},X:function(n,e,t){let r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return qL(r);case"XXXX":case"XX":return sa(r);case"XXXXX":case"XXX":default:return sa(r,":")}},x:function(n,e,t){let r=n.getTimezoneOffset();switch(e){case"x":return qL(r);case"xxxx":case"xx":return sa(r);case"xxxxx":case"xxx":default:return sa(r,":")}},O:function(n,e,t){let r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+WL(r,":");case"OOOO":default:return"GMT"+sa(r,":")}},z:function(n,e,t){let r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+WL(r,":");case"zzzz":default:return"GMT"+sa(r,":")}},t:function(n,e,t){let r=Math.trunc(+n/1e3);return qe(r,e.length)},T:function(n,e,t){return qe(+n,e.length)}};function WL(n,e=""){let t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),o=r%60;return o===0?t+String(i):t+String(i)+e+qe(o,2)}function qL(n,e){return n%60===0?(n>0?"-":"+")+qe(Math.abs(n)/60,2):sa(n,e)}function sa(n,e=""){let t=n>0?"-":"+",r=Math.abs(n),i=qe(Math.trunc(r/60),2),o=qe(r%60,2);return t+i+e+o}var zL=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},GL=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},BQ=(n,e)=>{let t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return zL(n,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",zL(r,e)).replace("{{time}}",GL(i,e))},KL={p:GL,P:BQ};var $Q=/^D+$/,HQ=/^Y+$/,WQ=["D","DD","YY","YYYY"];function YL(n){return $Q.test(n)}function QL(n){return HQ.test(n)}function ZL(n,e,t){let r=qQ(n,e,t);if(console.warn(r),WQ.includes(n))throw new RangeError(r)}function qQ(n,e,t){let r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}var zQ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,GQ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,KQ=/^'([^]*?)'?$/,YQ=/''/g,QQ=/[a-zA-Z]/;function Wr(n,e,t){let r=Wo(),i=t?.locale??r.locale??Sb,o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=oe(n,t?.in);if(!wL(a))throw new RangeError("Invalid time value");let c=e.match(GQ).map(d=>{let f=d[0];if(f==="p"||f==="P"){let m=KL[f];return m(d,i.formatLong)}return d}).join("").match(zQ).map(d=>{if(d==="''")return{isToken:!1,value:"'"};let f=d[0];if(f==="'")return{isToken:!1,value:ZQ(d)};if(Ab[f])return{isToken:!0,value:d};if(f.match(QQ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");return{isToken:!1,value:d}});i.localize.preprocessor&&(c=i.localize.preprocessor(a,c));let u={firstWeekContainsDate:o,weekStartsOn:s,locale:i};return c.map(d=>{if(!d.isToken)return d.value;let f=d.value;(!t?.useAdditionalWeekYearTokens&&QL(f)||!t?.useAdditionalDayOfYearTokens&&YL(f))&&ZL(f,e,String(n));let m=Ab[f[0]];return m(a,f,i.localize,u)}).join("")}function ZQ(n){let e=n.match(KQ);return e?e[1].replace(YQ,"'"):n}function Rb(n){return Math.trunc(n*tl)}function xb(n,e){let{start:t,end:r}=ML(e?.in,n),i={},o=NL(r,t);o&&(i.years=o);let s=nl(t,{years:i.years}),a=RL(r,s);a&&(i.months=a);let c=nl(s,{months:i.months}),u=CL(r,c);u&&(i.days=u);let d=nl(c,{days:i.days}),f=bL(r,d);f&&(i.hours=f);let m=nl(d,{hours:i.hours}),v=Pg(r,m);v&&(i.minutes=v);let w=nl(m,{minutes:i.minutes}),P=xL(r,w);return P&&(i.seconds=P),i}function JL(n,e){return+oe(n)>+oe(e)}function XL(n,e){return+oe(n)<+oe(e)}function Fg(n){return Math.trunc(n*el)}function cl(n){return n*pL}function eV(n,e,t){return ia(n,-e,t)}var jt=class n extends qn{collectionPath="/races";collectionRef=vr(this.firestore,this.collectionPath);raceConfigService=S(Qe);activeRace=J(void 0);endRaceDate=J(void 0);constructor(){super(),We({races:this.getAll(),raceConfig:le(this.raceConfigService.activeRaceConfig)}).pipe(et(),ee(({races:e,raceConfig:t})=>{if(e&&t){let r=this.getActiveRace(e,t),i=r?Ho(r.start.toDate(),t.durationHour):void 0;return{activeRace:r,endRaceDate:i}}return{activeRace:void 0,endRaceDate:void 0}})).subscribe(e=>{this.activeRace.set(e.activeRace),this.endRaceDate.set(e.endRaceDate)})}create(e){return y(this,null,function*(){return this.activeRace()!==void 0?(console.warn("Race already active -> "+this.activeRace()),Promise.resolve()):(e.id=yield this.generateNextId(),yield this.createData(e.id,e),e)})}getAll(){return gr(this.collectionRef).pipe(Gt(this.destroyed),ee(e=>e.map(t=>t).filter(t=>!t.deleted)))}getActiveRace(e,t){let r=new Date,i=e.sort((o,s)=>s.start.toDate().getTime()-o.start.toDate().getTime());for(let o of i)if(Ho(o.start.toDate(),t.durationHour)>=r)return o}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};function Er(n,e){if(!n||!e)return"--:--:--";let t=xb({end:e,start:n});return Lg(t)}function aa(n){if(!n)return"--:--:--";let e=xb({end:n,start:new Date});return Lg(e)}function ft(n){if(!n||n<0)return"--:--:--";let e=Math.floor(n/1e3),t={hours:Math.floor(e/3600),minutes:Math.floor(e%3600/60),seconds:e%60};return Lg(t)}function tV(n){if(!n||n<0)return"--:--:--";let e=Math.floor(n/1e3),t={minutes:Math.floor(e%3600/60),seconds:e%60};return Lg(t)}function nV(n){if(!n||n<0)return"--:--:---";let e=Math.floor(n/1e3),t=n%1e3,r={minutes:Math.floor(e/60),seconds:e%60};return JQ(r,t)}function JQ(n,e){return n.minutes&&n.minutes<0||n.seconds&&n.seconds<0?"--:--:---":[Wd(n.minutes),Wd(n.seconds),XQ(e)].join(":")}function Lg(n){return n.hours&&n.hours<0||n.minutes&&n.minutes<0||n.seconds&&n.seconds<0?"--:--:--":[Wd(n.hours),Wd(n.minutes),Wd(n.seconds)].join(":")}function Wd(n){return n?n<10?`0${n}`:`${n}`:"00"}function XQ(n){return n<10?`00${n}`:n<100?`0${n}`:`${n}`}var Jt=class n extends qn{collectionPath="/pits";collectionRef=vr(this.firestore,this.collectionPath);raceService=S(jt);raceConfigService=S(Qe);activePit=J(void 0);activePitRemainingMilliseconds=J(0);lastRefuelPit=J(void 0);pits=J([]);completedDriverChanges=J(0);lastPit=J(void 0);remainingDriverChanges=J(0);constructor(){super(),We({pits:this.getRacePits(),activeRaceConfig:le(this.raceConfigService.activeRaceConfig),ping:At(1e3)}).pipe(et()).subscribe(({pits:e,activeRaceConfig:t})=>{this.pits.set(e),this.activePit.set(this.getActivePit(e)),this.activePitRemainingMilliseconds.set(this.calculateActivePitRemainingMilliseconds(e,t)),this.lastRefuelPit.set(this.getLastRefuelPit(e)),this.lastPit.set(this.getLastPit(e)),this.completedDriverChanges.set(this.calculateCompletedDriverChanges(e)),this.remainingDriverChanges.set(this.calculateRemainingDriverChanges(e,t))})}create(e){return y(this,null,function*(){return e.id=yield this.generateNextId(),yield this.createData(e.id,e),e})}update(e){return this.updateData(e.id,e)}getRacePits(){return We({pits:gr(this.collectionRef),activeRace:le(this.raceService.activeRace)}).pipe(Gt(this.destroyed),ee(({pits:e,activeRace:t})=>t?e.filter(r=>!r.deleted&&r.raceId===t.id).sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime()):[]))}getActivePit(e){for(let t of e)if(!t.exitTime)return t}calculateActivePitRemainingMilliseconds(e,t){if(!t)return 0;let r=this.getActivePit(e);if(r){let i=new Date().getTime();return rl(r.entryTime.toDate(),t.minPitSeconds).getTime()-i}return 0}getLastRefuelPit(e){return e.filter(r=>r.refuel&&r.exitTime).sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime()).at(0)}getLastPit(e){return e.length===0?void 0:e.sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime()).at(0)}calculateCompletedDriverChanges(e){return e.reduce((t,r)=>t+(r.entryDriverId!==r.exitDriverId?1:0),0)}calculateRemainingDriverChanges(e,t){return t?Math.max(0,t.minDriverChange-this.calculateCompletedDriverChanges(e)):0}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var ui=class n{raceService=S(jt);raceConfigService=S(Qe);pitService=S(Jt);openingTime=J(void 0);closingTime=J(void 0);tyreChangeWindowOpen=J(!1);remainingTyreChange=J(0);constructor(){We({pits:le(this.pitService.pits),activeRace:le(this.raceService.activeRace),raceConfig:le(this.raceConfigService.activeRaceConfig),ping:At(1e3)}).pipe(et()).subscribe(({pits:e,activeRace:t,raceConfig:r})=>{t&&r?(this.openingTime.set(Ho(t.start.toDate(),r.startTyreChangeWindowHour)),this.closingTime.set(Ho(t.start.toDate(),r.endTyreChangeWindowHour)),this.tyreChangeWindowOpen.set(this.isTyreChangeWindowOpen(this.openingTime(),this.closingTime()))):(this.openingTime.set(void 0),this.closingTime.set(void 0),this.tyreChangeWindowOpen.set(!1)),r&&this.remainingTyreChange.set(this.calculateRemainingTyreChange(e,r.minTyreChange))})}isTyreChangeWindowOpen(e,t){if(e&&t){let r=new Date;return r>=e&&r<=t}return!1}calculateRemainingTyreChange(e,t){let r=e.filter(i=>i.tyreChange&&i.exitTime).length;return t-r}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var di=class n{raceService=S(jt);pitService=S(Jt);raceConfigService=S(Qe);tyreService=S(ui);optimizedStint=J(void 0);constructor(){We({activeRace:le(this.raceService.activeRace),endRaceDate:le(this.raceService.endRaceDate),activeRaceConfig:le(this.raceConfigService.activeRaceConfig),remainingDriverChanges:le(this.pitService.remainingDriverChanges),remainingTyreChange:le(this.tyreService.remainingTyreChange),lastPit:le(this.pitService.lastPit),ping:At(1e3)}).pipe(et()).subscribe(({activeRace:e,endRaceDate:t,activeRaceConfig:r,remainingDriverChanges:i,remainingTyreChange:o,lastPit:s})=>{r?this.optimizedStint.set(this.calculateOptimizedStint(e?e.start.toDate():new Date,t||Ho(new Date,r.durationHour),r,i,o,s)):this.optimizedStint.set(void 0)})}calculateOptimizedStint(e,t,r,i,o,s){let a=new Date;if(a>=t)return;let c=this.calculateRemainingPitTime(r,i,o),u=Ki(t,a)-c,d;s&&(s.exitTime?d=s.exitTime.toDate():d=rl(s.entryTime.toDate(),r.minPitSeconds));let v=(Ki(t,d||e)-c)/(i+1),w=u/i;return{avgStintMillisecondsTime:v,laps:Math.floor(v/r.referenceLapTimeMillisecond),avgStintMillisecondsIfDriverChangedNow:w,lapsIfDriverChangeNow:Math.floor(w/r.referenceLapTimeMillisecond)}}calculateRemainingPitTime(e,t,r){let i=t-r,o=cl(e.minPitSeconds*i),s=cl(e.minPitWithTyreChangeSeconds*r);return o+s}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var Bt=class n extends qn{collectionPath="/stints";collectionRef=vr(this.firestore,this.collectionPath);raceService=S(jt);raceConfigService=S(Qe);stintOptimizerService=S(di);activeRace=this.raceService.activeRace;stints=J([]);activeStint=J(void 0);activeStintTimeOnTrack=J(0);activeStintLaps=J(0);activeStintRemainingTimeOnTrack=J(0);activeStintRemainingLaps=J(0);activeStintGainedTimeOnTrack=J(0);activeStintGainedLaps=J(0);constructor(){super(),We({stints:this.getRaceStints(),activeRaceConfig:le(this.raceConfigService.activeRaceConfig),optimizedStint:le(this.stintOptimizerService.optimizedStint),ping:At(1e3)}).pipe(et()).subscribe(({stints:e,activeRaceConfig:t,optimizedStint:r})=>{this.stints.set(e),this.activeStint.set(this.getActiveStint(e)),this.activeStintTimeOnTrack.set(this.calculateActiveStintTimeOnTrack(this.activeStint())),this.activeStintLaps.set(this.calculateActiveStintLaps(this.activeStintTimeOnTrack(),t)),this.activeStintRemainingTimeOnTrack.set(this.calculateActiveStintRemainingTimeOnTrack(this.activeStintTimeOnTrack(),r)),this.activeStintRemainingLaps.set(this.calculateActiveStintRemainingLaps(this.activeStintLaps(),r)),this.activeStintGainedTimeOnTrack.set(this.calculateActiveStintGainedTimeOnTrack(this.activeStintTimeOnTrack(),r)),this.activeStintGainedLaps.set(this.calculateActiveStintGainedLaps(this.activeStintLaps(),r))})}create(e){return y(this,null,function*(){return e.id=yield this.generateNextId(),yield this.createData(e.id,e),e})}update(e){return y(this,null,function*(){return yield this.updateData(e.id,e),e})}getRaceStints(){return We({stints:gr(this.collectionRef),activeRace:le(this.activeRace)}).pipe(Gt(this.destroyed),ee(({stints:e,activeRace:t})=>t?e.filter(r=>!r.deleted&&r.raceId===t.id).sort((r,i)=>i.startDate.toDate().getTime()-r.startDate.toDate().getTime()):[]))}getActiveStint(e){for(let t of e)if(!t.endDate)return t}calculateActiveStintTimeOnTrack(e){return e?new Date().getTime()-e.startDate.toDate().getTime():0}calculateActiveStintLaps(e,t){return e>=0&&t?Math.floor(e/t.referenceLapTimeMillisecond):0}calculateActiveStintRemainingTimeOnTrack(e,t){return e>=0&&t?t.avgStintMillisecondsTime-e:0}calculateActiveStintRemainingLaps(e,t){let r=0;return e>=0&&t&&(r=t.laps-e),r>0?r:0}calculateActiveStintGainedTimeOnTrack(e,t){let r=0;return e>=0&&t&&(r=t.avgStintMillisecondsTime-e),r<0?Math.abs(r):0}calculateActiveStintGainedLaps(e,t){let r=0;return e>=0&&t&&(r=t.laps-e),r<0?Math.abs(r):0}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var ll=class n{raceService=S(jt);stintService=S(Bt);pitService=S(Jt);stintOptimizerService=S(di);activeRace=this.raceService.activeRace;activeStint=this.stintService.activeStint;activePit=this.pitService.activePit;optimizedStintMilliseconds=Re(()=>{let e=this.stintOptimizerService.optimizedStint();return e?e.avgStintMillisecondsTime:0});startRace(e){return y(this,null,function*(){let t=this.createRace(),r=yield this.raceService.create(t);r&&(yield this.startStint(r.id,e,r.start))})}pitIn(e,t,r){return y(this,null,function*(){let i=this.activeRace(),o=this.activeStint();if(i&&o){let s=this.createPit(o.driverId,e,i.id,t,r),a=yield this.pitService.create(s);yield this.closeActiveStint(a.entryTime)}})}pitOut(){return y(this,null,function*(){let e=this.activeRace(),t=this.activePit();if(e&&t){let r=Nt.now();yield this.closeActivePit(r),yield this.startStint(e.id,t.exitDriverId,r)}})}startStint(e,t,r){return y(this,null,function*(){let i=this.createStint(e,t,r);return yield this.stintService.create(i),i})}closeActiveStint(e){return y(this,null,function*(){let t=this.activeStint();t&&(t.endDate=e,yield this.stintService.update(t))})}closeActivePit(e){return y(this,null,function*(){let t=this.activePit();t&&(t.exitTime=e,yield this.pitService.update(t))})}createRace(){return{id:"1",start:Nt.now(),deleted:!1}}createStint(e,t,r){return{id:"1",deleted:!1,driverId:t,endDate:null,optimumMilliseconds:this.optimizedStintMilliseconds(),raceId:e,startDate:r}}createPit(e,t,r,i,o){return{id:"1",entryDriverId:e,entryTime:Nt.now(),exitDriverId:t,exitTime:null,raceId:r,refuel:i,tyreChange:o,deleted:!1}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var hV=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(Me(bi),Me(lr))};static \u0275dir=at({type:n})}return n})(),Zd=(()=>{class n extends hV{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rr(n)))(i||n)}})();static \u0275dir=at({type:n,features:[jn]})}return n})(),pl=new q(""),eZ={provide:pl,useExisting:ar(()=>Pb),multi:!0},Pb=(()=>{class n extends Zd{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rr(n)))(i||n)}})();static \u0275dir=at({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&ce("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[ei([eZ]),jn]})}return n})(),tZ={provide:pl,useExisting:ar(()=>ml),multi:!0};function nZ(){let n=Ai()?Ai().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var rZ=new q(""),ml=(()=>{class n extends hV{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!nZ())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(Me(bi),Me(lr),Me(rZ,8))};static \u0275dir=at({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ce("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[ei([tZ]),jn]})}return n})();function Nb(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var qg=new q(""),fV=new q("");function iZ(n){return e=>{if(Nb(e.value)||Nb(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function oZ(n){return Nb(n.value)?{required:!0}:null}function rV(n){return null}function pV(n){return n!=null}function mV(n){return Is(n)?lt(n):n}function gV(n){let e={};return n.forEach(t=>{e=t!=null?U(U({},e),t):e}),Object.keys(e).length===0?null:e}function vV(n,e){return e.map(t=>t(n))}function sZ(n){return!n.validate}function yV(n){return n.map(e=>sZ(e)?e:t=>e.validate(t))}function aZ(n){if(!n)return null;let e=n.filter(pV);return e.length==0?null:function(t){return gV(vV(t,e))}}function kb(n){return n!=null?aZ(yV(n)):null}function cZ(n){if(!n)return null;let e=n.filter(pV);return e.length==0?null:function(t){let r=vV(t,e).map(mV);return py(r).pipe(ee(gV))}}function Ob(n){return n!=null?cZ(yV(n)):null}function iV(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function lZ(n){return n._rawValidators}function uZ(n){return n._rawAsyncValidators}function Mb(n){return n?Array.isArray(n)?n:[n]:[]}function Ug(n,e){return Array.isArray(n)?n.includes(e):n===e}function oV(n,e){let t=Mb(e);return Mb(n).forEach(i=>{Ug(t,i)||t.push(i)}),t}function sV(n,e){return Mb(e).filter(t=>!Ug(n,t))}var jg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=kb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ob(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},hl=class extends jg{name;get formDirective(){return null}get path(){return null}},Qd=class extends jg{_parent=null;name=null;valueAccessor=null},Bg=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},dZ={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Bwe=fe(U({},dZ),{"[class.ng-submitted]":"isSubmitted"}),qo=(()=>{class n extends Bg{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Me(Qd,2))};static \u0275dir=at({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&cp("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[jn]})}return n})(),zo=(()=>{class n extends Bg{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Me(hl,10))};static \u0275dir=at({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&cp("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[jn]})}return n})();var qd="VALID",Vg="INVALID",ul="PENDING",zd="DISABLED",fl=class{},$g=class extends fl{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Kd=class extends fl{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Yd=class extends fl{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},dl=class extends fl{status;source;constructor(e,t){super(),this.status=e,this.source=t}};function _V(n){return(zg(n)?n.validators:n)||null}function hZ(n){return Array.isArray(n)?kb(n):n||null}function wV(n,e){return(zg(e)?e.asyncValidators:n)||null}function fZ(n){return Array.isArray(n)?Ob(n):n||null}function zg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function pZ(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Z(1e3,"");if(!r[t])throw new Z(1001,"")}function mZ(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Z(1002,"")})}var Hg=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return dr(this.statusReactive)}set status(e){dr(()=>this.statusReactive.set(e))}_status=Re(()=>this.statusReactive());statusReactive=J(void 0);get valid(){return this.status===qd}get invalid(){return this.status===Vg}get pending(){return this.status==ul}get disabled(){return this.status===zd}get enabled(){return this.status!==zd}errors;get pristine(){return dr(this.pristineReactive)}set pristine(e){dr(()=>this.pristineReactive.set(e))}_pristine=Re(()=>this.pristineReactive());pristineReactive=J(!0);get dirty(){return!this.pristine}get touched(){return dr(this.touchedReactive)}set touched(e){dr(()=>this.touchedReactive.set(e))}_touched=Re(()=>this.touchedReactive());touchedReactive=J(!1);get untouched(){return!this.touched}_events=new st;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(oV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(oV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(sV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(sV(e,this._rawAsyncValidators))}hasValidator(e){return Ug(this._rawValidators,e)}hasAsyncValidator(e){return Ug(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(fe(U({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Yd(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Yd(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(fe(U({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Kd(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Kd(!0,r))}markAsPending(e={}){this.status=ul;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new dl(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(fe(U({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=zd,this.errors=null,this._forEachChild(i=>{i.disable(fe(U({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new $g(this.value,r)),this._events.next(new dl(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(fe(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=qd,this._forEachChild(r=>{r.enable(fe(U({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(fe(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===qd||this.status===ul)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new $g(this.value,t)),this._events.next(new dl(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(fe(U({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zd:qd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ul,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=mV(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new dl(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Kt,this.statusChanges=new Kt}_calculateStatus(){return this._allControlsDisabled()?zd:this.errors?Vg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ul)?ul:this._anyControlsHaveStatus(Vg)?Vg:qd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Kd(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Yd(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){zg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=hZ(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=fZ(this._rawAsyncValidators)}},Wg=class extends Hg{constructor(e,t,r){super(_V(t),wV(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){mZ(this,!0,e),Object.keys(e).forEach(r=>{pZ(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Gg=new q("",{providedIn:"root",factory:()=>Kg}),Kg="always";function gZ(n,e){return[...e.path,n]}function EV(n,e,t=Kg){IV(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),yZ(n,e),wZ(n,e),_Z(n,e),vZ(n,e)}function aV(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function vZ(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function IV(n,e){let t=lZ(n);e.validator!==null?n.setValidators(iV(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=uZ(n);e.asyncValidator!==null?n.setAsyncValidators(iV(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();aV(e._rawValidators,i),aV(e._rawAsyncValidators,i)}function yZ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&TV(n,e)})}function _Z(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&TV(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function TV(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function wZ(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function EZ(n,e){n==null,IV(n,e)}function IZ(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function TZ(n){return Object.getPrototypeOf(n.constructor)===Zd}function CZ(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function bZ(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===ml?t=o:TZ(o)?r=o:i=o}),i||r||t||null}var DZ={provide:hl,useExisting:ar(()=>Qi)},Gd=Promise.resolve(),Qi=(()=>{class n extends hl{callSetDisabledState;get submitted(){return dr(this.submittedReactive)}_submitted=Re(()=>this.submittedReactive());submittedReactive=J(!1);_directives=new Set;form;ngSubmit=new Kt;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Wg({},kb(t),Ob(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Gd.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),EV(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Gd.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Gd.then(()=>{let r=this._findContainer(t.path),i=new Wg({});EZ(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Gd.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Gd.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),CZ(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(Me(qg,10),Me(fV,10),Me(Gg,8))};static \u0275dir=at({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&ce("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ei([DZ]),jn]})}return n})();function cV(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function lV(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var SZ=class extends Hg{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(_V(t),wV(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),zg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(lV(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){cV(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){cV(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){lV(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var AZ={provide:Qd,useExisting:ar(()=>Zi)},uV=Promise.resolve(),Zi=(()=>{class n extends Qd{_changeDetectorRef;callSetDisabledState;control=new SZ;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Kt;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=bZ(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),IZ(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){EV(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){uV.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Eu(r);uV.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?gZ(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(Me(hl,9),Me(qg,10),Me(fV,10),Me(pl,10),Me(Ro,8),Me(Gg,8))};static \u0275dir=at({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[ei([AZ]),jn,Io]})}return n})(),Go=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=at({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),RZ={provide:pl,useExisting:ar(()=>Jd),multi:!0},Jd=(()=>{class n extends Zd{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rr(n)))(i||n)}})();static \u0275dir=at({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&ce("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[ei([RZ]),jn]})}return n})();var xZ=new q("");var NZ={provide:pl,useExisting:ar(()=>gl),multi:!0};function CV(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function MZ(n){return n.split(":")[0]}var gl=(()=>{class n extends Zd{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=CV(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=MZ(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rr(n)))(i||n)}})();static \u0275dir=at({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ce("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ei([NZ]),jn]})}return n})(),Yg=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(CV(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(Me(lr),Me(bi),Me(gl,9))};static \u0275dir=at({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),PZ={provide:pl,useExisting:ar(()=>bV),multi:!0};function dV(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function kZ(n){return n.split(":")[0]}var bV=(()=>{class n extends Zd{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],u=this._getOptionValue(c.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=kZ(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rr(n)))(i||n)}})();static \u0275dir=at({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ce("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ei([PZ]),jn]})}return n})(),Qg=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(dV(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(dV(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(Me(lr),Me(bi),Me(bV,9))};static \u0275dir=at({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function OZ(n){return typeof n=="number"?n:parseFloat(n)}var DV=(()=>{class n{_validator=rV;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):rV,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=at({type:n,features:[Io]})}return n})();var FZ={provide:qg,useExisting:ar(()=>Xd),multi:!0},Xd=(()=>{class n extends DV{min;inputName="min";normalizeInput=t=>OZ(t);createValidator=t=>iZ(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rr(n)))(i||n)}})();static \u0275dir=at({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&wu("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[ei([FZ]),jn]})}return n})(),LZ={provide:qg,useExisting:ar(()=>eh),multi:!0};var eh=(()=>{class n extends DV{required;inputName="required";normalizeInput=Eu;createValidator=t=>oZ;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Rr(n)))(i||n)}})();static \u0275dir=at({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&wu("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[ei([LZ]),jn]})}return n})();var SV=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Do({type:n});static \u0275inj=Eo({})}return n})();var Ko=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Gg,useValue:t.callSetDisabledState??Kg}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Do({type:n});static \u0275inj=Eo({imports:[SV]})}return n})(),AV=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:xZ,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Gg,useValue:t.callSetDisabledState??Kg}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Do({type:n});static \u0275inj=Eo({imports:[SV]})}return n})();var Jg=class n extends qn{collectionPath="/laps";collectionRef=vr(this.firestore,this.collectionPath);raceService=S(jt);laps=J([]);constructor(){super(),We({laps:this.getRaceLaps(),activeRace:le(this.raceService.activeRace)}).pipe(et()).subscribe(e=>this.laps.set(e.laps))}getRaceLaps(){return We({laps:gr(this.collectionRef),activeRace:le(this.raceService.activeRace)}).pipe(Gt(this.destroyed),ee(({laps:e,activeRace:t})=>t?e.filter(r=>!r.deleted&&r.raceId===t.id):[]))}create(e){return y(this,null,function*(){return e.id=yield this.generateNextId(),yield this.createData(e.id,e),e})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ir=class n extends qn{collectionPath="/drivers";collectionRef=vr(this.firestore,this.collectionPath);lapService=S(Jg);stintService=S(Bt);raceConfigService=S(Qe);drivers=J([]);driversReferenceLapTimeMap=J(new Map);driversTimeOnTrackMap=J(new Map);driversTimeOnTrackWarningMap=J(new Map);driversStintCountMap=J(new Map);driverWithMoreTimeFromLastStint=J(void 0);driversTimeFromLastStintMap=J(new Map);driversTimeOnTrackWarningCount=Re(()=>{let e=this.driversTimeOnTrackWarningMap(),t=0;return e.forEach(r=>{r&&t++}),t});constructor(){super(),We({drivers:this.getAll(),laps:le(this.lapService.laps),stints:le(this.stintService.stints),activeRaceConfig:le(this.raceConfigService.activeRaceConfig),ping:At(1e3)}).pipe(et()).subscribe(({drivers:e,laps:t,stints:r,activeRaceConfig:i})=>{this.drivers.set(e),this.driversReferenceLapTimeMap.set(this.createDriverReferenceLapTimeMap(t,e)),this.driversTimeOnTrackMap.set(this.createDriverTrackTimeMap(r,e)),this.driversTimeOnTrackWarningMap.set(this.createDriversTimeOnTrackWarningMap(this.driversTimeOnTrackMap(),i)),this.driversStintCountMap.set(this.createDriverStintCountMap(r,e)),this.driverWithMoreTimeFromLastStint.set(this.getDriverWithMoreTimeFromLastStint(r,e)),this.driversTimeFromLastStintMap.set(this.createDriversTimeFromLastStintMap(r,e))})}getAll(){return gr(this.collectionRef).pipe(Gt(this.destroyed),ee(e=>e.map(t=>t).filter(t=>!t.deleted)))}createDriverReferenceLapTimeMap(e,t){let r=new Map;t.forEach(o=>{r.set(o.id,0)});let i=e.reduce((o,s)=>(o[s.driverId]||(o[s.driverId]=[]),o[s.driverId].push(s.millisecondsTime),o),{});for(let o in i){let s=i[o],a=s.reduce((c,u)=>c+u,0)/s.length;r.set(o,a)}return r}createDriverTrackTimeMap(e,t){let r=new Map;return t.forEach(i=>{r.set(i.id,0)}),e.forEach(i=>{let o;i.endDate?o=i.endDate.toDate().getTime()-i.startDate.toDate().getTime():o=new Date().getTime()-i.startDate.toDate().getTime(),r.has(i.driverId)?r.set(i.driverId,r.get(i.driverId)+o):r.set(i.driverId,o)}),r}createDriversTimeOnTrackWarningMap(e,t){let r=new Map;if(t){let i=Rb(t.minDriverOnTrackHour),o=Rb(t.maxDriverOnTrackHour),s=Fg(t.warningDriverOnTrackThresholdMinute);e.forEach((a,c)=>{let u=a<i,d=o-a<=s;r.set(c,u||d)})}return r}createDriverStintCountMap(e,t){let r=new Map;return t.forEach(i=>{r.set(i.id,0)}),e.forEach(i=>{r.has(i.driverId)?r.set(i.driverId,r.get(i.driverId)+1):r.set(i.driverId,1)}),r}getDriverWithMoreTimeFromLastStint(e,t){if(t.length===0)return;let r,i=this.createDriversTimeFromLastStintMap(e,t),o=e.find(u=>u.endDate===null)?.driverId,s=new Map(t.map(u=>[u.id,u])),a=-1,c=!1;return i.forEach((u,d)=>{d!==o&&(u===0?(!c||c&&u>a)&&(a=u,r=s.get(d),c=!0):!c&&u>a&&(a=u,r=s.get(d)))}),r}createDriversTimeFromLastStintMap(e,t){let r=new Map;return t.forEach(i=>{let o=e.filter(s=>s.driverId===i.id).sort((s,a)=>a.startDate.toDate().getTime()-s.startDate.toDate().getTime()).at(0);o&&o.endDate?r.set(i.id,new Date().getTime()-o.endDate.toDate().getTime()):r.set(i.id,0)}),r}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};function VZ(n,e){if(n&1&&(T(0,"option",7),R(1),C()),n&2){let t=e.$implicit;Q("value",t.id),k(),z(" ",t.raceName," ")}}function UZ(n,e){if(n&1){let t=Di();T(0,"div",0)(1,"div",2)(2,"form")(3,"label",3),R(4,"Start driver"),C(),T(5,"select",4),Nr("ngModelChange",function(i){pt(t);let o=H();return Xr(o.selectedDriver,i)||(o.selectedDriver=i),mt(i)}),ce("change",function(){pt(t);let i=H();return mt(i.updateDriverId())}),X(6,VZ,2,2,"option",5),C()()(),T(7,"button",6),ce("click",function(){pt(t);let i=H();return mt(i.startRace())}),R(8," Start race "),C()()}if(n&2){let t=H();k(5),xr("ngModel",t.selectedDriver),k(),Q("ngForOf",t.drivers())}}function jZ(n,e){if(n&1&&(T(0,"div",1),R(1),C()),n&2){let t=H();k(),z(" ",t.endRaceCountdown," ")}}var Xg=class n{raceService=S(jt);raceConfigService=S(Qe);raceManagerService=S(ll);driverService=S(Ir);drivers=this.driverService.drivers;endRaceDate=this.raceService.endRaceDate;endRaceCountdown="--:--:--";selectedDriver="1";constructor(){We({endRaceDate:le(this.endRaceDate),ping:At(1e3)}).pipe(et()).subscribe(e=>{this.endRaceCountdown=aa(e.endRaceDate)}),Pr(()=>{let e=this.raceConfigService.activeRaceConfig();e&&(this.selectedDriver=e.startRaceDriverId)})}startRace(){this.raceManagerService.startRace(this.selectedDriver)}updateDriverId(){this.raceConfigService.updateStartRaceDriverId(this.selectedDriver)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-race"]],decls:2,vars:1,consts:[[1,"flex","items-center","justify-center"],[1,"text-2xl","md:text-4xl","font-bold","font-mono","dark:text-white"],[1,"font-bold","mr-2"],["for","driverSelect",1,"mr-2"],["id","driverSelect","name","driverSelect",1,"border","rounded","p-1",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded",3,"click"],[3,"value"]],template:function(t,r){t&1&&X(0,UZ,9,2,"div",0)(1,jZ,2,1,"div",1),t&2&&ie(r.endRaceDate()?1:0)},dependencies:[Ko,Go,Yg,Qg,gl,qo,zo,Zi,Qi,$n],encapsulation:2})};var BZ=n=>({"mb-2":n}),$Z=n=>({"animate-bounce":n});function HZ(n,e){if(n&1&&(T(0,"div",4),R(1),C()),n&2){let t=H();k(),z(" Remaining: ",t.remainingTyreChange()," ")}}function WZ(n,e){n&1&&(T(0,"div",5),R(1," Completed! "),C())}function qZ(n,e){if(n&1&&(T(0,"div",6),R(1," Window open "),C()),n&2){let t=H();Q("ngClass",nt(1,$Z,t.remainingTyreChange()>0))}}function zZ(n,e){n&1&&(T(0,"div",7),R(1," Window closed "),C())}function GZ(n,e){if(n&1&&(R(0),So(1,"date")),n&2){let t=H(2);z(" ",Ao(1,1,t.openingTime(),"HH:mm:ss")," ")}}function KZ(n,e){n&1&&R(0," --:--:-- ")}function YZ(n,e){if(n&1&&(R(0),So(1,"date")),n&2){let t=H(2);z(" ",Ao(1,1,t.closingTime(),"HH:mm:ss")," ")}}function QZ(n,e){n&1&&R(0," --:--:-- ")}function ZZ(n,e){if(n&1&&(T(0,"div",8)(1,"div")(2,"div",9),R(3,"Opening time"),C(),T(4,"div",10),X(5,GZ,2,4)(6,KZ,1,0),C()(),T(7,"div")(8,"div",11),R(9,"Opening in"),C(),T(10,"div",12),R(11),C()()(),_e(12,"hr",13),T(13,"div",14)(14,"div")(15,"div",9),R(16,"Closing time"),C(),T(17,"div",10),X(18,YZ,2,4)(19,QZ,1,0),C()(),T(20,"div")(21,"div",11),R(22,"Closing in"),C(),T(23,"div",12),R(24),C()()()),n&2){let t=H();k(5),ie(t.openingTime()?5:6),k(6),z(" ",t.countdownOpeningTime()," "),k(7),ie(t.closingTime()?18:19),k(6),z(" ",t.countdownClosingTime()," ")}}var ev=class n{tyreService=S(ui);openingTime=this.tyreService.openingTime;closingTime=this.tyreService.closingTime;remainingTyreChange=this.tyreService.remainingTyreChange;tyreChangeWindowOpen=this.tyreService.tyreChangeWindowOpen;countdownOpeningTime=Re(()=>aa(this.tyreService.openingTime()));countdownClosingTime=Re(()=>aa(this.tyreService.closingTime()));isOpen=!1;constructor(){}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-tyre-change-window"]],decls:10,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default",3,"ngClass"],[1,"bg-red-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(T(0,"div",0)(1,"div",1),ce("click",function(){return r.isOpen=!r.isOpen}),T(2,"div",2),R(3,"\u{1F6DE} \u{1F504} Tyre change"),C(),T(4,"div",3),X(5,HZ,2,1,"div",4)(6,WZ,2,0,"div",5)(7,qZ,2,3,"div",6)(8,zZ,2,0,"div",7),C()(),X(9,ZZ,25,4),C()),t&2&&(k(),Q("ngClass",nt(4,BZ,r.isOpen)),k(4),ie(r.remainingTyreChange()>0?5:6),k(2),ie(r.tyreChangeWindowOpen()?7:8),k(2),ie(r.isOpen?9:-1))},dependencies:[Xa,Ke],encapsulation:2})};var tv=class n{charge=100;batteryColor="bg-green-500";batteryBorderColor="border-gray-200";ngOnChanges(e){this.batteryColor=this.getBackgroundColor(this.charge),this.batteryBorderColor=this.getBorderColor(this.charge)}getBackgroundColor(e){return e<=10?"bg-red-500":e<=25?"bg-orange-500":e<=50?"bg-yellow-500":"bg-green-500"}getBorderColor(e){return e<=10?"border-red-500":e<=25?"border-orange-500":"border-gray-200"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-battery"]],inputs:{charge:"charge"},features:[Io],decls:6,vars:6,consts:[[1,"w-16","lg:w-20","h-8","grid","grid-cols-6","items-center"],[1,"shadow","col-span-5","rounded","border-2","flex","relative",3,"ngClass"],[1,"cursor-default","leading-none","rounded-sm","flex","items-center","m-0.5","py-3",3,"ngClass"],[1,"absolute","right-2","text-black","font-semibold","font-mono"],[1,"ml-0.5","border-r-8","w-1","h-4","rounded-r",3,"ngClass"]],template:function(t,r){t&1&&(T(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),R(4),C()()(),_e(5,"div",4),C()),t&2&&(k(),Q("ngClass",r.batteryBorderColor),k(),Ja("width",r.charge,"%"),Q("ngClass",r.batteryColor),k(2),kt(r.charge),k(),Q("ngClass",r.batteryBorderColor))},dependencies:[Ke],encapsulation:2,changeDetection:0})};var nv=class n{raceService=S(jt);pitService=S(Jt);raceConfigService=S(Qe);lastRefuelTime=J(void 0);emptyFuelTime=J(void 0);remainingFuelPercentage=J(100);remainingFuelLap=J(0);constructor(){We({lastRefuelPit:le(this.pitService.lastRefuelPit),activeRace:le(this.raceService.activeRace),raceConfig:le(this.raceConfigService.activeRaceConfig),ping:At(1e3)}).pipe(et()).subscribe(({lastRefuelPit:e,activeRace:t,raceConfig:r})=>{this.lastRefuelTime.set(this.getLastRefuelDate(e,t)),this.emptyFuelTime.set(this.calculateEmptyFuelTime(this.lastRefuelTime(),r)),this.remainingFuelLap.set(this.calculateRemainingFuelLaps(this.emptyFuelTime(),r)),this.remainingFuelPercentage.set(this.calculateRemainingFuelPercentage(this.emptyFuelTime(),r))})}getLastRefuelDate(e,t){if(e&&e.exitTime)return e.exitTime.toDate();if(t)return t.start.toDate()}calculateEmptyFuelTime(e,t){if(e&&t)return ia(e,t.fuelDurationMinute)}calculateRemainingFuelPercentage(e,t){if(e&&t){let i=Pg(e,new Date)/t.fuelDurationMinute*100,o=Math.max(0,Math.min(i,100));return parseFloat(o.toFixed(0))}return 100}calculateRemainingFuelLaps(e,t){if(e&&t){let r=Ki(e,new Date);return Math.floor(r/t.referenceLapTimeMillisecond)}if(!e&&t){let r=Fg(t.fuelDurationMinute);return Math.floor(r/t.referenceLapTimeMillisecond)}return 0}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var JZ=n=>({"mb-2":n}),XZ=n=>({"animate-bounce":n});function eJ(n,e){if(n&1&&(R(0),So(1,"date")),n&2){let t=H(2);z(" ",Ao(1,1,t.lastRefuelTime(),"HH:mm:ss")," ")}}function tJ(n,e){n&1&&R(0," --:--:-- ")}function nJ(n,e){if(n&1&&(R(0),So(1,"date")),n&2){let t=H(2);z(" ",Ao(1,1,t.emptyFuelTime(),"HH:mm:ss")," ")}}function rJ(n,e){n&1&&R(0," --:--:-- ")}function iJ(n,e){if(n&1){let t=Di();T(0,"div",7)(1,"div")(2,"div",8),R(3,"Last refuel time"),C(),T(4,"div",9),X(5,eJ,2,4)(6,tJ,1,0),C()(),T(7,"div")(8,"div",10),R(9,"Since last refuel"),C(),T(10,"div",11),R(11),C()()(),_e(12,"hr",12),T(13,"div",7)(14,"div")(15,"div",8),R(16,"Empty time"),C(),T(17,"div",9),X(18,nJ,2,4)(19,rJ,1,0),C()(),T(20,"div")(21,"div",10),R(22,"Empty in"),C(),T(23,"div",11),R(24),C()()(),_e(25,"hr",12),T(26,"div",13)(27,"div")(28,"div",8),R(29,"Remaining laps"),C(),T(30,"div",9),R(31),C()(),T(32,"div")(33,"div",10),R(34,"Fuel duration (min)"),C(),T(35,"div",14)(36,"button",15),ce("click",function(){pt(t);let i=H();return mt(i.increaseFuelDuration())}),R(37,"+"),C(),T(38,"form",16),ce("ngSubmit",function(){pt(t);let i=H();return mt(i.onSubmit())}),T(39,"input",17),Nr("ngModelChange",function(i){pt(t);let o=H();return Xr(o.fuelDurationMinute,i)||(o.fuelDurationMinute=i),mt(i)}),C()(),T(40,"button",18),ce("click",function(){pt(t);let i=H();return mt(i.decreaseFuelDuration())}),R(41,"-"),C()()()()}if(n&2){let t=H();k(5),ie(t.lastRefuelTime()?5:6),k(6),z(" ",t.sinceLastRefuel()," "),k(7),ie(t.emptyFuelTime()?18:19),k(6),z(" ",t.emptyFuelCountdown()," "),k(7),z(" ",t.remainingFuelLap()," "),k(8),xr("ngModel",t.fuelDurationMinute)}}var rv=class n{raceConfigService=S(Qe);fuelService=S(nv);remainingFuelPercentage=this.fuelService.remainingFuelPercentage;remainingFuelLap=this.fuelService.remainingFuelLap;emptyFuelTime=this.fuelService.emptyFuelTime;lastRefuelTime=this.fuelService.lastRefuelTime;emptyFuelCountdown=Re(()=>aa(this.emptyFuelTime()));sinceLastRefuel=Re(()=>Er(this.lastRefuelTime(),new Date));warning=Re(()=>this.remainingFuelPercentage()<=20);remainingColor=Re(()=>this.getRemainingColor(this.remainingFuelPercentage()));isOpen=!0;fuelDurationMinute=0;constructor(){Pr(()=>{let e=this.raceConfigService.activeRaceConfig();e&&(this.fuelDurationMinute=e.fuelDurationMinute)})}onSubmit(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute)}increaseFuelDuration(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute+1)}decreaseFuelDuration(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute-1)}getRemainingColor(e){return e<=10?"bg-red-500":e<=25?"bg-orange-500":e<=50?"bg-yellow-500":"bg-green-500"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-fuel"]],decls:11,vars:12,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center",3,"ngClass"],[1,"px-2","py-1","w-36","rounded-lg","text-left","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[1,"px-2","py-1","rounded-lg","text-center","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[3,"charge"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"],[1,"flex","justify-end"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","mr-1","rounded",3,"click"],[1,"text-right",3,"ngSubmit"],["type","number","id","fuelDuration","name","fuelDuration","required","","min","1",1,"border","rounded-lg","px-2","py-1","w-20","text-right",3,"ngModelChange","ngModel"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","ml-1","rounded",3,"click"]],template:function(t,r){t&1&&(T(0,"div",0)(1,"div",1),ce("click",function(){return r.isOpen=!r.isOpen}),T(2,"div",2),R(3,"\u26FD\uFE0F Fuel"),C(),T(4,"div",3)(5,"div",4),R(6),C(),T(7,"div",5),R(8),C(),_e(9,"app-battery",6),C()(),X(10,iJ,42,6),C()),t&2&&(k(),Q("ngClass",nt(8,JZ,r.isOpen)),k(3),Q("ngClass",nt(10,XZ,r.warning())),k(),Q("ngClass",r.remainingColor()),k(),z(" Empty: ",r.emptyFuelCountdown()," "),k(),Q("ngClass",r.remainingColor()),k(),z(" Laps: ",r.remainingFuelLap()," "),k(),Q("charge",r.remainingFuelPercentage()),k(),ie(r.isOpen?10:-1))},dependencies:[Ke,Xa,tv,Ko,Go,ml,Jd,qo,zo,eh,Xd,Zi,Qi],encapsulation:2})};var oJ=n=>({"mb-2":n});function sJ(n,e){if(n&1&&(T(0,"div",6)(1,"div")(2,"div",7),R(3,"Optimized AVG time"),C(),T(4,"div",8),R(5),C()(),T(6,"div")(7,"div",9),R(8,"Laps"),C(),T(9,"div",10),R(10),C()()(),_e(11,"hr",11),T(12,"div",12)(13,"div")(14,"div",7),R(15," Optimized AVG time "),T(16,"strong"),R(17,"if driver change now"),C()(),T(18,"div",8),R(19),C()(),T(20,"div")(21,"div",9),R(22,"Laps"),C(),T(23,"div",10),R(24),C()()()),n&2){let t=H();k(5),z(" ",t.AVGStintTime()," "),k(5),z(" ",t.laps()," "),k(9),z(" ",t.AVGStintTimeIfDriverChangeNow()," "),k(5),z(" ",t.lapsIfDriverChangeNow()," ")}}var iv=class n{stintOptimizerService=S(di);AVGStintTime=Re(()=>{let e=this.stintOptimizerService.optimizedStint();return e?ft(e.avgStintMillisecondsTime):"--:--:--"});laps=Re(()=>{let e=this.stintOptimizerService.optimizedStint();return e?e.laps:0});AVGStintTimeIfDriverChangeNow=Re(()=>{let e=this.stintOptimizerService.optimizedStint();return e?ft(e.avgStintMillisecondsIfDriverChangedNow):"--:--:--"});lapsIfDriverChangeNow=Re(()=>{let e=this.stintOptimizerService.optimizedStint();return e?e.lapsIfDriverChangeNow:0});isOpen=!0;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-stint-optimizer"]],decls:10,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(T(0,"div",0)(1,"div",1),ce("click",function(){return r.isOpen=!r.isOpen}),T(2,"div",2),R(3,"\u{1F9E0} Stint optimizer"),C(),T(4,"div",3)(5,"div",4),R(6),C(),T(7,"div",5),R(8),C()()(),X(9,sJ,25,4),C()),t&2&&(k(),Q("ngClass",nt(4,oJ,r.isOpen)),k(5),z(" Optimum: ",r.AVGStintTime()," "),k(2),z(" Laps: ",r.laps()," "),k(),ie(r.isOpen?9:-1))},dependencies:[Ke],encapsulation:2})};var aJ=n=>({"mb-2":n}),cJ=(n,e)=>({"bg-green-100 font-semibold":n,"hover:bg-gray-50":e}),lJ=n=>({"bg-yellow-500 text-white":n});function uJ(n,e){if(n&1&&(T(0,"div",4),R(1),C()),n&2){let t=H();k(),z(" Warning: ",t.driversTimeOnTrackWarningCount()," ")}}function dJ(n,e){n&1&&(T(0,"div",5),R(1," Completed! "),C())}function hJ(n,e){if(n&1&&(T(0,"tr",17)(1,"td",18),R(2),C(),T(3,"td",19),R(4),C(),T(5,"td",20),R(6),C(),T(7,"td",21)(8,"div",22),R(9),C()(),T(10,"td",23),R(11),C()()),n&2){let t=e.$implicit,r=H(2);Q("ngClass",Mr(7,cJ,t.id===r.activeStintDriverId(),t.id!==r.activeStintDriverId())),k(2),kt(t.id),k(2),kt(t.raceName),k(2),z(" ",r.getDriverStintCount(t.id)," "),k(2),Q("ngClass",nt(10,lJ,r.getDriverTimeOnTrackWarning(t.id))),k(),z(" ",r.getDriverTimeOnTrack(t.id)," "),k(2),z("",r.getDriverTimeFromLastStint(t.id)," ")}}function fJ(n,e){if(n&1&&(T(0,"div",6)(1,"table",7)(2,"thead",8)(3,"tr"),_e(4,"th",9),T(5,"th",10),R(6," Name "),C(),T(7,"th",11),R(8," Stint "),C(),T(9,"th",12),R(10," On track "),C(),T(11,"th",13),R(12," From last stint "),C()()()(),T(13,"div",14)(14,"table",15)(15,"tbody"),X(16,hJ,12,12,"tr",16),C()()()()),n&2){let t=H();k(16),Q("ngForOf",t.drivers())}}var ov=class n{driverService=S(Ir);stintService=S(Bt);drivers=this.driverService.drivers;driversTimeOnTrackWarningCount=this.driverService.driversTimeOnTrackWarningCount;activeStintDriverId=Re(()=>{let e=this.stintService.activeStint();if(e)return e.driverId});isOpen=!0;getDriverTimeOnTrack(e){return ft(this.driverService.driversTimeOnTrackMap().get(e))}getDriverTimeOnTrackWarning(e){return this.driverService.driversTimeOnTrackWarningMap().get(e)||!1}getDriverStintCount(e){return this.driverService.driversStintCountMap().get(e)??0}getDriverTimeFromLastStint(e){return ft(this.driverService.driversTimeFromLastStintMap().get(e))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-driver"]],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","flex-col","overflow-clip"],[1,"w-full","bg-white","table-fixed"],[1,"sticky","top-0"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"py-2","border-b","border-gray-200","text-left","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"flex-1","overflow-y-auto"],[1,"w-full","table-fixed"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-sm","xl:text-base","text-black"],[1,"py-2","border-b","border-gray-200","text-left","text-sm","xl:text-base","text-black"],[1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],[1,"p-1","text-center","rounded",3,"ngClass"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"]],template:function(t,r){t&1&&(T(0,"div",0)(1,"div",1),ce("click",function(){return r.isOpen=!r.isOpen}),T(2,"div",2),R(3,"\u{1F417} Driver"),C(),T(4,"div",3),X(5,uJ,2,1,"div",4)(6,dJ,2,0,"div",5),C()(),X(7,fJ,17,1,"div",6),C()),t&2&&(k(),Q("ngClass",nt(3,aJ,r.isOpen)),k(4),ie(r.driversTimeOnTrackWarningCount()>0?5:6),k(2),ie(r.isOpen?7:-1))},dependencies:[Ke,$n],encapsulation:2})};var sv=class n{raceService=S(jt);stintService=S(Bt);raceConfigService=S(Qe);open=J(!1);openInMilliseconds=J(0);constructor(){We({endRaceDate:le(this.raceService.endRaceDate),activeStint:le(this.stintService.activeStint),activeRaceConfig:le(this.raceConfigService.activeRaceConfig),ping:At(1e3)}).pipe(et()).subscribe(({endRaceDate:e,activeStint:t,activeRaceConfig:r})=>{e&&t&&r?(this.open.set(this.calculatePitLaneOpen(e,t,r)),this.openInMilliseconds.set(this.calculatePitLaneOpenInMilliseconds(t,r))):(this.open.set(!1),this.openInMilliseconds.set(0))})}calculatePitLaneOpenInMilliseconds(e,t){let r=new Date().getTime();return ia(e.startDate.toDate(),t.minStintMinute).getTime()-r}calculatePitLaneOpen(e,t,r){let i=new Date,o=eV(e,r.pitLaneCloseBeforeEndRaceMinute),s=XL(i,o),a=ia(t.startDate.toDate(),r.minStintMinute),c=JL(i,a);return s&&c}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var av=class n{audio=new Audio;constructor(){this.audio.addEventListener("error",e=>console.error("Audio error:",e))}play(){this.audio.play()}playFile(e){this.audio=new Audio(e),this.audio.play()}pause(){this.audio.pause()}stop(){this.audio.pause(),this.audio.currentTime=0}seek(e){this.audio.currentTime=e}setVolume(e){this.audio.volume=e}setLoop(e){this.audio.loop=e}on(e,t){this.audio.addEventListener(e,t)}off(e,t){this.audio.removeEventListener(e,t)}getCurrentTime(){return this.audio.currentTime}getDuration(){return this.audio.duration}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var pJ=n=>({"mb-4":n}),mJ=n=>({"animate-bounce":n});function gJ(n,e){if(n&1&&(T(0,"div",3),R(1),C()),n&2){let t=H();k(),z(" Open in: ",t.pitLaneOpenInMillisecondsString()," ")}}function vJ(n,e){n&1&&(T(0,"div",5),R(1," Open "),C())}function yJ(n,e){n&1&&(T(0,"div",6),R(1," Closed "),C())}function _J(n,e){if(n&1&&(T(0,"option",20),R(1),C()),n&2){let t=e.$implicit;Q("value",t.id),k(),z(" ",t.raceName," ")}}function wJ(n,e){if(n&1){let t=Di();T(0,"div",11),R(1,"PIT SETTINGS"),C(),T(2,"form")(3,"div",12)(4,"label",13),R(5,"\u{1F417} Driver"),C(),T(6,"select",14),Nr("ngModelChange",function(i){pt(t);let o=H(2);return Xr(o.selectedDriver,i)||(o.selectedDriver=i),mt(i)}),ce("change",function(){pt(t);let i=H(2);return mt(i.updateDriverId())}),X(7,_J,2,2,"option",15),C()(),T(8,"div",12)(9,"label",16),R(10,"\u26FD\uFE0F Refueling"),C(),T(11,"input",17),ce("change",function(){pt(t);let i=H(2);return mt(i.updateRefueling())}),Nr("ngModelChange",function(i){pt(t);let o=H(2);return Xr(o.refueling,i)||(o.refueling=i),mt(i)}),C()(),T(12,"div",12)(13,"label",18),R(14,"\u{1F6DE} Tyre change"),C(),T(15,"input",19),Nr("ngModelChange",function(i){pt(t);let o=H(2);return Xr(o.tyreChange,i)||(o.tyreChange=i),mt(i)}),ce("change",function(){pt(t);let i=H(2);return mt(i.updateTyreChange())}),C()()()}if(n&2){let t=H(2);k(6),Q("disabled",t.activePit()!==void 0),xr("ngModel",t.selectedDriver),k(),Q("ngForOf",t.drivers()),k(4),Q("disabled",t.activePit()!==void 0),xr("ngModel",t.refueling),k(4),Q("disabled",t.activePit()!==void 0||!t.tyreChangeWindowOpen()||t.remainingTyreChange()<=0),xr("ngModel",t.tyreChange)}}function EJ(n,e){if(n&1&&(T(0,"div",21),R(1),C()),n&2){let t=H(3);Q("ngClass",nt(2,mJ,t.activePitRemainingMilliseconds()<1e4)),k(),z(" Pit out enabled in: ",t.activePitRemainingMillisecondsString()," ")}}function IJ(n,e){n&1&&(T(0,"div",22),R(1," Pit out ready! "),C())}function TJ(n,e){if(n&1&&X(0,EJ,2,4,"div",21)(1,IJ,2,0,"div",22),n&2){let t=H(2);ie(t.activePitRemainingMilliseconds()>0?0:1)}}function CJ(n,e){if(n&1){let t=Di();T(0,"div",7),X(1,wJ,16,7)(2,TJ,2,1),C(),T(3,"div",8)(4,"button",9),ce("click",function(){pt(t);let i=H();return mt(i.pitIn())}),R(5," Pit in "),C(),T(6,"button",10),ce("click",function(){pt(t);let i=H();return mt(i.pitOut())}),R(7," Pit out "),C()()}if(n&2){let t=H();k(),ie(t.activePit()?2:1),k(3),Q("disabled",!t.pitLaneOpen()),k(2),Q("disabled",!t.activePit()||t.activePit()&&t.activePitRemainingMilliseconds()>0)}}var cv=class n{pitLaneService=S(sv);pitService=S(Jt);driverService=S(Ir);raceManagerService=S(ll);tyreService=S(ui);raceConfigService=S(Qe);audioService=S(av);pitLaneOpen=this.pitLaneService.open;pitLaneOpenInMilliseconds=this.pitLaneService.openInMilliseconds;pitLaneOpenInMillisecondsString=Re(()=>ft(this.pitLaneService.openInMilliseconds()));activePit=this.pitService.activePit;activePitRemainingMilliseconds=this.pitService.activePitRemainingMilliseconds;activePitRemainingMillisecondsString=Re(()=>tV(this.pitService.activePitRemainingMilliseconds()));drivers=this.driverService.drivers;remainingTyreChange=this.tyreService.remainingTyreChange;tyreChangeWindowOpen=this.tyreService.tyreChangeWindowOpen;isOpen=!0;refueling=!1;tyreChange=!1;selectedDriver="1";constructor(){Pr(()=>{let e=this.raceConfigService.activeRaceConfig();e&&(this.selectedDriver=e.nextPitDriverId,this.refueling=e.nextPitRefueling,this.tyreChange=e.nextPitTyreChange)})}pitIn(){return y(this,null,function*(){this.audioService.playFile("assets/box_box_box_box.mp3"),yield this.raceManagerService.pitIn(this.selectedDriver,this.refueling,this.tyreChange)})}pitOut(){return y(this,null,function*(){yield this.raceManagerService.pitOut(),this.raceConfigService.updateNextPitRefueling(!1),this.raceConfigService.updateNextPitTyreChange(!1);let e=this.driverService.driverWithMoreTimeFromLastStint();e&&this.raceConfigService.updateNextPitDriverId(e.id)})}updateDriverId(){this.raceConfigService.updateNextPitDriverId(this.selectedDriver)}updateTyreChange(){this.raceConfigService.updateNextPitTyreChange(this.tyreChange)}updateRefueling(){this.raceConfigService.updateNextPitRefueling(this.refueling)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-pit-lane"]],decls:9,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"flex","items-center"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"bg-red-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","flex-col","items-center","mb-2"],[1,"flex","justify-between"],[1,"bg-green-500","hover:bg-green-700","disabled:bg-green-200","text-white","font-bold","py-2","px-4","rounded",3,"click","disabled"],[1,"bg-red-500","hover:bg-red-700","disabled:bg-red-200","text-white","font-bold","py-2","px-4","rounded",3,"click","disabled"],[1,"font-semibold","mb-2"],[1,"mb-2"],["for","driverSelect",1,"mr-2"],["id","driverSelect","name","driverSelect",1,"border","rounded","p-1",3,"ngModelChange","change","disabled","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","refueling",1,"mr-2"],["type","checkbox","id","refueling","name","refueling",3,"change","ngModelChange","disabled","ngModel"],["for","tyreChange",1,"mr-2"],["type","checkbox","id","tyreChange","name","tyreChange",3,"ngModelChange","change","disabled","ngModel"],[3,"value"],[1,"bg-yellow-500","p-2","rounded-lg","text-white","text-center","text-xl","font-black","hover:cursor-default",3,"ngClass"],[1,"bg-green-500","p-2","rounded-lg","text-white","text-center","text-xl","font-black","hover:cursor-default"]],template:function(t,r){t&1&&(T(0,"div",0)(1,"div",1),ce("click",function(){return r.isOpen=!r.isOpen}),T(2,"div",2),R(3,"\u{1F17F}\uFE0F Pit Lane"),C(),X(4,gJ,2,1,"div",3),T(5,"div",4),X(6,vJ,2,0,"div",5)(7,yJ,2,0,"div",6),C()(),X(8,CJ,8,3),C()),t&2&&(k(),Q("ngClass",nt(4,pJ,r.isOpen)),k(3),ie(r.pitLaneOpenInMilliseconds()>0?4:-1),k(2),ie(r.pitLaneOpen()?6:7),k(2),ie(r.isOpen?8:-1))},dependencies:[Ke,Ko,Go,Yg,Qg,Pb,gl,qo,zo,Zi,Qi,$n],encapsulation:2})};var bJ=n=>({"mb-2":n});function DJ(n,e){if(n&1&&(T(0,"div",4),R(1),C()),n&2){let t=H();k(),z(" Remaining: ",t.remainingDriverChanges()," ")}}function SJ(n,e){n&1&&(T(0,"div",5),R(1," Completed! "),C())}function AJ(n,e){if(n&1&&(T(0,"div",6)(1,"div")(2,"div",7),R(3,"Competed"),C(),T(4,"div",8),R(5),C()(),T(6,"div")(7,"div",9),R(8,"Remaining"),C(),T(9,"div",10),R(10),C()()()),n&2){let t=H();k(5),z(" ",t.completedDriverChanges()," "),k(5),z(" ",t.remainingDriverChanges()," ")}}var lv=class n{pitService=S(Jt);remainingDriverChanges=this.pitService.remainingDriverChanges;completedDriverChanges=this.pitService.completedDriverChanges;isOpen=!1;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-driver-change"]],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"]],template:function(t,r){t&1&&(T(0,"div",0)(1,"div",1),ce("click",function(){return r.isOpen=!r.isOpen}),T(2,"div",2),R(3,"\u{1F417} \u{1F504} Driver change"),C(),T(4,"div",3),X(5,DJ,2,1,"div",4)(6,SJ,2,0,"div",5),C()(),X(7,AJ,11,2,"div",6),C()),t&2&&(k(),Q("ngClass",nt(3,bJ,r.isOpen)),k(4),ie(r.remainingDriverChanges()>0?5:6),k(2),ie(r.isOpen?7:-1))},dependencies:[Ke],encapsulation:2})};var RJ=n=>({"mb-2":n});function xJ(n,e){if(n&1&&(T(0,"div",4),R(1),C(),T(2,"div",5),R(3),C()),n&2){let t=H(2);k(),z(" Remaining: ",t.activeStintRemainingTimeOnTrackString()," "),k(2),z(" Laps: ",t.activeStintRemainingLaps()," ")}}function NJ(n,e){if(n&1&&(T(0,"div",6),R(1),C(),T(2,"div",7),R(3),C()),n&2){let t=H(2);k(),z(" Gaining: ",t.activeStintGainedTimeOnTrackString()," "),k(2),z(" Laps: ",t.activeStintGainedLaps()," ")}}function MJ(n,e){if(n&1&&X(0,xJ,4,2)(1,NJ,4,2),n&2){let t=H();ie(t.activeStintRemainingTimeOnTrack()>0?0:1)}}function PJ(n,e){if(n&1&&R(0),n&2){let t=H(2);z(" ",t.activeStintRemainingTimeOnTrackString()," ")}}function kJ(n,e){n&1&&R(0," --:--:-- ")}function OJ(n,e){if(n&1&&R(0),n&2){let t=H(2);z(" ",t.activeStintRemainingLaps()," ")}}function FJ(n,e){n&1&&R(0," 0 ")}function LJ(n,e){if(n&1&&(T(0,"div",8)(1,"div")(2,"div",9),R(3,"Time on track"),C(),T(4,"div",10),R(5),C()(),T(6,"div")(7,"div",11),R(8,"Laps"),C(),T(9,"div",12),R(10),C()()(),_e(11,"hr",13),T(12,"div",8)(13,"div")(14,"div",9),R(15,"Remaining time on track"),C(),T(16,"div",10),X(17,PJ,1,1)(18,kJ,1,0),C()(),T(19,"div")(20,"div",11),R(21,"Remaining laps"),C(),T(22,"div",12),X(23,OJ,1,1)(24,FJ,1,0),C()()(),_e(25,"hr",13),T(26,"div",14)(27,"div")(28,"div",9),R(29,"Gained time on track"),C(),T(30,"div",10),R(31),C()(),T(32,"div")(33,"div",11),R(34,"Gained laps"),C(),T(35,"div",12),R(36),C()()()),n&2){let t=H();k(5),z(" ",t.activeStintTimeOnTrackString()," "),k(5),z(" ",t.activeStintLaps()," "),k(7),ie(t.activeStint()?17:18),k(6),ie(t.activeStint()?23:24),k(8),z(" ",t.activeStintGainedTimeOnTrackString()," "),k(5),z(" ",t.activeStintGainedLaps()," ")}}var uv=class n{stintService=S(Bt);activeStint=this.stintService.activeStint;activeStintRemainingTimeOnTrack=this.stintService.activeStintRemainingTimeOnTrack;activeStintTimeOnTrackString=Re(()=>ft(this.stintService.activeStintTimeOnTrack()));activeStintRemainingTimeOnTrackString=Re(()=>ft(this.stintService.activeStintRemainingTimeOnTrack()));activeStintGainedTimeOnTrackString=Re(()=>ft(this.stintService.activeStintGainedTimeOnTrack()));activeStintLaps=this.stintService.activeStintLaps;activeStintRemainingLaps=this.stintService.activeStintRemainingLaps;activeStintGainedLaps=this.stintService.activeStintGainedLaps;isOpen=!0;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-active-stint"]],decls:7,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","mr-1","font-medium","hover:cursor-default"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","mr-1","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(T(0,"div",0)(1,"div",1),ce("click",function(){return r.isOpen=!r.isOpen}),T(2,"div",2),R(3,"\u{1F3CE}\uFE0F \u{1F4A8} Active stint"),C(),T(4,"div",3),X(5,MJ,2,1),C()(),X(6,LJ,37,6),C()),t&2&&(k(),Q("ngClass",nt(3,RJ,r.isOpen)),k(4),ie(r.activeStint()?5:-1),k(),ie(r.isOpen?6:-1))},dependencies:[Ke],encapsulation:2})};var VJ=n=>({"mb-2":n}),UJ=(n,e)=>({"bg-green-100 font-semibold":n,"hover:bg-gray-50":e});function jJ(n,e){if(n&1&&(T(0,"tr",19)(1,"td",20),R(2),C(),T(3,"td",21),R(4),C(),T(5,"td",18),R(6),So(7,"date"),C(),T(8,"td",18),R(9),C(),T(10,"td",18),R(11),C()()),n&2){let t=e.$implicit,r=H(2);Q("ngClass",Mr(9,UJ,t.id===r.activeStintId(),t.id!==r.activeStintId())),k(2),kt(t.id),k(2),z("",r.getDriverRacingName(t.driverId)," "),k(2),kt(Ao(7,6,t.startDate.toDate(),"HH:mm:ss")),k(3),z(" ",r.getEndDate(t)," "),k(2),z(" ",r.calculateTimeOnTrack(t.startDate.toDate(),t.endDate==null?null:t.endDate.toDate())," ")}}function BJ(n,e){if(n&1&&(T(0,"div",5)(1,"table",6)(2,"thead",7)(3,"tr"),_e(4,"th",8),T(5,"th",9),R(6,"Driver"),C(),T(7,"th",10),R(8,"Start"),C(),T(9,"th",10),R(10,"End"),C(),T(11,"th",10),R(12,"On track"),C()()()(),T(13,"div",11)(14,"table",12)(15,"tbody"),X(16,jJ,12,12,"tr",13),C()()(),T(17,"div",14)(18,"table",12)(19,"tfoot",15)(20,"tr",16)(21,"td",17),R(22,"Totals"),C(),T(23,"td",18),R(24),C()()()()()()),n&2){let t=H();k(16),Q("ngForOf",t.stints()),k(8),kt(t.calculateTotalTimeOnTrack())}}var dv=class n{stintService=S(Bt);driverService=S(Ir);stints=this.stintService.stints;activeStintId=Re(()=>{let e=this.stintService.activeStint();if(e)return e.id});isOpen=!0;getDriverRacingName(e){let r=this.driverService.drivers().find(i=>i.id===e);return r?r.raceName:""}calculateTimeOnTrack(e,t){return t?Er(e,t):Er(e,new Date)}calculateTotalTimeOnTrack(){let e=this.stintService.stints(),t=0;return e.forEach(r=>{r.endDate?t+=r.endDate.toDate().getTime()-r.startDate.toDate().getTime():t+=new Date().getTime()-r.startDate.toDate().getTime()}),ft(t)}getEndDate(e){if(e.endDate)return Wr(e.endDate.toDate(),"HH:mm:ss");let t=nr(e.startDate.toDate(),e.optimumMilliseconds);return"("+Wr(t,"HH:mm:ss")+")"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-stint"]],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"max-h-72","flex","flex-col","overflow-clip"],[1,"w-full","bg-white","table-fixed"],[1,"sticky","top-0"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-xs","xl:text-base","font-medium","text-gray-700"],[1,"py-2","border-b","border-gray-200","text-left","text-xs","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-xs","xl:text-base","font-medium","text-gray-700"],[1,"flex-1","overflow-y-auto"],[1,"w-full","table-fixed"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"flex"],[1,"sticky","bottom-0-0"],[1,"bg-gray-100","font-bold"],["colspan","6",1,"py-2","px-3","border-b","border-gray-200","text-xs","xl:text-base","text-black"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-xs","xl:text-base","text-black","font-mono"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-gray-200","text-xs","xl:text-base","text-black"],[1,"py-2","border-b","border-gray-200","text-xs","xl:text-base","text-black"]],template:function(t,r){t&1&&(T(0,"div",0)(1,"div",1),ce("click",function(){return r.isOpen=!r.isOpen}),T(2,"div",2),R(3,"\u23F3 Stint"),C(),T(4,"div",3)(5,"div",4),R(6),C()()(),X(7,BJ,25,2,"div",5),C()),t&2&&(k(),Q("ngClass",nt(3,VJ,r.isOpen)),k(5),z(" Total: ",r.stints().length," "),k(),ie(r.isOpen?7:-1))},dependencies:[Ke,$n,Xa],encapsulation:2})};var $J=n=>({"mb-2":n});function HJ(n,e){if(n&1){let t=Di();T(0,"div",5)(1,"div")(2,"div",6),R(3,"Reference time (mills)"),C(),T(4,"div",7)(5,"button",8),ce("click",function(){pt(t);let i=H();return mt(i.increaseReferenceLapTime())}),R(6,"+"),C(),T(7,"form",9),ce("ngSubmit",function(){pt(t);let i=H();return mt(i.onSubmit())}),T(8,"input",10),Nr("ngModelChange",function(i){pt(t);let o=H();return Xr(o.referenceLapTime,i)||(o.referenceLapTime=i),mt(i)}),C()(),T(9,"button",11),ce("click",function(){pt(t);let i=H();return mt(i.decreaseReferenceLapTime())}),R(10,"-"),C()()()()}if(n&2){let t=H();k(8),xr("ngModel",t.referenceLapTime)}}var hv=class n{raceConfigService=S(Qe);isOpen=!0;referenceLapTime=0;referenceLapTimeString="--:--:---";constructor(){Pr(()=>{let e=this.raceConfigService.activeRaceConfig();e&&(this.referenceLapTime=e.referenceLapTimeMillisecond,this.referenceLapTimeString=nV(e.referenceLapTimeMillisecond))})}onSubmit(){this.raceConfigService.updateReferenceLapTime(this.referenceLapTime)}increaseReferenceLapTime(){this.raceConfigService.updateReferenceLapTime(this.referenceLapTime+1)}decreaseReferenceLapTime(){this.raceConfigService.updateReferenceLapTime(this.referenceLapTime-1)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-lap"]],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-center"],[1,"text-gray-600","text-center"],[1,"flex","justify-end"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","mr-1","rounded",3,"click"],[1,"text-right",3,"ngSubmit"],["type","number","id","referenceLapTime","name","referenceLapTime","required","","min","1",1,"border","rounded-lg","px-2","py-1","w-36","text-right",3,"ngModelChange","ngModel"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","ml-1","rounded",3,"click"]],template:function(t,r){t&1&&(T(0,"div",0)(1,"div",1),ce("click",function(){return r.isOpen=!r.isOpen}),T(2,"div",2),R(3,"\u23F1\uFE0F Lap"),C(),T(4,"div",3)(5,"div",4),R(6),C()()(),X(7,HJ,11,1,"div",5),C()),t&2&&(k(),Q("ngClass",nt(3,$J,r.isOpen)),k(5),z(" Reference: ",r.referenceLapTimeString," "),k(),ie(r.isOpen?7:-1))},dependencies:[Ke,Ko,Go,ml,Jd,qo,zo,eh,Xd,Zi,Qi,AV],encapsulation:2})};var WJ=n=>({"mb-2":n}),qJ=(n,e)=>({"bg-green-100 font-semibold":n,"hover:bg-gray-50":e});function zJ(n,e){n&1&&R(0," \u2705 ")}function GJ(n,e){n&1&&R(0," \u2705 ")}function KJ(n,e){n&1&&R(0," \u2705 ")}function YJ(n,e){if(n&1&&(T(0,"tr",20)(1,"td",17),R(2),C(),T(3,"td",21),X(4,zJ,1,0),C(),T(5,"td",22),X(6,GJ,1,0),C(),T(7,"td",22),X(8,KJ,1,0),C(),T(9,"td",23),R(10),C()()),n&2){let t=e.$implicit,r=H(2);Q("ngClass",Mr(6,qJ,t.id===r.activePitId(),t.id!==r.activePitId())),k(2),kt(t.id),k(2),ie(t.entryDriverId!==t.exitDriverId?4:-1),k(2),ie(t.refuel?6:-1),k(2),ie(t.tyreChange?8:-1),k(2),z(" ",r.calculatePitTime(t.entryTime.toDate(),t.exitTime==null?null:t.exitTime.toDate())," ")}}function QJ(n,e){if(n&1&&(T(0,"div",5)(1,"table",6)(2,"thead",7)(3,"tr"),_e(4,"th",8),T(5,"th",9),R(6,"\u{1F417} \u{1F504}"),C(),T(7,"th",9),R(8,"\u26FD\uFE0F"),C(),T(9,"th",9),R(10,"\u{1F6DE} \u{1F504}"),C(),T(11,"th",10),R(12,"Time"),C()()()(),T(13,"div",11)(14,"table",12)(15,"tbody"),X(16,YJ,11,9,"tr",13),C()()(),T(17,"div",14)(18,"table",12)(19,"tfoot",15)(20,"tr",16)(21,"td",17),R(22,"Totals"),C(),T(23,"td",18),R(24),C(),T(25,"td",18),R(26),C(),T(27,"td",18),R(28),C(),T(29,"td",19),R(30),C()()()()()()),n&2){let t=H();k(16),Q("ngForOf",t.pits()),k(8),kt(t.completedDriverChanges()),k(2),kt(t.calculateTotalRefueling()),k(2),kt(t.calculateTotalTyreChanges()),k(2),kt(t.calculateTotalPitTime())}}var fv=class n{pitService=S(Jt);pits=this.pitService.pits;activePitId=Re(()=>{let e=this.pitService.activePit();if(e)return e.id});completedDriverChanges=this.pitService.completedDriverChanges;isOpen=!0;calculatePitTime(e,t){return t?Er(e,t):Er(e,new Date)}calculateTotalPitTime(){let e=this.pitService.pits(),t=0;return e.forEach(r=>{r.exitTime?t+=r.exitTime.toDate().getTime()-r.entryTime.toDate().getTime():t+=new Date().getTime()-r.entryTime.toDate().getTime()}),ft(t)}calculateTotalRefueling(){return this.pitService.pits().filter(e=>e.refuel).length}calculateTotalTyreChanges(){return this.pitService.pits().filter(e=>e.tyreChange).length}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-pit"]],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"max-h-72","flex","flex-col","overflow-clip"],[1,"w-full","bg-white","table-fixed"],[1,"sticky","top-0"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"flex-1","overflow-y-auto"],[1,"w-full","table-fixed"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"flex"],[1,"sticky","bottom-0-0"],[1,"bg-gray-100","font-bold"],[1,"py-2","px-3","border-b","border-gray-200","text-sm","xl:text-base","text-black"],[1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black"],[1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"]],template:function(t,r){t&1&&(T(0,"div",0)(1,"div",1),ce("click",function(){return r.isOpen=!r.isOpen}),T(2,"div",2),R(3,"\u{1F468}\u{1F3FB}\u200D\u{1F527} Pit"),C(),T(4,"div",3)(5,"div",4),R(6),C()()(),X(7,QJ,31,5,"div",5),C()),t&2&&(k(),Q("ngClass",nt(3,WJ,r.isOpen)),k(5),z(" Total: ",r.pits().length," "),k(),ie(r.isOpen?7:-1))},dependencies:[Ke,$n],encapsulation:2})};var pv=class n{stintService=S(Bt);deltaStints=J([]);totalDeltaMilliseconds=J(0);constructor(){We({stints:le(this.stintService.stints),ping:At(1e3)}).pipe(et()).subscribe(({stints:e})=>{let t=this.createDeltaStints(e);this.deltaStints.set(t),this.totalDeltaMilliseconds.set(t.reduce((r,i)=>r+i.delta,0))})}createDeltaStints(e){let t=[];return e.forEach(r=>{t.push(this.createDeltaStint(r))}),t}createDeltaStint(e){let r=(e.endDate?e.endDate.toDate():new Date).getTime()-e.startDate.toDate().getTime(),i=r-e.optimumMilliseconds;return{id:e.id,delta:i,optimum:e.optimumMilliseconds,timeOnTrack:r}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var ZJ=n=>({"mb-2":n}),Fb=(n,e)=>({"bg-yellow-500":n,"bg-green-500":e}),JJ=(n,e)=>({"bg-green-100 font-semibold":n,"hover:bg-gray-50":e});function XJ(n,e){n&1&&R(0," Losing: ")}function eX(n,e){n&1&&R(0," Gaining: ")}function tX(n,e){if(n&1&&(T(0,"tr",19)(1,"td",20),R(2),C(),T(3,"td",17),R(4),C(),T(5,"td",17),R(6),C(),T(7,"td",21)(8,"div",18),R(9),C()()()),n&2){let t=e.$implicit,r=H(2);Q("ngClass",Mr(6,JJ,t.id===r.activeStintId(),t.id!==r.activeStintId())),k(2),kt(t.id),k(2),kt(r.getMillisecondsToTimeString(t.timeOnTrack)),k(2),kt(r.getMillisecondsToTimeString(t.optimum)),k(2),Q("ngClass",Mr(9,Fb,t.delta<0,t.delta>=0)),k(),z(" ",r.getMillisecondsToTimeString(t.delta)," ")}}function nX(n,e){if(n&1&&(T(0,"div",5)(1,"table",6)(2,"thead",7)(3,"tr"),_e(4,"th",8),T(5,"th",9),R(6,"On track"),C(),T(7,"th",9),R(8,"Optimum"),C(),T(9,"th",9),R(10,"Delta"),C()()()(),T(11,"div",10)(12,"table",11)(13,"tbody"),X(14,tX,10,12,"tr",12),C()()(),T(15,"div",13)(16,"table",11)(17,"tfoot",14)(18,"tr",15)(19,"td",16),R(20,"Totals"),C(),T(21,"td",17)(22,"div",18),R(23),C()()()()()()()),n&2){let t=H();k(14),Q("ngForOf",t.deltaStints()),k(8),Q("ngClass",Mr(3,Fb,t.totalDeltaMilliseconds()<0,t.totalDeltaMilliseconds()>=0)),k(),z(" ",t.getMillisecondsToTimeString(t.totalDeltaMilliseconds())," ")}}var mv=class n{stintService=S(Bt);deltaStintService=S(pv);deltaStints=this.deltaStintService.deltaStints;totalDeltaMilliseconds=this.deltaStintService.totalDeltaMilliseconds;activeStintId=Re(()=>{let e=this.stintService.activeStint();if(e)return e.id});isOpen=!0;getMillisecondsToTimeString(e){return ft(Math.abs(e))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-delta-stint"]],decls:10,vars:10,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default",3,"ngClass"],[1,"max-h-72","flex","flex-col","overflow-clip"],[1,"w-full","bg-white","table-fixed"],[1,"sticky","top-0"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-xs","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-xs","xl:text-base","font-medium","text-gray-700"],[1,"flex-1","overflow-y-auto"],[1,"w-full","table-fixed"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"flex"],[1,"sticky","bottom-0-0"],[1,"bg-gray-100","font-bold"],["colspan","5",1,"py-2","px-3","border-b","border-gray-200","text-xs","xl:text-base","text-black"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-xs","xl:text-base","text-black","font-mono"],[1,"p-1","text-center","text-white","rounded",3,"ngClass"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-gray-200","text-xs","xl:text-base","text-black"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-xs","xl:text-base","font-mono"]],template:function(t,r){t&1&&(T(0,"div",0)(1,"div",1),ce("click",function(){return r.isOpen=!r.isOpen}),T(2,"div",2),R(3,"\u{1F9D0} Delta stint"),C(),T(4,"div",3)(5,"div",4),X(6,XJ,1,0)(7,eX,1,0),R(8),C()()(),X(9,nX,24,6,"div",5),C()),t&2&&(k(),Q("ngClass",nt(5,ZJ,r.isOpen)),k(4),Q("ngClass",Mr(7,Fb,r.totalDeltaMilliseconds()<0,r.totalDeltaMilliseconds()>=0)),k(),ie(r.totalDeltaMilliseconds()<0?6:7),k(2),z(" ",r.getMillisecondsToTimeString(r.totalDeltaMilliseconds())," "),k(),ie(r.isOpen?9:-1))},dependencies:[$n,Ke],encapsulation:2})};var gv=class n{stintService=S(Bt);pitService=S(Jt);stintOptimizerService=S(di);raceConfigService=S(Qe);tyreService=S(ui);timelineSteps=J([]);constructor(){We({stints:le(this.stintService.stints),pits:le(this.pitService.pits),remainingDriverChanges:le(this.pitService.remainingDriverChanges),raceConfig:le(this.raceConfigService.activeRaceConfig),optimizedStint:le(this.stintOptimizerService.optimizedStint),remainingTyreChange:le(this.tyreService.remainingTyreChange),ping:At(1e3)}).pipe(et()).subscribe(({stints:e,pits:t,remainingDriverChanges:r,raceConfig:i,optimizedStint:o,remainingTyreChange:s})=>{let a=this.createRealSteps(e,t);if(a=a.sort((c,u)=>c.start.getTime()-u.start.getTime()),r>0&&o&&i){let c=this.createFutureSteps(a.at(a.length-1),r,o,i,s);a.push(...c)}a=a.sort((c,u)=>c.start.getTime()-u.start.getTime()),this.timelineSteps.set(a)})}createRealSteps(e,t){let r=[];return e.forEach(i=>{r.push(this.createTimelineStepFromStint(i))}),t.forEach(i=>{r.push(this.createTimelineStepFromPit(i))}),r}createTimelineStepFromPit(e){return{durationMills:e.exitTime?e.exitTime.toDate().getTime()-e.entryTime.toDate().getTime():void 0,end:e.exitTime?.toDate(),pit:e,start:e.entryTime.toDate(),status:e.exitTime?"DONE":"ACTIVE",stint:void 0,type:"PIT"}}createTimelineStepFromStint(e){return{durationMills:e.endDate?e.endDate.toDate().getTime()-e.startDate.toDate().getTime():void 0,end:e.endDate?.toDate(),pit:void 0,start:e.startDate.toDate(),status:e.endDate?"DONE":"ACTIVE",stint:e,type:"STINT"}}createFutureSteps(e,t,r,i,o){let s=[],a=this.calculateLastEndDateFromRealStep(e,r,i);if(e===void 0||e.type==="PIT"){let u=nr(a,r.avgStintMillisecondsTime);s.push(this.createFutureStintStep(a,u,r.avgStintMillisecondsTime)),a=u}let c=Math.floor(t/2);for(let u=0;u<t;u++){let d=cl(i.minPitSeconds);o>0&&u>=c-Math.floor(o/2)&&u<c+Math.ceil(o/2)&&(d=cl(i.minPitWithTyreChangeSeconds),o--);let f=nr(a,d);s.push(this.createFuturePitStep(a,f,d));let m=nr(f,r.avgStintMillisecondsTime);s.push(this.createFutureStintStep(f,m,r.avgStintMillisecondsTime)),a=m}return s}createFutureStintStep(e,t,r){return{durationMills:r,end:t,pit:void 0,start:e,status:"FUTURE",stint:void 0,type:"STINT"}}createFuturePitStep(e,t,r){return{durationMills:r,end:t,pit:void 0,start:e,status:"FUTURE",stint:void 0,type:"PIT"}}calculateLastEndDateFromRealStep(e,t,r){if(e===void 0)return new Date;let i;return e.type==="PIT"?i=rl(e.start,r.minPitSeconds):i=nr(e.start,t.avgStintMillisecondsTime),i>new Date?i:new Date}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var th=(i=>(i.ABOVE="above",i.BELOW="below",i.LEFT="left",i.RIGHT="right",i))(th||{});var rX=(n,e,t,r)=>({"tooltip--above":n,"tooltip--below":e,"tooltip--left":t,"tooltip--right":r});function iX(n,e){n&1&&_e(0,"hr",2)}function oX(n,e){if(n&1&&(T(0,"div",2),R(1),C(),X(2,iX,1,0,"hr",2)),n&2){let t=H(),r=t.$implicit,i=t.$index,o=t.$count;k(),z(" ",r," "),k(),ie(i!==o-1?2:-1)}}function sX(n,e){if(n&1&&X(0,oX,3,2),n&2){let t=e.$implicit;ie(t!==""?0:-1)}}function aX(n,e){if(n&1&&(_e(0,"hr",2),T(1,"div",3),R(2),C()),n&2){let t=H();k(2),z(" ",t.data==null?null:t.data.footer," ")}}var vv=class n{left=0;top=0;data;position="below";TooltipPosition=th;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["tooltip"]],inputs:{left:"left",top:"top",data:"data",position:"position"},decls:6,vars:12,consts:[[1,"whitespace-pre-line","fixed","bg-black","rounded-lg","shadow-md","p-4","text-white",3,"ngClass"],[1,"font-bold","text-lg","mb-2"],[1,"mb-1"],[1,"text-lg"]],template:function(t,r){t&1&&(T(0,"div",0)(1,"div",1),R(2),C(),Cx(3,sX,1,1,null,null,Tx),X(5,aX,3,1),C()),t&2&&(Ja("left",r.left+"px")("top",r.top+"px"),Q("ngClass",Ax(7,rX,r.position===r.TooltipPosition.ABOVE,r.position===r.TooltipPosition.BELOW,r.position===r.TooltipPosition.LEFT,r.position===r.TooltipPosition.RIGHT)),k(2),z(" ",r.data==null?null:r.data.title," "),k(),bx(r.data==null?null:r.data.paragraphs),k(2),ie((r.data==null?null:r.data.footer)!==""?5:-1))},dependencies:[Ke],styles:[".tooltip--below[_ngcontent-%COMP%]{transform:translate(-50%);margin-top:7px}.tooltip--below[_ngcontent-%COMP%]:before{border-left-color:transparent;border-right-color:transparent;border-top:none;left:calc(50% - 5px);top:-5px}.tooltip--above[_ngcontent-%COMP%]{transform:translate(-50%,-100%);margin-bottom:7px}.tooltip--above[_ngcontent-%COMP%]:before{border-left-color:transparent;border-right-color:transparent;border-bottom:none;left:calc(50% - 5px);bottom:-5px}.tooltip--left[_ngcontent-%COMP%]{transform:translate(calc(-100% - 7px),-50%)}.tooltip--left[_ngcontent-%COMP%]:before{border-top-color:transparent;border-bottom-color:transparent;border-right:none;right:-5px;top:calc(50% - 5px)}.tooltip--right[_ngcontent-%COMP%]{transform:translateY(-50%);margin-left:7px}.tooltip--right[_ngcontent-%COMP%]:before{left:-5px;top:calc(50% - 5px)}"]})};var yv=class n{elementRef=S(lr);viewContainerRef=S(Es);document=S(Bn);tooltipData;tooltipPosition="below";tooltipComponent;hideTooltipTimeout;onMouseEnter(){this.tooltipComponent||(this.tooltipComponent=this.viewContainerRef.createComponent(vv),this.document.body.appendChild(this.tooltipComponent.location.nativeElement),this.setTooltipComponentProperties(),this.tooltipComponent.hostView.detectChanges())}onMouseLeave(){this.removeTooltip()}removeTooltip(){this.tooltipComponent&&(this.tooltipComponent.destroy(),this.tooltipComponent=void 0,this.hideTooltipTimeout&&(clearTimeout(this.hideTooltipTimeout),this.hideTooltipTimeout=void 0))}setTooltipComponentProperties(){if(!this.tooltipComponent)return;this.tooltipComponent.instance.data=this.tooltipData,this.tooltipComponent.instance.position=this.tooltipPosition;let{left:e,right:t,top:r,bottom:i}=this.elementRef.nativeElement.getBoundingClientRect();switch(this.tooltipPosition){case"below":{this.tooltipComponent.instance.left=Math.round((t-e)/2+e),this.tooltipComponent.instance.top=Math.round(i);break}case"above":{this.tooltipComponent.instance.left=Math.round((t-e)/2+e),this.tooltipComponent.instance.top=Math.round(r);break}case"right":{this.tooltipComponent.instance.left=Math.round(t),this.tooltipComponent.instance.top=Math.round(r+(i-r)/2);break}case"left":{this.tooltipComponent.instance.left=Math.round(e),this.tooltipComponent.instance.top=Math.round(r+(i-r)/2);break}default:break}}static \u0275fac=function(t){return new(t||n)};static \u0275dir=at({type:n,selectors:[["","tooltip",""]],hostBindings:function(t,r){t&1&&ce("mouseenter",function(){return r.onMouseEnter()})("mouseleave",function(){return r.onMouseLeave()})},inputs:{tooltipData:"tooltipData",tooltipPosition:"tooltipPosition"}})};function cX(n,e){if(n&1&&(T(0,"div",2),R(1),C()),n&2){let t=H(),r=t.$implicit,i=t.index,o=H(2);Q("ngClass",o.getStintColor(r))("tooltipData",o.getStintTooltipInfo(r))("tooltipPosition",o.getTooltipPosition(i)),k(),z(" ",o.getStintIcon(r)," ")}}function lX(n,e){if(n&1&&(T(0,"div",3),R(1),C()),n&2){let t=H(),r=t.$implicit,i=t.index,o=H(2);Q("ngClass",o.getPitColor(r))("tooltipData",o.getPitTooltipInfo(r))("tooltipPosition",o.getTooltipPosition(i)),k(),z(" ",o.getPitIcon(r)," ")}}function uX(n,e){if(n&1&&(hw(0),X(1,cX,2,4,"div",2)(2,lX,2,4,"div",3),fw()),n&2){let t=e.$implicit;k(),ie(t.type==="STINT"?1:2)}}function dX(n,e){if(n&1&&(T(0,"div",0),X(1,uX,3,1,"ng-container",1),C()),n&2){let t=H();k(),Q("ngForOf",t.timelineSteps())}}var _v=class n{timelineService=S(gv);driverService=S(Ir);timelineSteps=this.timelineService.timelineSteps;hide=!1;constructor(){window.addEventListener("resize",this.onResize.bind(this))}onResize(){this.hide=window.innerWidth<=1460}getTooltipPosition(e){return e<5?"right":e>=56?"left":"below"}getStintColor(e){return e.status==="DONE"?"bg-blue-400":e.status==="FUTURE"?"bg-blue-100":"bg-green-500"}getStintIcon(e){return e.status==="ACTIVE"?"\u{1F3CE}\uFE0F":"\u23F3"}getStintTooltipInfo(e){return{footer:"",paragraphs:[this.getStintTimeInfo(e),this.getDriverInfo(e)].filter(Boolean),title:this.getTooltipTitle(e)}}getStintTimeInfo(e){let t=[];t.push("Start: "+Wr(e.start,"HH:mm:ss"));let r=e.stint?e.stint.optimumMilliseconds??0:0;switch(e.status){case"ACTIVE":t.push("On track: "+Er(e.start,new Date)),t.push("Optimum: "+ft(r)),t.push("End: ("+Wr(nr(e.start,r),"HH:mm:ss")+")");break;case"DONE":t.push("On track: "+Er(e.start,e.end)),t.push("Optimum: "+ft(r)),t.push("End: "+(e.end?Wr(e.end,"HH:mm:ss"):""));break;case"FUTURE":t.push("Optimum: "+ft(e.durationMills)),t.push("End: "+(e.end?Wr(e.end,"HH:mm:ss"):""));break}return t.filter(Boolean).join(`
`)}getPitColor(e){return e.status==="DONE"?"bg-amber-400":e.status==="FUTURE"?"bg-amber-100":"bg-green-500"}getPitIcon(e){return e.status==="ACTIVE"?"\u{1F17F}\uFE0F":"\u{1F468}\u{1F3FB}\u200D\u{1F527}"}getPitTooltipInfo(e){let t=[this.getPitTimeInfo(e),this.getDriverInfo(e)].filter(Boolean);return{footer:this.getPitFooter(e),paragraphs:t,title:this.getTooltipTitle(e)}}getPitTimeInfo(e){let t=[];switch(t.push("Enter: "+Wr(e.start,"HH:mm:ss")),e.status){case"ACTIVE":t.push("Time: "+Er(e.start,new Date));break;case"DONE":t.push("Time: "+ft(e.durationMills)),t.push("Exit: "+(e.end?Wr(e.end,"HH:mm:ss"):""));break;case"FUTURE":t.push("Time: "+ft(e.durationMills)),t.push("Exit: "+(e.end?Wr(e.end,"HH:mm:ss"):""));break}return t.filter(Boolean).join(`
`)}getPitFooter(e){let t=[];return e.pit&&(e.pit.entryDriverId!==e.pit.exitDriverId&&t.push("\u{1F417}"),e.pit.refuel&&t.push("\u26FD\uFE0F"),e.pit.tyreChange&&t.push("\u{1F6DE}\uFE0F")),t.join(" | ")}getTooltipTitle(e){if(e.type==="STINT"){let t=e.stint?"("+e.stint.id+")":"";return e.status==="ACTIVE"?"Active stint "+t:e.status==="DONE"?"Stint "+t:"Future stint"}if(e.type==="PIT"){let t=e.pit?"("+e.pit.id+")":"";return e.status==="ACTIVE"?"Active pit "+t:e.status==="DONE"?"Pit "+t:"Future pit"}return""}getDriverInfo(e){if(e.type==="STINT"&&e.stint)return"Driver: "+this.getDriverRacingName(e.stint.driverId);if(e.type==="PIT"&&e.pit){let t="Driver in: "+this.getDriverRacingName(e.pit.entryDriverId),r="Driver out: "+this.getDriverRacingName(e.pit.exitDriverId);return t+`
`+r}return""}getDriverRacingName(e){let r=this.driverService.drivers().find(i=>i.id===e);return r?r.raceName:""}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-timeline"]],decls:1,vars:1,consts:[[1,"mb-3","flex","justify-center","items-center"],[4,"ngFor","ngForOf"],["tooltip","",1,"flex-1","flex","px-1","py-3","justify-center","items-center",3,"ngClass","tooltipData","tooltipPosition"],["tooltip","",1,"flex-0","flex","px-1","py-3","justify-center","items-center",3,"ngClass","tooltipData","tooltipPosition"]],template:function(t,r){t&1&&X(0,dX,2,1,"div",0),t&2&&ie(r.hide?-1:0)},dependencies:[$n,Ke,yv],encapsulation:2})};var wv=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ve({type:n,selectors:[["app-root"]],decls:38,vars:0,consts:[[1,"w-full","h-full","min-h-full","dark:bg-black"],[1,"p-4","grid","grid-cols-2","lg:grid-cols-3","gap-3"],[1,"text-xl","md:text-3xl","dark:text-white","font-semibold"],[1,"text-right","lg:text-center"],[1,"mx-4","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-3","mb-4"],[1,"flex-col","md:h-fit"],[1,"mb-3","lg:mb-4"],[1,"lg:mb-4"],[1,"flex-col"],[1,"flex","flex-col","justify-center","items-center"],["src","assets/cremona_circuit.jpg","alt","Circuito",1,"max-w-sm","md:max-w-md"]],template:function(t,r){t&1&&(T(0,"div",0)(1,"div",1)(2,"div",2),R(3,"\u{1F3CE}\uFE0F dash-boar \u{1F417}"),C(),T(4,"div",3),_e(5,"app-race"),C()(),_e(6,"app-timeline"),T(7,"div",4)(8,"div",5)(9,"div",6),_e(10,"app-pit-lane"),C(),T(11,"div",6),_e(12,"app-driver-change"),C(),T(13,"div",6),_e(14,"app-tyre-change-window"),C(),T(15,"div",7),_e(16,"app-pit"),C()(),T(17,"div",8)(18,"div",6),_e(19,"app-fuel"),C(),T(20,"div",6),_e(21,"app-stint-optimizer"),C(),T(22,"div",6),_e(23,"app-lap"),C(),T(24,"div",7),_e(25,"app-driver"),C()(),T(26,"div",8)(27,"div",6),_e(28,"app-active-stint"),C(),T(29,"div",6),_e(30,"app-stint"),C(),T(31,"div",7),_e(32,"app-delta-stint"),C()()(),T(33,"div",9)(34,"div",2),R(35,"Cremona kart circuit"),C(),_e(36,"img",10),C()(),_e(37,"router-outlet"))},dependencies:[lE,Xg,ev,rv,iv,ov,cv,lv,uv,dv,hv,fv,mv,_v],encapsulation:2})};aN(wv,hL).catch(n=>console.error(n));
