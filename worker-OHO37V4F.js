addEventListener("message",({data:t})=>{let e=t,r=l([...e.values()]),s=b([...e.values()]),n=i(r);postMessage({paces:s,cumulatedTimeLaps:n})});function i(t){let e=new Map;return t.forEach((r,s)=>{let n=r.sort((a,c)=>a.lapNumber-c.lapNumber),m=[];m.push(0);let u=0;n.forEach(a=>{u+=a.lapMilliseconds,m.push(u)}),e.set(s,m)}),e}function l(t){let e=new Map;return t.forEach(r=>{e.has(r.raceNumber)||e.set(r.raceNumber,[]),e.get(r.raceNumber)?.push(r)}),e}function b(t){let e=new Map,r=new Map;return t.filter(s=>!s.pitStop&&!s.deleted).forEach(s=>{r.has(s.raceNumber)||r.set(s.raceNumber,[]),r.get(s.raceNumber)?.push(s)}),r.forEach((s,n)=>{let u=s.filter(a=>!a.pitStop&&a.lapMilliseconds<6e4).sort((a,c)=>c.lapNumber-a.lapNumber).slice(0,4);if(u.length>0){let c=u.reduce((p,o)=>p+o.lapMilliseconds,0)/u.length;e.set(n,c)}}),e}
