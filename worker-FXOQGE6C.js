var g=Math.pow(10,8)*24*60*60*1e3,L=-g;var r=6e4;var D=3600;var a=D*24,b=a*7,R=a*365.2425,h=R/12,Y=h*3,f=Symbol.for("constructDateFrom");function d(e,n){return typeof e=="function"?e(n):e&&typeof e=="object"&&f in e?e[f](n):e instanceof Date?new e.constructor(n):new Date(n)}function i(e,n){return d(n||e,e)}function m(e,n,o){let t=i(e,o?.in);return t.setTime(t.getTime()+n*r),t}function l(e){return n=>{let t=(e?Math[e]:Math.trunc)(n);return t===0?0:t}}function c(e,n){return+i(e)-+i(n)}function p(e,n,o){let t=c(e,n)/r;return l(o?.roundingMethod)(t)}function x(e){return Math.trunc(e*r)}addEventListener("message",({data:e})=>{let n=e.lastRefuelPit,o=e.race,t=e.raceConfig,s=F(n,o),u=y(s,t),M=P(u,t),I=T(u,t);postMessage({lastRefuelTime:s,emptyFuelTime:u,remainingFuelLap:M,remainingFuelPercentage:I})});function F(e,n){if(e?.exitAt)return e.exitAt.toDate();if(n)return n.startedAt.toDate()}function y(e,n){if(e&&n)return m(e,n.fuelDurationMinute)}function T(e,n){if(e&&n){let t=p(e,new Date)/n.fuelDurationMinute*100,s=Math.max(0,Math.min(t,100));return parseFloat(s.toFixed(0))}return 100}function P(e,n){if(e&&n){let o=c(e,new Date);return Math.floor(o/n.referenceLapTimeMillisecond)}if(!e&&n){let o=x(n.fuelDurationMinute);return Math.floor(o/n.referenceLapTimeMillisecond)}return 0}
